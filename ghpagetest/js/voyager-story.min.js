/*! For license information please see voyager-story.min.js.LICENSE.txt */
(()=>{var e={0:(e,t,n)=>{"use strict";n.d(t,{gK:()=>l});var i=n(946);const r={xyzw:["X","Y","Z","W"],rgba:["R","G","B","A"]},o=function(e){return void 0===e||"object"==typeof e&&!Array.isArray(e)?e:{preset:e}},s=function(e,t,n){return{path:t,schema:(n=o(n))?Object.assign({},e,n):e}},a={Number:{preset:0},Integer:{preset:0,step:1,speed:.34,precision:0},Natural:{preset:0,step:1,speed:.34,precision:0,min:0},Unit:{preset:0,min:0,max:1,bar:!0},Percent:{preset:0,min:0,max:1,bar:!0,percent:!0},Vector2:{preset:[0,0]},Vector3:{preset:[0,0,0]},Vector4:{preset:[0,0,0,0]},Matrix2:{preset:[1,0,0,1]},Matrix3:{preset:[1,0,0,0,1,0,0,0,1]},Matrix4:{preset:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},Scale:{preset:1},Scale2:{preset:[1,1]},Scale3:{preset:[1,1,1]},IntVec2:{preset:[0,0],step:1,speed:.34,precision:0},IntVec3:{preset:[0,0,0],step:1,speed:.34,precision:0},ColorRGB:{preset:[1,1,1],semantic:"color",labels:r.rgba,min:0,max:1,bar:!0},ColorRGBA:{preset:[1,1,1,1],semantic:"color",labels:r.rgba,min:0,max:1,bar:!0},Boolean:{preset:!1},String:{preset:""},AssetPath:{preset:"",semantic:"asset-path"},Object:{preset:null,objectType:Object},Event:{preset:0,event:!0}},l={Property:(e,t)=>s(void 0,e,t),Number:(e,t)=>s(a.Number,e,t),Integer:(e,t)=>s(a.Integer,e,t),Natural:(e,t)=>s(a.Natural,e,t),Unit:(e,t)=>s(a.Unit,e,t),Percent:(e,t)=>s(a.Percent,e,t),Vector2:(e,t)=>s(a.Vector2,e,t),Vector3:(e,t)=>s(a.Vector3,e,t),Vector4:(e,t)=>s(a.Vector4,e,t),IntVec2:(e,t)=>s(a.IntVec2,e,t),IntVec3:(e,t)=>s(a.IntVec3,e,t),Matrix2:(e,t)=>s(a.Matrix2,e,t),Matrix3:(e,t)=>s(a.Matrix3,e,t),Matrix4:(e,t)=>s(a.Matrix4,e,t),Scale:(e,t)=>s(a.Scale,e,t),Scale2:(e,t)=>s(a.Scale2,e,t),Scale3:(e,t)=>s(a.Scale3,e,t),ColorRGB:(e,t)=>s(a.ColorRGB,e,t),ColorRGBA:(e,t)=>s(a.ColorRGBA,e,t),Boolean:(e,t)=>s(a.Boolean,e,t),String:(e,t)=>s(a.String,e,t),AssetPath:(e,t)=>s(a.AssetPath,e,t),Enum:(e,t,n)=>function(e,t,n){n=o(n);const r={enum:e,options:(0,i.e)(e),preset:0};return{path:t,schema:n?Object.assign({},r,n):r}}(t,e,n),Option:(e,t,n)=>function(e,t,n){const i={options:e,preset:0};return{path:t,schema:(n=o(n))?Object.assign({},i,n):i}}(t,e,n),Object:(e,t,n)=>function(e,t,n){const i={preset:null,objectType:e};return{path:t,schema:(n=o(n))?Object.assign({},i,n):i}}(t,e,n),Event:(e,t)=>s(a.Event,e,t)}},20:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=n(9185),l=n(9185);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=n(5724),d=n(5724);function u(e,t){var n=new c.DomHandler(void 0,t);return new a.Parser(n,t).end(e),n.root}function h(e,t){return u(e,t).children}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return d.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return d.DomHandler}}),t.parseDocument=u,t.parseDOM=h,t.createDomStream=function(e,t,n){var i=new c.DomHandler(e,t,n);return new a.Parser(i,t)};var p=n(3745);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return s(p).default}}),t.ElementType=o(n(2177));var m=n(1881),f=n(1881);Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return f.getFeed}});var g={xmlMode:!0};t.parseFeed=function(e,t){return void 0===t&&(t=g),(0,m.getFeed)(h(e,t))},t.DomUtils=o(n(1881))},25:(e,t)=>{"use strict";function n(e){const t=e.length;let n,i=0,r=0;for(;r<t;)i++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<t&&(n=e.charCodeAt(r),56320==(64512&n)&&r++);return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},50:(e,t,n)=>{"use strict";let i=n(9493),r=n(3215);class o extends Error{constructor(e,t,n,i,r,s){super(e),this.name="CssSyntaxError",this.reason=e,r&&(this.file=r),i&&(this.source=i),s&&(this.plugin=s),void 0!==t&&void 0!==n&&("number"==typeof t?(this.line=t,this.column=n):(this.line=t.line,this.column=t.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,o)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=i.isColorSupported);let n=e=>e,o=e=>e,s=e=>e;if(e){let{bold:e,gray:t,red:a}=i.createColors(!0);o=t=>e(a(t)),n=e=>t(e),r&&(s=e=>r(e))}let a=t.split(/\r?\n/),l=Math.max(this.line-3,0),c=Math.min(this.line+2,a.length),d=String(c).length;return a.slice(l,c).map((e,t)=>{let i=l+1+t,r=" "+(" "+i).slice(-d)+" | ";if(i===this.line){if(e.length>160){let t=20,i=Math.max(0,this.column-t),a=Math.max(this.column+t,this.endColumn+t),l=e.slice(i,a),c=n(r.replace(/\d/g," "))+e.slice(0,Math.min(this.column-1,t-1)).replace(/[^\t]/g," ");return o(">")+n(r)+s(l)+"\n "+c+o("^")}let t=n(r.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return o(">")+n(r)+s(e)+"\n "+t+o("^")}return" "+n(r)+s(e)}).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=o,o.default=o},66:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>S});var i=n(3074),r=n(9616),o=n(3423),s=n(7297),a=n(3889),l=n(4640),c=n(6351),d=n(3715);const u={[s.a9.High]:16777216,[s.a9.Medium]:4194304,[s.a9.Low]:1048576,[s.a9.Thumb]:262144},h=2*u[s.a9.High];function p(e,t){var n;const i=e.derivatives.select(s.UH.Web3D,t),r=i.findAsset(s.iO.Model);return(null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.imageSize)?Math.pow(r.data.imageSize,2):u[i.data.quality]}const m=[[.04,s.a9.Thumb],[.1,s.a9.Low],[.4,s.a9.Medium]];const f=new l.NRn,g=new l.Pq0,v=new l.Pq0,y=new l.Pq0,b=new l.YHV,A=new l.Pq0,_=new l.YHV,w=new l.PTz,x=new l.kn4,C=(new l.PTz).setFromEuler(new l.O9p(0,0,Math.PI/2)),E=C.clone().conjugate();class M{constructor(e,t){this._prev=0,this._cursor=0,this._buf=new Array(e),"number"==typeof t&&this.reset(t)}push(e,t){return this._buf[this._cursor]=t/(e-this._prev),this._prev=e,this._cursor=(this._cursor+1)%this._buf.length,this.get()}get(){return this._buf.reduce((e,t)=>e+t,0)/this._buf.length}reset(e){for(let t=0;t<this._buf.length;t++)this._buf[t]=e}}class S extends o.Ay{threshold(e){return this._budget-2*u[e]}get settingProperties(){return[this.ins.enabled]}get renderer(){return this.getMainComponent(a.A)}get activeScene(){var e;return null===(e=this.renderer)||void 0===e?void 0:e.activeSceneComponent}constructor(e,t){super(e,t),this._fps=new M(10,60),this._budget=2*u[s.a9.High],this._last_updated=0,this._should_update=!1,this.ins=this.addInputs(S.ins),this.setTextureBudget=()=>{let e=Math.pow(this.renderer.outs.maxTextureSize.value/2,2),t=[];"number"==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4&&(t.push("low CPU"),e/=2),d.yS&&(t.push("mobile device"),e/=2),"number"==typeof navigator.deviceMemory&&navigator.deviceMemory<8&&(t.push("low RAM"),e=Math.min(e,4*u[s.a9.High])),this._budget=Math.max(h,e),t.length&&console.debug(`Lowered Performance budget: ${Math.sqrt(this._budget)} (${t.join(", ")})`)},this._scene=this.activeScene,this.renderer.outs.maxTextureSize.on("value",this.setTextureBudget)}tock(e){var t;const n=null===(t=this._scene)||void 0===t?void 0:t.activeCameraComponent;if(!this.ins.enabled.value||!n)return!1;if(!e.tickUpdated&&!e.tockUpdated&&!this._should_update)return!1;if(e.secondsElapsed<this._last_updated+.5)return this._should_update=!0,!1;this._should_update=!1,this._last_updated=e.secondsElapsed;let i=0;const o=new l.PTz;n.camera.getWorldQuaternion(o),g.set(1,0,0).applyQuaternion(o);const a=o.clone().conjugate();v.set(0,1,0).applyQuaternion(o),C.setFromEuler(new l.O9p(0,0,Math.PI/2));const d=new l.Pq0;let u=this.getGraphComponents(r.A).map(e=>{var t;let u=[],h=[],p=[],C=[];const M=new l.PTz,S=new l.PTz,T=e.outs.unitScale.value;let k=e.transform;for(f.copy(e.localBoundingBox),y.fromArray(e.ins.position.value).multiplyScalar(T),c.DI(e.ins.rotation.value,r.A.rotationOrder,w),A.setScalar(T),x.compose(y,w,A),f.applyMatrix4(x);k;)x.fromArray(k.outs.matrix.value),f.applyMatrix4(x),k=k.parent;let L=new l.Pq0;n.camera.getWorldPosition(L),[[f.min.x,f.min.y,f.min.z],[f.max.x,f.min.y,f.min.z],[f.max.x,f.max.y,f.min.z],[f.max.x,f.max.y,f.max.z],[f.min.x,f.max.y,f.max.z],[f.min.x,f.min.y,f.max.z],[f.max.x,f.min.y,f.max.z],[f.min.x,f.max.y,f.min.z]].map((e,t)=>{y.set(...e).sub(L),n.camera.getWorldQuaternion(o),y.applyQuaternion(a),b.setFromVector3(y),u.push(b.clone());const i=y.clone().applyQuaternion(E);_.setFromVector3(i),h.push(_.clone()),f.getCenter(A),A.sub(L),A.applyQuaternion(a),d.copy(A),M.setFromUnitVectors(d.clone().normalize(),new l.Pq0(0,0,-1)),S.copy(M).conjugate();const r=y.clone().applyQuaternion(M);_.setFromVector3(r),p.push(_.clone());const s=r.clone().applyQuaternion(E);_.setFromVector3(s),C.push(_.clone())}),n.camera.getWorldPosition(y);const D=f.distanceToPoint(y)/n.camera.far;let I=(2*Math.PI)**2,R=0;if(D>0){let e=Math.max(...u.map(e=>e.theta)),t=Math.min(...u.map(e=>e.theta)),n=Math.PI-Math.max(Math.abs(e),Math.abs(t));const i=new l.Pq0(f.min.x,f.min.y,f.min.z);i.sub(L).applyQuaternion(a);f.intersectsPlane(new l.Zcv(g,-g.dot(L)))&&i.z<0&&(n=0);let r=Math.max(...h.map(e=>e.theta)),o=Math.min(...h.map(e=>e.theta)),s=Math.PI-Math.max(Math.abs(r),Math.abs(o));f.intersectsPlane(new l.Zcv(v,-v.dot(L)))&&i.z<0&&(s=0),f.getCenter(y),y.sub(L),y.applyQuaternion(a);const c=Math.max(...p.filter(e=>e.theta<0).map(e=>e.theta)),d=Math.min(...p.filter(e=>e.theta>0).map(e=>e.theta)),m=2*Math.PI-d+c,b=Math.max(...C.filter(e=>e.theta<0).map(e=>e.theta)),A=Math.min(...C.filter(e=>e.theta>0).map(e=>e.theta)),_=2*Math.PI-A+b;I=Math.abs(m*_),R=new l.I9Y(n,s).length()}const O=2*Math.max(1-D,.1)*I*(1-Math.abs(R/Math.sqrt(Math.PI**2+Math.PI**2)));let P=null===(t=e.derivatives.select(s.UH.Web3D,function(e,t){var n,i;return null!==(i=null===(n=m.find(([n,i])=>(e<=i&&(n+=.02),t<n)))||void 0===n?void 0:n[1])&&void 0!==i?i:s.a9.High}(e.ins.quality.value,I)))||void 0===t?void 0:t.data.quality;return e.isLoading()&&i++,{model:e,clipped:!0,weight:O,qualityRequest:P}}).sort((e,t)=>e.weight-t.weight),h=new Map,M=new Map,S=new Array,T=0,k=0,L=[];for(let e of u){let t=e.model.ins.quality.value;e.model.isLoading()&&t!=e.qualityRequest&&e.model.activeDerivative&&e.qualityRequest<t&&(e.model.ins.quality.setValue(e.model.activeDerivative.data.quality),t=e.model.activeDerivative.data.quality,i--),k+=p(e.model,t),t<e.qualityRequest?(M.set(e.model,e.qualityRequest),S.push([e.model,e.weight]),t=e.qualityRequest):e.qualityRequest<e.model.ins.quality.value&&L.push(e),T+=p(e.model,t)}T<this._budget&&u.filter(e=>e.model.isLoading()&&e.model.ins.quality.value!=e.qualityRequest&&e.model.activeDerivative).forEach(e=>{e.model.ins.quality.setValue(e.model.activeDerivative.data.quality),i--,T+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value),k+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value)});for(let e of L){if(T<this._budget/2&&2<h.size+M.size+i)break;(e.clipped||e.qualityRequest<e.model.ins.quality.value+1)&&(h.set(e.model,e.qualityRequest),T+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value),k+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value))}let D=h.size;for(let e of L){if(T<this._budget)break;h.has(e.model)||(h.set(e.model,e.qualityRequest),T+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value),k+=p(e.model,e.qualityRequest)-p(e.model,e.model.ins.quality.value))}let I=h.size-D;S.reverse();for(let[e,t]of S){if(T<this._budget)break;const n=M.get(e);let i=new Map,r=k+p(e,n)-p(e,e.ins.quality.value);const o=u.filter(e=>!e.model.ins.quality.changed&&e.model.ins.quality.value>=n&&1.25*e.weight<t&&!h.has(e.model));let a=0;for(;a<o.length&&!(r<this._budget);){const e=o[a].model.derivatives.select(s.UH.Web3D,Math.max(o[a].qualityRequest-1,0)).data.quality;e<o[a].model.ins.quality.value&&(i.set(o[a].model,e),r+=p(o[a].model,e)-p(o[a].model,o[a].model.ins.quality.value)),a++}if(r<this._budget){for(const[t,n]of i)h.set(t,n),T+=p(t,n)-p(e,e.ins.quality.value);k=r}else M.delete(e),T+=p(e,e.ins.quality.value)-p(e,n)}h.size;for(let[e,t]of[...h.entries(),...[...M.entries()].reverse()]){if(6<i)break;const n=e.ins.quality.value;if(t===n)continue;const r=e.derivatives.select(s.UH.Web3D,t);r&&r.data.quality!=n&&(e.ins.quality.setValue(r.data.quality),i++)}return 0<h.size+M.size}fromData(e){e=e||{},this.ins.copyValues({enabled:!!e.enabled})}toData(){const e=this.ins,t={};return t.enabled=e.enabled.value,t}}S.typeName="CVDerivativesController",S.isSystemSingleton=!0,S.text="Derivatives Selection",S.icon="",S.ins={enabled:i.gK.Boolean("LOD.Enabled",!1)}},101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>i._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:s}=e;if((0,r.alwaysValidSchema)(s,n))return;const a=t.name("valid");t.forIn("key",o,n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if((0,i.not)(a),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(a)}};t.default=o},161:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(4640),r=n(3423);class o extends r.Ay{constructor(){super(...arguments),this.ins=this.addInputs(o.ins),this.outs=this.addOutputs(o.outs),this._loadingManager=new s(this),this._baseUrl=window.location.href,this._initialLoad=!1}get loadingManager(){return this._loadingManager}get baseUrl(){return this._baseUrl}set baseUrl(e){this._baseUrl=new URL(e,window.location.href).href}get initialLoad(){return this._initialLoad}set initialLoad(e){this._initialLoad=e}getAssetName(e){return e.split("/").pop()}getAssetUrl(e){const t=new URL(e,this._baseUrl).href;return this.loadingManager.resolveURL(t)}getAssetPath(e){const t=this._baseUrl,n=e.indexOf(t);return n>=0?e.substr(n+t.length):e}getAssetBasePath(e){const t=this.getAssetPath(e).split("/");t.pop();const n=t.join("/");return n?n+"/":n}getRelativeAssetPath(e,t){const n=this.getAssetUrl(e),i=this.getAssetUrl(t),r=n.indexOf(i);return r>=0?n.substr(r+i.length):this.getAssetPath(n)}create(){super.create()}update(){const{ins:e,outs:t}=this;if(e.busy.changed){const n=e.busy.value||this._loadingManager.isBusy;t.busy.setValue(n),n||t.completed.set()}return!0}}o.typeName="CVAssetManager",o.text="AssetManager",o.icon="",o.isSystemSingleton=!0,o.ins={busy:r.gK.Boolean("State.Busy"),baseUrlValid:r.gK.Boolean("Settings.BaseURLValid")},o.outs={busy:r.gK.Boolean("State.Busy"),completed:r.gK.Event("State.Completed")};class s extends i.KPJ{get isBusy(){return this._isBusy}constructor(e){super(),this._manager=e,this._isBusy=!1,this.onStart=this.onLoadingStart.bind(this),this.onProgress=this.onLoadingProgress.bind(this),this.onLoad=this.onLoadingCompleted.bind(this),this.onError=this.onLoadingError.bind(this)}onLoadingStart(){this._isBusy=!0,this._manager.ins.busy.set()}onLoadingProgress(e,t,n){0}onLoadingCompleted(){this._isBusy=!1,this._manager.ins.busy.set()}onLoadingError(){0}}},272:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var r=n(5724),o=i(n(4483)),s=n(2177);function a(e,t){return(0,o.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,r.hasChildren)(e)?e.children.map(function(e){return a(e,t)}).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,r.isCDATA)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&!(0,r.isComment)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&(t.type===s.ElementType.Tag||(0,r.isCDATA)(t))?e(t.children):(0,r.isText)(t)?t.data:""}},301:(e,t,n)=>{"use strict";let i,r,o=n(6613);class s extends o{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new i(new r,this,e).stringify()}}s.registerLazyResult=e=>{i=e},s.registerProcessor=e=>{r=e},e.exports=s,s.default=s},313:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){switch(n){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}e.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,n){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}})}(n(3681))},318:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвилина":"хвилину":"h"===i?n?"година":"годину":e+" "+t({ss:n?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:n?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:n?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[i],+e)}function i(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative}function r(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:i,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:r("[Сьогодні "),nextDay:r("[Завтра "),lastDay:r("[Вчора "),nextWeek:r("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[Минулої] dddd [").call(this);case 1:case 2:case 4:return r("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:n,m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(3681))},319:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3423);class r extends i.Ay{get fullscreenElement(){return this._fullscreenElement}set fullscreenElement(e){e!==this._fullscreenElement&&(this._fullscreenElement&&this._fullscreenElement.removeEventListener("fullscreenchange",this.onFullscreenChange),this._fullscreenElement=e,e&&e.addEventListener("fullscreenchange",this.onFullscreenChange))}constructor(e,t){super(e,t),this.ins=this.addInputs(r.ins),this.outs=this.addOutputs(r.outs),this._fullscreenElement=null,this.onFullscreenChange=this.onFullscreenChange.bind(this);const n=document.documentElement,i=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullscreen;this.outs.fullscreenAvailable.setValue(!!i),this.ins.toggle.on("value",this.toggle,this)}update(e){return!0}toggle(){const e=this.outs,t=this._fullscreenElement;if(t){const n=e.fullscreenActive.value;if(!n&&e.fullscreenAvailable.value)t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if(n){const e=document;e.exitFullscreen?e.exitFullscreen():e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()}}}onFullscreenChange(e){const t=document,n=t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement;this.outs.fullscreenActive.setValue(!!n)}}r.typeName="CFullscreen",r.ins={toggle:i.gK.Event("Fullscreen.Toggle")},r.outs={fullscreenAvailable:i.gK.Boolean("Fullscreen.Available",!1),fullscreenActive:i.gK.Boolean("Fullscreen.Active",!1)}},323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},347:function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(3681))},364:function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},373:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},423:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o=n(7430),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>i._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");const d=a.length>=c.opts.loopEnum,u=(0,r.useFunc)(t,o.default);let h;if(d||s)h=t.let("valid"),e.block$data(h,function(){t.assign(h,!1),t.forOf("v",l,e=>t.if(i._`${u}(${n}, ${e})`,()=>t.assign(h,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);h=(0,i.or)(...a.map((t,r)=>function(e,t){const r=a[t];return"object"==typeof r&&null!==r?i._`${u}(${n}, ${e}[${t}])`:i._`${n} === ${r}`}(e,r)))}e.pass(h)}};t.default=s},425:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const i=n(4507),r=n(6241),o=n(5265),s=n(2363),a=n(6719),l=n(3151),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:s,schemaEnv:l,validateName:c,opts:h,self:p}=r,{root:m}=l;if(("#"===n||"#/"===n)&&s===m.baseId)return function(){if(l===m)return u(e,c,l,l.$async);const n=t.scopeValue("root",{ref:m});return u(e,o._`${n}.validate`,m,m.$async)}();const f=a.resolveRef.call(p,m,s,n);if(void 0===f)throw new i.default(s,n);return f instanceof a.SchemaEnv?function(t){const n=d(e,t);u(e,n,t,t.$async)}(f):function(i){const r=t.scopeValue("schema",!0===h.code.source?{ref:i,code:(0,o.stringify)(i)}:{ref:i}),s=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:o.nil,topSchemaRef:r,errSchemaPath:n},s);e.mergeEvaluated(a),e.ok(s)}(f)}};function d(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,n,i){const{gen:a,it:c}=e,{allErrors:d,schemaEnv:u,opts:h}=c,p=h.passContext?s.default.this:o.nil;function m(e){const t=o._`${e}.errors`;a.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,o._`${s.default.vErrors}.length`)}function f(e){var t;if(!c.opts.unevaluated)return;const i=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const t=a.var("props",o._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,o.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const t=a.var("items",o._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,o.Name)}}i?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try(()=>{a.code(o._`await ${(0,r.callValidateCode)(e,t,p)}`),f(t),d||a.assign(n,!0)},e=>{a.if(o._`!(${e} instanceof ${c.ValidationError})`,()=>a.throw(e)),m(e),d||a.assign(n,!1)}),e.ok(n)}():e.result((0,r.callValidateCode)(e,t,p),()=>f(t),()=>m(t))}t.getValidate=d,t.callRef=u,t.default=c},444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const i=n(1168),r=n(3211),o=n(6280),s=n(5265),a=n(3151);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:i,opts:o}=e,a=function(e,t){return t?e.filter(e=>d.has(e)||"array"===t&&"array"===e):[]}(t,o.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,r.schemaHasRulesForType)(e,t[0]));if(c){const r=h(t,i,o.strictNumbers,l.Wrong);n.if(r,()=>{a.length?function(e,t,n){const{gen:i,data:r,opts:o}=e,a=i.let("dataType",s._`typeof ${r}`),l=i.let("coerced",s._`undefined`);"array"===o.coerceTypes&&i.if(s._`${a} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,()=>i.assign(r,s._`${r}[0]`).assign(a,s._`typeof ${r}`).if(h(t,r,o.strictNumbers),()=>i.assign(l,r)));i.if(s._`${l} !== undefined`);for(const e of n)(d.has(e)||"array"===e&&"array"===o.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void i.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${r}`).elseIf(s._`${r} === null`).assign(l,s._`""`);case"number":return void i.elseIf(s._`${a} == "boolean" || ${r} === null
              || (${a} == "string" && ${r} && ${r} == +${r})`).assign(l,s._`+${r}`);case"integer":return void i.elseIf(s._`${a} === "boolean" || ${r} === null
              || (${a} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(l,s._`+${r}`);case"boolean":return void i.elseIf(s._`${r} === "false" || ${r} === 0 || ${r} === null`).assign(l,!1).elseIf(s._`${r} === "true" || ${r} === 1`).assign(l,!0);case"null":return i.elseIf(s._`${r} === "" || ${r} === 0 || ${r} === false`),void i.assign(l,null);case"array":i.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${r} === null`).assign(l,s._`[${r}]`)}}i.else(),m(e),i.endIf(),i.if(s._`${l} !== undefined`,()=>{i.assign(r,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(s._`${t} !== undefined`,()=>e.assign(s._`${t}[${n}]`,i))}(e,l)})}(e,t,a):m(e)})}return c};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,n,i=l.Correct){const r=i===l.Correct?s.operators.EQ:s.operators.NEQ;let o;switch(e){case"null":return s._`${t} ${r} null`;case"array":o=s._`Array.isArray(${t})`;break;case"object":o=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return s._`typeof ${t} ${r} ${e}`}return i===l.Correct?o:(0,s.not)(o);function a(e=s.nil){return(0,s.and)(s._`typeof ${t} == "number"`,e,n?s._`isFinite(${t})`:s.nil)}}function h(e,t,n,i){if(1===e.length)return u(e[0],t,n,i);let r;const o=(0,a.toHash)(e);if(o.array&&o.object){const e=s._`typeof ${t} != "object"`;r=o.null?e:s._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else r=s.nil;o.number&&delete o.integer;for(const e in o)r=(0,s.and)(r,u(e,t,n,i));return r}t.checkDataType=u,t.checkDataTypes=h;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function m(e){const t=function(e){const{gen:t,data:n,schema:i}=e,r=(0,a.schemaRefOrVal)(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:e}}(e);(0,o.reportError)(t,p)}t.reportTypeError=m},449:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function r(e,t){let n;e&&"number"==typeof e||(e=12);do{n="";for(let t=0;t<e;++t)n+=i[62*Math.random()|0]}while(t&&t[n]);return n}},462:function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(3681))},482:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},506:(e,t,n)=>{e.exports=r;var i=n(9995).EventEmitter;function r(){i.call(this)}n(6854)(r,i),r.Readable=n(4e3),r.Writable=n(8912),r.Duplex=n(882),r.Transform=n(7134),r.PassThrough=n(8420),r.finished=n(7970),r.pipeline=n(4522),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",l));var s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",r),e.removeListener("drain",o),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",c),e.on("error",c),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},546:(e,t,n)=>{var i=n(9052),r=n(7926);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var i,r=n(5724);function o(e,t){var n=[],o=[];if(e===t)return 0;for(var s=(0,r.hasChildren)(e)?e:e.parent;s;)n.unshift(s),s=s.parent;for(s=(0,r.hasChildren)(t)?t:t.parent;s;)o.unshift(s),s=s.parent;for(var a=Math.min(n.length,o.length),l=0;l<a&&n[l]===o[l];)l++;if(0===l)return i.DISCONNECTED;var c=n[l-1],d=c.children,u=n[l],h=o[l];return d.indexOf(u)>d.indexOf(h)?c===t?i.FOLLOWING|i.CONTAINED_BY:i.FOLLOWING:c===e?i.PRECEDING|i.CONTAINS:i.PRECEDING}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var i=n.parent;i;i=i.parent)if(e.includes(i)){e.splice(t,1);break}}return e},function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(i=t.DocumentPosition||(t.DocumentPosition={})),t.compareDocumentPosition=o,t.uniqueSort=function(e){return(e=e.filter(function(e,t,n){return!n.includes(e,t+1)})).sort(function(e,t){var n=o(e,t);return n&i.PRECEDING?-1:n&i.FOLLOWING?1:0}),e}},587:(e,t,n)=>{"use strict";let i=n(1024),r=n(9623),o=n(6613),s=n(50),a=n(8290),l=n(301),c=n(3210),d=n(8262),u=n(2610),h=n(6748),p=n(3172),m=n(8093),f=n(6578),g=n(7129),v=n(6216),y=n(7114),b=n(8227),A=n(482);function _(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new f(e)}_.plugin=function(e,t){let n,i=!1;function r(...n){console&&console.warn&&!i&&(i=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let r=t(...n);return r.postcssPlugin=e,r.postcssVersion=(new f).version,r}return Object.defineProperty(r,"postcss",{get:()=>(n||(n=r()),n)}),r.process=function(e,t,n){return _([r(n)]).process(e,t)},r},_.stringify=b,_.parse=m,_.fromJSON=c,_.list=h,_.comment=e=>new r(e),_.atRule=e=>new i(e),_.decl=e=>new a(e),_.rule=e=>new y(e),_.root=e=>new v(e),_.document=e=>new l(e),_.CssSyntaxError=s,_.Declaration=a,_.Container=o,_.Processor=f,_.Document=l,_.Comment=r,_.Warning=A,_.AtRule=i,_.Result=g,_.Input=d,_.Rule=y,_.Root=v,_.Node=p,u.registerPostcss(_),e.exports=_,_.default=_},588:()=>{},605:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(e,t,n,i){var r="";if(t)switch(n){case"s":r="काही सेकंद";break;case"ss":r="%d सेकंद";break;case"m":r="एक मिनिट";break;case"mm":r="%d मिनिटे";break;case"h":r="एक तास";break;case"hh":r="%d तास";break;case"d":r="एक दिवस";break;case"dd":r="%d दिवस";break;case"M":r="एक महिना";break;case"MM":r="%d महिने";break;case"y":r="एक वर्ष";break;case"yy":r="%d वर्षे"}else switch(n){case"s":r="काही सेकंदां";break;case"ss":r="%d सेकंदां";break;case"m":r="एका मिनिटा";break;case"mm":r="%d मिनिटां";break;case"h":r="एका तासा";break;case"hh":r="%d तासां";break;case"d":r="एका दिवसा";break;case"dd":r="%d दिवसां";break;case"M":r="एका महिन्या";break;case"MM":r="%d महिन्यां";break;case"y":r="एका वर्षा";break;case"yy":r="%d वर्षां"}return r.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(e,t){return 12===e&&(e=0),"पहाटे"===t||"सकाळी"===t?e:"दुपारी"===t||"सायंकाळी"===t||"रात्री"===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"पहाटे":e<12?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(3681))},612:function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(3681))},624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6241),r=n(5265),o=n(2363),s=n(3151),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>r._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,errsCount:c,it:d}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,s.alwaysValidSchema)(d,n))return;const p=(0,i.allSchemaProperties)(a.properties),m=(0,i.allSchemaProperties)(a.patternProperties);function f(e){t.code(r._`delete ${l}[${e}]`)}function g(i){if("all"===h.removeAdditional||h.removeAdditional&&!1===n)f(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(u||t.break());if("object"==typeof n&&!(0,s.alwaysValidSchema)(d,n)){const n=t.name("valid");"failing"===h.removeAdditional?(v(i,n,!1),t.if((0,r.not)(n),()=>{e.reset(),f(i)})):(v(i,n),u||t.if((0,r.not)(n),()=>t.break()))}}}function v(t,n,i){const r={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===i&&Object.assign(r,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(r,n)}t.forIn("key",l,n=>{p.length||m.length?t.if(function(n){let o;if(p.length>8){const e=(0,s.schemaRefOrVal)(d,a.properties,"properties");o=(0,i.isOwnProperty)(t,e,n)}else o=p.length?(0,r.or)(...p.map(e=>r._`${n} === ${e}`)):r.nil;return m.length&&(o=(0,r.or)(o,...m.map(t=>r._`${(0,i.usePattern)(e,t)}.test(${n})`))),(0,r.not)(o)}(n),()=>g(n)):g(n)}),e.ok(r._`${c} === ${o.default.errors}`)}};t.default=a},637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(444),r=n(5265),o=n(3151),s=n(7430),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>r.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>r._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:a,schema:l,parentSchema:c,schemaCode:d,it:u}=e;if(!a&&!l)return;const h=t.let("valid"),p=c.items?(0,i.getSchemaTypes)(c.items):[];function m(o,s){const a=t.name("item"),l=(0,i.checkDataTypes)(p,a,u.opts.strictNumbers,i.DataType.Wrong),c=t.const("indices",r._`{}`);t.for(r._`;${o}--;`,()=>{t.let(a,r._`${n}[${o}]`),t.if(l,r._`continue`),p.length>1&&t.if(r._`typeof ${a} == "string"`,r._`${a} += "_"`),t.if(r._`typeof ${c}[${a}] == "number"`,()=>{t.assign(s,r._`${c}[${a}]`),e.error(),t.assign(h,!1).break()}).code(r._`${c}[${a}] = ${o}`)})}function f(i,a){const l=(0,o.useFunc)(t,s.default),c=t.name("outer");t.label(c).for(r._`;${i}--;`,()=>t.for(r._`${a} = ${i}; ${a}--;`,()=>t.if(r._`${l}(${n}[${i}], ${n}[${a}])`,()=>{e.error(),t.assign(h,!1).break(c)})))}e.block$data(h,function(){const i=t.let("i",r._`${n}.length`),o=t.let("j");e.setParams({i,j:o}),t.assign(h,!0),t.if(r._`${i} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?m:f)(i,o))},r._`${d} === false`),e.ok(h)}};t.default=a},762:function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},769:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},i=[/^जन/i,/^फ़र|फर/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सितं|सित/i,/^अक्टू/i,/^नव|नवं/i,/^दिसं|दिस/i],r=[/^जन/i,/^फ़र/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सित/i,/^अक्टू/i,/^नव/i,/^दिस/i];e.defineLocale("hi",{months:{format:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),standalone:"जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर".split("_")},monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},monthsParse:i,longMonthsParse:i,shortMonthsParse:r,monthsRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsShortRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsStrictRegex:/^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,monthsShortStrictRegex:/^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(3681))},812:(e,t,n)=>{"use strict";var i=n(6763),r=(n(9498),n(4019)),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=class extends r.A{constructor(){super(...arguments),this.type="boolean"}firstConnected(){super.firstConnected(),this.classList.add("sv-property-boolean")}update(e){if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=t.replace(/\s/g,""),r=this.text,o=this.language;let s=e.value?Array.isArray(r)?r[1]:r||"On":Array.isArray(r)?r[0]:r||"Off";return i.qy`<label id="${n}-label" class="ff-label ff-off">${t}</label>
        <div title="${t}"><ff-button role="switch" aria-labelledby="${n}-label" aria-checked=${e.value} .text=${o?o.getLocalizedString(s):s} ?disabled=${"true"===this.ariaDisabled} ?selected=${e.value} @click=${this.onButtonClick}></ff-button></div>`}onButtonClick(e){this.property.setValue(!this.property.value)}};s=o([(0,i.EM)("sv-property-boolean")],s)},847:function(e,t,n){!function(e){"use strict";function t(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){return 6===this.day()?"[το προηγούμενο] dddd [{}] LT":"[την προηγούμενη] dddd [{}] LT"},sameElse:"L"},calendar:function(e,n){var i=this._calendarEl[e],r=n&&n.hours();return t(i)&&(i=i.apply(n)),i.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(3681))},855:function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},882:(e,t,n)=>{"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var r=n(4e3),o=n(8912);n(6854)(c,r);for(var s=i(o.prototype),a=0;a<s.length;a++){var l=s[a];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);r.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},920:(e,t,n)=>{"use strict";n.d(t,{A:()=>Pn});var i=n(5624),r=n(6773),o=n(9085),s=n(6687),a=n(1071),l=n(6233),c=(n(9498),n(3769),n(1308),n(2654)),d=n(1160),u=n(1721),h=n(2997),p=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class m extends d.Ay{get enabled(){return this.getSystemComponent(u.A).navigation.ins.mode.value===h.Kd.Orbit}createView(){return new f(this)}}m.typeName="CVViewTool",m.text="View",m.icon="eye";let f=class extends d.iv{firstConnected(){super.firstConnected(),this.classList.add("sv-view-tool-view")}render(){const e=this.activeDocument;if(!e)return d.qy``;const t=this.tool,n=e.setup.navigation,i=e.setup.language,r=n.ins.projection,o=n.ins.preset,s=n.ins.zoomExtents,a=[c.Gz.Front,c.Gz.Back,c.Gz.Left,c.Gz.Right,c.Gz.Top,c.Gz.Bottom];return t.enabled?d.qy`<div role="toolbar" aria-label="View tool" class="sv-section"><ff-button class="sv-section-lead" title=${i.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${r} .language=${i} name=${i.getLocalizedString("Projection")}></sv-property-options>
                <sv-property-options .property=${o} .language=${i} name=${i.getLocalizedString("View")} .indexMap=${a}></sv-property-options>
                <sv-property-event .property=${s} name=${i.getLocalizedString("Center")} icon="zoom"></sv-property-event>
            </div>
        </div>`:null}onActiveDocument(e,t){this.requestUpdate()}async setFocus(){await this.updateComplete;const e=this.getElementsByTagName("sv-property-options")[0];e&&e.focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};f=p([(0,d.EM)("sv-view-tool-view")],f);var g=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class v extends d.Ay{createView(){return new y(this)}}v.typeName="CVRenderTool",v.text="Material",v.icon="palette";let y=class extends d.iv{constructor(){super(...arguments),this.viewer=null}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-render-tool-view")}render(){this.tool;const e=this.activeDocument,t=this.viewer;if(!t)return d.qy``;const n=t.ins.shader,i=t.ins.variant,r=e.setup.language;return d.qy`<div class="sv-section"><ff-button class="sv-section-lead" title=${r.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${n} .language=${r} name=${r.getLocalizedString("Material")}></sv-property-options>
                ${i.schema.options.length>0?d.qy`<sv-property-options .property=${i} .language=${r} name=${r.getLocalizedString("Variant")}></sv-property-options>`:null}
            </div>
        </div>`}onActiveDocument(e,t){this.viewer&&(this.viewer.ins.shader.off("value",this.onUpdate,this),this.viewer.ins.variant.off("value",this.onUpdate,this),this.viewer=null),t&&(this.viewer=t.setup.viewer,this.viewer.ins.variant.on("value",this.onUpdate,this),this.viewer.ins.shader.on("value",this.onUpdate,this))}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};y=g([(0,d.EM)("sv-render-tool-view")],y);var b=n(9660),A=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class _ extends d.Ay{createView(){return new w(this)}}_.typeName="CVEnvironmentTool",_.text="Environment",_.icon="environment";let w=class extends d.iv{firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-environment-tool-view")}render(){this.tool;if(!this.activeDocument)return d.qy`No active document`;const e=this.activeDocument.setup,t=e.grid,n=e.floor,i=e.background,r=i.ins.style.getValidatedValue()===b.z.Solid,o=e.environment,s=e.language;return d.qy`<div class="sv-section"><ff-button class="sv-section-lead" title=${s.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-options .property=${i.ins.style} .language=${s} .options=${["Solid","Linear","Radial"]} name=${s.getLocalizedString("Background")}></sv-property-options>
                <sv-property-color title="Background Color 1" .compact=${!0} .floating=${!1} class="sv-nogap" .property=${i.ins.color0} name=" "></sv-property-color>
                ${r?null:d.qy`<sv-property-color title="Background Color 2" .compact=${!0} .floating=${!1} class="sv-nogap" .property=${i.ins.color1} name=" "></sv-property-color>`}
                <sv-property-boolean .property=${t.ins.visible} .language=${s} name=${s.getLocalizedString("Grid")}></sv-property-boolean>
                <sv-property-color title="Grid Color" .compact=${!0} .floating=${!1} class="sv-nogap" .property=${t.ins.color} name=" "></sv-property-color>
                <sv-property-boolean .property=${n.ins.visible} .language=${s} name=${s.getLocalizedString("Floor")}></sv-property-boolean>
                <sv-property-color title="Floor Color" .compact=${!0} .floating=${!1} class="sv-nogap" .property=${n.ins.color} name=" "></sv-property-color>
                <sv-property-options .property=${o.ins.imageIndex} name="Env Map"></sv-property-options>
            </div>
        </div>`}onActiveDocument(e,t){if(e){e.setup.background.ins.style.off("value",this.onUpdate,this)}if(t){t.setup.background.ins.style.on("value",this.onUpdate,this)}this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("sv-property-options")[0].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};w=A([(0,d.EM)("sv-environment-tool-view")],w);var x=n(2464),C=(n(812),n(3751),n(6943),n(5623)),E=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class M extends d.Ay{constructor(){super(...arguments),this.lights=[],this.ins=this.addInputs(M.ins),this.outs=this.addOutputs(M.outs)}update(e){return this.outs.light.setValue(this.lights[this.ins.light.getValidatedValue()]),!0}createView(){return new S(this)}onActiveDocument(e,t){var n;this.lights=t?t.getInnerComponents(x.A).filter(e=>e.ins.enabled.value):[],this.ins.light.setOptions(this.lights.map(e=>e.ins.name.value)),this.outs.light.setValue(null!==(n=this.lights[0])&&void 0!==n?n:null),super.onActiveDocument(e,t)}}M.typeName="CVLightTool",M.text="Lights",M.icon="bulb",M.ins={light:d.gK.Option("Tool.Light",[])},M.outs={light:d.gK.Object("Tool.SelectedLight",x.A)};let S=class extends d.iv{constructor(){super(...arguments),this.lights=null}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-light-tool-view")}connected(){super.connected(),this.tool.outs.light.on("value",this.onUpdate,this)}disconnected(){this.tool.outs.light.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.tool,t=e.lights,n=this.activeDocument;if(!t||!n||0==t.length)return d.qy`<div class="sv-section sv-centered">No editable lights in this scene.</div>`;const i=e.outs.light.value,r=n.setup.navigation,o=n.setup.language,s=d.qy`<sv-property-color .property=${i.ins.color} .compact=${!0} .floating=${!1} name=${o.getLocalizedString("Color")}></sv-property-color>`,a=i?d.qy`<div class="sv-section">
            <ff-button class="sv-section-lead" transparent tabbingIndex="-1" icon="cog"></ff-button>
            <div class="sv-tool-controls">
                <!-- <sv-property-boolean .property=${i.ins.visible} name="Switch"></sv-property-boolean> -->
                <sv-property-slider .property=${i.ins.intensity} name=${o.getLocalizedString("Intensity")} min="0" max="2"></sv-property-slider>
                ${i.is(C.A)?null:s}
            </div>
        </div>`:null;return d.qy`${a}<div class="sv-section"><ff-button class="sv-section-lead" title=${o.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <!-- <sv-property-boolean .property=${r.ins.lightsFollowCamera} name="Follow Camera"></sv-property-boolean> -->
                <sv-property-options .property=${e.ins.light} .language=${o} name=${o.getLocalizedString("Select Scene Light")}></sv-property-options>
            </div>
        </div>`}onActiveDocument(e,t){e&&e.setup.navigation.ins.lightsFollowCamera.off("value",this.onUpdate,this),t&&t.setup.navigation.ins.lightsFollowCamera.on("value",this.onUpdate,this),this.requestUpdate()}onActiveNode(e,t){e&&e.light&&(e.light.ins.name.off("value",this.refreshLightList,this),e.light.ins.enabled.off("value",this.refreshLights,this)),t&&t.light&&(t.light.ins.enabled.on("value",this.refreshLights,this),t.light.ins.name.on("value",this.refreshLightList,this))}refreshLights(){this.tool.lights=this.activeDocument.getInnerComponents(x.A).filter(e=>e.ins.enabled.value),this.refreshLightList()}refreshLightList(){this.tool.ins.light.setOptions(this.tool.lights.map(e=>e.ins.name.value))}async setFocus(){await this.updateComplete;const e=this.getElementsByTagName("sv-property-options")[0];null==e||e.focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};S=E([(0,d.EM)("sv-light-tool-view")],S);n(9851);var T=n(4340),k=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class L extends d.Ay{createView(){return new D(this)}}L.typeName="CVTapeTool",L.text="Measure",L.icon="tape";let D=class extends d.iv{constructor(){super(...arguments),this.firstRender=!0,this.statusMsg=""}firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-tape-tool-view")}render(){const e=this.activeDocument;if(!e)return d.qy``;this.tool;const t=e.setup.tape,n=t.ins.enabled,i=t.outs.state.value,r=t.outs.distance.value,o=e.setup.language;let s;if(n.value)if(0===r)s=o.getLocalizedString("Tap on model to set start of tape")+".";else if(i===T.j.SetStart){const t=e.root.scene.ins.units.getOptionText();s=`${r.toFixed(2)} ${t}`}else s=o.getLocalizedString("Tap on model to set end of tape")+".";else s=o.getLocalizedString("Switch on to take measurements")+".";return this.statusMsg=s,d.qy`<div class="sv-section"><ff-button class="sv-section-lead" title=${o.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-boolean .property=${n} .language=${o} name=${o.getLocalizedString("Tape Tool")}></sv-property-boolean>
                <div class="sv-property-view"><label class="ff-label ff-off">${o.getLocalizedString("Measured Distance")}</label>
                <div class="ff-string" aria-live="polite" aria-atomic="true"></div></div>
            </div></div>`}updated(e){super.updated(e);const t=this.getElementsByClassName("ff-string").item(0);t&&(t.innerHTML=this.statusMsg,this.firstRender&&(setTimeout(()=>{t.innerHTML=`<div>${this.statusMsg}</div>`},200),this.firstRender=!1))}onActiveDocument(e,t){e&&e.setup.tape.off("update",this.onUpdate,this),t&&t.setup.tape.on("update",this.onUpdate,this),this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("ff-button")[1].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};D=k([(0,d.EM)("sv-tape-tool-view")],D);var I=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class R extends d.Ay{createView(){return new O(this)}}R.typeName="CVSliceTool",R.text="Slice",R.icon="knife";let O=class extends d.iv{firstConnected(){super.firstConnected(),this.classList.add("sv-group","sv-slice-tool-view")}render(){const e=this.activeDocument;if(!e)return d.qy``;this.tool;const t=e.setup.slicer,n=t.ins.enabled,i=t.ins.axis,r=t.ins.position,o=e.setup.language;return d.qy`<div class="sv-section"><ff-button class="sv-section-lead" title=${o.getLocalizedString("Close Tool")} @click=${this.onClose} transparent icon="close"></ff-button>
            <div class="sv-tool-controls">
                <sv-property-boolean .property=${n} .language=${o} name=${o.getLocalizedString("Slice Tool")}></sv-property-boolean>
                <sv-property-options .property=${i} .language=${o} name=${o.getLocalizedString("Axis")}></sv-property-options>
                <sv-property-slider .property=${r} name=${o.getLocalizedString("Position")}></sv-property-slider>
            </div>
        </div>`}onActiveDocument(e,t){this.requestUpdate()}async setFocus(){await this.updateComplete;this.getElementsByTagName("ff-button")[1].focus()}onClose(e){this.parentElement.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}};O=I([(0,d.EM)("sv-slice-tool-view")],O);var P=n(1860);class B extends P.A{get toolProvider(){return this.getComponent(l.A)}createComponents(){this.createComponent(l.A),this.createComponent(m),this.createComponent(v),this.createComponent(_),this.createComponent(M),this.createComponent(L),this.createComponent(R)}}B.typeName="NVTools";const N=[a.A,l.A,m,v,_,M,L,R,B];var U,F=n(8466),z=n(2902),H=n(161),j=n(3600),V=n(8604),Y=n(7504),G=n(2154),Q=n(9683),$=n(7297),q=n(2791),W=n(5007),K=n(3889),Z=n(5717),X=n(8172),J=n(3350),ee=n(3675),te=function(){function e(e){this.__jsonld=e,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return e.prototype.getProperty=function(e){var t=null;return this.__jsonld&&((t=this.__jsonld[e])||(t=this.__jsonld["@"+e])),t},e.prototype.getPropertyAsObject=function(e){var t=this.getProperty(e);return"string"==typeof t?{id:t,isIRI:!0}:t===Object(t)?t:null},e}(),ne=(U=function(e,t){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},U(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ie=function(e){function t(t){var n=e.call(this,t)||this;return n.isTransform=!0,n.isTransform=!0,n}return ne(t,e),t}(te),re=n(9929),oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),se=function(e){function t(t,n){var i=e.call(this,t)||this;return i.options=n,i}return oe(t,e),t.prototype.getIIIFResourceType=function(){return Tt.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){var e=this.getProperty("label");return e?Dt.parse(e,this.options.locale):new Dt([],this.options.locale)},t.prototype.getSummary=function(){var e=this.getProperty("summary");return e?Dt.parse(e,this.options.locale):new Dt([],this.options.locale)},t.prototype.getDefaultLabel=function(){return this.getLabel().getValue(this.options.locale)},t.prototype.getMetadata=function(){var e=this.getProperty("metadata"),t=[];if(!e)return t;for(var n=0;n<e.length;n++){var i=e[n],r=new xt(this.options.locale);r.parse(i),t.push(r)}return t},t.prototype.getRendering=function(e){for(var t=this.getRenderings(),n=0;n<t.length;n++){var i=t[n];if(i.getFormat()===e)return i}return null},t.prototype.getRenderings=function(){var e,t=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return t;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];t.push(new zt(i,this.options))}return t},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty("requiredStatement");return t&&(e=new xt(this.options.locale)).parse(t),e},t.prototype.getService=function(e){return Tt.getService(this,e)},t.prototype.getServices=function(){return Tt.getServices(this)},t.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new Xt(e,this.options):null},t.prototype.isAnnotation=function(){return this.getIIIFResourceType()===re.es.ANNOTATION},t.prototype.isCanvas=function(){return this.getIIIFResourceType()===re.es.CANVAS},t.prototype.isCollection=function(){return this.getIIIFResourceType()===re.es.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===re.es.MANIFEST},t.prototype.isRange=function(){return this.getIIIFResourceType()===re.es.RANGE},t.prototype.isScene=function(){return this.getIIIFResourceType()===Tt.normaliseType("Scene")},t.prototype.isSequence=function(){return this.getIIIFResourceType()===re.es.SEQUENCE},t}(te),ae=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),le=function(e){function t(t,n){return e.call(this,t,n)||this}return ae(t,e),t.prototype.getFormat=function(){var e=this.getProperty("format");return e?e.toLowerCase():null},t.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var t=0;t<this.__jsonld.resources.length;t++){var n=this.__jsonld.resources[t],i=new ct(n,this.options);e.push(i)}return e},t.prototype.getType=function(){var e=this.getProperty("type");return e?Tt.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},t.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},t}(se),ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),de=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.index=-1,i.isLoaded=!1;var r={defaultLabel:"-",locale:"en-GB",resource:i,pessimisticAccessControl:!1};return i.options=Object.assign(r,n),i}return ce(t,e),t.prototype.getAttribution=function(){var e=this.getProperty("attribution");return e?Dt.parse(e,this.options.locale):new Dt([],this.options.locale)},t.prototype.getDescription=function(){var e=this.getProperty("description");return e?Dt.parse(e,this.options.locale):new Dt([],this.options.locale)},t.prototype.getHomepage=function(){var e=this.getProperty("homepage");return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getIIIFResourceType=function(){return Tt.normaliseType(this.getProperty("type"))},t.prototype.getLogo=function(){var e=this.getProperty("logo");if(!e){var t=this.getProperty("provider");if(!t)return null;var n=t.find(function(e){return void 0!==e.logo});e=n&&void 0!==n.logo?n.logo:null}return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||(null==e?void 0:e.id)):null},t.prototype.getLicense=function(){return Tt.getLocalisedValue(this.getProperty("license"),this.options.locale)},t.prototype.getRights=function(){var e=this.getProperty("rights");return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},t.prototype.getRelated=function(){return this.getProperty("related")},t.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},t.prototype.getTrackingLabel=function(){var e=this.getService(re.bB.TRACKING_EXTENSIONS);return e?e.getProperty("trackingLabel"):""},t.prototype.getDefaultTree=function(){return this.defaultTree=new nn("root"),this.defaultTree.data=this,this.defaultTree},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty("requiredStatement");if(t)(e=new xt(this.options.locale)).parse(t);else{var n=this.getAttribution();n&&n.length&&((e=new xt(this.options.locale)).value=n)}return e},t.prototype.isCollection=function(){return this.getIIIFResourceType()===re.es.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===re.es.MANIFEST},t.prototype.load=function(){var e=this;return new Promise(function(t){if(e.isLoaded)t(e);else{var n=e.options;n.navDate=e.getNavDate();var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),Tt.loadManifest(i).then(function(i){e.parentLabel=e.getLabel().getValue(n.locale);var r=Gt.parse(i,n);(e=Object.assign(e,r)).index=n.index,t(e)})}})},t}(se),ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),he=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.isAnnotationBody=!1,i.isSpecificResource=!0,i.isSpecificResource=!0,i}return ue(t,e),t.prototype.getScope=function(){var e=this.getPropertyAsObject("scope");if(null==e?void 0:e.isIRI)return e;if(e){var t=[].concat(e)[0];if(t&&"Annotation"===t.type)return new ct(t,this.options)}return null},t.prototype.getSource=function(){var e=this.getPropertyAsObject("source");if(e.isIRI)return e;if(e){var t=[].concat(e)[0];if(["Scene","Canvas"].includes(t.type))return t}if(e){var n=[].concat(e)[0];if(n)return Ce.BuildFromJson(n,this.options)}throw new Error("cannot resolve Source "+JSON.stringify(e))},Object.defineProperty(t.prototype,"Source",{get:function(){return this.getSource()},enumerable:!1,configurable:!0}),t.prototype.getSelector=function(){var e=this.getProperty("selector");if(e){var t=[].concat(e)[0];if(t&&"PointSelector"===t.type)return new Bt(t);throw new Error("unable to resolve SpecificResource selector "+JSON.stringify(this.__jsonld))}return null},Object.defineProperty(t.prototype,"Selector",{get:function(){return this.getSelector()},enumerable:!1,configurable:!0}),t.prototype.getTransform=function(){for(var e=[],t=this.getProperty("transform"),n=0;n<t.length;++n){var i=t[n];e.push(tn.BuildFromJson(i))}return e},Object.defineProperty(t.prototype,"Transform",{get:function(){return this.getTransform()},enumerable:!1,configurable:!0}),t}(se),pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),me=function(e){function t(t,n){return e.call(this,t,n)||this}return pe(t,e),t.prototype.getResourceID=function(){if(this.isSpecificResource()){var e=this.getSource();return e instanceof t?e.id:e||this.id}return this.id},t.prototype.getFormat=function(){var e=this.getPropertyFromSelfOrSource("format");return e?Tt.getMediaType(e):null},t.prototype.getType=function(){var e=this.getPropertyFromSelfOrSource("type");return e?Tt.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getTransform=function(){return this.getProperty("transform")?this.getProperty("transform").map(function(e){return tn.BuildFromJson(e)}):null},t.prototype.getTransformMatrix=function(){var e=this.getTransform();return e&&e.length?function(e){for(var t=new Ke,n=0,i=e;n<i.length;n++){var r=i[n],o=new Ke;if(r.isTranslateTransform){var s=r.getTranslation();o.makeTranslation(s.x,s.y,s.z)}else if(r.isRotateTransform){var a=dn(r);o.makeRotationFromEuler(a)}else if(r.isScaleTransform){var l=r.getScale();o.makeScale(l.x,l.y,l.z)}t.premultiply(o)}return t}(e):null},t.prototype.getTransformSet=function(){var e=this.getTransform();return e&&e.length?function(e){for(var t=new Be,n=new st,i=new Be(1,1,1),r=0,o=e;r<o.length;r++){var s=o[r];if(s.isTranslateTransform){var a=s.getTranslation();t.add(new Be(a.x,a.y,a.z))}else if(s.isRotateTransform){var l=dn(s),c=(new Pe).setFromEuler(n),d=(new Pe).setFromEuler(l);c.premultiply(d),n.setFromQuaternion(c,"XYZ"),t.applyEuler(l)}else if(s.isScaleTransform){var u=s.getScale(),h=new Be(u.x,u.y,u.z);i.multiply(h),t.multiply(h)}}return{translation:t,rotation:n,scale:i}}(e):null},t.prototype.getPropertyFromSelfOrSource=function(e){return this.isSpecificResource()&&this.getSource()instanceof t?this.getSource().getProperty(e):this.getProperty(e)},t.prototype.getLabelFromSelfOrSource=function(){return this.isSpecificResource()&&this.getSource()instanceof t?this.getSource().getLabel():this.getLabel()},t.prototype.getSource=function(){var e=[].concat(this.getPropertyAsObject("source"))[0];return e?!0===e.isIRI?e.id:Ce.BuildFromJson(e,this.options):null},t.prototype.isModel=function(){return this.getType()===re.S3.MODEL},t.prototype.isSound=function(){return this.getType()===re.S3.SOUND},t.prototype.isSoundCaption=function(){return this.getType()===re.S3.TEXT&&"text/vtt"===this.getProperty("format").toLowerCase()},t.prototype.isSpecificResource=function(){return"SpecificResource"===this.getProperty("type")},t}(se),fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ge=function(e){function t(t,n){return e.call(this,t,n)||this}return fe(t,e),t.prototype.getColor=function(){var e=this.getPropertyFromSelfOrSource("color");return e?cn.fromCSS(e):new cn([255,255,255])},Object.defineProperty(t.prototype,"Color",{get:function(){return this.getColor()},enumerable:!1,configurable:!0}),t.prototype.getIntensity=function(){var e=this.getPropertyFromSelfOrSource("intensity");if(!e)return 1;try{if("Value"!==e.type||"relative"!==e.unit)throw new Error;return e.value}catch(t){throw new Error("unable to interpret raw intensity object "+JSON.stringify(e))}},Object.defineProperty(t.prototype,"Intensity",{get:function(){return this.getIntensity()},enumerable:!1,configurable:!0}),t.prototype.getAngle=function(){return this.isSpotLight()?Number(this.getPropertyFromSelfOrSource("angle")):void 0},Object.defineProperty(t.prototype,"Angle",{get:function(){return this.getAngle()},enumerable:!1,configurable:!0}),t.prototype.getLookAt=function(){var e,t,n=null!==(e=this.getPropertyAsObject("lookAt"))&&void 0!==e?e:null;if(null==n)return null;var i=null!==(t=n.type||n["@type"])&&void 0!==t?t:null;if(null==i)return null;if("Annotation"==i)return n;if("PointSelector"==i)return new Bt(n);throw new Error("unidentified value of lookAt ".concat(i))},Object.defineProperty(t.prototype,"LookAt",{get:function(){return this.getLookAt()},enumerable:!1,configurable:!0}),t.prototype.isAmbientLight=function(){return"ambientlight"===Tt.normaliseType(this.getType()||"")},t.prototype.isDirectionalLight=function(){return"directionallight"===Tt.normaliseType(this.getType()||"")},t.prototype.isPointLight=function(){return"pointlight"===Tt.normaliseType(this.getType()||"")},t.prototype.isSpotLight=function(){return"spotlight"===Tt.normaliseType(this.getType()||"")},t}(me),ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ye=function(e){function t(t,n){return e.call(this,t,n)||this}return ve(t,e),t.prototype.getFieldOfView=function(){if(this.isPerspectiveCamera()){var e=this.getPropertyFromSelfOrSource("fieldOfView");return e?e>0&&e<180?e:void console.warn("Camera fieldOfView out of range and will be considered undefined."):void 0}},Object.defineProperty(t.prototype,"FieldOfView",{get:function(){return this.getFieldOfView()},enumerable:!1,configurable:!0}),t.prototype.getViewHeight=function(){if(this.isOrthographicCamera()){var e=this.getProperty("viewHeight");return e||void 0}},Object.defineProperty(t.prototype,"ViewHeight",{get:function(){return this.getViewHeight()},enumerable:!1,configurable:!0}),t.prototype.getLookAt=function(){var e,t,n=null!==(e=this.getPropertyAsObject("lookAt"))&&void 0!==e?e:null;if(null==n)return null;var i=null!==(t=n.type||n["@type"])&&void 0!==t?t:null;return null==i?null:"Annotation"==i?n:"PointSelector"==i?new Bt(n):"SpecificResource"==i?new he(n,this.options):(console.error("unidentified value of lookAt ".concat(i)),null)},Object.defineProperty(t.prototype,"LookAt",{get:function(){return this.getLookAt()},enumerable:!1,configurable:!0}),t.prototype.getNear=function(){var e=this.getPropertyFromSelfOrSource("near");return e||void 0},Object.defineProperty(t.prototype,"Near",{get:function(){return this.getNear()},enumerable:!1,configurable:!0}),t.prototype.getFar=function(){var e=this.getPropertyFromSelfOrSource("far");return e||void 0},Object.defineProperty(t.prototype,"Far",{get:function(){return this.getFar()},enumerable:!1,configurable:!0}),t.prototype.isPerspectiveCamera=function(){return"perspectivecamera"===Tt.normaliseType(this.getType()||"")},t.prototype.isOrthographicCamera=function(){return"orthographiccamera"===Tt.normaliseType(this.getType()||"")},t}(me),be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ae=function(e){function t(t,n){return e.call(this,t,n)||this}return be(t,e),Object.defineProperty(t.prototype,"Value",{get:function(){return this.getProperty("value")||""},enumerable:!1,configurable:!0}),t.prototype.getPosition=function(){var e,t=null!==(e=this.getPropertyAsObject("position"))&&void 0!==e?e:null;if(null==t)return null;if(t.type&&"SpecificResource"==t.type)return new he(t,this.options);throw new Error("unknown position type specified")},Object.defineProperty(t.prototype,"Position",{get:function(){return this.getPosition()},enumerable:!1,configurable:!0}),t}(me),_e=["AmbientLight","DirectionalLight","PointLight","SpotLight"],we=["PerspectiveCamera","OrthographicCamera"],xe=["Image","Document","Audio","Model","Video","Canvas","Sound","Text"],Ce=function(){function e(){}return e.BuildFromJson=function(e,t){var n="SpecificResource"===e.type&&e.source?[].concat(e.source)[0].type:e.type;if(xe.includes(n))return new me(e,t);if(_e.includes(n))return new ge(e,t);if(we.includes(n))return new ye(e,t);if("TextualBody"===n)return new Ae(e,t);throw new Error("unimplemented type for AnnotationBody: "+n)},e}();const Ee="srgb",Me="srgb-linear";Symbol.iterator;const Se=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Te=1234567;const ke=Math.PI/180,Le=180/Math.PI;function De(e,t,n){return Math.max(t,Math.min(n,e))}function Ie(e,t){return(e%t+t)%t}function Re(e,t,n){return(1-n)*e+n*t}var Oe=Object.freeze({__proto__:null,DEG2RAD:ke,RAD2DEG:Le,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Se[255&e]+Se[e>>8&255]+Se[e>>16&255]+Se[e>>24&255]+"-"+Se[255&t]+Se[t>>8&255]+"-"+Se[t>>16&15|64]+Se[t>>24&255]+"-"+Se[63&n|128]+Se[n>>8&255]+"-"+Se[n>>16&255]+Se[n>>24&255]+Se[255&i]+Se[i>>8&255]+Se[i>>16&255]+Se[i>>24&255]).toLowerCase()},clamp:De,euclideanModulo:Ie,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Re,damp:function(e,t,n,i){return Re(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(Ie(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Te=e);let t=Te+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ke},radToDeg:function(e){return e*Le},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+i)/2),d=s((t+i)/2),u=o((t-i)/2),h=s((t-i)/2),p=o((i-t)/2),m=s((i-t)/2);switch(r){case"XYX":e.set(a*d,l*u,l*h,a*c);break;case"YZY":e.set(l*h,a*d,l*u,a*c);break;case"ZXZ":e.set(l*u,l*h,a*d,a*c);break;case"XZX":e.set(a*d,l*m,l*p,a*c);break;case"YXY":e.set(l*p,a*d,l*m,a*c);break;case"ZYZ":e.set(l*m,l*p,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}});class Pe{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3];const u=r[o+0],h=r[o+1],p=r[o+2],m=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===s)return e[t+0]=u,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(d!==m||a!==u||l!==h||c!==p){let e=1-s;const t=a*u+l*h+c*p+d*m,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+u*r,l=l*e+h*r,c=c*e+p*r,d=d*e+m*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=e,l*=e,c*=e,d*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],l=n[i+2],c=n[i+3],d=r[o],u=r[o+1],h=r[o+2],p=r[o+3];return e[t]=s*p+c*d+a*h-l*u,e[t+1]=a*p+c*u+l*d-s*h,e[t+2]=l*p+c*h+s*u-a*d,e[t+3]=c*p-s*d-a*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(i/2),d=s(r/2),u=a(n/2),h=a(i/2),p=a(r/2);switch(o){case"XYZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"YXZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"ZXY":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"ZYX":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"YZX":this._x=u*c*d+l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d-u*h*p;break;case"XZY":this._x=u*c*d-l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d+u*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],d=t[10],u=n+s+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-a)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>s&&n>d){const e=2*Math.sqrt(1+n-s-d);this._w=(c-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(s>d){const e=2*Math.sqrt(1+s-n-d);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+d-n-s);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(De(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+i*l-r*a,this._y=i*c+o*a+r*s-n*l,this._z=r*c+o*l+n*a-i*s,this._w=o*c-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=o*d+this._w*u,this._x=n*d+this._x*u,this._y=i*d+this._y*u,this._z=r*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Be{constructor(e=0,t=0,n=0){Be.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ue.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ue.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*i-s*n,c=a*n+s*t-r*i,d=a*i+r*n-o*t,u=-r*t-o*n-s*i;return this.x=l*a+u*-r+c*-s-d*-o,this.y=c*a+u*-o+d*-r-l*-s,this.z=d*a+u*-s+l*-o-c*-r,this}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Ne.copy(this).projectOnVector(e),this.sub(Ne)}reflect(e){return this.sub(Ne.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(De(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ne=new Be,Ue=new Pe;function Fe(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ze(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const He={[Ee]:{[Me]:Fe},[Me]:{[Ee]:ze}},je={legacyMode:!0,get workingColorSpace(){return Me},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(He[t]&&void 0!==He[t][n]){const i=He[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ye={r:0,g:0,b:0},Ge={h:0,s:0,l:0},Qe={h:0,s:0,l:0};function $e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function qe(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class We{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ee){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,je.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=je.workingColorSpace){return this.r=e,this.g=t,this.b=n,je.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=je.workingColorSpace){if(e=Ie(e,1),t=De(t,0,1),n=De(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=$e(r,i,e+1/3),this.g=$e(r,i,e),this.b=$e(r,i,e-1/3)}return je.toWorkingColorSpace(this,i),this}setStyle(e,t=Ee){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,je.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,je.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const i=parseFloat(e[1])/360,r=parseFloat(e[2])/100,o=parseFloat(e[3])/100;return n(e[4]),this.setHSL(i,r,o,t)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=i[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,je.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,je.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ee){const n=Ve[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fe(e.r),this.g=Fe(e.g),this.b=Fe(e.b),this}copyLinearToSRGB(e){return this.r=ze(e.r),this.g=ze(e.g),this.b=ze(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ee){return je.fromWorkingColorSpace(qe(this,Ye),e),De(255*Ye.r,0,255)<<16^De(255*Ye.g,0,255)<<8^De(255*Ye.b,0,255)}getHexString(e=Ee){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=je.workingColorSpace){je.fromWorkingColorSpace(qe(this,Ye),t);const n=Ye.r,i=Ye.g,r=Ye.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case n:a=(i-r)/e+(i<r?6:0);break;case i:a=(r-n)/e+2;break;case r:a=(n-i)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=je.workingColorSpace){return je.fromWorkingColorSpace(qe(this,Ye),t),e.r=Ye.r,e.g=Ye.g,e.b=Ye.b,e}getStyle(e=Ee){return je.fromWorkingColorSpace(qe(this,Ye),e),e!==Ee?`color(${e} ${Ye.r} ${Ye.g} ${Ye.b})`:`rgb(${255*Ye.r|0},${255*Ye.g|0},${255*Ye.b|0})`}offsetHSL(e,t,n){return this.getHSL(Ge),Ge.h+=e,Ge.s+=t,Ge.l+=n,this.setHSL(Ge.h,Ge.s,Ge.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ge),e.getHSL(Qe);const n=Re(Ge.h,Qe.h,t),i=Re(Ge.s,Qe.s,t),r=Re(Ge.l,Qe.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}We.NAMES=Ve;class Ke{constructor(){Ke.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,o,s,a,l,c,d,u,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ke).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ze.setFromMatrixColumn(e,0).length(),r=1/Ze.setFromMatrixColumn(e,1).length(),o=1/Ze.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){const e=o*c,n=o*d,i=s*c,r=s*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*d,i=l*c,r=l*d;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*l,t[1]=o*d,t[5]=o*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*d,i=l*c,r=l*d;t[0]=e-r*s,t[4]=-o*d,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*c,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*d,i=s*c,r=s*d;t[0]=a*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=a*d,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=r-e*d,t[8]=i*d+n,t[1]=d,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*d+i,t[10]=e-r*d}else if("XZY"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=e*d+r,t[5]=o*c,t[9]=n*d-i,t[2]=i*d-n,t[6]=s*c,t[10]=r*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Je,e,et)}lookAt(e,t,n){const i=this.elements;return it.subVectors(e,t),0===it.lengthSq()&&(it.z=1),it.normalize(),tt.crossVectors(n,it),0===tt.lengthSq()&&(1===Math.abs(n.z)?it.x+=1e-4:it.z+=1e-4,it.normalize(),tt.crossVectors(n,it)),tt.normalize(),nt.crossVectors(it,tt),i[0]=tt.x,i[4]=nt.x,i[8]=it.x,i[1]=tt.y,i[5]=nt.y,i[9]=it.y,i[2]=tt.z,i[6]=nt.z,i[10]=it.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],y=n[7],b=n[11],A=n[15],_=i[0],w=i[4],x=i[8],C=i[12],E=i[1],M=i[5],S=i[9],T=i[13],k=i[2],L=i[6],D=i[10],I=i[14],R=i[3],O=i[7],P=i[11],B=i[15];return r[0]=o*_+s*E+a*k+l*R,r[4]=o*w+s*M+a*L+l*O,r[8]=o*x+s*S+a*D+l*P,r[12]=o*C+s*T+a*I+l*B,r[1]=c*_+d*E+u*k+h*R,r[5]=c*w+d*M+u*L+h*O,r[9]=c*x+d*S+u*D+h*P,r[13]=c*C+d*T+u*I+h*B,r[2]=p*_+m*E+f*k+g*R,r[6]=p*w+m*M+f*L+g*O,r[10]=p*x+m*S+f*D+g*P,r[14]=p*C+m*T+f*I+g*B,r[3]=v*_+y*E+b*k+A*R,r[7]=v*w+y*M+b*L+A*O,r[11]=v*x+y*S+b*D+A*P,r[15]=v*C+y*T+b*I+A*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+r*a*d-i*l*d-r*s*u+n*l*u+i*s*h-n*a*h)+e[7]*(+t*a*h-t*l*u+r*o*u-i*o*h+i*l*c-r*a*c)+e[11]*(+t*l*d-t*s*h-r*o*d+n*o*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*a*d+t*s*u+i*o*d-n*o*u+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=d*f*l-m*u*l+m*a*h-s*f*h-d*a*g+s*u*g,y=p*u*l-c*f*l-p*a*h+o*f*h+c*a*g-o*u*g,b=c*m*l-p*d*l+p*s*h-o*m*h-c*s*g+o*d*g,A=p*d*a-c*m*a-p*s*u+o*m*u+c*s*f-o*d*f,_=t*v+n*y+i*b+r*A;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(m*u*r-d*f*r-m*i*h+n*f*h+d*i*g-n*u*g)*w,e[2]=(s*f*r-m*a*r+m*i*l-n*f*l-s*i*g+n*a*g)*w,e[3]=(d*a*r-s*u*r-d*i*l+n*u*l+s*i*h-n*a*h)*w,e[4]=y*w,e[5]=(c*f*r-p*u*r+p*i*h-t*f*h-c*i*g+t*u*g)*w,e[6]=(p*a*r-o*f*r-p*i*l+t*f*l+o*i*g-t*a*g)*w,e[7]=(o*u*r-c*a*r+c*i*l-t*u*l-o*i*h+t*a*h)*w,e[8]=b*w,e[9]=(p*d*r-c*m*r-p*n*h+t*m*h+c*n*g-t*d*g)*w,e[10]=(o*m*r-p*s*r+p*n*l-t*m*l-o*n*g+t*s*g)*w,e[11]=(c*s*r-o*d*r-c*n*l+t*d*l+o*n*h-t*s*h)*w,e[12]=A*w,e[13]=(c*m*i-p*d*i+p*n*u-t*m*u-c*n*f+t*d*f)*w,e[14]=(p*s*i-o*m*i-p*n*a+t*m*a+o*n*f-t*s*f)*w,e[15]=(o*d*i-c*s*i+c*n*a-t*d*a-o*n*u+t*s*u)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,c*s+n,c*a-i*o,0,l*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,d=s+s,u=r*l,h=r*c,p=r*d,m=o*c,f=o*d,g=s*d,v=a*l,y=a*c,b=a*d,A=n.x,_=n.y,w=n.z;return i[0]=(1-(m+g))*A,i[1]=(h+b)*A,i[2]=(p-y)*A,i[3]=0,i[4]=(h-b)*_,i[5]=(1-(u+g))*_,i[6]=(f+v)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(f-v)*w,i[10]=(1-(u+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Ze.set(i[0],i[1],i[2]).length();const o=Ze.set(i[4],i[5],i[6]).length(),s=Ze.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Xe.copy(this);const a=1/r,l=1/o,c=1/s;return Xe.elements[0]*=a,Xe.elements[1]*=a,Xe.elements[2]*=a,Xe.elements[4]*=l,Xe.elements[5]*=l,Xe.elements[6]*=l,Xe.elements[8]*=c,Xe.elements[9]*=c,Xe.elements[10]*=c,t.setFromRotationMatrix(Xe),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){const s=this.elements,a=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),d=(n+i)/(n-i),u=-(o+r)/(o-r),h=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,i,r,o){const s=this.elements,a=1/(t-e),l=1/(n-i),c=1/(o-r),d=(t+e)*a,u=(n+i)*l,h=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ze=new Be,Xe=new Ke,Je=new Be(0,0,0),et=new Be(1,1,1),tt=new Be,nt=new Be,it=new Be,rt=new Ke,ot=new Pe;class st{constructor(e=0,t=0,n=0,i=st.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],l=i[5],c=i[9],d=i[2],u=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(De(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-De(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(De(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-De(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(De(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-De(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return rt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rt,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ot.setFromEuler(this),this.setFromQuaternion(ot,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}st.DefaultOrder="XYZ",st.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Symbol.iterator;var at,lt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ct=function(e){function t(t,n){return e.call(this,t,n)||this}return lt(t,e),t.prototype.getBody=function(){var e=[],t=this.getProperty("bodyValue");if(t)return[new Ae({id:"https://example.com/TextualBody/1",value:t,type:"TextualBody"},this.options)];var n=this.getProperty("body");if(n)for(var i=0,r=[].concat(n);i<r.length;i++){var o=r[i],s=o.items;s?e=e.concat(this.parseBodiesFromItemsList(s)):e.push(this.parseSingletonBody(o))}return e},Object.defineProperty(t.prototype,"Body",{get:function(){return this.getBody()},enumerable:!1,configurable:!0}),t.prototype.parseBodiesFromItemsList=function(e){for(var t=[],n=0,i=[].concat(e);n<i.length;n++){var r=i[n];t.push(this.parseSingletonBody(r))}return t},t.prototype.parseSingletonBody=function(e){return Ce.BuildFromJson(e,this.options)},t.prototype.getBody3D=function(){return console.warn("Annotation.getBody3D is deprecated: replace with getBody3D() with getBody()[0]"),this.getBody()[0]},t.prototype.getMotivation=function(){var e=this.getProperty("motivation");return e||null},t.prototype.getOn=function(){return this.getProperty("on")},t.prototype.getTarget=function(){var e=this.getPropertyAsObject("target");if(e.isIRI)return e;if(e.type&&"SpecificResource"==e.type)return new he(e,this.options);if(["Scene","Canvas"].includes(e.type))return e;throw new Error("unknown target specified")},Object.defineProperty(t.prototype,"Target",{get:function(){return this.getTarget()},enumerable:!1,configurable:!0}),t.prototype.getScopeContent=function(){var e,n,i,r=this,o=null===(i=null===(n=null===(e=this.getTarget())||void 0===e?void 0:e.getScope())||void 0===n?void 0:n.getTarget())||void 0===i?void 0:i.items;return o?o.filter(function(e){return e&&"AnnotationPage"===e.type}).map(function(e){return new pt(e,r.options).getItems()}).flat().filter(function(e){return e&&"Annotation"===e.type}).map(function(e){return new t(e,r.options)}):[]},Object.defineProperty(t.prototype,"ScopeContent",{get:function(){return this.getScopeContent()},enumerable:!1,configurable:!0}),t.prototype.getResource=function(){return new le(this.getProperty("resource"),this.options)},Object.defineProperty(t.prototype,"LookAtLocation",{get:function(){var e,t=this.getTarget();return t.isSpecificResource&&(null===(e=t.getSelector())||void 0===e?void 0:e.isPointSelector)?t.getSelector().getLocation():new Be(0,0,0)},enumerable:!1,configurable:!0}),t}(se),dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ut=function(e){function t(t,n,i){var r=e.call(this,n)||this;return r.label=t,r.options=i,r}return dt(t,e),t.prototype.getIIIFResourceType=function(){return Tt.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){return this.label},t.prototype.getResources=function(){var e=this;return this.getProperty("resources").map(function(t){return new ct(t,e.options)})},t.prototype.load=function(){var e=this;return new Promise(function(t,n){if(e.isLoaded)t(e);else{var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),Tt.loadManifest(i).then(function(n){e.__jsonld=n,e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,t(e)}).catch(n)}})},t}(te),ht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),pt=function(e){function t(t,n){return e.call(this,t,n)||this}return ht(t,e),t.prototype.getItems=function(){return this.getProperty("items")},t}(se),mt=n(2046),ft=n.n(mt),gt=n(9820),vt=n.n(gt),yt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bt=function(e){function t(t,n){return e.call(this,t,n)||this}return yt(t,e),t.prototype.getCanonicalImageUri=function(e){var t,n=null,i="default",r=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],r||(r=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(i="native");else{var o=void 0;if((o=this.getImages())&&o.length){var s=o[0].getResource(),a=s.getServices();if(r||(r=s.getWidth()),l=a?a.find(function(e){return Tt.isImageProfile(e.getProfile())||Tt.isImageServiceType(e.getIIIFResourceType())}):null)n=l.id,i=Tt.getImageQuality(l.getProfile());else if(r===s.getWidth())return s.id}if((o=this.getContent())&&o.length){var l,c=o[0].getBody()[0];a=c.getServices();if(r||(r=c.getWidth()),l=a?a.find(function(e){return Tt.isImageServiceType(e.getIIIFResourceType())}):null)n=l.id,i=Tt.getImageQuality(l.getProfile());else if(r===c.getWidth())return c.id}if(!n){var d=this.getProperty("thumbnail");if(d){if("string"==typeof d)return d;if(d["@id"])return d["@id"];if(d.length)return d[0].id}}}return t=r+",",n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",t,0,i+".jpg"].join("/")},t.prototype.getMaxDimensions=function(){var e,t=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter(function(e){var t;return null!==(t=e.maxWidth)&&void 0!==t?t:e.maxwidth})[0])&&(t=new qt(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),t},t.prototype.getContent=function(){var e=[],t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;var n=null;if(t.length&&(n=new pt(t[0],this.options)),!n)return e;for(var i=n.getItems(),r=0;r<i.length;r++){var o=i[r],s=new ct(o,this.options);e.push(s)}return e},t.prototype.getDuration=function(){return this.getProperty("duration")},t.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var t=0;t<this.__jsonld.images.length;t++){var n=this.__jsonld.images[t],i=new ct(n,this.options);e.push(i)}return e},t.prototype.getIndex=function(){return this.getProperty("index")},t.prototype.getNonContentAnnotations=function(){var e=this,t=(this.__jsonld.annotations||[]).filter(function(e){return e&&"AnnotationPage"===e.type}).map(function(t){return new pt(t,e.options)});if(!t.length)return[];var n=t.map(function(e){return e.getItems()});return vt()(n).map(function(t){return new ct(t,e.options)})},t.prototype.getOtherContent=function(){var e=this,t=Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")],n=t.filter(function(e){return e&&(t=e["@type"],n="sc:AnnotationList","string"==typeof t&&"string"==typeof n&&t.toLowerCase()==t.toLowerCase());var t,n}).map(function(t,n){return new ut(t.label||"Annotation list ".concat(n),t,e.options)}).map(function(e){return e.load()});return Promise.all(n)},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},Object.defineProperty(t.prototype,"imageResources",{get:function(){var e=this,n=vt()([this.getImages().map(function(e){return e.getResource()}),this.getContent().map(function(e){return e.getBody()})]);return ft()(n.map(function(n){switch(n.getProperty("type").toLowerCase()){case re.S3.CHOICE:case re.S3.OA_CHOICE:return new t({images:ft()([n.getProperty("default"),n.getProperty("item")]).map(function(e){return{resource:e}})},e.options).getImages().map(function(e){return e.getResource()});default:return n}}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resourceAnnotations",{get:function(){return vt()([this.getImages(),this.getContent()])},enumerable:!1,configurable:!0}),t.prototype.resourceAnnotation=function(e){return this.resourceAnnotations.find(function(t){return t.getResource().id===e||ft()(new Array(t.getBody())).some(function(t){return t.id===e})})},t.prototype.onFragment=function(e){var t=this.resourceAnnotation(e);if(t){var n=t.getProperty("on"),i=t.getProperty("target");if(n&&i){var r=(n||i).match(/xywh=(.*)$/);if(r)return r[1].split(",").map(function(e){return parseInt(e,10)})}}},Object.defineProperty(t.prototype,"iiifImageResources",{get:function(){return this.imageResources.filter(function(e){return e&&e.getServices()[0]&&e.getServices()[0].id})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageServiceIds",{get:function(){return this.iiifImageResources.map(function(e){return e.getServices()[0].id})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspectRatio",{get:function(){return this.getWidth()/this.getHeight()},enumerable:!1,configurable:!0}),t}(le),At=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_t=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.items=[],i._collections=null,i._manifests=null,t.__collection=i,i}return At(t,e),t.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter(function(e){return e.isCollection()})},t.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter(function(e){return e.isManifest()})},t.prototype.getCollectionByIndex=function(e){for(var t,n=this.getCollections(),i=0;i<n.length;i++){var r=n[i];r.index===e&&(t=r)}if(t)return t.options.index=e,t.load();throw new Error("Collection index not found")},t.prototype.getManifestByIndex=function(e){for(var t,n=this.getManifests(),i=0;i<n.length;i++){var r=n[i];r.index===e&&(t=r)}if(t)return t.options.index=e,t.load();throw new Error("Manifest index not found")},t.prototype.getTotalCollections=function(){return this.getCollections().length},t.prototype.getTotalManifests=function(){return this.getManifests().length},t.prototype.getTotalItems=function(){return this.items.length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):re.T5.LEFT_TO_RIGHT},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=Tt.normaliseType(Wt.COLLECTION),this._parseManifests(this),this._parseCollections(this),Tt.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var t=0;t<e.getManifests().length;t++){var n=e.getManifests()[t],i=n.getDefaultTree();i.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"manifest "+(t+1),i.navDate=n.getNavDate(),i.data.id=n.id,i.data.type=Tt.normaliseType(Wt.MANIFEST),e.defaultTree.addNode(i)}},t.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var t=0;t<e.getCollections().length;t++){var n=e.getCollections()[t],i=n.getDefaultTree();i.label=n.parentLabel||n.getLabel().getValue(this.options.locale)||"collection "+(t+1),i.navDate=n.getNavDate(),i.data.id=n.id,i.data.type=Tt.normaliseType(Wt.COLLECTION),e.defaultTree.addNode(i)}},t}(de),wt=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getLength=function(){return this.end-this.start},e}(),xt=function(){function e(e){this.defaultLocale=e}return e.prototype.parse=function(e){this.resource=e,this.label=Dt.parse(this.resource.label,this.defaultLocale),this.value=Dt.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(e){return null===this.label?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.label.getValue(e||this.defaultLocale))},e.prototype.setLabel=function(e){null===this.label&&(this.label=new Dt([])),this.label.setValue(e,this.defaultLocale)},e.prototype.getValue=function(e,t){return void 0===t&&(t="<br/>"),null===this.value?null:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValue(e||this.defaultLocale,t))},e.prototype.getValues=function(e){return null===this.value?[]:(Array.isArray(e)&&!e.length&&(e=void 0),this.value.getValues(e||this.defaultLocale))},e.prototype.setValue=function(e){null===this.value&&(this.value=new Dt([])),this.value.setValue(e,this.defaultLocale)},e}(),Ct=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Et=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ct(t,e),t.getValue=function(e,t){return e.getValue(t,"<br/>")},t.getValues=function(e,t){return e.getValues(t)}}(Array),n(3407)),Mt=(n(2126),function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})}),St=function(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Tt=function(){function e(){}return e.getMediaType=function(e){return(e=(e=e.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){return e===re.bB.IMAGE_0_COMPLIANCE_LEVEL_1||e===re.bB.IMAGE_0_COMPLIANCE_LEVEL_2||e===re.bB.IMAGE_1_COMPLIANCE_LEVEL_1||e===re.bB.IMAGE_1_COMPLIANCE_LEVEL_2||e===re.bB.IMAGE_0_CONFORMANCE_LEVEL_1||e===re.bB.IMAGE_0_CONFORMANCE_LEVEL_2||e===re.bB.IMAGE_1_CONFORMANCE_LEVEL_1||e===re.bB.IMAGE_1_CONFORMANCE_LEVEL_2||e===re.bB.IMAGE_1_LEVEL_1||e===re.bB.IMAGE_1_PROFILE_LEVEL_1||e===re.bB.IMAGE_1_LEVEL_2||e===re.bB.IMAGE_1_PROFILE_LEVEL_2?"native":"default"},e.getInexactLocale=function(e){return-1!==e.indexOf("-")?e.substr(0,e.indexOf("-")):e},e.getLocalisedValue=function(e,t){if(!Array.isArray(e))return e;for(var n=0;n<e.length;n++){var i=e[n];if(t===i["@language"])return i["@value"]}var r=t.substr(0,t.indexOf("-"));for(n=0;n<e.length;n++){var o=e[n];if(o["@language"]===r)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){var i;void 0===n&&(n=0),i=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=i;for(var r=0;r<t.nodes.length;r++){var o=t.nodes[r];e.generateTreeNodeIds(o,r)}},e.normaliseType=function(e){return-1!==(e=(e||"").toLowerCase()).indexOf(":")?e.split(":")[1]:e},e.normaliseUrl=function(e){return-1!==(e=e.substr(e.indexOf("://"))).indexOf("#")&&(e=e.split("#")[0]),e},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_2))},e.isImageServiceType=function(e){return null!==e&&e.toLowerCase()===re.C0.IMAGE_SERVICE_2.toLowerCase()||e===re.C0.IMAGE_SERVICE_3.toLowerCase()},e.isLevel0ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_0))},e.isLevel1ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_1))},e.isLevel2ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,re.bB.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,re.bB.IMAGE_2_PROFILE_LEVEL_2))},e.parseManifest=function(e,t){return Gt.parse(e,t)},e.checkStatus=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},e.loadManifest=function(t){return new Promise(function(n,i){fetch(t).then(e.checkStatus).then(function(e){return e.json()}).then(function(e){n(e)}).catch(function(e){i()})})},e.loadExternalResourcesAuth1=function(t,n,i,r,o,s,a,l){return new Promise(function(c,d){var u=t.map(function(t){return e.loadExternalResourceAuth1(t,n,i,r,o,s,a,l)});Promise.all(u).then(function(){c(t)}).catch(function(e){d(e)})})},e.loadExternalResourceAuth1=function(t,n,i,r,o,s,a,l){return Mt(this,void 0,void 0,function(){var c;return St(this,function(d){switch(d.label){case 0:return[4,r(t)];case 1:return(c=d.sent())?[4,t.getData(c)]:[3,6];case 2:return d.sent(),t.status!==Et.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,i,o,s,a,l)];case 4:d.sent(),d.label=5;case 5:if(t.status===Et.OK||t.status===Et.lf)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return d.sent(),t.status!==Et.lf&&t.status!==Et.hB?[3,9]:[4,e.doAuthChain(t,n,i,o,s,a,l)];case 8:d.sent(),d.label=9;case 9:if(t.status===Et.OK||t.status===Et.lf)return[2,t];throw e.createAuthorizationFailedError()}})})},e.doAuthChain=function(t,n,i,r,o,s,a){return Mt(this,void 0,void 0,function(){var l,c,d,u,h,p,m,f;return St(this,function(g){switch(g.label){case 0:return t.isAccessControlled()?((l=t.externalService)&&(l.options=t.options),(c=t.kioskService)&&(c.options=t.options),(d=t.clickThroughService)&&(d.options=t.options),(u=t.loginService)&&(u.options=t.options),t.isResponseHandled||t.status!==Et.lf?[3,2]:[4,s(t)]):[2,t];case 1:case 3:case 6:case 10:case 14:return g.sent(),[2,t];case 2:return h=null,p=null,(h=l)?(p=h,[4,e.attemptResourceWithToken(t,i,h)]):[3,4];case 4:return(h=c)?(p=h,(m=n(h))?[4,r(m)]:[3,7]):[3,7];case 5:case 9:case 13:return g.sent(),[4,e.attemptResourceWithToken(t,i,h)];case 7:return(h=d)?(p=h,[4,o(t,h)]):[3,11];case 8:return(f=g.sent())?[4,r(f)]:[3,11];case 11:return(h=u)?(p=h,[4,o(t,h)]):[3,15];case 12:return(f=g.sent())?[4,r(f)]:[3,15];case 15:return p&&a(t,p),[2]}})})},e.attemptResourceWithToken=function(e,t,n){return Mt(this,void 0,void 0,function(){var i,r;return St(this,function(o){switch(o.label){case 0:return(i=n.getService(re.bB.AUTH_1_TOKEN))?[4,t(e,i)]:[3,3];case 1:return(r=o.sent())&&r.accessToken?[4,e.getData(r)]:[3,3];case 2:return o.sent(),[2,e];case 3:return[2]}})})},e.loadExternalResourcesAuth09=function(t,n,i,r,o,s,a,l,c,d){return new Promise(function(u,h){var p=t.map(function(t){return e.loadExternalResourceAuth09(t,n,i,r,o,s,a,l,c,d)});Promise.all(p).then(function(){u(t)}).catch(function(e){h(e)})})},e.loadExternalResourceAuth09=function(t,n,i,r,o,s,a,l,c,d){return new Promise(function(u,h){d&&d.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?(u(i(t)),u(r(t))):o(t).then(function(){s(t,!0).then(function(n){t.getData(n).then(function(){u(c(t))}).catch(function(t){h(e.createInternalServerError(t))})}).catch(function(t){h(e.createInternalServerError(t))})}).catch(function(t){h(e.createInternalServerError(t))}):u(t)}).catch(function(t){h(e.createInternalServerError(t))}):l(t,n).then(function(d){d?t.getData(d).then(function(){t.status===Et.OK?u(c(t)):e.authorize(t,n,i,r,o,s,a,l).then(function(){u(c(t))}).catch(function(t){h(e.createAuthorizationFailedError())})}).catch(function(t){h(e.createAuthorizationFailedError())}):e.authorize(t,n,i,r,o,s,a,l).then(function(){u(c(t))}).catch(function(t){h(e.createAuthorizationFailedError())})}).catch(function(t){h(e.createAuthorizationFailedError())})})},e.createError=function(e,t){var n=new Error;return n.message=t,n.name=String(e),n},e.createAuthorizationFailedError=function(){return e.createError(Ot.AUTHORIZATION_FAILED,"Authorization failed")},e.createRestrictedError=function(){return e.createError(Ot.RESTRICTED,"Restricted")},e.createInternalServerError=function(t){return e.createError(Ot.INTERNAL_SERVER_ERROR,t)},e.authorize=function(t,n,i,r,o,s,a,l){return new Promise(function(c,d){t.getData().then(function(){t.isAccessControlled()?l(t,n).then(function(l){l?t.getData(l).then(function(){t.status===Et.OK?c(t):e.showAuthInteraction(t,n,i,r,o,s,a,c,d)}).catch(function(t){d(e.createInternalServerError(t))}):s(t,!1).then(function(l){l?a(t,l,n).then(function(){t.getData(l).then(function(){t.status===Et.OK?c(t):e.showAuthInteraction(t,n,i,r,o,s,a,c,d)}).catch(function(t){d(e.createInternalServerError(t))})}).catch(function(t){d(e.createInternalServerError(t))}):e.showAuthInteraction(t,n,i,r,o,s,a,c,d)})}).catch(function(t){d(e.createInternalServerError(t))}):c(t)})})},e.showAuthInteraction=function(t,n,i,r,o,s,a,l,c){t.status!==Et.lf||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?i(t).then(function(){s(t,!0).then(function(i){a(t,i,n).then(function(){t.getData(i).then(function(){l(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):o(t).then(function(){s(t,!0).then(function(i){a(t,i,n).then(function(){t.getData(i).then(function(){l(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):l(t)},e.getService=function(e,t){for(var n=this.getServices(e),i=0;i<n.length;i++){var r=n[i];if(r.getProfile()===t)return r}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,"@id",n)},e.traverseAndFind=function(t,n,i){if(t.hasOwnProperty(n)&&t[n]===i)return t;for(var r=0;r<Object.keys(t).length;r++)if("object"==typeof t[Object.keys(t)[r]]){var o=e.traverseAndFind(t[Object.keys(t)[r]],n,i);if(null!=o)return o}},e.getServices=function(t,n){var i=void 0===n?{}:n,r=i.onlyService,o=void 0!==r&&r,s=i.onlyServices,a=void 0!==s&&s,l=i.skipParentResources,c=[];!(void 0!==l&&l)&&t&&t.options&&t.options.resource&&t.options.resource!==t&&c.push.apply(c,e.getServices(t.options.resource,{onlyServices:!0}));var d=a?[]:(t.__jsonld||t).service||[];if(Array.isArray(d)||(d=[d]),o||d.push.apply(d,(t.__jsonld||t).services||[]),0===d.length)return c;for(var u=0;u<d.length;u++){var h=d[u];if("string"==typeof h){var p=this.getResourceById(t.options.resource,h);p&&c.push(new $t(p.__jsonld||p,t.options))}else c.push(new $t(h,t.options))}return c},e.getTemporalComponent=function(e){var t=/t=([^&]+)/g.exec(e),n=null;return t&&t[1]&&(n=t[1].split(",")),n},e}(),kt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Lt=function(){function e(e,t,n){void 0===n&&(n="none"),Array.isArray(e)&&1===e.length?this._value=e[0]:this._value=e,"none"!==t&&"@none"!==t||(t=void 0),this._locale=t,this._defaultLocale=n}return e.parseV2Value=function(t,n){return"string"==typeof t?new e(t,void 0,n):t["@value"]?new e(t["@value"],t["@language"],n):null},Object.defineProperty(e.prototype,"value",{get:function(){return Array.isArray(this._value)?this._value.join("<br/>"):this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return void 0===this._locale?this._defaultLocale:this._locale},enumerable:!1,configurable:!0}),e.prototype.addValue=function(e){Array.isArray(this._value)||(this._value=[this._value]),Array.isArray(e)?this._value=this._value.concat(e):this._value.push(e)},e}(),Dt=function(e){function t(n,i){void 0===n&&(n=[]);var r=e.apply(this,n)||this;return r.__proto__=t.prototype,r._defaultLocale=i,r}return kt(t,e),t.parse=function(e,n){if(!e)return new t([],n);if(Array.isArray(e)){var i=(r=e.map(function(e){return Lt.parseV2Value(e,n)}).filter(function(e){return null!==e})).reduce(function(e,t){var n=t._locale;return n||(n="none"),e[n]?e[n].addValue(t._value):e[n]=t,e},{});return new t(Object.values(i),n)}return"string"==typeof e?new t([new Lt(e,void 0,n)],n):e["@language"]||e["@value"]?new t(null!==(r=Lt.parseV2Value(e))?[r]:[],n):new t(Object.keys(e).map(function(t){var i=e[t];if(!Array.isArray(i))throw new Error("A IIIF v3 localized property value must have an array as the value for a given language.");return new Lt(i,t,n)}),n);var r},t.prototype.getSuitableLocale=function(e){0==e.length&&this._defaultLocale&&e.push(this._defaultLocale);for(var t=Array.from(this.values()).map(function(e){return e._locale}).filter(function(e){return void 0!==e}),n=function(e){var n=t.find(function(t){return t===e});if(n)return{value:n}},i=0,r=e;i<r.length;i++){var o=n(r[i]);if("object"==typeof o)return o.value}for(var s=function(e){var n=t.find(function(t){return Tt.getInexactLocale(t)===Tt.getInexactLocale(e)});if(n)return{value:n}},a=0,l=e;a<l.length;a++){var c=s(l[a]);if("object"==typeof c)return c.value}},t.prototype.setValue=function(e,t){var n=void 0;if(t){var i=this.getSuitableLocale([t]);i&&(n=this.find(function(e){return e._locale===i}))}else n=this.find(function(e){return void 0===e._locale});n?n._value=e:this.push(new Lt(e,t,this._defaultLocale))},t.prototype.getValue=function(e,t){var n=this.getValues(e);return 0===n.length?null:t?n.join(t):n[0]},t.prototype.getValues=function(e){if(!this.length)return[];var t;if(t=e?Array.isArray(e)?e:[e]:[],1===this.length&&void 0===this[0]._locale){var n=this[0]._value;return Array.isArray(n)?n:[n]}var i=this.getSuitableLocale(t);if(i){n=this.find(function(e){return e._locale===i})._value;return Array.isArray(n)?n:[n]}var r=!this.find(function(e){return void 0===e._locale});if(r){n=this[0]._value;return Array.isArray(n)?n:[n]}var o=this.find(function(e){return void 0===e._locale});return o?Array.isArray(o._value)?o._value:[o._value]:[]},t}(Array),It=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Rt=function(e){function t(t,n){var i=e.call(this,t,n)||this;if(i.index=0,i._allRanges=null,i.items=[],i._topRanges=[],i.__jsonld.structures&&i.__jsonld.structures.length)for(var r=i._getTopRanges(),o=0;o<r.length;o++){var s=r[o];i._parseRanges(s,String(o))}return i._annotationIdMap=null,i}return It(t,e),t.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new bt(e,this.options)),e},t.prototype.getAccompanyingCanvas=function(){var e=this.getProperty("accompanyingCanvas");return e&&(e=new bt(e,this.options)),e},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=Tt.normaliseType(Wt.MANIFEST),!this.isLoaded)return this.defaultTree;var t=this.getTopRanges();return t.length&&t[0].getTree(this.defaultTree),Tt.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];n.viewingHint===re.LX.TOP&&e.push(n)}if(!e.length){var i={};i.ranges=this.__jsonld.structures,e.push(i)}}return e},t.prototype.getTopRanges=function(){return this._topRanges},t.prototype._getRangeById=function(e){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];if(n["@id"]===e||n.id===e)return n}return null},t.prototype._parseRanges=function(e,t,n){var i=null;if("string"==typeof e&&(i=e,e=this._getRangeById(i)),e){var r=new Ut(e,this.options);r.parentRange=n,r.path=t,n?n.items.push(r):this._topRanges.push(r);var o=e.items||e.members;if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a["@type"]&&"sc:range"===a["@type"].toLowerCase()||a.type&&"range"===a.type.toLowerCase())this._parseRanges(a,t+"/"+s,r);else if(a["@type"]&&"sc:canvas"===a["@type"].toLowerCase()||a.type&&"canvas"===a.type.toLowerCase()){r.canvases||(r.canvases=[]);var l=a.id||a["@id"];r.canvases.push(l)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],t+"/"+s,r)}else console.warn("Range:",i,"does not exist")},t.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var e=this.getTopRanges(),t=function(t){var i=e[t];i.id&&n._allRanges.push(i);var r=function(e,t){e.add(t);var n=t.getRanges();return n.length?n.reduce(r,e):e},o=Array.from(i.getRanges().reduce(r,new Set));n._allRanges=n._allRanges.concat(o)},n=this,i=0;i<e.length;i++)t(i);return this._allRanges},t.prototype.getRangeById=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var i=t[n];if(i.id===e)return i}return null},t.prototype.getRangeByPath=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var i=t[n];if(i.path===e)return i}return null},t.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var t=0;t<e.length;t++){var n=e[t],i=new Yt(n,this.options);this.items.push(i)}else if(this.__jsonld.items){i=new Yt(this.__jsonld.items,this.options);this.items.push(i)}return this.items},t.prototype.getSequenceByIndex=function(e){return this.getSequences()[e]},t.prototype.getTotalSequences=function(){return this.getSequences().length},t.prototype.getManifestType=function(){var e=this.getService(re.bB.UI_EXTENSIONS);return e?e.getProperty("manifestType"):at.EMPTY},t.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e===re.LX.PAGED;var t=this.getBehavior();return!!t&&t===re.nS.PAGED},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},Object.defineProperty(t.prototype,"annotationIdMap",{get:function(){if(null==this._annotationIdMap){this._annotationIdMap={};for(var e=0,t=this.getSequences();e<t.length;e++)for(var n=0,i=t[e].getScenes();n<i.length;n++)for(var r=0,o=i[n].getContent();r<o.length;r++){var s=o[r];this._annotationIdMap[s.id]=s}}return this._annotationIdMap},enumerable:!1,configurable:!0}),t}(de);!function(e){e.EMPTY="",e.MANUSCRIPT="manuscript",e.MONOGRAPH="monograph"}(at||(at={}));var Ot,Pt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Bt=function(e){function t(t){var n=e.call(this,t)||this;return n.isPointSelector=!0,n}return Pt(t,e),t.prototype.getLocation=function(){return new Be(this.__jsonld.x,this.__jsonld.y,this.__jsonld.z)},Object.defineProperty(t.prototype,"Location",{get:function(){return this.getLocation()},enumerable:!1,configurable:!0}),t}(te),Nt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ut=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._ranges=null,i.canvases=null,i.items=[],i}return Nt(t,e),t.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},t.prototype.getDuration=function(){if(this.canvases&&this.canvases.length){for(var e=[],t=[],n=0,i=this.canvases;n<i.length;n++){if(p=i[n]){var r=p.match(/(.*)#t=([0-9.]+),?([0-9.]+)?/)||[void 0,p],o=r[1],s=r[2],a=r[3];o&&(e.push(parseFloat(s)),t.push(parseFloat(a)))}}if(e.length&&t.length)return new wt(Math.min.apply(Math,e),Math.max.apply(Math,t))}else{e=[],t=[];for(var l=0,c=f=this.getRanges();l<c.length;l++){(g=c[l].getDuration())&&(e.push(g.start),t.push(g.end))}if(e.length&&t.length)return new wt(Math.min.apply(Math,e),Math.max.apply(Math,t))}var d,u;if(this.canvases&&this.canvases.length)for(var h=0;h<this.canvases.length;h++){var p=this.canvases[h],m=Tt.getTemporalComponent(p);m&&m.length>1&&(0===h&&(d=Number(m[0])),h===this.canvases.length-1&&(u=Number(m[1])))}else{var f=this.getRanges();for(h=0;h<f.length;h++){var g;(g=f[h].getDuration())&&(0===h&&(d=g.start),h===f.length-1&&(u=g.end))}}if(void 0!==d&&void 0!==u)return new wt(d,u)},t.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter(function(e){return e.isRange()})},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getTree=function(e){e.data=this,this.treeNode=e;var t=this.getRanges();if(t&&t.length)for(var n=0;n<t.length;n++){var i=t[n],r=new nn;e.addNode(r),this._parseTreeNode(r,i)}return Tt.generateTreeNodeIds(e),e},t.prototype.spansTime=function(e){var t=this.getDuration();return!!(t&&e>=t.start&&e<=t.end)},t.prototype._parseTreeNode=function(e,t){e.label=t.getLabel().getValue(this.options.locale),e.data=t,e.data.type=Tt.normaliseType(Wt.RANGE),t.treeNode=e;var n=t.getRanges();if(n&&n.length)for(var i=0;i<n.length;i++){var r=n[i];if(r.getBehavior()!==re.nS.NO_NAV){var o=new nn;e.addNode(o),this._parseTreeNode(o,r)}}},t}(se),Ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),zt=function(e){function t(t,n){return e.call(this,t,n)||this}return Ft(t,e),t.prototype.getFormat=function(){return this.getProperty("format")},t}(se),Ht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),jt=function(e){function t(t,n){return e.call(this,t,n)||this}return Ht(t,e),t.prototype.getContent=function(){var e=[],t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;var n=null;if(t.length&&(n=new pt(t[0],this.options)),!n)return e;for(var i=n.getItems(),r=0;r<i.length;r++){var o=i[r],s=new ct(o,this.options);e.push(s)}return e},Object.defineProperty(t.prototype,"Content",{get:function(){return this.getContent()},enumerable:!1,configurable:!0}),t.prototype.getAnnotationById=function(e){for(var t=0,n=this.Content;t<n.length;t++){var i=n[t];if(i.id===e)return i}return null},t.prototype.getBackgroundColor=function(){var e=this.getProperty("backgroundColor");return e?cn.fromCSS(e):null},t.prototype.getNonContentAnnotations=function(){var e=this,t=(this.__jsonld.annotations||[]).filter(function(e){return e&&"AnnotationPage"===e.type}).map(function(t){return new pt(t,e.options)});if(!t.length)return[];var n=t.map(function(e){return e.getItems()});return vt()(n).map(function(t){return new ct(t,e.options)})},t}(se),Vt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Yt=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.items=[],i._thumbnails=null,i}return Vt(t,e),t.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var t=0;t<e.length;t++){var n=e[t];(i=new bt(n,this.options)).index=t,this.items.push(i)}else if(this.__jsonld)for(t=0;t<this.__jsonld.length;t++){var i;n=this.__jsonld[t];(i=new bt(n,this.options)).index=t,this.items.push(i)}return this.items},t.prototype.getCanvasById=function(e){for(var t=0;t<this.getTotalCanvases();t++){var n=this.getCanvasByIndex(t),i=Tt.normaliseUrl(n.id);if(Tt.normaliseUrl(e)===i)return n}return null},t.prototype.getCanvasByIndex=function(e){return this.getCanvases()[e]},t.prototype.getCanvasIndexById=function(e){for(var t=0;t<this.getTotalCanvases();t++){if(this.getCanvasByIndex(t).id===e)return t}return null},t.prototype.getCanvasIndexByLabel=function(e,t){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),t&&(e+="r"));for(var n,i,r,o=/(\d*)\D+(\d*)/,s=0;s<this.getTotalCanvases();s++){var a=this.getCanvasByIndex(s);if(a.getLabel().getValue(this.options.locale)===e)return s;if((n=o.exec(e))&&(i=n[1],(r=n[2])&&new RegExp("^"+i+"\\D+"+r+"$").test(a.getLabel().toString())))return s}return-1},t.prototype.getLastCanvasLabel=function(e){for(var t=this.getTotalCanvases()-1;t>=0;t--){var n=this.getCanvasByIndex(t).getLabel().getValue(this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(n))return n}else if(n)return n}return this.options.defaultLabel},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getNextPageIndex=function(e,t){var n;if(t){var i=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r===re.T5.RIGHT_TO_LEFT?i[0]+1:i[i.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},t.prototype.getPagedIndices=function(e,t){var n=[];if(t){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var i=this.getViewingDirection();i&&i===re.T5.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(e);return n},t.prototype.getPrevPageIndex=function(e,t){var n;if(t){var i=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r===re.T5.RIGHT_TO_LEFT?i[i.length-1]-1:i[0]-1}else n=e-1;return n},t.prototype.getScenes=function(){var e=[],t=this.__jsonld.elements||this.__jsonld;if(t)for(var n=0;n<t.length;++n){var i=t[n];if("Scene"===i.type){var r=new jt(i,this.options);e.push(r)}}return e},t.prototype.getStartCanvasIndex=function(){var e=this.getStartCanvas();if(e)for(var t=0;t<this.getTotalCanvases();t++){if(this.getCanvasByIndex(t).id===e)return t}return 0},t.prototype.getThumbs=function(e,t){for(var n=[],i=this.getTotalCanvases(),r=0;r<i;r++){var o=this.getCanvasByIndex(r),s=new Kt(e,o);n.push(s)}return n},t.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var e=this.getCanvases(),t=0;t<e.length;t++){var n=e[t].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},t.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},t.prototype.getTotalCanvases=function(){return this.getCanvases().length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.isCanvasIndexOutOfRange=function(e){return e>this.getTotalCanvases()-1},t.prototype.isFirstCanvas=function(e){return 0===e},t.prototype.isLastCanvas=function(e){return e===this.getTotalCanvases()-1},t.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e===re.LX.PAGED},t.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},t}(se),Gt=function(){function e(){}return e.parse=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),this.parseJson(e,t)},e.parseJson=function(e,t){var n;if(t&&t.navDate&&!isNaN(t.navDate.getTime())&&(e.navDate=t.navDate.toString()),e["@type"])switch(e["@type"]){case"sc:Collection":n=this.parseCollection(e,t);break;case"sc:Manifest":n=this.parseManifest(e,t);break;default:return null}else switch(e.type){case"Collection":n=this.parseCollection(e,t);break;case"Manifest":n=this.parseManifest(e,t);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,t){var n=new _t(e,t);return t?(n.index=t.index||0,t.resource&&(n.parentCollection=t.resource.parentCollection)):n.index=0,this.parseCollections(n,t),this.parseManifests(n,t),this.parseItems(n,t),n},e.parseCollections=function(e,t){var n;if(e.__jsonld.collections?n=e.__jsonld.collections:e.__jsonld.items&&(n=e.__jsonld.items.filter(function(e){return"collection"===e.type.toLowerCase()})),n)for(var i=0;i<n.length;i++){t&&(t.index=i);var r=this.parseCollection(n[i],t);r.index=i,r.parentCollection=e,e.items.push(r)}},e.parseManifest=function(e,t){return new Rt(e,t)},e.parseManifests=function(e,t){var n;if(e.__jsonld.manifests?n=e.__jsonld.manifests:e.__jsonld.items&&(n=e.__jsonld.items.filter(function(e){return"manifest"===e.type.toLowerCase()})),n)for(var i=0;i<n.length;i++){var r=this.parseManifest(n[i],t);r.index=i,r.parentCollection=e,e.items.push(r)}},e.parseItem=function(e,t){if(e["@type"]){if("sc:manifest"===e["@type"].toLowerCase())return this.parseManifest(e,t);if("sc:collection"===e["@type"].toLowerCase())return this.parseCollection(e,t)}else if(e.type){if("manifest"===e.type.toLowerCase())return this.parseManifest(e,t);if("collection"===e.type.toLowerCase())return this.parseCollection(e,t)}return null},e.parseItems=function(e,t){var n=e.__jsonld.members||e.__jsonld.items;if(n)for(var i=function(i){t&&(t.index=i);var o=r.parseItem(n[i],t);return o?e.items.filter(function(e){return e.id===o.id})[0]?"continue":(o.index=i,o.parentCollection=e,void e.items.push(o)):{value:void 0}},r=this,o=0;o<n.length;o++){var s=i(o);if("object"==typeof s)return s.value}},e}(),Qt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$t=function(e){function t(t,n){return e.call(this,t,n)||this}return Qt(t,e),t.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?e[0]:e},t.prototype.getConfirmLabel=function(){return Tt.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},t.prototype.getDescription=function(){return Tt.getLocalisedValue(this.getProperty("description"),this.options.locale)},t.prototype.getFailureDescription=function(){return Tt.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},t.prototype.getFailureHeader=function(){return Tt.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},t.prototype.getHeader=function(){return Tt.getLocalisedValue(this.getProperty("header"),this.options.locale)},t.prototype.getServiceLabel=function(){return Tt.getLocalisedValue(this.getProperty("label"),this.options.locale)},t.prototype.getInfoUri=function(){var e=this.id;return e.endsWith("/")||(e+="/"),e+="info.json"},t}(se),qt=function(e,t){this.width=e,this.height=t};!function(e){e[e.AUTHORIZATION_FAILED=1]="AUTHORIZATION_FAILED",e[e.FORBIDDEN=2]="FORBIDDEN",e[e.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",e[e.RESTRICTED=4]="RESTRICTED"}(Ot||(Ot={}));var Wt,Kt=function(e,t){this.data=t,this.index=t.index,this.width=e;var n=t.getHeight()/t.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=t.getCanonicalImageUri(e),this.label=t.getLabel().getValue(),this.viewingHint=t.getViewingHint()},Zt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xt=function(e){function t(t,n){return e.call(this,t,n)||this}return Zt(t,e),t}(le),Jt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),en=function(e){function t(t){var n=e.call(this,t)||this;return n.isTranslateTransform=!0,n}return Jt(t,e),t.prototype.getTranslation=function(){for(var e={},t=0,n=["x","y","z"];t<n.length;t++){var i=n[t],r=this.__jsonld[i];e[i]=void 0!==r?Number(r):0}return e},t}(ie),tn=function(){function e(){}return e.BuildFromJson=function(e){if("TranslateTransform"===e.type)return new en(e);if("RotateTransform"===e.type)return new on(e);if("ScaleTransform"===e.type)return new an(e);throw new Error("Unknown transform type "+e.type)},e}(),nn=function(){function e(e,t){this.label=e,this.data=t||{},this.nodes=[]}return e.prototype.addNode=function(e){this.nodes.push(e),e.parentNode=this},e.prototype.isCollection=function(){return this.data.type===Tt.normaliseType(Wt.COLLECTION)},e.prototype.isManifest=function(){return this.data.type===Tt.normaliseType(Wt.MANIFEST)},e.prototype.isRange=function(){return this.data.type===Tt.normaliseType(Wt.RANGE)},e}();!function(e){e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range"}(Wt||(Wt={}));var rn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),on=function(e){function t(t){var n=e.call(this,t)||this;return n.isRotateTransform=!0,n}return rn(t,e),t.prototype.getRotation=function(){for(var e={},t=0,n=["x","y","z"];t<n.length;t++){var i=n[t],r=this.__jsonld[i];e[i]=void 0!==r?Number(r):0}return e},Object.defineProperty(t.prototype,"Rotation",{get:function(){return this.getRotation()},enumerable:!1,configurable:!0}),t}(ie),sn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),an=function(e){function t(t){var n=e.call(this,t)||this;return n.isScaleTransform=!0,n}return sn(t,e),t.prototype.getScale=function(){for(var e={},t=0,n=["x","y","z"];t<n.length;t++){var i=n[t],r=this.__jsonld[i];e[i]=void 0!==r?Number(r):1}return e},t}(ie),ln=n(8570),cn=function(){function e(e){this.value=e}return e.fromCSS=function(t){var n=ln.get(t);if("rgb"!==n.model)throw new Error("unsupported color string: "+t);return new e([n.value[0],n.value[1],n.value[2]])},Object.defineProperty(e.prototype,"red",{get:function(){return this.value[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"green",{get:function(){return this.value[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blue",{get:function(){return this.value[2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CSS",{get:function(){return ln.to.hex(this.value)},enumerable:!1,configurable:!0}),e}();function dn(e){var t=e.Rotation;return new st(Oe.degToRad(t.x),Oe.degToRad(t.y),Oe.degToRad(t.z),"XYZ")}var un=function(e,t){return Tt.parseManifest(e,t)},hn=n(8722),pn=n(8424),mn=n(2222),fn=n(6884),gn=n(2552),vn=n(4965),yn=n(5676),bn=n(5852),An=n(2690),_n=n(4260),wn=n.n(_n),xn=n(4640),Cn=n(7832),En=n(8446);const Mn=new xn.kn4,Sn=new xn.kn4,Tn=new xn.Pq0,kn=new xn.Pq0,Ln=new xn.O9p,Dn=new xn.Q1f,In=new xn.Pq0(0,1,0);class Rn{constructor(e){this.application=null,this.application=e}loadIIIFManifest(e){const t=this.application,n=[];console.log("LOADING IIIF MANIFEST");const i=t.system.getMainComponent(z.A),r=t.system.getMainComponent(j.A),o=i.activeComponent,s=new On(e);let a=null;const l=o.getInnerComponent(X.A),c=o.setup;s.loadManifest().then(()=>{const e=s.scenes,i=o.meta.collection.get("titles");s.manifest.getLabel().forEach(e=>{i[e._locale.substring(0,2).toUpperCase()]=e._value}),o.ins.title.setValue(i[ee.aL[c.language.outs.activeLanguage.value]]),o.meta.collection.insert(s.manifest.getSummary().getValue(),"IIIFManifestSummary"),e.forEach(e=>{var i,d,u;const h=[],p=[],m=[],f=[],g=[],v=[];let y=null;l.node.name=null!==(i=e.getLabel().getValue())&&void 0!==i?i:"Scene";const b=null===(d=e.getProperty("spatialScale"))||void 0===d?void 0:d.quantityValue;if(b){const e=null===(u=[{factor:.001,unit:ee.uj.mm},{factor:.01,unit:ee.uj.cm},{factor:1,unit:ee.uj.m},{factor:1e3,unit:ee.uj.km},{factor:.0254,unit:ee.uj.in},{factor:.3048,unit:ee.uj.ft},{factor:.9144,unit:ee.uj.yd},{factor:1609,unit:ee.uj.mi}].find(e=>Math.abs(e.factor-b)<.001))||void 0===u?void 0:u.unit;l.ins.units.setValue(e||ee.uj.cm)}else l.ins.units.setValue(ee.uj.cm);const A=e.getBackgroundColor();A&&(t.setBackgroundStyle("solid"),t.setBackgroundColor("rgb("+A.red+","+A.green+","+A.blue+")"));if(s.annotationsFromScene(e).forEach(e=>{const t=e.getBody()[0],n=t.isSpecificResource()?t.getSource():t,i=n.getType();switch(i){case"model":h.push(e);break;case"perspectivecamera":case"orthographiccamera":p.push(e);break;case"directionallight":case"spotlight":case"pointlight":case"ambientlight":m.push(e);break;case"textualbody":f.push(e);break;case"canvas":g.push(e);break;case"sound":v.push(e);break;case"text":n.isSoundCaption&&(y=e);break;default:console.log("Unsupported IIIF annotation type: "+i)}}),h.forEach(e=>{var t;const i=e.getBody()[0],r=o.appendModel(i.isSpecificResource()?null===(t=i.getSource())||void 0===t?void 0:t.id:i.id);n.push(r),r.ins.localUnits.setValue(b?l.ins.units.value:ee.uj.cm);const s=i.getLabelFromSelfOrSource().getValue();r.node.name=null!=s?s:"Model",r.ins.name.setValue(r.node.name),r.setFromMatrix(this.getIIIFBodyTransform(i,e))}),m.length>0){c.navigation.ins.lightsFollowCamera.setValue(!1);const t=o.innerGraph.findNodeByName("Lights"),n=t.getComponent(pn.Ay).children.slice();for(;n.length>0;){const e=n.pop();e.hasComponent(C.A)?e.getComponent(C.A).ins.enabled.setValue(!1):e.dispose()}m.forEach(n=>{const i=n.getBody()[0],r=i.getLabelFromSelfOrSource().getValue();let s=null;const a=o.innerGraph.createCustomNode(mn.A);if(t.getComponent(pn.Ay).addChild(a.transform),i.isPointLight()?s=a.createComponent(fn.A):i.isDirectionalLight()?s=a.createComponent(gn.A):i.isSpotLight()?(s=a.createComponent(vn.A),s.ins.angle.setValue(i.getAngle()||hn.A.PI/3)):i.isAmbientLight()&&(s=a.createComponent(bn.A)),s){a.name=null!=r?r:s.typeName,s.ins.name.setValue(a.name),s.ins.intensity.setValue(i.getIntensity());const t=i.getColor().value;s.ins.color.setValue([t[0]/255,t[1]/255,t[2]/255]);const o=this.getIIIFBodyTransform(i,n);Tn.setFromMatrixPosition(o),s.transform.object3D.matrix.copy(o);const l=this.getIIIFLookAtTransform(i,e,Tn,In);l&&(s.transform.object3D.matrix.multiply(l),s.transform.object3D.matrix.multiply(Mn.makeRotationX(90*hn.A.DEG2RAD))),s.transform.setPropertiesFromMatrix()}else console.warn("Unhandled IIIF light type: "+i.getType())})}if(p.length>0){const t=p[0],n=l.cameras[0],i=c.navigation.ins;i.autoZoom.setValue(!1),i.minOffset.setValue([-1/0,-1/0,-1/0]);const r=t.getBody()[0],o=r.getLabelFromSelfOrSource().getValue();n.node.name=null!=o?o:"Camera",Sn.copy(this.getIIIFBodyTransform(r,t)),Tn.setFromMatrixPosition(Sn);const s=this.getIIIFLookAtTransform(r,e,Tn,In);Ln.setFromRotationMatrix(s||Sn,"YXZ"),kn.setFromEuler(Ln).multiplyScalar(hn.A.RAD2DEG),Tn.applyMatrix4(Sn.makeRotationFromEuler(Ln).invert()),i.offset.setValue(Tn.toArray()),i.orbit.setValue(kn.toArray());const a=r.FieldOfView;a&&n.ins.fov.setValue(a);const d=r.Near,u=r.Far;(d||u)&&(n.addIns.autoNearFar.setValue(!1),d&&n.ins.near.setValue(d),u&&n.ins.far.setValue(u)),n.ins.projection.setValue(r.isPerspectiveCamera()?yn.$R.Perspective:yn.$R.Orthographic)}if(v.length>0){const e=v[0].getBody();e.forEach(t=>{var n;const i=(null===(n=t.getProperty("language"))||void 0===n?void 0:n.toUpperCase())||ee.Nm,r=e.getLabelFromSelfOrSource().getValue(),o=c.audio.narrationId=En.A.generateId(),s={id:o,name:null!=r?r:"Narration Audio",uris:{},captionUris:{},durations:{}};c.audio.addAudioClip(s);const a=t.getProperty("id");s.uris[i]=a,c.audio.updateAudioClip(o)}),y&&y.getBody().forEach(e=>{var t;const n=(null===(t=e.getProperty("language"))||void 0===t?void 0:t.toUpperCase())||ee.Nm;if(e.isSoundCaption()){const t=c.audio.getAudioClip(c.audio.narrationId);t?t.captionUris[n]=e.getProperty("id"):console.warn("Caption file not loaded - no corresponding audio clip.")}})}c.viewer.ins.annotationsVisible.setValue(f.length>0),f.forEach(t=>{const i=t.getTarget(),r=t.getBody()[0];if(i.isSpecificResource){Tn.set(0,0,0);const o=i.getSelector(),s=new Cn.A(void 0),a=s.data;if(o&&o.isPointSelector){const e=o.Location;a.position=[e.x,e.y,e.z],Tn.fromArray(a.position)}const l=r.Position;if(l){const e=l.getSelector().Location;kn.set(e.x,e.y,e.z);const t=kn.sub(Tn);a.direction=t.toArray(),a.scale=t.length()}else n[0].localBoundingBox.getCenter(kn),a.direction=Tn.sub(kn).toArray(),a.scale=.001;t.getBody().forEach(e=>{var t;const n=(null===(t=e.getProperty("language"))||void 0===t?void 0:t.toUpperCase())||ee.Nm;if(e.isSound()){const t=s.data.audioId||En.A.generateId(),i=e.getLabelFromSelfOrSource().getValue();let r=c.audio.getAudioClip(t);void 0===r&&(r={id:t,name:null!=i?i:"New Audio Element",uris:{},captionUris:{},durations:{}},c.audio.addAudioClip(r),s.data.audioId=t,a.style="Extended");const o=e.getProperty("id");r.uris[n]=o,c.audio.updateAudioClip(t)}else{if(e.isSoundCaption())return;{const t=e.Value,i=t.indexOf("\n");if(i>=0){s.data.titles[n]=wn()(t.substring(0,i),{allowedTags:[]});const e=t.substring(i+1);if(e.indexOf("<img")>=0){const t=wn()(e,{allowedTags:["img"]});let i=document.createElement("div");i.innerHTML=t;const r=i.getElementsByTagName("img")[0];s.data.imageUri=r.src,s.data.imageAltText[n]=r.alt}s.data.leads[n]=wn()(e,{allowedTags:["b","i","em","strong","a","sup","sub"],allowedAttributes:{a:["href","target"]}}),a.style="Extended"}else s.data.titles[n]=wn()(t,{allowedTags:[]})}}}),t.getBody().forEach(e=>{var t;const n=(null===(t=e.getProperty("language"))||void 0===t?void 0:t.toUpperCase())||ee.Nm;if(e.isSoundCaption()){const t=c.audio.getAudioClip(s.data.audioId);t?t.captionUris[n]=e.getProperty("id"):console.warn("Caption file not loaded - no corresponding audio clip.")}});t.ScopeContent.forEach(t=>{const n=t.getBody()[0],i=(n.isSpecificResource()?n.getSource():n).getType();switch(i){case"perspectivecamera":case"orthographiccamera":const n=t.getBody()[0];Sn.copy(this.getIIIFBodyTransform(n,t)),Tn.setFromMatrixPosition(Sn);const r=this.getIIIFLookAtTransform(n,e,Tn,In);Ln.setFromRotationMatrix(r||Sn,"YXZ"),kn.setFromEuler(Ln).multiplyScalar(hn.A.RAD2DEG),Tn.applyMatrix4(Sn.makeRotationFromEuler(Ln).invert());const o=c.snapshots,a=o.getTargetProperties(),l=a.findIndex(e=>"Orbit"==e.name),d=a.findIndex(e=>"Offset"==e.name),u=o.getCurrentValues();u[d]=Tn.toArray(),u[l]=kn.toArray();const h=o.setState({values:u,curve:An.kp.EaseOutQuad,duration:1,threshold:.5});s.set("viewId",h);break;default:console.log("Unsupported IIIF scope annotation type: "+i)}});n[0].getGraphComponent(J.A).addAnnotation(s)}}),g.forEach(e=>{var t,n;const i=e.getTarget();if(i.isSpecificResource){const o=i.__jsonld.selector[0];if("PolygonZSelector"===o.type){const i=o.value,c=i.lastIndexOf("(")+1,d=i.slice(c,i.indexOf(")")).split(" "),u=[];for(let e=0;e<d.length;e+=3)u.push(new xn.Pq0(parseFloat(d[e]),parseFloat(d[e+1]),parseFloat(d[e+2])));const h=(new xn.LoY).setFromPoints(u);h.setIndex([0,1,2,2,3,0]),h.setAttribute("uv",new xn.THS(new Float32Array([0,1,0,0,1,0,1,1]),2)),h.computeVertexNormals();const p=e.getBody()[0].id,m=null===(n=null===(t=s.manifest)||void 0===t?void 0:t.getSequences()[0])||void 0===n?void 0:n.getCanvasById(p),f=m.getCanonicalImageUri(),g=m.getProperty("backgroundColor");r.getTexture(f).then(e=>{const t=new xn.eaF(h,new xn._4j({map:e,side:xn.$EB}));l.object3D.add(t),null!=a||(a=JSON.parse(s.manifestJson)),t.userData.IIIFCanvas=a.items.find(e=>e.id===p),g&&(Dn.set(g),t.material.onBeforeCompile=e=>{e.fragmentShader=e.fragmentShader.slice(0,e.fragmentShader.lastIndexOf("}")).concat("\n                                         if (!gl_FrontFacing) {\n                                             gl_FragColor = vec4("+Dn.toArray().toString()+", 1.0);\n                                         }\n                                         }")})})}}})})}),c.ins.saveState.set(),this.application=null}getIIIFBodyTransform(e,t){if(Mn.identity(),e.isSpecificResource()){(e.getTransform()||[]).forEach(e=>{if(Sn.identity(),e.isTranslateTransform){const t=e.getTranslation();t&&(Tn.set(t.x,t.y,t.z),Sn.setPosition(Tn))}else if(e.isRotateTransform){const t=e.getRotation();Ln.set(t.x*hn.A.DEG2RAD,t.y*hn.A.DEG2RAD,t.z*hn.A.DEG2RAD,"XYZ"),Sn.makeRotationFromEuler(Ln)}else if(e.isScaleTransform){const t=e.getScale();Sn.makeScale(t.x,t.y,t.z)}Mn.premultiply(Sn)})}const n=t.getTarget();if(n&&n.isSpecificResource){const e=n.getSelector();e&&e.isPointSelector&&(Sn.identity(),Sn.setPosition(e.Location.x,e.Location.y,e.Location.z),Mn.premultiply(Sn))}return Mn}getIIIFLookAtTransform(e,t,n,i){var r,o,s;if(Mn.identity(),null===(r=e.LookAt)||void 0===r?void 0:r.isPointSelector){const t=null===(o=e.LookAt)||void 0===o?void 0:o.Location;return Mn.lookAt(n,t,i),Mn}if(null===(s=e.LookAt)||void 0===s?void 0:s.id){const r=t.getAnnotationById(e.LookAt.id);return kn.set(r.LookAtLocation.x,r.LookAtLocation.y,r.LookAtLocation.z),Mn.lookAt(n,kn,i),Mn}return null}}class On{constructor(e){this.manifestJson=null,this.manifestUrl=null,this.manifest=null,this.scenes=null,!function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e)?(this.manifestJson=null,this.manifestUrl=e):(this.manifestJson=e,this.manifestUrl=null,this.manifest=un(e))}async loadManifest(){var e,t,n;this.manifestUrl&&(this.manifestJson=await(n=this.manifestUrl,Tt.loadManifest(n))),this.manifestJson&&(this.manifest=await un(this.manifestJson)),this.manifest&&(this.scenes=(null===(t=null===(e=this.manifest)||void 0===e?void 0:e.getSequences()[0])||void 0===t?void 0:t.getScenes())||[])}annotationsFromScene(e){return(null==e?void 0:e.getContent().concat(null==e?void 0:e.getNonContentAnnotations()))||[]}}class Pn{get assetManager(){return this.system.getMainComponent(H.A)}get assetReader(){return this.system.getMainComponent(j.A)}get documentProvider(){return this.system.getMainComponent(z.A)}get analytics(){return this.system.getMainComponent(V.A)}constructor(e,t,n){this.props=t||{},console.log(Pn.splashMessage);const r=new i.A;r.add(s.A),r.add(N);const a=this.system=new o.A(r),l=a.graph.createCustomNode(Y.A);a.graph.createCustomNode(B),a.graph.createCustomNode(G.A),this.analytics.startTimer(),e&&new Q.A(this).appendTo(e),n||(this.documentProvider.createDocument(F),this.evaluateProps());(/^(iPad|iPhone|iPod)/.test(window.navigator.platform)||/^Mac/.test(window.navigator.platform)&&window.navigator.maxTouchPoints>1)&&(window.createImageBitmap=void 0),l.pulse.start()}dispose(){this.assetReader.dispose(),this.documentProvider.activeComponent.setup.floor.dispose(),this.documentProvider.activeComponent.setup.tape.dispose(),this.documentProvider.activeComponent.setup.grid.dispose(),this.documentProvider.activeComponent.clearNodeTree(),this.system.getMainComponent(K.A).views.forEach(e=>e.dispose())}setBaseUrl(e){this.assetManager.baseUrl=e}loadDocument(e,t,n){const i=$.a9[n];return this.assetReader.getJSON(e).then(n=>{if(!n.type||"Manifest"!=n.type)return t=void 0===t?!n.lights&&!n.cameras:t,this.documentProvider.amendDocument(n,e,t);new Rn(this).loadIIIFManifest(JSON.stringify(n))}).then(e=>(isFinite(i)&&e.setup.viewer.ins.quality.setValue(i),e))}reloadDocument(){const e=this.documentProvider.activeComponent;this.documentProvider.createDocument(F),this.evaluateProps(),null==e||e.dispose()}loadModel(e,t){return this.documentProvider.appendModel(e,t)}loadGeometry(e,t,n,i,r){return this.documentProvider.appendGeometry(e,t,n,i,r)}evaluateProps(){const e=Object.assign({},this.props),t=this.assetManager,n=new URL(window.location.href).searchParams;e.root=e.root||n.get("root")||n.get("r"),e.dracoRoot=e.dracoRoot||n.get("dracoRoot")||n.get("dr"),e.resourceRoot=e.resourceRoot||n.get("resourceRoot")||n.get("rr"),e.document=e.document||n.get("document")||n.get("d")||n.get("iiif-content"),e.model=e.model||n.get("model")||n.get("m"),e.geometry=e.geometry||n.get("geometry")||n.get("g"),e.texture=e.texture||n.get("texture")||n.get("t"),e.occlusion=e.occlusion||n.get("occlusion")||n.get("o"),e.normals=e.normals||n.get("normals")||n.get("n"),e.quality=e.quality||n.get("quality")||n.get("q"),e.uiMode=e.uiMode||n.get("uiMode")||n.get("u"),e.bgColor=e.bgColor||n.get("bgColor")||n.get("bc"),e.bgStyle=e.bgStyle||n.get("bgStyle")||n.get("bs"),e.controls=e.controls||n.get("controls")||n.get("ct"),e.prompt=e.prompt||n.get("prompt")||n.get("pm"),e.reader=e.reader||n.get("reader")||n.get("rdr"),e.lang=e.lang||n.get("lang")||n.get("l");const i=e.root||e.document||e.model||e.geometry,o=e.document&&e.document.startsWith("data:");if(this.setBaseUrl(o?"":new URL(i||".",window.location).href),e.uiMode){let t=0,n=!1;const i=Object.values(W.T).filter(e=>"string"==typeof e);e.uiMode.split("|").forEach(e=>{const r=e.toLowerCase();i.includes(r)&&(t+=W.T[r],n=!0)}),n&&this.documentProvider.activeComponent.setup.interface.ins.visibleElements.setValue(t)}e.dracoRoot&&this.assetReader.setDracoPath(e.dracoRoot),e.resourceRoot&&this.assetReader.setSystemAssetPath(e.resourceRoot),e.lang&&this.setLanguage(e.lang),e.document?(e.document=o?e.document:t.getAssetName(e.document),this.loadDocument(e.document,void 0,e.quality).then(()=>this.postLoadHandler(e)).catch(e=>r.Ay.show(`Failed to load document: ${e.message}`,"error"))):e.model?(e.model=t.getAssetName(e.model),this.assetReader.getText(e.model).then(()=>{this.loadModel(e.model,e.quality),this.postLoadHandler(e)}).catch(e=>r.Ay.show(`Bad Model Path: ${e.message}`,"error"))):e.geometry?(e.geometry=t.getAssetName(e.geometry),e.texture=e.texture?t.getAssetName(e.texture):null,e.occlusion=e.occlusion?t.getAssetName(e.occlusion):null,e.normals=e.normals?t.getAssetName(e.normals):null,this.assetReader.getText(e.geometry).then(()=>{this.loadGeometry(e.geometry,e.texture,e.occlusion,e.normals,e.quality),this.postLoadHandler(e)}).catch(e=>r.Ay.show(`Bad Geometry Path: ${e.message}`,"error"))):e.root&&this.loadDocument("scene.svx.json",void 0).then(()=>this.postLoadHandler(e)).catch(()=>{})}postLoadHandler(e){if(this.assetManager.ins.baseUrlValid.setValue(!0),e.bgColor){const t=e.bgColor.split(" ");this.setBackgroundColor(t[0],t[1]||null)}e.bgStyle&&this.setBackgroundStyle(e.bgStyle),e.controls&&this.enableNavigation(e.controls),e.prompt&&this.enablePrompt(e.prompt),e.reader&&this.enableReader(e.reader),e.lang&&this.setLanguage(e.lang),this.system.getMainComponent(z.A).activeComponent.setup.environment.ins.initialize.set()}toggleAnnotations(){const e=this.system.getMainComponent(z.A).activeComponent.setup.viewer.ins,t=this.system.getMainComponent(l.A).ins;t.visible.value&&t.visible.setValue(!1),e.annotationsVisible.setValue(!e.annotationsVisible.value),this.analytics.sendProperty("Annotations_Visible",e.annotationsVisible.value)}toggleReader(){const e=this.system.getMainComponent(z.A).activeComponent.setup.reader,t=e.ins;t.enabled.setValue(!t.enabled.value),t.focus.setValue(t.enabled.value),t.enabled.value&&t.articleId.setValue(1===e.articles.length?e.articles[0].article.id:""),this.analytics.sendProperty("Reader_Enabled",t.enabled.value)}toggleTours(){const e=this.system.getMainComponent(z.A).activeComponent.setup.tours.ins,t=this.system.getMainComponent(z.A).activeComponent.setup.reader.ins;e.enabled.value?e.enabled.setValue(!1):(t.enabled.value&&t.enabled.setValue(!1),e.enabled.setValue(!0),e.tourIndex.setValue(-1)),this.analytics.sendProperty("Tours_Enabled",e.enabled.value)}toggleTools(){const e=this.system.getMainComponent(l.A).ins,t=this.system.getMainComponent(z.A).activeComponent.setup.viewer.ins;t.annotationsVisible.value&&t.annotationsVisible.setValue(!1),e.visible.setValue(!e.visible.value),this.analytics.sendProperty("Tools_Visible",e.visible.value)}toggleMeasurement(){const e=this.system.getMainComponent(z.A).activeComponent.setup.tape.ins;e.visible.setValue(!e.visible.value)}enableAR(){this.system.getMainComponent(q.A).ins.enabled.setValue(!0),this.analytics.sendProperty("AR_enabled",!0)}getArticles(){return this.system.getMainComponent(z.A).activeComponent.setup.reader.articles.map(e=>e.article.data)}getAnnotations(){const e=this.system.getComponent(X.A).getGraphComponents(J.A);let t=[];return e.forEach(e=>{t=t.concat(e.getAnnotations())}),t}getCameraOrbit(e){const t=this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins;let n=t.orbit.value;if(e){const i=e.toLowerCase();if("max"===i)n=t.maxOrbit.value;else if("min"===i)n=t.minOrbit.value;else if("active"!==i)return void console.error("Error: getCameraOrbit invalid type param.")}return n.slice(0,2)}setCameraOrbit(e,t){const n=this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins,i=parseFloat(e),r=parseFloat(t);isNaN(i)||isNaN(r)?console.error("Error: setCameraOrbit param is not a number."):n.orbit.setValue([i,r,0])}getCameraOffset(e){const t=this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins;let n=t.offset.value;if(e){const i=e.toLowerCase();if("max"===i)n=t.maxOffset.value;else if("min"===i)n=t.minOffset.value;else if("active"!==i)return void console.error("Error: getCameraOffset invalid type param.")}return n.slice(0,3)}setCameraOffset(e,t,n){const i=this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins;let r=parseFloat(e),o=parseFloat(t),s=parseFloat(n);if(isNaN(r)||isNaN(o)||isNaN(s))console.error("Error: setCameraOffset param is not a number.");else{const e=i.minOffset.value,t=i.maxOffset.value;r=(0,Z.q)(r,e[0],t[0]),o=(0,Z.q)(o,e[1],t[1]),s=(0,Z.q)(s,e[2],t[2]),i.offset.setValue([r,o,s])}}setBackgroundColor(e,t){const n=this.system.getMainComponent(z.A).activeComponent.setup.background.ins,i=document.createElement("div");if(i.id="temp-color",i.style.color=e,document.body.appendChild(i),""!==i.style.color){const e=getComputedStyle(i).color.split("(")[1].split(")")[0].split(",").map(e=>parseInt(e)/255);n.color0.setValue(e)}else console.error("Error: Color0 param is invalid.");if(t)if(i.style.color=t,""!==i.style.color){const e=getComputedStyle(i).color.split("(")[1].split(")")[0].split(",").map(e=>parseInt(e)/255);n.color1.setValue(e)}else console.error("Error: Color1 param is invalid.");document.body.removeChild(i)}setBackgroundStyle(e){const t=this.system.getMainComponent(z.A).activeComponent.setup.background.ins,n=Object.values(h.zZ).filter(e=>"string"==typeof e).find(t=>t.toLowerCase()===e.toLowerCase());void 0!==n?t.style.setValue(h.zZ[n]):console.error("Error: Style param is invalid.")}setTourStep(e,t,n){const i=this.system.getMainComponent(z.A).activeComponent.setup.tours.ins,r=this.system.getMainComponent(z.A).activeComponent.setup.tours.outs;let o=parseInt(e),s=parseInt(t);!isNaN(o)&&!isNaN(s)&&o>=0&&s>=0?(i.tourIndex.setValue(o),n?(r.stepIndex.setValue(s-1),i.next.set()):i.stepIndex.setValue(s)):console.error("Error: setTourStep param ["+o+" "+s+"] is not a valid number.")}getTours(){return this.system.getMainComponent(z.A).activeComponent.setup.tours.tours}enableNavigation(e){const t=this.isTrue(e);if(null!=t){this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins.pointerEnabled.setValue(t)}else console.error("Error: enableNavigation param is not valid.")}enablePrompt(e){const t=this.isTrue(e);if(null!=t){this.system.getMainComponent(z.A).activeComponent.setup.navigation.ins.promptEnabled.setValue(t)}else console.error("Error: enablePrompt param is not valid.")}enableReader(e){const t=this.isTrue(e);if(null!=t){this.system.getMainComponent(z.A).activeComponent.setup.reader.ins.visible.setValue(t)}else console.error("Error: enableReader param is not valid.")}setLanguage(e){const t=this.system.getMainComponent(z.A).activeComponent.setup.language.ins,n=e.toUpperCase();n in ee.aL?t.activeLanguage.setValue(ee.aL[n]):console.error("Error: setLanguage param is not a valid language id.")}getActiveLanguage(){const e=this.system.getMainComponent(z.A).activeComponent.setup.language.ins.activeLanguage;return ee.aL[e.value]}getLanguages(){return this.system.getMainComponent(z.A).activeComponent.setup.language.sceneLanguages.map(e=>ee.aL[e.id])}setActiveArticle(e){const t=this.system.getMainComponent(z.A).activeComponent.setup.reader;t.ins.enabled.setValue(!0),t.ins.articleId.setValue(e)}resetViewer(){this.system.getMainComponent(z.A).activeComponent.setup.resetViewer()}isTrue(e){let t;const n=e.toLowerCase();return"true"===n?t=!0:"false"===n&&(t=!1),t}}Pn.splashMessage="\n  _________       .__  __  .__                        .__                ________ ________   \n /   _____/ _____ |__|/  |_|  |__   __________   ____ |__|____    ____   \\_____  \\\\______ \\  \n \\_____  \\ /     \\|  \\   __\\  |  \\ /  ___/  _ \\ /    \\|  \\__  \\  /    \\    _(__  < |    |  \\ \n /        \\  Y Y  \\  ||  | |   Y  \\\\___ (  <_> )   |  \\  |/ __ \\|   |  \\  /       \\|    `   \\\n/_______  /__|_|  /__||__| |___|  /____  >____/|___|  /__(____  /___|  / /______  /_______  /\n        \\/      \\/              \\/     \\/           \\/        \\/     \\/         \\/        \\/ \n    \nVoyager - 3D Explorer and Tool Suite\n3D Foundation Project\n(c) 2025 Smithsonian Institution\n\nhttps://3d.si.edu\nhttps://github.com/smithsonian/dpo-voyager\n\n-----------------------------------------------------\nVersion: Voyager db26dd0-dirty  PROD\n-----------------------------------------------------\n    ",window.VoyagerExplorer=Pn},935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o=n(25),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:a}=e,l="maxLength"===t?i.operators.GT:i.operators.LT,c=!1===a.opts.unicode?i._`${n}.length`:i._`${(0,r.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(i._`${c} ${l} ${s}`)}};t.default=s},945:e=>{e.exports={nanoid:(e=21)=>{let t="",n=0|e;for(;n--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(n=t)=>{let i="",r=0|n;for(;r--;)i+=e[Math.random()*e.length|0];return i}}},946:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});const i=function(e){return Object.keys(e).filter(e=>isNaN(Number(e)))}},961:(e,t,n)=>{"use strict";var i=n(9271).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=s(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if(r=s(t[i]),r>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if(r=s(t[i]),r>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3151),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,i.alwaysValidSchema)(r,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=r},1024:(e,t,n)=>{"use strict";let i=n(6613);class r extends i{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=r,r.default=r,i.registerAtRule(r)},1042:function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},1046:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,v:()=>r});var i=n(4709);function r(e){let t=o.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},o.set(e.type,t));let n=t.stringsArray.get(e.strings);if(void 0!==n)return n;const r=e.strings.join(i.xL);return n=t.keyString.get(r),void 0===n&&(n=new i.Bj(e,e.getTemplateElement()),t.keyString.set(r,n)),t.stringsArray.set(e.strings,n),n}const o=new Map},1071:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(3423),r=n(4955),o=n(2222),s=n(2902);class a extends r.A{constructor(e,t){super(e,t),this.outs=this.addOutputs(a.outs),this.scope=r.k.Graph}get documentProvider(){return this.getComponent(s.A)}create(){super.create(),this.documentProvider.on("active-component",this.onActiveDocument,this)}dispose(){this.documentProvider.off("active-component",this.onActiveDocument,this),super.dispose()}onActiveDocument(e){this.scopedGraph=e.next}onActiveNode(e,t){this.outs.activeNode.setValue(t);const n=this.selection;t?n.nodeContainsSelectedComponent(t)||n.selectNode(t):e&&n.clearSelection()}onScopedNodes(){this.outs.changedNodes.set()}}a.typeName="CVNodeProvider",a.nodeType=o.A,a.followComponentSelection=!0,a.outs={activeNode:i.gK.Object("Nodes.Active",o.A),changedNodes:i.gK.Event("Nodes.Changed")}},1086:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(4640),r=n(8424);const o=new i.Pq0,s=new i.Pq0,a=new i.kn4,l=new i.PTz,c=new i.O9p;class d extends r.Ay{get settingProperties(){return[this.ins.position,this.ins.rotation,this.ins.scale]}get snapshotProperties(){return[this.ins.position,this.ins.rotation,this.ins.scale]}fromData(e){const{position:t,rotation:n,order:d,scale:u}=this.ins,h=r.I8[d.getValidatedValue()];e.name&&(this.object3D.name=e.name),e.matrix?(a.fromArray(e.matrix),a.decompose(o,l,s),o.toArray(t.value),c.setFromQuaternion(l,h),o.setFromEuler(c).multiplyScalar(i.cj9.RAD2DEG).toArray(n.value),s.toArray(u.value),t.set(),n.set(),u.set()):(e.translation&&t.setValue(e.translation.slice()),e.rotation&&(l.fromArray(e.rotation),c.setFromQuaternion(l,h),o.setFromEuler(c).multiplyScalar(i.cj9.RAD2DEG).toArray(n.value),n.set()),e.scale&&u.setValue(e.scale.slice()),this.transform.changed=!0)}toData(){this.object3D.matrix.decompose(o,l,s);const e={};return 0===o.x&&0===o.y&&0===o.z||(e.translation=o.toArray()),0===l.x&&0===l.y&&0===l.z&&1===l.w||(e.rotation=l.toArray()),1===s.x&&1===s.y&&1===s.z||(e.scale=s.toArray()),e}}d.typeName="CVNode",d.text="Transform",d.icon=""},1142:(e,t,n)=>{"use strict";n.d(t,{c:()=>i,s:()=>r});const i={},r={}},1155:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o=n(7430),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>i._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:s,schemaCode:a,schema:l}=e;s||l&&"object"==typeof l?e.fail$data(i._`!${(0,r.useFunc)(t,o.default)}(${n}, ${a})`):e.fail(i._`${l} !== ${n}`)}};t.default=s},1157:(e,t,n)=>{"use strict";const i=n(5314),r=n(1829),o=n(6871),s=/[\u0000-\u001f\u0080-\u009f]/g,a=/^\.+/,l=/\.+$/;e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");const n=void 0===t.replacement?"!":t.replacement;if(r().test(n)&&s.test(n))throw new Error("Replacement string cannot contain reserved filename characters");return e=(e=(e=(e=e.replace(r(),n)).replace(s,n)).replace(a,n)).replace(l,""),n.length>0&&(e=(e=i(e,n)).length>1?o(e,n):e),e=(e=r.windowsNames().test(e)?e+n:e).slice(0,"number"==typeof t.maxLength?t.maxLength:100)}},1160:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,EM:()=>s.EM,gK:()=>i.gK,iv:()=>c,qy:()=>s.qy});var i=n(3423),r=n(3365),o=n(8604),s=n(4240),a=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class l extends r.A{constructor(){super(...arguments),this.ins=this.addInputs(l.toolIns),this.outs=this.addOutputs(l.toolOuts),this._isActiveTool=!1,this._enabled=!0}get isActiveTool(){return this._isActiveTool}get enabled(){return this._enabled}set enabled(e){this._enabled=e}dispose(){this._isActiveTool&&this.deactivateTool(),super.dispose()}createView(){throw new Error("must override")}activateTool(){this._isActiveTool=!0,this.startObserving()}deactivateTool(){this.stopObserving(),this._isActiveTool=!1}}l.typeName="CVTool",l.toolIns={},l.toolOuts={};class c extends s.Ay{get analytics(){return this.system.getMainComponent(o.A)}constructor(e){super(e.system),this.tool=null,this.needsFocus=!1,this.tool=e}firstConnected(){this.classList.add("sv-group","sv-tool-view"),this.needsFocus=!0}connected(){super.connected(),this.tool.on("update",this.onUpdate,this)}disconnected(){this.tool.off("update",this.onUpdate,this),super.disconnected()}updated(e){super.updated(e),this.needsFocus&&(this.setFocus(),this.needsFocus=!1)}setFocus(){}}a([(0,s.MZ)({attribute:!1})],c.prototype,"tool",void 0)},1166:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(3681))},1168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},1192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(function(e){return e.charCodeAt(0)}))},1229:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var i=n(5940),r=n(3423),o=n(4640),s=n(4424),a=n(8424),l=n(6436);class c extends s.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(c.rgIns),this._object3D=null,this._isAttached=!1,this._object3D=new o.B69,this._object3D.name="Graph",this._object3D.matrixAutoUpdate=!1}get transform(){return this.node.components.get(a.Ay,!0)}get scene(){const e=this.transform;return e?e.getParentComponent(l.A,!0):void 0}get object3D(){return this._object3D}create(){super.create(),this.innerRoots.filter(e=>e.is(a.Ay)).forEach(e=>this._object3D.add(e.object3D)),this.trackComponent(a.Ay,e=>this.ins.visible.value&&this.attachObject3D(e),e=>this.detachObject3D(e))}dispose(){this.detachObject3D(this.transform),this.innerRoots.filter(e=>e.is(a.Ay)).forEach(e=>this._object3D.remove(e.object3D)),super.dispose()}update(e){super.update(e);const t=this.ins;if(t.visible.changed){const e=this.transform;t.visible.value?this.attachObject3D(e):this.detachObject3D(e)}return!0}onAddInnerRoot(e){e.is(a.Ay)&&this._object3D.add(e.object3D)}onRemoveInnerRoot(e){e.is(a.Ay)&&this._object3D.remove(e.object3D)}attachObject3D(e){this._isAttached||e&&(e.object3D.add(this._object3D),this._isAttached=!0)}detachObject3D(e){this._isAttached&&e&&(e.object3D.remove(this._object3D),this._isAttached=!1)}}c.typeName="CRenderGraph",c.rgIns={visible:s.gK.Boolean("Graph.Visible",!0)};var d=n(2382),u=n.n(d);const h=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/document.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Smithsonian 3D Document","description":"Describes a 3D document containing a scene with 3D models.","definitions":{"scene":{"$id":"#scene","type":"object","properties":{"nodes":{"type":"array","description":"The indices of the scene\'s root nodes.","items":{"type":"integer","minimum":0},"uniqueItems":true,"minItems":1},"setup":{"description":"The index of the scene\'s setup.","type":"integer","minimum":0}}},"node":{"$id":"#node","type":"object","properties":{"name":{"type":"string"},"children":{"type":"array","description":"The indices of this node\'s children.","items":{"type":"integer","minimum":0},"uniqueItems":true,"minItems":1},"matrix":{"description":"A floating-point 4x4 transformation matrix stored in column-major order.","type":"array","items":{"type":"number"},"minItems":16,"maxItems":16,"default":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"translation":{"description":"The node\'s translation along the x, y, and z axes.","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[0,0,0]},"rotation":{"description":"The node\'s unit quaternion rotation in the order (x, y, z, w), where w is the scalar.","type":"array","items":{"type":"number","minimum":-1,"maximum":1},"minItems":4,"maxItems":4,"default":[0,0,0,1]},"scale":{"description":"The node\'s non-uniform scale, given as the scaling factors along the x, y, and z axes.","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[1,1,1]},"camera":{"description":"The index of the camera component of this node.","type":"integer","minimum":0},"light":{"description":"The index of the light component of this node.","type":"integer","minimum":0},"meta":{"description":"The index of the meta data component of this node.","type":"integer","minimum":0},"model":{"description":"The index of the model component of this node.","type":"integer","minimum":0}},"not":{"anyOf":[{"required":["matrix","translation"]},{"required":["matrix","rotation"]},{"required":["matrix","scale"]}]}},"camera":{"$id":"#camera","type":"object","properties":{"type":{"description":"Specifies if the camera uses a perspective or orthographic projection.","type":"string","enum":["perspective","orthographic"]},"perspective":{"description":"A perspective camera containing properties to create a perspective projection matrix.","type":"object","properties":{"yfov":{"type":"number","description":"The floating-point vertical field of view in radians.","exclusiveMinimum":0},"aspectRatio":{"type":"number","description":"The floating-point aspect ratio of the field of view.","exclusiveMinimum":0},"znear":{"type":"number","description":"The floating-point distance to the near clipping plane.","exclusiveMinimum":0},"zfar":{"type":"number","description":"The floating-point distance to the far clipping plane.","exclusiveMinimum":0}},"required":["yfov","znear"]},"orthographic":{"description":"An orthographic camera containing properties to create an orthographic projection matrix.","type":"object","properties":{"xmag":{"type":"number","description":"The floating-point horizontal magnification of the view. Must not be zero."},"ymag":{"type":"number","description":"The floating-point vertical magnification of the view. Must not be zero."},"znear":{"type":"number","description":"The floating-point distance to the near clipping plane.","exclusiveMinimum":0},"zfar":{"type":"number","description":"The floating-point distance to the far clipping plane. `zfar` must be greater than `znear`.","exclusiveMinimum":0}},"required":["ymag","znear","zfar"]},"autoNearFar":{"type":"boolean","default":true}},"required":["type"],"not":{"required":["perspective","orthographic","autoNearFar"]}},"light":{"$id":"#light","type":"object","properties":{"type":{"description":"Specifies the type of the light source.","type":"string","enum":["ambient","directional","point","spot","hemisphere","rect","environment"]},"color":{"$ref":"#/definitions/colorRGB"},"intensity":{"type":"number","minimum":0,"default":1},"castShadow":{"type":"boolean","default":false},"point":{"type":"object","properties":{"distance":{"type":"number","minimum":0},"decay":{"type":"number","minimum":0}}},"spot":{"type":"object","properties":{"distance":{"type":"number","minimum":0},"decay":{"type":"number","minimum":0},"angle":{"type":"number","minimum":0},"penumbra":{"type":"number","minimum":0}}},"hemisphere":{"type":"object","properties":{"groundColor":{"$ref":"#/definitions/colorRGB"}}}},"required":["type"],"not":{"required":["point","spot","hemisphere"]}},"colorRGB":{"$id":"#colorRGB","type":"array","items":{"type":"number","minimum":0,"maximum":1},"minItems":3,"maxItems":3,"default":[1,1,1]}},"type":"object","properties":{"asset":{"type":"object","properties":{"type":{"type":"string","const":"application/si-dpo-3d.document+json"},"version":{"description":"Version of this presentation description.","type":"string","minLength":1},"copyright":{"description":"A copyright message to credit the content creator.","type":"string","minLength":0},"generator":{"description":"Tool that generated this presentation description.","type":"string","minLength":1}},"required":["type","version"]},"scene":{"description":"Index of the root scene of the document.","type":"integer","minimum":0},"scenes":{"description":"An array of scenes.","type":"array","items":{"$ref":"#/definitions/scene"}},"nodes":{"description":"An array of nodes.","type":"array","items":{"$ref":"#/definitions/node"},"minItems":1},"metas":{"description":"An array of meta data components.","type":"array","items":{"$ref":"./meta.schema.json"}},"setups":{"description":"An array of setup components.","type":"array","items":{"$ref":"./setup.schema.json"},"minItems":1},"cameras":{"description":"An array of camera components.","type":"array","items":{"$ref":"#/definitions/camera"},"minItems":1},"lights":{"description":"An array of light components.","type":"array","items":{"$ref":"#/definitions/light"},"minItems":1},"models":{"description":"An array of model components.","type":"array","items":{"$ref":"./model.schema.json"},"minItems":1}},"required":["asset","scene","scenes"],"additionalProperties":false}'),p=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/common.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Math","description":"Definitions for mathematical compound objects such as vectors and matrices.","definitions":{"units":{"$id":"#units","type":"string","enum":["inherit","mm","cm","m","km","in","ft","yd","mi"]},"vector2":{"description":"2-component vector.","$id":"#vector2","type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"default":[0,0]},"vector3":{"description":"3-component vector.","$id":"#vector3","type":"array","items":{"type":"number"},"minItems":3,"maxItems":3,"default":[0,0,0]},"vector4":{"description":"4-component vector.","$id":"#vector4","type":"array","items":{"type":"number"},"minItems":4,"maxItems":4,"default":[0,0,0,0]},"matrix3":{"description":"3 by 3, matrix, storage: column-major.","$id":"#matrix3","type":"array","items":{"type":"number"},"minItems":9,"maxItems":9,"default":[1,0,0,0,1,0,0,0,1]},"matrix4":{"description":"4 by 4 matrix, storage: column-major.","$id":"#matrix4","type":"array","items":{"type":"number"},"minItems":16,"maxItems":16,"default":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},"boundingBox":{"description":"Axis-aligned 3D bounding box.","$id":"#boundingBox","type":"object","properties":{"min":{"$ref":"#/definitions/vector3"},"max":{"$ref":"#/definitions/vector3"}},"required":["min","max"]}}}'),m=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/meta.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Meta","description":"Meta data for a scene or model item.","definitions":{"image":{"$id":"image","description":"Reference to a scene supplementing image","type":"object","properties":{"uri":{"description":"Location of the image resource, absolute URL or path relative to this document","type":"string","minLength":1},"quality":{"type":"string","enum":["Thumb","Low","Medium","High","HDR"]},"byteSize":{"type":"integer","minimum":1},"width":{"type":"integer","minimum":1},"height":{"type":"integer","minimum":1},"usage":{"type":"string","enum":["Render","Environment","ARCode"]}},"required":["uri","quality"]},"article":{"$id":"#article","description":"Reference to an external document (HTML)","type":"object","properties":{"id":{"type":"string","minLength":1},"title":{"description":"Short title.","type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"description":"Short lead text.","type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"tags":{"description":"Array of tags, categorizing the article.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"intros":{"description":"Introductory splash screen text with language key.","type":"object"},"uri":{"description":"Location of the article resource, absolute URL or path relative to this document","type":"string","minLength":1},"uris":{"description":"Location of the article resource, absolute URL or path relative to this document with language key","type":"object"},"mimeType":{"description":"MIME type of the resource.","type":"string"},"thumbnailUri":{"description":"Location of a thumbnail/preview image of the resource.","type":"string"}},"required":["id"],"additionalProperties":false},"audioclip":{"$id":"audioclip","description":"Reference to an audio file","type":"object","properties":{"id":{"type":"string","minLength":1},"name":{"description":"Short name.","type":"string"},"uris":{"description":"Location of the audio resource, absolute URL or path relative to this document with language key","type":"object"},"captionUris":{"description":"Location of the caption resource, absolute URL or path relative to this document with language key","type":"object"},"durations":{"description":"Length of the audio resource with language key","type":"object"}},"required":["id","uris"]},"action":{"$id":"action","description":"Reference to a Voyager action element","type":"object","properties":{"id":{"type":"string","minLength":1},"type":{"type":"string","enum":["PlayAnimation","PlayAudio"]},"trigger":{"type":"string","enum":["OnClick","OnLoad","OnAnnotation"]},"audioId":{"type":"string","minLength":1},"annotationId":{"type":"string","minLength":1},"animation":{"type":"string","minLength":1},"style":{"type":"string","enum":["Single","PingPong","Loop"]}},"required":["id","type","trigger"]}},"type":"object","properties":{"collection":{"description":"Information retrieved from the collection record for the item.","type":"object"},"process":{"description":"Information about how the item was processed.","type":"object"},"images":{"type":"array","items":{"$ref":"#/definitions/image"},"minItems":1},"articles":{"type":"array","items":{"$ref":"#/definitions/article"},"minItems":1},"leadArticle":{"description":"Index of the main article. This is the default article displayed with the item.","type":"integer","minimum":0},"audio":{"type":"array","items":{"$ref":"#/definitions/audioclip"},"minItems":0},"actions":{"type":"array","items":{"$ref":"#/definitions/action"},"minItems":0}},"additionalProperties":false}'),f=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/model.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Model","description":"Describes the visual representations (models, derivatives) of a 3D item.","definitions":{"annotation":{"description":"Spatial annotation (hot spot, hot zone) on a model. Annotations can reference articles.","type":"object","properties":{"id":{"type":"string","minLength":1},"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"marker":{"type":"string"},"tags":{"description":"Array of tags, categorizing the annotation.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"articleId":{"description":"Id of an article related to this annotation.","type":"string","minLength":1},"imageUri":{"description":"URI of an image resource for this annotation.","type":"string","minLength":1},"imageCredit":{"description":"Credit line image in this annotation with language key.","type":"object"},"imageAltText":{"description":"Alt text for image in this annotation with language key","type":"object"},"audioId":{"description":"Id of an audio resource for this annotation.","type":"string","minLength":1},"viewId":{"description":"Id of a snapshot resource with camera view information for this annotation.","type":"string","minLength":1},"style":{"type":"string"},"visible":{"description":"Flag indicating whether the annotation is visible.","type":"boolean","default":true},"expanded":{"description":"Flag indicating whether the annotation is displayed in expanded state.","type":"boolean","default":false},"scale":{"description":"Scales the annotation relative to its default size.","type":"number","default":1},"offset":{"description":"Offsets the annotation along its direction.","type":"number","default":0},"tilt":{"description":"Tilt angle of the annotation relative to the direction vector in degrees.","type":"number","default":0},"azimuth":{"description":"Azimuth angle of a tilted annotation.","type":"number","default":0},"color":{"description":"Color of the annotation","type":"array","minItems":3,"maxItems":3,"items":{"type":"number"}},"position":{"description":"Position where the annotation is anchored, in local item coordinates.","$ref":"./common.schema.json#/definitions/vector3"},"direction":{"description":"Direction of the stem of this annotation, usually corresponds to the surface normal.","$ref":"./common.schema.json#/definitions/vector3"},"zoneIndex":{"description":"Index of the zone on the zone texture.","type":"integer","minimum":0}},"required":["id"],"additionalProperties":false},"derivative":{"description":"Visual representation derived from the master model.","type":"object","properties":{"usage":{"description":"usage categories for a derivative.","type":"string","enum":["Image2D","Web3D","App3D","iOSApp3D","Print3D","Editorial3D"]},"quality":{"type":"string","enum":["Thumb","Low","Medium","High","Highest","AR"]},"assets":{"description":"List of individual resources this derivative is composed of.","type":"array","items":{"$ref":"#/definitions/asset"}}}},"asset":{"description":"an individual resource for a 3D model.","type":"object","properties":{"uri":{"type":"string","minLength":1},"type":{"type":"string","enum":["Model","Geometry","Image","Texture","Points","Volume"]},"part":{"type":"string","minLength":1},"mimeType":{"type":"string","minLength":1},"byteSize":{"type":"integer","minimum":1},"numFaces":{"type":"integer","minimum":1},"imageSize":{"type":"integer","minimum":1},"mapType":{"type":"string","enum":["Color","Normal","Occlusion","Emissive","MetallicRoughness","Zone"]}},"required":["uri","type"]},"material":{"description":"Surface properties for this model, shared by all derivatives.","type":"object","properties":{}}},"type":"object","properties":{"units":{"$ref":"./common.schema.json#/definitions/units"},"tags":{"type":"string"},"visible":{"type":"boolean"},"renderOrder":{"type":"number"},"overlayMap":{"type":"number"},"shadowSide":{"type":"string","enum":["Front","Back","Double"]},"derivatives":{"type":"array","items":{"$ref":"#/definitions/derivative"}},"translation":{"description":"Translation vector. Must be applied to bring model into its \'neutral\' pose.","$ref":"./common.schema.json#/definitions/vector3"},"rotation":{"description":"Rotation quaternion. Must be applied to bring model into its \'neutral\' pose.","$ref":"./common.schema.json#/definitions/vector4"},"boundingBox":{"description":"Bounding box for this model, shared by all derivatives.","$ref":"./common.schema.json#/definitions/boundingBox"},"material":{"$ref":"#/definitions/material"},"annotations":{"description":"List of annotations to be displayed with the model","type":"array","items":{"$ref":"#/definitions/annotation"}}},"required":["units","derivatives"],"additionalProperties":false}'),g=JSON.parse('{"$id":"https://schemas.3d.si.edu/voyager/setup.schema.json","$schema":"http://json-schema.org/draft-07/schema#","title":"Setup","description":"Tours and settings for explorer documents (background, interface, etc.)","definitions":{"viewer":{"type":"object","properties":{"shader":{"type":"string"},"exposure":{"type":"number"},"toneMapping":{"type":"boolean"},"gamma":{"type":"number"},"annotationsVisible":{"type":"boolean"},"isWallMountAR":{"type":"boolean"},"arScale":{"type":"number"},"activeTags":{"type":"string"},"sortedTags":{"type":"string"},"radioTags":{"type":"boolean"}},"required":["shader","exposure","gamma"]},"reader":{"type":"object","properties":{"enabled":{"type":"boolean"},"position":{"type":"string"},"articleId":{"description":"Id of the article currently displayed in the reader.","type":"string","minLength":1}}},"interface":{"type":"object","properties":{"visible":{"type":"boolean"},"logo":{"type":"boolean"},"menu":{"type":"boolean"},"tools":{"type":"boolean"}}},"navigation":{"type":"object","properties":{"type":{"type":"string","enum":["Orbit","Fly","Walk"]},"enabled":{"type":"boolean"},"autoZoom":{"type":"boolean"},"autoRotation":{"type":"boolean"},"lightsFollowCamera":{"type":"boolean"},"orbit":{"$comment":"TODO: Implement","type":"object","properties":{}},"walk":{"$comment":"TODO: Implement","type":"object","properties":{}}}},"background":{"type":"object","properties":{"style":{"type":"string","enum":["Solid","LinearGradient","RadialGradient"]},"color0":{"$ref":"./common.schema.json#/definitions/vector3"},"color1":{"$ref":"./common.schema.json#/definitions/vector3"}}},"floor":{"type":"object","properties":{"visible":{"type":"boolean"},"position":{"$ref":"./common.schema.json#/definitions/vector3"},"size":{"type":"number"},"color":{"$ref":"./common.schema.json#/definitions/vector3"},"opacity":{"type":"number"},"receiveShadow":{"type":"boolean"},"autoSize":{"type":"boolean"}}},"grid":{"type":"object","properties":{"visible":{"type":"boolean"},"color":{"$ref":"./common.schema.json#/definitions/vector3"}}},"tape":{"type":"object","properties":{"enabled":{"type":"boolean"},"startPosition":{"$ref":"./common.schema.json#/definitions/vector3"},"startDirection":{"$ref":"./common.schema.json#/definitions/vector3"},"endPosition":{"$ref":"./common.schema.json#/definitions/vector3"},"endDirection":{"$ref":"./common.schema.json#/definitions/vector3"}}},"slicer":{"type":"object","properties":{"enabled":{"type":"boolean"},"axis":{"type":"string","enum":["X","Y","Z"]},"inverted":{"type":"boolean"},"position":{"type":"number"},"color":{"$ref":"./common.schema.json#/definitions/vector3"}}},"audio":{"type":"object","properties":{"narrationId":{"type":"string"}}},"language":{"type":"object","properties":{"language":{"type":"string","enum":["EN","ES","DE","NL","JA","FR","HAW","IT","AR"]}}},"tours":{"description":"Animated tours.","type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"lead":{"type":"string"},"leads":{"description":"Short lead text with language key.","type":"object"},"tags":{"description":"Array of tags, categorizing the tour.","type":"array","items":{"type":"string"}},"taglist":{"description":"Array of tags, categorizing the annotation with language key.","type":"object"},"steps":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string"},"titles":{"description":"Short title with language key.","type":"object"},"id":{"type":"string"}}}}}}},"snapshots":{"description":"Snapshots are animatable scene states.","type":"object","properties":{"features":{"type":"array","items":{"type":"string"}},"targets":{"type":"array","items":{"type":"string"}},"states":{"type":"array","items":{"type":"object"}}}}},"type":"object","properties":{"units":{"$ref":"./common.schema.json#/definitions/units"},"interface":{"$ref":"#/definitions/interface"},"viewer":{"$ref":"#/definitions/viewer"},"reader":{"$ref":"#/definitions/reader"},"navigation":{"$ref":"#/definitions/navigation"},"background":{"$ref":"#/definitions/background"},"floor":{"$ref":"#/definitions/floor"},"grid":{"$ref":"#/definitions/grid"},"tape":{"$ref":"#/definitions/tape"},"slicer":{"$ref":"#/definitions/slicer"},"tours":{"$ref":"#/definitions/tours"},"language":{"$ref":"#/definitions/language"},"audio":{"$ref":"#/definitions/audio"}}}');var v=n(2222),y=n(3164),b=n(8313),A=n(1721),_=n(161),w=n(8604),x=n(3675);class C extends c{constructor(e,t){super(e,t),this.titles={},this.intros={},this._meta=null,this.ins=this.addInputs(C.ins),this.outs=this.addOutputs(C.outs),this.innerGraph.createCustomNode(y.A),this.ins.active.setValue(!1),this.ins.visible.setValue(!1)}get root(){return this.innerNodes.get(y.A)}get setup(){return this.innerComponents.get(A.A)}get assetPath(){return this.outs.assetPath.value}get assetBaseName(){let e=this.assetPath;const t=e.indexOf(".svx.json");return t>=0&&(e=e.substr(0,t)),e}get meta(){return this._meta}titleIn(e){return this.titles[x.aL[e]]||""}get analytics(){return this.getMainComponent(w.A)}create(){super.create(),this.innerGraph.components.on(b.A,this.onMetaComponent,this),this.setup.language.outs.activeLanguage.on("value",this.onLanguageUpdate,this)}dispose(){this.setup.language.outs.activeLanguage.off("value",this.onLanguageUpdate,this),this.innerGraph.components.off(b.A,this.onMetaComponent,this),super.dispose()}update(e){super.update(e);const{ins:t,outs:n}=this;if(t.dumpJson.changed){const e=this.deflateDocument();console.log("-------------------- VOYAGER DOCUMENT --------------------"),console.log(JSON.stringify(e,(e,t)=>"number"==typeof t?parseFloat(t.toFixed(5)):t,2))}if(t.dumpTree.changed&&(console.log("-------------------- VOYAGER DOCUMENT --------------------"),this.dump()),t.download.changed){const e=n.assetPath.value.split("/").pop()||"voyager-document.json";i.A.json(this.deflateDocument(),e)}if(t.title.changed&&this.titles){const e=this.setup.language;t.title.setValue(t.title.value,!0),n.title.setValue(t.title.value),t.title.value&&(this.titles[x.aL[e.outs.activeLanguage.value]]=t.title.value,this.updateMeta())}if(t.intro.changed&&this.intros){const e=this.setup.language;n.intro.setValue(t.intro.value),this.intros[x.aL[e.outs.activeLanguage.value]]=t.intro.value,this.updateMeta()}return!0}clearNodeTree(){this.root.transform.children.slice().forEach(e=>e.node.dispose())}openDocument(e,t,n){var i;if(!C.validator.validate(e))throw new Error("document schema validation failed");n||(this.clearNodeTree(),this.ins.title.setValue(null)),this.ins.copyright.setValue(null!==(i=e.asset.copyright)&&void 0!==i?i:this.ins.copyright.schema.preset),this.onMetaComponent({type:"CVMeta",object:this.root.meta,add:!0,remove:!1});let r="object"==typeof n?n:this.root;if(r.graph!==this.innerGraph)throw new Error("invalid parent node");const o=new Map;if(r instanceof y.A)r.fromDocument(e,e.scene,o);else{e.scenes[e.scene].nodes.forEach(t=>{const n=this.innerGraph.createCustomNode(v.A);r.transform.addChild(n.transform),n.fromDocument(e,t,o)})}t&&(this.outs.assetPath.setValue(t),this.name=this.getMainComponent(_.A).getAssetName(t))}appendModel(e,t,n){if(n&&n.graph!==this.innerGraph)throw new Error("invalid parent node");if(this.isEmpty())throw new Error("empty document, can't append model");n=n||this.root;const i=this.innerGraph.createCustomNode(v.A);n.transform.addChild(i.transform),i.createModel();const r=i.model;return r.derivatives.createModelAsset(e,t),r}appendGeometry(e,t,n,i,r,o){if(o&&o.graph!==this.innerGraph)throw new Error("invalid parent node");if(this.isEmpty())throw new Error("empty document, can't append geometry");o=o||this.root;const s=this.innerGraph.createCustomNode(v.A);o.transform.addChild(s.transform),s.createModel();s.model.derivatives.createMeshAsset(e,t,n,i,r)}deflateDocument(e){if(this.isEmpty())throw new Error("empty document, can't serialize");const t={asset:{type:C.mimeType,version:C.version,generator:"Voyager"},scene:0,scenes:[]};this.ins.copyright.value.length>0&&(t.asset.copyright=this.ins.copyright.value);const n=new Map;return t.scene=this.root.toDocument(t,n,e),t}onMetaComponent(e){const t=e.object,n=this.ins.title,i=this.ins.intro,r=this.setup.language;null===this._meta&&(this._meta=t),e.add&&!n.value&&t.once("load",()=>{this.titles=t.collection.get("titles")||{},this.intros=t.collection.get("intros")||{},0===Object.keys(this.titles).length&&(this.titles[x.aL[r.outs.activeLanguage.value]]=t.collection.get("title")||"",t.collection.dictionary.titles=this.titles);const e=this.titles[x.aL[r.outs.activeLanguage.value]];n.setValue(e);const o=this.intros[x.aL[r.outs.activeLanguage.value]]||"";i.setValue(o),this.analytics.setTitle(e),this._meta=t})}onLanguageUpdate(){const e=this.setup.language,t=this.titles[x.aL[e.outs.activeLanguage.value]];this.ins.title.setValue(t);const n=this.intros[x.aL[e.outs.activeLanguage.value]]||"";this.ins.intro.setValue(n)}updateMeta(){const e=this.meta;e&&(e.collection.dictionary.titles=this.titles,e.collection.dictionary.intros=this.intros)}}C.typeName="CVDocument",C.mimeType="application/si-dpo-3d.document+json",C.version="1.0",C.validator=new class{constructor(){this._schemaValidator=new(u())({schemas:[h,p,m,f,g],allErrors:!0}),this._validateDocument=this._schemaValidator.getSchema("https://schemas.3d.si.edu/voyager/document.schema.json")}validate(e){return!!this._validateDocument(e)||(console.warn(this._schemaValidator.errorsText(this._validateDocument.errors,{separator:", ",dataVar:"document"})),!1)}},C.ins={dumpJson:r.gK.Event("Document.DumpJSON"),dumpTree:r.gK.Event("Document.DumpTree"),download:r.gK.Event("Document.Download"),title:r.gK.String("Document.Title"),intro:r.gK.String("Document.Intro",""),copyright:r.gK.String("Document.Copyright","")},C.outs={assetPath:r.gK.AssetPath("Asset.Path",{preset:"scene.svx.json"}),title:r.gK.String("Document.Title"),intro:r.gK.String("Document.Intro","")}},1262:function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},1266:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(9660);class r extends i.A{get settingProperties(){return[this.ins.style,this.ins.color0,this.ins.color1]}get snapshotProperties(){return[this.ins.color0,this.ins.color1]}constructor(e,t){super(e,t),this.background.layers.set(1)}fromData(e){this.ins.copyValues({style:i.z[e.style]||i.z.Solid,color0:e.color0||[.2,.25,.3],color1:e.color1||[.01,.03,.05]})}toData(){const e=this.ins;return{style:i.z[e.style.value],color0:e.color0.cloneValue(),color1:e.color1.cloneValue()}}}r.typeName="CVBackground"},1274:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},1289:function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(3681))},1308:(e,t,n)=>{"use strict";var i=n(6763),r=(n(9498),n(4019)),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=class extends r.A{firstConnected(){super.firstConnected(),this.classList.add("sv-property-event")}update(e){if(e.has("property")){if(!this.property)throw new Error("missing property attribute");if(!this.property.schema.event)throw new Error(`not an event property: '${this.property.path}'`);const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=this.text;return i.qy`<label id="${t}-label" class="ff-label ff-off">${t}</label>
            <div class="sv-options">
                <ff-button ?disabled=${"true"===this.ariaDisabled} aria-labelledby="${t}-label" icon="zoom" .text=${n} @click=${this.onButtonClick}></ff-button>
            </div>`}onButtonClick(e){this.property.set()}};o([(0,i.MZ)({type:String})],s.prototype,"icon",void 0),s=o([(0,i.EM)("sv-property-event")],s)},1327:(e,t,n)=>{var i=n(1741),r=n(6888),o=n(4509),s=i?i.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||r(e)||!!(s&&e&&e[s])}},1352:e=>{"use strict";const t={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class n{constructor(e){this.builder=e}atrule(e,t){let n="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?n+=e.raws.afterName:i&&(n+=" "),e.nodes)this.block(e,n+i);else{let r=(e.raws.between||"")+(t?";":"");this.builder(n+i+r,e)}}beforeAfter(e,t){let n;n="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let i=e.parent,r=0;for(;i&&"root"!==i.type;)r+=1,i=i.parent;if(n.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)n+=t}return n}block(e,t){let n,i=this.raw(e,"between","beforeOpen");this.builder(t+i+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),n=this.raw(e,"after")):n=this.raw(e,"after","emptyBody"),n&&this.builder(n),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let n=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let r=e.nodes[i],o=this.raw(r,"before");o&&this.builder(o),this.stringify(r,t!==i||n)}}comment(e){let t=this.raw(e,"left","commentLeft"),n=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+n+"*/",e)}decl(e,t){let n=this.raw(e,"between","colon"),i=e.prop+n+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,n,i){let r;if(i||(i=n),n&&(r=e.raws[n],void 0!==r))return r;let o=e.parent;if("before"===i){if(!o||"root"===o.type&&o.first===e)return"";if(o&&"document"===o.type)return""}if(!o)return t[i];let s=e.root();if(s.rawCache||(s.rawCache={}),void 0!==s.rawCache[i])return s.rawCache[i];if("before"===i||"after"===i)return this.beforeAfter(e,i);{let t="raw"+((a=i)[0].toUpperCase()+a.slice(1));this[t]?r=this[t](s,e):s.walk(e=>{if(r=e.raws[n],void 0!==r)return!1})}var a;return void 0===r&&(r=t[i]),s.rawCache[i]=r,r}rawBeforeClose(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let n;return e.walkComments(e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeDecl"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeDecl(e,t){let n;return e.walkDecls(e=>{if(void 0!==e.raws.before)return n=e.raws.before,n.includes("\n")&&(n=n.replace(/[^\n]+$/,"")),!1}),void 0===n?n=this.raw(t,null,"beforeRule"):n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(e){let t;return e.walk(e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1}),t}rawBeforeRule(e){let t;return e.walk(n=>{if(n.nodes&&(n.parent!==e||e.first!==n)&&void 0!==n.raws.before)return t=n.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(n=>{let i=n.parent;if(i&&i!==e&&i.parent&&i.parent===e&&void 0!==n.raws.before){let e=n.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1}),t}rawValue(e,t){let n=e[t],i=e.raws[t];return i&&i.value===n?i.raw:n}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}e.exports=n,n.default=n},1365:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},1463:function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(3681))},1469:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},1475:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(3681))},1502:function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(3681))},1572:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,UH:()=>s.UH,a9:()=>s.a9,iO:()=>a.iO});var i=n(4640),r=n(6351),o=n(8446),s=n(7297),a=n(9261),l=n(7229);class c extends o.A{static fromJSON(e){return new c(e)}constructor(e){super(e),this.model=null,this.abortControl=null,this.addEvent("load")}dispose(){this.unload(),super.dispose()}load(e){if(this.data.usage!==s.UH.Web3D)throw new Error("can't load, not a Web3D derivative");this.abortControl&&this.abortControl.abort(new Error("Derivative load cancelled")),this.abortControl=new AbortController;const t=this.findAsset(a.iO.Model);if(t)return e.getModel(t.data.uri,{signal:this.abortControl.signal}).then(e=>(this.model&&(0,r.nZ)(this.model),this.model=e,e));const n=this.findAsset(a.iO.Geometry),o=this.findAssets(a.iO.Image);return n?e.getGeometry(n.data.uri).then(t=>(this.model=new i.eaF(t,new i._4j),this.model.castShadow=!0,Promise.all(o.map(t=>e.getTexture(t.data.uri))).catch(e=>(console.warn("failed to load texture files"),[])))).then(e=>{const t=this.model.material;return this.assignTextures(o,e,t),(0,l.zv)(t),t.userData.paramCopy={},(0,l.AG)(t),t.map||(t.color.setScalar(.5),t.roughness=.8,t.metalness=0),this.model}):void 0}unload(){var e;if(null===(e=this.abortControl)||void 0===e||e.abort(),this.model){if(this.model.userData.variants){const e=this.model.userData.variants.variantMaterials;for(let t in e){const n=e[t];if(n){for(let e in n){const t=n[e];t&&t.isTexture&&t.dispose()}n.dispose()}}this.model.userData.variants.variantMaterials=null}(0,r.nZ)(this.model),this.model=null}}createAsset(e,t){const n=new a.Ay;return n.data.type=e,n.data.uri=t,this.addAsset(n),n}addAsset(e){if(!e.data.uri)throw new Error("uri must be specified");this.data.assets.push(e),this.update()}removeAsset(e){const t=this.data.assets.indexOf(e);t>=0&&this.data.assets.splice(t,1)}findAsset(e){return this.data.assets.find(t=>t.data.type===e)}findAssets(e){return this.data.assets.filter(t=>t.data.type===e)}toString(e=!1){const t=this.data;return e?`Derivative - usage: '${s.UH[t.usage]}', quality: '${s.a9[t.quality]}'\n   `+t.assets.map(e=>e.toString()).join("\n   "):`Derivative - usage: '${s.UH[t.usage]}', quality: '${s.a9[t.quality]}', #assets: ${t.assets.length})`}init(){return{usage:s.UH.Web3D,quality:s.a9.Medium,assets:[]}}deflate(e,t){t.usage=s.UH[e.usage],t.quality=s.a9[e.quality],t.assets=e.assets.map(e=>e.toJSON())}inflate(e,t){if(t.usage=s.UH[e.usage],void 0===t.usage)throw new Error(`unknown derivative usage: ${e.usage}`);if(t.quality=s.a9[e.quality],void 0===t.quality)throw new Error(`unknown derivative quality: ${e.quality}`);t.assets=e.assets.map(e=>new a.Ay(e))}assignTextures(e,t,n){for(let i=0;i<e.length;++i){const r=e[i],o=t[i];switch(r.data.mapType){case a.oo.Color:n.map=o;break;case a.oo.Occlusion:n.aoMap=o;break;case a.oo.Emissive:n.emissiveMap=o;break;case a.oo.MetallicRoughness:n.metalnessMap=o,n.roughnessMap=o;break;case a.oo.Normal:n.normalMap=o}}}}},1574:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"})}(n(3681))},1611:(e,t,n)=>{n(5600)},1674:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return i||t?r[n][0]:r[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},1721:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(3423),r=n(8424),o=n(3675),s=n(5007),a=n(2652),l=n(7801),c=n(2654),d=n(1266),u=n(7137),h=n(7109),p=n(4340),m=n(2566),f=n(5659),g=n(4085),v=n(6389),y=n(9337),b=n(3019),A=n(66),_=n(9909);class w extends i.Ay{constructor(){super(...arguments),this._savedSetupData={},this.ins=this.addInputs(w.ins)}get featureMap(){return this.constructor.featureMap}get transform(){return this.getComponent(r.Ay)}get setupCache(){return this._savedSetupData}create(){super.create();const e=this.node,t=w.featureMap;for(const n in t)this[n]=e.createComponent(t[n]);this.snapshots=e.createComponent(g.A)}dispose(){this._savedSetupData=null}update(){const e=this.ins;return e.saveState.changed&&this.cacheSetupState(),e.restoreState.changed&&this.restoreSetupState(),!0}fromDocument(e,t,n){const i=e.scenes[t];if(!isFinite(i.setup))throw new Error("setup property missing in node");const r=e.setups[i.setup];this._savedSetupData=JSON.parse(JSON.stringify(r));const o=w.featureMap;for(const e in o){n.set(`scenes/${t}/setup/${e}`,this[e]);const i=r[e];i&&this[e].fromData(i)}}toDocument(e,t,n){const i=this._savedSetupData,r=w.featureMap;for(const e in r)n.set(this[e],`scenes/${t}/setup/${e}`);const o=this.tours.toData();o?i.tours=o:i.tours&&delete i.tours;const s=this.snapshots.toData(n);if(s&&(i.snapshots=s),i){e.setups=e.setups||[];const n=e.setups.length;e.setups.push(i),e.scenes[t].setup=n}}cacheSetupState(){const e=w.featureMap;for(const t in e){const e=this[t].toData();e&&(this._savedSetupData[t]=e)}this.language.ins.primarySceneLanguage.setValue(o.aL[this._savedSetupData.language.language])}restoreSetupState(){const e=this._savedSetupData,t=w.featureMap;for(const n in t){const t=e[n];t&&"tours"!==n&&this[n].fromData(t)}this.slicer.ins.enabled.set(),this.navigation.ins.autoZoom.value&&this.navigation.ins.zoomExtents.set()}resetViewer(){this.actions.ins.reset.set(),this.audio.ins.reset.set(),this.navigation.ins.projection.reset(),this.ins.restoreState.set()}}w.typeName="CVSetup",w.ins={saveState:i.gK.Event("Setup.SaveState"),restoreState:i.gK.Event("Setup.RestoreState")},w.featureMap={interface:s.A,reader:l.Ay,viewer:a.A,navigation:c.Ay,derivatives:A.Ay,background:d.A,environment:v.A,language:y.A,floor:u.A,grid:h.A,tape:p.A,slicer:m.A,tours:f.A,audio:b.A,actions:_.A}},1741:(e,t,n)=>{var i=n(5289).Symbol;e.exports=i},1757:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var i=n(6187),r=n(4709);class o{constructor(e,t,n){this.__parts=[],this.template=e,this.processor=t,this.options=n}update(e){let t=0;for(const n of this.__parts)void 0!==n&&n.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=i.o6?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,o=document.createTreeWalker(e,133,null,!1);let s,a=0,l=0,c=o.nextNode();for(;a<n.length;)if(s=n[a],(0,r.s9)(s)){for(;l<s.index;)l++,"TEMPLATE"===c.nodeName&&(t.push(c),o.currentNode=c.content),null===(c=o.nextNode())&&(o.currentNode=t.pop(),c=o.nextNode());if("node"===s.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(c.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,s.name,s.strings,this.options));a++}else this.__parts.push(void 0),a++;return i.o6&&(document.adoptNode(e),customElements.upgrade(e)),e}}},1792:function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"}function i(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"}function r(e,t,n,i){var r=o(e);switch(n){case"ss":return r+" lup";case"mm":return r+" tup";case"hh":return r+" rep";case"dd":return r+" jaj";case"MM":return r+" jar";case"yy":return r+" DIS"}}function o(e){var n=Math.floor(e%1e3/100),i=Math.floor(e%100/10),r=e%10,o="";return n>0&&(o+=t[n]+"vatlh"),i>0&&(o+=(""!==o?" ":"")+t[i]+"maH"),r>0&&(o+=(""!==o?" ":"")+t[r]),""===o?"pagh":o}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:n,past:i,s:"puS lup",ss:r,m:"wa’ tup",mm:r,h:"wa’ rep",hh:r,d:"wa’ jaj",dd:r,M:"wa’ jar",MM:r,y:"wa’ DIS",yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},1820:function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(3681))},1829:e=>{"use strict";e.exports=()=>/[<>:"\/\\|?*\x00-\x1F]/g,e.exports.windowsNames=()=>/^(con|prn|aux|nul|com[0-9]|lpt[0-9])$/i},1860:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(449),r=n(3331),o=n(3627),s=n(3423);class a extends r.A{static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||a.typeName}constructor(e,t){super({knownEvents:!1}),this.graph=null,this.components=new o.A(s.Ay),this._name="",this._tags=new Set,this._isLocked=void 0,this.graph=e,this.id=t}get typeName(){return this.constructor.typeName}get displayTypeName(){const e=this.typeName;return"Node"===e?e:e.substr(1)}get isLocked(){return this._isLocked}get text(){return this.constructor.text}get icon(){return this.constructor.icon}get name(){return this._name}get displayName(){return this._name||this.text||this.displayTypeName}set name(e){this._name=e,this.emit({type:"change",what:"name",node:this})}get tags(){return this._tags}addTag(e){this._tags.has(e)||(this._tags.add(e),this.graph._addNodeTag(e,this))}removeTag(e){this._tags.has(e)&&(this._tags.delete(e),this.graph._removeNodeTag(e,this))}get system(){return this.graph.system}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}getOrCreateComponent(e){return this.components.get(e,!0)||this.createComponent(e)}hasComponent(e){return this.components.has(e)}getGraphComponent(e,t=!1){return this.graph.components.get(e,t)}getGraphComponents(e){return this.graph.components.getArray(e)}getGraphComponentsByTag(e){return this.graph.components.getByTag(e)}hasGraphComponent(e){return this.graph.components.has(e)}getMainComponent(e,t=!1){return this.graph.system.graph.components.get(e,t)}getMainComponents(e){return this.graph.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.graph.system.graph.components.getByTag(e)}hasMainComponent(e){return this.graph.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.graph.system.components.get(e,t)}getSystemComponents(e){return this.graph.system.components.getArray(e)}getSystemComponentsByTag(e){return this.graph.system.components.getByTag(e)}hasSystemComponent(e){return this.graph.system.components.has(e)}getComponentById(e){return this.graph.system.components.getById(e)}getNode(e,t=!1){return this.graph.nodes.get(e,t)}getNodes(e){return this.graph.nodes.getArray(e)}getNodesByTag(e){return this.graph.nodes.getByTag(e)}hasNode(e){return this.graph.nodes.has(e)}getMainNode(e,t=!1){return this.graph.system.graph.nodes.get(e,t)}getMainNodes(e){return this.graph.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.graph.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.graph.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.graph.system.nodes.get(e,t)}getSystemNodes(e){return this.graph.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.graph.system.nodes.getByTag(e)}hasSystemNode(e){return this.graph.system.nodes.has(e)}getNodeById(e){return this.graph.system.nodes.getById(e)}lock(){if(!1===this._isLocked)throw new Error("can't lock an unlocked node again");this._isLocked=!0}unlock(){this._isLocked=!1}create(){this.graph._addNode(this)}createComponents(){}clear(){this.components.getArray().slice().forEach(e=>e.dispose())}dispose(){this.components.cloneArray().reverse().forEach(e=>e.dispose()),this.emit({type:"dispose",node:this}),this.graph&&(this.graph._removeNode(this),this.graph=null)}createComponent(e,t,n){if(!0===this._isLocked)throw new Error("node is locked, can't create component");const r=this.system.registry.getType(e);if(!r)throw new Error(`component type '${s.Ay.getTypeName(e)}' not registered`);const o=new r(this,n||(0,i.A)(12,this.system.components.getDictionary()));return o.create(),t&&(o.name=t),o}is(e){const t=a.getTypeName(e);let n=this;do{if(n=Object.getPrototypeOf(n),n.constructor.typeName===t)return!0}while(n.constructor.typeName!==a.typeName);return!1}toString(e=!1){const t=this.components.getArray(),n=`Node '${this.name}' - ${t.length} components`;return e?n+"\n"+t.map(e=>"  "+e.toString()).join("\n"):n}dump(e=""){console.log(e+`%cNode '${this.typeName}' (${this.displayName})`,"color: blue"),this.components.getArray().forEach(t=>t.dump(e+"  "))}toJSON(){const e={},t=[];this._isLocked&&(e.locked=!0);const n=this.components.getArray();for(let e=0,i=n.length;e<i;++e){const i=n[e],r=this.componentToJSON(i);r&&(r.type=i.typeName,r.id=i.id,i.name&&(r.name=i.name),t.push(r))}return t.length>0&&(e.components=t),e}fromJSON(e){this._isLocked=!!e.locked,e.components&&e.components.forEach(e=>this.componentFromJSON(e))}componentFromJSON(e){this.createComponent(e.type,e.name,e.id).fromJSON(e)}referencesFromJSON(e){e.components&&e.components.forEach(e=>{this.components.getById(e.id).referencesFromJSON(e)})}componentToJSON(e){return e.toJSON()}_addComponent(e){if(e.isNodeSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per node`);this.components.add(e),this.graph._addComponent(e)}_removeComponent(e){this.graph._removeComponent(e),this.components.remove(e)}_addComponentTag(e,t){this.components.addByTag(e,t),this.graph._addComponentTag(e,t)}_removeComponentTag(e,t){this.graph._removeComponentTag(e,t),this.components.removeByTag(e,t)}}a.typeName="Node",a.text="",a.icon=""},1864:(e,t,n)=>{var i,r,o=n(2669),s=n(7904).isArray;function a(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function l(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,r,i));var o,s,l,c,d=[];for(o in e)e.hasOwnProperty(o)&&null!==e[o]&&void 0!==e[o]&&(c=t.noQuotesForNativeAttributes&&"string"!=typeof e[o]?"":'"',s=(s=""+e[o]).replace(/"/g,"&quot;"),l="attributeNameFn"in t?t.attributeNameFn(o,s,r,i):o,d.push(t.spaces&&t.indentAttributes?a(t,n+1,!1):" "),d.push(l+"="+c+("attributeValueFn"in t?t.attributeValueFn(s,o,r,i):s)+c));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&d.push(a(t,n,!1)),d.join("")}function c(e,t,n){return i=e,r="xml",t.ignoreDeclaration?"":"<?xml"+l(e[t.attributesKey],t,n)+"?>"}function d(e,t,n){if(t.ignoreInstruction)return"";var o;for(o in e)if(e.hasOwnProperty(o))break;var s="instructionNameFn"in t?t.instructionNameFn(o,e[o],r,i):o;if("object"==typeof e[o])return i=e,r=s,"<?"+s+l(e[o][t.attributesKey],t,n)+"?>";var a=e[o]?e[o]:"";return"instructionFn"in t&&(a=t.instructionFn(a,o,r,i)),"<?"+s+(a?" "+a:"")+"?>"}function u(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,r,i):e)+"--\x3e"}function h(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,r,i):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function p(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,r,i):e)+">"}function m(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,r,i):e)}function f(e,t,n,o){return e.reduce(function(e,s){var c=a(t,n,o&&!e);switch(s.type){case"element":return e+c+function(e,t,n){i=e,r=e.name;var o=[],s="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;o.push("<"+s),e[t.attributesKey]&&o.push(l(e[t.attributesKey],t,n));var a=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return a||(a="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),a?(o.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(o.push(f(e[t.elementsKey],t,n+1)),i=e,r=e.name),o.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),o.push("</"+s+">")):o.push("/>"),o.join("")}(s,t,n);case"comment":return e+c+u(s[t.commentKey],t);case"doctype":return e+c+p(s[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?c:"")+h(s[t.cdataKey],t);case"text":return e+(t.indentText?c:"")+m(s[t.textKey],t);case"instruction":var g={};return g[s[t.nameKey]]=s[t.attributesKey]?s:s[t.instructionKey],e+(t.indentInstruction?c:"")+d(g,t,n)}},"")}function g(e,t,n){var i;for(i in e)if(e.hasOwnProperty(i))switch(i){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function v(e,t,n,o,s){i=e,r=t;var c="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+c+"></"+c+">":"<"+c+"/>";var d=[];if(t){if(d.push("<"+c),"object"!=typeof e)return d.push(">"+m(e,n)+"</"+c+">"),d.join("");e[n.attributesKey]&&d.push(l(e[n.attributesKey],n,o));var u=g(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!u)return d.push("/>"),d.join("");d.push(">")}return d.push(y(e,n,o+1,!1)),i=e,r=t,t&&d.push((s?a(n,o,!1):"")+"</"+c+">"),d.join("")}function y(e,t,n,i){var r,o,l,f=[];for(o in e)if(e.hasOwnProperty(o))for(l=s(e[o])?e[o]:[e[o]],r=0;r<l.length;++r){switch(o){case t.declarationKey:f.push(c(l[r],t,n));break;case t.instructionKey:f.push((t.indentInstruction?a(t,n,i):"")+d(l[r],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:f.push((t.indentText?a(t,n,i):"")+m(l[r],t));break;case t.cdataKey:f.push((t.indentCdata?a(t,n,i):"")+h(l[r],t));break;case t.doctypeKey:f.push(a(t,n,i)+p(l[r],t));break;case t.commentKey:f.push(a(t,n,i)+u(l[r],t));break;default:f.push(a(t,n,i)+v(l[r],o,t,n,g(l[r],t)))}i=i&&!f.length}return f.join("")}e.exports=function(e,t){t=function(e){var t=o.copyOptions(e);return o.ensureFlagExists("ignoreDeclaration",t),o.ensureFlagExists("ignoreInstruction",t),o.ensureFlagExists("ignoreAttributes",t),o.ensureFlagExists("ignoreText",t),o.ensureFlagExists("ignoreComment",t),o.ensureFlagExists("ignoreCdata",t),o.ensureFlagExists("ignoreDoctype",t),o.ensureFlagExists("compact",t),o.ensureFlagExists("indentText",t),o.ensureFlagExists("indentCdata",t),o.ensureFlagExists("indentAttributes",t),o.ensureFlagExists("indentInstruction",t),o.ensureFlagExists("fullTagEmptyElement",t),o.ensureFlagExists("noQuotesForNativeAttributes",t),o.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),o.ensureKeyExists("declaration",t),o.ensureKeyExists("instruction",t),o.ensureKeyExists("attributes",t),o.ensureKeyExists("text",t),o.ensureKeyExists("comment",t),o.ensureKeyExists("cdata",t),o.ensureKeyExists("doctype",t),o.ensureKeyExists("type",t),o.ensureKeyExists("name",t),o.ensureKeyExists("elements",t),o.checkFnExists("doctype",t),o.checkFnExists("instruction",t),o.checkFnExists("cdata",t),o.checkFnExists("comment",t),o.checkFnExists("text",t),o.checkFnExists("instructionName",t),o.checkFnExists("elementName",t),o.checkFnExists("attributeName",t),o.checkFnExists("attributeValue",t),o.checkFnExists("attributes",t),o.checkFnExists("fullTagEmptyElement",t),t}(t);var n=[];return i=e,r="_root_",t.compact?n.push(y(e,t,0,!0)):(e[t.declarationKey]&&n.push(c(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(f(e[t.elementsKey],t,0,!n.length))),n.join("")}},1881:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(n(272),t),r(n(5295),t),r(n(4516),t),r(n(1991),t),r(n(5362),t),r(n(564),t),r(n(6944),t);var o=n(5724);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return o.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return o.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return o.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return o.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return o.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return o.hasChildren}})},1891:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function i(e,t,n,i){var o="";switch(n){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"ss":o=i?"sekunnin":"sekuntia";break;case"m":return i?"minuutin":"minuutti";case"mm":o=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":o=i?"tunnin":"tuntia";break;case"d":return i?"päivän":"päivä";case"dd":o=i?"päivän":"päivää";break;case"M":return i?"kuukauden":"kuukausi";case"MM":o=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":o=i?"vuoden":"vuotta"}return o=r(e,i)+" "+o}function r(e,i){return e<10?i?n[e]:t[e]:e}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},1950:function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},1991:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var i=n(5724);function r(e,t,n,r){for(var o=[],s=[t],a=[0];;)if(a[0]>=s[0].length){if(1===a.length)return o;s.shift(),a.shift()}else{var l=s[0][a[0]++];if(e(l)&&(o.push(l),--r<=0))return o;n&&(0,i.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),s.unshift(l.children))}}t.filter=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),r(e,Array.isArray(t)?t:[t],n,i)},t.find=r,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,n,r){void 0===r&&(r=!0);for(var o=null,s=0;s<n.length&&!o;s++){var a=n[s];(0,i.isTag)(a)&&(t(a)?o=a:r&&a.children.length>0&&(o=e(t,a.children,!0)))}return o},t.existsOne=function e(t,n){return n.some(function(n){return(0,i.isTag)(n)&&(t(n)||e(t,n.children))})},t.findAll=function(e,t){for(var n=[],r=[t],o=[0];;)if(o[0]>=r[0].length){if(1===r.length)return n;r.shift(),o.shift()}else{var s=r[0][o[0]++];(0,i.isTag)(s)&&(e(s)&&n.push(s),s.children.length>0&&(o.unshift(0),r.unshift(s.children)))}}},2006:(e,t,n)=>{n(8347)},2015:function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(e,t){return"元"===t[1]?1:parseInt(t[1]||e,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()!==e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"y":return 1===e?"元年":e+"年";case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(3681))},2046:(e,t,n)=>{var i=n(6788);e.exports=function(e){return(null==e?0:e.length)?i(e,1):[]}},2076:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1200?"上午":1200===i?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(3681))},2077:function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(3681))},2094:function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(3681))},2126:(e,t,n)=>{e.exports=self.fetch||(self.fetch=n(4106).default||n(4106))},2143:(e,t,n)=>{var i=n(1741),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[a]=n:delete e[a]),r}},2154:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(1860),r=n(6436),o=n(2902),s=n(1071);class a extends i.A{get scene(){return this.components.get(r.A)}get documentProvider(){return this.components.get(o.A)}get nodeProvider(){return this.components.get(s.A)}createComponents(){this.createComponent(r.A,"Master Scene"),this.createComponent(o.A),this.createComponent(s.A)}}a.typeName="NVDocuments"},2177:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},2222:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(1860),r=n(1086),o=n(9610),s=n(7078),a=n(8313),l=n(9616),c=n(8172),d=n(6687);class u extends i.A{get transform(){return this.components.get(r.A)}get meta(){return this.components.get(a.A,!0)}get model(){return this.components.get(l.A,!0)}get camera(){return this.components.get(o.A,!0)}get light(){return this.components.get(s.I,!0)}get scene(){return this.components.get(c.A,!0)}createComponents(){this.name="Node",this.createComponent(r.A)}createModel(){this.name="Model",this.createComponent(a.A),this.createComponent(l.A)}fromDocument(e,t,n){const i=e.nodes[t];this.transform.fromData(i),n.set(`node/${t}`,this.transform);let r="Node";if(isFinite(i.meta)&&(this.createComponent(a.A).fromDocument(e,i),n.set(`meta/${i.meta}`,this.meta),r="Meta"),isFinite(i.model)&&(this.createComponent(l.A).fromDocument(e,i),n.set(`model/${i.model}`,this.model),r="Model"),isFinite(i.camera)&&(this.addTag("controlled"),this.createComponent(o.A).fromDocument(e,i),n.set(`camera/${i.camera}`,this.camera),r="Camera"),isFinite(i.light)){this.addTag("controlled");const t=e.lights[i.light].type;let o=d.h.find(e=>e.type==t);if(!o)throw new Error(`unknown light type: '${t}'`);this.createComponent(o).fromDocument(e,i),r=o.text,n.set(`light/${i.light}`,this.light)}this.name=i.name||r;const s=i.children;s&&s.forEach(t=>{const i=this.graph.createCustomNode(u);this.transform.addChild(i.transform),i.fromDocument(e,t,n)})}toDocument(e,t,n){n=n||{meta:!0,setup:!0,model:!0,camera:!0,light:!0},e.nodes=e.nodes||[];const i=e.nodes.length,r=this.transform.toData();e.nodes.push(r),t.set(this.transform,`node/${i}`),this.name&&(r.name=this.name),this.model&&n.model&&(r.model=this.model.toDocument(e,r),t.set(this.model,`model/${r.model}`)),this.camera&&n.camera&&(r.camera=this.camera.toDocument(e,r),t.set(this.camera,`camera/${r.camera}`)),this.light&&n.light&&(r.light=this.light.toDocument(e,r),t.set(this.light,`light/${r.light}`)),this.meta&&n.meta&&(r.meta=this.meta.toDocument(e,r),t.set(this.meta,`info/${r.meta}`));const o=this.transform.children.map(e=>e.node).filter(e=>e.is(u));return o.forEach(i=>{if(i.hasNodeComponents(n)){const o=i.toDocument(e,t,n);r.children=r.children||[],r.children.push(o)}}),i}hasNodeComponents(e){if(!e)return!0;const t=this.transform,n=this.components;return!(!e.model||!n.has(l.A)&&!t.hasChildComponents(l.A,!0))||(!(!e.camera||!n.has(o.A)&&!t.hasChildComponents(o.A,!0))||!(!e.light||!n.has(s.I)&&!t.hasChildComponents(s.I,!0)))}}u.typeName="NVNode"},2243:function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",w:"một tuần",ww:"%d tuần",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(3681))},2245:function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(3681))},2260:function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(e){return e>1&&e<5}function r(e,t,n,r){var o=e+" ";switch(n){case"s":return t||r?"pár sekúnd":"pár sekundami";case"ss":return t||r?o+(i(e)?"sekundy":"sekúnd"):o+"sekundami";case"m":return t?"minúta":r?"minútu":"minútou";case"mm":return t||r?o+(i(e)?"minúty":"minút"):o+"minútami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?o+(i(e)?"hodiny":"hodín"):o+"hodinami";case"d":return t||r?"deň":"dňom";case"dd":return t||r?o+(i(e)?"dni":"dní"):o+"dňami";case"M":return t||r?"mesiac":"mesiacom";case"MM":return t||r?o+(i(e)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return t||r?"rok":"rokom";case"yy":return t||r?o+(i(e)?"roky":"rokov"):o+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:case 4:case 5:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},2290:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(5451).Buffer,a=n(3011).inspect,l=a&&a.custom||"inspect";function c(e,t,n){s.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,d;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t=s.allocUnsafe(e>>>0),n=this.head,i=0;n;)c(n.data,t,i),i+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,o=e>r.length?r.length:e;if(o===r.length?i+=r:i+=r.slice(0,e),0===(e-=o)){o===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,o=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,o),0===(e-=o)){o===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),d&&o(t,d),e}()},2309:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(e){return function(t,r,o,s){var a=n(t),l=i[e][n(t)];return 2===a&&(l=l[r?0:1]),l.replace(/%d/i,t)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(3681))},2310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const i=n(6971),r=n(444),o=n(3211),s=n(444),a=n(7738),l=n(5277),c=n(8203),d=n(5265),u=n(2363),h=n(5391),p=n(3151),m=n(6280);function f({gen:e,validateName:t,schema:n,schemaEnv:i,opts:r},o){r.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,i.$async,()=>{e.code(d._`"use strict"; ${g(n,r)}`),function(e,t){e.if(u.default.valCxt,()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)})}(e,r),e.code(o)}):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(r)}`,i.$async,()=>e.code(g(n,r)).code(o))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?d._`/*# sourceURL=${n} */`:d.nil}function v(e,t){b(e)&&(A(e),y(e))?function(e,t){const{schema:n,gen:i,opts:r}=e;r.$comment&&n.$comment&&w(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=i.const("_errs",u.default.errors);_(e,o),i.var(t,d._`${o} === ${u.default.errors}`)}(e,t):(0,i.boolOrEmptySchema)(e,t)}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function b(e){return"boolean"!=typeof e.schema}function A(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:r}=e;t.$ref&&i.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function _(e,t){if(e.opts.jtd)return x(e,[],!1,t);const n=(0,r.getSchemaTypes)(e.schema);x(e,n,!(0,r.coerceAndCheckDataType)(e,n),t)}function w({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:r}){const o=n.$comment;if(!0===r.$comment)e.code(d._`${u.default.self}.logger.log(${o})`);else if("function"==typeof r.$comment){const n=d.str`${i}/$comment`,r=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${o}, ${n}, ${r}.schema)`)}}function x(e,t,n,i){const{gen:r,schema:a,data:l,allErrors:c,opts:h,self:m}=e,{RULES:f}=m;function g(p){(0,o.shouldUseGroup)(a,p)&&(p.type?(r.if((0,s.checkDataType)(p.type,l,h.strictNumbers)),C(e,p),1===t.length&&t[0]===p.type&&n&&(r.else(),(0,s.reportTypeError)(e)),r.endIf()):C(e,p),c||r.if(d._`${u.default.errors} === ${i||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(a,f)?(h.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach(t=>{M(e.dataTypes,t)||S(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(e=>M(t,e))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&S(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const n=e.self.RULES.all;for(const i in n){const r=n[i];if("object"==typeof r&&(0,o.shouldUseRule)(e.schema,r)){const{type:n}=r.definition;n.length&&!n.some(e=>E(t,e))&&S(e,`missing type "${n.join(",")}" for keyword "${i}"`)}}}(e,e.dataTypes)}(e,t),r.block(()=>{for(const e of f.rules)g(e);g(f.post)})):r.block(()=>k(e,"$ref",f.all.$ref.definition))}function C(e,t){const{gen:n,schema:i,opts:{useDefaults:r}}=e;r&&(0,a.assignDefaults)(e,t.type),n.block(()=>{for(const n of t.rules)(0,o.shouldUseRule)(i,n)&&k(e,n.keyword,n.definition,t.type)})}function E(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function M(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function S(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){b(e)&&(A(e),y(e))?function(e){const{schema:t,opts:n,gen:i}=e;f(e,()=>{n.$comment&&t.$comment&&w(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),i.let(u.default.vErrors,null),i.let(u.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",d._`${n}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`)),t.if(d._`${e.evaluated}.dynamicItems`,()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`))}(e),_(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:r,opts:o}=e;n.$async?t.if(d._`${u.default.errors} === 0`,()=>t.return(u.default.data),()=>t.throw(d._`new ${r}(${u.default.vErrors})`)):(t.assign(d._`${i}.errors`,u.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:i}){n instanceof d.Name&&e.assign(d._`${t}.props`,n);i instanceof d.Name&&e.assign(d._`${t}.items`,i)}(e),t.return(d._`${u.default.errors} === 0`))}(e)})}(e):f(e,()=>(0,i.topBoolOrEmptySchema)(e))};class T{constructor(e,t,n){if((0,l.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",I(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,n){this.failResult((0,d.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?m.reportExtraError:m.reportError)(this,this.def.error,t)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=d.nil){this.gen.block(()=>{this.check$data(e,n),t()})}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:r,def:o}=this;n.if((0,d.or)(d._`${i} === undefined`,t)),e!==d.nil&&n.assign(e,!0),(r.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:i,it:r}=this;return(0,d.or)(function(){if(n.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return d._`${(0,s.checkDataTypes)(e,t,r.opts.strictNumbers,s.DataType.Wrong)}`}return d.nil}(),function(){if(i.validateSchema){const n=e.scopeValue("validate$data",{ref:i.validateSchema});return d._`!${n}(${t})`}return d.nil}())}subschema(e,t){const n=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(n,this.it,e),(0,c.extendSubschemaMode)(n,e);const i={...this.it,...n,items:void 0,props:void 0};return v(i,t),i}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=p.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=p.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,()=>this.mergeEvaluated(e,d.Name)),!0}}function k(e,t,n,i){const r=new T(e,n,t);"code"in n?n.code(r,i):r.$data&&n.validate?(0,l.funcKeywordCode)(r,n):"macro"in n?(0,l.macroKeywordCode)(r,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(r,n)}t.KeywordCxt=T;const L=/^\/(?:[^~]|~0|~1)*$/,D=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function I(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let r,o;if(""===e)return u.default.rootData;if("/"===e[0]){if(!L.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);r=e,o=u.default.rootData}else{const s=D.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(r=s[2],"#"===r){if(a>=t)throw new Error(l("property/index",a));return i[t-a]}if(a>t)throw new Error(l("data",a));if(o=n[t-a],!r)return o}let s=o;const a=r.split("/");for(const e of a)e&&(o=d._`${o}${(0,d.getProperty)((0,p.unescapeJsonPointer)(e))}`,s=d._`${s} && ${o}`);return s;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=I},2323:()=>{tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})},2363:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r={data:new i.Name("data"),valCxt:new i.Name("valCxt"),instancePath:new i.Name("instancePath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=r},2365:(e,t,n)=>{e.exports=n(9995).EventEmitter},2382:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(4038),r=n(5092),o=n(6945),s=n(3928),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends i.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=n(2310);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=n(5265);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}})},2387:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});n(6187);var i=n(4709);const r=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),o=` ${i.xL} `;class s{constructor(e,t,n,i){this.strings=e,this.values=t,this.type=n,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",n=!1;for(let r=0;r<e;r++){const e=this.strings[r],s=e.lastIndexOf("\x3c!--");n=(s>-1||n)&&-1===e.indexOf("--\x3e",s+1);const a=i.zY.exec(e);t+=null===a?e+(n?o:i.XY):e.substr(0,a.index)+a[1]+a[2]+i.c1+a[3]+i.xL}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==r&&(t=r.createHTML(t)),e.innerHTML=t,e}}},2420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(323),r=n(425),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,r.default];t.default=o},2426:function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var s=n(2177),a=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),w(this,e)},e}();t.Node=a;var l=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(a);t.DataNode=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(l);t.Text=c;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(l);t.Comment=d;var u=function(e){function t(t,n){var i=e.call(this,n)||this;return i.name=t,i.type=s.ElementType.Directive,i}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(l);t.ProcessingInstruction=u;var h=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(a);t.NodeWithChildren=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(h);t.CDATA=p;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(h);t.Document=m;var f=function(e){function t(t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r="script"===t?s.ElementType.Script:"style"===t?s.ElementType.Style:s.ElementType.Tag);var o=e.call(this,i)||this;return o.name=t,o.attribs=n,o.type=r,o}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var n,i;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(i=e["x-attribsPrefix"])||void 0===i?void 0:i[t]}})},enumerable:!1,configurable:!0}),t}(h);function g(e){return(0,s.isTag)(e)}function v(e){return e.type===s.ElementType.CDATA}function y(e){return e.type===s.ElementType.Text}function b(e){return e.type===s.ElementType.Comment}function A(e){return e.type===s.ElementType.Directive}function _(e){return e.type===s.ElementType.Root}function w(e,t){var n;if(void 0===t&&(t=!1),y(e))n=new c(e.data);else if(b(e))n=new d(e.data);else if(g(e)){var i=t?x(e.children):[],r=new f(e.name,o({},e.attribs),i);i.forEach(function(e){return e.parent=r}),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=o({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=o({},e["x-attribsPrefix"])),n=r}else if(v(e)){i=t?x(e.children):[];var s=new p(i);i.forEach(function(e){return e.parent=s}),n=s}else if(_(e)){i=t?x(e.children):[];var a=new m(i);i.forEach(function(e){return e.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else{if(!A(e))throw new Error("Not implemented yet: ".concat(e.type));var l=new u(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function x(e){for(var t=e.map(function(e){return w(e,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=f,t.isTag=g,t.isCDATA=v,t.isText=y,t.isComment=b,t.isDirective=A,t.isDocument=_,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=w},2464:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,Y:()=>i});var i,r=n(3423),o=n(3074);!function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(i||(i={}));const s={[i.Low]:512,[i.Medium]:1024,[i.High]:2048};class a extends o.Ay{constructor(){super(...arguments),this.canDelete=!0,this.ins=this.addInputs(a.lightIns)}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;if(n.name.changed&&(this.node.name=n.name.value),n.enabled.changed&&(t.visible=n.enabled.value,this.node.emit({type:"change",what:"enabled",node:this.node})),(n.color.changed||n.intensity.changed)&&(t.color.fromArray(n.color.value),t.intensity=n.intensity.value),"shadow"in t&&(n.shadowEnabled.changed&&(t.castShadow=n.shadowEnabled.value),n.shadowBlur.changed&&(t.shadow.radius=n.shadowBlur.value),n.shadowIntensity.changed&&(t.shadow.intensity=n.shadowIntensity.value),n.shadowResolution.changed)){const e=s[n.shadowResolution.getValidatedValue()];t.shadow.mapSize.set(e,e),t.shadow.map=null}return!0}}a.typeName="CLight",a.lightIns={name:r.gK.String("Light.Name"),enabled:r.gK.Boolean("Light.Enabled",!0),color:r.gK.ColorRGB("Light.Color"),intensity:r.gK.Number("Light.Intensity",{preset:1,min:0}),shadowEnabled:r.gK.Boolean("Shadow.Enabled"),shadowResolution:r.gK.Enum("Shadow.Resolution",i,i.Medium),shadowBlur:r.gK.Number("Shadow.Blur",1),shadowIntensity:r.gK.Number("Shadow.Intensity",{preset:1,min:0})}},2470:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(3681))},2518:function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(3681))},2552:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(5590),r=n(2464);class o extends i.A{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity,this.ins.shadowEnabled,this.ins.shadowSize,this.ins.shadowResolution,this.ins.shadowBlur,this.ins.shadowIntensity]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}dispose(){this.ins.shadowEnabled.value&&this.light.shadow.map&&this.light.shadow.map.dispose(),super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if("directional"!==n.type)throw new Error("light type mismatch: not a directional light");return i.name.setValue(t.name),i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,color:void 0!==n.color?n.color:i.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset,position:i.position.schema.preset,target:i.target.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowSize:void 0!==n.shadowSize?n.shadowSize:i.shadowSize.schema.preset,shadowResolution:void 0!==n.shadowResolution?r.Y[n.shadowResolution]||0:i.shadowResolution.schema.preset,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:i.shadowBlur.schema.preset,shadowIntensity:void 0!==n.shadowIntensity?n.shadowIntensity:i.shadowIntensity.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value};i.type=o.type,n.shadowEnabled.value&&(i.shadowEnabled=!0,n.shadowSize.isDefault()||(i.shadowSize=n.shadowSize.value),n.shadowBlur.isDefault()||(i.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(i.shadowResolution=r.Y[n.shadowResolution.value]),n.shadowIntensity.isDefault()||(i.shadowIntensity=n.shadowIntensity.value)),e.lights=e.lights||[];const s=e.lights.length;return e.lights.push(i),s}}o.typeName="CVDirectionalLight",o.type="directional",o.text="Directional Light",o.icon="sun"},2566:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(4640),r=n(3423),o=n(2997),s=n(8172),a=n(9616),l=n(3889);const c=[[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[1,0,0,0],[0,1,0,0],[0,0,1,0]],d=new i.Pq0(0,-1,0),u=new i.Zcv(d,.8);class h extends r.Ay{constructor(){super(...arguments),this.ins=this.addInputs(h.ins),this.plane=null,this.axisIndex=-1}get settingProperties(){return[this.ins.enabled,this.ins.color]}get snapshotProperties(){return[this.ins.enabled,this.ins.axis,this.ins.position,this.ins.inverted]}create(){super.create();const e=this.getGraphComponent(s.A);this.ins.boundingBox.linkFrom(e.outs.boundingBox),this.graph.components.on(a.A,this.onModelComponent,this)}dispose(){this.graph.components.off(a.A,this.onModelComponent,this),super.dispose()}update(e){const t=this.ins;if(t.axis.changed){const e=t.axis.getValidatedValue();e===this.axisIndex?t.inverted.setValue(!t.inverted.value):(t.inverted.setValue(!1),this.axisIndex=e)}if(!t.enabled.value&&!t.enabled.changed)return!1;const n=t.axis.getValidatedValue(),i=t.inverted.value,r=n+(i?3:0),o=this.ins.boundingBox.value;if(!o)return!0;this.plane=c[r];const s=o.min.getComponent(n),l=o.max.getComponent(n),h=1-t.position.value;this.plane[3]=i?h*(l-s)-l:l-h*(l-s);const p=this.getGraphComponents(a.A);return d.set(this.plane[0],this.plane[1],this.plane[2]),u.set(d,this.plane[3]),p.forEach(e=>{if(e.ins.slicerEnabled.value){e.object3D.traverse(t=>{if(t.isMesh){const n=t.material;this.updateMaterial(e,n)}})}}),!0}fromData(e){e=e||{},this.ins.setValues({enabled:e.enabled||!1,axis:o.Tm[e.axis]||o.Tm.X,position:e.position||0,inverted:e.inverted||!1,color:e.color||[0,.61,.87]})}toData(){const e=this.ins;return{enabled:e.enabled.value,axis:o.Tm[e.axis.getValidatedValue()],position:e.position.value,inverted:e.inverted.value,color:e.color.value}}updateMaterial(e,t){const n=this.ins;if(n.enabled.changed){const e=n.enabled.value;this.getMainComponent(l.A).views.forEach(e=>e.renderer.localClippingEnabled=n.enabled.value),t.defines.CUT_PLANE=e,(e||null==t.userData.sideCache)&&(t.userData.sideCache=t.side),t.side=e?i.$EB:t.userData.sideCache,e&&(t.clippingPlanes=[u])}t.userData.shader.uniforms.cutPlaneColor.value.fromArray(n.color.value)}onModelComponent(e){const t=e.object;e.add?(t.outs.variant.on("value",this.refreshMaterial,this),t.on("model-load",this.refreshMaterial,this)):e.remove&&(t.off("model-load",this.refreshMaterial,this),t.outs.variant.off("value",this.refreshMaterial,this))}refreshMaterial(){this.ins.enabled.set()}}h.typeName="CVSlicer",h.text="Slicer",h.icon="",h.ins={enabled:r.gK.Boolean("Slice.Enabled"),axis:r.gK.Enum("Slice.Axis",o.Tm),position:r.gK.Number("Slice.Position",{min:0,max:1,preset:.5}),inverted:r.gK.Boolean("Slice.Inverted"),color:r.gK.ColorRGB("Slice.Color",[0,.61,.87]),boundingBox:r.gK.Object("Scene.BoundingBox",i.NRn)}},2610:(e,t,n)=>{"use strict";let i=n(6613),r=n(301),o=n(7616),s=n(8093),a=n(7129),l=n(6216),c=n(8227),{isClean:d,my:u}=n(3963);n(4376);const h={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},p={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},m={Once:!0,postcssPlugin:!0,prepare:!0};function f(e){return"object"==typeof e&&"function"==typeof e.then}function g(e){let t=!1,n=h[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,0,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,0,n+"Exit"]:[n,n+"Exit"]}function v(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:g(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function y(e){return e[d]=!1,e.nodes&&e.nodes.forEach(e=>y(e)),e}let b={};class A{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(e,t,n){let r;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof A||t instanceof a)r=y(t.root),t.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=t.map);else{let e=s;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{r=e(t,n)}catch(e){this.processed=!0,this.error=e}r&&!r[u]&&i.rebuild(r)}else r=y(t);this.result=new a(e,r,n),this.helpers={...b,postcss:b,result:this.result},this.plugins=this.processor.plugins.map(e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let n=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?n.postcssVersion:(e.plugin=n.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,n)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,n])};for(let t of this.plugins)if("object"==typeof t)for(let n in t){if(!p[n]&&/^[A-Z]/.test(n))throw new Error(`Unknown event ${n} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!m[n])if("object"==typeof t[n])for(let i in t[n])e(t,"*"===i?n:n+"-"+i.toLowerCase(),t[n][i]);else"function"==typeof t[n]&&e(t,n,t[n])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],n=this.runOnRoot(t);if(f(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[d];){e[d]=!0;let t=[v(e)];for(;t.length>0;){let e=this.visitTick(t);if(f(e))try{await e}catch(e){let n=t[t.length-1].node;throw this.handleError(e,n)}}}if(this.listeners.OnceExit)for(let[t,n]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map(e=>n(e,this.helpers));await Promise.all(t)}else await n(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map(t=>e.Once(t,this.helpers));return f(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=c;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let n=new o(t,this.result.root,this.result.opts).generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(f(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[d];)e[d]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){let e;this.result.lastPlugin=n;try{e=i(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(f(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(i.length>0&&t.visitorIndex<i.length){let[e,r]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return r(n.toProxy(),this.helpers)}catch(e){throw this.handleError(e,n)}}if(0!==t.iterator){let i,r=t.iterator;for(;i=n.nodes[n.indexes[r]];)if(n.indexes[r]+=1,!i[d])return i[d]=!0,void e.push(v(i));t.iterator=0,delete n.indexes[r]}let r=t.events;for(;t.eventIndex<r.length;){let e=r[t.eventIndex];if(t.eventIndex+=1,0===e)return void(n.nodes&&n.nodes.length&&(n[d]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[d]=!0;let t=g(e);for(let n of t)if(0===n)e.nodes&&e.each(e=>{e[d]||this.walkSync(e)});else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}}A.registerPostcss=e=>{b=e},e.exports=A,A.default=A,l.registerLazyResult(A),r.registerLazyResult(A)},2617:(e,t,n)=>{"use strict";const i=n(1157),r=n(9633);i.path=r,e.exports=i},2641:(e,t,n)=>{n(2323)},2642:(e,t,n)=>{"use strict";var i=n(4640),r=n(6763),o=n(8337),s=n(5532),a=(n(9498),n(9521)),l=n(3198),c=n(3534),d=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const u=new s.Ay,h=new i.Pq0(0,0,0),p=new i.Pq0,m=new i.Pq0,f=new i.Pq0,g=new i.Pq0;class v extends a.Ay{constructor(e){super(e),this.adaptive=!0,this.offset=new i.YJl,this.offset.matrixAutoUpdate=!1,this.add(this.offset),this.anchorMesh=new i.eaF(new i.LoY,new i.V9B),this.anchorMesh.frustumCulled=!1,this.anchorMesh.matrixAutoUpdate=!1,this.offset.add(this.anchorMesh),this.update()}dispose(){var e,t;this.offset=null,null===(e=this.anchorMesh)||void 0===e||e.geometry.dispose(),(null===(t=this.anchorMesh)||void 0===t?void 0:t.material).dispose(),this.anchorMesh=null,super.dispose()}update(){const e=this.annotation.data;this.anchorMesh.scale.setScalar(e.scale),this.anchorMesh.position.y=e.offset,this.anchorMesh.updateMatrix(),super.update()}renderHTMLElement(e,t,n){super.renderHTMLElement(e,t,n,this.anchorMesh,h);const i=this.anchorMesh;p.set(0,0,0),p.applyMatrix4(i.modelViewMatrix),m.set(0,1,0),m.applyMatrix4(i.modelViewMatrix),f.copy(m).sub(p).normalize(),g.set(0,0,1),this.viewAngle=f.angleTo(g);const r=o.A.scaleLimit(this.viewAngle*o.A.RAD2DEG,90,100,1,0),s=this.annotation.data.visible?r:0;e.setOpacity(s);const a=this.annotation.data,l=a.visible;this.offset.visible=l,this.adaptive!==this.isAdaptive&&(this.isAdaptive||(e.truncated=!1,e.classList.remove("sv-short"),e.requestUpdate()),this.adaptive=this.isAdaptive),this.setVisible(!this.isBehindCamera(this.offset,n)&&l&&this.annotation.data.visible),this.getVisible()||e.setVisible(this.getVisible()),this.adaptive&&!this.isAnimating&&a.expanded&&(e.truncated||(e.classList.contains("sv-expanded")?(this.originalHeight=e.offsetHeight,this.originalWidth=e.offsetWidth):e.requestUpdate().then(()=>{this.originalHeight=e.offsetHeight,this.originalWidth=e.offsetWidth,this.checkTruncate(e,t)})),this.checkTruncate(e,t))}createHTMLElement(){return new y(this)}checkTruncate(e,t){e.getBoundingClientRect().left,t.left;const n=e.getBoundingClientRect().top-t.top+this.originalHeight>=t.height;n!==e.truncated?(e.truncated=n,e.requestUpdate().then(()=>{this.checkBounds(e,t)})):this.checkBounds(e,t)}checkBounds(e,t){const n=e.getBoundingClientRect().left-t.left,i=e.getBoundingClientRect().top-t.top;n+e.offsetWidth>=t.width&&!e.classList.contains("sv-align-right")?(e.classList.add("sv-align-right"),e.requestUpdate()):n+e.offsetWidth<t.width&&e.classList.contains("sv-align-right")&&(e.classList.remove("sv-align-right"),e.requestUpdate()),i+e.offsetHeight>=t.height&&!e.classList.contains("sv-align-bottom")?(e.classList.add("sv-align-bottom"),e.requestUpdate()):i+e.offsetHeight<t.height&&e.classList.contains("sv-align-bottom")&&(e.classList.remove("sv-align-bottom"),e.requestUpdate())}}v.typeName="Circle",l.A.registerType(v);let y=class extends a.sf{constructor(e){super(e),this.isExpanded=void 0,this.onClickMarker=this.onClickMarker.bind(this),this.onClickArticle=this.onClickArticle.bind(this),this.onClickAudio=this.onClickAudio.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownArticle=this.onKeyDownArticle.bind(this),this.onClickOverlay=this.onClickOverlay.bind(this),this.addEventListener("keydown",this.onKeyDown),this.markerElement=this.appendElement("div"),this.markerElement.classList.add("sv-marker"),this.markerElement.addEventListener("click",this.onClickMarker),this.markerElement.setAttribute("tabindex","0"),this.contentElement=this.appendElement("div"),this.contentElement.classList.add("sv-annotation-body"),this.contentElement.style.display="none"}setVisible(e){this.style.display=e?"flex":"none"}firstConnected(){super.firstConnected(),this.classList.add("sv-circle-annotation")}updated(e){super.updated(e);const t=this.sprite.annotation,n=t.data,i=!this.overlayed&&this.truncated&&(n.imageUri||n.articleId||t.lead.length>0),o=this.sprite.audioManager;this.markerElement.innerText=n.marker;const s=r.qy`
            ${this.isOverlayed?null:r.qy`<div class="sv-title">${t.title}</div>`}
            ${n.imageUri&&!i?r.qy`<div><img alt="${t.imageAltText}" src="${this.sprite.assetManager.getAssetUrl(n.imageUri)}">${t.imageCredit?r.qy`<div class="sv-img-credit">${t.imageCredit}</div>`:null}</div>`:null}
            ${i?null:r.qy`<div class="sv-content"><p>${(0,c._)(t.lead)}</p></div>`}
            ${n.audioId&&!this.isOverlayed?r.qy`<div id="audio_container" @pointerdown=${this.onClickAudio}></div>`:null}
            ${n.articleId&&!i?r.qy`<ff-button inline id="read-more" text="Read more..." icon="document" @keydown=${this.onKeyDownArticle} @pointerdown=${this.onClickArticle}></ff-button>`:null}
            ${i?r.qy`<ff-button inline id="more-info" text="+more info" @pointerdown=${this.onClickOverlay}></ff-button>`:null}`;if((0,r.XX)(s,this.contentElement),u.fromArray(n.color),this.markerElement.style.borderColor=u.toString(),this.isExpanded&&(this.contentElement.style.height="auto"),this.isExpanded!==n.expanded&&!this.overlayed)if(this.isExpanded=n.expanded,this.isExpanded){if(n.audioId){const e=this.querySelector("#audio_container");e.firstChild&&e.removeChild(e.firstChild),e.append(o.getPlayerById(n.audioId))}this.classList.add("sv-expanded"),this.contentElement.style.display="block",this.contentElement.style.height="auto"}else this.classList.remove("sv-expanded"),this.contentElement.style.display="none",o.activeId==n.audioId&&this.sprite.audioManager.stop();this.isExpanded&&(this.contentElement.style.removeProperty("transform"),this.classList.contains("sv-align-right")&&!this.overlayed&&(this.contentElement.style.transform=`translateX(-${this.offsetWidth}px)`),this.classList.contains("sv-align-bottom")&&!this.overlayed&&(this.contentElement.style.transform=`translateY(-${this.offsetHeight-this.markerElement.offsetHeight}px)`));const a=this.querySelector(".sv-audio-view");if(n.audioId&&!this.overlayed)if(n.expanded){const e=this.querySelector("#audio_container");a&&e.removeChild(a),e.append(o.getPlayerById(n.audioId))}else!n.expanded&&a&&o.activeId==n.audioId&&o.stop()}onClickMarker(e){this.contentElement.style.display="block",e.stopPropagation(),this.sprite.emitClickEvent()}onClickArticle(e){e.stopPropagation(),this.sprite.emitLinkEvent(this.sprite.annotation.data.articleId)}onClickOverlay(e){e.stopPropagation();const t=this.contentElement;this.overlayed=!0,this.showOverlay(t)}onClickAudio(e){e.stopPropagation()}onKeyDown(e){if("Space"===e.code||"Enter"===e.code){"more-info"===e.target.id?this.onClickOverlay(e):this.sprite.emitClickEvent()}}onKeyDownArticle(e){if("Space"===e.code||"Enter"===e.code){"read-more"===e.target.id&&this.onClickArticle(e)}}};y=d([(0,r.EM)("sv-circle-annotation")],y)},2645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(6241).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=i},2652:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var i=n(4640),r=n(3423),o=n(3889),s=n(2997),a=n(7297),l=n(9616),c=n(3350),d=n(8604),u=n(9337),h=n(2791),p=n(3051),m=n(1721);class f extends r.Ay{constructor(){super(...arguments),this._rootElement=null,this._needsAnnoFocus=!1,this.ins=this.addInputs(f.ins),this.outs=this.addOutputs(f.outs)}get settingProperties(){return[this.ins.annotationsVisible,this.ins.activeTags,this.ins.sortedTags,this.ins.radioTags,this.ins.shader,this.ins.toneMapping,this.ins.exposure,this.ins.gamma,this.ins.isWallMountAR,this.ins.arScale]}get snapshotProperties(){return[this.ins.annotationsVisible,this.ins.activeAnnotation,this.ins.activeTags,this.ins.shader,this.ins.variant,this.ins.exposure]}get analytics(){return this.getMainComponent(d.A)}get renderer(){return this.getMainComponent(o.A)}get ar(){return this.getMainComponent(h.A)}get rootElement(){return this._rootElement}set rootElement(e){this._rootElement=e}create(){super.create(),this.graph.components.on(l.A,this.onModelComponent,this),this.graph.components.on(c.A,this.onAnnotationsComponent,this),this.graph.components.on(u.A,this.onLanguageComponent,this),this.ar.ins.wallMount.linkFrom(this.ins.isWallMountAR),this.ar.ins.arScale.linkFrom(this.ins.arScale)}dispose(){this.graph.components.off(l.A,this.onModelComponent,this),this.graph.components.off(c.A,this.onAnnotationsComponent,this),this.graph.components.off(u.A,this.onLanguageComponent,this),super.dispose()}update(e){const t=this.ins;if(t.variant.changed){const e=t.variant.getOptionText();this.getGraphComponents(l.A).forEach(t=>{t.ins.variant.setOption(e)}),t.shader.setValue(0)}if(t.shader.changed){const e=t.shader.getValidatedValue();this.getGraphComponents(l.A).forEach(t=>t.ins.shader.setValue(e))}if(t.exposure.changed&&this.renderer.ins.exposure.setValue(t.exposure.value),t.toneMapping.changed){this.renderer.views.forEach(e=>e.renderer.toneMapping=t.toneMapping.value?i.aJ8:i.y_p);const e=this.renderer.activeScene;e&&e.traverse(e=>{const t=e;t.isMesh&&(Array.isArray(t.material)?t.material.forEach(e=>e.needsUpdate=!0):t.material.needsUpdate=!0)})}if(t.gamma.changed,t.quality.changed){const e=t.quality.getValidatedValue();this.getGraphComponents(l.A).forEach(t=>t.ins.quality.setValue(e))}if(t.activeAnnotation.changed){const e=t.activeAnnotation.value;this.getGraphComponents(c.A).forEach(t=>t.setActiveAnnotationById(e))}if(t.annotationExit.changed&&t.annotationsVisible.setValue(!1),t.annotationsVisible.changed){const e=t.annotationsVisible.value;this.getGraphComponents(c.A).forEach(t=>t.ins.visible.setValue(e));const n=this.getGraphComponent(m.A);if(n&&t.annotationFocus.value){const e=n.tours.ins;this._needsAnnoFocus=t.annotationsVisible.value&&!e.enabled.value,t.annotationFocus.setValue(!1)}}if(t.activeTags.changed){const e=t.activeTags.value;this.getGraphComponents(c.A).forEach(t=>t.ins.activeTags.setValue(e)),this.getGraphComponents(l.A).forEach(t=>t.ins.activeTags.setValue(e))}return t.sortedTags.changed&&this.refreshTagCloud(),!0}tock(){if(this._needsAnnoFocus){let e=null;if(this.outs.tagCloud.value.length>0){e=this.rootElement.shadowRoot.querySelector(".sv-tag-buttons").getElementsByClassName("ff-button")[0]}else{e=this.rootElement.shadowRoot.querySelector("ff-viewport-overlay").querySelector('[tabindex="0"]')}e&&e.focus(),this._needsAnnoFocus=!1}return!1}fromData(e){const t=this.ins;t.copyValues({shader:s.gw[e.shader]||s.gw.Default,exposure:void 0!==e.exposure?e.exposure:t.exposure.schema.preset,toneMapping:e.toneMapping||!1,gamma:void 0!==e.gamma?e.gamma:t.gamma.schema.preset,isWallMountAR:e.isWallMountAR||!1,arScale:e.arScale||1,annotationsVisible:!!e.annotationsVisible,activeTags:e.activeTags||"",sortedTags:e.sortedTags||"",radioTags:void 0!==e.radioTags?!!e.radioTags:t.radioTags.schema.preset})}toData(){const e=this.ins,t={shader:s.gw[e.shader.value],exposure:e.exposure.value,toneMapping:e.toneMapping.value,gamma:e.gamma.value,isWallMountAR:e.isWallMountAR.value,arScale:e.arScale.value};return e.annotationsVisible.value&&(t.annotationsVisible=!0),e.activeTags.value&&(t.activeTags=e.activeTags.value),e.sortedTags.value&&(t.sortedTags=e.sortedTags.value),e.radioTags.value&&(t.radioTags=e.radioTags.value),t}refreshTagCloud(){const e=new Set;this.getGraphComponents(l.A).forEach(t=>{t.ins.tags.value.split(",").map(e=>e.trim()).filter(e=>e).forEach(t=>e.add(t))});this.getGraphComponents(c.A).forEach(t=>{t.getAnnotations().forEach(t=>{t.tags.forEach(t=>{e.add(t)})})});const t=Array.from(e),n=this.ins.sortedTags.value.split(",").map(e=>e.trim()).filter(e=>e);t.sort((e,t)=>{const i=n.indexOf(e),r=n.indexOf(t);return i<r?-1:i>r?1:0}),this.outs.tagCloud.setValue(t.join(", ")),this.ins.activeTags.set(),this.ins.annotationsVisible.set()}onAnnotationClick(e){const t=e.annotation?e.annotation.id:"";this.ins.activeAnnotation.setValue(t),this.rootElement.dispatchEvent(new CustomEvent("annotation-active",{detail:t}))}onModelComponent(e){const t=e.object;e.add?(t.on("tag-update",this.refreshTagCloud,this),t.on("model-load",this.onModelLoad,this)):e.remove&&(t.off("tag-update",this.refreshTagCloud,this),t.off("model-load",this.onModelLoad,this))}onAnnotationsComponent(e){const t=e.object;e.add?(t.on("tag-update",this.refreshTagCloud,this),t.on("active-tag-update",this.focusTags,this),t.on("click",this.onAnnotationClick,this),t.ins.visible.setValue(this.ins.annotationsVisible.value)):e.remove&&(t.off("tag-update",this.refreshTagCloud,this),t.off("active-tag-update",this.focusTags,this),t.off("click",this.onAnnotationClick,this))}onLanguageComponent(e){const t=e.object;e.add?t.on("tag-update",this.refreshTagCloud,this):e.remove&&t.off("tag-update",this.refreshTagCloud,this)}onModelLoad(e){this.rootElement.dispatchEvent(new CustomEvent("model-load",{detail:a.a9[e.quality]})),this.refreshTagCloud();const t=new Set(this.ins.variant.schema.options);this.getGraphComponents(l.A).forEach(e=>{e.ins.variant.schema.options.forEach(t.add,t)}),this.ins.variant.setOptions([...t])}focusTags(){const e=this.ins,t=this.getGraphComponent(m.A);if(t&&t.tours.ins.enabled.value)return;const n=this.rootElement.shadowRoot.querySelector("ff-viewport-overlay"),i=(0,p.R)(n);e.annotationFocus.value&&i.length>0&&(i[0].focus(),e.annotationFocus.setValue(!1))}}f.typeName="CVViewer",f.text="Viewer",f.icon="",f.ins={annotationsVisible:r.gK.Boolean("Annotations.Visible"),annotationExit:r.gK.Event("Annotations.Exit"),annotationFocus:r.gK.Boolean("Annotations.Focus",!1),activeAnnotation:r.gK.String("Annotations.ActiveId"),activeTags:r.gK.String("Tags.Active"),sortedTags:r.gK.String("Tags.Sorted"),radioTags:r.gK.Boolean("Tags.Radio"),shader:r.gK.Enum("Renderer.Shader",s.gw),variant:r.gK.Option("Renderer.Variant",[],0),toneMapping:r.gK.Boolean("Renderer.ToneMapping",!1),exposure:r.gK.Number("Renderer.Exposure",1),gamma:r.gK.Number("Renderer.Gamma",2),quality:r.gK.Enum("Models.Quality",a.a9,a.a9.High),isWallMountAR:r.gK.Boolean("AR.IsWallMount",!1),arScale:r.gK.Number("AR.Scale",1)},f.outs={tagCloud:r.gK.String("Tags.Cloud")}},2654:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,Gz:()=>i,P:()=>r});var i,r,o=n(3074),s=n(9163),a=n(8424),l=n(5676),c=n(2997),d=n(8172),u=n(161),h=n(2791);!function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Front=4]="Front",e[e.Back=5]="Back",e[e.None=6]="None"}(i||(i={})),function(e){e[e.Orbit=0]="Orbit",e[e.Zoom=1]="Zoom",e[e.Pan=2]="Pan"}(r||(r={}));const p=[];p[i.Left]=[0,-90,0],p[i.Right]=[0,90,0],p[i.Front]=[0,0,0],p[i.Back]=[0,180,0],p[i.Top]=[-90,0,0],p[i.Bottom]=[90,0,0];const m=function(e,t){for(let n=0,i=e.length;n<i;++n)e[n]=null===e[n]?t:e[n];return e};class f extends o.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(f.ins),this._controller=new s.A,this._scene=null,this._modelBoundingBox=null,this._hasChanged=!1,this._hasZoomed=!1,this._isAutoZooming=!1,this._autoRotationStartTime=null,this._initYOrbit=null,this._scene=this.scene}get settingProperties(){return[this.ins.enabled,this.ins.mode,this.ins.orbit,this.ins.offset,this.ins.autoZoom,this.ins.autoRotation,this.ins.autoRotationSpeed,this.ins.lightsFollowCamera,this.ins.minOrbit,this.ins.minOffset,this.ins.maxOrbit,this.ins.maxOffset]}get snapshotProperties(){return[this.ins.orbit,this.ins.offset]}get assetManager(){return this.getMainComponent(u.A)}get sceneNode(){return this.getSystemComponent(d.A)}get arManager(){return this.getSystemComponent(h.A)}create(){super.create(),this.system.on(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.system.on("wheel",this.onTrigger,this),this.system.on("keydown",this.onKeyboard,this),this.assetManager.outs.completed.on("value",this.onLoadingCompleted,this),this.sceneNode.outs.boundingRadius.on("value",this.onBoundsChange,this)}dispose(){this.sceneNode.outs.boundingRadius.on("value",this.onBoundsChange,this),this.assetManager.outs.completed.off("value",this.onLoadingCompleted,this),this.system.off(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.system.off("wheel",this.onTrigger,this),this.system.off("keydown",this.onKeyboard,this),super.dispose()}update(){const e=this.ins,t=this._controller,n=this._scene.activeCameraComponent,r=n?n.camera:null,{projection:o,preset:l,orbit:u,offset:h}=e;if(n&&o.changed&&(r.setProjection(o.getValidatedValue()),n.ins.projection.setValue(o.value,!0),r.isOrthographicCamera||(r.size=n.ins.size.value,r.far=n.ins.far.value,r.updateProjectionMatrix())),l.changed&&l.value!==i.None&&u.setValue(p[l.getValidatedValue()].slice()),e.mode.changed)switch(e.mode.value){case c.Kd.Orbit:t.controllerMode=s.d.Orbit;break;case c.Kd.Fly:t.controllerMode=s.d.Fly;break;case c.Kd.Walk:t.controllerMode=s.d.Walk}if(e.lightsFollowCamera.changed){const t=this.getLightTransform();t&&(e.lightsFollowCamera.value?(t.ins.order.setValue(a.I8.ZXY),t.ins.rotation.reset(),t.ins.rotation.linkFrom(u,1,1)):(t.ins.rotation.unlinkFrom(u,1,1),t.ins.rotation.reset()))}const{minOrbit:m,minOffset:f,maxOrbit:g,maxOffset:v}=e;if((u.changed||h.changed)&&(t.orbit.fromArray(u.value),t.offset.fromArray(h.value)),(m.changed||f.changed||g.changed||v.changed)&&(t.minOrbit.fromArray(m.value),t.minOffset.fromArray(f.value),t.maxOrbit.fromArray(g.value),t.maxOffset.fromArray(v.value)),r&&e.zoomExtents.changed){const e=this.getGraphComponent(d.A);e.models.some(e=>e.outs.updated.changed)&&e.update(null),this._modelBoundingBox=e.outs.boundingBox.value,(!this._isAutoZooming||this.ins.autoZoom.value&&!this._modelBoundingBox.isEmpty())&&(t.camera&&(n.camera.aspect=t.camera.aspect),t.camera=n.camera,t.zoomExtents(this._modelBoundingBox),this._hasZoomed=!0),this._isAutoZooming=!1}return e.autoRotation.changed&&(this._autoRotationStartTime=e.autoRotation.value?performance.now():null),e.promptActive.changed&&!this._autoRotationStartTime&&(this._initYOrbit=t.orbit.y,this._autoRotationStartTime=e.promptActive.value?performance.now():null),!0}tick(){const e=this.ins,t=this._scene.activeCameraComponent;if(!e.enabled.value||!t)return;t.ins.projection.value!=e.projection.value&&e.projection.setValue(t.ins.projection.value);const n=this._controller;n.camera=t.camera;const r=t.transform,o=this.changed||e.autoRotation.value||e.promptActive.value;if((e.autoRotation.value||e.promptActive.value)&&this._autoRotationStartTime){const t=performance.now(),i=.001*(t-this._autoRotationStartTime);if(e.autoRotation.value)n.orbit.y=(n.orbit.y+e.autoRotationSpeed.value*i)%360,this._autoRotationStartTime=t;else{const e=this.arManager.shadowRoot.getElementById("prompt");if(e){const t=2,r=1.5,o=2*r,s=.2*r;let a=i%(o+t);a>o&&a<o+t?(e.style.opacity=a<o+s?""+(1-(a-o)/s):"0.0",a=0):a<s&&(e.style.opacity=a<s?""+a/s:"1.0");const l=20*Math.sin(a/r*Math.PI);n.orbit.y=this._initYOrbit+l,e.style.transform=`translateX(${-4*l}px)`}}}return!!n.updateCamera(r.object3D,o)&&(n.orbit.toArray(e.orbit.value),e.orbit.set(!0),n.offset.toArray(e.offset.value),e.offset.set(!0),e.preset.value===i.None||e.preset.changed||e.preset.setValue(i.None,!0),!e.isInUse.value&&this._hasChanged&&e.isInUse.setValue(!0),r?r.setPropertiesFromMatrix():t.setPropertiesFromMatrix(),!0)}preRender(e){this._modelBoundingBox&&e.viewport.zoomExtents(this._modelBoundingBox)}setChanged(e){this._hasChanged=e}tock(){return this._modelBoundingBox=null,!1}fromData(e){const t=(e=e||{}).orbit||{orbit:[-25,-25,0],offset:[0,0,100],minOrbit:[-90,-1/0,-1/0],minOffset:[-1/0,-1/0,.1],maxOrbit:[90,1/0,1/0],maxOffset:[1/0,1/0,1/0]};this.ins.copyValues({enabled:!!e.enabled,autoZoom:!!e.autoZoom,autoRotation:!!e.autoRotation,lightsFollowCamera:!!e.lightsFollowCamera,mode:c.Kd[e.type]||c.Kd.Orbit,orbit:t.orbit,offset:t.offset,minOrbit:m(t.minOrbit,-1/0),maxOrbit:m(t.maxOrbit,1/0),minOffset:m(t.minOffset,-1/0),maxOffset:m(t.maxOffset,1/0)})}toData(){const e=this.ins,t={};return t.enabled=e.enabled.value,t.autoZoom=e.autoZoom.value,t.autoRotation=e.autoRotation.value,t.lightsFollowCamera=e.lightsFollowCamera.value,t.type=c.Kd[e.mode.value],t.orbit={orbit:e.orbit.cloneValue(),offset:e.offset.cloneValue(),minOrbit:e.minOrbit.cloneValue(),maxOrbit:e.maxOrbit.cloneValue(),minOffset:e.minOffset.cloneValue(),maxOffset:e.maxOffset.cloneValue()},t}getLightTransform(){const e=this.graph.findNodeByName("Lights");return e&&e.getComponent(a.Ay,!0)}onPointer(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&("pointer-down"===e.type&&"None"!==window.getSelection().type&&window.getSelection().removeAllRanges(),this._controller.setViewportSize(t.width,t.height),this._controller.onPointer(e),e.stopPropagation=!0),this._hasChanged=!0)}onTrigger(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&(this._controller.setViewportSize(t.width,t.height),this._controller.onTrigger(e),e.stopPropagation=!0),this._hasChanged=!0)}onKeyboard(e){const t=e.viewport;t.camera||(this.ins.enabled.value&&this._scene.activeCameraComponent&&(e.key.includes("Arrow")&&(e.ctrlKey?this.ins.keyNavActive.setValue(r.Zoom):e.shiftKey?this.ins.keyNavActive.setValue(r.Pan):this.ins.keyNavActive.setValue(r.Orbit)),this._controller.setViewportSize(t.width,t.height),this._controller.onKeypress(e)&&e.originalEvent.preventDefault(),e.stopPropagation=!0),this._hasChanged=!0)}onLoadingCompleted(e){!this.ins.autoZoom.value||this._hasChanged&&this._hasZoomed||(this.ins.zoomExtents.set(),this._isAutoZooming=!0)}onBoundsChange(){this._controller.boundsRadius=this.sceneNode.outs.boundingRadius.value}}f.typeName="CVOrbitNavigation",f.text="Orbit Navigation",f.icon="",f.ins={enabled:o.gK.Boolean("Settings.Enabled",!0),pointerEnabled:o.gK.Boolean("Settings.PointerEnabled",!0),promptEnabled:o.gK.Boolean("Settings.PromptEnabled",!0),isInUse:o.gK.Boolean("Camera.IsInUse",!1),preset:o.gK.Enum("Camera.ViewPreset",i,i.None),projection:o.gK.Enum("Camera.Projection",l.$R,l.$R.Perspective),lightsFollowCamera:o.gK.Boolean("Navigation.LightsFollowCam",!0),autoRotation:o.gK.Boolean("Navigation.AutoRotation",!1),autoRotationSpeed:o.gK.Number("Navigation.AutoRotationSpeed",10),mode:o.gK.Enum("Navigation.Mode",c.Kd,c.Kd.Orbit),zoomExtents:o.gK.Event("Settings.ZoomExtents"),autoZoom:o.gK.Boolean("Settings.AutoZoom",!0),orbit:o.gK.Vector3("Current.Orbit",[-25,-25,0]),offset:o.gK.Vector3("Current.Offset",[0,0,100]),minOrbit:o.gK.Vector3("Limits.Min.Orbit",[-90,-1/0,-1/0]),minOffset:o.gK.Vector3("Limits.Min.Offset",[-1/0,-1/0,.1]),maxOrbit:o.gK.Vector3("Limits.Max.Orbit",[90,1/0,1/0]),maxOffset:o.gK.Vector3("Limits.Max.Offset",[1/0,1/0,1/0]),keyNavActive:o.gK.Enum("Navigation.KeyNavActive",r),promptActive:o.gK.Boolean("Navigation.PromptActive",!1)}},2669:(e,t,n)=>{var i=n(7904).isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||i(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},2690:(e,t,n)=>{"use strict";n.d(t,{My:()=>s,kp:()=>o});const i=Math.PI,r=.5*i;var o;function s(e){return a[o[e]]}!function(e){e[e.Linear=0]="Linear",e[e.EaseQuad=1]="EaseQuad",e[e.EaseInQuad=2]="EaseInQuad",e[e.EaseOutQuad=3]="EaseOutQuad",e[e.EaseCubic=4]="EaseCubic",e[e.EaseInCubic=5]="EaseInCubic",e[e.EaseOutCubic=6]="EaseOutCubic",e[e.EaseQuart=7]="EaseQuart",e[e.EaseInQuart=8]="EaseInQuart",e[e.EaseOutQuart=9]="EaseOutQuart",e[e.EaseQuint=10]="EaseQuint",e[e.EaseInQuint=11]="EaseInQuint",e[e.EaseOutQuint=12]="EaseOutQuint",e[e.EaseSine=13]="EaseSine",e[e.EaseInSine=14]="EaseInSine",e[e.EaseOutSine=15]="EaseOutSine"}(o||(o={}));const a={Linear:function(e){return e},EaseQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},EaseInQuad:function(e){return e*e},EaseOutQuad:function(e){return e*(2-e)},EaseCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},EaseInCubic:function(e){return e*e*e},EaseOutCubic:function(e){return--e*e*e+1},EaseQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},EaseInQuart:function(e){return e*e*e*e},EaseOutQuart:function(e){return 1- --e*e*e*e},EaseQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},EaseInQuint:function(e){return e*e*e*e*e},EaseOutQuint:function(e){return 1+--e*e*e*e*e},EaseSine:function(e){return-.5*(Math.cos(e*i)-1)},EaseInSine:function(e){return 1-Math.cos(e*r)},EaseOutSine:function(e){return Math.sin(e*r)}}},2704:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{static makeZeros(){return new i(0,0)}static makeOnes(){return new i(1,1)}static makeUnitX(){return new i(1,0)}static makeUnitY(){return new i(0,1)}static makeCopy(e){return new i(e.x,e.y)}static makeFromScalar(e){return new i(e,e)}static makeFromArray(e){return new i(e[0],e[1])}static toString(e){return`[${e.x}, ${e.y}]`}constructor(e,t){this.x=e||0,this.y=t||0}copy(e){return this.x=e.x,this.y=e.y,this}set(e,t){return this.x=e,this.y=t,this}setFromScalar(e){return this.x=e,this.y=e,this}setFromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}setZeros(){return this.x=0,this.y=0,this}setOnes(){return this.x=1,this.y=1,this}setUnitX(){return this.x=1,this.y=0,this}setUnitY(){return this.x=0,this.y=1,this}add(e){return this.x+=e.x,this.y+=e.y,this}sub(e){return this.x-=e.x,this.y-=e.y,this}mul(e){return this.x*=e.x,this.y*=e.y,this}div(e){return this.x/=e.x,this.y/=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}subScalar(e){return this.x-=e,this.y-=e,this}mulScalar(e){return this.x*=e,this.y*=e,this}divScalar(e){return this.x/=e,this.y/=e,this}translate(e,t){return this.x+=e,this.y+=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.x,r=this.y;return this.x=t*i-n*r,this.y=n*i+t*r,this}scale(e,t){return this.x*=e,this.y*=t,this}invert(){return this.x=1/this.x,this.y=1/this.y,this}negate(){return this.x=-this.x,this.y=-this.y,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y);return this.x*=e,this.y*=e,this}dot(e){return this.x*e.x+this.y*e.y}length(){const e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}lengthSquared(){const e=this.x,t=this.y;return e*e+t*t}distanceTo(e){const t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)}angle(){return Math.atan2(this.y,this.x)}angleTo(e){const t=this.x,n=this.y,i=e.x,r=e.y;return Math.acos((t*i+n*r)/(Math.sqrt(t*t+n*n)+Math.sqrt(i*i+r*r)))}min(){return this.x<this.y?this.x:this.y}max(){return this.x>this.y?this.x:this.y}isZero(){return 0===this.x&&0===this.y}clone(){return new i(this.x,this.y)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e):[this.x,this.y]}toString(){return i.toString(this)}}i.zeros=new i(0,0),i.ones=new i(1,1),i.unitX=new i(1,0),i.unitY=new i(0,1)},2709:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i,r=n(6763),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=i=class extends r.Ay{constructor(){super(),this.direction="horizontal",this.width=5,this.margin=20,this.detached=!1,this._isActive=!1,this._offset=0,this._position=0,this.addEventListener("pointerdown",e=>this.onPointerDown(e)),this.addEventListener("pointermove",e=>this.onPointerMove(e)),this.addEventListener("pointerup",e=>this.onPointerUpOrCancel(e)),this.addEventListener("pointercancel",e=>this.onPointerUpOrCancel(e))}get position(){return this._position}isHorizontal(){return"horizontal"===this.direction}update(e){super.update(e);const t=this.isHorizontal(),n=this.width;this.setStyle({padding:t?`0 ${n}px`:`${n}px 0`,margin:t?`0 ${-n}px`:-n+"px 0",cursor:t?"col-resize":"row-resize"})}firstUpdated(){this.classList.add("ff-splitter"),this.setAttribute("touch-action","none"),this.setStyle({position:"relative",display:"block",zIndex:"1",touchAction:"none"})}onPointerDown(e){if(e.isPrimary){e.stopPropagation(),e.preventDefault(),this._isActive=!0,this.setPointerCapture(e.pointerId);const t=this.getBoundingClientRect();this._offset=this.isHorizontal()?t.left+.5*t.width-e.clientX:t.top+.5*t.height-e.clientY}}onPointerMove(e){if(e.isPrimary&&this._isActive){e.stopPropagation(),e.preventDefault();const t=this.parentElement;if(!t)return;const n=t.getBoundingClientRect(),r=this.isHorizontal(),o=r?n.width:n.height;let s=this._offset+(r?e.clientX-n.left:e.clientY-n.top),a=s/o;if(!this.detached){const e=this.previousElementSibling,n=this.nextElementSibling;if(e instanceof HTMLElement&&n instanceof HTMLElement){const l=Array.from(t.children);let c=0,d=o,u=!1;l.forEach(t=>{if(t instanceof i)return;if(t===e||t===n)return void(u=!0);const o=t.getBoundingClientRect(),s=r?o.width:o.height;d-=s,u||(c+=s)});const h=this.margin,p=d-h;s-=c,s=s<h?h:s>p?p:s;const m=(d-s)/o;a=s/o,e.style.flexBasis=(100*a).toFixed(3)+"%",n.style.flexBasis=(100*m).toFixed(3)+"%",setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),0)}}this._position=a,this.dispatchEvent(new CustomEvent(i.changeEvent,{detail:{direction:this.direction,position:this._position,isDragging:!0}}))}}onPointerUpOrCancel(e){e.isPrimary&&(e.preventDefault(),this._isActive=!1,this._position>0&&(e.stopPropagation(),this.dispatchEvent(new CustomEvent(i.changeEvent,{detail:{direction:this.direction,position:this._position,isDragging:!1}}))))}};s.changeEvent="ff-splitter-change",o([(0,r.MZ)({type:String})],s.prototype,"direction",void 0),o([(0,r.MZ)({type:Number})],s.prototype,"width",void 0),o([(0,r.MZ)({type:Number})],s.prototype,"margin",void 0),o([(0,r.MZ)({type:Boolean})],s.prototype,"detached",void 0),s=i=o([(0,r.EM)("ff-splitter")],s);const a=s},2719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var i,r,o=n(9585),s=n(3657),a=n(2948);function l(e,t){if(void 0===t&&(t=i.XML),("number"==typeof t?t:t.level)===i.HTML){var n="object"==typeof t?t.mode:void 0;return(0,o.decodeHTML)(e,n)}return(0,o.decodeXML)(e)}!function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(i=t.EntityLevel||(t.EntityLevel={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(r=t.EncodingMode||(t.EncodingMode={})),t.decode=l,t.decodeStrict=function(e,t){var n;void 0===t&&(t=i.XML);var r="number"==typeof t?{level:t}:t;return null!==(n=r.mode)&&void 0!==n||(r.mode=o.DecodingMode.Strict),l(e,r)},t.encode=function(e,t){void 0===t&&(t=i.XML);var n="number"==typeof t?{level:t}:t;return n.mode===r.UTF8?(0,a.escapeUTF8)(e):n.mode===r.Attribute?(0,a.escapeAttribute)(e):n.mode===r.Text?(0,a.escapeText)(e):n.level===i.HTML?n.mode===r.ASCII?(0,s.encodeNonAsciiHTML)(e):(0,s.encodeHTML)(e):(0,a.encodeXML)(e)};var c=n(2948);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var d=n(3657);Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var u=n(9585);Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return u.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return u.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return u.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return u.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return u.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return u.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return u.decodeXML}})},2722:(e,t,n)=>{var i=n(7038),r=n(3207),o=n(1864),s=n(4357);e.exports={xml2js:i,xml2json:r,js2xml:o,json2xml:s}},2791:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(3423),r=n(3889),o=n(8424),s=n(9309),a=n(6773),l=n(4640),c=n(3715),d=n(8172),u=n(1721),h=n(3675),p=n(1572),m=n(9616),f=n(161);class g extends l.ZyN{constructor(e,t,n){super(),this.shadowMaterial=new l.q2,this.boundingBox=new l.NRn,this.size=new l.Pq0,this.isAnimated=!1,this.needsUpdate=!1,this.intensity=0,this.castShadow=!0,this.frustumCulled=!1,this.floor=new l.eaF(new l.bdM,this.shadowMaterial),this.floor.rotateX(-Math.PI/2),this.floor.receiveShadow=!0,this.floor.castShadow=!1,this.floor.frustumCulled=!1,this.add(this.floor),this.shadow.camera.up.set(0,0,1),t.add(this),this.target=t,this.setModel(e,n)}setModel(e,t){this.boundingBox.copy(e.outs.boundingBox.value),e.outs.boundingBox.value.getSize(this.size);const{boundingBox:n,size:i}=this;if(this.isAnimated){const e=2*Math.max(i.x,i.y,i.z);i.y=e,n.expandByVector(i.subScalar(e).multiplyScalar(-.5)),n.max.y=n.min.y+e,i.set(e,e,e)}const r=.001*i.y;this.position.y=n.max.y+r,n.getCenter(this.floor.position),this.setSoftness(t)}setSoftness(e){const t=Math.pow(2,9-3*e);this.setMapSize(t)}setMapSize(e){const{camera:t,mapSize:n,map:i}=this.shadow,{size:r,boundingBox:o}=this;null!=i&&(i.dispose(),this.shadow.map=null),this.isAnimated&&(e*=2);const s=Math.floor(r.x>r.z?e:e*r.x/r.z),a=Math.floor(r.x>r.z?e*r.z/r.x:e);n.set(s,a);const l=2.5*r.x/s,c=2.5*r.z/a;t.left=-o.max.x-l,t.right=-o.min.x+l,t.bottom=o.min.z-c,t.top=o.max.z+c,this.setScaleAndOffset(t.zoom,0),this.shadow.updateMatrices(this),this.floor.scale.set(r.x+2*l,r.z+2*c,1),this.needsUpdate=!0}setIntensity(e){this.shadowMaterial.opacity=e,e>0?(this.visible=!0,this.floor.visible=!0):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.shadowMaterial.opacity}setRotation(e){this.shadow.camera.up.set(Math.sin(e),0,Math.cos(e)),this.shadow.updateMatrices(this)}setScaleAndOffset(e,t){const n=this.size.y,i=1/e,r=.001*n;this.floor.position.y=2*r-n+t*i;const{camera:o}=this.shadow;o.zoom=e,o.near=0,o.far=n*e-t,o.projectionMatrix.makeOrthographic(o.left*e,o.right*e,o.top*e,o.bottom*e,o.near,o.far),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),this.shadow.updateMatrices(this)}updateMatrices(){this.shadow.updateMatrices(this)}dispose(){const{floor:e,shadowMaterial:t}=this;e.geometry.dispose(),t.dispose(),this.floor=null,this.shadowMaterial=null}}var v=n(2552),y=n(2997),b=n(8604),A=n(8313);const _=new l.kn4,w=new l.Pq0,x=new l.I9Y,C=new l.Pq0,E=new l.NRn,M=new l.PTz;class S extends i.Ay{constructor(){super(...arguments),this._shadowRoot=null,this._arCodeImage=null,this.ins=this.addInputs(S.ins),this.outs=this.addOutputs(S.outs),this.arLink=document.createElement("a"),this.raycaster=new l.tBo,this.initialHitTestSource=null,this.inputSource=null,this.transientHitTestSource=null,this.refSpace=null,this.frame=null,this.vScene=null,this.camera=null,this.cameraParent=null,this.cachedView=null,this.cachedQuality=null,this.cachedNearPlane=0,this.cachedFarPlane=0,this.xrCamera=null,this.hitPlane=null,this.selectionRing=null,this.session=null,this.setup=null,this.originalUnits=null,this.isTranslating=!1,this.isRotating=!1,this.isScaling=!1,this.lastDragValueX=0,this.lastDragValueY=0,this.totalDrag=0,this.lastScale=0,this.lastHitPosition=new l.Pq0,this.lastFrameTime=0,this.targetOpacity=0,this.modelFloorOffset=0,this.optimalCameraDistance=0,this.shadow=null,this.lightTransform=null,this.lightsToReset=[],this.featuresToReset=[],this.annotationsAtLaunch=!1,this.scaleDisplay=null,this.updateScale=!1,this.placementRotation=new l.PTz,this.onSessionEnded=()=>{this.outs.isPresenting.setValue(!1);const e=this.renderer.views[0].renderer;this.resetScene(),e.shadowMap.autoUpdate=!0;const t=this.initialHitTestSource;null!=t&&(t.cancel(),this.initialHitTestSource=null);const n=this.transientHitTestSource;null!=n&&(n.cancel(),this.transientHitTestSource=null),this.refSpace=null,this.frame=null,this.inputSource=null,this.xrCamera=null,this.cachedView=null,this.vScene=null,this.cachedView=null,this.camera=null;const i=this.session;i&&(i.removeEventListener("end",this.onSessionEnded),i.removeEventListener("selectstart",this.onSelectStart),i.removeEventListener("selectend",this.onSelectEnd),this.session=null),this.setup.reader.ins.enabled.off("value",this.endSession,this),e.setAnimationLoop(null),e.xr.enabled=!1,this.outs.isPlaced.setValue(!1),this.setup.navigation.ins.enabled.setValue(!0),this.renderer.views[0].render()},this.render=(e,t)=>{this.frame=t;const n=this.renderer.views[0].renderer,{camera:i,xrCamera:r,refSpace:o,initialHitTestSource:s,vScene:a,sceneNode:l,shadow:c,lastFrameTime:d}=this;if(!t||!t.getViewerPose(o))return;if(!r&&this.session){const e=n.xr.getCamera();return void(this.xrCamera=e.cameras[0])}if(r&&(n.xr.updateCamera(i),i.updateMatrixWorld(!0),i.projectionMatrix.fromArray(r.projectionMatrix.elements),i.projectionMatrixInverse.copy(r.projectionMatrix).invert()),null!=s&&r){const e=a.scene,{position:t}=e,n=2*l.outs.boundingRadius.value+r.near;r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const o=i.getWorldDirection(w);e.rotation.y=Math.atan2(-o.x,-o.z),t.copy(i.position).add(o.multiplyScalar(n)),this.shadow.setRotation(e.rotation.y),e.updateMatrix(),e.updateMatrixWorld()}if(this.setInitialPosition(t),this.handleInput(t),this.outs.isPlaced.value){const t=e-d;this.updateOpacity(t,this.targetOpacity),this.lastFrameTime=e}const u=n.getContext();if(u.depthMask(!1),u.clear(u.DEPTH_BUFFER_BIT),u.depthMask(!0),c.needsUpdate&&(n.shadowMap.needsUpdate=!0,c.needsUpdate=!1),this.updateScale){const e=a.scene,t=this.scaleDisplay;w.copy(e.position);const n=this.renderer.views[0].viewports[0].width,i=this.renderer.views[0].viewports[0].height,o=n/2,s=i/2,l=n-t.clientWidth,c=i-t.clientHeight;w.project(r),w.x=Math.min(Math.max(w.x*o+o,0),l),w.y=Math.min(Math.max(-w.y*s+s,0),c),t.style.left=w.x.toString()+"px",t.style.top=w.y.toString()+"px",t.innerText=Math.round(100*e.scale.x).toString()+"%"}n.render(a.scene,i)},this.onSelectStart=e=>{const t=this.vScene.scene,n=this.transientHitTestSource;if(null==n)return;this.targetOpacity=.5;const i=this.frame.getHitTestResultsForTransientInput(n);if(1===i.length){this.inputSource=e.inputSource;const{axes:t}=this.inputSource.gamepad,n=this.raycaster;x.set(t[0],-t[1]),n.setFromCamera(x,this.xrCamera);const i=n.intersectObject(this.hitPlane);i.length>0?(this.isTranslating=!0,this.lastHitPosition.copy(i[0].point)):!1===this.ins.wallMount.value&&(this.isRotating=!0),this.lastDragValueX=t[0],this.lastDragValueY=t[1]}else 2===i.length&&(this.isScaling=!0,this.lastScale=this.getFingerSeparation(i)/t.scale.x)},this.onSelectEnd=()=>{this.targetOpacity=0,this.totalDrag=0,this.isTranslating=!1,this.isRotating=!1,this.isScaling=!1,this.scaleDisplay.classList.remove("sv-show"),this.inputSource=null}}get renderer(){return this.getMainComponent(r.A)}get pulse(){return this.getMainComponent(s.A)}get sceneNode(){return this.getSystemComponent(d.A)}get analytics(){return this.system.getMainComponent(b.A)}get assetManager(){return this.getMainComponent(f.A)}get shadowRoot(){return this._shadowRoot}set shadowRoot(e){this._shadowRoot=e}get arCodeImage(){const e=document.documentURI;if(null==this._arCodeImage&&e.includes(".si.edu")&&e.includes("3d-api")){const t=e.split("/").pop().split(":").pop();36==t.length&&(this._arCodeImage="https://3d-api.si.edu/voyager/"+t+"/qrcode")}return this._arCodeImage}create(){super.create(),this.system.components.on(A.A,this.onMetaComponent,this)}dispose(){this.system.components.off(A.A,this.onMetaComponent,this),super.dispose()}update(){const{ins:e,outs:t}=this;if(e.enabled.changed){let n=e.enabled.value;n&&(c.al?(this.launchWebXR(),this.analytics.sendProperty("AR_Enabled","WebXR")):c.Ni?(this.launchSceneViewer(),this.analytics.sendProperty("AR_Enabled","SceneViewer")):c.pz&&c.UN?(this.launchQuickLook(),this.analytics.sendProperty("AR_Enabled","QuickLook")):(n=!1,this.analytics.sendProperty("AR_Enabled","Unavailable"),a.Ay.show("AR unavailable on this platform.","warning"))),t.enabled.setValue(n)}return!0}launchWebXR(){var e,t,n;const i=null===(e=this.renderer)||void 0===e?void 0:e.views[0].renderer,r=this.vScene=null===(t=this.renderer)||void 0===t?void 0:t.activeSceneComponent,o=this.camera=null==r?void 0:r.activeCamera;this.cameraParent=o.parent;if(!(this.setup=this.getSystemComponent(u.A)))return!1;const s=null===(n=this.sceneNode)||void 0===n?void 0:n.getGraphComponents(m.A);let l=null;for(const e of s)if(l=e.derivatives.get(p.UH.Web3D,p.a9.AR),null!=l)break;l&&(this.setup.navigation.setChanged(!0),this.cachedQuality=s[0].ins.quality.value,s.forEach(e=>{e.ins.quality.setValue(p.a9.AR)}),i.setAnimationLoop((e,t)=>this.render(e,t)),navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay"],domOverlay:{root:this.shadowRoot.querySelector("ff-viewport-overlay")}}).then(e=>this.onSessionStarted(i,e)).catch(e=>{console.log("Error starting session: "+e),a.Ay.show("AR available but blocked. Please check your browser settings.","warning")}))}async onSessionStarted(e,t){const n=this.renderer.views[0].renderer.getContext();await n.makeXRCompatible(),t.updateRenderState({baseLayer:new XRWebGLLayer(t,n,{alpha:!0})}),this.setupScene(),e.shadowMap.autoUpdate=!1,e.xr.enabled=!0,e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),await t.addEventListener("end",this.onSessionEnded),this.refSpace=await t.requestReferenceSpace("local");const i=await t.requestReferenceSpace("viewer");e.xr.cameraAutoUpdate=!1;const r=20*Math.PI/180,o=!0===this.ins.wallMount.value?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(r),z:-Math.cos(r)});t.requestHitTestSource({space:i,offsetRay:o}).then(e=>{this.initialHitTestSource=e}),this.outs.isPresenting.setValue(!0),this.session=t,this.lastFrameTime=performance.now(),this.setup.reader.ins.enabled.on("value",this.endSession,this)}endSession(){this.session&&this.session.end()}setupScene(){const{cameraParent:e,setup:t,featuresToReset:n}=this,i=this.sceneNode;e&&e.remove(this.camera),this.setup.background.ins.visible.setValue(!1),this.setup.navigation.ins.enabled.setValue(!1);const r=i.graph.findNodeByName("Lights");(this.lightTransform=r.getComponent(o.Ay,!0)).ins.rotation.reset();const s=this.scaleDisplay=document.createElement("div");s.classList.add("sv-scale-annotation"),this.shadowRoot.querySelector("ff-viewport-overlay").appendChild(s),n.push(t.floor.ins.visible.value?1:0),n.push(t.grid.ins.visible.value?1:0),n.push(t.tape.ins.visible.value?1:0),n.push(t.slicer.ins.enabled.value?1:0),n.push(t.viewer.ins.shader.value),this.annotationsAtLaunch=t.viewer.ins.annotationsVisible.value,t.floor.ins.visible.setValue(!1),t.grid.ins.visible.setValue(!1),t.tape.ins.visible.setValue(!1),t.slicer.ins.enabled.setValue(!1),t.viewer.ins.shader.value!==y.gw.Default&&t.viewer.ins.shader.setValue(y.gw.Default),t.viewer.ins.annotationsVisible.setValue(!1);(this.originalUnits=i.ins.units.getValidatedValue())!=h.uj.m&&this.sceneNode.ins.units.setValue(h.uj.m);i.getGraphComponents(v.A).forEach(e=>{e.ins.shadowEnabled.value&&(e.ins.shadowEnabled.setValue(!1),this.lightsToReset.push(e))}),this.pulse.pulse(Date.now()),i.update(null);(this.shadow=new g(this.sceneNode,this.vScene.scene,.5)).setIntensity(0),E.copy(this.sceneNode.outs.boundingBox.value),E.getSize(w),this.cachedNearPlane=this.camera.near,this.cachedFarPlane=this.camera.far,this.vScene.activeCameraComponent.ins.near.setValue(.01),this.vScene.activeCameraComponent.ins.far.setValue(1e3)}resetScene(){const{camera:e,cameraParent:t,setup:n,featuresToReset:i}=this,r=this.vScene.scene;t&&t.add(e),e.position.set(0,0,0),e.rotation.set(0,0,0),this.vScene.activeCameraComponent.ins.near.setValue(this.cachedNearPlane),this.vScene.activeCameraComponent.ins.far.setValue(this.cachedFarPlane),e.updateMatrix(),this.lightTransform.object3D.rotation.set(0,0,0),this.lightTransform.object3D.updateMatrix(),this.sceneNode.ins.units.setValue(this.originalUnits),r.position.setScalar(0),r.rotation.y=0,r.scale.setScalar(1),r.updateMatrix(),r.updateMatrixWorld(!0),i.reverse(),n.floor.ins.visible.setValue(!!i.pop()),n.grid.ins.visible.setValue(!!i.pop()),n.tape.ins.visible.setValue(!!i.pop()),n.slicer.ins.enabled.setValue(!!i.pop());const o=i.pop();o!==y.gw.Default&&n.viewer.ins.shader.setValue(o),this.lightsToReset.forEach(e=>{e.ins.shadowEnabled.setValue(!0)}),this.lightsToReset.length=0,n.background.ins.visible.setValue(!0);this.sceneNode.getGraphComponents(m.A).forEach(e=>{e.ins.quality.setValue(this.cachedQuality)});const s=this.selectionRing;null!=s&&(r.remove(s),s.geometry.dispose(),s.material.dispose(),this.selectionRing=null);const a=this.hitPlane;null!=a&&(r.remove(a),a.geometry.dispose(),a.material.dispose(),this.hitPlane=null),this.scaleDisplay.remove();const l=this.shadow;null!=l&&(r.remove(l),l.dispose(),this.shadow=null),e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix()}setInitialPosition(e){const t=this.initialHitTestSource;if(null==t)return;const n=e.getHitTestResults(t);if(0==n.length)return;const i=n[0],r=this.getHitPoint(i);if(null==r)return;this.placeModel(r),t.cancel(),this.initialHitTestSource=null;const{session:o}=e;o.addEventListener("selectstart",this.onSelectStart),o.addEventListener("selectend",this.onSelectEnd),o.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(e=>{this.transientHitTestSource=e})}getHitPoint(e){const t=e.getPose(this.refSpace);if(null==t)return null;const n=_.fromArray(t.transform.matrix),i=n.elements[5]>.75;if(!0===this.ins.wallMount.value&&!i){const e=this.vScene.scene;e.rotation.y=Math.atan2(n.elements[4],n.elements[6]),e.updateMatrix()}return i!==this.ins.wallMount.value?C.setFromMatrixPosition(n):null}handleInput(e){const t=this.transientHitTestSource;if(null==t)return;if(!this.isTranslating&&!this.isScaling&&!this.isRotating)return;const n=e.getHitTestResultsForTransientInput(t),i=this.vScene.scene,r=i.scale.x;if(this.isScaling)if(n.length<2)this.isScaling=!1,this.scaleDisplay.classList.remove("sv-show"),this.scaleDisplay.addEventListener("transitionend",()=>{this.updateScale=!1},{once:!0});else{let e=this.getFingerSeparation(n)/this.lastScale;e=e>.9&&e<1.1?1:e,this.scaleScene(i,e),this.scaleDisplay.classList.add("sv-show"),this.updateScale=!0}else{if(2===n.length)return this.isTranslating=!1,this.isRotating=!1,this.isScaling=!0,void(this.lastScale=this.getFingerSeparation(n)/r);if(this.isRotating){const e=this.inputSource.gamepad.axes[0];i.rotation.y+=1.5*(e-this.lastDragValueX),i.updateMatrix(),this.sceneRotateHelper(),this.lastDragValueX=e}else if(this.isTranslating){const e=this.inputSource.gamepad.axes,t=e[0]-this.lastDragValueX,r=e[1]-this.lastDragValueY;this.totalDrag+=Math.hypot(t,r),n.forEach(e=>{if(this.totalDrag<.01||e.inputSource!==this.inputSource||e.results.length<1)return;const t=this.getHitPoint(e.results[0]);null!=t&&(w.copy(t),w.sub(this.lastHitPosition),i.position.add(w),i.updateMatrix(),i.updateMatrixWorld(),this.lastHitPosition.copy(t),this.updateBoundingBox())}),this.shadow.updateMatrices()}}}getFingerSeparation(e){const t=e[0].inputSource.gamepad.axes,n=e[1].inputSource.gamepad.axes,i=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(i*i+r*r)}placeModel(e){const t=this.vScene.scene,n=.15/this.ins.arScale.value,i=!0===this.ins.wallMount.value,{min:r,max:o}=E,s=this.sceneNode.outs.boundingRadius.value,a=Math.max(1.25*(o.x-r.x),n),c=i?Math.max(1.25*(o.y-r.y),n):Math.max(1.25*(o.z-r.z),n),d=(r.x+o.x)/2,u=(r.z+o.z)/2,h=(r.y+o.y)/2,p=i?0:-Math.PI/2;this.lastHitPosition.copy(e);const m=this.hitPlane=new l.eaF(new l.bdM(a,c),new l.V9B);m.position.set(d,i?h:r.y,i?r.z:u),m.rotation.set(p,0,0),m.visible=!1,t.add(m),this.placementRotation.copy(t.quaternion);const f=new l.ypk,g=new l.ypk,v=a>c?.025*a:.025*c;this.roundedRect(f,-a/2,-c/2,a,c,.5*v),this.roundedRect(g,-a/2+v,-c/2+v,a-2*v,c-2*v,.4*v),f.holes.push(g);let y=new l.MSw(f);const b=this.selectionRing=new l.eaF(y,new l.V9B({side:l.$EB,opacity:0}));b.position.set(d,i?h:r.y,i?r.z:u),b.rotation.set(p,0,0),b.material.transparent=!0,b.visible=!1,t.add(b),this.modelFloorOffset=r.y,t.position.set(e.x,i?e.y:e.y-r.y,e.z),t.updateMatrix(),t.updateMatrixWorld(!0),this.updateBoundingBox(),this.pulse.pulse(Date.now()),this.shadow.updateMatrices(),this.shadow.setIntensity(!0===this.ins.wallMount.value?0:.3),this.setup.viewer.ins.annotationsVisible.setValue(this.annotationsAtLaunch),1===this.ins.arScale.value||i||this.renderer.views[0].renderer.render(t,this.shadow.shadow.camera),this.scaleScene(this.vScene.scene,this.ins.arScale.value);const A=this.camera.position.clone(),_=e.clone().sub(A);if(_.length()<s*t.scale.x){const n=_.normalize();A.sub(n.multiplyScalar(s*t.scale.x*1.5));const i=new l.RlV(A,n.normalize()),r=new l.Pq0;o.y+=10,i.intersectBox(this.sceneNode.outs.boundingBox.value,r),o.y-=10,null!=r&&(t.position.x+=e.x-r.x,t.position.z+=e.z-r.z,t.updateMatrix(),t.updateMatrixWorld(!0))}this.updateBoundingBox(),this.outs.isPlaced.setValue(!0),1!==t.scale.x&&(this.updateScale=!0,this.scaleDisplay.classList.add("sv-show"),setTimeout(()=>{this.scaleDisplay.classList.remove("sv-show"),this.scaleDisplay.addEventListener("transitionend",()=>{this.updateScale=!1},{once:!0})},1500))}launchSceneViewer(){const e=this.sceneNode.getGraphComponents(m.A),t=e.findIndex(e=>null!==e.derivatives.get(p.UH.App3D,p.a9.AR)),n=t>-1?e[t].derivatives.get(p.UH.App3D,p.a9.AR):null;if(n){const e=this.arLink,t=n.findAsset(p.iO.Model),i=`intent://arvr.google.com/scene-viewer/1.0?file=${this.assetManager.getAssetUrl(t.data.uri)}&mode=ar_only#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;end;`;e.setAttribute("href",i),e.click()}}launchQuickLook(){const e=this.sceneNode.getGraphComponents(m.A),t=e.findIndex(e=>null!==e.derivatives.get(p.UH.iOSApp3D,p.a9.AR)),n=t>-1?e[t].derivatives.get(p.UH.iOSApp3D,p.a9.AR):null;if(n){const e=this.arLink,t=n.findAsset(p.iO.Model),i=this.assetManager.getAssetUrl(t.data.uri);e.setAttribute("rel","ar");const r=document.createElement("img");e.appendChild(r),e.setAttribute("href",i.toString()),e.click(),e.removeChild(r)}}updateBoundingBox(){this.sceneNode.ins.sceneTransformed.set()}updateOpacity(e,t){const n=this.selectionRing.material,i=n.opacity;if(t===i)return;const r=t-i;n.opacity=r>0?Math.min(i+.002*e,t):Math.max(i-.002*e,t),this.selectionRing.visible=n.opacity>0}roundedRect(e,t,n,i,r,o){e.moveTo(t,n+o),e.lineTo(t,n+r-o),e.quadraticCurveTo(t,n+r,t+o,n+r),e.lineTo(t+i-o,n+r),e.quadraticCurveTo(t+i,n+r,t+i,n+r-o),e.lineTo(t+i,n+o),e.quadraticCurveTo(t+i,n,t+i-o,n),e.lineTo(t+o,n),e.quadraticCurveTo(t,n,t,n+o)}sceneRotateHelper(){const e=this.vScene.scene;M.copy(e.quaternion),M.invert(),M.multiply(this.placementRotation),this.lightTransform.object3D.rotation.setFromQuaternion(M),this.lightTransform.object3D.updateMatrix(),this.shadow.setRotation(e.rotation.y)}scaleScene(e,t){e.scale.setScalar(t),!1===this.ins.wallMount.value&&(e.position.y=this.lastHitPosition.y-this.modelFloorOffset*e.scale.y),e.updateMatrix(),e.updateMatrixWorld(),this.shadow.setScaleAndOffset(t,0),this.updateBoundingBox()}onMetaComponent(e){const t=e.object;e.add&&t.once("load",()=>{const e=t.images.dictionary;Object.keys(e).forEach(t=>{const n=e[t];n.usage&&"ARCode"===n.usage&&(this._arCodeImage=this.assetManager.getAssetUrl(n.uri))})})}}S.typeName="CVARManager",S.text="ARManager",S.icon="",S.isSystemSingleton=!0,S.ins={enabled:i.gK.Boolean("State.Enabled"),wallMount:i.gK.Boolean("AR.wallMount",!1),arScale:i.gK.Number("AR.Scale",1)},S.outs={enabled:i.gK.Boolean("State.Enabled"),available:i.gK.Boolean("State.Available",c.yS),isPlaced:i.gK.Boolean("AR.Placed",!1),isPresenting:i.gK.Boolean("AR.Presenting",!1)}},2799:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(3423),r=(n(1860),n(4424));const o=(e,t,n)=>{let i;const r=e.children;for(let e=0,n=r.length;e<n;++e)if(i=r[e].components.has(t),i)return!0;if(n)for(let e=0,n=r.length;e<n;++e)if(i=o(r[e],t,!0),i)return!0;return!1},s=(e,t,n)=>{let i;const r=e.children;for(let e=0,n=r.length;e<n;++e)if(i=r[e].components.get(t),i)return i;if(n)for(let e=0,n=r.length;e<n;++e)if(i=s(r[e],t,!0),i)return i;return null},a=(e,t,n)=>{let i=[];const r=e.children;for(let e=0,n=r.length;e<n;++e)i=i.concat(r[e].components.getArray(t));if(n)for(let e=0,n=r.length;e<n;++e)i=i.concat(a(r[e],t,!0));return i};class l extends i.Ay{constructor(){super(...arguments),this._parent=null,this._children=[]}get parent(){return this._parent}get children(){return this._children||[]}create(){super.create(),this.graph._addRoot(this),this.node.components.on(i.Ay,this.onComponent,this)}dispose(){this.node.components.off(i.Ay,this.onComponent,this),this._children.slice().forEach(e=>e.node.dispose()),this._parent&&this._parent.removeChild(this),this.graph._removeRoot(this),super.dispose()}getRootComponent(e){let t=this;for(;t._parent;)t=t._parent;return t?t.node.components.get(e):null}getParentComponent(e,t){let n=this;for(;;){if(n=n._parent,!n){const e=this.graph.parent;n=e?e.components.get(l):void 0}if(!n)return;const i=n.node.components.get(e,!0);if(i)return i;if(!t)return}}getParentNode(e,t){let n=this;for(;;){if(n=n._parent,!n){const e=this.graph.parent;n=e?e.components.get(l):void 0}if(!n)return;const i=n.node;if(i.is(e))return i;if(!t)return}}getSiblingNode(e){return this.getSiblingNodes(e)[0]}getSiblingNodes(e){const t=this._parent;return this.graph.nodes.getArray(e).filter(e=>{const n=e.components.get(l);return(n?n._parent:null)==t})}hasChildComponents(e,t){return o(this,e,t)}getChildComponent(e,t){return s(this,e,t)}getChildComponents(e,t){return a(this,e,t)}traverseUp(e,t,n,i){if(e)if(t){const e=this.node.components.getArray();for(let t=0,n=e.length;t<n;++t)if(i(e[t]))return}else if(i(this))return;let r=this._parent;if(!r&&n){const e=this.node.graph.parent;r=e?e.getComponent(l,!0):null}r&&r.traverseUp(!0,t,n,i)}traverseDown(e,t,n,i){if(e)if(t){const e=this.node.components.getArray();for(let t=0,n=e.length;t<n;++t)if(i(e[t]))return}else if(i(this))return;if(n){const e=this.node.components.getArray(r.Ay);for(let r=0,o=e.length;r<o;++r){const o=e[r].innerRoots;for(let e=0,r=o.length;e<r;++e)o[e].traverseDown(!0,t,n,i)}}const o=this._children;for(let e=0,r=o.length;e<r;++e)o[e].traverseDown(!0,t,n,i)}propagateUp(e,t,n){this.traverseUp(!0,e,t,e=>(e.emit(n),n.stopPropagation))}propagateDown(e,t,n){this.traverseDown(!0,e,t,e=>(e.emit(n),n.stopPropagation))}addChild(e){if(e===this)throw new Error("can't add self as child");if(e._parent)throw new Error("can't add child, component has a parent");if(e.graph!==this.graph)throw new Error("can't add child, component in different graph");e._parent=this,this._children.push(e),this.graph._removeRoot(e);const t={type:"hierarchy",add:!0,remove:!1,parent:this,child:e};this.traverseUp(!0,!1,!0,e=>e.emit(t)),this.traverseDown(!1,!1,!0,e=>e.emit(t)),this.system.emit(t)}removeChild(e){if(e._parent!==this)throw new Error("component not a child of this");const t={type:"hierarchy",add:!1,remove:!0,parent:this,child:e};this.traverseUp(!0,!1,!0,e=>e.emit(t)),this.traverseDown(!1,!1,!0,e=>e.emit(t)),this.system.emit(t);const n=this._children.indexOf(e);this._children.splice(n,1),e._parent=null,this.graph._addRoot(e)}onComponent(e){if(e.object===this)return;const t={type:"child",add:e.add,remove:e.remove,component:e.object};this.traverseUp(!0,!1,!0,e=>e.emit(t))}toJSON(){const e=super.toJSON();return this._children.length>0&&(e.children=this._children.map(e=>e.id)),e}referencesFromJSON(e){super.referencesFromJSON(e);const t=this.system.components.getDictionary();e.children&&e.children.forEach(e=>{const n=t[e];this.addChild(n)})}toString(){return super.toString()+` - children: ${this.children.length}`}dump(e=""){super.dump(e),this.children.length>0&&(console.log(e+"%cChildren","color: purple"),this.children.forEach(t=>t.node.dump(e+"  ")))}}l.typeName="CHierarchy"},2804:function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t||2===t?":a":":e")},week:{dow:1,doy:4}})}(n(3681))},2867:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i,r=n(6763),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=i=class extends r.Ay{static add(e,t){if(i.templates[e])throw new Error(`icon already registered: '${e}'`);i.templates[e]=t}static getTemplateNames(){return Object.keys(i.templates)}constructor(e){super(),this.template=null,this.name=e||""}firstConnected(){this.classList.add("ff-icon")}render(){if(this.name){const e=this.constructor.templates[this.name];return e||console.warn(`icon not found: '${this.name}'`),e}return this.template?this.template:r.qy`[icon undefined]`}};s.templates={},o([(0,r.MZ)({attribute:!1})],s.prototype,"template",void 0),o([(0,r.MZ)({type:String})],s.prototype,"name",void 0),s=i=o([(0,r.EM)("ff-icon")],s);const a=s;s.add("empty",r.qy``),s.add("check",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg>`),s.add("close",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>`),s.add("grip",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg>`),s.add("up",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg>`),s.add("down",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"/></svg>`),s.add("caret-up",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M288.662 352H31.338c-17.818 0-26.741-21.543-14.142-34.142l128.662-128.662c7.81-7.81 20.474-7.81 28.284 0l128.662 128.662c12.6 12.599 3.676 34.142-14.142 34.142z"/></svg>`),s.add("caret-down",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"/></svg>`),s.add("folder",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"/></svg>`),s.add("file",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"/></svg>`),s.add("info",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>`),s.add("warning",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>`),s.add("error",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>`),s.add("prompt",r.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"/></svg>`)},2874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},2902:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(3423),r=n(4146),o=n(1229);class s extends r.A{constructor(e,t){super(e,t),this.outs=this.addOutputs(s.outs),this.scope=r.X.Node}createDocument(e,t){const n=this.node.createComponent(o.A);return this.activeComponent=n,e&&n.openDocument(e,t),n}amendDocument(e,t,n){const i=this.activeComponent;if(!i)throw new Error("no active document, can't amend");return i.openDocument(e,t,n),i}refreshDocument(){this.emit({type:"active-component",previous:null,next:this.activeComponent})}appendModel(e,t){const n=this.activeComponent;if(!n)throw new Error("no active document, can't append model");return n.appendModel(e,t),n}appendGeometry(e,t,n,i,r){const o=this.activeComponent;if(!o)throw new Error("no active document, can't append geometry");return o.appendGeometry(e,t,n,i,r),o}removeActiveDocument(){const e=this.activeComponent;e&&e.dispose()}activateComponent(e){e.ins.visible.setValue(!0),e.ins.active.setValue(!0)}deactivateComponent(e){e.ins.visible.setValue(!1),e.ins.active.setValue(!1)}onActiveComponent(e,t){this.outs.activeDocument.setValue(t)}onScopedComponents(){this.outs.changedDocuments.set()}}s.typeName="CVDocumentProvider",s.componentType=o.A,s.outs={activeDocument:i.gK.Object("Documents.Active",o.A),changedDocuments:i.gK.Event("Documents.Changed")}},2934:function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),i=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function o(e,t,n){var i=e+" ";switch(n){case"ss":return i+(r(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return i+(r(e)?"godziny":"godzin");case"ww":return i+(r(e)?"tygodnie":"tygodni");case"MM":return i+(r(e)?"miesiące":"miesięcy");case"yy":return i+(r(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,i){return e?/D MMMM/.test(i)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:o,m:o,mm:o,h:o,hh:o,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:o,M:"miesiąc",MM:o,y:"rok",yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},2948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var n=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function i(e){for(var i,r="",o=0;null!==(i=t.xmlReplacer.exec(e));){var s=i.index,a=e.charCodeAt(s),l=n.get(a);void 0!==l?(r+=e.substring(o,s)+l,o=s+1):(r+="".concat(e.substring(o,s),"&#x").concat((0,t.getCodePoint)(e,s).toString(16),";"),o=t.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return r+e.substr(o)}function r(e,t){return function(n){for(var i,r=0,o="";i=e.exec(n);)r!==i.index&&(o+=n.substring(r,i.index)),o+=t.get(i[0].charCodeAt(0)),r=i.index+1;return o+n.substring(r)}}t.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},t.encodeXML=i,t.escape=i,t.escapeUTF8=r(/[&<>'"]/g,n),t.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},2997:(e,t,n)=>{"use strict";var i,r,o,s,a;n.d(t,{Kd:()=>o,Tm:()=>a,Yf:()=>s,gw:()=>i,zZ:()=>r}),function(e){e[e.Default=0]="Default",e[e.Clay=1]="Clay",e[e.XRay=2]="XRay",e[e.Normals=3]="Normals",e[e.Wireframe=4]="Wireframe"}(i||(i={})),function(e){e[e.Solid=0]="Solid",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"}(r||(r={})),function(e){e[e.Orbit=0]="Orbit",e[e.Fly=1]="Fly",e[e.Walk=2]="Walk"}(o||(o={})),function(e){e[e.Overlay=0]="Overlay",e[e.Left=1]="Left",e[e.Right=2]="Right"}(s||(s={})),function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(a||(a={}))},3011:()=>{},3019:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(3423),r=n(8313),o=n(161),s=n(9337),a=n(3675),l=n(6773),c=n(6763),d=n(8604),u=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class h extends i.Ay{constructor(){super(...arguments),this._narrationId=null,this._activeId=null,this._audioMap={},this.audioClips={},this.audioPlayer=null,this.audioView=null,this.audioViews={},this.isPlaying=!1,this.ins=this.addInputs(h.ins),this.outs=this.addOutputs(h.outs),this.onEnd=()=>{var e;const{outs:t}=this;this.isPlaying=!1,t.isPlaying.setValue(!1),null===(e=this.audioView)||void 0===e||e.requestUpdate()},this.onCueChange=e=>{const t=e.target.track.activeCues,n=t.length>0?t[0].text:"";this.ins.activeCaption.setValue(n)},this.onLoadTrack=e=>{const t=this.audioPlayer.children[0].track.cues;0===t[0].startTime&&(t[0].startTime=.01)},this.onTimeChange=e=>{this.audioView.elapsed=this.getTimeElapsed(),this.audioView.requestUpdate()}}get assetManager(){return this.getMainComponent(o.A)}get language(){return this.getGraphComponent(s.A,!0)}get analytics(){return this.system.getMainComponent(d.A)}get narrationId(){return this._narrationId||""}set narrationId(e){this._narrationId=e,this.outs.narrationEnabled.setValue(e.length>0)}get activeId(){return this._activeId||""}set activeId(e){this._activeId=e}create(){super.create(),this.graph.components.on(r.A,this.onMetaComponent,this),this.language.outs.activeLanguage.on("value",this.onLanguageChange,this)}dispose(){Object.keys(this._audioMap).forEach(e=>URL.revokeObjectURL(this._audioMap[e])),this.language.outs.activeLanguage.off("value",this.onLanguageChange,this),this.graph.components.off(r.A,this.onMetaComponent,this),super.dispose()}update(){const{ins:e,outs:t}=this;return e.playNarration.changed&&this.audioPlayer&&this._narrationId&&(t.narrationPlaying.value&&this.activeId==this._narrationId?(this.stop(),t.narrationPlaying.setValue(!1)):t.narrationPlaying.value||this.play(this._narrationId)),e.reset.changed&&(this.stop(),t.narrationPlaying.setValue(!1)),!0}getPlayerById(e){if(!this.audioViews.hasOwnProperty(e)){const t=this.audioViews[e]=new p;t.audio=this,t.audioId=e,t.requestUpdate()}return this.audioViews[e]}getAudioList(){return Object.keys(this.audioClips).map(e=>this.audioClips[e])}getAudioClip(e){return this.audioClips[e]}getAudioClipUri(e){const t=this.audioClips[e];return t?t.uris[a.aL[this.language.outs.activeLanguage.value]]:null}getClipCaptionUri(e){const t=this.audioClips[e];return t?t.captionUris[a.aL[this.language.outs.activeLanguage.value]]:null}getDuration(e){const t=this.audioClips[e],n=a.aL[this.language.outs.activeLanguage.getValidatedValue()],i=t.durations[n];if(i)return i;{const t=this.audioClips[e];return Object.keys(t.uris).forEach(i=>{const r=t.uris[i];if(r){const o=this.assetManager.getAssetUrl(r);t.durations[i]="pending";const s=new(window.AudioContext||window.webkitAudioContext),a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=()=>{if(!Object.keys(this._audioMap).includes(r)){const e=new Blob([a.response],{type:"audio/mpeg"}),t=window.URL.createObjectURL(e);this._audioMap[r]=t}s.decodeAudioData(a.response,r=>{let o=r.duration;t.durations[i]=o.toString(),i===n&&this.getPlayerById(e).requestUpdate()})},a.send()}}),"pending"}}getTimeElapsed(){return this.audioPlayer?Math.floor(this.audioPlayer.currentTime):0}setTimeElapsed(e){this.audioPlayer&&(0===this.audioPlayer.seekable.length?this.audioPlayer.addEventListener("canplay",()=>this.setTimeElapsed(e),{once:!0}):(this.audioPlayer.currentTime=e,this.audioView.elapsed=e,this.audioView.requestUpdate()))}addAudioClip(e){this.audioClips[e.id]=e,this.outs.updated.set()}removeAudioClip(e){this.isPlaying&&e==this.activeId&&this.stop(),e==this._narrationId&&(this.narrationId=""),delete this.audioClips[e]}updateAudioClip(e){this.audioClips[e].durations={},this.getDuration(e),this.outs.updated.set()}onMetaComponent(e){const t=e.object;"NVScene"===t.node.typeName&&e.add&&(this.audioClips=t.audio.dictionary,t.once("load",()=>{this.audioClips=t.audio.dictionary,Object.keys(this.audioClips).forEach(e=>{this.updateAudioClip(this.audioClips[e].id)})}))}fromData(e){const{outs:t}=this;e=e||{},this._narrationId=e.narrationId||null,t.narrationEnabled.setValue(null!=this._narrationId),this._narrationId&&!this.audioClips[this._narrationId]&&(t.narrationEnabled.setValue(!1),console.warn("Invalid narration audio ID"))}toData(){let e=null;return null!==this._narrationId&&(e={narrationId:this._narrationId}),e}play(e,t=!1){const{outs:n}=this,i=this.getAudioClipUri(e);i?(n.isPlaying.value&&this.audioPlayer.pause(),this.activeId!==e&&this.setTimeElapsed(0),this.audioView=this.audioViews[e],this.initializeClip(e),this.audioPlayer.play().then(()=>{this.activeId=e,n.isPlaying.setValue(!0),this.isPlaying=!0,n.narrationPlaying.setValue(e==this.narrationId),Object.keys(this.audioViews).forEach(e=>this.audioViews[e].requestUpdate()),this.analytics.sendProperty("Audio_Play",i)}).catch(e=>l.Ay.show(`Failed to play audio at '${this.audioPlayer.getAttribute("src")}':${e}`,"warning"))):l.Ay.show("Failed to play audio clip - no uri","warning")}pause(){var e;this.audioPlayer&&(this.outs.isPlaying.setValue(!1),this.audioPlayer.pause(),null===(e=this.audioView)||void 0===e||e.requestUpdate())}stop(){this.audioPlayer&&(this.pause(),this.setTimeElapsed(0),this.onEnd())}initializeClip(e){null===this.audioPlayer&&this.setupAudio();const t=this.audioClips[e];if(t){const e=t.uris[a.aL[this.language.outs.activeLanguage.getValidatedValue()]];this.audioPlayer.src!=this._audioMap[e]&&this.audioPlayer.setAttribute("src",this._audioMap[e]),this.audioPlayer.children[0]&&this.audioPlayer.children[0].remove();const n=t.captionUris[a.aL[this.language.outs.activeLanguage.getValidatedValue()]];if(n&&(0==this.audioPlayer.children.length||this.audioPlayer.children[0].src!=this.assetManager.getAssetUrl(n))){const e=document.createElement("track");this.audioPlayer.append(e),e.setAttribute("src",this.assetManager.getAssetUrl(n)),e.track.mode="showing",e.addEventListener("cuechange",this.onCueChange),e.addEventListener("load",this.onLoadTrack)}}}setupAudio(){if(null===this.audioPlayer){const e=this.audioPlayer=document.createElement("audio");e.onended=this.onEnd,e.setAttribute("controls",""),e.setAttribute("preload","auto"),e.addEventListener("timeupdate",this.onTimeChange),e.crossOrigin="anonymous",e.onerror=()=>{console.error(`Error ${e.error.code}; details: ${e.error.message}`)}}}onLanguageChange(){this.stop()}}h.typeName="CVAudioManager",h.text="Audio",h.icon="",h.isSystemSingleton=!0,h.ins={playNarration:i.gK.Event("Audio.PlayNarration"),reset:i.gK.Event("Audio.Reset"),activeCaption:i.gK.String("Audio.ActiveCaption"),captionsEnabled:i.gK.Boolean("Audio.CaptionsEnabled",!0)},h.outs={narrationEnabled:i.gK.Boolean("Audio.NarrationEnabled",!1),narrationPlaying:i.gK.Boolean("Audio.NarrationPlaying",!1),isPlaying:i.gK.Boolean("Audio.IsPlaying",!1),updated:i.gK.Event("Audio.Updated")};let p=class extends c.Ay{constructor(){super(),this.audio=null,this.audioId="",this.elapsed=0,this.onDrag=this.onDrag.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.addEventListener("keydown",this.onKeyDown)}firstConnected(){this.classList.add("sv-audio-view")}update(e){if(e.has("elapsed")){const e=this.querySelector("#time-slider");e&&(e.value=this.elapsed.toString())}super.update(e)}render(){const e=this.audio.outs.isPlaying.value&&this.audioId==this.audio.activeId,t=this.audio.getDuration(this.audioId),n=this.formatSeconds(this.elapsed),i="pending"==t?t:this.formatSeconds(parseInt(t));return c.qy`<ff-button title="play audio" id="play-btn" icon="${e?"pause":"triangle-right"}" @pointerdown=${e=>this.playAudio(e,this.audioId)}></ff-button><div aria-hidden="true" class="sv-timer">${n}/${i}</div><input title="audio slider" id="time-slider" @pointerdown=${this.onDrag} @change=${this.onTimeChange} type="range" min="0" max="${t}" value="${this.elapsed}" class="slider">`}playAudio(e,t){const n=this.audio;this.audio.outs.isPlaying.value&&this.audioId==this.audio.activeId?n.pause():n.play(t)}onDrag(e){e.stopPropagation()}onKeyDown(e){"Space"===e.code||"Enter"===e.code?"play-btn"==e.target.id&&this.playAudio(null,this.audioId):"ArrowUp"!==e.code&&"ArrowDown"!==e.code&&"ArrowLeft"!==e.code&&"ArrowRight"!==e.code||"time-slider"==e.target.id&&e.stopPropagation()}onTimeChange(){this.audioId==this.audio.activeId&&(this.audio.initializeClip(this.audioId),this.audio.setTimeElapsed(0|parseFloat(this.querySelector("#time-slider").value)))}formatSeconds(e){var t=new Date(0);return t.setSeconds(e),t.toISOString().substring(14,19)}};u([(0,c.MZ)({attribute:!1})],p.prototype,"audio",void 0),u([(0,c.MZ)({attribute:!1})],p.prototype,"audioId",void 0),u([(0,c.MZ)({attribute:!1})],p.prototype,"elapsed",void 0),p=u([(0,c.EM)("sv-audio-view")],p)},3051:(e,t,n)=>{"use strict";n.d(t,{R:()=>r,i:()=>o});const i='a[href], button, input, textarea, select, details,[tabindex]:not([tabindex="-1"])';function r(e){return[...e.querySelectorAll(i)].filter(e=>!e.hasAttribute("disabled")&&!!e.getClientRects().length&&"hidden"!==e.style.visibility&&!e.getAttribute("aria-hidden")&&"-1"!==e.getAttribute("tabindex"))}function o(e,t,n=!1){const i=e.findIndex(e=>e===t.target),r=e[0],o=e[e.length-1];t.preventDefault(),t.shiftKey?0===i?o.focus({preventScroll:n}):e[i-1].focus({preventScroll:n}):i===e.length-1?r.focus({preventScroll:n}):e[i+1].focus({preventScroll:n})}},3074:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,I8:()=>a.I8,gK:()=>r.gK});var i=n(4640),r=n(3423),o=n(7795),s=n(6436),a=n(8424);const l=new i.Pq0;class c extends r.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(c.object3DIns),this.outs=this.addOutputs(c.object3DOuts),this._object3D=null,this._isPickable=!1,this.addEvent("object"),this.node.components.on(this.parentComponentClass,this._onParent,this)}get parentComponentClass(){return this.constructor.parentComponentClass}get parentComponent(){return this.node.components.get(this.parentComponentClass,!0)}get transform(){return this.node.components.get(a.Ay,!0)}get scene(){const e=this.transform;return e?e.getParentComponent(s.A,!0):void 0}get object3D(){return this._object3D}set object3D(e){const t=this._object3D;if(t&&(t.userData.component=null,this.unregisterPickableObject3D(t,!0),t.parent&&this.onRemoveFromParent(t.parent)),this.emit({type:"object",current:t,next:e}),this._object3D=e,e){e.userData.component=this,e.matrixAutoUpdate=!1,e.visible=this.ins.visible.value,this.registerPickableObject3D(e,!0);const t=this.parentComponent;t&&this.onAddToParent(t.object3D)}}update(e){const{visible:t,pickable:n}=this.ins;return t.changed&&this._object3D&&(this._object3D.visible=t.value),n.changed&&n.value!==this._isPickable&&(this._isPickable=n.value,n.value?this.enablePointerEvents():this.disablePointerEvents()),!0}dispose(){this.object3D=null,this.ins.pickable.value&&this.disablePointerEvents(),this.node.components.off(this.parentComponentClass,this._onParent,this),super.dispose()}preRender(e){}postRender(e){}toString(){return super.toString()+(this._object3D?` - type: ${this._object3D.type}`:" - (null)")}onPointer(e){const t=this.outs;"pointer-down"===e.type?(t.pointerDown.set(),t.pointerActive.setValue(!0)):"pointer-up"===e.type&&(t.pointerUp.set(),t.pointerActive.setValue(!1)),e.stopPropagation=!0}enablePointerEvents(){this.on("pointer-down",this.onPointer,this),this.on("pointer-up",this.onPointer,this)}disablePointerEvents(){this.off("pointer-down",this.onPointer,this),this.off("pointer-up",this.onPointer,this);const e=this.outs;e.pointerActive.value&&(e.pointerUp.set(),e.pointerActive.setValue(!1))}updateTransform(){const e=this._object3D;if(!e)return;const{position:t,rotation:n,order:r,scale:o}=this.ins;if(t.changed||n.changed||r.changed||o.changed){e.position.fromArray(t.value),l.fromArray(n.value).multiplyScalar(i.cj9.DEG2RAD);const s=r.getOptionText();e.rotation.setFromVector3(l,s),e.scale.fromArray(o.value),e.updateMatrix()}return!0}onAddToParent(e){e.add(this._object3D)}onRemoveFromParent(e){e.remove(this._object3D)}addObject3D(e){this._object3D.add(e),this.registerPickableObject3D(e,!0)}removeObject3D(e){this.unregisterPickableObject3D(e,!0),this._object3D.remove(e)}registerPickableObject3D(e,t){o.A.add(e,t)}unregisterPickableObject3D(e,t){o.A.remove(e,t)}_onParent(e){this._object3D&&!this._object3D.parent&&e.add&&this.onAddToParent(e.object.object3D)}}c.typeName="CObject3D",c.parentComponentClass=a.Ay,c.object3DIns={visible:r.gK.Boolean("Object.Visible",!0),pickable:r.gK.Boolean("Object.Pickable")},c.object3DOuts={pointerDown:r.gK.Event("Pointer.Down"),pointerUp:r.gK.Event("Pointer.Up"),pointerActive:r.gK.Boolean("Pointer.Active")},c.transformIns=a.Ay.transformIns,c.prototype.preRender=null,c.prototype.postRender=null},3104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))},3151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const i=n(5265),r=n(7988);function o(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const r=i.RULES.keywords;for(const n in t)r[n]||m(e,`unknown keyword: "${n}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(o,s,a,l)=>{const c=void 0===a?s:a instanceof i.Name?(s instanceof i.Name?e(o,s,a):t(o,s,a),a):s instanceof i.Name?(t(o,a,s),s):n(s,a);return l!==i.Name||c instanceof i.Name?c:r(o,c)}}function d(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",i._`{}`);return void 0!==t&&u(e,n,t),n}function u(e,t,n){Object.keys(n).forEach(n=>e.assign(i._`${t}${(0,i.getProperty)(n)}`,!0))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,r,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${e}${t}${(0,i.getProperty)(r)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,()=>{e.if(i._`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,i._`${n} || {}`).code(i._`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,()=>{!0===t?e.assign(n,!0):(e.assign(n,i._`${n} || {}`),u(e,n,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,()=>e.assign(n,i._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,()=>e.assign(n,!0===t||i._`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var p;function m(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new r._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p=t.Type||(t.Type={})),t.getErrorPath=function(e,t,n){if(e instanceof i.Name){const r=t===p.Num;return n?r?i._`"[" + ${e} + "]"`:i._`"['" + ${e} + "']"`:r?i._`"/" + ${e}`:i._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,i.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=m},3164:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(2222),r=n(8172),o=n(1721),s=n(8313);class a extends i.A{get setup(){return this.components.get(o.A,!0)}createComponents(){this.createComponent(r.A),this.createComponent(o.A),this.createComponent(s.A)}fromDocument(e,t,n){const r=e.scenes[t];r.name&&(this.name=r.name),this.scene.fromDocument(e,r),isFinite(r.meta)&&(this.meta.fromDocument(e,r),n.set(`meta/${r.meta}`,this.meta)),isFinite(r.setup)&&this.setup.fromDocument(e,t,n);const o=r.nodes;if(o&&o.forEach(t=>{const r=this.graph.createCustomNode(i.A);this.transform.addChild(r.transform),r.fromDocument(e,t,n)}),isFinite(r.setup)){const t=e.setups[r.setup];t.snapshots&&this.setup.snapshots.fromData(t.snapshots,n)}}toDocument(e,t,n){e.scenes=e.scenes||[];const r=e.scenes.length,o={units:"cm"};e.scenes.push(o),this.name&&(o.name=this.name),this.scene.toDocument(e,o);return this.transform.children.map(e=>e.node).filter(e=>e.is(i.A)).forEach(i=>{if(i.hasNodeComponents(n)){const r=i.toDocument(e,t,n);o.nodes=o.nodes||[],o.nodes.push(r)}}),n&&!n.setup||(this.meta&&(o.meta=this.meta.toDocument(e,o),t.set(this.meta,`meta/${o.meta}`)),this.setup&&this.setup.toDocument(e,r,t)),r}}a.typeName="NVScene"},3172:(e,t,n)=>{"use strict";let i=n(50),r=n(1352),o=n(8227),{isClean:s,my:a}=n(3963);function l(e,t){let n=new e.constructor;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;if("proxyCache"===i)continue;let r=e[i],o=typeof r;"parent"===i&&"object"===o?t&&(n[i]=t):"source"===i?n[i]=r:Array.isArray(r)?n[i]=r.map(e=>l(e,n)):("object"===o&&null!==r&&(r=l(r)),n[i]=r)}return n}function c(e,t){if(t&&void 0!==t.offset)return t.offset;let n=1,i=1,r=0;for(let o=0;o<e.length;o++){if(i===t.line&&n===t.column){r=o;break}"\n"===e[o]?(n=1,i+=1):n+=1}return r}class d{get proxyOf(){return this}constructor(e={}){this.raws={},this[s]=!1,this[a]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let n of e[t])"function"==typeof n.clone?this.append(n.clone()):this.append(n)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=l(this);for(let n in e)t[n]=e[n];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:n,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:n.column,line:n.line},t)}return new i(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markClean(){this[s]=!0}markDirty(){if(this[s]){this[s]=!1;let e=this;for(;e=e.parent;)e[s]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e={}){let t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){let n="document"in this.source.input?this.source.input.document:this.source.input.css,i=n.slice(c(n,this.source.start),c(n,this.source.end)).indexOf(e.word);-1!==i&&(t=this.positionInside(i))}return t}positionInside(e){let t=this.source.start.column,n=this.source.start.line,i="document"in this.source.input?this.source.input.document:this.source.input.css,r=c(i,this.source.start),o=r+e;for(let e=r;e<o;e++)"\n"===i[e]?(t=1,n+=1):t+=1;return{column:t,line:n,offset:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e={}){let t="document"in this.source.input?this.source.input.document:this.source.input.css,n={column:this.source.start.column,line:this.source.start.line,offset:c(t,this.source.start)},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:"number"==typeof this.source.end.offset?this.source.end.offset:c(t,this.source.end)+1}:{column:n.column+1,line:n.line,offset:n.offset+1};if(e.word){let r=t.slice(c(t,this.source.start),c(t,this.source.end)).indexOf(e.word);-1!==r&&(n=this.positionInside(r),i=this.positionInside(r+e.word.length))}else e.start?n={column:e.start.column,line:e.start.line,offset:c(t,e.start)}:e.index&&(n=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line,offset:c(t,e.end)}:"number"==typeof e.endIndex?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<n.line||i.line===n.line&&i.column<=n.column)&&(i={column:n.column+1,line:n.line,offset:n.offset+1}),{end:i,start:n}}raw(e,t){return(new r).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,n=!1;for(let i of e)i===this?n=!0:n?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);n||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let n={},i=null==t;t=t||new Map;let r=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let i=this[e];if(Array.isArray(i))n[e]=i.map(e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e);else if("object"==typeof i&&i.toJSON)n[e]=i.toJSON(null,t);else if("source"===e){if(null==i)continue;let o=t.get(i.input);null==o&&(o=r,t.set(i.input,r),r++),n[e]={end:i.end,inputId:o,start:i.start}}else n[e]=i}return i&&(n.inputs=[...t.keys()].map(e=>e.toJSON())),n}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=o){e.stringify&&(e=e.stringify);let t="";return e(this,e=>{t+=e}),t}warn(e,t,n={}){let i={node:this};for(let e in n)i[e]=n[e];return e.warn(t,i)}}e.exports=d,d.default=d},3179:function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'ünji",4:"'ünji",100:"'ünji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr".split("_"),monthsShort:"Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek".split("_"),weekdays:"Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe".split("_"),weekdaysShort:"Ýek_Duş_Siş_Çar_Pen_Ann_Şen".split("_"),weekdaysMin:"Ýk_Dş_Sş_Çr_Pn_An_Şn".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[düýn] LT",lastWeek:"[geçen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s soň",past:"%s öň",s:"birnäçe sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gün",dd:"%d gün",M:"bir aý",MM:"%d aý",y:"bir ýyl",yy:"%d ýyl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var i=e%10,r=e%100-i,o=e>=100?100:null;return e+(t[i]||t[r]||t[o])}},week:{dow:1,doy:7}})}(n(3681))},3196:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pzt_Sal_Çar_Per_Cum_Cmt".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"öö":"ÖÖ":n?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(e){return"ös"===e||"ÖS"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var i=e%10,r=e%100-i,o=e>=100?100:null;return e+(t[i]||t[r]||t[o])}},week:{dow:1,doy:7}})}(n(3681))},3198:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{static registerType(e){if(this.types[e.typeName])throw new Error(`Annotation type '${e.typeName}' already registered.`);this.types[e.typeName]=e}static registerDefaultType(e){this.defaultType=e}static get typeNames(){return[this.defaultTypeName,...Object.keys(this.types).sort()]}static get defaultTypeName(){return this.defaultType.typeName}static getType(e){const t=this.types[e]||this.defaultType;if(!t)throw new Error(`type '${e}' not registered and no default type set.`);return t}static createInstance(e,t,n){return"Circle"===(t=t||e.data.style)?new(this.getType(t))(e,n):new(this.getType(t))(e)}}i.types={},i.defaultType=null},3207:(e,t,n)=>{var i=n(2669),r=n(7038);e.exports=function(e,t){var n,o,s;return n=function(e){var t=i.copyOptions(e);return i.ensureSpacesExists(t),t}(t),o=r(e,n),s="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(o,function(e,t){return e===s?"_":t},n.spaces):JSON.stringify(o,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},3210:(e,t,n)=>{"use strict";let i=n(1024),r=n(9623),o=n(8290),s=n(8262),a=n(6842),l=n(6216),c=n(7114);function d(e,t){if(Array.isArray(e))return e.map(e=>d(e));let{inputs:n,...u}=e;if(n){t=[];for(let e of n){let n={...e,__proto__:s.prototype};n.map&&(n.map={...n.map,__proto__:a.prototype}),t.push(n)}}if(u.nodes&&(u.nodes=e.nodes.map(e=>d(e,t))),u.source){let{inputId:e,...n}=u.source;u.source=n,null!=e&&(u.source.input=t[e])}if("root"===u.type)return new l(u);if("decl"===u.type)return new o(u);if("rule"===u.type)return new c(u);if("comment"===u.type)return new r(u);if("atrule"===u.type)return new i(u);throw new Error("Unknown node type: "+e.type)}e.exports=d,d.default=d},3211:(e,t)=>{"use strict";function n(e,t){return t.rules.some(t=>i(e,t))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},i){const r=t.RULES.types[i];return r&&!0!==r&&n(e,r)},t.shouldUseGroup=n,t.shouldUseRule=i},3215:()=>{},3224:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(3681))},3270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3151),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,i.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};t.default=r},3271:function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(3681))},3275:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,t:()=>i});var i,r=n(6763),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};!function(e){e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.BottomLeft=3]="BottomLeft",e[e.BottomCenter=4]="BottomCenter",e[e.BottomRight=5]="BottomRight"}(i||(i={}));let s=class extends r.Ay{constructor(){super(),this.labels=[],this.labels.push({},{},{},{},{},{})}setLabel(e,t,n,i){this.labels[e][t]={text:n,className:i},this.requestUpdate()}unsetLabel(e,t){delete this.labels[e][t],this.requestUpdate()}firstConnected(){this.classList.add("ff-container","ff-viewport-overlay")}render(){const e=this.labels;return r.qy`<div class="ff-row">
            <div class="ff-labels ff-top-left">${Object.keys(e[i.TopLeft]).map(t=>{const n=e[i.TopLeft][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
            <div class="ff-labels ff-top-center">${Object.keys(e[i.TopCenter]).map(t=>{const n=e[i.TopCenter][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
            <div class="ff-labels ff-top-right">${Object.keys(e[i.TopRight]).map(t=>{const n=e[i.TopRight][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
        </div><div class="ff-row">
            <div class="ff-labels ff-bottom-left">${Object.keys(e[i.BottomLeft]).map(t=>{const n=e[i.BottomLeft][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
            <div class="ff-labels ff-bottom-center">${Object.keys(e[i.BottomCenter]).map(t=>{const n=e[i.BottomCenter][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
            <div class="ff-labels ff-bottom-right">${Object.keys(e[i.BottomRight]).map(t=>{const n=e[i.BottomRight][t];return r.qy`<div class=${"ff-label "+n.className||0}>${n.text}</div>`})}</div>
        </div>`}};s=o([(0,r.EM)("ff-viewport-overlay")],s);const a=s},3331:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const i=Symbol("Publisher private data"),r=Symbol("Publisher strict option");class o{constructor(e){const t=!e||e.knownEvents;this[i]={[r]:t}}on(e,t,n){if(Array.isArray(e))return void e.forEach(e=>{this.on(e,t,n)});if(!t)throw new Error("missing callback function");let o=this[i][e];if(!o){if(this[i][r])throw new Error(`can't subscribe; unknown event: '${e}'`);o=this[i][e]=[]}let s={callback:t,context:n};o.push(s)}addEventListener(e,t,n){this.on(e,t,n)}once(e,t,n){if(Array.isArray(e))return void e.forEach(e=>{this.once(e,t,n)});const i=r=>{this.off(e,i,n),t.call(n,r)};i.cb=t,this.on(e,i,n)}off(e,t,n){if("object"==typeof e){if(Array.isArray(e))e.forEach(e=>{this.off(e,t,n)});else{const t=this[i];for(let n=0,i=Object.keys(t).length;n<i;++n){const n=t[e],i=[];for(let t=0,r=n.length;t<r;++t){const r=n[t];e&&r.context!==e&&i.push(r)}t[e]=i}}return}const r=this[i][e];if(!r)throw new Error(`can't unsubscribe; unknown event type: '${e}'`);const o=[];for(let e=0,i=r.length;e<i;++e){const i=r[e];(t&&t!==i.callback&&t!==i.callback.cb||n&&n!==i.context)&&o.push(i)}this[i][e]=o}removeEventListener(e,t,n){this.off(e,t,n)}emit(e,t){let n,o;if("string"==typeof e?(n=e,o=t):(n=e.type,o=e),!n)throw new Error(`empty or invalid event type: '${n}'`);const s=this[i],a=s[n];if(!a){if(s[r])throw new Error(`can't emit; unknown event type: '${n}'`);return!1}for(let e=0,t=a.length;e<t;++e){const t=a[e];t.context?t.callback.call(t.context,o):t.callback(o)}return 0!=a.length}addEvent(e){this[i][e]||(this[i][e]=[])}addEvents(...e){e.forEach(e=>{this[i][e]||(this[i][e]=[])})}hasEvent(e){return!!this[i][e]}listEvents(){return Object.getOwnPropertyNames(this[i])}}},3350:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var i=n(3423),r=n(4949),o=n(3074),s=n(3889),a=n(9616),l=n(8313),c=n(7801),d=n(9519),u=n(7832),h=n(3198),p=(n(7891),n(8415),n(2642),n(2791)),m=n(9337),f=n(3675),g=n(3600),v=n(3019),y=n(161),b=n(4085),A=n(9309),_=n(8172);class w extends o.Ay{get model(){return this.getComponent(a.A)}get meta(){return this.getComponent(l.A,!0)}get reader(){return this.getGraphComponent(c.Ay,!0)}get language(){return this.getGraphComponent(m.A,!0)}get audio(){return this.getGraphComponent(v.A,!0)}get snapshots(){return this.getGraphComponent(b.A,!0)}get articles(){const e=this.meta;return e?e.articles:null}get arManager(){return this.system.getMainComponent(p.A)}get assetManager(){return this.system.getMainComponent(y.A)}get renderer(){return this.getMainComponent(s.A)}get assetReader(){return this.getMainComponent(g.A)}get activeAnnotation(){return this._activeAnnotation}set activeAnnotation(e){if(e!==this._activeAnnotation){const t=this._activeAnnotation;t&&(t.set("expanded",!1),this.updateSprite(t)),this._activeAnnotation=e,e&&(e.set("expanded",!0),this.updateSprite(e),this._activeView&&(this._truncateLock=!0,this._activeView=!1));const n=this.ins;n.marker.setValue(e?e.data.marker:"",!0),n.title.setValue(e?e.title:"",!0),n.lead.setValue(e?e.lead:"",!0),n.tags.setValue(e?e.tags.join(", "):"",!0),n.style.setOption(e?e.data.style:h.A.defaultTypeName,!0),n.scale.setValue(e?100*e.data.scale*(0,d.A)(this.model.ins.localUnits.getValidatedValue(),f.uj.m):1,!0),n.offset.setValue(e?100*e.data.offset*(0,d.A)(this.model.ins.localUnits.getValidatedValue(),f.uj.m):0,!0),n.tilt.setValue(e?e.data.tilt:0,!0),n.azimuth.setValue(e?e.data.azimuth:0,!0),n.color.setValue(e?e.data.color.slice():[1,1,1],!0);const i=this.reader.articles;if(i.length){const t=i.map(e=>e.article.title);t.unshift("(none)"),n.article.setOptions(t);const r=e?i.find(t=>t.article.id===e.data.articleId):null;n.article.setValue(r?i.indexOf(r)+1:0,!0)}else n.article.setOptions(["(none)"]),n.article.setValue(0);n.audioId.setValue(e?e.data.audioId:null,!0),n.image.setValue(e?e.data.imageUri:"",!0),n.imageCredit.setValue(e?e.imageCredit:"",!0),n.imageAltText.setValue(e?e.imageAltText:"",!0),this.emit({type:"annotation-update",annotation:e})}}get hasAnnotations(){return Object.keys(this._annotations).length>0}constructor(e,t){super(e,t),this.ins=this.addInputs(w.ins),this._activeAnnotation=null,this._annotations={},this._viewports=new Set,this._sprites={},this._truncateLock=!1,this._activeView=!1,this._hasNewActiveTags=!1,this.addEvents("active-annotation","group"),this.onSpriteClick=this.onSpriteClick.bind(this),this.onSpriteLink=this.onSpriteLink.bind(this),this.on("pointer-up",this.onPointerUp,this),this.system.on("pointer-up",this.onSystemPointerUp,this),this.arManager.outs.isPresenting.on("value",this.handleARStateChange,this),this.language.outs.activeLanguage.on("value",this.updateLanguage,this),this.object3D=new r.A,this.object3D.name="AnnotationView"}setActiveAnnotationById(e){this.activeAnnotation=this._annotations[e]}update(e){super.update(e);const t=this.ins,n=this.object3D,i=this.activeAnnotation;if(t.unitScale.changed&&(n.scale.setScalar(t.unitScale.value),n.updateMatrix()),t.activeTags.changed){const e=t.activeTags.value.split(",").map(e=>e.trim()).filter(e=>e);for(const t in this._annotations){const n=this._annotations[t],i=n.tags;let r=0===i.length;e.forEach(e=>{i.indexOf(e)>=0&&(r=!0,this._hasNewActiveTags=!0)}),n.set("visible",r),this.updateSprite(n)}}if(t.visible.changed&&n.setVisible(t.visible.value),i){if(t.marker.changed&&i.set("marker",t.marker.value),t.title.changed&&(i.title=t.title.value),t.lead.changed&&(i.lead=t.lead.value),t.tags.changed&&(i.tags=t.tags.value.split(",").map(e=>e.trim()).filter(e=>e),this.emit({type:"tag-update"})),t.style.changed&&(i.set("style",t.style.getOptionText()),this.createSprite(i)),t.scale.changed&&i.set("scale",t.scale.value*(0,d.A)(f.uj.m,this.model.ins.localUnits.getValidatedValue())*.01),t.offset.changed&&i.set("offset",t.offset.value*(0,d.A)(f.uj.m,this.model.ins.localUnits.getValidatedValue())*.01),t.tilt.changed&&i.set("tilt",t.tilt.value),t.azimuth.changed&&i.set("azimuth",t.azimuth.value),t.color.changed&&i.set("color",t.color.value.slice()),t.image.changed&&i.set("imageUri",t.image.value),t.imageCredit.changed&&(i.imageCredit=t.imageCredit.value),t.imageAltText.changed&&(i.imageAltText=t.imageAltText.value),t.article.changed){const e=this.reader.articles,n=e&&e[t.article.getValidatedValue()-1];i.set("articleId",n?n.article.id:"")}t.audioId.changed&&i.set("audioId",t.audioId.value),this.updateSprite(i),this.emit({type:"annotation-update",annotation:i})}return!0}tock(){if(this.updated)return!0}postRender(e){const t=e.viewport;this._viewports.has(t)||(t.on("dispose",this.onViewportDispose,this),this._viewports.add(t));if(this.object3D.render(t.overlay,e.camera),this._truncateLock){const e=this.activeAnnotation.data,t=this._sprites[e.id];this.snapshots.outs.tweening.value&&(t.isAnimating=!0,this.snapshots.outs.tweening.once("value",()=>{t.isAnimating=!1},this)),this._truncateLock=!1}this._hasNewActiveTags&&(this.emit({type:"active-tag-update"}),this._hasNewActiveTags=!1)}dispose(){this.object3D.dispose(),this.off("pointer-up",this.onPointerUp,this),this.system.off("pointer-up",this.onSystemPointerUp,this),this.arManager.outs.isPresenting.off("value",this.handleARStateChange,this),this.language.outs.activeLanguage.off("value",this.updateLanguage,this),this._viewports.forEach(e=>e.off("dispose",this.onViewportDispose,this)),this._viewports.clear(),super.dispose()}getAnnotations(){return Object.keys(this._annotations).map(e=>this._annotations[e])}getAnnotationById(e){return this._annotations[e]}addAnnotation(e){this._annotations[e.id]=e,this.createSprite(e),Object.keys(e.data.titles).forEach(e=>{this.language.addLanguage(f.aL[e])}),Object.keys(e.data.leads).forEach(e=>{this.language.addLanguage(f.aL[e])}),this.changed=!0}removeAnnotation(e){const t=Object.keys(this._annotations);if(delete this._annotations[e.id],this.removeSprite(e),e===this.activeAnnotation){const n=Math.min(t.indexOf(e.id)+1,t.length-1);this.activeAnnotation=n<0?null:this._annotations[t[n]],e.tags.length>0&&this.emit({type:"tag-update"})}this.changed=!0}updateAnnotation(e,t){t&&this.updateSprite(e),this.changed=!0}getSprite(e){return this._sprites[e.id]}toJSON(){const e=super.toJSON(),t=this.toData();return t&&(e.data=t),e}fromJSON(e){e.data&&this.fromData(e.data)}toData(){const e=Object.keys(this._annotations);return 0===e.length?null:e.map(e=>this._annotations[e].toJSON())}fromData(e){const t=this.language.outs.activeLanguage.value;e.forEach(e=>{let n=new u.A(e);n.language=t,this.addAnnotation(n)}),this.emit({type:"tag-update"})}handleARStateChange(){for(const e in this._annotations){const t=this._annotations[e];this._sprites[t.id].isAdaptive=!this.arManager.outs.isPresenting.value}}onPointerUp(e){if(e.isDragging)return;let t=e.object3D;for(;t&&!t.isHTMLSprite;)t=t.parent;const n=t&&t.annotation;n&&(this.emit({type:"click",sprite:t,annotation:n}),e.stopPropagation=!0)}onSystemPointerUp(e){e.isDragging||this.emit({type:"click",sprite:null,annotation:null})}onViewportDispose(e){this.object3D.disposeHTMLElements(e.viewport.overlay)}onSpriteClick(e){this.emit(e);const t=e.annotation;if(t&&t.data.viewId.length&&!this.arManager.outs.isPresenting.value){this.normalizeViewOrbit(t.data.viewId);const e=this.snapshots.getTargetProperties().findIndex(e=>"ActiveId"==e.name);if(e>=0){this.snapshots.getState(t.data.viewId).values[e]=t.data.id}const n=this.getMainComponent(A.A);this.snapshots.tweenTo(t.data.viewId,n.context.secondsElapsed),this._activeView=!0}}onSpriteLink(e){this.reader&&(this.reader.ins.articleId.setValue(e.annotation.data.articleId),this.reader.ins.enabled.setValue(!0),this.reader.ins.focus.setValue(!0))}createSprite(e){this.removeSprite(e);const t=h.A.createInstance(e);t.addEventListener("click",this.onSpriteClick),t.addEventListener("link",this.onSpriteLink),t.assetManager=this.assetManager,t.audioManager=this.audio,this._sprites[e.id]=t,this.object3D.add(t),this.registerPickableObject3D(t,!0)}removeSprite(e){const t=this._sprites[e.id];t&&(t.removeEventListener("click",this.onSpriteClick),t.removeEventListener("link",this.onSpriteLink),t.dispose(),this._sprites[e.id]=void 0,this.object3D.remove(t),this.unregisterPickableObject3D(t,!0))}updateSprite(e){const t=this._sprites[e.id];t&&t.update()}updateLanguage(){if(!this.getComponent(a.A,!0))return;const e=this.ins,t=this._activeAnnotation,n=this.language;this.getAnnotations().forEach(e=>{e.language=n.outs.activeLanguage.value}),e.activeTags.set();for(const e in this._annotations){const t=this._annotations[e],n=this._sprites[t.id];n&&n.update()}e.title.setValue(t?t.title:"",!0),e.lead.setValue(t?t.lead:"",!0),e.tags.setValue(t?t.tags.join(", "):""),e.imageCredit.setValue(t?t.imageCredit:"",!0),e.imageAltText.setValue(t?t.imageAltText:"",!0);const i=this.reader.articles.map(e=>e.article.title);i.unshift("(none)"),e.article.setOptions(i)}normalizeViewOrbit(e){const t=this.snapshots.getTargetProperties().findIndex(e=>"Orbit"==e.name),n=this.snapshots.getState(e),i=this.snapshots.getCurrentValues()[t];let r=0;i.forEach((e,i)=>{const o=Math.round((e-n.values[t][i])/360);n.values[t][i]+=360*o,r+=Math.abs(e-n.values[t][i])});const o=this.getGraphComponent(_.A).outs.boundingRadius.value,s=this.snapshots.getTargetProperties().findIndex(e=>"Offset"==e.name),a=this.snapshots.getCurrentValues()[s],l=n.values[s],c=Math.sqrt(Math.pow(l[0]-a[0],2)+Math.pow(l[1]-a[1],2)+Math.pow(l[2]-a[2],2));n.duration=Math.min(Math.max(r/180,c/o,.3),1.5)}}w.typeName="CVAnnotationView",w.ins={unitScale:i.gK.Number("Transform.UnitScale",{preset:1,precision:5}),activeTags:i.gK.String("Tags.Active"),title:i.gK.String("Annotation.Title"),lead:i.gK.String("Annotation.Lead"),marker:i.gK.String("Annotation.Marker"),tags:i.gK.String("Annotation.Tags"),style:i.gK.Option("Annotation.Style",h.A.typeNames),scale:i.gK.Scale("Annotation.Scale",{preset:1,precision:3}),offset:i.gK.Number("Annotation.Offset",{preset:0,precision:3}),article:i.gK.Option("Annotation.Article",[]),image:i.gK.String("Annotation.Image"),imageCredit:i.gK.String("Image.Credit"),imageAltText:i.gK.String("Image.AltText"),audioId:i.gK.String("Annotation.AudioID"),tilt:i.gK.Number("Annotation.Tilt"),azimuth:i.gK.Number("Annotation.Azimuth"),color:i.gK.ColorRGB("Annotation.Color")}},3365:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(1071),r=n(3423),o=n(2902);class s extends r.Ay{constructor(){super(...arguments),this.activeDocument=null}get documentProvider(){return this.getGraphComponent(o.A)}startObserving(){const e=this.documentProvider;e.on("active-component",this.onActiveDocumentEvent,this),e.activeComponent&&(this.activeDocument=e.activeComponent,this.onActiveDocument(null,e.activeComponent))}stopObserving(){const e=this.documentProvider;e.off("active-component",this.onActiveDocumentEvent,this),e.activeComponent&&(this.activeDocument=null,this.onActiveDocument(e.activeComponent,null))}onActiveDocument(e,t){}onActiveDocumentEvent(e){this.activeDocument=e.next,this.onActiveDocument(e.previous,e.next)}}s.typeName="CVDocumentObserver";class a extends s{constructor(){super(...arguments),this.activeNode=null}get nodeProvider(){return this.getGraphComponent(i.A)}startObserving(){super.startObserving();const e=this.nodeProvider;e.on("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=e.activeNode,this.onActiveNode(null,e.activeNode))}stopObserving(){const e=this.nodeProvider;e.off("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=null,this.onActiveNode(e.activeNode,null)),super.stopObserving()}onActiveNode(e,t){}onActiveNodeEvent(e){this.activeNode=e.next,this.onActiveNode(e.previous,e.next)}}a.typeName="CVNodeObserver"},3407:(e,t)=>{"use strict";t.OK=200,t.lf=302,t.hB=401},3423:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>c,gK:()=>r.gK});var i=n(3331),r=n(9733),o=n(449);class s extends i.A{constructor(e){super(),this.addEvent("property"),this.linkable=e,this.properties=[]}get customProperties(){return this.properties.filter(e=>e.custom)}dispose(){this.unlinkAllProperties()}isInputGroup(){return this===this.linkable.ins}isOutputGroup(){return this===this.linkable.outs}createProperties(e,t){return Object.keys(e).forEach((n,i)=>{const r=void 0===t?void 0:t+i,o=e[n];this.createProperty(o.path,o.schema,n,r)}),this}createProperty(e,t,n,i){const o=new r.Ay(e,t);return this.addProperty(o,n,i),o}createCustomProperty(e,t,n){const i=new r.Ay(e,t,!0);return this.addCustomProperty(i,n),i}addCustomProperty(e,t){const n=(0,o.A)(5);this.addProperty(e,n,t)}addProperty(e,t,n){if(e.group)throw new Error("can't add, property already part of a group");if(this[t])throw new Error(`key '${t}' already exists in group`);e._group=this,e._key=t,void 0===n?this.properties.push(e):this.properties.splice(n,0,e),this[t]=e,this.emit({type:"property",add:!0,remove:!1,property:e})}removeProperty(e){if(e.group!==this)throw new Error("can't remove, property not in this group");if(e.hasLinks())throw new Error("can't remove, property has links");if(this[e.key]!==e)throw new Error(`property key '${e.key}' not found in group`);this.properties.slice(this.properties.indexOf(e),1),delete this[e.key],e._group=null,e._key="",this.emit({type:"property",add:!1,remove:!0,property:e})}getProperty(e){const t=this[e];if(!t)throw new Error(`no property found with key '${e}'`);return t}getKeys(e=!1){const t=[];return this.properties.forEach(n=>{(e||"object"!==n.type)&&t.push(n.key)}),t}getValues(e=!1){const t=[];return this.properties.map(n=>{(e||"object"!==n.type)&&t.push(n.value)}),t}cloneValues(e=!1){const t=[];return this.properties.map(n=>{(e||"object"!==n.type)&&t.push(n.cloneValue())}),t}setValues(e){Object.keys(e).forEach(t=>this.getProperty(t).value=e[t])}copyValues(e){Object.keys(e).forEach(t=>this.getProperty(t).copyValue(e[t]))}unlinkAllProperties(){this.properties.forEach(e=>e.unlink())}toJSON(){let e=null;return this.properties.forEach(t=>{const n=t.toJSON();n&&(e=e||{},e[t.key]=n)}),e}fromJSON(e){Object.keys(e).forEach(t=>{const n=e[t];if(n.schema){const e=new r.Ay(n.path,n.schema,!0);this.addProperty(e,t)}})}linksFromJSON(e,t){Object.keys(e).forEach(n=>{this[n].fromJSON(e[n],t)})}}class a{constructor(e,t,n,i){this.typeName=c.getTypeName(t),this.didAdd=n,this.willRemove=i,this._registry=e,e.on(this.typeName,this.onComponent,this),this.component=e.get(t,!0),this.component&&n&&n(this.component)}dispose(){this._registry.off(this.typeName,this.onComponent,this),this.component=null,this.didAdd=null,this.willRemove=null}onComponent(e){e.add?(this.component=e.object,this.didAdd&&this.didAdd(e.object)):e.remove&&(this.willRemove&&this.willRemove(e.object),this.component=null)}}class l{constructor(e,t){this._typeName=t?c.getTypeName(t):null,this._id=t instanceof c?t.id:void 0,this._system=e}get component(){return this._id&&this._system.components.getById(this._id)||null}set component(e){if(e&&this._typeName&&!(e instanceof this._system.registry.getType(this._typeName)))throw new Error(`can't assign component of class '${e.constructor.name||"unknown"}' to link of class '${this._typeName}'`);this._id=e?e.id:void 0}}n(1860);class c extends i.A{static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||c.typeName}constructor(e,t){super({knownEvents:!1}),this.ins=new s(this),this.outs=new s(this),this.changed=!0,this.updated=!1,this._name="",this._tags=new Set,this._trackers=[],this.node=e,this.id=t}create(){this.node._addComponent(this),this.graph.isActive&&this.activate&&this.activate()}dispose(){this.graph.isActive&&this.deactivate&&this.deactivate(),this.emit({type:"dispose",component:this}),this.ins.dispose(),this.outs.dispose(),this._trackers.forEach(e=>e.dispose()),this.node&&(this.node._removeComponent(this),this.node=null)}get isNodeSingleton(){return this.constructor.isNodeSingleton}get isGraphSingleton(){return this.constructor.isGraphSingleton}get isSystemSingleton(){return this.constructor.isSystemSingleton}get typeName(){return this.constructor.typeName}get displayTypeName(){const e=this.typeName;return"Component"===e?e:e.substr(1)}get text(){return this.constructor.text}get icon(){return this.constructor.icon}get name(){return this._name}get displayName(){return this._name||this.text||this.displayTypeName}set name(e){this._name=e,this.emit({type:"change",component:this,what:"name"})}get tags(){return this._tags}addTag(e){this._tags.has(e)||(this._tags.add(e),this.node._addComponentTag(e,this))}removeTag(e){this._tags.has(e)&&(this._tags.delete(e),this.node._removeComponentTag(e,this))}get graph(){return this.node.graph}get system(){return this.node.system}get components(){return this.node.components}get isActive(){return this.graph.isActive}getComponent(e,t=!1){return this.node.components.get(e,t)}getComponents(e){return this.node.components.getArray(e)}getComponentsByTag(e){return this.node.components.getByTag(e)}createComponent(e){return this.node.createComponent(e)}getOrCreateComponent(e){return this.node.components.get(e,!0)||this.node.createComponent(e)}hasComponent(e){return this.node.components.has(e)}getGraphComponent(e,t=!1){return this.node.graph.components.get(e,t)}getGraphComponents(e){return this.node.graph.components.getArray(e)}getGraphComponentsByTag(e){return this.node.graph.components.getByTag(e)}hasGraphComponent(e){return this.node.graph.components.has(e)}getMainComponent(e,t=!1){return this.node.system.graph.components.get(e,t)}getMainComponents(e){return this.node.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.node.system.graph.components.getByTag(e)}hasMainComponent(e){return this.node.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.node.system.components.get(e,t)}getSystemComponents(e){return this.node.system.components.getArray(e)}getSystemComponentsByTag(e){return this.node.system.components.getByTag(e)}hasSystemComponent(e){return this.node.system.components.has(e)}getComponentById(e){return this.node.system.components.getById(e)}getNode(e,t=!1){return this.node.graph.nodes.get(e,t)}getNodes(e){return this.node.graph.nodes.getArray(e)}getNodesByTag(e){return this.node.graph.nodes.getByTag(e)}hasNode(e){return this.node.graph.nodes.has(e)}getMainNode(e,t=!1){return this.node.system.graph.nodes.get(e,t)}getMainNodes(e){return this.node.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.node.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.node.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.node.system.nodes.get(e,t)}getSystemNodes(e){return this.node.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.node.system.nodes.getByTag(e)}hasSystemNode(e){return this.node.system.nodes.has(e)}getNodeById(e){return this.node.system.nodes.getById(e)}activate(){}update(e){throw new Error("this should never be called")}tick(e){throw new Error("this should never be called")}tock(e){throw new Error("this should never be called")}deactivate(){}requestSort(){this.graph.requestSort()}is(e){const t=c.getTypeName(e);let n=this;do{if(n=Object.getPrototypeOf(n),n.constructor.typeName===t)return!0}while(n.constructor.typeName!==c.typeName);return!1}unlinkAllProperties(){this.ins.unlinkAllProperties(),this.outs.unlinkAllProperties()}resetChanged(){this.changed=!1;const e=this.ins.properties;for(let t=0,n=e.length;t<n;++t)e[t].changed=!1;const t=this.outs.properties;for(let e=0,n=t.length;e<n;++e)t[e].changed=!1}trackComponent(e,t,n){const i=new a(this.node.components,e,t,n);return this._trackers.push(i),i}referenceComponent(e){return new l(this.system,e)}toString(){return`${this.typeName}${this.name?" ("+this.name+")":""}`}dump(e=""){console.log(e+`%cComponent '${this.typeName}' (${this.displayName})`,"color: green"),this.ins.properties.forEach(t=>t.dump(e+"  IN  ")),this.outs.properties.forEach(t=>t.dump(e+"  OUT "))}toJSON(){let e={};const t=this.ins.toJSON();t&&(e.ins=t);const n=this.outs.toJSON();return n&&(e.outs=n),e}fromJSON(e){e.ins&&this.ins.fromJSON(e.ins),e.outs&&this.outs.fromJSON(e.outs)}referencesFromJSON(e){const t=this.system.components.getDictionary();e.ins&&this.ins.linksFromJSON(e.ins,t),e.outs&&this.outs.linksFromJSON(e.outs,t)}addCustomInput(e,t,n){return this.changed=!0,this.ins.createCustomProperty(e,t,n)}allowCustomInput(e){return!1}addCustomOutput(e,t,n){return this.outs.createCustomProperty(e,t,n)}allowCustomOutput(e){return!1}addInputs(e,t){return this.ins.createProperties(e,t)}addOutputs(e,t){return this.outs.createProperties(e,t)}}c.typeName="Component",c.text="",c.icon="",c.isNodeSingleton=!0,c.isGraphSingleton=!1,c.isSystemSingleton=!1,c.prototype.activate=null,c.prototype.update=null,c.prototype.tick=null,c.prototype.tock=null,c.prototype.deactivate=null},3501:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"săptămâni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,w:"o săptămână",ww:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(3681))},3506:function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,i){return t?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"}function i(e,t,n,i){return t?o(n)[0]:i?o(n)[1]:o(n)[2]}function r(e){return e%10==0||e>10&&e<20}function o(e){return t[e].split("_")}function s(e,t,n,s){var a=e+" ";return 1===e?a+i(e,t,n[0],s):t?a+(r(e)?o(n)[1]:o(n)[0]):s?a+o(n)[1]:a+(r(e)?o(n)[1]:o(n)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:n,ss:s,m:i,mm:s,h:i,hh:s,d:i,dd:s,M:i,MM:s,y:i,yy:s},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(3681))},3510:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(3681))},3534:(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var i=n(3869),r=n(4743);const o=new WeakMap,s=(0,r.u$)(e=>t=>{if(!(t instanceof r.Qh))throw new Error("unsafeHTML can only be used in text bindings");const n=o.get(t);if(void 0!==n&&(0,i.sO)(e)&&e===n.value&&t.value===n.fragment)return;const s=document.createElement("template");s.innerHTML=e;const a=document.importNode(s.content,!0);t.setValue(a),o.set(t,{value:e,fragment:a})})},3545:function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(3681))},3567:e=>{e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},3570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6241),r=n(5265),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match pattern "${e}"`,params:({schemaCode:e})=>r._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:s,it:a}=e,l=a.opts.unicodeRegExp?"u":"",c=n?r._`(new RegExp(${s}, ${l}))`:(0,i.usePattern)(e,o);e.fail$data(r._`!${c}.test(${t})`)}};t.default=o},3571:function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(3681))},3600:(e,t,n)=>{"use strict";n.d(t,{P:()=>kt,A:()=>Lt});var i=n(3423);class r{constructor(e){this._loadingManager=e}async getJSON(e){return this._loadingManager.itemStart(e),fetch(e,{headers:{Accept:"application/json"}}).then(t=>{if(!t.ok)throw this._loadingManager.itemError(e),this._loadingManager.itemEnd(e),new Error(`failed to fetch from '${e}', status: ${t.status} ${t.statusText}`);return this._loadingManager.itemEnd(e),t.json()})}async getText(e){return fetch(e,{headers:{Accept:e.endsWith(".html")?"text/html":"text/plain"}}).then(t=>{if(!t.ok)throw new Error(`failed to fetch from '${e}', status: ${t.status} ${t.statusText}`);return t.text()})}}var o=n(4640);const s=new WeakMap;class a extends o.aHM{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new o.Y9S(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,e=>{this.parse(e,t,i)},n,i)}parse(e,t,n=()=>{}){this.decodeDracoFile(e,t,null,null,o.er$,n).catch(n)}decodeDracoFile(e,t,n,i,r=o.Zr2,s=()=>{}){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(s)}decodeGeometry(e,t){const n=JSON.stringify(t);if(s.has(e)){const t=s.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(n=>(i=n,new Promise((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),s.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new o.LoY;e.index&&t.setIndex(new o.THS(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,s=i.array,a=i.itemSize,l=new o.THS(s,a);"color"===r&&(this._assignVertexColorSpace(l,i.vertexColorSpace),l.normalized=s instanceof Float32Array==!1),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==o.er$)return;const n=new o.Q1f;for(let t=0,i=e.count;t<i;t++)n.fromBufferAttribute(e,t),o.ppV.colorSpaceToWorking(n,o.er$),e.setXYZ(t,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new o.Y9S(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,i)=>{n.load(e,t,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=l.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function l(){let e,t;function n(e,t,n,i,r,o){const s=o.num_components(),a=n.num_points()*s,l=a*r.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),d=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,d);const u=new r(e.HEAPF32.buffer,d,a).slice();return e._free(d),{name:i,array:u,itemSize:s}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const i=r.buffer,o=r.taskConfig;t.then(e=>{const t=e.draco,s=new t.Decoder;try{const e=function(e,t,i,r){const o=r.attributeIDs,s=r.attributeTypes;let a,l;const c=t.GetEncodedGeometryType(i);if(c===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeArrayToMesh(i,i.byteLength,a);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeArrayToPointCloud(i,i.byteLength,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const d={index:null,attributes:[]};for(const i in o){const l=self[s[i]];let c,u;if(r.useUniqueIDs)u=o[i],c=t.GetAttributeByUniqueId(a,u);else{if(u=t.GetAttributeId(a,e[o[i]]),-1===u)continue;c=t.GetAttribute(a,u)}const h=n(e,t,a,i,l,c);"color"===i&&(h.vertexColorSpace=r.vertexColorSpace),d.attributes.push(h)}c===e.TRIANGULAR_MESH&&(d.index=function(e,t,n){const i=n.num_faces(),r=3*i,o=4*r,s=e._malloc(o);t.GetTrianglesUInt32Array(n,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,r).slice();return e._free(s),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),d}(t,s,new Int8Array(i),o),a=e.attributes.map(e=>e.array.buffer);e.index&&a.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},a)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(s)}})}}}var c=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var n,i=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",r=WebAssembly.instantiate(o(i),{}).then(function(e){(n=e.instance).exports.__wasm_call_ctors()});function o(e){for(var n=new Uint8Array(e.length),i=0;i<e.length;++i){var r=e.charCodeAt(i);n[i]=r>96?r-97:r>64?r-39:r+4}var o=0;for(i=0;i<e.length;++i)n[o++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,o)}function s(e,t,i,r,o,s){var a=n.exports.sbrk,l=i+3&-4,c=a(l*r),d=a(o.length),u=new Uint8Array(n.exports.memory.buffer);u.set(o,d);var h=e(c,i,r,d,o.length);if(0==h&&s&&s(c,l,r),t.set(u.subarray(c,c+i*r)),a(c-a(0)),0!=h)throw new Error("Malformed buffer data: "+h)}var a={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},c=[],d=0;function u(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var n=e.data;t.pending-=n.count,t.requests[n.id][n.action](n.value),delete t.requests[n.id]},t}function h(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(o(i))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+s.toString()+p.toString(),n=new Blob([t],{type:"text/javascript"}),r=URL.createObjectURL(n),a=0;a<e;++a)c[a]=u(r);URL.revokeObjectURL(r)}function p(e){r.then(function(){var t=e.data;try{var i=new Uint8Array(t.count*t.size);s(n.exports[t.mode],i,t.count,t.size,t.source,n.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:i},[i.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}})}return{ready:r,supported:!0,useWorkers:function(e){h(e)},decodeVertexBuffer:function(e,t,i,r,o){s(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[a[o]])},decodeIndexBuffer:function(e,t,i,r){s(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence:function(e,t,i,r){s(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer:function(e,t,i,r,o,c){s(n.exports[l[o]],e,t,i,r,n.exports[a[c]])},decodeGltfBufferAsync:function(e,t,i,o,u){return c.length>0?function(e,t,n,i,r){for(var o=c[0],s=1;s<c.length;++s)c[s].pending<o.pending&&(o=c[s]);return new Promise(function(s,a){var l=new Uint8Array(n),c=d++;o.pending+=e,o.requests[c]={resolve:s,reject:a},o.object.postMessage({id:c,count:e,size:t,source:l,mode:i,filter:r},[l.buffer])})}(e,t,i,l[o],a[u]):r.then(function(){var r=new Uint8Array(e*t);return s(n.exports[l[o]],r,e,t,i,n.exports[a[u]]),r})}}}();function d(e,t){if(t===o.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===o.rYR||t===o.O49){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(t===o.rYR)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class u extends o.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new v(e)}),this.register(function(e){return new y(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new k(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new x(e)}),this.register(function(e){return new g(e)}),this.register(function(e){return new C(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new M(e)}),this.register(function(e){return new E(e)}),this.register(function(e){return new m(e)}),this.register(function(e){return new L(e)}),this.register(function(e){return new D(e)})}load(e,t,n,i){const r=this;let s;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){const t=o.r6x.extractUrlBase(e);s=o.r6x.resolveURL(t,this.path)}else s=o.r6x.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},l=new o.Y9S(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(n){try{r.parse(n,s,function(n){t(n),r.manager.itemEnd(e)},a)}catch(e){a(e)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},s={},a=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(a.decode(new Uint8Array(e,0,4))===I){try{o[p.KHR_BINARY_GLTF]=new P(e)}catch(e){return void(i&&i(e))}r=JSON.parse(o[p.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new ae(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[t.name]=t,o[t.name]=!0}if(r.extensionsUsed)for(let e=0;e<r.extensionsUsed.length;++e){const t=r.extensionsUsed[e],n=r.extensionsRequired||[];switch(t){case p.KHR_MATERIALS_UNLIT:o[t]=new f;break;case p.KHR_DRACO_MESH_COMPRESSION:o[t]=new B(r,this.dracoLoader);break;case p.KHR_TEXTURE_TRANSFORM:o[t]=new N;break;case p.KHR_MESH_QUANTIZATION:o[t]=new U;break;default:n.indexOf(t)>=0&&void 0===s[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(o),l.setPlugins(s),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function h(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const p={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class m{constructor(e){this.parser=e,this.name=p.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,s=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let a;const l=new o.Q1f(16777215);void 0!==s.color&&l.setRGB(s.color[0],s.color[1],s.color[2],o.Zr2);const c=void 0!==s.range?s.range:0;switch(s.type){case"directional":a=new o.ZyN(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new o.HiM(l),a.distance=c;break;case"spot":a=new o.nCl(l),a.distance=c,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,a.angle=s.spot.outerConeAngle,a.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return a.position.set(0,0,0),te(a,s),void 0!==s.intensity&&(a.intensity=s.intensity),a.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then(function(e){return n._getNodeRef(t.cache,r,e)})}}class f{constructor(){this.name=p.KHR_MATERIALS_UNLIT}getMaterialType(){return o.V9B}extendParams(e,t,n){const i=[];e.color=new o.Q1f(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],o.Zr2),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,o.er$))}return Promise.all(i)}}class g{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class v{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new o.I9Y(e,e)}return Promise.all(r)}}class y{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}class b{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class A{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new o.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];if(void 0!==s.sheenColorFactor){const e=s.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],o.Zr2)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,o.er$)),void 0!==s.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(r)}}class _{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class w{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return t.attenuationColor=(new o.Q1f).setRGB(a[0],a[1],a[2],o.Zr2),Promise.all(r)}}class x{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class C{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],s=i.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return t.specularColor=(new o.Q1f).setRGB(a[0],a[1],a[2],o.Zr2),void 0!==s.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,o.er$)),Promise.all(r)}}class E{constructor(e){this.parser=e,this.name=p.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class M{constructor(e){this.parser=e,this.name=p.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class S{constructor(e){this.parser=e,this.name=p.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class T{constructor(e){this.parser=e,this.name=p.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return n.loadTextureImage(e,o.source,a)}}class k{constructor(e){this.parser=e,this.name=p.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return n.loadTextureImage(e,o.source,a)}}class L{constructor(e){this.name=p.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then(function(e){return e.buffer}):r.ready.then(function(){const t=new ArrayBuffer(o*s);return r.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t})})}return null}}class D{constructor(e){this.name=p.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const e of i.primitives)if(e.mode!==j.TRIANGLES&&e.mode!==j.TRIANGLE_STRIP&&e.mode!==j.TRIANGLE_FAN&&void 0!==e.mode)return null;const r=n.extensions[this.name].attributes,s=[],a={};for(const e in r)s.push(this.parser.getDependency("accessor",r[e]).then(t=>(a[e]=t,a[e])));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const e of n){const t=new o.kn4,n=new o.Pq0,s=new o.PTz,l=new o.Pq0(1,1,1),c=new o.ZLX(e.geometry,e.material,i);for(let e=0;e<i;e++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&s.fromBufferAttribute(a.ROTATION,e),a.SCALE&&l.fromBufferAttribute(a.SCALE,e),c.setMatrixAt(e,t.compose(n,s,l));for(const t in a)if("_COLOR_0"===t){const e=a[t];c.instanceColor=new o.uWO(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);o.B69.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),r.push(c)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]}))}}const I="glTF",R=1313821514,O=5130562;class P{constructor(e){this.name=p.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==I)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<i;){const t=r.getUint32(o,!0);o+=4;const i=r.getUint32(o,!0);if(o+=4,i===R){const i=new Uint8Array(e,12+o,t);this.content=n.decode(i)}else if(i===O){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class B{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=p.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},l={},c={};for(const e in s){const t=$[e]||e.toLowerCase();a[t]=s[e]}for(const t in e.attributes){const i=$[t]||t.toLowerCase();if(void 0!==s[t]){const r=n.accessors[e.attributes[t]],o=V[r.componentType];c[i]=o.name,l[i]=!0===r.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t,n){i.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],i=l[t];void 0!==i&&(n.normalized=i)}t(e)},a,c,o.Zr2,n)})})}}class N{constructor(){this.name=p.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class U{constructor(){this.name=p.KHR_MESH_QUANTIZATION}}class F extends o.lGw{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let e=0;e!==i;e++)t[e]=n[r+e];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=i-t,d=(n-t)/c,u=d*d,h=u*d,p=e*l,m=p-l,f=-2*h+3*u,g=h-u,v=1-f,y=g-u+d;for(let e=0;e!==s;e++){const t=o[m+e+s],n=o[m+e+a]*c,i=o[p+e+s],l=o[p+e]*c;r[e]=v*t+y*n+f*i+g*l}return r}}const z=new o.PTz;class H extends F{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return z.fromArray(r).normalize().toArray(r),r}}const j={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},V={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Y={9728:o.hxR,9729:o.k6q,9984:o.pHI,9985:o.kRr,9986:o.Cfg,9987:o.$_I},G={33071:o.ghU,33648:o.kTW,10497:o.GJx},Q={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},W={CUBICSPLINE:void 0,LINEAR:o.PJ3,STEP:o.ljd},K="OPAQUE",Z="MASK",X="BLEND";function J(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new o._4j({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.hB5})),e.DefaultMaterial}function ee(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function te(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ne(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ie(e){let t;const n=e.extensions&&e.extensions[p.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+re(n.attributes):e.indices+":"+re(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,i=e.targets.length;n<i;n++)t+=":"+re(e.targets[n]);return t}function re(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function oe(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const se=new o.kn4;class ae{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new h,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,r=!1,s=-1;if("undefined"!=typeof navigator){const e=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(e);const t=e.match(/Version\/(\d+)/);i=n&&t?parseInt(t[1],10):-1,r=e.indexOf("Firefox")>-1,s=r?e.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||n&&i<17||r&&s<98?this.textureLoader=new o.Tap(this.options.manager):this.textureLoader=new o.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new o.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return ee(r,o,i),te(o,i),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(o)})).then(function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n].joints;for(let t=0,n=i.length;t<n;t++)e[i[t]].isBone=!0}for(let t=0,i=e.length;t<i;t++){const i=e[t];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,i]of e.children.entries())r(i,t.children[n])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":i=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map(function(t,i){return n.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[p.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(e,r){n.load(o.r6x.resolveURL(t.uri,i.path),e,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=Q[i.type],t=V[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new o.THS(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(e){const r=e[0],s=Q[i.type],a=V[i.componentType],l=a.BYTES_PER_ELEMENT,c=l*s,d=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let p,m;if(u&&u!==c){const e=Math.floor(d/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let c=t.cache.get(n);c||(p=new a(r,e*u,i.count*u/l),c=new o.eB$(p,u/l),t.cache.add(n,c)),m=new o.eHs(c,s,d%u/l,h)}else p=null===r?new a(i.count*s):new a(r,d,i.count*s),m=new o.THS(p,s,h);if(void 0!==i.sparse){const t=Q.SCALAR,n=V[i.sparse.indices.componentType],l=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,d=new n(e[1],l,i.sparse.count*t),u=new a(e[2],c,i.sparse.count*s);null!==r&&(m=new o.THS(m.array.slice(),m.itemSize,m.normalized)),m.normalized=!1;for(let e=0,t=d.length;e<t;e++){const t=d[e];if(m.setX(t,u[e*s]),s>=2&&m.setY(t,u[e*s+1]),s>=3&&m.setZ(t,u[e*s+2]),s>=4&&m.setW(t,u[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}m.normalized=h}return m})}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,r=this.json,s=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=s.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(r.samplers||{})[s.sampler]||{};return t.magFilter=Y[n.magFilter]||o.k6q,t.minFilter=Y[n.minFilter]||o.$_I,t.wrapS=G[n.wrapS]||o.GJx,t.wrapT=G[n.wrapT]||o.GJx,t.generateMipmaps=!t.isCompressedTexture&&t.minFilter!==o.hxR&&t.minFilter!==o.k6q,i.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const s=i.images[e],a=self.URL||self.webkitURL;let l=s.uri||"",c=!1;if(void 0!==s.bufferView)l=n.getDependency("bufferView",s.bufferView).then(function(e){c=!0;const t=new Blob([e],{type:s.mimeType});return l=a.createObjectURL(t),l});else if(void 0===s.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(e){return new Promise(function(n,i){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new o.gPd(e);t.needsUpdate=!0,n(t)}),t.load(o.r6x.resolveURL(e,r.path),s,void 0,i)})}).then(function(e){var t;return!0===c&&a.revokeObjectURL(l),te(e,s),e.userData.mimeType=s.mimeType||((t=s.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":t.search(/\.ktx2($|\?)/i)>0||0===t.search(/^data\:image\/ktx2/)?"image/ktx2":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),e});return this.sourceCache[e]=d,d}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[p.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[p.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[p.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==i&&(o.colorSpace=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new o.BH$,o.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new o.mrM,o.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||s){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),s&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return o._4j}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let s;const a={},l=[];if((r.extensions||{})[p.KHR_MATERIALS_UNLIT]){const e=i[p.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),l.push(e.extendParams(a,r,t))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new o.Q1f(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],o.Zr2),a.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(a,"map",n.baseColorTexture,o.er$)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===r.doubleSided&&(a.side=o.$EB);const c=r.alphaMode||K;if(c===X?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===Z&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&s!==o.V9B&&(l.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new o.I9Y(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&s!==o.V9B&&(l.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&s!==o.V9B){const e=r.emissiveFactor;a.emissive=(new o.Q1f).setRGB(e[0],e[1],e[2],o.Zr2)}return void 0!==r.emissiveTexture&&s!==o.V9B&&l.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,o.er$)),Promise.all(l).then(function(){const n=new s(a);return r.name&&(n.name=r.name),te(n,r),t.associations.set(n,{materials:e}),r.extensions&&ee(i,n,r),n})}createUniqueName(e){const t=o.Nwf.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[p.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return le(n,e,t)})}const s=[];for(let n=0,a=e.length;n<a;n++){const a=e[n],l=ie(a),c=i[l];if(c)s.push(c.promise);else{let e;e=a.extensions&&a.extensions[p.KHR_DRACO_MESH_COMPRESSION]?r(a):le(new o.LoY,a,t),i[l]={primitive:a,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],s=r.primitives,a=[];for(let e=0,t=s.length;e<t;e++){const t=void 0===s[e].material?J(this.cache):this.getDependency("material",s[e].material);a.push(t)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(n){const a=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,u=l.length;n<u;n++){const u=l[n],h=s[n];let p;const m=a[n];if(h.mode===j.TRIANGLES||h.mode===j.TRIANGLE_STRIP||h.mode===j.TRIANGLE_FAN||void 0===h.mode)p=!0===r.isSkinnedMesh?new o.I46(u,m):new o.eaF(u,m),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),h.mode===j.TRIANGLE_STRIP?p.geometry=d(p.geometry,o.O49):h.mode===j.TRIANGLE_FAN&&(p.geometry=d(p.geometry,o.rYR));else if(h.mode===j.LINES)p=new o.DXC(u,m);else if(h.mode===j.LINE_STRIP)p=new o.N1A(u,m);else if(h.mode===j.LINE_LOOP)p=new o.FCc(u,m);else{if(h.mode!==j.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);p=new o.ONl(u,m)}Object.keys(p.geometry.morphAttributes).length>0&&ne(p,r),p.name=t.createUniqueName(r.name||"mesh_"+e),te(p,r),h.extensions&&ee(i,p,h),t.assignFinalMaterial(p),c.push(p)}for(let n=0,i=c.length;n<i;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return r.extensions&&ee(i,c[0],r),c[0];const u=new o.YJl;r.extensions&&ee(i,u,r),t.associations.set(u,{meshes:e});for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new o.ubm(o.cj9.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new o.qUd(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),te(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,i=t.joints.length;e<i;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const n=e.pop(),i=e,r=[],s=[];for(let e=0,a=i.length;e<a;e++){const a=i[e];if(a){r.push(a);const t=new o.kn4;null!==n&&t.fromArray(n.array,16*e),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new o.EAD(r,s)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,s=[],a=[],l=[],c=[],d=[];for(let e=0,t=i.channels.length;e<t;e++){const t=i.channels[e],n=i.samplers[t.sampler],r=t.target,o=r.node,u=void 0!==i.parameters?i.parameters[n.input]:n.input,h=void 0!==i.parameters?i.parameters[n.output]:n.output;void 0!==r.node&&(s.push(this.getDependency("node",o)),a.push(this.getDependency("accessor",u)),l.push(this.getDependency("accessor",h)),c.push(n),d.push(r))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(e){const t=e[0],i=e[1],s=e[2],a=e[3],l=e[4],c=[];for(let e=0,r=t.length;e<r;e++){const r=t[e],o=i[e],d=s[e],u=a[e],h=l[e];if(void 0===r)continue;r.updateMatrix&&r.updateMatrix();const p=n._createAnimationTracks(r,o,d,u,h);if(p)for(let e=0;e<p.length;e++)c.push(p[e])}return new o.tz3(r,void 0,c)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[];for(let e=0,n=o.length;e<n;e++)r.push(t.getDependency("node",o[e]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),s]).then(function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(i,se)});for(let e=0,i=n.length;e<i;e++)t.add(n[e]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],s=r.name?i.createUniqueName(r.name):"",a=[],l=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&a.push(l),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then(function(e){return i._getNodeRef(i.cameraCache,r.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){a.push(e)}),this.nodeCache[e]=Promise.all(a).then(function(t){let a;if(a=!0===r.isBone?new o.$Kf:t.length>1?new o.YJl:1===t.length?t[0]:new o.B69,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(r.name&&(a.userData.name=r.name,a.name=s),te(a,r),r.extensions&&ee(n,a,r),void 0!==r.matrix){const e=new o.kn4;e.fromArray(r.matrix),a.applyMatrix4(e)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);if(i.associations.has(a)){if(void 0!==r.mesh&&i.meshCache.refs[r.mesh]>1){const e=i.associations.get(a);i.associations.set(a,{...e})}}else i.associations.set(a,{});return i.associations.get(a).nodes=e,a}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new o.YJl;n.name&&(r.name=i.createUniqueName(n.name)),te(r,n),n.extensions&&ee(t,r,n);const s=n.nodes||[],a=[];for(let e=0,t=s.length;e<t;e++)a.push(i.getDependency("node",s[e]));return Promise.all(a).then(function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof o.imn||e instanceof o.gPd)&&t.set(e,n);return e.traverse(e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)}),t})(r),r})}_createAnimationTracks(e,t,n,i,r){const s=[],a=e.name?e.name:e.uuid,l=[];let c;switch(q[r.path]===q.weights?e.traverse(function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)}):l.push(a),q[r.path]){case q.weights:c=o.Hit;break;case q.rotation:c=o.MBL;break;case q.translation:case q.scale:c=o.RiT;break;default:if(1===n.itemSize)c=o.Hit;else c=o.RiT}const d=void 0!==i.interpolation?W[i.interpolation]:o.PJ3,u=this._getArrayFromAccessor(n);for(let e=0,n=l.length;e<n;e++){const n=new c(l[e]+"."+q[r.path],t.array,u,d);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=oe(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof o.MBL?H:F)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function le(e,t,n){const i=t.attributes,r=[];function s(t,i){return n.getDependency("accessor",t).then(function(t){e.setAttribute(i,t)})}for(const t in i){const n=$[t]||t.toLowerCase();n in e.attributes||r.push(s(i[t],n))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(i)}return o.ppV.workingColorSpace!==o.Zr2&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${o.ppV.workingColorSpace}" not supported.`),te(e,t),function(e,t,n){const i=t.attributes,r=new o.NRn;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new o.Pq0(t[0],t[1],t[2]),new o.Pq0(s[0],s[1],s[2])),e.normalized){const t=oe(V[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new o.Pq0,t=new o.Pq0;for(let i=0,r=s.length;i<r;i++){const r=s[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),i.normalized){const e=oe(V[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const a=new o.iyt;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,o=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),void 0!==n.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const d=t[c];if(i){const t=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(t){const n=t[0],s=t[1],a=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}class ce{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0,this.workerCreator=null}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:t,msg:n,transfer:i}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(n,i)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(n=>{const i=this._getIdleWorker();-1!==i?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=n,this.workers[i].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const de=9,ue=15,he=16,pe=22,me=37,fe=43,ge=76,ve=83,ye=97,be=100,Ae=103,_e=109,we=131,xe=132,Ce=133,Ee=134,Me=137,Se=138,Te=141,ke=142,Le=145,De=146,Ie=148,Re=152,Oe=157,Pe=158,Be=165,Ne=166,Ue=1000066e3;class Fe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class ze{constructor(e,t,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=i,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){void 0===t&&(t=0);const n=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}new Uint8Array([0]);const He=[171,75,84,88,32,50,48,187,13,10,26,10];function je(e){return(new TextDecoder).decode(e)}let Ve,Ye,Ge;const Qe={env:{emscripten_notify_memory_growth:function(e){Ge=new Uint8Array(Ye.exports.memory.buffer)}}};class $e{init(){return Ve||(Ve="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+qe).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Qe)).then(this._init):WebAssembly.instantiate(Buffer.from(qe,"base64"),Qe).then(this._init),Ve)}_init(e){Ye=e.instance,Qe.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!Ye)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,i=Ye.exports.malloc(n);Ge.set(e,i),t=t||Number(Ye.exports.ZSTD_findDecompressedSize(i,n));const r=Ye.exports.malloc(t),o=Ye.exports.ZSTD_decompress(r,t,i,n),s=Ge.slice(r,r+o);return Ye.exports.free(i),Ye.exports.free(r),s}}const qe="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",We="display-p3",Ke=(o.KLL,o.VxR,o.VxR,new WeakMap);let Ze,Xe=0;class Je extends o.aHM{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new ce,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new o.Y9S(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new o.Y9S(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,i]).then(([e,t])=>{const n=Je.BasisWorker.toString(),i=["/* constants */","let _EngineFormat = "+JSON.stringify(Je.EngineFormat),"let _EngineType = "+JSON.stringify(Je.EngineType),"let _TranscoderFormat = "+JSON.stringify(Je.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Je.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i])),this.transcoderBinary=t,this.workerPool.setWorkerCreator(()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e})}),Xe>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Xe++}return this.transcoderPending}load(e,t,n,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new o.Y9S(this.manager);r.setPath(this.path),r.setCrossOrigin(this.crossOrigin),r.setWithCredentials(this.withCredentials),r.setResponseType("arraybuffer"),r.load(e,e=>{this.parse(e,t,i)},n,i)}parse(e,t,n){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(Ke.has(e)){return Ke.get(e).promise.then(t).catch(n)}this._createTexture(e).then(e=>t?t(e):null).catch(n)}_createTextureFrom(e,t){const{type:n,error:i,data:{faces:r,width:s,height:a,format:l,type:c,dfdFlags:d}}=e;if("error"===n)return Promise.reject(i);let u;if(6===t.faceCount)u=new o.c5h(r,l,c);else{const e=r[0].mipmaps;u=t.layerCount>1?new o.iOZ(e,s,a,t.layerCount,l,c):new o.FvD(e,s,a,l,c)}return u.minFilter=1===r[0].mipmaps.length?o.k6q:o.$_I,u.magFilter=o.k6q,u.generateMipmaps=!1,u.needsUpdate=!0,u.colorSpace=it(t),u.premultiplyAlpha=!!(1&d),u}async _createTexture(e,t={}){const n=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,He.length);if(t[0]!==He[0]||t[1]!==He[1]||t[2]!==He[2]||t[3]!==He[3]||t[4]!==He[4]||t[5]!==He[5]||t[6]!==He[6]||t[7]!==He[7]||t[8]!==He[8]||t[9]!==He[9]||t[10]!==He[10]||t[11]!==He[11])throw new Error("Missing KTX 2.0 identifier.");const n=new Fe,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new ze(e,He.length,i,!0);n.vkFormat=r._nextUint32(),n.typeSize=r._nextUint32(),n.pixelWidth=r._nextUint32(),n.pixelHeight=r._nextUint32(),n.pixelDepth=r._nextUint32(),n.layerCount=r._nextUint32(),n.faceCount=r._nextUint32();const o=r._nextUint32();n.supercompressionScheme=r._nextUint32();const s=r._nextUint32(),a=r._nextUint32(),l=r._nextUint32(),c=r._nextUint32(),d=r._nextUint64(),u=r._nextUint64(),h=new ze(e,He.length+i,3*o*8,!0);for(let t=0;t<o;t++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});const p=new ze(e,s,a,!0),m={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},f=(m.descriptorBlockSize/4-6)/4;for(let e=0;e<f;e++){const t={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=p._nextInt32(),t.sampleUpper=p._nextInt32()):(t.sampleLower=p._nextUint32(),t.sampleUpper=p._nextUint32()),m.samples[e]=t}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(m);const g=new ze(e,l,c,!0);for(;g._offset<c;){const e=g._nextUint32(),t=g._scan(e),i=je(t);if(n.keyValue[i]=g._nextUint8Array(e-t.byteLength-1),i.match(/^ktx/i)){const e=je(n.keyValue[i]);n.keyValue[i]=e.substring(0,e.lastIndexOf("\0"))}g._skip(e%4?4-e%4:0)}if(u<=0)return n;const v=new ze(e,d,u,!0),y=v._nextUint16(),b=v._nextUint16(),A=v._nextUint32(),_=v._nextUint32(),w=v._nextUint32(),x=v._nextUint32(),C=[];for(let e=0;e<o;e++)C.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const E=d+v._offset,M=E+A,S=M+_,T=S+w,k=new Uint8Array(e.buffer,e.byteOffset+E,A),L=new Uint8Array(e.buffer,e.byteOffset+M,_),D=new Uint8Array(e.buffer,e.byteOffset+S,w),I=new Uint8Array(e.buffer,e.byteOffset+T,x);return n.globalData={endpointCount:y,selectorCount:b,imageDescs:C,endpointsData:k,selectorsData:L,tablesData:D,extendedData:I},n}(new Uint8Array(e)),i=n.vkFormat===Ue&&167===n.dataFormatDescriptor[0].colorModel;if(!(0===n.vkFormat||i&&!this.workerConfig.astcHDRSupported))return async function(e){const{vkFormat:t}=e;if(void 0===tt[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let n;2===e.supercompressionScheme&&(Ze||(Ze=new Promise(async e=>{const t=new $e;await t.init(),e(t)})),n=await Ze);const i=[];for(let r=0;r<e.levels.length;r++){const s=Math.max(1,e.pixelWidth>>r),a=Math.max(1,e.pixelHeight>>r),l=e.pixelDepth?Math.max(1,e.pixelDepth>>r):0,c=e.levels[r];let d,u;if(0===e.supercompressionScheme)d=c.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");d=n.decode(c.levelData,c.uncompressedByteLength)}u=nt[t]===o.RQf?new Float32Array(d.buffer,d.byteOffset,d.byteLength/Float32Array.BYTES_PER_ELEMENT):nt[t]===o.ix0?new Uint16Array(d.buffer,d.byteOffset,d.byteLength/Uint16Array.BYTES_PER_ELEMENT):d,i.push({data:u,width:s,height:a,depth:l})}let r;if(et.has(tt[t]))r=0===e.pixelDepth?new o.GYF(i[0].data,e.pixelWidth,e.pixelHeight):new o.dYF(i[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new o.FvD(i,e.pixelWidth,e.pixelHeight),r.minFilter=1===i.length?o.k6q:o.$_I,r.magFilter=o.k6q}return r.mipmaps=i,r.type=nt[t],r.format=tt[t],r.colorSpace=it(e),r.needsUpdate=!0,Promise.resolve(r)}(n);const r=t,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e])).then(e=>this._createTextureFrom(e.data,n));return Ke.set(e,{promise:s}),s}dispose(){this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Xe--}}Je.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2},Je.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25},Je.EngineFormat={RGBAFormat:o.GWd,RGBA_ASTC_4x4_Format:o.qa3,RGB_BPTC_UNSIGNED_Format:o.W9U,RGBA_BPTC_Format:o.Fn,RGBA_ETC2_EAC_Format:o.KDk,RGBA_PVRTC_4BPPV1_Format:o.HXV,RGBA_S3TC_DXT5_Format:o.BXX,RGB_ETC1_Format:o.CVz,RGB_ETC2_Format:o.Riy,RGB_PVRTC_4BPPV1_Format:o.k6Q,RGBA_S3TC_DXT1_Format:o.Nz6},Je.EngineType={UnsignedByteType:o.OUM,HalfFloatType:o.ix0,FloatType:o.RQf},Je.BasisWorker=function(){let e,t,n;const i=_EngineFormat,r=_EngineType,o=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",function(i){const o=i.data;switch(o.type){case"init":e=o.config,a=o.transcoderBinary,t=new Promise(e=>{n={wasmBinary:a,onRuntimeInitialized:e},BASIS(n)}).then(()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")});break;case"transcode":t.then(()=>{try{const{faces:t,buffers:i,width:a,height:u,hasAlpha:h,format:p,type:m,dfdFlags:f}=function(t){const i=new n.KTX2File(new Uint8Array(t));function o(){i.close(),i.delete()}if(!i.isValid())throw o(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");let a;if(i.isUASTC())a=s.UASTC;else if(i.isETC1S())a=s.ETC1S;else{if(!i.isHDR())throw new Error("THREE.KTX2Loader: Unknown Basis encoding");a=s.UASTC_HDR}const u=i.getWidth(),h=i.getHeight(),p=i.getLayers()||1,m=i.getLevels(),f=i.getFaces(),g=i.getHasAlpha(),v=i.getDFDFlags(),{transcoderFormat:y,engineFormat:b,engineType:A}=function(t,n,i,r){const o=l[t];for(let s=0;s<o.length;s++){const a=o[s];if(a.if&&!e[a.if])continue;if(!a.basisFormat.includes(t))continue;if(r&&a.transcoderFormat.length<2)continue;if(a.needsPowerOfTwo&&(!c(n)||!c(i)))continue;return{transcoderFormat:a.transcoderFormat[r?1:0],engineFormat:a.engineFormat[r?1:0],engineType:a.engineType[0]}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}(a,u,h,g);if(!u||!h||!m)throw o(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!i.startTranscoding())throw o(),new Error("THREE.KTX2Loader: .startTranscoding failed");const _=[],w=[];for(let e=0;e<f;e++){const t=[];for(let n=0;n<m;n++){const s=[];let a,l;for(let t=0;t<p;t++){const c=i.getImageLevelInfo(n,t,e);0!==e||0!==n||0!==t||c.origWidth%4==0&&c.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),m>1?(a=c.origWidth,l=c.origHeight):(a=c.width,l=c.height);let d=new Uint8Array(i.getImageTranscodedSizeInBytes(n,t,0,y));const u=i.transcodeImage(d,n,t,e,y,0,-1,-1);if(A===r.HalfFloatType&&(d=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!u)throw o(),new Error("THREE.KTX2Loader: .transcodeImage failed.");s.push(d)}const c=d(s);t.push({data:c,width:a,height:l}),w.push(c.buffer)}_.push({mipmaps:t,width:u,height:h,format:b,type:A})}return o(),{faces:_,buffers:w,width:u,height:h,hasAlpha:g,dfdFlags:v,format:b,type:A}}(o.buffer);self.postMessage({type:"transcode",id:o.id,data:{faces:t,width:a,height:u,hasAlpha:h,format:p,type:m,dfdFlags:f}},i)}catch(e){console.error(e),self.postMessage({type:"error",id:o.id,error:e.message})}})}var a});const a=[{if:"astcSupported",basisFormat:[s.UASTC],transcoderFormat:[o.ASTC_4x4,o.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[r.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC7_M5,o.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[r.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.BC1,o.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[r.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1,o.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[r.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[r.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.PVRTC1_4_RGB,o.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[r.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[s.UASTC_HDR],transcoderFormat:[o.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[r.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[s.ETC1S,s.UASTC],transcoderFormat:[o.RGBA32,o.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[r.UnsignedByteType,r.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[s.UASTC_HDR],transcoderFormat:[o.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[r.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],l={[s.ETC1S]:a.filter(e=>e.basisFormat.includes(s.ETC1S)).sort((e,t)=>e.priorityUASTC-t.priorityUASTC),[s.UASTC]:a.filter(e=>e.basisFormat.includes(s.UASTC)).sort((e,t)=>e.priorityUASTC-t.priorityUASTC),[s.UASTC_HDR]:a.filter(e=>e.basisFormat.includes(s.UASTC_HDR)).sort((e,t)=>e.priorityHDR-t.priorityHDR)};function c(e){return e<=2||!(e&e-1)&&0!==e}function d(e){if(1===e.length)return e[0];let t=0;for(let n=0;n<e.length;n++){t+=e[n].byteLength}const n=new Uint8Array(t);let i=0;for(let t=0;t<e.length;t++){const r=e[t];n.set(r,i),i+=r.byteLength}return n}};const et=new Set([o.GWd,o.paN,o.VT0]),tt={[_e]:o.GWd,[ye]:o.GWd,[me]:o.GWd,[fe]:o.GWd,[Ae]:o.paN,[ve]:o.paN,[he]:o.paN,[pe]:o.paN,[be]:o.VT0,[ge]:o.VT0,[ue]:o.VT0,[de]:o.VT0,[Ie]:o.Riy,[Re]:o.KDk,[Ue]:o.qa3,[Pe]:o.qa3,[Oe]:o.qa3,[Ne]:o.Qrf,[Be]:o.Qrf,[Ce]:o.Nz6,[Ee]:o.Nz6,[we]:o.IE4,[xe]:o.IE4,[Se]:o.jR7,[Me]:o.jR7,[ke]:o.BXX,[Te]:o.BXX,[De]:o.Fn,[Le]:o.Fn},nt={[_e]:o.RQf,[ye]:o.ix0,[me]:o.OUM,[fe]:o.OUM,[Ae]:o.RQf,[ve]:o.ix0,[he]:o.OUM,[pe]:o.OUM,[be]:o.RQf,[ge]:o.ix0,[ue]:o.OUM,[de]:o.OUM,[Ie]:o.OUM,[Re]:o.OUM,[Ue]:o.ix0,[Ne]:o.OUM,[Be]:o.OUM};function it(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?o.er$:o.Zr2:10===t.colorPrimaries?2===t.transferFunction?We:"display-p3-linear":(0===t.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),o.jf0)}var rt=n(6351),ot=n(7229);class st{set dracoPath(e){this.customDracoPath=e,null!==this.gltfLoader.dracoLoader&&this.gltfLoader.dracoLoader.setDecoderPath(this.customDracoPath)}setAssetPath(e){e=e.endsWith("/")?e.slice(0,-1):e,this.customDracoPath||(this.dracoPath=`${e}/js/draco/`),this.gltfLoader.ktx2Loader.setTranscoderPath(`${e}/js/basis/`)}constructor(e,t){this.loading={},this.customDracoPath=null,this.loadingManager=e;const n=new a;n.setDecoderPath(kt+"/js/draco/"),this.renderer=t,this.gltfLoader=new u(e),this.gltfLoader.setDRACOLoader(n),this.gltfLoader.setMeshoptDecoder(c);const i=new Je(e);i.setTranscoderPath(kt+"/js/basis/"),this.gltfLoader.setKTX2Loader(i),setTimeout(()=>{i.detectSupport(this.renderer.views[0].renderer)},0)}dispose(){this.gltfLoader.dracoLoader.dispose(),this.gltfLoader.ktx2Loader.dispose(),this.gltfLoader.setDRACOLoader(null),this.gltfLoader.setKTX2Loader(null),this.gltfLoader=null}isValid(e){const t=e.split(".").pop().toLowerCase();return st.extensions.indexOf(t)>=0}isValidMimeType(e){return st.mimeTypes.indexOf(e)>=0}get(e,{signal:t}={}){this.loadingManager.itemStart(e);let n=o.r6x.extractUrlBase(e);return this.loadModel(e,{signal:t}).then(e=>this.gltfLoader.parseAsync(e,n)).then(e=>{if(e.userData.gltfExtensions){const t=e.userData.gltfExtensions.KHR_materials_variants;if(t){const n=e.parser;e.scene.userData.variants=t.variants,e.scene.userData.variants.variantMaterials={},e.scene.userData.parser=n}}return this.createModelGroup(e,{signal:t})}).catch(t=>{throw this.loadingManager.itemError(e),t}).finally(()=>this.loadingManager.itemEnd(e))}async loadModel(e,{signal:t}={}){if(t){const n=()=>{var n,i;const r=null!==(i=null===(n=this.loading[e])||void 0===n?void 0:n.listeners.findIndex(e=>e.signal===t))&&void 0!==i?i:-1;if(-1==r)return;const{onerror:o}=this.loading[e].listeners.splice(r,1)[0];o(new DOMException(t.reason,"AbortError")),0==this.loading[e].listeners.length&&this.loading[e].abortController.abort()};t.addEventListener("abort",n)}if(!this.loading[e]){const{listeners:t,abortController:{signal:n}}=this.loading[e]={listeners:[],abortController:new AbortController};fetch(e,{signal:n}).then(e=>{if(!e.ok)throw new Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`);return e.arrayBuffer()}).finally(()=>{delete this.loading[e]}).then(e=>{n.aborted||t.forEach(({onload:t})=>t(e))},e=>{t.forEach(({onerror:t})=>t(e)),"AbortError"!=e.name&&"ABORT_ERR"!=e.name&&console.error(e)})}return new Promise((n,i)=>{this.loading[e].listeners.push({onload:n,onerror:i,signal:t})})}async createModelGroup(e,{signal:t}={}){if(t.aborted)throw new DOMException(t.reason,"AbortError");const n=e.scene;n.traverse(t=>{if("Mesh"===t.type){const n=t;if(n.castShadow=!0,n.animations=e.animations,"MeshBasicMaterial"===n.material.type){const e=n.material,t=new o._4j;t.color=e.color,t.opacity=e.opacity,t.transparent=e.opacity<1||!!e.alphaMap,t.map=e.map,t.shadowSide=e.shadowSide,n.material=t}const i=n.material;i.map&&(i.map.colorSpace=o.er$),n.geometry.computeBoundingBox(),(0,ot.zv)(i),i.userData.paramCopy={},(0,ot.AG)(i),i.flatShading&&(n.geometry.computeVertexNormals(),i.flatShading=!1,console.warn("Normals unavailable so they have been calculated. For best outcomes, please provide normals with geometry.")),i.userData.objectSpaceNormals&&i.normalMap&&(i.normalMapType=o.vyJ,i.needsUpdate=!0)}});try{if(await this.renderer.views[0].renderer.compileAsync(n,this.renderer.activeCamera,this.renderer.activeScene),t.aborted)throw new DOMException(t.reason,"AbortError")}catch(e){try{(0,rt.nZ)(n)}catch(e){console.warn("Failed to dispose of cancelled glTF scene",e)}throw e}return n}}st.extensions=["gltf","glb"],st.mimeTypes=["model/gltf+json","model/gltf-binary"];const at=/^[og]\s*(.+)?/,lt=/^mtllib /,ct=/^usemtl /,dt=/^usemap /,ut=/\s+/,ht=new o.Pq0,pt=new o.Pq0,mt=new o.Pq0,ft=new o.Pq0,gt=new o.Pq0,vt=new o.Q1f;function yt(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const i={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const i=this.vertices,r=this.object.geometry.vertices;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const i=this.normals,r=this.object.geometry.normals;r.push(i[e+0],i[e+1],i[e+2]),r.push(i[t+0],i[t+1],i[t+2]),r.push(i[n+0],i[n+1],i[n+2])},addFaceNormal:function(e,t,n){const i=this.vertices,r=this.object.geometry.normals;ht.fromArray(i,e),pt.fromArray(i,t),mt.fromArray(i,n),gt.subVectors(mt,pt),ft.subVectors(ht,pt),gt.cross(ft),gt.normalize(),r.push(gt.x,gt.y,gt.z),r.push(gt.x,gt.y,gt.z),r.push(gt.x,gt.y,gt.z)},addColor:function(e,t,n){const i=this.colors,r=this.object.geometry.colors;void 0!==i[e]&&r.push(i[e+0],i[e+1],i[e+2]),void 0!==i[t]&&r.push(i[t+0],i[t+1],i[t+2]),void 0!==i[n]&&r.push(i[n+0],i[n+1],i[n+2])},addUV:function(e,t,n){const i=this.uvs,r=this.object.geometry.uvs;r.push(i[e+0],i[e+1]),r.push(i[t+0],i[t+1]),r.push(i[n+0],i[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,i,r,o,s,a,l){const c=this.vertices.length;let d=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(n,c);if(this.addVertex(d,u,h),this.addColor(d,u,h),void 0!==s&&""!==s){const e=this.normals.length;d=this.parseNormalIndex(s,e),u=this.parseNormalIndex(a,e),h=this.parseNormalIndex(l,e),this.addNormal(d,u,h)}else this.addFaceNormal(d,u,h);if(void 0!==i&&""!==i){const e=this.uvs.length;d=this.parseUVIndex(i,e),u=this.parseUVIndex(r,e),h=this.parseUVIndex(o,e),this.addUV(d,u,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,i=e.length;n<i;n++){const i=this.parseVertexIndex(e[n],t);this.addVertexPoint(i),this.addColor(i)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,i=this.uvs.length;for(let t=0,i=e.length;t<i;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],i))}};return e.startObject("",!1),e}class bt extends o.aHM{constructor(e){super(e),this.materials=null}load(e,t,n,i){const r=this,s=new o.Y9S(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{t(r.parse(n))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new yt;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let i=[];for(let e=0,r=n.length;e<r;e++){const r=n[e].trimStart();if(0===r.length)continue;const s=r.charAt(0);if("#"!==s)if("v"===s){const e=r.split(ut);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(vt.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]),o.er$),t.colors.push(vt.r,vt.g,vt.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===s){const e=r.slice(1).trim().split(ut),n=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i.length>0){const e=i.split("/");n.push(e)}}const i=n[0];for(let e=1,r=n.length-1;e<r;e++){const r=n[e],o=n[e+1];t.addFace(i[0],r[0],o[0],i[1],r[1],o[1],i[2],r[2],o[2])}}else if("l"===s){const e=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}t.addLineGeometry(n,i)}else if("p"===s){const e=r.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(i=at.exec(r))){const e=(" "+i[0].slice(1).trim()).slice(1);t.startObject(e)}else if(ct.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(lt.test(r))t.materialLibraries.push(r.substring(7).trim());else if(dt.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===s){if(i=r.split(" "),i.length>1){const e=i[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}t.finalize();const r=new o.YJl;r.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],i=n.geometry,s=n.materials,a="Line"===i.type,l="Points"===i.type;let c=!1;if(0===i.vertices.length)continue;const d=new o.LoY;d.setAttribute("position",new o.qtW(i.vertices,3)),i.normals.length>0&&d.setAttribute("normal",new o.qtW(i.normals,3)),i.colors.length>0&&(c=!0,d.setAttribute("color",new o.qtW(i.colors,3))),!0===i.hasUVIndices&&d.setAttribute("uv",new o.qtW(i.uvs,2));const u=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=n.name+"_"+n.smooth+"_"+c;let r=t.materials[i];if(null!==this.materials)if(r=this.materials.create(n.name),!a||!r||r instanceof o.mrM){if(l&&r&&!(r instanceof o.BH$)){const e=new o.BH$({size:10,sizeAttenuation:!1});o.imn.prototype.copy.call(e,r),e.color.copy(r.color),e.map=r.map,r=e}}else{const e=new o.mrM;o.imn.prototype.copy.call(e,r),e.color.copy(r.color),r=e}void 0===r&&(r=a?new o.mrM:l?new o.BH$({size:1,sizeAttenuation:!1}):new o.tXL,r.name=n.name,r.flatShading=!n.smooth,r.vertexColors=c,t.materials[i]=r),u.push(r)}let h;if(u.length>1){for(let e=0,t=s.length;e<t;e++){const t=s[e];d.addGroup(t.groupStart,t.groupCount,e)}h=a?new o.DXC(d,u):l?new o.ONl(d,u):new o.eaF(d,u)}else h=a?new o.DXC(d,u[0]):l?new o.ONl(d,u[0]):new o.eaF(d,u[0]);h.name=n.name,r.add(h)}else if(t.vertices.length>0){const e=new o.BH$({size:1,sizeAttenuation:!1}),n=new o.LoY;n.setAttribute("position",new o.qtW(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new o.qtW(t.colors,3)),e.vertexColors=!0);const i=new o.ONl(n,e);r.add(i)}return r}}const At=new o.Q1f;class _t extends o.aHM{constructor(e){super(e),this.propertyNameMapping={},this.customPropertyMapping={}}load(e,t,n,i){const r=this,s=new o.Y9S(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{t(r.parse(n))}catch(t){i?i(t):console.error(t),r.manager.itemError(e)}},n,i)}setPropertyNameMapping(e){this.propertyNameMapping=e}setCustomPropertyNameMapping(e){this.customPropertyMapping=e}parse(e){function t(e,t=0){let n="";const i=/^ply([\s\S]*)end_header(\r\n|\r|\n)/.exec(e);null!==i&&(n=i[1]);const r={comments:[],elements:[],headerLength:t,objInfo:""},o=n.split(/\r\n|\r|\n/);let s;function a(e,t){const n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(let e=0;e<o.length;e++){let t=o[e];if(t=t.trim(),""===t)continue;const n=t.split(/\s+/),i=n.shift();switch(t=n.join(" "),i){case"format":r.format=n[0],r.version=n[1];break;case"comment":r.comments.push(t);break;case"element":void 0!==s&&r.elements.push(s),s={},s.name=n[0],s.count=parseInt(n[1]),s.properties=[];break;case"property":s.properties.push(a(n,p.propertyNameMapping));break;case"obj_info":r.objInfo=t;break;default:console.log("unhandled",i,n)}}return void 0!==s&&r.elements.push(s),r}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function i(e,t){const i={};for(let r=0;r<e.length;r++){if(t.empty())return null;if("list"===e[r].type){const o=[],s=n(t.next(),e[r].countType);for(let i=0;i<s;i++){if(t.empty())return null;o.push(n(t.next(),e[r].itemType))}i[e[r].name]=o}else i[e[r].name]=n(t.next(),e[r].type)}return i}function r(){const e={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[],faceVertexColors:[]};for(const t of Object.keys(p.customPropertyMapping))e[t]=[];return e}function s(e){const t=e.map(e=>e.name);function n(e){for(let n=0,i=e.length;n<i;n++){const i=e[n];if(t.includes(i))return i}return null}return{attrX:n(["x","px","posx"])||"x",attrY:n(["y","py","posy"])||"y",attrZ:n(["z","pz","posz"])||"z",attrNX:n(["nx","normalx"]),attrNY:n(["ny","normaly"]),attrNZ:n(["nz","normalz"]),attrS:n(["s","u","texture_u","tx"]),attrT:n(["t","v","texture_v","ty"]),attrR:n(["red","diffuse_red","r","diffuse_r"]),attrG:n(["green","diffuse_green","g","diffuse_g"]),attrB:n(["blue","diffuse_blue","b","diffuse_b"])}}function a(e,t){const n=r();let o,a;o=null!==(a=/end_header\s+(\S[\s\S]*\S|\S)\s*$/.exec(e))?a[1].split(/\s+/):[];const d=new wt(o);e:for(let e=0;e<t.elements.length;e++){const r=t.elements[e],o=s(r.properties);for(let e=0;e<r.count;e++){const e=i(r.properties,d);if(!e)break e;c(n,r.name,e,o)}}return l(n)}function l(e){let t=new o.LoY;e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new o.qtW(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new o.qtW(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new o.qtW(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new o.qtW(e.colors,3)),(e.faceVertexUvs.length>0||e.faceVertexColors.length>0)&&(t=t.toNonIndexed(),e.faceVertexUvs.length>0&&t.setAttribute("uv",new o.qtW(e.faceVertexUvs,2)),e.faceVertexColors.length>0&&t.setAttribute("color",new o.qtW(e.faceVertexColors,3)));for(const n of Object.keys(p.customPropertyMapping))e[n].length>0&&t.setAttribute(n,new o.qtW(e[n],p.customPropertyMapping[n].length));return t.computeBoundingSphere(),t}function c(e,t,n,i){if("vertex"===t){e.vertices.push(n[i.attrX],n[i.attrY],n[i.attrZ]),null!==i.attrNX&&null!==i.attrNY&&null!==i.attrNZ&&e.normals.push(n[i.attrNX],n[i.attrNY],n[i.attrNZ]),null!==i.attrS&&null!==i.attrT&&e.uvs.push(n[i.attrS],n[i.attrT]),null!==i.attrR&&null!==i.attrG&&null!==i.attrB&&(At.setRGB(n[i.attrR]/255,n[i.attrG]/255,n[i.attrB]/255,o.er$),e.colors.push(At.r,At.g,At.b));for(const t of Object.keys(p.customPropertyMapping))for(const i of p.customPropertyMapping[t])e[t].push(n[i])}else if("face"===t){const t=n.vertex_indices||n.vertex_index,r=n.texcoord;3===t.length?(e.indices.push(t[0],t[1],t[2]),r&&6===r.length&&(e.faceVertexUvs.push(r[0],r[1]),e.faceVertexUvs.push(r[2],r[3]),e.faceVertexUvs.push(r[4],r[5]))):4===t.length&&(e.indices.push(t[0],t[1],t[3]),e.indices.push(t[1],t[2],t[3])),null!==i.attrR&&null!==i.attrG&&null!==i.attrB&&(At.setRGB(n[i.attrR]/255,n[i.attrG]/255,n[i.attrB]/255,o.er$),e.faceVertexColors.push(At.r,At.g,At.b),e.faceVertexColors.push(At.r,At.g,At.b),e.faceVertexColors.push(At.r,At.g,At.b))}}function d(e,t){const n={};let i=0;for(let r=0;r<t.length;r++){const o=t[r],s=o.valueReader;if("list"===o.type){const t=[],r=o.countReader.read(e+i);i+=o.countReader.size;for(let n=0;n<r;n++)t.push(s.read(e+i)),i+=s.size;n[o.name]=t}else n[o.name]=s.read(e+i),i+=s.size}return[n,i]}function u(e,t,n){function i(e,t,n){switch(t){case"int8":case"char":return{read:t=>e.getInt8(t),size:1};case"uint8":case"uchar":return{read:t=>e.getUint8(t),size:1};case"int16":case"short":return{read:t=>e.getInt16(t,n),size:2};case"uint16":case"ushort":return{read:t=>e.getUint16(t,n),size:2};case"int32":case"int":return{read:t=>e.getInt32(t,n),size:4};case"uint32":case"uint":return{read:t=>e.getUint32(t,n),size:4};case"float32":case"float":return{read:t=>e.getFloat32(t,n),size:4};case"float64":case"double":return{read:t=>e.getFloat64(t,n),size:8}}}for(let r=0,o=e.length;r<o;r++){const o=e[r];"list"===o.type?(o.countReader=i(t,o.countType,n),o.valueReader=i(t,o.itemType,n)):o.valueReader=i(t,o.type,n)}}let h;const p=this;if(e instanceof ArrayBuffer){const n=new Uint8Array(e),{headerText:i,headerLength:o}=function(e){let t=0,n=!0,i="";const r=[],o=(new TextDecoder).decode(e.subarray(0,5)),s=/^ply\r\n/.test(o);do{const o=String.fromCharCode(e[t++]);"\n"!==o&&"\r"!==o?i+=o:("end_header"===i&&(n=!1),""!==i&&(r.push(i),i=""))}while(n&&t<e.length);return!0===s&&t++,{headerText:r.join("\r")+"\r",headerLength:t}}(n),p=t(i,o);if("ascii"===p.format){h=a((new TextDecoder).decode(n),p)}else h=function(e,t){const n=r(),i="binary_little_endian"===t.format,o=new DataView(e,t.headerLength);let a,h=0;for(let e=0;e<t.elements.length;e++){const r=t.elements[e],l=r.properties,p=s(l);u(l,o,i);for(let e=0;e<r.count;e++){a=d(h,l),h+=a[1];const e=a[0];c(n,r.name,e,p)}}return l(n)}(e,p)}else h=a(e,t(e));return h}}class wt{constructor(e){this.arr=e,this.i=0}empty(){return this.i>=this.arr.length}next(){return this.arr[this.i++]}}class xt{constructor(e){this.objLoader=new bt(e),this.plyLoader=new _t(e)}isValid(e){const t=e.split(".").pop().toLowerCase();return xt.extensions.indexOf(t)>=0}get(e){const t=e.split(".").pop().toLowerCase();return new Promise((n,i)=>{if("obj"===t)this.objLoader.load(e,t=>{const r=t.children[0].geometry;return r&&"Geometry"===r.type||"BufferGeometry"===r.type?n(r):i(new Error(`Can't parse geometry from '${e}'`))});else{if("ply"!==t)throw new Error(`Can't load geometry, unknown extension: '${t}' in '${e}'`);this.plyLoader.load(e,t=>t&&"Geometry"===t.type||"BufferGeometry"===t.type?n(t):i(new Error(`Can't parse geometry from '${e}'`)))}})}}xt.extensions=["obj","ply"];class Ct extends o.BRH{constructor(e){super(e),this.type=o.ix0}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let i=e.pos,r=-1,o=0,s="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(r=a.indexOf("\n"))&&o<t&&i<e.byteLength;)s+=a,o+=a.length,i+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<r&&(!1!==n&&(e.pos+=o+r+1),s+a.slice(0,r))},i=function(e,t,n,i){const r=e[t+3],o=Math.pow(2,r-128)/255;n[i+0]=e[t+0]*o,n[i+1]=e[t+1]*o,n[i+2]=e[t+2]*o,n[i+3]=1},r=function(e,t,n,i){const r=e[t+3],s=Math.pow(2,r-128)/255;n[i+0]=o.GxU.toHalfFloat(Math.min(e[t+0]*s,65504)),n[i+1]=o.GxU.toHalfFloat(Math.min(e[t+1]*s,65504)),n[i+2]=o.GxU.toHalfFloat(Math.min(e[t+2]*s,65504)),n[i+3]=o.GxU.toHalfFloat(1)},s=new Uint8Array(e);s.pos=0;const a=function(e){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),a.valid|=1,a.programtype=c[1],a.string+=l+"\n";l=n(e),!1!==l;)if(a.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(i))&&(a.gamma=parseFloat(c[1])),(c=l.match(r))&&(a.exposure=parseFloat(c[1])),(c=l.match(o))&&(a.valid|=2,a.format=c[1]),(c=l.match(s))&&(a.valid|=4,a.height=parseInt(c[1],10),a.width=parseInt(c[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=l+"\n";return 2&a.valid||t(3,"missing format specifier"),4&a.valid||t(3,"missing image size specifier"),a}(s),l=a.width,c=a.height,d=function(e,n,i){const r=n;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);r!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const o=new Uint8Array(4*n*i);o.length||t(4,"unable to allocate buffer space");let s=0,a=0;const l=4*r,c=new Uint8Array(4),d=new Uint8Array(l);let u=i;for(;u>0&&a<e.byteLength;){a+4>e.byteLength&&t(1),c[0]=e[a++],c[1]=e[a++],c[2]=e[a++],c[3]=e[a++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==r||t(3,"bad rgbe scanline format");let n,i=0;for(;i<l&&a<e.byteLength;){n=e[a++];const r=n>128;if(r&&(n-=128),(0===n||i+n>l)&&t(3,"bad scanline data"),r){const t=e[a++];for(let e=0;e<n;e++)d[i++]=t}else d.set(e.subarray(a,a+n),i),i+=n,a+=n}const h=r;for(let e=0;e<h;e++){let t=0;o[s]=d[e+t],t+=r,o[s+1]=d[e+t],t+=r,o[s+2]=d[e+t],t+=r,o[s+3]=d[e+t],s+=4}u--}return o}(s.subarray(s.pos),l,c);let u,h,p;switch(this.type){case o.RQf:p=d.length/4;const e=new Float32Array(4*p);for(let t=0;t<p;t++)i(d,4*t,e,4*t);u=e,h=o.RQf;break;case o.ix0:p=d.length/4;const t=new Uint16Array(4*p);for(let e=0;e<p;e++)r(d,4*e,t,4*e);u=t,h=o.ix0;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:l,height:c,data:u,header:a.string,gamma:a.gamma,exposure:a.exposure,type:h}}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,function(e,n){switch(e.type){case o.RQf:case o.ix0:e.colorSpace=o.Zr2,e.minFilter=o.k6q,e.magFilter=o.k6q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,i)}}class Et{constructor(e){this.textureLoader=new o.Tap(e),this.hdriLoader=new Ct(e)}isValid(e){const t=e.split(".").pop().toLowerCase();return Et.extensions.indexOf(t)>=0}isValidMimeType(e){return Et.mimeTypes.indexOf(e)>=0}get(e){return new Promise((t,n)=>{e.endsWith(".hdr")?this.hdriLoader.load(e,e=>{t(e)},null,e=>{console.error(e),n(new Error(e.message))}):this.textureLoader.load(e,e=>{t(e)},null,e=>{console.error(e),n(new Error(e.message))})})}getImmediate(e){return this.textureLoader.load(e,null,null,e=>{console.error(e)})}}Et.extensions=["jpg","png"],Et.mimeTypes=["image/jpeg","image/png"];class Mt{constructor(e){this._customFontPath=null,this._loadingManager=e,this._textureLoader=new o.Tap(e),this._cache={}}set fontPath(e){this._customFontPath=e}get fontPath(){return this._customFontPath}get(e){return this._cache[e]}async load(e){if(this._cache[e])return Promise.resolve(this._cache[e]);this._loadingManager.itemStart(e);const t=this.fontPath,n=t?t+e+".json":kt+e+".json",i=t?t+e+".png":kt+e+".png",r=fetch(n,{headers:{Accept:"application/json"}}).then(t=>{if(!t.ok)throw this._loadingManager.itemError(e),new Error(`failed to load bitmap font descriptor: '${n}', status: ${t.status} ${t.statusText}`);return t.json()}),o=new Promise((e,t)=>{this._textureLoader.load(i,n=>n?e(n):t(new Error(`failed to load font texture from '${i}'`)))});return Promise.all([r,o]).then(t=>{const n={descriptor:t[0],texture:t[1]};return this._cache[e]=n,this._loadingManager.itemEnd(e),n})}}var St=n(161),Tt=n(3889);const kt="https://cdn.jsdelivr.net/gh/smithsonian/dpo-voyager@latest/assets/";class Lt extends i.Ay{constructor(e,t){super(e,t),this.systemAssetPath=null;const n=this.assetManager.loadingManager;this.fileLoader=new r(n),this.modelLoader=new st(n,this.renderer),this.geometryLoader=new xt(n),this.textureLoader=new Et(n),this.fontReader=new Mt(n)}dispose(){this.modelLoader.dispose(),super.dispose()}get assetManager(){return this.getMainComponent(St.A)}get renderer(){return this.getMainComponent(Tt.A)}setDracoPath(e){this.modelLoader.dracoPath=e}setSystemAssetPath(e){this.fontReader.fontPath=e,this.systemAssetPath=e,this.modelLoader.setAssetPath(e)}getSystemAssetUrl(e){return(this.systemAssetPath||kt)+e}async getJSON(e){const t=this.assetManager.getAssetUrl(e);return this.fileLoader.getJSON(t)}async getText(e){const t=this.assetManager.getAssetUrl(e);return this.fileLoader.getText(t)}async getModel(e,{signal:t}={}){const n=this.assetManager.getAssetUrl(e);return this.modelLoader.get(n,{signal:t})}async getGeometry(e){const t=this.assetManager.getAssetUrl(e);return this.geometryLoader.get(t)}async getTexture(e){const t=this.assetManager.getAssetUrl(e);return this.textureLoader.get(t)}async getFont(e){const t=this.assetManager.getAssetUrl(e);return this.fontReader.load(t)}async getSystemTexture(e){const t=this.getSystemAssetUrl(e);return this.textureLoader.get(t)}async getSystemJSON(e){const t=this.getSystemAssetUrl(e);return this.fileLoader.getJSON(t)}}Lt.typeName="CVAssetReader",Lt.text="AssetReader",Lt.icon="",Lt.isSystemSingleton=!0},3607:function(e,t,n){!function(e){"use strict";var t={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};e.defineLocale("tg",{months:{format:"январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри".split("_"),standalone:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_")},monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Фардо соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?e>=11?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(3681))},3627:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(3331);const r=[];class o extends i.A{static getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e}constructor(e){super({knownEvents:!1});const t=e.typeName;if(!t)throw new Error("root type must have a 'typeName' member");this._rootTypeName=t,this._objLists={[this._rootTypeName]:[]},this._objTags={},this._objDict={}}add(e){const t=e.id;if("string"==typeof t){if(void 0!==this._objDict[t])throw new Error("object already registered");this._objDict[t]=e}let n,i=e;const r=this._rootTypeName,o={type:"",add:!0,remove:!1,object:e};do{i=Object.getPrototypeOf(i),n=i.constructor.typeName,n&&((this._objLists[n]||(this._objLists[n]=[])).push(e),o.type=n,this.emit(o))}while(n!==r)}remove(e){const t=e.id;if("string"==typeof t){if(this._objDict[t]!==e)throw new Error("object not registered");delete this._objDict[t]}let n,i=e;const r=this._rootTypeName,o={type:"",add:!1,remove:!0,object:e};do{if(i=Object.getPrototypeOf(i),n=i.constructor.typeName,n){o.type=n;const t=this._objLists[n];t.splice(t.indexOf(e),1),this.emit(o)}}while(n!==r)}addByTag(e,t){if(!e||"tag"===e)throw new Error("illegal tag name");(this._objTags[e]||(this._objTags[e]=[])).push(t);const n={type:"tag",add:!0,remove:!1,object:t,tag:e};this.emit(n),n.type=e,this.emit(n)}removeByTag(e,t){if(!e||"tag"===e)throw new Error("illegal tag name");const n=this._objTags[e];if(n){const i=n.indexOf(t);if(i>=0){const r={type:"tag",add:!1,remove:!0,object:t,tag:e};return this.emit(r),r.type=e,this.emit(r),n.splice(i,1),!0}}return!1}clear(){this.cloneArray().forEach(e=>this.remove(e))}get length(){return this._objLists[this._rootTypeName].length}count(e){const t=this._objLists[this.getTypeName(e)];return t?t.length:0}has(e){if("function"==typeof e){const t=this._objLists[e.typeName];return!!t&&t.length>0}if("string"==typeof e){const t=this._objLists[e];return!!t&&t.length>0}const t=this._objLists[e.constructor.typeName];return t&&t.indexOf(e)>=0}contains(e){const t=e.id;if("string"==typeof t)return!!this._objDict[t];const n=this._objLists[e.constructor.typeName];return n&&n.indexOf(e)>=0}get(e,t=!1){const n=this.getTypeName(e),i=this._objLists[n],r=i?i[0]:void 0;if(!t&&!r)throw new Error(`no instances of class '${n}' in object registry`);return r}getArray(e){return this._objLists[this.getTypeName(e)]||r}cloneArray(e){return this.getArray(e).slice()}getById(e){return this._objDict[e]}getDictionary(){return this._objDict}getByTag(e){return this._objTags[e]||r}on(e,t,n){super.on(this.getTypeName(e),t,n)}once(e,t,n){super.once(this.getTypeName(e),t,n)}off(e,t,n){super.off(this.getTypeName(e),t,n)}getTypeName(e){return"function"==typeof e?e.typeName:"object"==typeof e?e.constructor.typeName:e||this._rootTypeName}}},3644:(e,t,n)=>{"use strict";n.d(t,{A:()=>V});var i=n(3423),r=n(5240),o=n(4640),s=n(6351);const a=new o.Pq0,l=new o.kn4;class c extends o.DXC{constructor(e,t){t=Object.assign({},c.defaultProps,t);const n=new o.NRn;n.makeEmpty(),(0,s.g6)(e,n);const i=t.length,r=[n.min.x,n.min.y,n.min.z],a=[n.max.x,n.max.y,n.max.z],l=[(a[0]-r[0])*i,(a[1]-r[1])*i,(a[2]-r[2])*i];let d,u,h=isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2]);h&&t.axes?(d=[0,0,0,i,0,0,0,0,0,0,0,0,0,i,0,0,0,0,0,0,0,0,0,i,0,0,0],u=[.65,.23,.29,.65,.23,.29,.65,.23,.29,.43,.63,.11,.43,.63,.11,.43,.63,.11,.25,.3,.88,.25,.3,.88,.25,.3,.88]):d=h?[r[0],r[1],r[2],r[0]+l[0],r[1],r[2],r[0],r[1],r[2],r[0],r[1]+l[1],r[2],r[0],r[1],r[2],r[0],r[1],r[2]+l[2],a[0],r[1],r[2],a[0]-l[0],r[1],r[2],a[0],r[1],r[2],a[0],r[1]+l[1],r[2],a[0],r[1],r[2],a[0],r[1],r[2]+l[2],r[0],a[1],r[2],r[0]+l[0],a[1],r[2],r[0],a[1],r[2],r[0],a[1]-l[1],r[2],r[0],a[1],r[2],r[0],a[1],r[2]+l[2],r[0],r[1],a[2],r[0]+l[0],r[1],a[2],r[0],r[1],a[2],r[0],r[1]+l[1],a[2],r[0],r[1],a[2],r[0],r[1],a[2]-l[2],r[0],a[1],a[2],r[0]+l[0],a[1],a[2],r[0],a[1],a[2],r[0],a[1]-l[1],a[2],r[0],a[1],a[2],r[0],a[1],a[2]-l[2],a[0],r[1],a[2],a[0]-l[0],r[1],a[2],a[0],r[1],a[2],a[0],r[1]+l[1],a[2],a[0],r[1],a[2],a[0],r[1],a[2]-l[2],a[0],a[1],r[2],a[0]-l[0],a[1],r[2],a[0],a[1],r[2],a[0],a[1]-l[1],r[2],a[0],a[1],r[2],a[0],a[1],r[2]+l[2],a[0],a[1],a[2],a[0]-l[0],a[1],a[2],a[0],a[1],a[2],a[0],a[1]-l[1],a[2],a[0],a[1],a[2],a[0],a[1],a[2]-l[2]]:[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1];const p=new o.LoY;p.setAttribute("position",new o.qtW(d,3)),u&&p.setAttribute("color",new o.qtW(u,3));super(p,new o.mrM({color:t.color,vertexColors:!!u,toneMapped:!1,depthTest:!1})),this.renderOrder=1}update(){}dispose(){this.geometry.dispose(),this.material.dispose()}static expandBoundingBox(e,t,n){const i=e.geometry;if(void 0!==i){let r=e;for(l.identity();r&&r!==t;)l.premultiply(r.matrix),r=r.parent;if(i.isGeometry){const e=i.vertices;for(let t=0,i=e.length;t<i;++t)a.copy(e[t]).applyMatrix4(l),n.expandByPoint(a)}else if(i.isBufferGeometry){const e=i.attributes.position;if(void 0!==e)for(let t=0,i=e.count;t<i;++t)a.fromBufferAttribute(e,t).applyMatrix4(l),n.expandByPoint(a)}}const r=e.children;for(let e=0,i=r.length;e<i;++e)c.expandBoundingBox(r[e],t,n)}}c.defaultProps={color:new o.Q1f("#ffd633"),length:.25,axes:!1};const d=new o.NRn,u=new o.Pq0;class h extends o.CmU{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new o.qtW([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new o.qtW([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new o.LuO(t,6,1);return this.setAttribute("instanceStart",new o.eHs(n,3,0)),this.setAttribute("instanceEnd",new o.eHs(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new o.LuO(t,6,1);return this.setAttribute("instanceColorStart",new o.eHs(n,3,0)),this.setAttribute("instanceColorEnd",new o.eHs(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new o.XJ7(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new o.NRn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),d.setFromBufferAttribute(t),this.boundingBox.union(d))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new o.iyt),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let r=0,o=e.count;r<o;r++)u.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(u)),u.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(u));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}var p=n(9979);p.fCn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new o.I9Y(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},p.zkh.line={uniforms:o.LlO.merge([p.fCn.common,p.fCn.fog,p.fCn.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );\n\t\t\t\tvec3 worldUp = normalize( cross( worldDir, tmpFwd ) );\n\t\t\t\tvec3 worldFwd = cross( worldDir, worldUp );\n\t\t\t\tworldPos = position.y < 0.5 ? start: end;\n\n\t\t\t\t// height offset\n\t\t\t\tfloat hw = linewidth * 0.5;\n\t\t\t\tworldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// cap extension\n\t\t\t\t\tworldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;\n\n\t\t\t\t\t// add width to the box\n\t\t\t\t\tworldPos.xyz += worldFwd * hw;\n\n\t\t\t\t\t// endcaps\n\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\tworldPos.xyz -= worldFwd * 2.0 * hw;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat alpha = opacity;\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class m extends o.BKk{constructor(e){super({type:"LineMaterial",uniforms:o.LlO.clone(p.zkh.line.uniforms),vertexShader:p.zkh.line.vertexShader,fragmentShader:p.zkh.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){!0===e!==this.dashed&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(!0===e!==this.alphaToCoverage&&(this.needsUpdate=!0),!0===e?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const f=new o.IUQ,g=new o.Pq0,v=new o.Pq0,y=new o.IUQ,b=new o.IUQ,A=new o.IUQ,_=new o.Pq0,w=new o.kn4,x=new o.cZY,C=new o.Pq0,E=new o.NRn,M=new o.iyt,S=new o.IUQ;let T,k;function L(e,t,n){return S.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),S.multiplyScalar(1/S.w),S.x=k/n.width,S.y=k/n.height,S.applyMatrix4(e.projectionMatrixInverse),S.multiplyScalar(1/S.w),Math.abs(Math.max(S.x,S.y))}class D extends o.eaF{constructor(e=new h,t=new m({color:16777215*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let e=0,r=0,o=t.count;e<o;e++,r+=2)g.fromBufferAttribute(t,e),v.fromBufferAttribute(n,e),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+g.distanceTo(v);const r=new o.LuO(i,2,1);return e.setAttribute("instanceDistanceStart",new o.eHs(r,1,0)),e.setAttribute("instanceDistanceEnd",new o.eHs(r,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;null!==i||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const r=void 0!==e.params.Line2&&e.params.Line2.threshold||0;T=e.ray;const s=this.matrixWorld,a=this.geometry,l=this.material;let c,d;if(k=l.linewidth+r,null===a.boundingSphere&&a.computeBoundingSphere(),M.copy(a.boundingSphere).applyMatrix4(s),n)c=.5*k;else{c=L(i,Math.max(i.near,M.distanceToPoint(T.origin)),l.resolution)}if(M.radius+=c,!1!==T.intersectsSphere(M)){if(null===a.boundingBox&&a.computeBoundingBox(),E.copy(a.boundingBox).applyMatrix4(s),n)d=.5*k;else{d=L(i,Math.max(i.near,E.distanceToPoint(T.origin)),l.resolution)}E.expandByScalar(d),!1!==T.intersectsBox(E)&&(n?function(e,t){const n=e.matrixWorld,i=e.geometry,r=i.attributes.instanceStart,s=i.attributes.instanceEnd;for(let a=0,l=Math.min(i.instanceCount,r.count);a<l;a++){x.start.fromBufferAttribute(r,a),x.end.fromBufferAttribute(s,a),x.applyMatrix4(n);const i=new o.Pq0,l=new o.Pq0;T.distanceSqToSegment(x.start,x.end,l,i),l.distanceTo(i)<.5*k&&t.push({point:l,pointOnLine:i,distance:T.origin.distanceTo(l),object:e,face:null,faceIndex:a,uv:null,uv1:null})}}(this,t):function(e,t,n){const i=t.projectionMatrix,r=e.material.resolution,s=e.matrixWorld,a=e.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,d=Math.min(a.instanceCount,l.count),u=-t.near;T.at(1,A),A.w=1,A.applyMatrix4(t.matrixWorldInverse),A.applyMatrix4(i),A.multiplyScalar(1/A.w),A.x*=r.x/2,A.y*=r.y/2,A.z=0,_.copy(A),w.multiplyMatrices(t.matrixWorldInverse,s);for(let t=0,a=d;t<a;t++){if(y.fromBufferAttribute(l,t),b.fromBufferAttribute(c,t),y.w=1,b.w=1,y.applyMatrix4(w),b.applyMatrix4(w),y.z>u&&b.z>u)continue;if(y.z>u){const e=y.z-b.z,t=(y.z-u)/e;y.lerp(b,t)}else if(b.z>u){const e=b.z-y.z,t=(b.z-u)/e;b.lerp(y,t)}y.applyMatrix4(i),b.applyMatrix4(i),y.multiplyScalar(1/y.w),b.multiplyScalar(1/b.w),y.x*=r.x/2,y.y*=r.y/2,b.x*=r.x/2,b.y*=r.y/2,x.start.copy(y),x.start.z=0,x.end.copy(b),x.end.z=0;const a=x.closestPointToPointParameter(_,!0);x.at(a,C);const d=o.cj9.lerp(y.z,b.z,a),h=d>=-1&&d<=1,p=_.distanceTo(C)<.5*k;if(h&&p){x.start.fromBufferAttribute(l,t),x.end.fromBufferAttribute(c,t),x.start.applyMatrix4(s),x.end.applyMatrix4(s);const i=new o.Pq0,r=new o.Pq0;T.distanceSqToSegment(x.start,x.end,r,i),n.push({point:r,pointOnLine:i,distance:T.origin.distanceTo(r),object:e,face:null,faceIndex:t,uv:null,uv1:null})}}}(this,i,t))}}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(f),this.material.uniforms.resolution.value.set(f.z,f.w))}}class I extends D{constructor(e,t){const n=Object.assign({},I.defaultProps,t);let i="number"==typeof e?e:(()=>{const t=new o.NRn;return t.makeEmpty(),(0,s.g6)(e,t),(t.isEmpty()?1:t.getBoundingSphere(new o.iyt).radius)*n.length})();const r=4===n.colors.length?n.colors[0]:null;let a=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],l=[];for(let e of n.colors.slice(-3)){let t=e.toArray();l.push(...t,...t)}const c=new h;c.setPositions(a),c.setColors(l);if(super(c,new m({vertexColors:!0,toneMapped:!1,depthTest:n.depthTest,worldUnits:!1,linewidth:n.width})),r){const e=new o.LoY;e.setAttribute("position",new o.qtW([0,0,0],3));const t=new o.BH$({size:n.width+1,toneMapped:!1,color:r,sizeAttenuation:!1,depthTest:n.depthTest});this.originPoint=new o.ONl(e,t),this.originPoint.renderOrder=2,this.add(this.originPoint)}this.renderOrder=2,this.update()}update(){}dispose(){this.originPoint&&(this.remove(this.originPoint),this.originPoint.geometry.dispose(),this.originPoint.material.dispose()),this.geometry.dispose(),this.material.dispose()}}I.defaultProps={length:.15,width:2,depthTest:!1,colors:[new o.Q1f(16766515),new o.Q1f(10894154),new o.Q1f(7315996),new o.Q1f(3113953)]};class R extends o.B69{constructor(e,t=1){super(),this.type="LightHelper",this.light=e,this.material=new o.mrM({opacity:.8,transparent:!0,toneMapped:!1}),this.material.color=this.light.color,this.source=new o.DXC(new o.XJ7(new o.Gu$(t/10,8,4)),this.material),this.add(this.source)}update(){}dispose(){this.source.geometry.dispose(),this.material.dispose()}}class O extends h{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let i=0;i<t;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let i=0;i<t;i++)n[6*i]=e[i].x,n[6*i+1]=e[i].y,n[6*i+2]=e[i].z||0,n[6*i+3]=e[i+1].x,n[6*i+4]=e[i+1].y,n[6*i+5]=e[i+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class P extends D{constructor(e=new O,t=new m({color:16777215*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}class B extends R{constructor(e,t){super(e,t),this.type="DirectionalLightHelper",this.targetMaterial=new m({opacity:.8,transparent:!0,toneMapped:!1,depthTest:!1,worldUnits:!1,linewidth:2}),this.targetMaterial.color=this.light.color,this.target=new P((new O).setPositions([0,0,0,...e.target.position.toArray()]),this.targetMaterial),this.target.scale.setScalar(1),this.target.matrixAutoUpdate=!1,this.target.renderOrder=2,this.add(this.target)}update(){super.update(),this.light.parent&&(this.target.scale.setScalar(this.light.parent.position.length()/this.light.parent.scale.y),this.target.updateMatrix())}dispose(){this.target.geometry.dispose(),super.dispose()}}class N extends o.B69{constructor(e,t=1){super(),this.type="AmbientLightHelper",this.light=e,this.geometry=new o.Gu$(t/2,8,4,0,2*Math.PI,0,Math.PI/2),this.upper=new o.eaF(this.geometry,new o.V9B({opacity:.4,transparent:!0,toneMapped:!1,side:o.$EB})),this.upper.receiveShadow=!1,console.log("Color",e.color),this.upper.material.color=e.color,this.add(this.upper),this.lower=new o.eaF(this.geometry,new o.V9B({opacity:.4,transparent:!0,toneMapped:!1,side:o.$EB})),this.lower.rotateX(Math.PI),this.lower.updateMatrix(),this.lower.material.color="groundColor"in e?e.groundColor:e.color,this.add(this.lower),this.position.set(0,-1,0)}update(){}dispose(){this.geometry.dispose(),this.upper.material.dispose(),this.lower.material.dispose()}}class U extends o.B69{constructor(e){super(),this.type="RectLightHelper",this.light=e;const t=new m({opacity:.8,transparent:!0,toneMapped:!1,worldUnits:!1,linewidth:2});t.color=this.light.color,this.lines=new D((new h).setPositions([0,0,0,0,0,-1,5,-5,0,5,5,0,5,5,0,-5,5,0,-5,5,0,-5,-5,0,-5,-5,0,5,-5,0]),t),this.add(this.lines);const n=[null,null,null,null,new o.V9B({opacity:.1,transparent:!0,toneMapped:!1,side:o.hB5}),new o.V9B({opacity:.4,transparent:!0,toneMapped:!1,side:o.hB5})];n[4].color=n[5].color=e.color,this.area=new o.eaF(new o.iNn(10,10,0),n),this.add(this.area)}update(){}dispose(){this.lines.geometry.dispose(),this.area.geometry.dispose(),this.lines.material.dispose();let e=this.area.material;e[4].dispose(),e[5].dispose()}}var F=n(3074),z=n(8424);const H=[[B,"DirectionalLight"],[class extends R{constructor(e){super(e,.6),this.type="PointLightHelper",this.distance=new o.eaF(new o.Gu$(1),new o.V9B({opacity:.15,transparent:!0})),this.distance.material.color=e.color,this.distance.matrixAutoUpdate=!1,this.add(this.distance)}update(){super.update(),this.distance.scale.setScalar(this.light.distance/this.light.parent.scale.y),this.distance.updateMatrix()}dispose(){this.distance.geometry.dispose(),this.distance.material.dispose(),super.dispose()}},"PointLight"],[class extends B{constructor(e){super(e,.6),this.type="SpotLightHelper",this.targetMaterial.depthTest=!0,this.cone=new o.DXC(new o.XJ7(new o.qFE(1,1,16,1,!0)),this.material),this.cone.matrixAutoUpdate=!1,this.cone.position.set(0,-.5*length,0),this.cone.updateMatrix(),this.add(this.cone)}update(){let e=this.light.distance/this.light.parent.scale.y||this.light.shadow.camera.far,t=Math.min(Math.tan(this.light.angle),1e3)*e;this.cone.scale.set(t,e,t),this.cone.position.set(0,-.5*e,0),this.cone.updateMatrix(),super.update()}dispose(){this.cone.geometry.dispose(),super.dispose()}},"SpotLight"],[N,"HemisphereLight"],[N,"AmbientLight"],[U,"RectAreaLight"]],j={viewportPicking:i.gK.Boolean("Viewport.Picking",!0),viewportBrackets:i.gK.Boolean("Viewport.Brackets",!0)};class V extends r.A{constructor(){super(...arguments),this.ins=this.addInputs(j),this._brackets_map=new Map,this._axes_map=new Map}create(){super.create(),this.system.on("pointer-up",this.onPointerUp,this)}dispose(){this.system.off("pointer-up",this.onPointerUp,this),super.dispose()}update(){if(this.ins.viewportBrackets.changed){for(let e of this._brackets_map.values())e.visible=this.ins.viewportBrackets.value;for(let e of this._axes_map.values())e.visible=this.ins.viewportBrackets.value}return!0}onSelectNode(e,t){super.onSelectNode(e,t);const n="NVScene"===e.typeName?e.getComponent(z.Ay,!0):e.getComponent(F.Ay,!0);n&&this.updateBracket(n,t)}onSelectComponent(e,t){super.onSelectComponent(e,t),(e instanceof F.Ay||e instanceof z.Ay)&&this.updateBracket(e,t)}onPointerUp(e){this.ins.viewportPicking.value&&e.isPrimary&&!e.isDragging&&(e.component?this.selectComponent(e.component,e.ctrlKey):e.ctrlKey||this.clearSelection())}tick(e){for(let e of this._brackets_map.values())e.update();return!1}updateBracket(e,t){var n;if(!e)return;const i=e.object3D,r=e.transform;if(t){if(i){let t;if(i.isLight){let e=null===(n=H.find(([e,t])=>t===i.type))||void 0===n?void 0:n[0];e&&(i.updateMatrix(),t=new e(i),t.updateWorldMatrix(!0,!1))}t||(t=new c(i)),i.add(t),this._brackets_map.set(e,t),t.visible=this.ins.viewportBrackets.value}if(r&&r.object3D!=i){let e=new I(r.object3D);this._axes_map.set(r,e),r.object3D.add(e),e.visible=this.ins.viewportBrackets.value}}else{if(i){const t=this._brackets_map.get(e);t&&(this._brackets_map.delete(e),t.removeFromParent(),t.dispose())}if(r){const e=this._axes_map.get(r);e&&(this._axes_map.delete(r),e.removeFromParent(),e.dispose())}}this.changed=!0}}V.typeName="CPickSelection"},3657:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNonAsciiHTML=t.encodeHTML=void 0;var r=i(n(6345)),o=n(2948),s=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function a(e,t){for(var n,i="",s=0;null!==(n=e.exec(t));){var a=n.index;i+=t.substring(s,a);var l=t.charCodeAt(a),c=r.default.get(l);if("object"==typeof c){if(a+1<t.length){var d=t.charCodeAt(a+1),u="number"==typeof c.n?c.n===d?c.o:void 0:c.n.get(d);if(void 0!==u){i+=u,s=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)i+=c,s=a+1;else{var h=(0,o.getCodePoint)(t,a);i+="&#x".concat(h.toString(16),";"),s=e.lastIndex+=Number(h!==l)}}return i+t.substr(s)}t.encodeHTML=function(e){return a(s,e)},t.encodeNonAsciiHTML=function(e){return a(o.xmlReplacer,e)}},3675:(e,t,n)=>{"use strict";var i,r,o;n.d(t,{BX:()=>o,Nm:()=>s,aL:()=>r,uj:()=>i}),function(e){e[e.mm=0]="mm",e[e.cm=1]="cm",e[e.m=2]="m",e[e.km=3]="km",e[e.in=4]="in",e[e.ft=5]="ft",e[e.yd=6]="yd",e[e.mi=7]="mi"}(i||(i={})),function(e){e[e.EN=0]="EN",e[e.ES=1]="ES",e[e.DE=2]="DE",e[e.NL=3]="NL",e[e.JA=4]="JA",e[e.FR=5]="FR",e[e.IT=6]="IT",e[e.HAW=7]="HAW",e[e.AR=8]="AR"}(r||(r={})),function(e){e.EN="English",e.ES="Spanish (Español)",e.DE="German (Deutsch)",e.NL="Dutch (Nederlands)",e.JA="Japanese (日本語)",e.FR="French (Français)",e.IT="Italian (Italiano)",e.HAW="Hawaiian (ʻŌlelo Hawaiʻi)",e.AR="Arabic (العربية)"}(o||(o={}));const s="EN"},3681:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,i;function r(){return t.apply(null,arguments)}function o(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(l(e,t))return!1;return!0}function d(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var n,i=[],r=e.length;for(n=0;n<r;++n)i.push(t(e[n],n));return i}function m(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,i){return Wn(e,t,n,i,!0).utc()}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=g()),e._pf}function y(e){if(null==e._isValid){var t=v(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function b(e){var t=f(NaN);return null!=e?m(v(t),e):v(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),i=n.length>>>0;for(t=0;t<i;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var A=r.momentProperties=[],_=!1;function w(e,t){var n,i,r,o=A.length;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=v(t)),d(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)d(r=t[i=A[n]])||(e[i]=r);return e}function x(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,r.updateOffset(this),_=!1)}function C(e){return e instanceof x||null!=e&&null!=e._isAMomentObject}function E(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function M(e,t){var n=!0;return m(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,s,a=[],c=arguments.length;for(o=0;o<c;o++){if(i="","object"==typeof arguments[o]){for(s in i+="\n["+o+"] ",arguments[0])l(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];a.push(i)}E(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var S,T={};function k(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),T[e]||(E(t),T[e]=!0)}function L(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e){var t,n;for(n in e)l(e,n)&&(L(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function I(e,t){var n,i=m({},e);for(n in t)l(t,n)&&(a(e[n])&&a(t[n])?(i[n]={},m(i[n],e[n]),m(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&a(e[n])&&(i[n]=m({},i[n]));return i}function R(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function P(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return L(i)?i.call(t,n):i}function B(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},z={};function H(e,t,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),e&&(z[e]=r),t&&(z[t[0]]=function(){return B(r.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,i=e.match(N);for(t=0,n=i.length;t<n;t++)z[i[t]]?i[t]=z[i[t]]:i[t]=j(i[t]);return function(t){var r,o="";for(r=0;r<n;r++)o+=L(i[r])?i[r].call(t,e):i[r];return o}}function Y(e,t){return e.isValid()?(t=G(t,e.localeData()),F[t]=F[t]||V(t),F[t](e)):e.localeData().invalidDate()}function G(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(U.lastIndex=0;n>=0&&U.test(e);)e=e.replace(U,i),U.lastIndex=0,n-=1;return e}var Q={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function $(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])}var q="Invalid date";function W(){return this._invalidDate}var K="%d",Z=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,n,i){var r=this._relativeTime[n];return L(r)?r(e,t,n,i):r.replace(/%d/i,e)}function te(e,t){var n=this._relativeTime[e>0?"future":"past"];return L(n)?n(t):n.replace(/%s/i,t)}var ne={};function ie(e,t){var n=e.toLowerCase();ne[n]=ne[n+"s"]=ne[t]=e}function re(e){return"string"==typeof e?ne[e]||ne[e.toLowerCase()]:void 0}function oe(e){var t,n,i={};for(n in e)l(e,n)&&(t=re(n))&&(i[t]=e[n]);return i}var se={};function ae(e,t){se[e]=t}function le(e){var t,n=[];for(t in e)l(e,t)&&n.push({unit:t,priority:se[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}function ce(e){return e%4==0&&e%100!=0||e%400==0}function de(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ue(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=de(t)),n}function he(e,t){return function(n){return null!=n?(me(this,e,n),r.updateOffset(this,t),this):pe(this,e)}}function pe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function me(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ce(e.year())&&1===e.month()&&29===e.date()?(n=ue(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),et(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function fe(e){return L(this[e=re(e)])?this[e]():this}function ge(e,t){if("object"==typeof e){var n,i=le(e=oe(e)),r=i.length;for(n=0;n<r;n++)this[i[n].unit](e[i[n].unit])}else if(L(this[e=re(e)]))return this[e](t);return this}var ve,ye=/\d/,be=/\d\d/,Ae=/\d{3}/,_e=/\d{4}/,we=/[+-]?\d{6}/,xe=/\d\d?/,Ce=/\d\d\d\d?/,Ee=/\d\d\d\d\d\d?/,Me=/\d{1,3}/,Se=/\d{1,4}/,Te=/[+-]?\d{1,6}/,ke=/\d+/,Le=/[+-]?\d+/,De=/Z|[+-]\d\d:?\d\d/gi,Ie=/Z|[+-]\d\d(?::?\d\d)?/gi,Re=/[+-]?\d+(\.\d{1,3})?/,Oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Pe(e,t,n){ve[e]=L(t)?t:function(e,i){return e&&n?n:t}}function Be(e,t){return l(ve,e)?ve[e](t._strict,t._locale):new RegExp(Ne(e))}function Ne(e){return Ue(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}function Ue(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ve={};var Fe={};function ze(e,t){var n,i,r=t;for("string"==typeof e&&(e=[e]),u(t)&&(r=function(e,n){n[t]=ue(e)}),i=e.length,n=0;n<i;n++)Fe[e[n]]=r}function He(e,t){ze(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function je(e,t,n){null!=t&&l(Fe,e)&&Fe[e](t,n._a,n,e)}var Ve,Ye=0,Ge=1,Qe=2,$e=3,qe=4,We=5,Ke=6,Ze=7,Xe=8;function Je(e,t){return(e%t+t)%t}function et(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Je(t,12);return e+=(t-n)/12,1===n?ce(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),ie("month","M"),ae("month",8),Pe("M",xe),Pe("MM",xe,be),Pe("MMM",function(e,t){return t.monthsShortRegex(e)}),Pe("MMMM",function(e,t){return t.monthsRegex(e)}),ze(["M","MM"],function(e,t){t[Ge]=ue(e)-1}),ze(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[Ge]=r:v(n).invalidMonth=e});var tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),it=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=Oe,ot=Oe;function st(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||it).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function at(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[it.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=f([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Ve.call(this._shortMonthsParse,s))?r:null:-1!==(r=Ve.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Ve.call(this._shortMonthsParse,s))||-1!==(r=Ve.call(this._longMonthsParse,s))?r:null:-1!==(r=Ve.call(this._longMonthsParse,s))||-1!==(r=Ve.call(this._shortMonthsParse,s))?r:null}function ct(e,t,n){var i,r,o;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=f([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function dt(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=ue(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ut(e){return null!=e?(dt(this,e),r.updateOffset(this,!0),this):pe(this,"Month")}function ht(){return et(this.year(),this.month())}function pt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ft.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function mt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||ft.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ft(){function e(e,t){return t.length-e.length}var t,n,i=[],r=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(e),r.sort(e),o.sort(e),t=0;t<12;t++)i[t]=Ue(i[t]),r[t]=Ue(r[t]);for(t=0;t<24;t++)o[t]=Ue(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function gt(e){return ce(e)?366:365}H("Y",0,0,function(){var e=this.year();return e<=9999?B(e,4):"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),ie("year","y"),ae("year",1),Pe("Y",Le),Pe("YY",xe,be),Pe("YYYY",Se,_e),Pe("YYYYY",Te,we),Pe("YYYYYY",Te,we),ze(["YYYYY","YYYYYY"],Ye),ze("YYYY",function(e,t){t[Ye]=2===e.length?r.parseTwoDigitYear(e):ue(e)}),ze("YY",function(e,t){t[Ye]=r.parseTwoDigitYear(e)}),ze("Y",function(e,t){t[Ye]=parseInt(e,10)}),r.parseTwoDigitYear=function(e){return ue(e)+(ue(e)>68?1900:2e3)};var vt=he("FullYear",!0);function yt(){return ce(this.year())}function bt(e,t,n,i,r,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,i,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,i,r,o,s),a}function At(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _t(e,t,n){var i=7+t-n;return-(7+At(e,0,i).getUTCDay()-t)%7+i-1}function wt(e,t,n,i,r){var o,s,a=1+7*(t-1)+(7+n-i)%7+_t(e,i,r);return a<=0?s=gt(o=e-1)+a:a>gt(e)?(o=e+1,s=a-gt(e)):(o=e,s=a),{year:o,dayOfYear:s}}function xt(e,t,n){var i,r,o=_t(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?i=s+Ct(r=e.year()-1,t,n):s>Ct(e.year(),t,n)?(i=s-Ct(e.year(),t,n),r=e.year()+1):(r=e.year(),i=s),{week:i,year:r}}function Ct(e,t,n){var i=_t(e,t,n),r=_t(e+1,t,n);return(gt(e)-i+r)/7}function Et(e){return xt(e,this._week.dow,this._week.doy).week}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),ie("week","w"),ie("isoWeek","W"),ae("week",5),ae("isoWeek",5),Pe("w",xe),Pe("ww",xe,be),Pe("W",xe),Pe("WW",xe,be),He(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=ue(e)});var Mt={dow:0,doy:6};function St(){return this._week.dow}function Tt(){return this._week.doy}function kt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Lt(e){var t=xt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Dt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function It(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rt(e,t){return e.slice(t,7).concat(e.slice(0,t))}H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),ie("day","d"),ie("weekday","e"),ie("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Pe("d",xe),Pe("e",xe),Pe("E",xe),Pe("dd",function(e,t){return t.weekdaysMinRegex(e)}),Pe("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Pe("dddd",function(e,t){return t.weekdaysRegex(e)}),He(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:v(n).invalidWeekday=e}),He(["d","e","E"],function(e,t,n,i){t[i]=ue(e)});var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Bt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nt=Oe,Ut=Oe,Ft=Oe;function zt(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Rt(n,this._week.dow):e?n[e.day()]:n}function Ht(e){return!0===e?Rt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function jt(e){return!0===e?Rt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,n){var i,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=f([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Ve.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ve.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Ve.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Ve.call(this._weekdaysParse,s))||-1!==(r=Ve.call(this._shortWeekdaysParse,s))||-1!==(r=Ve.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ve.call(this._shortWeekdaysParse,s))||-1!==(r=Ve.call(this._weekdaysParse,s))||-1!==(r=Ve.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Ve.call(this._minWeekdaysParse,s))||-1!==(r=Ve.call(this._weekdaysParse,s))||-1!==(r=Ve.call(this._shortWeekdaysParse,s))?r:null}function Yt(e,t,n){var i,r,o;if(this._weekdaysParseExact)return Vt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=f([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function Gt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function Qt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function $t(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=It(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function qt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Nt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Wt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ut),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Kt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,n,i,r,o,s=[],a=[],l=[],c=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),i=Ue(this.weekdaysMin(n,"")),r=Ue(this.weekdaysShort(n,"")),o=Ue(this.weekdays(n,"")),s.push(i),a.push(r),l.push(o),c.push(i),c.push(r),c.push(o);s.sort(e),a.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function en(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tn(e,t){return t._meridiemParse}function nn(e){return"p"===(e+"").toLowerCase().charAt(0)}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Xt),H("k",["kk",2],0,Jt),H("hmm",0,0,function(){return""+Xt.apply(this)+B(this.minutes(),2)}),H("hmmss",0,0,function(){return""+Xt.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),en("a",!0),en("A",!1),ie("hour","h"),ae("hour",13),Pe("a",tn),Pe("A",tn),Pe("H",xe),Pe("h",xe),Pe("k",xe),Pe("HH",xe,be),Pe("hh",xe,be),Pe("kk",xe,be),Pe("hmm",Ce),Pe("hmmss",Ee),Pe("Hmm",Ce),Pe("Hmmss",Ee),ze(["H","HH"],$e),ze(["k","kk"],function(e,t,n){var i=ue(e);t[$e]=24===i?0:i}),ze(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ze(["h","hh"],function(e,t,n){t[$e]=ue(e),v(n).bigHour=!0}),ze("hmm",function(e,t,n){var i=e.length-2;t[$e]=ue(e.substr(0,i)),t[qe]=ue(e.substr(i)),v(n).bigHour=!0}),ze("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[$e]=ue(e.substr(0,i)),t[qe]=ue(e.substr(i,2)),t[We]=ue(e.substr(r)),v(n).bigHour=!0}),ze("Hmm",function(e,t,n){var i=e.length-2;t[$e]=ue(e.substr(0,i)),t[qe]=ue(e.substr(i))}),ze("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[$e]=ue(e.substr(0,i)),t[qe]=ue(e.substr(i,2)),t[We]=ue(e.substr(r))});var rn=/[ap]\.?m?\.?/i,on=he("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,ln={calendar:O,longDateFormat:Q,invalidDate:q,ordinal:K,dayOfMonthOrdinalParse:Z,relativeTime:J,months:tt,monthsShort:nt,week:Mt,weekdays:Ot,weekdaysMin:Bt,weekdaysShort:Pt,meridiemParse:rn},cn={},dn={};function un(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i;n+=1)if(e[n]!==t[n])return n;return i}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function pn(e){for(var t,n,i,r,o=0;o<e.length;){for(t=(r=hn(e[o]).split("-")).length,n=(n=hn(e[o+1]))?n.split("-"):null;t>0;){if(i=fn(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&un(r,n)>=t-1)break;t--}o++}return an}function mn(e){return null!=e.match("^[^/\\\\]*$")}function fn(t){var i=null;if(void 0===cn[t]&&e&&e.exports&&mn(t))try{i=an._abbr,n(6857)("./"+t),gn(i)}catch(e){cn[t]=null}return cn[t]}function gn(e,t){var n;return e&&((n=d(t)?bn(e):vn(e,t))?an=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function vn(e,t){if(null!==t){var n,i=ln;if(t.abbr=e,null!=cn[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])i=cn[t.parentLocale]._config;else{if(null==(n=fn(t.parentLocale)))return dn[t.parentLocale]||(dn[t.parentLocale]=[]),dn[t.parentLocale].push({name:e,config:t}),null;i=n._config}return cn[e]=new R(I(i,t)),dn[e]&&dn[e].forEach(function(e){vn(e.name,e.config)}),gn(e),cn[e]}return delete cn[e],null}function yn(e,t){if(null!=t){var n,i,r=ln;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(I(cn[e]._config,t)):(null!=(i=fn(e))&&(r=i._config),t=I(r,t),null==i&&(t.abbr=e),(n=new R(t)).parentLocale=cn[e],cn[e]=n),gn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===gn()&&gn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function bn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!s(e)){if(t=fn(e))return t;e=[e]}return pn(e)}function An(){return S(cn)}function _n(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Ge]<0||n[Ge]>11?Ge:n[Qe]<1||n[Qe]>et(n[Ye],n[Ge])?Qe:n[$e]<0||n[$e]>24||24===n[$e]&&(0!==n[qe]||0!==n[We]||0!==n[Ke])?$e:n[qe]<0||n[qe]>59?qe:n[We]<0||n[We]>59?We:n[Ke]<0||n[Ke]>999?Ke:-1,v(e)._overflowDayOfYear&&(t<Ye||t>Qe)&&(t=Qe),v(e)._overflowWeeks&&-1===t&&(t=Ze),v(e)._overflowWeekday&&-1===t&&(t=Xe),v(e).overflow=t),e}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Mn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sn=/^\/?Date\((-?\d+)/i,Tn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ln(e){var t,n,i,r,o,s,a=e._i,l=wn.exec(a)||xn.exec(a),c=En.length,d=Mn.length;if(l){for(v(e).iso=!0,t=0,n=c;t<n;t++)if(En[t][1].exec(l[1])){r=En[t][0],i=!1!==En[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=d;t<n;t++)if(Mn[t][1].exec(l[3])){o=(l[2]||" ")+Mn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!i&&null!=o)return void(e._isValid=!1);if(l[4]){if(!Cn.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(o||"")+(s||""),jn(e)}else e._isValid=!1}function Dn(e,t,n,i,r,o){var s=[In(e),nt.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function In(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Rn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(e,t,n){return!e||Pt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Pn(e,t,n){if(e)return kn[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}function Bn(e){var t,n=Tn.exec(Rn(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],t,e))return;e._a=t,e._tzm=Pn(n[8],n[9],n[10]),e._d=At.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Nn(e){var t=Sn.exec(e._i);null===t?(Ln(e),!1===e._isValid&&(delete e._isValid,Bn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Un(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function zn(e){var t,n,i,r,o,s=[];if(!e._d){for(i=Fn(e),e._w&&null==e._a[Qe]&&null==e._a[Ge]&&Hn(e),null!=e._dayOfYear&&(o=Un(e._a[Ye],i[Ye]),(e._dayOfYear>gt(o)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=At(o,0,e._dayOfYear),e._a[Ge]=n.getUTCMonth(),e._a[Qe]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[$e]&&0===e._a[qe]&&0===e._a[We]&&0===e._a[Ke]&&(e._nextDay=!0,e._a[$e]=0),e._d=(e._useUTC?At:bt).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[$e]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(v(e).weekdayMismatch=!0)}}function Hn(e){var t,n,i,r,o,s,a,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,n=Un(t.GG,e._a[Ye],xt(Kn(),1,4).year),i=Un(t.W,1),((r=Un(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,c=xt(Kn(),o,s),n=Un(t.gg,e._a[Ye],c.year),i=Un(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o),i<1||i>Ct(n,o,s)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(a=wt(n,i,r,o,s),e._a[Ye]=a.year,e._dayOfYear=a.dayOfYear)}function jn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],v(e).empty=!0;var t,n,i,o,s,a,l,c=""+e._i,d=c.length,u=0;for(l=(i=G(e._f,e._locale).match(N)||[]).length,t=0;t<l;t++)o=i[t],(n=(c.match(Be(o,e))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&v(e).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),u+=n.length),z[o]?(n?v(e).empty=!1:v(e).unusedTokens.push(o),je(o,n,e)):e._strict&&!n&&v(e).unusedTokens.push(o);v(e).charsLeftOver=d-u,c.length>0&&v(e).unusedInput.push(c),e._a[$e]<=12&&!0===v(e).bigHour&&e._a[$e]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[$e]=Vn(e._locale,e._a[$e],e._meridiem),null!==(a=v(e).era)&&(e._a[Ye]=e._locale.erasConvertYear(a,e._a[Ye])),zn(e),_n(e)}else Bn(e);else Ln(e)}function Vn(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Yn(e){var t,n,i,r,o,s,a=!1,l=e._f.length;if(0===l)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)o=0,s=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],jn(t),y(t)&&(s=!0),o+=v(t).charsLeftOver,o+=10*v(t).unusedTokens.length,v(t).score=o,a?o<i&&(i=o,n=t):(null==i||o<i||s)&&(i=o,n=t,s&&(a=!0));m(e,n||t)}function Gn(e){if(!e._d){var t=oe(e._i),n=void 0===t.day?t.date:t.day;e._a=p([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),zn(e)}}function Qn(e){var t=new x(_n($n(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function $n(e){var t=e._i,n=e._f;return e._locale=e._locale||bn(e._l),null===t||void 0===n&&""===t?b({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),C(t)?new x(_n(t)):(h(t)?e._d=t:s(n)?Yn(e):n?jn(e):qn(e),y(e)||(e._d=null),e))}function qn(e){var t=e._i;d(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Nn(e):s(t)?(e._a=p(t.slice(0),function(e){return parseInt(e,10)}),zn(e)):a(t)?Gn(e):u(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Wn(e,t,n,i,r){var o={};return!0!==t&&!1!==t||(i=t,t=void 0),!0!==n&&!1!==n||(i=n,n=void 0),(a(e)&&c(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=n,o._i=e,o._f=t,o._strict=i,Qn(o)}function Kn(e,t,n,i){return Wn(e,t,n,i,!1)}r.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Zn=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:b()}),Xn=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Kn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:b()});function Jn(e,t){var n,i;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Kn();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}function ei(){return Jn("isBefore",[].slice.call(arguments,0))}function ti(){return Jn("isAfter",[].slice.call(arguments,0))}var ni=function(){return Date.now?Date.now():+new Date},ii=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ri(e){var t,n,i=!1,r=ii.length;for(t in e)if(l(e,t)&&(-1===Ve.call(ii,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<r;++n)if(e[ii[n]]){if(i)return!1;parseFloat(e[ii[n]])!==ue(e[ii[n]])&&(i=!0)}return!0}function oi(){return this._isValid}function si(){return ki(NaN)}function ai(e){var t=oe(e),n=t.year||0,i=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=ri(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=bn(),this._bubble()}function li(e){return e instanceof ai}function ci(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function di(e,t,n){var i,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(i=0;i<r;i++)(n&&e[i]!==t[i]||!n&&ue(e[i])!==ue(t[i]))&&s++;return s+o}function ui(e,t){H(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)})}ui("Z",":"),ui("ZZ",""),Pe("Z",Ie),Pe("ZZ",Ie),ze(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=pi(Ie,e)});var hi=/([\+\-]|\d\d)/gi;function pi(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(hi)||["-",0,0])[1]+ue(n[2]))?0:"+"===n[0]?i:-i}function mi(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(C(e)||h(e)?e.valueOf():Kn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Kn(e).local()}function fi(e){return-Math.round(e._d.getTimezoneOffset())}function gi(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=pi(Ie,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=fi(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Oi(this,ki(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:fi(this)}function vi(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yi(e){return this.utcOffset(0,e)}function bi(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(fi(this),"m")),this}function Ai(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=pi(De,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function _i(e){return!!this.isValid()&&(e=e?Kn(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function wi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function xi(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=$n(t))._a?(e=t._isUTC?f(t._a):Kn(t._a),this._isDSTShifted=this.isValid()&&di(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ci(){return!!this.isValid()&&!this._isUTC}function Ei(){return!!this.isValid()&&this._isUTC}function Mi(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Si=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ti=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ki(e,t){var n,i,r,o=e,s=null;return li(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=Si.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:ue(s[Qe])*n,h:ue(s[$e])*n,m:ue(s[qe])*n,s:ue(s[We])*n,ms:ue(ci(1e3*s[Ke]))*n}):(s=Ti.exec(e))?(n="-"===s[1]?-1:1,o={y:Li(s[2],n),M:Li(s[3],n),w:Li(s[4],n),d:Li(s[5],n),h:Li(s[6],n),m:Li(s[7],n),s:Li(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Ii(Kn(o.from),Kn(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),i=new ai(o),li(e)&&l(e,"_locale")&&(i._locale=e._locale),li(e)&&l(e,"_isValid")&&(i._isValid=e._isValid),i}function Li(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Di(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ii(e,t){var n;return e.isValid()&&t.isValid()?(t=mi(t,e),e.isBefore(t)?n=Di(e,t):((n=Di(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ri(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Oi(this,ki(n,i),e),this}}function Oi(e,t,n,i){var o=t._milliseconds,s=ci(t._days),a=ci(t._months);e.isValid()&&(i=null==i||i,a&&dt(e,pe(e,"Month")+a*n),s&&me(e,"Date",pe(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,s||a))}ki.fn=ai.prototype,ki.invalid=si;var Pi=Ri(1,"add"),Bi=Ri(-1,"subtract");function Ni(e){return"string"==typeof e||e instanceof String}function Ui(e){return C(e)||h(e)||Ni(e)||u(e)||zi(e)||Fi(e)||null==e}function Fi(e){var t,n,i=a(e)&&!c(e),r=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=o.length;for(t=0;t<s;t+=1)n=o[t],r=r||l(e,n);return i&&r}function zi(e){var t=s(e),n=!1;return t&&(n=0===e.filter(function(t){return!u(t)&&Ni(e)}).length),t&&n}function Hi(e){var t,n,i=a(e)&&!c(e),r=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],r=r||l(e,n);return i&&r}function ji(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vi(e,t){1===arguments.length&&(arguments[0]?Ui(arguments[0])?(e=arguments[0],t=void 0):Hi(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Kn(),i=mi(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=t&&(L(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,Kn(n)))}function Yi(){return new x(this)}function Gi(e,t){var n=C(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Qi(e,t){var n=C(e)?e:Kn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function $i(e,t,n,i){var r=C(e)?e:Kn(e),o=C(t)?t:Kn(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))}function qi(e,t){var n,i=C(e)?e:Kn(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Wi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ki(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Zi(e,t,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=mi(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=re(t)){case"year":o=Xi(this,i)/12;break;case"month":o=Xi(this,i);break;case"quarter":o=Xi(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:de(o)}function Xi(e,t){if(e.date()<t.date())return-Xi(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function Ji(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function er(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?Y(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):L(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",Y(n,"Z")):Y(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function tr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i,r="moment",o="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",i=o+'[")]',this.format(e+t+n+i)}function nr(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=Y(this,e);return this.localeData().postformat(t)}function ir(e,t){return this.isValid()&&(C(e)&&e.isValid()||Kn(e).isValid())?ki({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function rr(e){return this.from(Kn(),e)}function or(e,t){return this.isValid()&&(C(e)&&e.isValid()||Kn(e).isValid())?ki({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sr(e){return this.to(Kn(),e)}function ar(e){var t;return void 0===e?this._locale._abbr:(null!=(t=bn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lr=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function cr(){return this._locale}var dr=1e3,ur=60*dr,hr=60*ur,pr=3506328*hr;function mr(e,t){return(e%t+t)%t}function fr(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-pr:new Date(e,t,n).valueOf()}function gr(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-pr:Date.UTC(e,t,n)}function vr(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gr:fr,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=mr(t+(this._isUTC?0:this.utcOffset()*ur),hr);break;case"minute":t=this._d.valueOf(),t-=mr(t,ur);break;case"second":t=this._d.valueOf(),t-=mr(t,dr)}return this._d.setTime(t),r.updateOffset(this,!0),this}function yr(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gr:fr,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hr-mr(t+(this._isUTC?0:this.utcOffset()*ur),hr)-1;break;case"minute":t=this._d.valueOf(),t+=ur-mr(t,ur)-1;break;case"second":t=this._d.valueOf(),t+=dr-mr(t,dr)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function br(){return this._d.valueOf()-6e4*(this._offset||0)}function Ar(){return Math.floor(this.valueOf()/1e3)}function _r(){return new Date(this.valueOf())}function wr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Cr(){return this.isValid()?this.toISOString():null}function Er(){return y(this)}function Mr(){return m({},v(this))}function Sr(){return v(this).overflow}function Tr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function kr(e,t){var n,i,o,s=this._eras||bn("en")._eras;for(n=0,i=s.length;n<i;++n)switch("string"==typeof s[n].since&&(o=r(s[n].since).startOf("day"),s[n].since=o.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=r(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}return s}function Lr(e,t,n){var i,r,o,s,a,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(o=l[i].name.toUpperCase(),s=l[i].abbr.toUpperCase(),a=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return l[i];break;case"NNNN":if(o===e)return l[i];break;case"NNNNN":if(a===e)return l[i]}else if([o,s,a].indexOf(e)>=0)return l[i]}function Dr(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ir(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].name;if(i[e].until<=n&&n<=i[e].since)return i[e].name}return""}function Rr(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].narrow;if(i[e].until<=n&&n<=i[e].since)return i[e].narrow}return""}function Or(){var e,t,n,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),i[e].since<=n&&n<=i[e].until)return i[e].abbr;if(i[e].until<=n&&n<=i[e].since)return i[e].abbr}return""}function Pr(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Br(e){return l(this,"_erasNameRegex")||Vr.call(this),e?this._erasNameRegex:this._erasRegex}function Nr(e){return l(this,"_erasAbbrRegex")||Vr.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ur(e){return l(this,"_erasNarrowRegex")||Vr.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fr(e,t){return t.erasAbbrRegex(e)}function zr(e,t){return t.erasNameRegex(e)}function Hr(e,t){return t.erasNarrowRegex(e)}function jr(e,t){return t._eraYearOrdinalRegex||ke}function Vr(){var e,t,n=[],i=[],r=[],o=[],s=this.eras();for(e=0,t=s.length;e<t;++e)i.push(Ue(s[e].name)),n.push(Ue(s[e].abbr)),r.push(Ue(s[e].narrow)),o.push(Ue(s[e].name)),o.push(Ue(s[e].abbr)),o.push(Ue(s[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}function Yr(e,t){H(0,[e,e.length],0,t)}function Gr(e){return Zr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Qr(e){return Zr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function $r(){return Ct(this.year(),1,4)}function qr(){return Ct(this.isoWeekYear(),1,4)}function Wr(){var e=this.localeData()._week;return Ct(this.year(),e.dow,e.doy)}function Kr(){var e=this.localeData()._week;return Ct(this.weekYear(),e.dow,e.doy)}function Zr(e,t,n,i,r){var o;return null==e?xt(this,i,r).year:(t>(o=Ct(e,i,r))&&(t=o),Xr.call(this,e,t,n,i,r))}function Xr(e,t,n,i,r){var o=wt(e,t,n,i,r),s=At(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Jr(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),Pe("N",Fr),Pe("NN",Fr),Pe("NNN",Fr),Pe("NNNN",zr),Pe("NNNNN",Hr),ze(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?v(n).era=r:v(n).invalidEra=e}),Pe("y",ke),Pe("yy",ke),Pe("yyy",ke),Pe("yyyy",ke),Pe("yo",jr),ze(["y","yy","yyy","yyyy"],Ye),ze(["yo"],function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ye]=n._locale.eraYearOrdinalParse(e,r):t[Ye]=parseInt(e,10)}),H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Yr("gggg","weekYear"),Yr("ggggg","weekYear"),Yr("GGGG","isoWeekYear"),Yr("GGGGG","isoWeekYear"),ie("weekYear","gg"),ie("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Pe("G",Le),Pe("g",Le),Pe("GG",xe,be),Pe("gg",xe,be),Pe("GGGG",Se,_e),Pe("gggg",Se,_e),Pe("GGGGG",Te,we),Pe("ggggg",Te,we),He(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=ue(e)}),He(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),ie("quarter","Q"),ae("quarter",7),Pe("Q",ye),ze("Q",function(e,t){t[Ge]=3*(ue(e)-1)}),H("D",["DD",2],"Do","date"),ie("date","D"),ae("date",9),Pe("D",xe),Pe("DD",xe,be),Pe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ze(["D","DD"],Qe),ze("Do",function(e,t){t[Qe]=ue(e.match(xe)[0])});var eo=he("Date",!0);function to(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}H("DDD",["DDDD",3],"DDDo","dayOfYear"),ie("dayOfYear","DDD"),ae("dayOfYear",4),Pe("DDD",Me),Pe("DDDD",Ae),ze(["DDD","DDDD"],function(e,t,n){n._dayOfYear=ue(e)}),H("m",["mm",2],0,"minute"),ie("minute","m"),ae("minute",14),Pe("m",xe),Pe("mm",xe,be),ze(["m","mm"],qe);var no=he("Minutes",!1);H("s",["ss",2],0,"second"),ie("second","s"),ae("second",15),Pe("s",xe),Pe("ss",xe,be),ze(["s","ss"],We);var io,ro,oo=he("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),ie("millisecond","ms"),ae("millisecond",16),Pe("S",Me,ye),Pe("SS",Me,be),Pe("SSS",Me,Ae),io="SSSS";io.length<=9;io+="S")Pe(io,ke);function so(e,t){t[Ke]=ue(1e3*("0."+e))}for(io="S";io.length<=9;io+="S")ze(io,so);function ao(){return this._isUTC?"UTC":""}function lo(){return this._isUTC?"Coordinated Universal Time":""}ro=he("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var co=x.prototype;function uo(e){return Kn(1e3*e)}function ho(){return Kn.apply(null,arguments).parseZone()}function po(e){return e}co.add=Pi,co.calendar=Vi,co.clone=Yi,co.diff=Zi,co.endOf=yr,co.format=nr,co.from=ir,co.fromNow=rr,co.to=or,co.toNow=sr,co.get=fe,co.invalidAt=Sr,co.isAfter=Gi,co.isBefore=Qi,co.isBetween=$i,co.isSame=qi,co.isSameOrAfter=Wi,co.isSameOrBefore=Ki,co.isValid=Er,co.lang=lr,co.locale=ar,co.localeData=cr,co.max=Xn,co.min=Zn,co.parsingFlags=Mr,co.set=ge,co.startOf=vr,co.subtract=Bi,co.toArray=wr,co.toObject=xr,co.toDate=_r,co.toISOString=er,co.inspect=tr,"undefined"!=typeof Symbol&&null!=Symbol.for&&(co[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),co.toJSON=Cr,co.toString=Ji,co.unix=Ar,co.valueOf=br,co.creationData=Tr,co.eraName=Ir,co.eraNarrow=Rr,co.eraAbbr=Or,co.eraYear=Pr,co.year=vt,co.isLeapYear=yt,co.weekYear=Gr,co.isoWeekYear=Qr,co.quarter=co.quarters=Jr,co.month=ut,co.daysInMonth=ht,co.week=co.weeks=kt,co.isoWeek=co.isoWeeks=Lt,co.weeksInYear=Wr,co.weeksInWeekYear=Kr,co.isoWeeksInYear=$r,co.isoWeeksInISOWeekYear=qr,co.date=eo,co.day=co.days=Gt,co.weekday=Qt,co.isoWeekday=$t,co.dayOfYear=to,co.hour=co.hours=on,co.minute=co.minutes=no,co.second=co.seconds=oo,co.millisecond=co.milliseconds=ro,co.utcOffset=gi,co.utc=yi,co.local=bi,co.parseZone=Ai,co.hasAlignedHourOffset=_i,co.isDST=wi,co.isLocal=Ci,co.isUtcOffset=Ei,co.isUtc=Mi,co.isUTC=Mi,co.zoneAbbr=ao,co.zoneName=lo,co.dates=M("dates accessor is deprecated. Use date instead.",eo),co.months=M("months accessor is deprecated. Use month instead",ut),co.years=M("years accessor is deprecated. Use year instead",vt),co.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vi),co.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",xi);var mo=R.prototype;function fo(e,t,n,i){var r=bn(),o=f().set(i,t);return r[n](o,e)}function go(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return fo(e,t,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=fo(e,i,n,"month");return r}function vo(e,t,n,i){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var r,o=bn(),s=e?o._week.dow:0,a=[];if(null!=n)return fo(t,(n+s)%7,i,"day");for(r=0;r<7;r++)a[r]=fo(t,(r+s)%7,i,"day");return a}function yo(e,t){return go(e,t,"months")}function bo(e,t){return go(e,t,"monthsShort")}function Ao(e,t,n){return vo(e,t,n,"weekdays")}function _o(e,t,n){return vo(e,t,n,"weekdaysShort")}function wo(e,t,n){return vo(e,t,n,"weekdaysMin")}mo.calendar=P,mo.longDateFormat=$,mo.invalidDate=W,mo.ordinal=X,mo.preparse=po,mo.postformat=po,mo.relativeTime=ee,mo.pastFuture=te,mo.set=D,mo.eras=kr,mo.erasParse=Lr,mo.erasConvertYear=Dr,mo.erasAbbrRegex=Nr,mo.erasNameRegex=Br,mo.erasNarrowRegex=Ur,mo.months=st,mo.monthsShort=at,mo.monthsParse=ct,mo.monthsRegex=mt,mo.monthsShortRegex=pt,mo.week=Et,mo.firstDayOfYear=Tt,mo.firstDayOfWeek=St,mo.weekdays=zt,mo.weekdaysMin=jt,mo.weekdaysShort=Ht,mo.weekdaysParse=Yt,mo.weekdaysRegex=qt,mo.weekdaysShortRegex=Wt,mo.weekdaysMinRegex=Kt,mo.isPM=nn,mo.meridiem=sn,gn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ue(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=M("moment.lang is deprecated. Use moment.locale instead.",gn),r.langData=M("moment.langData is deprecated. Use moment.localeData instead.",bn);var xo=Math.abs;function Co(){var e=this._data;return this._milliseconds=xo(this._milliseconds),this._days=xo(this._days),this._months=xo(this._months),e.milliseconds=xo(e.milliseconds),e.seconds=xo(e.seconds),e.minutes=xo(e.minutes),e.hours=xo(e.hours),e.months=xo(e.months),e.years=xo(e.years),this}function Eo(e,t,n,i){var r=ki(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Mo(e,t){return Eo(this,e,t,1)}function So(e,t){return Eo(this,e,t,-1)}function To(e){return e<0?Math.floor(e):Math.ceil(e)}function ko(){var e,t,n,i,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*To(Do(a)+s),s=0,a=0),l.milliseconds=o%1e3,e=de(o/1e3),l.seconds=e%60,t=de(e/60),l.minutes=t%60,n=de(t/60),l.hours=n%24,s+=de(n/24),a+=r=de(Lo(s)),s-=To(Do(r)),i=de(a/12),a%=12,l.days=s,l.months=a,l.years=i,this}function Lo(e){return 4800*e/146097}function Do(e){return 146097*e/4800}function Io(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Lo(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Do(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Ro(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ue(this._months/12):NaN}function Oo(e){return function(){return this.as(e)}}var Po=Oo("ms"),Bo=Oo("s"),No=Oo("m"),Uo=Oo("h"),Fo=Oo("d"),zo=Oo("w"),Ho=Oo("M"),jo=Oo("Q"),Vo=Oo("y");function Yo(){return ki(this)}function Go(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Qo(e){return function(){return this.isValid()?this._data[e]:NaN}}var $o=Qo("milliseconds"),qo=Qo("seconds"),Wo=Qo("minutes"),Ko=Qo("hours"),Zo=Qo("days"),Xo=Qo("months"),Jo=Qo("years");function es(){return de(this.days()/7)}var ts=Math.round,ns={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function is(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function rs(e,t,n,i){var r=ki(e).abs(),o=ts(r.as("s")),s=ts(r.as("m")),a=ts(r.as("h")),l=ts(r.as("d")),c=ts(r.as("M")),d=ts(r.as("w")),u=ts(r.as("y")),h=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||d<=1&&["w"]||d<n.w&&["ww",d]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=t,h[3]=+e>0,h[4]=i,is.apply(null,h)}function os(e){return void 0===e?ts:"function"==typeof e&&(ts=e,!0)}function ss(e,t){return void 0!==ns[e]&&(void 0===t?ns[e]:(ns[e]=t,"s"===e&&(ns.ss=t-1),!0))}function as(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,o=ns;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},ns,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),i=rs(this,!r,o,n=this.localeData()),r&&(i=n.pastFuture(+this,i)),n.postformat(i)}var ls=Math.abs;function cs(e){return(e>0)-(e<0)||+e}function ds(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,o,s,a,l=ls(this._milliseconds)/1e3,c=ls(this._days),d=ls(this._months),u=this.asSeconds();return u?(e=de(l/60),t=de(e/60),l%=60,e%=60,n=de(d/12),d%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=u<0?"-":"",o=cs(this._months)!==cs(u)?"-":"",s=cs(this._days)!==cs(u)?"-":"",a=cs(this._milliseconds)!==cs(u)?"-":"",r+"P"+(n?o+n+"Y":"")+(d?o+d+"M":"")+(c?s+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+i+"S":"")):"P0D"}var us=ai.prototype;return us.isValid=oi,us.abs=Co,us.add=Mo,us.subtract=So,us.as=Io,us.asMilliseconds=Po,us.asSeconds=Bo,us.asMinutes=No,us.asHours=Uo,us.asDays=Fo,us.asWeeks=zo,us.asMonths=Ho,us.asQuarters=jo,us.asYears=Vo,us.valueOf=Ro,us._bubble=ko,us.clone=Yo,us.get=Go,us.milliseconds=$o,us.seconds=qo,us.minutes=Wo,us.hours=Ko,us.days=Zo,us.weeks=es,us.months=Xo,us.years=Jo,us.humanize=as,us.toISOString=ds,us.toString=ds,us.toJSON=ds,us.locale=ar,us.localeData=cr,us.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ds),us.lang=lr,H("X",0,0,"unix"),H("x",0,0,"valueOf"),Pe("x",Le),Pe("X",Re),ze("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),ze("x",function(e,t,n){n._d=new Date(ue(e))}),r.version="2.29.4",o(Kn),r.fn=co,r.min=ei,r.max=ti,r.now=ni,r.utc=f,r.unix=uo,r.months=yo,r.isDate=h,r.locale=gn,r.invalid=b,r.duration=ki,r.isMoment=C,r.weekdays=Ao,r.parseZone=ho,r.localeData=bn,r.isDuration=li,r.monthsShort=bo,r.weekdaysMin=wo,r.defineLocale=vn,r.updateLocale=yn,r.locales=An,r.weekdaysShort=_o,r.normalizeUnits=re,r.relativeTimeRounding=os,r.relativeTimeThreshold=ss,r.calendarFormat=ji,r.prototype=co,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},3715:(e,t,n)=>{"use strict";n.d(t,{Ni:()=>l,UN:()=>a,al:()=>i,pz:()=>o,yS:()=>r});const i=null!=navigator.xr&&null!=self.XRSession&&null!=navigator.xr.isSessionSupported&&self.XRSession.prototype.requestHitTestSource,r=(()=>{const e=navigator.userAgent||navigator.vendor||self.opera;let t=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t})(),o=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,s=Boolean(window.webkit&&window.webkit.messageHandlers),a=(()=>{if(o){if(s)return Boolean(/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent));{const e=document.createElement("a");return Boolean(e.relList&&e.relList.supports&&e.relList.supports("ar"))}}return!1})(),l=(/\bCrOS\b/.test(navigator.userAgent),/android/i.test(navigator.userAgent))},3745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var i,r,o,s=n(9585);function a(e){return e===i.Space||e===i.NewLine||e===i.Tab||e===i.FormFeed||e===i.CarriageReturn}function l(e){return e===i.Slash||e===i.Gt||a(e)}function c(e){return e>=i.Zero&&e<=i.Nine}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(i||(i={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(r||(r={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(o=t.QuoteType||(t.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},u=function(){function e(e,t){var n=e.xmlMode,i=void 0!==n&&n,o=e.decodeEntities,a=void 0===o||o;this.cbs=t,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=i,this.decodeEntities=a,this.entityTrie=i?s.xmlDecodeTree:s.htmlDecodeTree}return e.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===i.Lt||!this.decodeEntities&&this.fastForwardTo(i.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===i.Amp&&(this.state=r.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?l(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===i.Gt||a(e)){var t=this.index-this.currentSequence.length;if(this.sectionStart<t){var n=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=n}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===d.TitleEnd?this.decodeEntities&&e===i.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(i.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===i.Lt)},e.prototype.stateCDATASequence=function(e){e===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!l(e):function(e){return e>=i.LowerA&&e<=i.LowerZ||e>=i.UpperA&&e<=i.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=r.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===i.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===i.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==d.TitleEnd[2]?this.state=this.xmlMode||t!==d.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(d.TitleEnd,3)}else e===i.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){l(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){a(e)||(e===i.Gt?this.state=r.Text:(this.state=this.isTagStartChar(e)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===i.Gt||a(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===i.Gt||this.fastForwardTo(i.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===i.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===i.Slash?this.state=r.InSelfClosingTag:a(e)||(this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===i.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(e)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===i.Eq||l(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===i.Eq?this.state=r.BeforeAttributeValue:e===i.Slash||e===i.Gt?(this.cbs.onattribend(o.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):a(e)||(this.cbs.onattribend(o.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===i.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):e===i.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):a(e)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===i.DoubleQuote?o.Double:o.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&e===i.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,i.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,i.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){a(e)||e===i.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(o.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===i.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===i.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=e===i.Dash?r.BeforeComment:r.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===i.Gt||this.fastForwardTo(i.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===i.Gt||this.fastForwardTo(i.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===i.Dash?(this.state=r.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===i.Gt||this.fastForwardTo(i.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):t===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===i.Number?this.state=r.BeforeNumericEntity:e===i.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,s.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&s.BinTrieFlags.VALUE_LENGTH;if(t){var n=(t>>14)-1;if(this.allowLegacyEntity()||e===i.Semi){var r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&s.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~s.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===i.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===r.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,s.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===i.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=10*this.entityResult+(e-i.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===i.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=16*this.entityResult+(e-i.Zero),this.entityExcess++):!function(e){return e>=i.UpperA&&e<=i.UpperF||e>=i.LowerA&&e<=i.LowerF}(e)?(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--):(this.entityResult=16*this.entityResult+((32|e)-i.LowerA+10),this.entityExcess++)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==r.InAttributeValueDq&&this.state!==r.InAttributeValueSq&&this.state!==r.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(e);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case r.InSpecialTag:this.stateInSpecialTag(e);break;case r.CDATASequence:this.stateCDATASequence(e);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case r.InAttributeName:this.stateInAttributeName(e);break;case r.InCommentLike:this.stateInCommentLike(e);break;case r.InSpecialComment:this.stateInSpecialComment(e);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case r.InTagName:this.stateInTagName(e);break;case r.InClosingTagName:this.stateInClosingTagName(e);break;case r.BeforeTagName:this.stateBeforeTagName(e);break;case r.AfterAttributeName:this.stateAfterAttributeName(e);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case r.InDeclaration:this.stateInDeclaration(e);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case r.BeforeComment:this.stateBeforeComment(e);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case r.InNamedEntity:this.stateInNamedEntity(e);break;case r.BeforeEntity:this.stateBeforeEntity(e);break;case r.InHexEntity:this.stateInHexEntity(e);break;case r.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()||this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();t.default=u},3751:(e,t,n)=>{"use strict";var i=n(6763),r=(n(8738),n(4019)),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=class extends r.A{constructor(){super(...arguments),this.type="number",this.min=void 0,this.max=void 0}firstConnected(){super.firstConnected(),this.classList.add("sv-property-slider")}update(e){if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=e.getValidatedValue(),r=isFinite(this.min)?this.min:e.schema.min,o=isFinite(this.max)?this.max:e.schema.max,s=(n-r)/(o-r);return i.qy`<label id="${t}-label" class="ff-label ff-off">${t}</label>
            <ff-linear-slider class="${"true"===this.ariaDisabled?"ff-off":"ff-on"}" aria-labelledby="${t}-label" aria-valuemin=${r.toString()} aria-valuemax=${o.toString()} aria-valuenow=${n.toFixed(3)} role="slider" .value=${s} @keydown=${this.onKeyDown} @change=${this.onSliderChange}></ff-linear-slider>`}onSliderChange(e){const t=this.property,n=isFinite(this.min)?this.min:t.schema.min,i=isFinite(this.max)?this.max:t.schema.max,r=n+e.detail.value*(i-n);t.setValue(r)}onKeyDown(e){const t=this.property;"ArrowRight"===e.code||"ArrowUp"===e.code||"PageUp"===e.code?t.setValue(this.clamp("PageUp"===e.code?t.value+.1:t.value+.01)):"ArrowLeft"!==e.code&&"ArrowDown"!==e.code&&"PageDown"!==e.code||t.setValue(this.clamp("PageDown"===e.code?t.value-.1:t.value-.01))}clamp(e){const t=this.property,n=isFinite(this.min)?this.min:t.schema.min,i=isFinite(this.max)?this.max:t.schema.max;return Math.min(Math.max(e,n),i)}};o([(0,i.MZ)({type:Number})],s.prototype,"min",void 0),o([(0,i.MZ)({type:Number})],s.prototype,"max",void 0),s=o([(0,i.EM)("sv-property-slider")],s)},3767:function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},3769:(e,t,n)=>{"use strict";var i=n(4743);const r=(0,i.u$)(e=>t=>{let n;if(t instanceof i.GP||t instanceof i.Qh)throw new Error("The `live` directive is not allowed on text or event bindings");if(t instanceof i.Yp)o(t.strings),n=t.element.hasAttribute(t.name),t.value=n;else{const{element:r,name:s,strings:a}=t.committer;if(o(a),t instanceof i.Vm){if(n=r[s],n===e)return}else t instanceof i.ab&&(n=r.getAttribute(s));if(n===String(e))return}t.setValue(e)}),o=e=>{if(2!==e.length||""!==e[0]||""!==e[1])throw new Error("`live` bindings can only contain a single expression")};var s=n(6763),a=(n(9498),n(4019)),l=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let c=class extends a.A{constructor(){super(...arguments),this.type="number",this.options=null,this.indexMap=null,this.dropdown=!1}firstConnected(){super.firstConnected(),this.classList.add("sv-property-options")}update(e){if(e.has("property")){if(!this.property)throw new Error("missing property attribute");if(!this.property.schema.options)throw new Error("not an options property");const t=e.get("property");t&&(t.off("value",this.onUpdate,this),t.off("change",this.onUpdate,this)),this.property&&(this.property.on("value",this.onUpdate,this),this.property.on("change",this.onUpdate,this))}super.update(e)}render(){return this.dropdown?this.renderDropdown():this.renderButtons()}renderDropdown(){const e=this.property,t=this.indexMap,n=this.name||e.name,i=this.options||e.schema.options,o=e.value,a=this.language;let l;return l=t?t.map(e=>s.qy`<option value=${e} ?selected=${this.isSelected(e)}>${a?a.getLocalizedString(i[e]):i[e]}</option>`):i.map((e,t)=>e?s.qy`<option value=${t} ?selected=${this.isSelected(t)}>${a?a.getLocalizedString(e):e}</option>`:null),s.qy`
            <label class="ff-label ff-off">${n}</label>
            <select ?disabled=${"true"===this.ariaDisabled} ?multiple=${e.isMulti()} .value=${r(o)} class="sv-property-field" @change=${e=>{this.property.setValue(parseInt(e.target.value))}}>
                ${l}
            </select>
        `}renderButtons(){const e=this.property,t=this.indexMap,n=this.name||e.name,i=this.options||e.schema.options,r=(e.value,this.language);let o;return o=t?t.map(e=>s.qy`<ff-button role="radio" aria-checked=${this.isSelected(e)?"true":"false"} ?selected=${this.isSelected(e)} index=${e} .text=${r?r.getLocalizedString(i[e]):i[e]} @click=${this.onButtonClick}>
                    </ff-button>`):i.map((e,t)=>e?s.qy`<ff-button role="radio" aria-checked=${this.isSelected(t)?"true":"false"} ?selected=${this.isSelected(t)} index=${t} .text=${r?r.getLocalizedString(e):e}  @click=${this.onButtonClick}>
                    </ff-button>`:null),s.qy`
            <label class="ff-label ff-off">${n}</label>
            <div class="sv-options-buttons" role="radiogroup" @keydown=${e=>this.onKeyDown(e)} title=${n} class="sv-options">
                ${o}
            </div>`}isSelected(e){return this.property.isMulti()?this.property.value.includes(e):this.property.value==e}onButtonClick(e){const t=e.target.index;if(this.property.isMulti()){let e=this.property.value.slice();-1!==e.indexOf(t)?e=e.filter(e=>e!==t):e.push(t),this.property.setValue(e)}else this.property.setValue(t)}onKeyDown(e){if("ArrowUp"===e.code||"ArrowLeft"===e.code){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).findIndex(t=>e.target===t);n>0&&(t[n].setAttribute("tabIndex","-1"),t[n-1].setAttribute("tabIndex","0"),t[n-1].focus())}else if("ArrowDown"===e.code||"ArrowRight"===e.code){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).findIndex(t=>e.target===t);n<t.length-1&&(t[n].setAttribute("tabIndex","-1"),t[n+1].setAttribute("tabIndex","0"),t[n+1].focus())}else"Tab"===e.code&&this.addEventListener("blur",this.tabReset,{once:!0,capture:!0})}focus(){const e=this.getElementsByTagName("ff-button");e[Math.max(Array.from(e).findIndex(e=>0===e.tabIndex),0)].focus()}tabReset(e){const t=this.getElementsByTagName("ff-button"),n=Array.from(t),i=n.findIndex(e=>0===e.tabIndex),r=n.findIndex(e=>"true"===e.getAttribute("aria-checked"));if(i!=r){t[i].setAttribute("tabIndex","-1");t[r>-1?r:0].setAttribute("tabIndex","0")}}};l([(0,s.MZ)({attribute:!1})],c.prototype,"options",void 0),l([(0,s.MZ)({attribute:!1})],c.prototype,"indexMap",void 0),l([(0,s.MZ)({type:Boolean,reflect:!0})],c.prototype,"dropdown",void 0),c=l([(0,s.EM)("sv-property-options")],c)},3770:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},3818:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,EM:()=>i.EM,MZ:()=>i.MZ,qy:()=>i.qy});var i=n(6763),r=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let o=class extends i.Ay{constructor(){super(),this.anchor=null,this.portal=null,this.position=void 0,this.align=void 0,this.justify=void 0,this.positionX=0,this.positionY=0,this.offsetX=0,this.offsetY=0,this.keepVisible=!1,this.modal=!1,this._modalPlane=null,this.onResize=this.onResize.bind(this),this.onCaptureEvent=this.onCaptureEvent.bind(this),this.onEatEvent=this.onEatEvent.bind(this)}close(){this.dispatchEvent(new CustomEvent("close"))}connected(){if(this.calculatePosition(),window.addEventListener("resize",this.onResize),this.modal){const e=this._modalPlane=this.createElement("div");e.classList.add("ff-modal-plane"),e.addEventListener("mousedown",this.onEatEvent),e.addEventListener("contextmenu",this.onEatEvent),e.addEventListener("pointerdown",this.onEatEvent),this.parentElement.appendChild(e),setTimeout(()=>e.classList.add("ff-transition"))}else document.addEventListener("mousedown",this.onCaptureEvent,{capture:!0,passive:!0})}disconnected(){window.removeEventListener("resize",this.onResize),this._modalPlane?(this._modalPlane.remove(),this._modalPlane=null):document.removeEventListener("mousedown",this.onCaptureEvent)}firstConnected(){super.firstConnected(),this.setStyle({position:"center"==this.position?"absolute":"fixed",zIndex:"1000"}),this.classList.add("ff-popup")}updated(){this.isConnected&&this.calculatePosition()}calculatePosition(){let e,t;const n=this.getBoundingClientRect();let i;if(t=this.portal?this.portal.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight},"center"===this.position)i=this.center(n,t);else if("anchor"===this.position){const r=this.anchor||this.parentElement;r&&(e=r.getBoundingClientRect(),i=this.positionToAnchor(n,e,t))}else i={x:this.positionX,y:this.positionY};this.keepVisible&&"center"!==this.position&&(i=this.keepElementVisible(i,n,t)),this.style.left=Math.round(i.x)+"px",this.style.top=Math.round(i.y)+"px"}center(e,t){return{x:Math.round(.5*(t.width-e.width)),y:Math.round(.5*(t.height-e.height))}}positionToAnchor(e,t,n){const i=this.align,r=this.justify,o=this.offsetX,s=this.offsetY,a={x:0,y:0};switch(i){case"start":a.x="start"!==r&&"end"!==r?t.left-e.width-o:t.left;break;case"end":a.x="start"!==r&&"end"!==r?t.right+o:t.right-e.width;break;case"fixed":a.x=this.positionX;break;default:a.x=t.left+.5*(t.width-e.width)}switch(r){case"start":a.y=t.top-e.height-s;break;case"end":a.y=t.bottom+s;break;case"fixed":a.y=this.positionY;break;default:a.y=t.top+.5*(t.height-e.height)}return a.x+=this.offsetX,a.y+=this.offsetY,a}keepElementVisible(e,t,n){const i=this.offsetX,r=this.offsetY;return t.width>n.width?e.x=.5*(n.width-t.width):e.x<n.left+i?e.x=n.left+i:e.x+t.width+i>n.right&&(e.x=n.right-t.width-i),t.height>n.height?e.y=.5*(n.height-t.height):e.y<n.top+r?e.y=n.top+r:e.y+t.height+r>n.bottom&&(e.y=n.bottom-t.height-r),e}onResize(){this.calculatePosition()}onCaptureEvent(e){e.target instanceof Node&&this.contains(e.target)||this.close()}onEatEvent(e){console.log("Popup.onEatEvent"),e.stopPropagation(),e.preventDefault()}};r([(0,i.MZ)({attribute:!1})],o.prototype,"anchor",void 0),r([(0,i.MZ)({attribute:!1})],o.prototype,"portal",void 0),r([(0,i.MZ)({type:String})],o.prototype,"position",void 0),r([(0,i.MZ)({type:String})],o.prototype,"align",void 0),r([(0,i.MZ)({type:String})],o.prototype,"justify",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"positionX",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"positionY",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"offsetX",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"offsetY",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"keepVisible",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"modal",void 0),o=r([(0,i.EM)("ff-popup")],o);const s=o},3869:(e,t,n)=>{"use strict";n.d(t,{GP:()=>y,Qh:()=>p,Vm:()=>g,Yp:()=>m,ab:()=>h,g$:()=>f,pU:()=>u,sO:()=>c});var i=n(6342),r=n(6187),o=n(1142),s=n(1757),a=n(2387),l=n(4709);const c=e=>null===e||!("object"==typeof e||"function"==typeof e),d=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class u{constructor(e,t,n){this.dirty=!0,this.element=e,this.name=t,this.strings=n,this.parts=[];for(let e=0;e<n.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new h(this)}_getValue(){const e=this.strings,t=e.length-1,n=this.parts;if(1===t&&""===e[0]&&""===e[1]){const e=n[0].value;if("symbol"==typeof e)return String(e);if("string"==typeof e||!d(e))return e}let i="";for(let r=0;r<t;r++){i+=e[r];const t=n[r];if(void 0!==t){const e=t.value;if(c(e)||!d(e))i+="string"==typeof e?e:String(e);else for(const t of e)i+="string"==typeof t?t:String(t)}}return i+=e[t],i}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class h{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===o.c||c(e)&&e===this.value||(this.value=e,(0,i.q)(e)||(this.committer.dirty=!0))}commit(){for(;(0,i.q)(this.value);){const e=this.value;this.value=o.c,e(this)}this.value!==o.c&&this.committer.commit()}}class p{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild((0,l.h5)()),this.endNode=e.appendChild((0,l.h5)())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=(0,l.h5)()),e.__insert(this.endNode=(0,l.h5)())}insertAfterPart(e){e.__insert(this.startNode=(0,l.h5)()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;(0,i.q)(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=o.c,e(this)}const e=this.__pendingValue;e!==o.c&&(c(e)?e!==this.value&&this.__commitText(e):e instanceof a.Q?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):d(e)?this.__commitIterable(e):e===o.s?(this.value=o.s,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof s.i&&this.value.template===t)this.value.update(e.values);else{const n=new s.i(t,e.processor,this.options),i=n._clone();n.update(e.values),this.__commitNode(i),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let n,i=0;for(const r of e)n=t[i],void 0===n&&(n=new p(this.options),t.push(n),0===i?n.appendIntoPart(this):n.insertAfterPart(t[i-1])),n.setValue(r),n.commit(),i++;i<t.length&&(t.length=i,this.clear(n&&n.endNode))}clear(e=this.startNode){(0,r.if)(this.startNode.parentNode,e.nextSibling,this.endNode)}}class m{constructor(e,t,n){if(this.value=void 0,this.__pendingValue=void 0,2!==n.length||""!==n[0]||""!==n[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=n}setValue(e){this.__pendingValue=e}commit(){for(;(0,i.q)(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=o.c,e(this)}if(this.__pendingValue===o.c)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=o.c}}class f extends u{constructor(e,t,n){super(e,t,n),this.single=2===n.length&&""===n[0]&&""===n[1]}_createPart(){return new g(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class g extends h{}let v=!1;(()=>{try{const e={get capture(){return v=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();class y{constructor(e,t,n){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=t,this.eventContext=n,this.__boundHandleEvent=e=>this.handleEvent(e)}setValue(e){this.__pendingValue=e}commit(){for(;(0,i.q)(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=o.c,e(this)}if(this.__pendingValue===o.c)return;const e=this.__pendingValue,t=this.value,n=null==e||null!=t&&(e.capture!==t.capture||e.once!==t.once||e.passive!==t.passive),r=null!=e&&(null==t||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=b(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=o.c}handleEvent(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}const b=e=>e&&(v?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)},3889:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i,r=n(3423),o=n(9309);!function(e){e[e.Basic=0]="Basic",e[e.PCF=1]="PCF",e[e.PCFSoft=2]="PCFSoft"}(i||(i={}));const s={[i.Basic]:0,[i.PCF]:1,[i.PCFSoft]:2};class a extends r.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(a.ins),this.outs=this.addOutputs(a.outs),this.views=[],this._activeSceneComponent=null,this._forceRender=!1,this.addEvents("active-scene","active-camera")}get activeSceneComponent(){return this._activeSceneComponent}set activeSceneComponent(e){if(e!==this._activeSceneComponent){const t=this._activeSceneComponent,n=this.activeCameraComponent;t&&t.off("active-camera",this.onActiveCamera,this),e&&e.on("active-camera",this.onActiveCamera,this),this._activeSceneComponent=e;const i=this.activeCameraComponent,r={type:"active-scene",previous:t,next:e};this.emit(r);const o={type:"active-camera",previous:n,next:i};this.emit(o)}}get activeSceneGraph(){return this._activeSceneComponent?this._activeSceneComponent.graph:null}get activeScene(){return this._activeSceneComponent?this._activeSceneComponent.scene:null}get activeCameraComponent(){return this._activeSceneComponent?this._activeSceneComponent.activeCameraComponent:null}get activeCamera(){const e=this._activeSceneComponent?this._activeSceneComponent.activeCameraComponent:null;return e?e.camera:null}forceRender(){this._forceRender=!0}create(){super.create(),this.trackComponent(o.A,e=>{e.on("pulse",this.onPulse,this)},e=>{e.off("pulse",this.onPulse,this)})}update(){const e=this.ins;return e.exposure.changed&&this.views.forEach(t=>t.renderer.toneMappingExposure=e.exposure.value),e.gamma.changed,e.shadowsEnabled.changed&&this.views.forEach(t=>t.renderer.shadowMap.enabled=e.shadowsEnabled.value),e.shadowMapType.changed&&this.views.forEach(t=>t.renderer.shadowMap.type=s[e.shadowMapType.getValidatedValue()]),!0}attachView(e){if(0===this.views.length){const t=e.renderer,n=this.outs;n.maxTextureSize.setValue(t.capabilities.maxTextureSize),n.maxCubemapSize.setValue(t.capabilities.maxCubemapSize)}this.views.push(e)}detachView(e){const t=this.views.indexOf(e);if(t<0)throw new Error("render view not registered");this.views.splice(t,1)}logInfo(){this.views.forEach(e=>{console.log(e.renderer.info)})}onPulse(e){(e.systemUpdated||this._forceRender)&&(this.views.forEach(e=>{if(!e.renderer.xr.isPresenting){const t=(performance||Date).now();e.render(),this.outs.framerate.value=.9*this.outs.framerate.value+100/((performance||Date).now()-t)}}),this._forceRender=!1)}onActiveCamera(e){this.emit(e)}}a.typeName="CRenderer",a.isSystemSingleton=!0,a.ins={exposure:r.gK.Number("Shading.Exposure",1),gamma:r.gK.Number("Shading.Gamma",2),shadowsEnabled:r.gK.Boolean("Shadows.Enabled",!0),shadowMapType:r.gK.Enum("Shadows.MapType",i,i.PCF)},a.outs={maxTextureSize:r.gK.Integer("Caps.MaxTextureSize"),maxCubemapSize:r.gK.Integer("Caps.MaxCubemapSize"),framerate:r.gK.Integer("Renderer.Framerate")}},3911:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(8446),r=n(3675);class o extends i.A{constructor(){super(...arguments),this._language=r.aL[r.Nm]}static fromJSON(e){return new o(e)}toString(){return this.title}get title(){return 0===Object.keys(this.data.titles).length&&(this.data.titles[r.aL[this.language]]=this.data.title),this.data.titles[r.aL[this.language]]||"Missing content"}set title(e){this.data.titles[r.aL[this.language]]=e,this.update()}get defaultTitle(){return 0===Object.keys(this.data.titles).length&&(this.data.titles[r.aL[this.language]]=this.data.title),this.data.titles[r.aL[this.language]]||"Missing content"}titleIn(e){return 0===Object.keys(this.data.titles).length&&(this.data.titles[r.aL[this.language]]=this.data.title),this.data.titles[e]}get uri(){return 0===Object.keys(this.data.uris).length&&(this.data.uris[r.aL[this.language]]=this.data.uri),this.data.uris[r.aL[this.language]]}set uri(e){this.data.uris[r.aL[this.language]]=e,this.update()}get lead(){return 0===Object.keys(this.data.leads).length&&(this.data.leads[r.aL[this.language]]=this.data.lead),this.data.leads[r.aL[this.language]]||""}set lead(e){this.data.leads[r.aL[this.language]]=e,this.update()}get tags(){return 0===Object.keys(this.data.taglist).length&&this.data.tags.length>0&&(this.data.taglist[r.aL[this.language]]=this.data.tags),this.data.taglist[r.aL[this.language]]||[]}set tags(e){this.data.taglist[r.aL[this.language]]=e,this.update()}get language(){return this._language}set language(e){this._language=e}init(){return{id:i.A.generateId(),title:"New Article",titles:{},lead:"",leads:{},tags:[],taglist:{},uri:"",uris:{},mimeType:"",thumbnailUri:""}}deflate(e,t){t.id=e.id,Object.keys(this.data.uris).length>0?(t.uris={},Object.keys(this.data.uris).forEach(n=>{t.uris[n]=e.uris[n]})):e.uri&&(t.uri=e.uri),Object.keys(this.data.titles).length>0?(t.titles={},Object.keys(this.data.titles).forEach(n=>{t.titles[n]=e.titles[n]})):e.title&&(t.title=e.title),Object.keys(this.data.leads).length>0?(t.leads={},Object.keys(this.data.leads).forEach(n=>{t.leads[n]=e.leads[n]})):e.lead&&(t.lead=e.lead),Object.keys(this.data.taglist).length>0?(t.taglist={},Object.keys(this.data.taglist).forEach(n=>{t.taglist[n]=e.taglist[n].slice()})):e.tags.length>0&&(t.tags=e.tags.slice()),e.mimeType&&(t.mimeType=e.mimeType),e.thumbnailUri&&(t.thumbnailUri=e.thumbnailUri)}inflate(e,t){t.id=e.id,t.uri=e.uri||"",t.uris=e.uris||{},t.title=e.title||"",t.titles=e.titles||{},t.lead=e.lead||"",t.leads=e.leads||{},t.tags=e.tags||[],t.taglist=e.taglist||{},t.mimeType=e.mimeType||"",t.thumbnailUri=e.thumbnailUri||""}}},3928:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},3951:()=>{},3963:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},3964:function(e,t,n){!function(e){"use strict";var t={format:"leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),standalone:"ledna_února_března_dubna_května_června_července_srpna_září_října_listopadu_prosince".split("_")},n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),i=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],r=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function o(e){return e>1&&e<5&&1!=~~(e/10)}function s(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"pár sekund":"pár sekundami";case"ss":return t||i?r+(o(e)?"sekundy":"sekund"):r+"sekundami";case"m":return t?"minuta":i?"minutu":"minutou";case"mm":return t||i?r+(o(e)?"minuty":"minut"):r+"minutami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?r+(o(e)?"hodiny":"hodin"):r+"hodinami";case"d":return t||i?"den":"dnem";case"dd":return t||i?r+(o(e)?"dny":"dní"):r+"dny";case"M":return t||i?"měsíc":"měsícem";case"MM":return t||i?r+(o(e)?"měsíce":"měsíců"):r+"měsíci";case"y":return t||i?"rok":"rokem";case"yy":return t||i?r+(o(e)?"roky":"let"):r+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s,ss:s,m:s,mm:s,h:s,hh:s,d:s,dd:s,M:s,MM:s,y:s,yy:s},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},3980:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(3681))},4e3:(e,t,n)=>{"use strict";var i;e.exports=C,C.ReadableState=x;n(9995).EventEmitter;var r=function(e,t){return e.listeners(t).length},o=n(2365),s=n(5451).Buffer,a=n.g.Uint8Array||function(){};var l,c=n(3951);l=c&&c.debuglog?c.debuglog("stream"):function(){};var d,u,h,p=n(2290),m=n(9932),f=n(7111).getHighWaterMark,g=n(6116).F,v=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,A=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6854)(C,o);var _=m.errorOrDestroy,w=["error","close","destroy","pause","resume"];function x(e,t,r){i=i||n(882),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(961).I),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(882),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function E(e,t,n,i,r){l("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,L(e)))}(e,c);else if(r||(o=function(e,t){var n;i=t,s.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t));var i;return n}(c,t)),o)_(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),i)c.endEmitted?_(e,new A):M(e,c,t,!0);else if(c.ended)_(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?M(e,c,t,!1):D(e,c)):M(e,c,t,!1)}else i||(c.reading=!1,D(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function M(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),D(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=m.destroy,C.prototype._undestroy=m.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=s.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},C.prototype.unshift=function(e){return E(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){d||(d=n(961).I);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var S=1073741824;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(L,e))}function L(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function D(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){l("readable nexttick read 0"),e.read(0)}function P(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function z(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):k(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&U(this),null;var i,r=t.needReadable;return l("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",r=!0),t.ended||t.reading?l("reading or ended",r=!1):r&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(i=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==i&&this.emit("data",i),i},C.prototype._read=function(e){_(this,new b("_read()"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,l("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:f;function s(t,r){l("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",h),e.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",f),n.removeListener("data",u),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function a(){l("onend"),e.end()}i.endEmitted?process.nextTick(o):n.once("end",o),e.on("unpipe",s);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",c);var d=!1;function u(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==z(i.pipes,e))&&!d&&(l("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function h(t){l("onerror",t),f(),e.removeListener("error",h),0===r(e,"error")&&_(e,t)}function p(){e.removeListener("finish",m),f()}function m(){l("onfinish"),e.removeListener("close",p),f()}function f(){l("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(l("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=z(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},C.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,l("on readable",i.length,i.reading),i.length?k(this):i.reading||process.nextTick(O,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(R,this),n},C.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(R,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(P,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(r){(l("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))}),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<w.length;o++)e.on(w[o],this.emit.bind(this,w[o]));return this._read=function(t){l("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=n(4087)),u(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=N,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,t){return void 0===h&&(h=n(9657)),h(C,e,t)})},4019:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(6763),r=(n(9498),function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s});class o extends i.Ay{constructor(){super(...arguments),this.property=null,this.name="",this.text=null,this.language=null}firstConnected(){this.classList.add("sv-property")}update(e){if(e.has("property")){if(!this.property)throw new Error("missing property attribute");if(this.type&&this.property.type!==this.type)throw new Error(`not a ${this.type} property`);const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}}r([(0,i.MZ)({attribute:!1})],o.prototype,"property",void 0),r([(0,i.MZ)({type:String})],o.prototype,"name",void 0),r([(0,i.MZ)({attribute:!1})],o.prototype,"text",void 0),r([(0,i.MZ)({attribute:!1})],o.prototype,"language",void 0),r([(0,i.MZ)({attribute:"aria-disabled"})],o.prototype,"ariaDisabled",void 0)},4022:function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પહેલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(3681))},4035:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>i.str`must be multiple of ${e}`,params:({schemaCode:e})=>i._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:r,it:o}=e,s=o.opts.multipleOfPrecision,a=t.let("res"),l=s?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:i._`${a} !== parseInt(${a})`;e.fail$data(i._`(${r} === 0 || (${a} = ${n}/${r}, ${l}))`)}};t.default=r},4037:function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t||"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(3681))},4038:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var i=n(2310);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return i.KeywordCxt}});var r=n(5265);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const o=n(2874),s=n(4507),a=n(1168),l=n(6719),c=n(5265),d=n(5391),u=n(444),h=n(3151),p=n(3770),m=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,n,i,r,o,s,a,l,c,d,u,h,p,m,f,g,v,y,b,A,_,w;const x=e.strict,C=null===(t=e.code)||void 0===t?void 0:t.optimize,E=!0===C||void 0===C?1:C||0;return{strictSchema:null===(i=null!==(n=e.strictSchema)&&void 0!==n?n:x)||void 0===i||i,strictNumbers:null===(o=null!==(r=e.strictNumbers)&&void 0!==r?r:x)||void 0===o||o,strictTypes:null!==(a=null!==(s=e.strictTypes)&&void 0!==s?s:x)&&void 0!==a?a:"log",strictTuples:null!==(c=null!==(l=e.strictTuples)&&void 0!==l?l:x)&&void 0!==c?c:"log",strictRequired:null!==(u=null!==(d=e.strictRequired)&&void 0!==d?d:x)&&void 0!==u&&u,code:e.code?{...e.code,optimize:E}:{optimize:E},loopRequired:null!==(h=e.loopRequired)&&void 0!==h?h:200,loopEnum:null!==(p=e.loopEnum)&&void 0!==p?p:200,meta:null===(m=e.meta)||void 0===m||m,messages:null===(f=e.messages)||void 0===f||f,inlineRefs:null===(g=e.inlineRefs)||void 0===g||g,schemaId:null!==(v=e.schemaId)&&void 0!==v?v:"$id",addUsedSchema:null===(y=e.addUsedSchema)||void 0===y||y,validateSchema:null===(b=e.validateSchema)||void 0===b||b,validateFormats:null===(A=e.validateFormats)||void 0===A||A,unicodeRegExp:null===(_=e.unicodeRegExp)||void 0===_||_,int32range:null===(w=e.int32range)||void 0===w||w}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:f,es5:t,lines:n}),this.logger=function(e){if(!1===e)return M;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const i=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),A.call(this,g,e,"NOT SUPPORTED"),A.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=E.call(this),e.formats&&x.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&C.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let i=p;"id"===n&&(i={...p},i.id=i.$id,delete i.$id),t&&e&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await r.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function r(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await r.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,i);return this}let r;if("object"==typeof e){const{schemaId:t}=this.opts;if(r=e[t],void 0!==r&&"string"!=typeof r)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,i,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=_.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,i=new l.SchemaEnv({schema:{},schemaId:n});if(t=l.resolveSchema.call(this,i,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=_.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,d.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,n,t),!t)return(0,h.eachItem)(n,e=>k.call(this,e)),this;D.call(this,t);const i={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(n,0===i.type.length?e=>k.call(this,e,i):e=>i.type.forEach(t=>k.call(this,e,i,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex(t=>t.keyword===e);t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map(e=>`${n}${e.instancePath} ${e.message}`).reduce((e,n)=>e+t+n):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let r=e;for(const e of t)r=r[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,o=r[e];i&&o&&(r[e]=R(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n,i=this.opts.validateSchema,r=this.opts.addUsedSchema){let o;const{schemaId:s}=this.opts;if("object"==typeof e)o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;n=(0,d.normalizeId)(o||n);const c=d.getSchemaRefs.call(this,e,n);return a=new l.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:n,localRefs:c}),this._cache.set(a.schema,a),r&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=a),i&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function A(e,t,n,i="error"){for(const r in e){const o=r;o in t&&this.logger[i](`${n}: option ${r}. ${e[o]}`)}}function _(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function w(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function x(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function C(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function E(){const e={...this.opts};for(const t of m)delete e[t];return e}t.default=b,b.ValidationError=o.default,b.MissingRefError=s.default;const M={log(){},warn(){},error(){}};const S=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){const{RULES:n}=this;if((0,h.eachItem)(e,e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!S.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function k(e,t,n){var i;const r=null==t?void 0:t.post;if(n&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=r?o.post:o.rules.find(({type:e})=>e===n);if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?L.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(i=t.implements)||void 0===i||i.forEach(e=>this.addKeyword(e))}function L(e,t,n){const i=e.rules.findIndex(e=>e.keyword===n);i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function D(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=R(t)),e.validateSchema=this.compile(t,!0))}const I={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function R(e){return{anyOf:[e,I]}}},4048:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[e+" सॅकंडांनी",e+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[e+" मिणटांनी",e+" मिणटां"],h:["एका वरान","एक वर"],hh:[e+" वरांनी",e+" वरां"],d:["एका दिसान","एक दीस"],dd:[e+" दिसांनी",e+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[e+" म्हयन्यानी",e+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[e+" वर्सांनी",e+" वर्सां"]};return i?r[n][0]:r[n][1]}e.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(e,t){return"D"===t?e+"वेर":e},week:{dow:0,doy:3},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<4?e:e+12:"सकाळीं"===t?e:"दनपारां"===t?e>12?e:e+12:"सांजे"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"राती":e<12?"सकाळीं":e<16?"दनपारां":e<20?"सांजे":"राती"}})}(n(3681))},4051:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"минута":"минуту":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[i],+e)}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:n,m:n,mm:n,h:"час",hh:n,d:"день",dd:n,w:"неделя",ww:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(3681))},4085:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,k:()=>i.k});var i=n(4222),r=n(2464),o=n(1721),s=n(9616),a=n(5659);class l extends i.A{constructor(){super(...arguments),this.targetFeatures={}}create(){super.create();const e=this.getGraphComponent(o.A);Object.keys(e.featureMap).forEach(e=>{this.targetFeatures[e]=!1}),this.targetFeatures.models=!1,this.targetFeatures.lights=!1,this.initializeTargetFeatures()}initializeTargetFeatures(){const e=this.targetFeatures;Object.keys(e).forEach(t=>e[t]=!1),e.navigation=!0,e.reader=!0,e.viewer=!0,this.updateTargets()}updateTargets(){const e=this.targetFeatures,t=this.getGraphComponent(o.A);Object.keys(e).forEach(n=>{const i=t[n],r=e[n];i&&this.updateComponentTarget(i,r)});this.getGraphComponents(s.A).forEach(t=>{this.updateComponentTarget(t.transform,!!e.models),this.updateComponentTarget(t,!!e.models)});this.getGraphComponents(r.A).forEach(t=>{this.updateComponentTarget(t.transform,!!e.lights),this.updateComponentTarget(t,!!e.lights)})}updateComponentTarget(e,t){const n=e.snapshotProperties;n&&n.forEach(e=>{if(!e.schema.event&&"object"!==e.type){const n=this.hasTargetProperty(e);t&&!n?this.addTargetProperty(e):!t&&n&&this.removeTargetProperty(e)}})}fromData(e,t){this.clear();const n=this.targetFeatures,r=Object.keys(n);e.features?r.forEach(t=>n[t]=e.features.indexOf(t)>=0):this.initializeTargetFeatures();const o=new Set;e.targets.forEach((e,n)=>{const i=e.lastIndexOf("/"),r=e.substr(0,i),s=e.substr(i+1),a=t.get(r),l=a?a.ins[s]:null;l?this.addTargetProperty(l):(console.warn(`missing snapshot target property for '${e}'`),o.add(n))}),e.states.forEach(e=>{e.id!==a.A.sceneSnapshotId&&this.setState({id:e.id,curve:void 0!==e.curve?i.k[e.curve]:i.k.EaseQuad,duration:void 0!==e.duration?e.duration:2,threshold:void 0!==e.threshold?e.threshold:.5,values:e.values.filter((e,t)=>!o.has(t))})})}toData(e){const t=this.targetFeatures,n={features:Object.keys(t).filter(e=>t[e]),targets:this.targets.map(t=>{const n=t.property.group.linkable,i=t.property.key,r=e.get(n);if(!r)throw new Error(`snapshot path not registered for component '${n.displayName}'`);return r+"/"+i}),states:Object.keys(this.states).map(e=>{const t=this.states[e],n={id:t.id,values:t.values};return t.curve!==i.k.EaseQuad&&(n.curve=i.k[t.curve]),2!==t.duration&&(n.duration=t.duration),.5!==t.threshold&&(n.threshold=t.threshold),n})};return n.targets.length>0&&n.states.length>0?n:null}}l.typeName="CVSnapshots"},4087:(e,t,n)=>{"use strict";var i;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(7970),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[s]=null,e[a]=null,t(p(n,!1)))}}function f(e){process.nextTick(m,e)}var g=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((r(i={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise(function(t,n){process.nextTick(function(){e[l]?n(e[l]):t(p(void 0,!0))})});var n,i=this[d];if(i)n=new Promise(function(e,t){return function(n,i){e.then(function(){t[c]?n(p(void 0,!0)):t[u](n,i)},i)}}(i,this));else{var r=this[h].read();if(null!==r)return Promise.resolve(p(r,!1));n=new Promise(this[u])}return this[d]=n,n}},Symbol.asyncIterator,function(){return this}),r(i,"return",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){e?n(e):t(p(void 0,!0))})})}),i),g);e.exports=function(e){var t,n=Object.create(v,(r(t={},h,{value:e,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,l,{value:null,writable:!0}),r(t,c,{value:e._readableState.endEmitted,writable:!0}),r(t,u,{value:function(e,t){var i=n[h].read();i?(n[d]=null,n[s]=null,n[a]=null,e(p(i,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[d]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[d]=null,n[s]=null,n[a]=null,t(e)),void(n[l]=e)}var i=n[s];null!==i&&(n[d]=null,n[s]=null,n[a]=null,i(p(void 0,!0))),n[c]=!0}),e.on("readable",f.bind(null,n)),n}},4088:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(4640),r=n(3423),o=n(2464);class s extends o.A{constructor(e,t){super(e,t),this.ins=this.addInputs(s.hemiLightIns),this.object3D=new i.dth}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return(n.ground.changed||n.intensity.changed)&&(t.groundColor.fromArray(n.ground.value),t.intensity=n.intensity.value),!0}}s.typeName="CHemisphereLight",s.hemiLightIns={ground:r.gK.ColorRGB("Light.Ground",[.31,.31,.125])}},4106:(e,t,n)=>{"use strict";function i(e,t){return t=t||{},new Promise(function(n,i){var r=new XMLHttpRequest,o=[],s=[],a={},l=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:l,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){o.push(t=t.toLowerCase()),s.push([t,n]),a[t]=a[t]?a[t]+","+n:n}),n(l())},r.onerror=i,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(c,t.headers[c]);r.send(t.body||null)})}n.r(t),n.d(t,{default:()=>i})},4136:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},4142:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:4},invalidDate:"Fecha inválida"})}(n(3681))},4146:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,X:()=>i});var i,r=n(3423),o=n(1860),s=n(5240);!function(e){e[e.Node=0]="Node",e[e.Graph=1]="Graph",e[e.Main=2]="Main",e[e.System=3]="System"}(i||(i={}));class a extends r.Ay{constructor(){super(...arguments),this._scope=i.Node,this._scopedNode=null,this._scopedGraph=null,this._activeComponent=null}get componentType(){return this.constructor.componentType}get followComponentSelection(){return this.constructor.followComponentSelection}get followNodeSelection(){return this.constructor.followNodeSelection}get retainSelection(){return this.constructor.retainSelection}get scope(){return this._scope}set scope(e){this._scope=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null)}get scopedNode(){return this._scopedNode}set scopedNode(e){e!==this._scopedNode&&(this._scopedNode=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null),this.onScopedComponents(),this.emit({type:"scoped-components"}))}get scopedGraph(){return this._scopedGraph}set scopedGraph(e){e!==this._scopedGraph&&(this._scopedGraph=e,this._activeComponent&&!this.isComponentInScope(this._activeComponent)&&(this.activeComponent=null),this.onScopedComponents(),this.emit({type:"scoped-components"}))}get scopedComponents(){switch(this._scope){case i.Node:return(this._scopedNode||this.node).getComponents(this.componentType);case i.Graph:return(this._scopedGraph?this._scopedGraph.innerGraph:this.graph).getComponents(this.componentType);case i.Main:return this.getMainComponents(this.componentType);case i.System:return this.getSystemComponents(this.componentType)}}get activeComponent(){return this._activeComponent}set activeComponent(e){const t=this.activeComponent;if(e!==t){if(t&&this.deactivateComponent(t),e){if(!this.isComponentInScope(e))throw new Error("can't activate, component out of scope");this.activateComponent(e)}this._activeComponent=e,this.onActiveComponent(t,e),this.emit({type:"active-component",previous:t,next:e})}}get selection(){return this.getSystemComponent(s.A)}create(){super.create(),this.system.components.on(r.Ay,this.onComponent,this),this.followComponentSelection&&this.selection.selectedComponents.on(this.componentType,this.onSelectComponent,this),this.followNodeSelection&&this.selection.selectedNodes.on(o.A,this.onSelectNode,this)}dispose(){this.activeComponent&&(this.activeComponent=null),this.system.components.off(r.Ay,this.onComponent,this),this.followComponentSelection&&this.selection.selectedComponents.off(this.componentType,this.onSelectComponent,this),this.followNodeSelection&&this.selection.selectedNodes.off(o.A,this.onSelectNode,this),super.dispose()}activateComponent(e){}deactivateComponent(e){}onActiveComponent(e,t){}onScopedComponents(){}onComponent(e){e.remove&&e.object===this.activeComponent&&(this.activeComponent=null),this.isComponentInScope(e.object)&&(this.onScopedComponents(),this.emit({type:"scoped-components"}))}onSelectComponent(e){const t=e.object;this.isComponentInScope(t)&&(e.add?this.activeComponent=t:e.remove&&!this.retainSelection&&t===this.activeComponent&&(this.activeComponent=null))}onSelectNode(e){const t=e.object;if(this.isNodeInScope(t)){const n=t.getComponent(this.componentType);n&&this.onSelectComponent({type:n.typeName,object:n,add:e.add,remove:e.remove})}}isComponentInScope(e){if(!e.is(this.componentType))return!1;switch(this._scope){case i.Node:const t=this._scopedNode||this.node;return e.node===t;case i.Graph:const n=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===n;case i.Main:return e.graph===this.system.graph;case i.System:return!0}return!1}isNodeInScope(e){switch(this._scope){case i.Node:return e===(this._scopedNode||this.node);case i.Graph:const t=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===t;case i.Main:return e.graph===this.system.graph;case i.System:return!0}}}a.typeName="CComponentProvider",a.componentType=r.Ay,a.followComponentSelection=!0,a.followNodeSelection=!1,a.retainSelection=!0},4179:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},4200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(3151),r={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach((t,n)=>{if((0,i.alwaysValidSchema)(r,t))return;const s=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(s)})}};t.default=r},4210:function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(3681))},4214:function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},4222:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,k:()=>i.kp});var i=n(2690),r=n(3423),o=n(449);class s extends r.Ay{constructor(){super(...arguments),this.ins=this.addInputs(s.ins),this.outs=this.addOutputs(s.outs),this.targets=[],this.states={},this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null}getState(e){return this.states[e]}setState(e){return e.id=e.id||(0,o.A)(6),this.states[e.id]=e,e.id}deleteState(e){delete this.states[e]}clear(){this.targets.forEach(e=>e.property.off("dispose",this.onPropertyDispose,this)),this.targets.length=0,this.states={},this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null}dispose(){this.clear(),super.dispose()}tweenTo(e,t){const n=this.states[e],r=this.outs;if(n)return this._targetState=n,this._currentValues=this.getCurrentValues(),this._startTime=t,this._easingFunction=(0,i.My)(n.curve),r.switched.setValue(!1),r.tweening.setValue(!0),r.start.set(),!0}update(e){const t=this.ins,n=this.states,i=t.id.value,r=n[i];if(r){if((t.tween.changed||t.recall.changed)&&(t.curve.setValue(r.curve),t.duration.setValue(r.duration),t.threshold.setValue(r.threshold)),t.tween.changed)return this.tweenTo(i,e.secondsElapsed),!0;if(t.recall.changed)return this.setValues(r.values),!0;(t.curve.changed||t.duration.changed||t.threshold.changed)&&(r.curve=t.curve.value,r.duration=t.duration.value,r.threshold=t.threshold.value),t.store.changed&&(r.values=this.getCurrentValues()),t.delete.changed&&delete n[i]}else if(i&&t.store.changed){const e={id:this.ins.id.value,curve:this.ins.curve.getValidatedValue(),duration:this.ins.duration.value,threshold:this.ins.threshold.value,values:this.getCurrentValues()};n[e.id]=e}return!0}tick(e){const t=this._targetState;if(!t)return!1;const n=this.outs,i=this._currentValues,r=this._startTime,o=e.secondsElapsed-r,s=o/t.duration;if(s<1){const e=this._easingFunction(s),r=s>=t.threshold&&!n.switched.value;this.setValues(i,t.values,e,r),n.time.setValue(o),n.completed.setValue(s),r&&(n.switched.setValue(!0),n.switch.set())}else this.setValues(i,t.values,1,!n.switched.value),n.tweening.setValue(!1),n.time.setValue(t.duration),n.completed.setValue(1),n.end.set(),n.switched.value||n.switched.setValue(!0),this._currentValues=null,this._targetState=null,this._startTime=0,this._easingFunction=null;return!0}addTargetProperty(e){if("object"===e.type||e.schema.event)throw new Error("can't add object or event properties");if(this.getTarget(e))throw new Error("can't add, target already exists");e.on("dispose",this.onPropertyDispose,this);const t="number"===e.type&&!e.schema.options,n=e.isArray();this.targets.push({property:e,isNumber:t,isArray:n});const i=this.states,r=Object.keys(i);for(let t=0,n=r.length;t<n;++t)i[r[t]].values.push(e.cloneValue());this._currentValues&&this._currentValues.push(e.cloneValue())}removeTargetProperty(e){const t=this.getTarget(e);if(!t)throw new Error("can't remove, target doesn't exist");this.removeTarget(t)}hasTargetProperty(e){return!!this.getTarget(e)}fromJSON(e){super.fromJSON(e),e.state&&this.stateFromJSON(e.state)}stateFromJSON(e){e.targets&&(this.targets=e.targets.map(e=>{const t=this.getProperty(e.id,e.key);return{property:t,isNumber:!!t&&"number"===t.type&&!t.schema.options,isArray:!!t&&t.isArray()}})),e.states&&e.states.forEach(e=>this.states[e.id]=e),this._startTime=0}toJSON(){const e=super.toJSON(),t=this.stateToJSON();return t&&(e.state=t),e}stateToJSON(){const e={},t=this.targets;t.length>0&&(e.targets=t.map(e=>({id:e.property.group.linkable.id,key:e.property.key})));const n=Object.keys(this.states);return n.length>0&&(e.states=n.map(e=>this.states[e])),e}getTargetProperties(){return this.targets.map(e=>e.property)}onPropertyDispose(e){e.property.off("dispose",this.onPropertyDispose,this);const t=this.getTarget(e.property);this.removeTarget(t)}removeTarget(e){const t=this.targets.indexOf(e);this.targets.splice(t,1),this.removeChannel(t)}removeChannel(e){const t=this.states,n=Object.keys(t);for(let i=0,r=n.length;i<r;++i)t[n[i]].values.splice(e,1);this._currentValues&&this._currentValues.splice(e,1)}getTarget(e){return this.targets.find(t=>t.property===e)}getProperty(e,t){const n=this.system.components.getById(e);return n?n.ins[t]:null}setValues(e,t,n,i){const r=this.targets;for(let o=0,s=r.length;o<s;++o){const s=r[o],a=s.property;if(s.isNumber&&t&&null!==t[o]){const i=e[o],r=t[o];if(s.isArray){let e=!1;for(let t=0,o=i.length;t<o;++t){const o=i[t]+n*(r[t]-i[t]);e=a.value[t]!==o||e,a.value[t]=o}e&&a.set()}else{const e=i+n*(r-i);e!==a.value&&a.setValue(e)}}else if(!t||i){const n=t&&null!==t[o]?t[o]:e[o];if(s.isArray){let e=!1;for(let t=0,i=n.length;t<i;++t)e=a.value[t]!==n[t]||e,a.value[t]=n[t];e&&a.set()}else n!==a.value&&a.setValue(n)}}}getCurrentValues(){const e=[],t=this.targets;for(let n=0,i=t.length;n<i;++n)e.push(t[n].property.cloneValue());return e}}s.typeName="CTweenMachine",s.ins={id:r.gK.String("Snapshot.Id"),curve:r.gK.Enum("Tween.Curve",i.kp),duration:r.gK.Number("Tween.Duration",2),threshold:r.gK.Percent("Tween.Threshold",.5),tween:r.gK.Event("Control.Tween"),recall:r.gK.Event("Control.Recall"),store:r.gK.Event("Control.Store"),delete:r.gK.Event("Control.Delete"),clear:r.gK.Event("Control.Clear")},s.outs={count:r.gK.Integer("Snapshots.Count"),tweening:r.gK.Boolean("Tween.IsTweening"),time:r.gK.Number("Tween.Time"),completed:r.gK.Percent("Tween.Completed"),switched:r.gK.Boolean("Tween.Switched"),start:r.gK.Event("Tween.Start"),switch:r.gK.Event("Tween.Switch"),end:r.gK.Event("Tween.End")}},4240:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,EM:()=>i.EM,MZ:()=>i.MZ,qy:()=>i.qy});var i=n(6763),r=n(1071),o=n(8177);class s extends o.Ay{constructor(){super(...arguments),this.activeNode=null}get nodeProvider(){return this.system.getMainComponent(r.A)}connected(){super.connected();const e=this.nodeProvider;e.on("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=e.activeNode,this.onActiveNode(null,e.activeNode))}disconnected(){const e=this.nodeProvider;e.off("active-node",this.onActiveNodeEvent,this),e.activeNode&&(this.activeNode=null,this.onActiveNode(e.activeNode,null)),super.disconnected()}onActiveNode(e,t){this.requestUpdate()}onActiveNodeEvent(e){this.activeNode=e.next,this.onActiveNode(e.previous,e.next)}}},4260:(e,t,n)=>{const i=n(20),r=n(4179),{isPlainObject:o}=n(9171),s=n(5068),a=n(9038),{parse:l}=n(587),c=["img","audio","video","picture","svg","object","map","iframe","embed"],d=["script","style"];function u(e,t){e&&Object.keys(e).forEach(function(n){t(e[n],n)})}function h(e,t){return{}.hasOwnProperty.call(e,t)}function p(e,t){const n=[];return u(e,function(e){t(e)&&n.push(e)}),n}e.exports=f;const m=/^[^\0\t\n\f\r /<=>]+$/;function f(e,t,n){if(null==e)return"";"number"==typeof e&&(e=e.toString());let v="",y="";function b(e,t){const n=this;this.tag=e,this.attribs=t||{},this.tagPosition=v.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(L.length){L[L.length-1].text+=n.text}},this.updateParentNodeMediaChildren=function(){if(L.length&&c.includes(this.tag)){L[L.length-1].mediaChildren.push(this.tag)}}}(t=Object.assign({},f.defaults,t)).parser=Object.assign({},g,t.parser);const A=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};d.forEach(function(e){A(e)&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)});const _=t.nonTextTags||["script","style","textarea","option"];let w,x;t.allowedAttributes&&(w={},x={},u(t.allowedAttributes,function(e,t){w[t]=[];const n=[];e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(r(e).replace(/\\\*/g,".*")):w[t].push(e)}),n.length&&(x[t]=new RegExp("^("+n.join("|")+")$"))}));const C={},E={},M={};u(t.allowedClasses,function(e,t){if(w&&(h(w,t)||(w[t]=[]),w[t].push("class")),C[t]=e,Array.isArray(e)){const n=[];C[t]=[],M[t]=[],e.forEach(function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(r(e).replace(/\\\*/g,".*")):e instanceof RegExp?M[t].push(e):C[t].push(e)}),n.length&&(E[t]=new RegExp("^("+n.join("|")+")$"))}});const S={};let T,k,L,D,I,R,O;u(t.transformTags,function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=f.simpleTransform(e)),"*"===t?T=n:S[t]=n});let P=!1;N();const B=new i.Parser({onopentag:function(e,n){if(t.enforceHtmlBoundary&&"html"===e&&N(),R)return void O++;const i=new b(e,n);L.push(i);let r=!1;const c=!!i.text;let d;if(h(S,e)&&(d=S[e](e,n),i.attribs=n=d.attribs,void 0!==d.text&&(i.innerText=d.text),e!==d.tagName&&(i.name=e=d.tagName,I[k]=d.tagName)),T&&(d=T(e,n),i.attribs=n=d.attribs,e!==d.tagName&&(i.name=e=d.tagName,I[k]=d.tagName)),(!A(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(h(e,t))return!1;return!0}(D)||null!=t.nestingLimit&&k>=t.nestingLimit)&&(r=!0,D[k]=!0,"discard"!==t.disallowedTagsMode&&"completelyDiscard"!==t.disallowedTagsMode||-1!==_.indexOf(e)&&(R=!0,O=1),D[k]=!0),k++,r){if("discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)return;y=v,v=""}v+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(i.innerText=""),(!w||h(w,e)||w["*"])&&u(n,function(n,r){if(!m.test(r))return void delete i.attribs[r];if(""===n&&!t.allowedEmptyAttributes.includes(r)&&(t.nonBooleanAttributes.includes(r)||t.nonBooleanAttributes.includes("*")))return void delete i.attribs[r];let c=!1;if(!w||h(w,e)&&-1!==w[e].indexOf(r)||w["*"]&&-1!==w["*"].indexOf(r)||h(x,e)&&x[e].test(r)||x["*"]&&x["*"].test(r))c=!0;else if(w&&w[e])for(const t of w[e])if(o(t)&&t.name&&t.name===r){c=!0;let e="";if(!0===t.multiple){const i=n.split(" ");for(const n of i)-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n)}else t.values.indexOf(n)>=0&&(e=n);n=e}if(c){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(r)&&F(e,n))return void delete i.attribs[r];if("script"===e&&"src"===r){let e=!0;try{const i=z(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){const n=(t.allowedScriptHostnames||[]).find(function(e){return e===i.url.hostname}),r=(t.allowedScriptDomains||[]).find(function(e){return i.url.hostname===e||i.url.hostname.endsWith(`.${e}`)});e=n||r}}catch(t){e=!1}if(!e)return void delete i.attribs[r]}if("iframe"===e&&"src"===r){let e=!0;try{const i=z(n);if(i.isRelativeUrl)e=h(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const n=(t.allowedIframeHostnames||[]).find(function(e){return e===i.url.hostname}),r=(t.allowedIframeDomains||[]).find(function(e){return i.url.hostname===e||i.url.hostname.endsWith(`.${e}`)});e=n||r}}catch(t){e=!1}if(!e)return void delete i.attribs[r]}if("srcset"===r)try{let e=a(n);if(e.forEach(function(e){F("srcset",e.url)&&(e.evil=!0)}),e=p(e,function(e){return!e.evil}),!e.length)return void delete i.attribs[r];n=p(e,function(e){return!e.evil}).map(function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")}).join(", "),i.attribs[r]=n}catch(e){return void delete i.attribs[r]}if("class"===r){const t=C[e],o=C["*"],a=E[e],l=M[e],c=M["*"],d=[a,E["*"]].concat(l,c).filter(function(e){return e});if(!(n=H(n,t&&o?s(t,o):t||o,d)).length)return void delete i.attribs[r]}if("style"===r)if(t.parseStyleAttributes)try{const o=function(e,t){if(!t)return e;const n=e.nodes[0];let i;i=t[n.selector]&&t["*"]?s(t[n.selector],t["*"]):t[n.selector]||t["*"];i&&(e.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,n){if(h(e,n.prop)){e[n.prop].some(function(e){return e.test(n.value)})&&t.push(n)}return t}}(i),[]));return e}(l(e+" {"+n+"}",{map:!1}),t.allowedStyles);if(n=function(e){return e.nodes[0].nodes.reduce(function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e},[]).join(";")}(o),0===n.length)return void delete i.attribs[r]}catch(t){return"undefined"!=typeof window&&console.warn('Failed to parse "'+e+" {"+n+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete i.attribs[r]}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");v+=" "+r,n&&n.length?v+='="'+U(n,!0)+'"':t.allowedEmptyAttributes.includes(r)&&(v+='=""')}else delete i.attribs[r]}),-1!==t.selfClosing.indexOf(e)?v+=" />":(v+=">",!i.innerText||c||t.textFilter||(v+=U(i.innerText),P=!0)),r&&(v=y+U(v),y="")},ontext:function(e){if(R)return;const n=L[L.length-1];let i;if(n&&(i=n.tag,e=void 0!==n.innerText?n.innerText:e),"completelyDiscard"!==t.disallowedTagsMode||A(i))if("discard"!==t.disallowedTagsMode&&"completelyDiscard"!==t.disallowedTagsMode||"script"!==i&&"style"!==i){const n=U(e,!1);t.textFilter&&!P?v+=t.textFilter(n,i):P||(v+=n)}else v+=e;else e="";if(L.length){L[L.length-1].text+=e}},onclosetag:function(e,n){if(R){if(O--,O)return;R=!1}const i=L.pop();if(!i)return;if(i.tag!==e)return void L.push(i);R=!!t.enforceHtmlBoundary&&"html"===e,k--;const r=D[k];if(r){if(delete D[k],"discard"===t.disallowedTagsMode||"completelyDiscard"===t.disallowedTagsMode)return void i.updateParentNodeText();y=v,v=""}I[k]&&(e=I[k],delete I[k]),t.exclusiveFilter&&t.exclusiveFilter(i)?v=v.substr(0,i.tagPosition):(i.updateParentNodeMediaChildren(),i.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||n&&!A(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0?r&&(v=y,y=""):(v+="</"+e+">",r&&(v=y+U(v),y=""),P=!1))}},t.parser);return B.write(e),B.end(),v;function N(){v="",k=0,L=[],D={},I={},R=!1,O=0}function U(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function F(e,n){for(n=n.replace(/[\x00-\x20]+/g,"");;){const e=n.indexOf("\x3c!--");if(-1===e)break;const t=n.indexOf("--\x3e",e+4);if(-1===t)break;n=n.substring(0,e)+n.substring(t+3)}const i=n.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!i)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const r=i[1].toLowerCase();return h(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(r):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(r)}function z(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;const n=new URL(e,t);return{isRelativeUrl:n&&"relative-site"===n.hostname&&"relative:"===n.protocol,url:n}}function H(e,t,n){return t?(e=e.split(/\s+/)).filter(function(e){return-1!==t.indexOf(e)||n.some(function(t){return t.test(e)})}).join(" "):e}}const g={decodeEntities:!0};f.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},f.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(i,r){let o;if(n)for(o in t)r[o]=t[o];else r=t;return{tagName:e,attribs:r}}}},4270:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(4640),r=n(3331),o=n(5676),s=n(3275),a=n(9163);class l extends r.A{constructor(e){super(),this.next=null,this._canvasWidth=1,this._canvasHeight=1,this._overlay=null,this._camera=null,this._controller=null,this.addEvent("dispose"),this.next=null,e=e||{},this._relRect={x:e.x||0,y:e.y||0,width:e.width||1,height:e.height||1},this._absRect={x:0,y:0,width:1,height:1},e.overlay&&(this._overlay=e.overlay)}get x(){return this._absRect.x}get y(){return this._absRect.y}get width(){return this._absRect.width}get height(){return this._absRect.height}get canvasWidth(){return this._canvasWidth}get canvasHeight(){return this._canvasHeight}get camera(){return this._camera}get controller(){return this._controller}get overlay(){return this._overlay}set overlay(e){this._overlay=e,this.updateGeometry()}dispose(){this.emit({type:"dispose",viewport:this}),this._overlay&&(this._overlay.remove(),this._overlay=null)}setSize(e,t,n,i){const r=this._relRect;r.x=e,r.y=t,r.width=n,r.height=i,this.updateGeometry()}setCanvasSize(e,t){this._canvasWidth=e,this._canvasHeight=t,this.updateGeometry(),this._controller&&this._controller.setViewportSize(e,t)}setBuiltInCamera(e,t){this._camera?this._camera.setProjection(e):(this._camera=new o.Ay(e),this._camera.matrixAutoUpdate=!1),void 0!==t&&(this._camera.setPreset(t),this.overlay.setLabel(s.t.TopRight,"view",o.Gz[t],"ff-label-box"))}unsetBuiltInCamera(){this._camera=null,this._controller=null,this.overlay.unsetLabel(s.t.TopRight,"view")}enableCameraControl(e){return!e&&this._controller?this._controller=null:e&&this._camera&&(this._controller||(this._controller=new a.A(this._camera),this._controller.setViewportSize(this.width,this.height),this._controller.updateController())),this._controller}zoomExtents(e){const t=this._camera,n=this._controller;t&&n&&(n.zoomExtents(e),n.updateCamera(null,!0))}isInside(e){return this.isPointInside(e.localX,e.localY)}isPointInside(e,t){const n=this._absRect;return t=this.canvasHeight-t,e>=n.x&&e<n.x+n.width&&t>=n.y&&t<n.y+n.height}getDevicePoint(e,t,n){const r=this._absRect,o=(e-r.x)/r.width*2-1,s=(this.canvasHeight-t-r.y)/r.height*2-1;return n?n.set(o,s):new i.I9Y(o,s)}getDeviceX(e){const t=this._absRect;return(e-t.x)/t.width*2-1}getDeviceY(e){const t=this._absRect;return(this.canvasHeight-e-t.y)/t.height*2-1}updateCamera(e){let t=e;if(this._camera&&(t=this._camera,this._controller&&this._controller.updateCamera()),!t)return;const n=this._absRect,i=n.width/n.height;if(i!==t.userData.aspect)if(t.userData.aspect=i,t.isUniversalCamera||t.isPerspectiveCamera)t.aspect=i,t.updateProjectionMatrix();else if(t.isOrthographicCamera){const e=.5*(t.top-t.bottom);t.left=-e*i,t.right=e*i,t.updateProjectionMatrix()}return t}applyViewport(e){const t=this._absRect;e.setViewport(t.x,t.y,t.width,t.height),e.viewport=this}applyPickViewport(e,t){const n=this._absRect,i=t.localX-n.x,r=this.canvasHeight-t.localY-n.y;e.viewport.set(-i,-r,n.width,n.height)}toViewportEvent(e){const t=e;return t.viewport=this,t.deviceX=this.getDeviceX(e.localX),t.deviceY=this.getDeviceY(e.localY),t}onPointer(e){return!!this._controller&&this._controller.onPointer(e)}onTrigger(e){return!!this._controller&&this._controller.onTrigger(e)}onKeyboard(e){return!!this._controller&&this._controller.onKeypress(e)}toString(){return`Viewport (x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height})`}updateGeometry(){const e=this._relRect,t=this._absRect,n=this._canvasWidth,i=this._canvasHeight;t.x=Math.round(e.x*n),t.y=Math.round(e.y*i),t.width=Math.round(e.width*n),t.height=Math.round(e.height*i);const r=this._overlay;if(r){const e=this.canvasHeight-t.y-t.height;r.style.left=t.x?t.x.toFixed()+"px":"0",r.style.top=e?e.toFixed()+"px":"0",r.style.width=t.width.toFixed()+"px",r.style.height=t.height.toFixed()+"px"}}}},4334:function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(3681))},4340:(e,t,n)=>{"use strict";n.d(t,{j:()=>v,A:()=>y});var i=n(4640),r=n(3074);class o extends i.YJl{constructor(){super();const e=new i._4j({color:"white",metalness:1});e.transparent=!0,this.needle=new i.eaF(this.createLatheGeometry([0,0,.25,.4,.4,10]),e);const t=new i._4j({color:"#ffcd00",roughness:.8,metalness:.1});t.transparent=!0,this.handle=new i.eaF(this.createLatheGeometry([0,10,3.4,10,3.5,10.1,3.5,11,3.45,11.1,2.05,12.5,2,12.6,2,17.4,2.05,17.5,3.45,18.9,3.5,19,3.5,19.9,3.4,20,0,20]),t),this.needle.matrixAutoUpdate=!1,this.add(this.needle),this.handle.matrixAutoUpdate=!1,this.add(this.handle)}dispose(){this.remove(this.handle,this.needle),this.needle.material.dispose(),this.handle.material.dispose(),this.needle.geometry.dispose(),this.handle.geometry.dispose()}createLatheGeometry(e){const t=[];for(let n=0,r=e.length;n<r;n+=2)t.push(new i.I9Y(e[n],e[n+1]));return new i.nzx(t,16)}}var s=n(9616),a=n(8172),l=n(3675),c=n(9519),d=n(5717),u=n(7832),h=n(9640);const p=new i.dwI,m=new i.Pq0,f=new i.Pq0,g=new i.Pq0(0,1,0);var v;!function(e){e[e.SetStart=0]="SetStart",e[e.SetEnd=1]="SetEnd"}(v||(v={}));class y extends r.Ay{get settingProperties(){return[this.ins.visible]}get snapshotProperties(){return[this.ins.visible,this.ins.startPosition,this.ins.startDirection,this.ins.endPosition,this.ins.endDirection]}constructor(e,t){super(e,t),this.ins=this.addInputs(y.tapeIns),this.outs=this.addOutputs(y.tapeOuts),this.startPin=null,this.endPin=null,this.line=null,this.annotationView=null,this.label=null,this.object3D=new i.YJl,this.object3D.name="Tape",this.startPin=new o,this.startPin.matrixAutoUpdate=!1,this.startPin.visible=!1,this.endPin=new o,this.endPin.matrixAutoUpdate=!1,this.endPin.visible=!1;const n=[];n.push(new i.Pq0(0,0,0)),n.push(new i.Pq0(0,0,0));const r=(new i.LoY).setFromPoints(n),s=new i.mrM;s.depthTest=!1,s.transparent=!0,this.line=new i.N1A(r,s),this.line.visible=!1,this.line.frustumCulled=!1,this.annotationView=this.node.createComponent(h.A);const a=this.label=new u.A(void 0);a.data.style="Standard",a.data.position=[0,0,0],a.data.direction=[0,0,0],this.annotationView.ins.visible.setValue(!1),this.annotationView.addAnnotation(a),this.object3D.add(this.startPin,this.endPin,this.line)}create(){super.create();const e=this.getGraphComponent(a.A);this.ins.boundingBox.linkFrom(e.outs.boundingBox),this.ins.globalUnits.linkFrom(e.ins.units)}dispose(){this.object3D.remove(this.startPin,this.endPin,this.line),this.startPin.dispose(),this.endPin.dispose(),this.line.geometry.dispose(),this.line.material.dispose(),this.startPin=null,this.endPin=null,this.line=null,super.dispose()}update(e){const t=this.line.geometry,{startPin:n,endPin:i,line:r,ins:o}=this;if(o.enabled.changed&&o.visible.setValue(o.enabled.value),super.update(e),o.boundingBox.changed&&o.boundingBox.value){o.boundingBox.value.getSize(m);const e=.5*m.length();n.scale.setScalar(.003*e),n.updateMatrix(),i.scale.setScalar(.003*e),i.updateMatrix();const t=.05*e;this.annotationView.ins.unitScale.setValue(t),o.endPosition.set()}if(o.enabled.changed&&(o.enabled.value?(this.system.on("pointer-up",this.onPointerUp,this),this.annotationView.ins.visible.setValue(this.outs.distance.value>0)):(this.system.off("pointer-up",this.onPointerUp,this),this.annotationView.ins.visible.setValue(!1))),o.visible.changed)if(o.visible.value){const e=o.startPosition.value,t=o.endPosition.value;e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]||(n.visible=!0,i.visible=!0,r.visible=!0,this.annotationView.ins.visible.setValue(!0))}else this.annotationView.ins.visible.setValue(!1);if(o.globalUnits.changed&&this.updateUnitScale(),o.startPosition.changed||o.startDirection.changed){n.position.fromArray(o.startPosition.value),m.fromArray(o.startDirection.value),n.quaternion.setFromUnitVectors(g,m),n.updateMatrix();const e=t.attributes.position.array;e[0]=n.position.x,e[1]=n.position.y,e[2]=n.position.z,t.attributes.position.needsUpdate=!0,this.annotationView.ins.visible.setValue(!1)}if(o.endPosition.changed||o.endDirection.changed){i.position.fromArray(o.endPosition.value),m.fromArray(o.endDirection.value),i.quaternion.setFromUnitVectors(g,m),i.updateMatrix();const e=t.attributes.position.array;e[3]=i.position.x,e[4]=i.position.y,e[5]=i.position.z,t.attributes.position.needsUpdate=!0,m.fromArray(o.startPosition.value),f.fromArray(o.endPosition.value);const n=m.distanceTo(f);this.outs.distance.setValue(n);const r=this.label.data,s=1/this.annotationView.ins.unitScale.value;r.position=[s*(e[0]+e[3])/2,s*(e[1]+e[4])/2,s*(e[2]+e[5])/2];const a=this.ins.globalUnits.getOptionText();this.label.title=n.toFixed(2)+" "+a,this.annotationView.updateAnnotation(this.label,!0),n>0&&this.ins.visible.value&&this.annotationView.ins.visible.setValue(!0)}return!0}fromData(e){this.ins.copyValues({visible:e.enabled,startPosition:e.startPosition||[0,0,0],startDirection:e.startDirection||[1,0,0],endPosition:e.endPosition||[0,0,0],endDirection:e.endDirection||[1,0,0]}),this.ins.enabled.copyValue(!1)}toData(){return{enabled:this.ins.visible.cloneValue()}}onPointerUp(e){if(e.isDragging||!e.component||!e.component.is(s.A))return;const t=e.component,n=(0,d.I)(t.object3D,e.object3D),i=t.localBoundingBox.clone().applyMatrix4(n),r=e.object3D.matrixWorld;p.getNormalMatrix(r);const o=e.view.pickPosition(e,i).applyMatrix4(r),a=e.view.pickNormal(e).applyMatrix3(p).normalize(),{startPin:l,endPin:c,line:u,ins:h,outs:m}=this;m.state.value===v.SetStart?(o.toArray(h.startPosition.value),a.toArray(h.startDirection.value),h.startPosition.set(),h.startDirection.set(),l.visible=!0,c.visible=!1,u.visible=!1,m.state.setValue(v.SetEnd)):(o.toArray(h.endPosition.value),a.toArray(h.endDirection.value),h.endPosition.set(),h.endDirection.set(),l.visible=!0,c.visible=!0,u.visible=!0,m.state.setValue(v.SetStart))}updateUnitScale(){const e=this.ins,t=e.localUnits.getValidatedValue(),n=e.globalUnits.getValidatedValue();this.outs.unitScale.setValue((0,c.A)(t,n)),m.fromArray(e.startPosition.value),e.startPosition.setValue(m.multiplyScalar(this.outs.unitScale.value).toArray()),m.fromArray(e.endPosition.value),e.endPosition.setValue(m.multiplyScalar(this.outs.unitScale.value).toArray()),e.localUnits.setValue(n)}}y.typeName="CVTape",y.text="Tape",y.icon="",y.tapeIns={startPosition:r.gK.Vector3("Start.Position"),startDirection:r.gK.Vector3("Start.Direction"),endPosition:r.gK.Vector3("End.Position"),endDirection:r.gK.Vector3("End.Direction"),boundingBox:r.gK.Object("Scene.BoundingBox",i.NRn),globalUnits:r.gK.Enum("Model.GlobalUnits",l.uj,l.uj.cm),localUnits:r.gK.Enum("Model.LocalUnits",l.uj,l.uj.cm),enabled:r.gK.Boolean("Tape.Enabled",!1)},y.tapeOuts={state:r.gK.Enum("Tape.State",v),distance:r.gK.Number("Tape.Distance"),unitScale:r.gK.Number("UnitScale",{preset:1,precision:5})}},4357:(e,t,n)=>{var i=n(1864);e.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return i(n,t)}},4365:function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(3681))},4376:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},4424:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,gK:()=>i.gK});var i=n(3423),r=n(7350);n(1860);class o extends i.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(o.graphIns),this._innerGraph=null,this._innerRoot=null,this._innerGraph=new r.A(this.system,this)}get innerGraph(){return this._innerGraph}get innerNodes(){return this._innerGraph.nodes}get innerComponents(){return this._innerGraph.components}get innerRoots(){return this._innerGraph.roots}getInnerComponent(e,t=!1){return this._innerGraph.components.get(e,t)}getInnerComponents(e){return this._innerGraph.components.getArray(e)}hasInnerComponent(e){return this._innerGraph.components.has(e)}getInnerNode(e,t=!1){return this._innerGraph.nodes.get(e,t)}getInnerNodes(e){return this._innerGraph.nodes.getArray(e)}hasInnerNode(e){return this._innerGraph.nodes.has(e)}isEmpty(){return 0===this._innerGraph.nodes.count()}update(e){const t=this.ins;if(t.active.changed){const e=t.active.value;e!==this._innerGraph.isActive&&(e?this.activateInnerGraph():this.deactivateInnerGraph())}return!0}tick(e){return this._innerGraph.tick(e)}tock(e){return this._innerGraph.tock(e)}dispose(){this._innerGraph.clear(),this._innerGraph=null,this._innerRoot=null,super.dispose()}clearInnerGraph(){this._innerGraph.clear()}fromJSON(e){super.fromJSON(e),this._innerGraph.clear(),this._innerGraph.fromJSON(e.graph)}toJSON(){const e=super.toJSON();return e.graph=this._innerGraph.toJSON(),e}dump(e=""){super.dump(e),this.innerGraph.dump(e+"  ")}onAddInnerRoot(e){}onRemoveInnerRoot(e){}activateInnerGraph(){this._innerGraph.activate()}deactivateInnerGraph(){this._innerGraph.deactivate()}}o.typeName="CGraph",o.graphIns={active:i.gK.Boolean("Graph.Active",!0)}},4457:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(3681))},4482:(e,t,n)=>{"use strict";n.d(t,{A:()=>s,y:()=>i});var i,r=n(5676),o=n(4757);!function(e){e[e.Single=0]="Single",e[e.HorizontalSplit=1]="HorizontalSplit",e[e.VerticalSplit=2]="VerticalSplit",e[e.Quad=3]="Quad"}(i||(i={}));class s extends o.A{constructor(e,t,n){super(e,t,n),this._layout=i.Quad,this._horizontalSplit=.5,this._verticalSplit=.5,this.addEvent("layout"),this.layout=i.Single}set layout(e){if(e===this._layout)return;this._layout=e;const t=this.viewports;switch(this._layout){case i.Single:this.setViewportCount(1);break;case i.HorizontalSplit:case i.VerticalSplit:this.setViewportCount(2);break;case i.Quad:this.setViewportCount(4)}this.updateSplitPositions(),t[1]&&(t[1].setBuiltInCamera(r.$R.Orthographic,r.Gz.Top),t[1].enableCameraControl(!0).orientationEnabled=!1),t[2]&&(t[2].setBuiltInCamera(r.$R.Orthographic,r.Gz.Left),t[2].enableCameraControl(!0).orientationEnabled=!1),t[3]&&(t[3].setBuiltInCamera(r.$R.Orthographic,r.Gz.Front),t[3].enableCameraControl(!0).orientationEnabled=!1),this.emit({type:"layout",layout:e})}get layout(){return this._layout}set horizontalSplit(e){this._horizontalSplit=e,this.updateSplitPositions()}get horizontalSplit(){return this._horizontalSplit}set verticalSplit(e){this._verticalSplit=e,this.updateSplitPositions()}get verticalSplit(){return this._verticalSplit}updateSplitPositions(){const e=this._horizontalSplit,t=this._verticalSplit;switch(this._layout){case i.Single:this.viewports[0].setSize(0,0,1,1);break;case i.HorizontalSplit:this.viewports[0].setSize(0,0,e,1),this.viewports[1].setSize(e,0,1-e,1);break;case i.VerticalSplit:this.viewports[0].setSize(0,1-t,1,t),this.viewports[1].setSize(0,0,1,1-t);break;case i.Quad:this.viewports[0].setSize(0,1-t,e,t),this.viewports[1].setSize(e,1-t,1-e,t),this.viewports[2].setSize(0,0,e,1-t),this.viewports[3].setSize(e,0,1-e,1-t)}}}},4483:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var a=s(n(2177)),l=n(2719),c=n(5911),d=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function u(e){return e.replace(/"/g,"&quot;")}var h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),i="",r=0;r<n.length;r++)i+=m(n[r],t);return i}function m(e,t){switch(e.type){case a.Root:return p(e.children,t);case a.Doctype:case a.Directive:return"<".concat(e.data,">");case a.Comment:return function(e){return"\x3c!--".concat(e.data,"--\x3e")}(e);case a.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=c.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&f.has(e.parent.name)&&(t=i(i({},t),{xmlMode:!1})));!t.xmlMode&&g.has(e.name)&&(t=i(i({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),o=function(e,t){var n;if(e){var i=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?u:t.xmlMode||"utf8"!==t.encodeEntities?l.encodeXML:l.escapeAttribute;return Object.keys(e).map(function(n){var r,o,s=null!==(r=e[n])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(n=null!==(o=c.attributeNames.get(n))&&void 0!==o?o:n),t.emptyAttrs||t.xmlMode||""!==s?"".concat(n,'="').concat(i(s),'"'):n}).join(" ")}}(e.attribs,t);o&&(r+=" ".concat(o));0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&h.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=p(e.children,t)),!t.xmlMode&&h.has(e.name)||(r+="</".concat(e.name,">")));return r}(e,t);case a.Text:return function(e,t){var n,i=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&d.has(e.parent.name)||(i=t.xmlMode||"utf8"!==t.encodeEntities?(0,l.encodeXML)(i):(0,l.escapeText)(i));return i}(e,t)}}t.render=p,t.default=p;var f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"])},4484:e=>{e.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},4507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5391);class r extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=(0,i.resolveUrl)(e,t),this.missingSchema=(0,i.normalizeId)((0,i.getFullPath)(this.missingRef))}}t.default=r},4509:e=>{var t=Array.isArray;e.exports=t},4516:(e,t)=>{"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=n,t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var i=t.next=e.next;i&&(i.prev=t);var r=t.parent=e.parent;if(r){var o=r.children;o[o.lastIndexOf(e)]=t,e.parent=null}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var i=e.children[e.children.length-2];i.next=t,t.prev=i}else t.prev=null},t.append=function(e,t){n(t);var i=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=i,r){if(r.prev=t,i){var o=i.children;o.splice(o.lastIndexOf(r),0,t)}}else i&&i.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var i=e.children[1];i.prev=t,t.next=i}else t.next=null},t.prepend=function(e,t){n(t);var i=e.parent;if(i){var r=i.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=i,t.prev=e.prev,t.next=e,e.prev=t}},4522:(e,t,n)=>{"use strict";var i;var r=n(6116).F,o=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var d,u=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var h=t.map(function(e,r){var o=r<t.length-1;return function(e,t,r,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",function(){a=!0}),void 0===i&&(i=n(7970)),i(e,{readable:t,writable:r},function(e){if(e)return o(e);a=!0,o()});var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,r>0,function(e){d||(d=e),e&&h.forEach(l),o||(h.forEach(l),u(d))})});return t.reduce(c)}},4571:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>i.str`must match "${e.ifClause}" schema`,params:({params:e})=>i._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&(0,r.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const a=s(o,"then"),l=s(o,"else");if(!a&&!l)return;const c=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),a&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(d,u("then",n),u("else",n))}else a?t.if(d,u("then")):t.if((0,i.not)(d),u("else"));function u(n,r){return()=>{const o=e.subschema({keyword:n},d);t.assign(c,d),e.mergeValidEvaluated(o,c),r?t.assign(r,i._`${n}`):e.setParams({ifClause:n})}}e.pass(c,()=>e.error(!0))}};function s(e,t){const n=e.schema[t];return void 0!==n&&!(0,r.alwaysValidSchema)(e,n)}t.default=o},4633:function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},4640:(e,t,n)=>{"use strict";n.d(t,{$EB:()=>h,$Kf:()=>So,$Yl:()=>B,$_I:()=>ye,$ei:()=>x,$p8:()=>_l,A$4:()=>Cr,AQS:()=>yn,B69:()=>Gi,BH$:()=>ls,BKk:()=>Jr,BND:()=>Zl,BRH:()=>il,BXX:()=>Ye,B_h:()=>Je,CSG:()=>Ta,CVz:()=>We,CWW:()=>yt,Cfg:()=>fe,CmU:()=>Cl,D$Q:()=>Ca,DXC:()=>ss,Dmk:()=>Le,EAD:()=>Do,EZo:()=>f,EdD:()=>v,FCc:()=>as,FFZ:()=>$t,FV:()=>ee,FXf:()=>A,Fn:()=>ht,FvD:()=>fs,G3T:()=>bt,GJx:()=>de,GOR:()=>ys,GWd:()=>Re,GYF:()=>To,Gu$:()=>Aa,Gwm:()=>Y,GxU:()=>br,H23:()=>pt,HIg:()=>Ie,HO_:()=>vt,HXV:()=>$e,HiM:()=>vl,Hit:()=>ja,I46:()=>Mo,I9Y:()=>un,IE4:()=>He,IUQ:()=>zn,Iit:()=>Kr,Iw4:()=>Hl,Jnc:()=>s,K52:()=>G,KDk:()=>Ze,KLL:()=>Ut,KPJ:()=>Ka,KRh:()=>q,Kef:()=>ft,Kwu:()=>g,Kzg:()=>Ml,LAk:()=>ne,LiQ:()=>S,LlO:()=>Xr,LoY:()=>Or,LuO:()=>jl,MBL:()=>Ya,MSw:()=>ba,MW4:()=>Er,Mjd:()=>X,Mmk:()=>En,N1A:()=>ns,N5j:()=>Dt,NRn:()=>Gn,NTi:()=>m,Nex:()=>Xl,Nt7:()=>D,Nwf:()=>Nl,Nz6:()=>je,O49:()=>kt,O9p:()=>Ti,ONl:()=>ps,OUM:()=>be,Om:()=>ce,OuU:()=>k,P5j:()=>Ul,PJ3:()=>wt,PPD:()=>$o,PTz:()=>hn,Pq0:()=>pn,Q1f:()=>dr,QP0:()=>a,Qev:()=>Xt,Qrf:()=>nt,R3r:()=>ho,RJ4:()=>Tt,RQf:()=>Ee,RiT:()=>Qa,Riy:()=>Ke,RlV:()=>vi,RrE:()=>P,RyA:()=>c,S$4:()=>ut,THS:()=>xr,Tap:()=>rl,TdN:()=>Kt,TiK:()=>Vt,TkQ:()=>Fe,U3G:()=>V,V3x:()=>ke,V9B:()=>mr,VCu:()=>bs,VT0:()=>Be,Vb5:()=>o,VxR:()=>Nt,W9U:()=>mt,WNZ:()=>r,Wdf:()=>Wt,Wew:()=>Se,Wk7:()=>l,XG_:()=>gt,XIg:()=>p,XJ7:()=>_a,XrR:()=>W,Y9S:()=>tl,YHV:()=>$l,YJl:()=>co,Yuy:()=>xe,Z58:()=>po,ZLX:()=>zo,ZQM:()=>Ne,Zcv:()=>Yo,Zr2:()=>Bt,ZyN:()=>Al,_4j:()=>Ea,_QJ:()=>ot,_Ut:()=>Zr,a55:()=>nn,a5J:()=>rt,aEY:()=>R,aHM:()=>Xa,aJ8:()=>ie,aMy:()=>At,aVO:()=>ka,amv:()=>zt,b4q:()=>ao,bC7:()=>lt,bCz:()=>y,bI3:()=>It,bdM:()=>ya,bkx:()=>Ce,brA:()=>H,bw0:()=>Q,c5h:()=>vs,c90:()=>ze,cHt:()=>we,cZY:()=>Kl,caT:()=>$,cj9:()=>dn,czI:()=>et,dYF:()=>Yn,dcC:()=>Pe,dth:()=>sl,dwI:()=>gn,e0p:()=>N,eB$:()=>mo,eHc:()=>F,eHs:()=>go,eaF:()=>Qr,eoi:()=>Yt,er$:()=>Pt,f4X:()=>M,fBL:()=>_e,g7M:()=>te,gJ2:()=>Te,gO9:()=>b,gPd:()=>Fn,gWB:()=>Qt,ghU:()=>ue,hB5:()=>d,hdd:()=>L,hgQ:()=>O,hsX:()=>u,hxR:()=>pe,hy7:()=>oe,i7d:()=>eo,iNn:()=>qr,iOZ:()=>gs,ie2:()=>T,imn:()=>pr,ix0:()=>Me,iyt:()=>ci,jR7:()=>Ve,jej:()=>xn,jf0:()=>Ot,jzd:()=>Gt,k6Q:()=>Ge,k6q:()=>ge,kO0:()=>jt,kRr:()=>ve,kTW:()=>he,kTp:()=>Qe,kn4:()=>yi,kyO:()=>Z,lGu:()=>z,lGw:()=>Pa,lPF:()=>An,ljd:()=>_t,lxW:()=>Wr,lyL:()=>at,mcG:()=>wn,mrM:()=>qo,nCl:()=>hl,nNL:()=>J,nST:()=>_,nWS:()=>jn,nZQ:()=>Sl,nzx:()=>va,o6l:()=>lo,ojh:()=>C,ojs:()=>dt,ov9:()=>U,pBf:()=>qe,pHI:()=>me,paN:()=>Ue,ppV:()=>kn,psI:()=>it,q2:()=>xa,qFE:()=>_s,qUd:()=>yl,qa3:()=>Xe,qad:()=>E,qq$:()=>bn,qtW:()=>Mr,r6x:()=>xl,rFo:()=>Vn,rSH:()=>tt,rYR:()=>Lt,sPf:()=>i,tBo:()=>Yl,tJf:()=>Ae,tXL:()=>Sa,tz3:()=>$a,uB5:()=>st,uSd:()=>Ma,uV5:()=>le,uWO:()=>Io,ubm:()=>ro,ure:()=>wl,vim:()=>Ht,vyJ:()=>Rt,wfO:()=>ae,wn6:()=>I,wrO:()=>De,xFO:()=>se,xSv:()=>j,xiE:()=>Cn,y3Z:()=>ct,y_p:()=>K,ypk:()=>zs,zD7:()=>Tl,zdS:()=>Oe,zgK:()=>ki,znC:()=>w});const i="177",r=0,o=1,s=2,a=1,l=2,c=3,d=0,u=1,h=2,p=0,m=1,f=2,g=3,v=4,y=5,b=100,A=101,_=102,w=103,x=104,C=200,E=201,M=202,S=203,T=204,k=205,L=206,D=207,I=208,R=209,O=210,P=211,B=212,N=213,U=214,F=0,z=1,H=2,j=3,V=4,Y=5,G=6,Q=7,$=0,q=1,W=2,K=0,Z=1,X=2,J=3,ee=4,te=5,ne=6,ie=7,re="attached",oe=301,se=302,ae=303,le=304,ce=306,de=1e3,ue=1001,he=1002,pe=1003,me=1004,fe=1005,ge=1006,ve=1007,ye=1008,be=1009,Ae=1010,_e=1011,we=1012,xe=1013,Ce=1014,Ee=1015,Me=1016,Se=1017,Te=1018,ke=1020,Le=35902,De=1021,Ie=1022,Re=1023,Oe=1026,Pe=1027,Be=1028,Ne=1029,Ue=1030,Fe=1031,ze=1033,He=33776,je=33777,Ve=33778,Ye=33779,Ge=35840,Qe=35841,$e=35842,qe=35843,We=36196,Ke=37492,Ze=37496,Xe=37808,Je=37809,et=37810,tt=37811,nt=37812,it=37813,rt=37814,ot=37815,st=37816,at=37817,lt=37818,ct=37819,dt=37820,ut=37821,ht=36492,pt=36494,mt=36495,ft=36283,gt=36284,vt=36285,yt=36286,bt=2200,At=2201,_t=2300,wt=2301,xt=2302,Ct=2400,Et=2401,Mt=2402,St=2500,Tt=0,kt=1,Lt=2,Dt=3201,It=0,Rt=1,Ot="",Pt="srgb",Bt="srgb-linear",Nt="linear",Ut="srgb",Ft=7680,zt=512,Ht=513,jt=514,Vt=515,Yt=516,Gt=517,Qt=518,$t=519,qt=35044,Wt="300 es",Kt=2e3,Zt=2001;class Xt{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const Jt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let en=1234567;const tn=Math.PI/180,nn=180/Math.PI;function rn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Jt[255&e]+Jt[e>>8&255]+Jt[e>>16&255]+Jt[e>>24&255]+"-"+Jt[255&t]+Jt[t>>8&255]+"-"+Jt[t>>16&15|64]+Jt[t>>24&255]+"-"+Jt[63&n|128]+Jt[n>>8&255]+"-"+Jt[n>>16&255]+Jt[n>>24&255]+Jt[255&i]+Jt[i>>8&255]+Jt[i>>16&255]+Jt[i>>24&255]).toLowerCase()}function on(e,t,n){return Math.max(t,Math.min(n,e))}function sn(e,t){return(e%t+t)%t}function an(e,t,n){return(1-n)*e+n*t}function ln(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function cn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const dn={DEG2RAD:tn,RAD2DEG:nn,generateUUID:rn,clamp:on,euclideanModulo:sn,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:an,damp:function(e,t,n,i){return an(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(sn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(en=e);let t=en+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*tn},radToDeg:function(e){return e*nn},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+i)/2),d=s((t+i)/2),u=o((t-i)/2),h=s((t-i)/2),p=o((i-t)/2),m=s((i-t)/2);switch(r){case"XYX":e.set(a*d,l*u,l*h,a*c);break;case"YZY":e.set(l*h,a*d,l*u,a*c);break;case"ZXZ":e.set(l*u,l*h,a*d,a*c);break;case"XZX":e.set(a*d,l*m,l*p,a*c);break;case"YXY":e.set(l*p,a*d,l*m,a*c);break;case"ZYZ":e.set(l*m,l*p,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:cn,denormalize:ln};class un{constructor(e=0,t=0){un.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(on(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(on(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class hn{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3];const u=r[o+0],h=r[o+1],p=r[o+2],m=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===s)return e[t+0]=u,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(d!==m||a!==u||l!==h||c!==p){let e=1-s;const t=a*u+l*h+c*p+d*m,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+u*r,l=l*e+h*r,c=c*e+p*r,d=d*e+m*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+d*d);a*=e,l*=e,c*=e,d*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],l=n[i+2],c=n[i+3],d=r[o],u=r[o+1],h=r[o+2],p=r[o+3];return e[t]=s*p+c*d+a*h-l*u,e[t+1]=a*p+c*u+l*d-s*h,e[t+2]=l*p+c*h+s*u-a*d,e[t+3]=c*p-s*d-a*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(i/2),d=s(r/2),u=a(n/2),h=a(i/2),p=a(r/2);switch(o){case"XYZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"YXZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"ZXY":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"ZYX":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"YZX":this._x=u*c*d+l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d-u*h*p;break;case"XZY":this._x=u*c*d-l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d+u*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],d=t[10],u=n+s+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-a)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>s&&n>d){const e=2*Math.sqrt(1+n-s-d);this._w=(c-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(s>d){const e=2*Math.sqrt(1+s-n-d);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+d-n-s);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(on(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+i*l-r*a,this._y=i*c+o*a+r*s-n*l,this._z=r*c+o*l+n*a-i*s,this._w=o*c-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=o*d+this._w*u,this._x=n*d+this._x*u,this._y=i*d+this._y*u,this._z=r*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pn{constructor(e=0,t=0,n=0){pn.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(fn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*i-s*n),c=2*(s*t-r*i),d=2*(r*n-o*t);return this.x=t+a*l+o*d-s*c,this.y=n+a*c+s*l-r*d,this.z=i+a*d+r*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this.z=on(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this.z=on(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(on(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return mn.copy(this).projectOnVector(e),this.sub(mn)}reflect(e){return this.sub(mn.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(on(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mn=new pn,fn=new hn;class gn{constructor(e,t,n,i,r,o,s,a,l){gn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l)}set(e,t,n,i,r,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],p=n[8],m=i[0],f=i[3],g=i[6],v=i[1],y=i[4],b=i[7],A=i[2],_=i[5],w=i[8];return r[0]=o*m+s*v+a*A,r[3]=o*f+s*y+a*_,r[6]=o*g+s*b+a*w,r[1]=l*m+c*v+d*A,r[4]=l*f+c*y+d*_,r[7]=l*g+c*b+d*w,r[2]=u*m+h*v+p*A,r[5]=u*f+h*y+p*_,r[8]=u*g+h*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*r*c+n*s*a+i*r*l-i*o*a}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],d=c*o-s*l,u=s*a-c*r,h=l*r-o*a,p=t*d+n*u+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*l-c*n)*m,e[2]=(s*n-i*o)*m,e[3]=u*m,e[4]=(c*t-i*a)*m,e[5]=(i*r-s*t)*m,e[6]=h*m,e[7]=(n*a-l*t)*m,e[8]=(o*t-n*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(vn.makeScale(e,t)),this}rotate(e){return this.premultiply(vn.makeRotation(-e)),this}translate(e,t){return this.premultiply(vn.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const vn=new gn;function yn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function bn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function An(){const e=bn("canvas");return e.style.display="block",e}const _n={};function wn(e){e in _n||(_n[e]=!0,console.warn(e))}function xn(e,t,n){return new Promise(function(i,r){setTimeout(function o(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:i()}},n)})}function Cn(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function En(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}const Mn=(new gn).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Sn=(new gn).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Tn(){const e={enabled:!0,workingColorSpace:Bt,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===Ut&&(e.r=Ln(e.r),e.g=Ln(e.g),e.b=Ln(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Ut&&(e.r=Dn(e.r),e.g=Dn(e.g),e.b=Dn(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Ot?Nt:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return wn("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return wn("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[Bt]:{primaries:t,whitePoint:i,transfer:Nt,toXYZ:Mn,fromXYZ:Sn,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Pt},outputColorSpaceConfig:{drawingBufferColorSpace:Pt}},[Pt]:{primaries:t,whitePoint:i,transfer:Ut,toXYZ:Mn,fromXYZ:Sn,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Pt}}}),e}const kn=Tn();function Ln(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Dn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let In;class Rn{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===In&&(In=bn("canvas")),In.width=e.width,In.height=e.height;const t=In.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=In}return n.toDataURL(t)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=bn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Ln(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ln(t[e]/255)):t[e]=Ln(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let On=0;class Pn{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:On++}),this.uuid=rn(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(Bn(i[t].image)):e.push(Bn(i[t]))}else e=Bn(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function Bn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Rn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Nn=0;const Un=new pn;class Fn extends Xt{constructor(e=Fn.DEFAULT_IMAGE,t=Fn.DEFAULT_MAPPING,n=ue,i=ue,r=ge,o=ye,s=Re,a=be,l=Fn.DEFAULT_ANISOTROPY,c=Ot){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Nn++}),this.uuid=rn(),this.name="",this.source=new Pn(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new un(0,0),this.repeat=new un(1,1),this.center=new un(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Un).x}get height(){return this.source.getSize(Un).y}get depth(){return this.source.getSize(Un).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n:console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case de:e.x=e.x-Math.floor(e.x);break;case ue:e.x=e.x<0?0:1;break;case he:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case de:e.y=e.y-Math.floor(e.y);break;case ue:e.y=e.y<0?0:1;break;case he:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}Fn.DEFAULT_IMAGE=null,Fn.DEFAULT_MAPPING=300,Fn.DEFAULT_ANISOTROPY=1;class zn{constructor(e=0,t=0,n=0,i=1){zn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],d=a[8],u=a[1],h=a[5],p=a[9],m=a[2],f=a[6],g=a[10];if(Math.abs(c-u)<o&&Math.abs(d-m)<o&&Math.abs(p-f)<o){if(Math.abs(c+u)<s&&Math.abs(d+m)<s&&Math.abs(p+f)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+u)/4,b=(d+m)/4,A=(p+f)/4;return e>a&&e>v?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=b/n):a>v?a<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=y/i,r=A/i):v<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=b/r,i=A/r),this.set(n,i,r,t),this}let v=Math.sqrt((f-p)*(f-p)+(d-m)*(d-m)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(d-m)/v,this.z=(u-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=on(this.x,e.x,t.x),this.y=on(this.y,e.y,t.y),this.z=on(this.z,e.z,t.z),this.w=on(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=on(this.x,e,t),this.y=on(this.y,e,t),this.z=on(this.z,e,t),this.w=on(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(on(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hn extends Xt{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ge,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new zn(0,0,e,t),this.scissorTest=!1,this.viewport=new zn(0,0,e,t);const i={width:e,height:t,depth:n.depth},r=new Fn(i);this.textures=[];const o=n.count;for(let e=0;e<o;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:ge,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let e=0;e<this.textures.length;e++){this.textures[e].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new Pn(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jn extends Hn{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Vn extends Fn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=pe,this.minFilter=pe,this.wrapR=ue,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Yn extends Fn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=pe,this.minFilter=pe,this.wrapR=ue,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gn{constructor(e=new pn(1/0,1/0,1/0),t=new pn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint($n.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint($n.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=$n.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,$n):$n.fromBufferAttribute(i,t),$n.applyMatrix4(e.matrixWorld),this.expandByPoint($n);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),qn.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),qn.copy(n.boundingBox)),qn.applyMatrix4(e.matrixWorld),this.union(qn)}const i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,$n),$n.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ti),ni.subVectors(this.max,ti),Wn.subVectors(e.a,ti),Kn.subVectors(e.b,ti),Zn.subVectors(e.c,ti),Xn.subVectors(Kn,Wn),Jn.subVectors(Zn,Kn),ei.subVectors(Wn,Zn);let t=[0,-Xn.z,Xn.y,0,-Jn.z,Jn.y,0,-ei.z,ei.y,Xn.z,0,-Xn.x,Jn.z,0,-Jn.x,ei.z,0,-ei.x,-Xn.y,Xn.x,0,-Jn.y,Jn.x,0,-ei.y,ei.x,0];return!!oi(t,Wn,Kn,Zn,ni)&&(t=[1,0,0,0,1,0,0,0,1],!!oi(t,Wn,Kn,Zn,ni)&&(ii.crossVectors(Xn,Jn),t=[ii.x,ii.y,ii.z],oi(t,Wn,Kn,Zn,ni)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$n).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize($n).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Qn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qn)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Qn=[new pn,new pn,new pn,new pn,new pn,new pn,new pn,new pn],$n=new pn,qn=new Gn,Wn=new pn,Kn=new pn,Zn=new pn,Xn=new pn,Jn=new pn,ei=new pn,ti=new pn,ni=new pn,ii=new pn,ri=new pn;function oi(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){ri.fromArray(e,o);const s=r.x*Math.abs(ri.x)+r.y*Math.abs(ri.y)+r.z*Math.abs(ri.z),a=t.dot(ri),l=n.dot(ri),c=i.dot(ri);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const si=new Gn,ai=new pn,li=new pn;class ci{constructor(e=new pn,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):si.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ai.subVectors(e,this.center);const t=ai.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ai,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(li.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ai.copy(e.center).add(li)),this.expandByPoint(ai.copy(e.center).sub(li))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const di=new pn,ui=new pn,hi=new pn,pi=new pn,mi=new pn,fi=new pn,gi=new pn;class vi{constructor(e=new pn,t=new pn(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,di)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=di.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(di.copy(this.origin).addScaledVector(this.direction,t),di.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){ui.copy(e).add(t).multiplyScalar(.5),hi.copy(t).sub(e).normalize(),pi.copy(this.origin).sub(ui);const r=.5*e.distanceTo(t),o=-this.direction.dot(hi),s=pi.dot(this.direction),a=-pi.dot(hi),l=pi.lengthSq(),c=Math.abs(1-o*o);let d,u,h,p;if(c>0)if(d=o*a-s,u=o*s-a,p=r*c,d>=0)if(u>=-p)if(u<=p){const e=1/c;d*=e,u*=e,h=d*(d+o*u+2*s)+u*(o*d+u+2*a)+l}else u=r,d=Math.max(0,-(o*u+s)),h=-d*d+u*(u+2*a)+l;else u=-r,d=Math.max(0,-(o*u+s)),h=-d*d+u*(u+2*a)+l;else u<=-p?(d=Math.max(0,-(-o*r+s)),u=d>0?-r:Math.min(Math.max(-r,-a),r),h=-d*d+u*(u+2*a)+l):u<=p?(d=0,u=Math.min(Math.max(-r,-a),r),h=u*(u+2*a)+l):(d=Math.max(0,-(o*r+s)),u=d>0?r:Math.min(Math.max(-r,-a),r),h=-d*d+u*(u+2*a)+l);else u=o>0?-r:r,d=Math.max(0,-(o*u+s)),h=-d*d+u*(u+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(ui).addScaledVector(hi,u),h}intersectSphere(e,t){di.subVectors(e.center,this.origin);const n=di.dot(this.direction),i=di.dot(di)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(r=(e.min.y-u.y)*c,o=(e.max.y-u.y)*c):(r=(e.max.y-u.y)*c,o=(e.min.y-u.y)*c),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),d>=0?(s=(e.min.z-u.z)*d,a=(e.max.z-u.z)*d):(s=(e.max.z-u.z)*d,a=(e.min.z-u.z)*d),n>a||s>i?null:((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,di)}intersectTriangle(e,t,n,i,r){mi.subVectors(t,e),fi.subVectors(n,e),gi.crossVectors(mi,fi);let o,s=this.direction.dot(gi);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}pi.subVectors(this.origin,e);const a=o*this.direction.dot(fi.crossVectors(pi,fi));if(a<0)return null;const l=o*this.direction.dot(mi.cross(pi));if(l<0)return null;if(a+l>s)return null;const c=-o*pi.dot(gi);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class yi{constructor(e,t,n,i,r,o,s,a,l,c,d,u,h,p,m,f){yi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l,c,d,u,h,p,m,f)}set(e,t,n,i,r,o,s,a,l,c,d,u,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new yi).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/bi.setFromMatrixColumn(e,0).length(),r=1/bi.setFromMatrixColumn(e,1).length(),o=1/bi.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){const e=o*c,n=o*d,i=s*c,r=s*d;t[0]=a*c,t[4]=-a*d,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*d,i=l*c,r=l*d;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*l,t[1]=o*d,t[5]=o*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*d,i=l*c,r=l*d;t[0]=e-r*s,t[4]=-o*d,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*c,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*d,i=s*c,r=s*d;t[0]=a*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=a*d,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=r-e*d,t[8]=i*d+n,t[1]=d,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*d+i,t[10]=e-r*d}else if("XZY"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*c,t[4]=-d,t[8]=l*c,t[1]=e*d+r,t[5]=o*c,t[9]=n*d-i,t[2]=i*d-n,t[6]=s*c,t[10]=r*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_i,e,wi)}lookAt(e,t,n){const i=this.elements;return Ei.subVectors(e,t),0===Ei.lengthSq()&&(Ei.z=1),Ei.normalize(),xi.crossVectors(n,Ei),0===xi.lengthSq()&&(1===Math.abs(n.z)?Ei.x+=1e-4:Ei.z+=1e-4,Ei.normalize(),xi.crossVectors(n,Ei)),xi.normalize(),Ci.crossVectors(Ei,xi),i[0]=xi.x,i[4]=Ci.x,i[8]=Ei.x,i[1]=xi.y,i[5]=Ci.y,i[9]=Ei.y,i[2]=xi.z,i[6]=Ci.z,i[10]=Ei.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],y=n[7],b=n[11],A=n[15],_=i[0],w=i[4],x=i[8],C=i[12],E=i[1],M=i[5],S=i[9],T=i[13],k=i[2],L=i[6],D=i[10],I=i[14],R=i[3],O=i[7],P=i[11],B=i[15];return r[0]=o*_+s*E+a*k+l*R,r[4]=o*w+s*M+a*L+l*O,r[8]=o*x+s*S+a*D+l*P,r[12]=o*C+s*T+a*I+l*B,r[1]=c*_+d*E+u*k+h*R,r[5]=c*w+d*M+u*L+h*O,r[9]=c*x+d*S+u*D+h*P,r[13]=c*C+d*T+u*I+h*B,r[2]=p*_+m*E+f*k+g*R,r[6]=p*w+m*M+f*L+g*O,r[10]=p*x+m*S+f*D+g*P,r[14]=p*C+m*T+f*I+g*B,r[3]=v*_+y*E+b*k+A*R,r[7]=v*w+y*M+b*L+A*O,r[11]=v*x+y*S+b*D+A*P,r[15]=v*C+y*T+b*I+A*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+r*a*d-i*l*d-r*s*u+n*l*u+i*s*h-n*a*h)+e[7]*(+t*a*h-t*l*u+r*o*u-i*o*h+i*l*c-r*a*c)+e[11]*(+t*l*d-t*s*h-r*o*d+n*o*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*a*d+t*s*u+i*o*d-n*o*u+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=d*f*l-m*u*l+m*a*h-s*f*h-d*a*g+s*u*g,y=p*u*l-c*f*l-p*a*h+o*f*h+c*a*g-o*u*g,b=c*m*l-p*d*l+p*s*h-o*m*h-c*s*g+o*d*g,A=p*d*a-c*m*a-p*s*u+o*m*u+c*s*f-o*d*f,_=t*v+n*y+i*b+r*A;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(m*u*r-d*f*r-m*i*h+n*f*h+d*i*g-n*u*g)*w,e[2]=(s*f*r-m*a*r+m*i*l-n*f*l-s*i*g+n*a*g)*w,e[3]=(d*a*r-s*u*r-d*i*l+n*u*l+s*i*h-n*a*h)*w,e[4]=y*w,e[5]=(c*f*r-p*u*r+p*i*h-t*f*h-c*i*g+t*u*g)*w,e[6]=(p*a*r-o*f*r-p*i*l+t*f*l+o*i*g-t*a*g)*w,e[7]=(o*u*r-c*a*r+c*i*l-t*u*l-o*i*h+t*a*h)*w,e[8]=b*w,e[9]=(p*d*r-c*m*r-p*n*h+t*m*h+c*n*g-t*d*g)*w,e[10]=(o*m*r-p*s*r+p*n*l-t*m*l-o*n*g+t*s*g)*w,e[11]=(c*s*r-o*d*r-c*n*l+t*d*l+o*n*h-t*s*h)*w,e[12]=A*w,e[13]=(c*m*i-p*d*i+p*n*u-t*m*u-c*n*f+t*d*f)*w,e[14]=(p*s*i-o*m*i-p*n*a+t*m*a+o*n*f-t*s*f)*w,e[15]=(o*d*i-c*s*i+c*n*a-t*d*a-o*n*u+t*s*u)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,c=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,c*s+n,c*a-i*o,0,l*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,c=o+o,d=s+s,u=r*l,h=r*c,p=r*d,m=o*c,f=o*d,g=s*d,v=a*l,y=a*c,b=a*d,A=n.x,_=n.y,w=n.z;return i[0]=(1-(m+g))*A,i[1]=(h+b)*A,i[2]=(p-y)*A,i[3]=0,i[4]=(h-b)*_,i[5]=(1-(u+g))*_,i[6]=(f+v)*_,i[7]=0,i[8]=(p+y)*w,i[9]=(f-v)*w,i[10]=(1-(u+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=bi.set(i[0],i[1],i[2]).length();const o=bi.set(i[4],i[5],i[6]).length(),s=bi.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Ai.copy(this);const a=1/r,l=1/o,c=1/s;return Ai.elements[0]*=a,Ai.elements[1]*=a,Ai.elements[2]*=a,Ai.elements[4]*=l,Ai.elements[5]*=l,Ai.elements[6]*=l,Ai.elements[8]*=c,Ai.elements[9]*=c,Ai.elements[10]*=c,t.setFromRotationMatrix(Ai),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o,s=Kt){const a=this.elements,l=2*r/(t-e),c=2*r/(n-i),d=(t+e)/(t-e),u=(n+i)/(n-i);let h,p;if(s===Kt)h=-(o+r)/(o-r),p=-2*o*r/(o-r);else{if(s!==Zt)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-o/(o-r),p=-o*r/(o-r)}return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,o,s=Kt){const a=this.elements,l=1/(t-e),c=1/(n-i),d=1/(o-r),u=(t+e)*l,h=(n+i)*c;let p,m;if(s===Kt)p=(o+r)*d,m=-2*d;else{if(s!==Zt)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=r*d,m=-1*d}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=m,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const bi=new pn,Ai=new yi,_i=new pn(0,0,0),wi=new pn(1,1,1),xi=new pn,Ci=new pn,Ei=new pn,Mi=new yi,Si=new hn;class Ti{constructor(e=0,t=0,n=0,i=Ti.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],l=i[5],c=i[9],d=i[2],u=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(on(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-on(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(on(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-on(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(on(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-on(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Mi.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mi,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Si.setFromEuler(this),this.setFromQuaternion(Si,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ti.DEFAULT_ORDER="XYZ";class ki{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let Li=0;const Di=new pn,Ii=new hn,Ri=new yi,Oi=new pn,Pi=new pn,Bi=new pn,Ni=new hn,Ui=new pn(1,0,0),Fi=new pn(0,1,0),zi=new pn(0,0,1),Hi={type:"added"},ji={type:"removed"},Vi={type:"childadded",child:null},Yi={type:"childremoved",child:null};class Gi extends Xt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Li++}),this.uuid=rn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gi.DEFAULT_UP.clone();const e=new pn,t=new Ti,n=new hn,i=new pn(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new yi},normalMatrix:{value:new gn}}),this.matrix=new yi,this.matrixWorld=new yi,this.matrixAutoUpdate=Gi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ki,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ii.setFromAxisAngle(e,t),this.quaternion.multiply(Ii),this}rotateOnWorldAxis(e,t){return Ii.setFromAxisAngle(e,t),this.quaternion.premultiply(Ii),this}rotateX(e){return this.rotateOnAxis(Ui,e)}rotateY(e){return this.rotateOnAxis(Fi,e)}rotateZ(e){return this.rotateOnAxis(zi,e)}translateOnAxis(e,t){return Di.copy(e).applyQuaternion(this.quaternion),this.position.add(Di.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ui,e)}translateY(e){return this.translateOnAxis(Fi,e)}translateZ(e){return this.translateOnAxis(zi,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ri.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Oi.copy(e):Oi.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Pi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ri.lookAt(Pi,Oi,this.up):Ri.lookAt(Oi,Pi,this.up),this.quaternion.setFromRotationMatrix(Ri),i&&(Ri.extractRotation(i.matrixWorld),Ii.setFromRotationMatrix(Ri),this.quaternion.premultiply(Ii.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Hi),Vi.child=e,this.dispatchEvent(Vi),Vi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ji),Yi.child=e,this.dispatchEvent(Yi),Yi.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ri.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ri.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ri),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Hi),Vi.child=e,this.dispatchEvent(Vi),Vi.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pi,e,Bi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pi,Ni,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(e=>({...e})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),d=o(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),d.length>0&&(n.nodes=d)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Gi.DEFAULT_UP=new pn(0,1,0),Gi.DEFAULT_MATRIX_AUTO_UPDATE=!0,Gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qi=new pn,$i=new pn,qi=new pn,Wi=new pn,Ki=new pn,Zi=new pn,Xi=new pn,Ji=new pn,er=new pn,tr=new pn,nr=new zn,ir=new zn,rr=new zn;class or{constructor(e=new pn,t=new pn,n=new pn){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Qi.subVectors(e,t),i.cross(Qi);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){Qi.subVectors(i,t),$i.subVectors(n,t),qi.subVectors(e,t);const o=Qi.dot(Qi),s=Qi.dot($i),a=Qi.dot(qi),l=$i.dot($i),c=$i.dot(qi),d=o*l-s*s;if(0===d)return r.set(0,0,0),null;const u=1/d,h=(l*a-s*c)*u,p=(o*c-s*a)*u;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,Wi)&&(Wi.x>=0&&Wi.y>=0&&Wi.x+Wi.y<=1)}static getInterpolation(e,t,n,i,r,o,s,a){return null===this.getBarycoord(e,t,n,i,Wi)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,Wi.x),a.addScaledVector(o,Wi.y),a.addScaledVector(s,Wi.z),a)}static getInterpolatedAttribute(e,t,n,i,r,o){return nr.setScalar(0),ir.setScalar(0),rr.setScalar(0),nr.fromBufferAttribute(e,t),ir.fromBufferAttribute(e,n),rr.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(nr,r.x),o.addScaledVector(ir,r.y),o.addScaledVector(rr,r.z),o}static isFrontFacing(e,t,n,i){return Qi.subVectors(n,t),$i.subVectors(e,t),Qi.cross($i).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qi.subVectors(this.c,this.b),$i.subVectors(this.a,this.b),.5*Qi.cross($i).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return or.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return or.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return or.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return or.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return or.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,s;Ki.subVectors(i,n),Zi.subVectors(r,n),Ji.subVectors(e,n);const a=Ki.dot(Ji),l=Zi.dot(Ji);if(a<=0&&l<=0)return t.copy(n);er.subVectors(e,i);const c=Ki.dot(er),d=Zi.dot(er);if(c>=0&&d<=c)return t.copy(i);const u=a*d-c*l;if(u<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(Ki,o);tr.subVectors(e,r);const h=Ki.dot(tr),p=Zi.dot(tr);if(p>=0&&h<=p)return t.copy(r);const m=h*l-a*p;if(m<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(Zi,s);const f=c*p-h*d;if(f<=0&&d-c>=0&&h-p>=0)return Xi.subVectors(r,i),s=(d-c)/(d-c+(h-p)),t.copy(i).addScaledVector(Xi,s);const g=1/(f+m+u);return o=m*g,s=u*g,t.copy(n).addScaledVector(Ki,o).addScaledVector(Zi,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ar={h:0,s:0,l:0},lr={h:0,s:0,l:0};function cr(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class dr{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Pt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,kn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=kn.workingColorSpace){return this.r=e,this.g=t,this.b=n,kn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=kn.workingColorSpace){if(e=sn(e,1),t=on(t,0,1),n=on(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=cr(r,i,e+1/3),this.g=cr(r,i,e),this.b=cr(r,i,e-1/3)}return kn.colorSpaceToWorking(this,i),this}setStyle(e,t=Pt){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Pt){const n=sr[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ln(e.r),this.g=Ln(e.g),this.b=Ln(e.b),this}copyLinearToSRGB(e){return this.r=Dn(e.r),this.g=Dn(e.g),this.b=Dn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pt){return kn.workingToColorSpace(ur.copy(this),e),65536*Math.round(on(255*ur.r,0,255))+256*Math.round(on(255*ur.g,0,255))+Math.round(on(255*ur.b,0,255))}getHexString(e=Pt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=kn.workingColorSpace){kn.workingToColorSpace(ur.copy(this),t);const n=ur.r,i=ur.g,r=ur.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case n:a=(i-r)/e+(i<r?6:0);break;case i:a=(r-n)/e+2;break;case r:a=(n-i)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=kn.workingColorSpace){return kn.workingToColorSpace(ur.copy(this),t),e.r=ur.r,e.g=ur.g,e.b=ur.b,e}getStyle(e=Pt){kn.workingToColorSpace(ur.copy(this),e);const t=ur.r,n=ur.g,i=ur.b;return e!==Pt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(ar),this.setHSL(ar.h+e,ar.s+t,ar.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ar),e.getHSL(lr);const n=an(ar.h,lr.h,t),i=an(ar.s,lr.s,t),r=an(ar.l,lr.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ur=new dr;dr.NAMES=sr;let hr=0;class pr extends Xt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:hr++}),this.uuid=rn(),this.name="",this.type="Material",this.blending=m,this.side=d,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=T,this.blendDst=k,this.blendEquation=b,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new dr(0,0,0),this.blendAlpha=0,this.depthFunc=j,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ft,this.stencilZFail=Ft,this.stencilZPass=Ft,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==m&&(n.blending=this.blending),this.side!==d&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==T&&(n.blendSrc=this.blendSrc),this.blendDst!==k&&(n.blendDst=this.blendDst),this.blendEquation!==b&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==j&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ft&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ft&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ft&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class mr extends pr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new dr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const fr=gr();function gr(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(i[e]=0,i[256|e]=32768,r[e]=24,r[256|e]=24):t<-14?(i[e]=1024>>-t-14,i[256|e]=1024>>-t-14|32768,r[e]=-t-1,r[256|e]=-t-1):t<=15?(i[e]=t+15<<10,i[256|e]=t+15<<10|32768,r[e]=13,r[256|e]=13):t<128?(i[e]=31744,i[256|e]=64512,r[e]=24,r[256|e]=24):(i[e]=31744,i[256|e]=64512,r[e]=13,r[256|e]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,o[e]=t|n}for(let e=1024;e<2048;++e)o[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=1199570944,s[32]=2147483648;for(let e=33;e<63;++e)s[e]=2147483648+(e-32<<23);s[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(a[e]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function vr(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=on(e,-65504,65504),fr.floatView[0]=e;const t=fr.uint32View[0],n=t>>23&511;return fr.baseTable[n]+((8388607&t)>>fr.shiftTable[n])}function yr(e){const t=e>>10;return fr.uint32View[0]=fr.mantissaTable[fr.offsetTable[t]+(1023&e)]+fr.exponentTable[t],fr.floatView[0]}class br{static toHalfFloat(e){return vr(e)}static fromHalfFloat(e){return yr(e)}}const Ar=new pn,_r=new un;let wr=0;class xr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:wr++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=qt,this.updateRanges=[],this.gpuType=Ee,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)_r.fromBufferAttribute(this,t),_r.applyMatrix3(e),this.setXY(t,_r.x,_r.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.applyMatrix3(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.applyMatrix4(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.applyNormalMatrix(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ar.fromBufferAttribute(this,t),Ar.transformDirection(e),this.setXYZ(t,Ar.x,Ar.y,Ar.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ln(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ln(t,this.array)),t}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ln(t,this.array)),t}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ln(t,this.array)),t}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ln(t,this.array)),t}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),i=cn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),i=cn(i,this.array),r=cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==qt&&(e.usage=this.usage),e}}class Cr extends xr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Er extends xr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Mr extends xr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Sr=0;const Tr=new yi,kr=new Gi,Lr=new pn,Dr=new Gn,Ir=new Gn,Rr=new pn;class Or extends Xt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sr++}),this.uuid=rn(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yn(e)?Er:Cr)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new gn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Tr.makeRotationFromQuaternion(e),this.applyMatrix4(Tr),this}rotateX(e){return Tr.makeRotationX(e),this.applyMatrix4(Tr),this}rotateY(e){return Tr.makeRotationY(e),this.applyMatrix4(Tr),this}rotateZ(e){return Tr.makeRotationZ(e),this.applyMatrix4(Tr),this}translate(e,t,n){return Tr.makeTranslation(e,t,n),this.applyMatrix4(Tr),this}scale(e,t,n){return Tr.makeScale(e,t,n),this.applyMatrix4(Tr),this}lookAt(e){return kr.lookAt(e),kr.updateMatrix(),this.applyMatrix4(kr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lr).negate(),this.translate(Lr.x,Lr.y,Lr.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new Mr(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Gn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new pn(-1/0,-1/0,-1/0),new pn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Dr.setFromBufferAttribute(n),this.morphTargetsRelative?(Rr.addVectors(this.boundingBox.min,Dr.min),this.boundingBox.expandByPoint(Rr),Rr.addVectors(this.boundingBox.max,Dr.max),this.boundingBox.expandByPoint(Rr)):(this.boundingBox.expandByPoint(Dr.min),this.boundingBox.expandByPoint(Dr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ci);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new pn,1/0);if(e){const n=this.boundingSphere.center;if(Dr.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ir.setFromBufferAttribute(n),this.morphTargetsRelative?(Rr.addVectors(Dr.min,Ir.min),Dr.expandByPoint(Rr),Rr.addVectors(Dr.max,Ir.max),Dr.expandByPoint(Rr)):(Dr.expandByPoint(Ir.min),Dr.expandByPoint(Ir.max))}Dr.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Rr.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Rr));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)Rr.fromBufferAttribute(o,t),s&&(Lr.fromBufferAttribute(e,t),Rr.add(Lr)),i=Math.max(i,n.distanceToSquared(Rr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new xr(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let e=0;e<n.count;e++)s[e]=new pn,a[e]=new pn;const l=new pn,c=new pn,d=new pn,u=new un,h=new un,p=new un,m=new pn,f=new pn;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),d.fromBufferAttribute(n,i),u.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),d.sub(l),h.sub(u),p.sub(u);const o=1/(h.x*p.y-p.x*h.y);isFinite(o)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(o),f.copy(d).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(o),s[e].add(m),s[t].add(m),s[i].add(m),a[e].add(f),a[t].add(f),a[i].add(f))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let t=0,n=v.length;t<n;++t){const n=v[t],i=n.start;for(let t=i,r=i+n.count;t<r;t+=3)g(e.getX(t+0),e.getX(t+1),e.getX(t+2))}const y=new pn,b=new pn,A=new pn,_=new pn;function w(e){A.fromBufferAttribute(i,e),_.copy(A);const t=s[e];y.copy(t),y.sub(A.multiplyScalar(A.dot(t))).normalize(),b.crossVectors(_,t);const n=b.dot(a[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let t=0,n=v.length;t<n;++t){const n=v[t],i=n.start;for(let t=i,r=i+n.count;t<r;t+=3)w(e.getX(t+0)),w(e.getX(t+1)),w(e.getX(t+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new xr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new pn,r=new pn,o=new pn,s=new pn,a=new pn,l=new pn,c=new pn,d=new pn;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),p=e.getX(u+1),m=e.getX(u+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),s.add(c),a.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,r),d.subVectors(i,r),c.cross(d),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Rr.fromBufferAttribute(e,t),Rr.normalize(),e.setXYZ(t,Rr.x,Rr.y,Rr.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let s=0,a=0;for(let r=0,l=t.length;r<l;r++){s=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)o[a++]=n[s++]}return new xr(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Or,n=this.index.array,i=this.attributes;for(const r in i){const o=e(i[r],n);t.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],s=r[i];for(let t=0,i=s.length;t<i;t++){const i=e(s[t],n);o.push(i)}t.morphAttributes[i]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];o.push(i.toJSON(e.data))}o.length>0&&(i[t]=o,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere=s.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pr=new yi,Br=new vi,Nr=new ci,Ur=new pn,Fr=new pn,zr=new pn,Hr=new pn,jr=new pn,Vr=new pn,Yr=new pn,Gr=new pn;class Qr extends Gi{constructor(e=new Or,t=new mr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){Vr.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],a=r[n];0!==i&&(jr.fromBufferAttribute(a,e),o?Vr.addScaledVector(jr,i):Vr.addScaledVector(jr.sub(t),i))}t.add(Vr)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Nr.copy(n.boundingSphere),Nr.applyMatrix4(r),Br.copy(e.ray).recast(e.near),!1===Nr.containsPoint(Br.origin)){if(null===Br.intersectSphere(Nr,Ur))return;if(Br.origin.distanceToSquared(Ur)>(e.far-e.near)**2)return}Pr.copy(r).invert(),Br.copy(e.ray).applyMatrix4(Pr),null!==n.boundingBox&&!1===Br.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Br)}}_computeIntersections(e,t,n){let i;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,d=r.attributes.normal,u=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(o))for(let r=0,a=u.length;r<a;r++){const a=u[r],p=o[a.materialIndex];for(let r=Math.max(a.start,h.start),o=Math.min(s.count,Math.min(a.start+a.count,h.start+h.count));r<o;r+=3){i=$r(this,p,e,n,l,c,d,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=a.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);r<a;r+=3){i=$r(this,o,e,n,l,c,d,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==a)if(Array.isArray(o))for(let r=0,s=u.length;r<s;r++){const s=u[r],p=o[s.materialIndex];for(let r=Math.max(s.start,h.start),o=Math.min(a.count,Math.min(s.start+s.count,h.start+h.count));r<o;r+=3){i=$r(this,p,e,n,l,c,d,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=s.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);r<s;r+=3){i=$r(this,o,e,n,l,c,d,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function $r(e,t,n,i,r,o,s,a,l,c){e.getVertexPosition(a,Fr),e.getVertexPosition(l,zr),e.getVertexPosition(c,Hr);const h=function(e,t,n,i,r,o,s,a){let l;if(l=t.side===u?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side===d,a),null===l)return null;Gr.copy(a),Gr.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Gr);return c<n.near||c>n.far?null:{distance:c,point:Gr.clone(),object:e}}(e,t,n,i,Fr,zr,Hr,Yr);if(h){const e=new pn;or.getBarycoord(Yr,Fr,zr,Hr,e),r&&(h.uv=or.getInterpolatedAttribute(r,a,l,c,e,new un)),o&&(h.uv1=or.getInterpolatedAttribute(o,a,l,c,e,new un)),s&&(h.normal=or.getInterpolatedAttribute(s,a,l,c,e,new pn),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const t={a,b:l,c,normal:new pn,materialIndex:0};or.getNormal(Fr,zr,Hr,t.normal),h.face=t,h.barycoord=e}return h}class qr extends Or{constructor(e=1,t=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const a=[],l=[],c=[],d=[];let u=0,h=0;function p(e,t,n,i,r,o,p,m,f,g,v){const y=o/f,b=p/g,A=o/2,_=p/2,w=m/2,x=f+1,C=g+1;let E=0,M=0;const S=new pn;for(let o=0;o<C;o++){const s=o*b-_;for(let a=0;a<x;a++){const u=a*y-A;S[e]=u*i,S[t]=s*r,S[n]=w,l.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=m>0?1:-1,c.push(S.x,S.y,S.z),d.push(a/f),d.push(1-o/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<f;t++){const n=u+t+x*e,i=u+t+x*(e+1),r=u+(t+1)+x*(e+1),o=u+(t+1)+x*e;a.push(n,i,o),a.push(i,r,o),M+=6}s.addGroup(h,M,v),h+=M,u+=E}p("z","y","x",-1,-1,n,t,e,o,r,0),p("z","y","x",1,-1,n,t,-e,o,r,1),p("x","z","y",1,1,e,n,t,i,o,2),p("x","z","y",1,-1,e,n,-t,i,o,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Mr(l,3)),this.setAttribute("normal",new Mr(c,3)),this.setAttribute("uv",new Mr(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qr(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Wr(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Kr(e){const t={};for(let n=0;n<e.length;n++){const i=Wr(e[n]);for(const e in i)t[e]=i[e]}return t}function Zr(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:kn.workingColorSpace}const Xr={clone:Wr,merge:Kr};class Jr extends pr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Wr(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class eo extends Gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yi,this.projectionMatrix=new yi,this.projectionMatrixInverse=new yi,this.coordinateSystem=Kt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const to=new pn,no=new un,io=new un;class ro extends eo{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*nn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*tn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*nn*Math.atan(Math.tan(.5*tn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){to.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(to.x,to.y).multiplyScalar(-e/to.z),to.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(to.x,to.y).multiplyScalar(-e/to.z)}getViewSize(e,t){return this.getViewBounds(e,no,io),t.subVectors(io,no)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*tn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/s,i*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const oo=-90;class so extends Gi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ro(oo,1,e,t);i.layers=this.layers,this.add(i);const r=new ro(oo,1,e,t);r.layers=this.layers,this.add(r);const o=new ro(oo,1,e,t);o.layers=this.layers,this.add(o);const s=new ro(oo,1,e,t);s.layers=this.layers,this.add(s);const a=new ro(oo,1,e,t);a.layers=this.layers,this.add(a);const l=new ro(oo,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,o,s,a]=t;for(const e of t)this.remove(e);if(e===Kt)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==Zt)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,l,c]=this.children,d=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,a),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(d,u,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class ao extends Fn{constructor(e=[],t=oe,n,i,r,o,s,a,l,c){super(e,t,n,i,r,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lo extends jn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new ao(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new qr(5,5,5),r=new Jr({name:"CubemapFromEquirect",uniforms:Wr(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:u,blending:p});r.uniforms.tEquirect.value=t;const o=new Qr(i,r),s=t.minFilter;t.minFilter===ye&&(t.minFilter=ge);return new so(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}class co extends Gi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uo={type:"move"};class ho{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new co,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new co,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new co,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pn),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(uo)))}return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new co;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class po extends Gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ti,this.environmentIntensity=1,this.environmentRotation=new Ti,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class mo{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=qt,this.updateRanges=[],this.version=0,this.uuid=rn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=rn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fo=new pn;class go{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.applyMatrix4(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.applyNormalMatrix(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.transformDirection(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ln(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ln(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ln(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ln(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ln(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),i=cn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=cn(t,this.array),n=cn(n,this.array),i=cn(i,this.array),r=cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new xr(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new go(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const vo=new pn,yo=new zn,bo=new zn,Ao=new pn,_o=new yi,wo=new pn,xo=new ci,Co=new yi,Eo=new vi;class Mo extends Qr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=re,this.bindMatrix=new yi,this.bindMatrixInverse=new yi,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Gn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,wo),this.boundingBox.expandByPoint(wo)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ci),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,wo),this.boundingSphere.expandByPoint(wo)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),xo.copy(this.boundingSphere),xo.applyMatrix4(i),!1!==e.ray.intersectsSphere(xo)&&(Co.copy(i).invert(),Eo.copy(e.ray).applyMatrix4(Co),null!==this.boundingBox&&!1===Eo.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Eo)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new zn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===re?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;yo.fromBufferAttribute(i.attributes.skinIndex,e),bo.fromBufferAttribute(i.attributes.skinWeight,e),vo.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const i=bo.getComponent(e);if(0!==i){const r=yo.getComponent(e);_o.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Ao.copy(vo).applyMatrix4(_o),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}class So extends Gi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class To extends Fn{constructor(e=null,t=1,n=1,i,r,o,s,a,l=pe,c=pe,d,u){super(null,o,s,a,l,c,i,r,d,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ko=new yi,Lo=new yi;class Do{constructor(e=[],t=[]){this.uuid=rn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new yi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new yi;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=e.length;i<r;i++){const r=e[i]?e[i].matrixWorld:Lo;ko.multiplyMatrices(r,t[i]),ko.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Do(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new To(t,e,e,Re,Ee);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new So),this.bones.push(r),this.boneInverses.push((new yi).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Io extends xr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ro=new yi,Oo=new yi,Po=[],Bo=new Gn,No=new yi,Uo=new Qr,Fo=new ci;class zo extends Qr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Io(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,No)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Gn),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ro),Bo.copy(e.boundingBox).applyMatrix4(Ro),this.boundingBox.union(Bo)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new ci),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ro),Fo.copy(e.boundingSphere).applyMatrix4(Ro),this.boundingSphere.union(Fo)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=i[r+e]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Uo.geometry=this.geometry,Uo.material=this.material,void 0!==Uo.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Fo.copy(this.boundingSphere),Fo.applyMatrix4(n),!1!==e.ray.intersectsSphere(Fo)))for(let r=0;r<i;r++){this.getMatrixAt(r,Ro),Oo.multiplyMatrices(n,Ro),Uo.matrixWorld=Oo,Uo.raycast(e,Po);for(let e=0,n=Po.length;e<n;e++){const n=Po[e];n.instanceId=r,n.object=this,t.push(n)}Po.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Io(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;null===this.morphTexture&&(this.morphTexture=new To(new Float32Array(i*this.count),i,this.count,Be,Ee));const r=this.morphTexture.source.data.data;let o=0;for(let e=0;e<n.length;e++)o+=n[e];const s=this.geometry.morphTargetsRelative?1:1-o,a=i*e;r[a]=s,r.set(n,a+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Ho=new pn,jo=new pn,Vo=new gn;class Yo{constructor(e=new pn(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Ho.subVectors(n,t).cross(jo.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Ho),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Vo.getNormalMatrix(e),i=this.coplanarPoint(Ho).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Go=new ci,Qo=new pn;class $o{constructor(e=new Yo,t=new Yo,n=new Yo,i=new Yo,r=new Yo,o=new Yo){this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Kt){const n=this.planes,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],d=i[6],u=i[7],h=i[8],p=i[9],m=i[10],f=i[11],g=i[12],v=i[13],y=i[14],b=i[15];if(n[0].setComponents(a-r,u-l,f-h,b-g).normalize(),n[1].setComponents(a+r,u+l,f+h,b+g).normalize(),n[2].setComponents(a+o,u+c,f+p,b+v).normalize(),n[3].setComponents(a-o,u-c,f-p,b-v).normalize(),n[4].setComponents(a-s,u-d,f-m,b-y).normalize(),t===Kt)n[5].setComponents(a+s,u+d,f+m,b+y).normalize();else{if(t!==Zt)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,d,m,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Go.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Go.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Go)}intersectsSprite(e){return Go.center.set(0,0,0),Go.radius=.7071067811865476,Go.applyMatrix4(e.matrixWorld),this.intersectsSphere(Go)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Qo.x=i.normal.x>0?e.max.x:e.min.x,Qo.y=i.normal.y>0?e.max.y:e.min.y,Qo.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Qo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class qo extends pr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new dr(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Wo=new pn,Ko=new pn,Zo=new yi,Xo=new vi,Jo=new ci,es=new pn,ts=new pn;class ns extends Gi{constructor(e=new Or,t=new qo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Wo.fromBufferAttribute(t,e-1),Ko.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Wo.distanceTo(Ko);e.setAttribute("lineDistance",new Mr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jo.copy(n.boundingSphere),Jo.applyMatrix4(i),Jo.radius+=r,!1===e.ray.intersectsSphere(Jo))return;Zo.copy(i).invert(),Xo.copy(e.ray).applyMatrix4(Zo);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=this.isLineSegments?2:1,c=n.index,d=n.attributes.position;if(null!==c){const n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=c.getX(r),i=c.getX(r+1),o=is(this,e,Xo,a,n,i,r);o&&t.push(o)}if(this.isLineLoop){const r=c.getX(i-1),o=c.getX(n),s=is(this,e,Xo,a,r,o,i-1);s&&t.push(s)}}else{const n=Math.max(0,o.start),i=Math.min(d.count,o.start+o.count);for(let r=n,o=i-1;r<o;r+=l){const n=is(this,e,Xo,a,r,r+1,r);n&&t.push(n)}if(this.isLineLoop){const r=is(this,e,Xo,a,i-1,n,i-1);r&&t.push(r)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function is(e,t,n,i,r,o,s){const a=e.geometry.attributes.position;Wo.fromBufferAttribute(a,r),Ko.fromBufferAttribute(a,o);if(n.distanceSqToSegment(Wo,Ko,es,ts)>i)return;es.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(es);return l<t.near||l>t.far?void 0:{distance:l,point:ts.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}const rs=new pn,os=new pn;class ss extends ns{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)rs.fromBufferAttribute(t,e),os.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+rs.distanceTo(os);e.setAttribute("lineDistance",new Mr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class as extends ns{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ls extends pr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new dr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const cs=new yi,ds=new vi,us=new ci,hs=new pn;class ps extends Gi{constructor(e=new Or,t=new ls){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),us.copy(n.boundingSphere),us.applyMatrix4(i),us.radius+=r,!1===e.ray.intersectsSphere(us))return;cs.copy(i).invert(),ds.copy(e.ray).applyMatrix4(cs);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);n<r;n++){const r=l.getX(n);hs.fromBufferAttribute(c,r),ms(hs,r,a,i,e,t,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);n<r;n++)hs.fromBufferAttribute(c,n),ms(hs,n,a,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function ms(e,t,n,i,r,o,s){const a=ds.distanceSqToPoint(e);if(a<n){const n=new pn;ds.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class fs extends Fn{constructor(e,t,n,i,r,o,s,a,l,c,d,u){super(null,o,s,a,l,c,i,r,d,u),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class gs extends fs{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ue,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vs extends fs{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,oe),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class ys extends Fn{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bs extends Fn{constructor(e,t,n=Ce,i,r,o,s=pe,a=pe,l,c=Oe,d=1){if(c!==Oe&&c!==Pe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:d},i,r,o,s,a,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Pn(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class As extends Or{constructor(e=1,t=1,n=1,i=32,r=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],d=[],u=[],h=[];let p=0;const m=[],f=n/2;let g=0;function v(n){const r=p,o=new un,m=new pn;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=i;e++)d.push(0,f*b,0),u.push(0,b,0),h.push(.5,.5),p++;const A=p;for(let e=0;e<=i;e++){const t=e/i*a+s,n=Math.cos(t),r=Math.sin(t);m.x=y*r,m.y=f*b,m.z=y*n,d.push(m.x,m.y,m.z),u.push(0,b,0),o.x=.5*n+.5,o.y=.5*r*b+.5,h.push(o.x,o.y),p++}for(let e=0;e<i;e++){const t=r+e,i=A+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new pn,v=new pn;let y=0;const b=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*a+s,l=Math.sin(r),m=Math.cos(r);v.x=y*l,v.y=-g*n+f,v.z=y*m,d.push(v.x,v.y,v.z),o.set(l,b,m).normalize(),u.push(o.x,o.y,o.z),h.push(t,1-g),c.push(p++)}m.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const o=m[i][n],s=m[i+1][n],a=m[i+1][n+1],l=m[i][n+1];(e>0||0!==i)&&(c.push(o,s,l),y+=3),(t>0||i!==r-1)&&(c.push(s,a,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Mr(d,3)),this.setAttribute("normal",new Mr(u,3)),this.setAttribute("uv",new Mr(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new As(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _s extends As{constructor(e=1,t=1,n=32,i=1,r=!1,o=0,s=2*Math.PI){super(0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}static fromJSON(e){return new _s(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ws{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let s,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),s=n[i]-o,s<0)a=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new un:new pn);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new pn,i=[],r=[],o=[],s=new pn,a=new yi;for(let t=0;t<=e;t++){const n=t/e;i[t]=this.getTangentAt(n,new pn)}r[0]=new pn,o[0]=new pn;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),u<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),o[t]=o[t-1].clone(),s.crossVectors(i[t-1],i[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(on(i[t-1].dot(i[t]),-1,1));r[t].applyMatrix4(a.makeRotationAxis(s,e))}o[t].crossVectors(i[t],r[t])}if(!0===t){let t=Math.acos(on(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class xs extends ws{constructor(e=0,t=0,n=1,i=1,r=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t=new un){const n=t,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function Cs(){let e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,c=(n-t)/s-(i-t)/(s+a)+(i-n)/a;l*=s,c*=s,r(t,n,l,c)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}const Es=new pn,Ms=new Cs,Ss=new Cs,Ts=new Cs;function ks(e,t,n,i,r){const o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function Ls(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Ds(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Is extends ws{constructor(e=new un,t=new un,n=new un,i=new un){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new un){const n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ds(e,i.x,r.x,o.x,s.x),Ds(e,i.y,r.y,o.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Rs extends ws{constructor(e=new un,t=new un){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new un){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new un){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Os extends ws{constructor(e=new un,t=new un,n=new un){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new un){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Ls(e,i.x,r.x,o.x),Ls(e,i.y,r.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ps extends ws{constructor(e=new pn,t=new pn,n=new pn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pn){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Ls(e,i.x,r.x,o.x),Ls(e,i.y,r.y,o.y),Ls(e,i.z,r.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bs extends ws{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new un){const n=t,i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return n.set(ks(s,a.x,l.x,c.x,d.x),ks(s,a.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new un).fromArray(n))}return this}}var Ns=Object.freeze({__proto__:null,ArcCurve:class extends xs{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends ws{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new pn){const n=t,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=i[(l-1)%r]:(Es.subVectors(i[0],i[1]).add(i[0]),s=Es);const d=i[l%r],u=i[(l+1)%r];if(this.closed||l+2<r?a=i[(l+2)%r]:(Es.subVectors(i[r-1],i[r-2]).add(i[r-1]),a=Es),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(d),e),n=Math.pow(d.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),Ms.initNonuniformCatmullRom(s.x,d.x,u.x,a.x,t,n,i),Ss.initNonuniformCatmullRom(s.y,d.y,u.y,a.y,t,n,i),Ts.initNonuniformCatmullRom(s.z,d.z,u.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(Ms.initCatmullRom(s.x,d.x,u.x,a.x,this.tension),Ss.initCatmullRom(s.y,d.y,u.y,a.y,this.tension),Ts.initCatmullRom(s.z,d.z,u.z,a.z,this.tension));return n.set(Ms.calc(c),Ss.calc(c),Ts.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new pn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Is,CubicBezierCurve3:class extends ws{constructor(e=new pn,t=new pn,n=new pn,i=new pn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new pn){const n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ds(e,i.x,r.x,o.x,s.x),Ds(e,i.y,r.y,o.y,s.y),Ds(e,i.z,r.z,o.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:xs,LineCurve:Rs,LineCurve3:class extends ws{constructor(e=new pn,t=new pn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new pn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pn){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Os,QuadraticBezierCurve3:Ps,SplineCurve:Bs});class Us extends ws{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Ns[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,o=this.curves[r],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const i=a[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Ns[n.type]).fromJSON(n))}return this}}class Fs extends Us{constructor(e){super(),this.type="Path",this.currentPoint=new un,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Rs(this.currentPoint.clone(),new un(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new Os(this.currentPoint.clone(),new un(e,t),new un(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const s=new Is(this.currentPoint.clone(),new un(e,t),new un(n,i),new un(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Bs(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,o,s,a),this}absellipse(e,t,n,i,r,o,s,a){const l=new xs(e,t,n,i,r,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class zs extends Fs{constructor(e){super(e),this.uuid=rn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Fs).fromJSON(n))}return this}}function Hs(e,t,n=2){const i=t&&t.length,r=i?t[0]*n:e.length;let o=js(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c;if(i&&(o=function(e,t,n,i){const r=[];for(let n=0,o=t.length;n<o;n++){const s=js(e,t[n]*i,n<o-1?t[n+1]*i:e.length,i,!1);s===s.next&&(s.steiner=!0),r.push(Js(s))}r.sort(Ws);for(let e=0;e<r.length;e++)n=Ks(r[e],n);return n}(e,t,o,n)),e.length>80*n){a=1/0,l=1/0;let t=-1/0,i=-1/0;for(let o=n;o<r;o+=n){const n=e[o],r=e[o+1];n<a&&(a=n),r<l&&(l=r),n>t&&(t=n),r>i&&(i=r)}c=Math.max(t-a,i-l),c=0!==c?32767/c:0}return Ys(o,s,n,a,l,c,0),s}function js(e,t,n,i,r){let o;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(let r=t;r<n;r+=i)o=da(r/i|0,e[r],e[r+1],o);else for(let r=n-i;r>=t;r-=i)o=da(r/i|0,e[r],e[r+1],o);return o&&ra(o,o.next)&&(ua(o),o=o.next),o}function Vs(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!ra(i,i.next)&&0!==ia(i.prev,i,i.next))i=i.next;else{if(ua(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Ys(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=Xs(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n=1;do{let i,r=e;e=null;let o=null;for(t=0;r;){t++;let s=r,a=0;for(let e=0;e<n&&(a++,s=s.nextZ,s);e++);let l=n;for(;a>0||l>0&&s;)0!==a&&(0===l||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(t>1)}(r)}(e,i,r,o);let a=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Qs(e,i,r,o):Gs(e))t.push(l.i,e.i,c.i),ua(e),e=c.next,a=c.next;else if((e=c)===a){s?1===s?Ys(e=$s(Vs(e),t),t,n,i,r,o,2):2===s&&qs(e,t,n,i,r,o):Ys(Vs(e),t,n,i,r,o,1);break}}}function Gs(e){const t=e.prev,n=e,i=e.next;if(ia(t,n,i)>=0)return!1;const r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,c=i.y,d=Math.min(r,o,s),u=Math.min(a,l,c),h=Math.max(r,o,s),p=Math.max(a,l,c);let m=i.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=p&&ta(r,a,o,l,s,c,m.x,m.y)&&ia(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Qs(e,t,n,i){const r=e.prev,o=e,s=e.next;if(ia(r,o,s)>=0)return!1;const a=r.x,l=o.x,c=s.x,d=r.y,u=o.y,h=s.y,p=Math.min(a,l,c),m=Math.min(d,u,h),f=Math.max(a,l,c),g=Math.max(d,u,h),v=Xs(p,m,t,n,i),y=Xs(f,g,t,n,i);let b=e.prevZ,A=e.nextZ;for(;b&&b.z>=v&&A&&A.z<=y;){if(b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==r&&b!==s&&ta(a,d,l,u,c,h,b.x,b.y)&&ia(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,A.x>=p&&A.x<=f&&A.y>=m&&A.y<=g&&A!==r&&A!==s&&ta(a,d,l,u,c,h,A.x,A.y)&&ia(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==r&&b!==s&&ta(a,d,l,u,c,h,b.x,b.y)&&ia(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;A&&A.z<=y;){if(A.x>=p&&A.x<=f&&A.y>=m&&A.y<=g&&A!==r&&A!==s&&ta(a,d,l,u,c,h,A.x,A.y)&&ia(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function $s(e,t){let n=e;do{const i=n.prev,r=n.next.next;!ra(i,r)&&oa(i,n,n.next,r)&&la(i,r)&&la(r,i)&&(t.push(i.i,n.i,r.i),ua(n),ua(n.next),n=e=r),n=n.next}while(n!==e);return Vs(n)}function qs(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&na(s,e)){let a=ca(s,e);return s=Vs(s,s.next),a=Vs(a,a.next),Ys(s,t,n,i,r,o,0),void Ys(a,t,n,i,r,o,0)}e=e.next}s=s.next}while(s!==e)}function Ws(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function Ks(e,t){const n=function(e,t){let n=t;const i=e.x,r=e.y;let o,s=-1/0;if(ra(e,n))return n;do{if(ra(e,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const e=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>s&&(s=e,o=n.x<n.next.x?n:n.next,e===i))return o}n=n.next}while(n!==t);if(!o)return null;const a=o,l=o.x,c=o.y;let d=1/0;n=o;do{if(i>=n.x&&n.x>=l&&i!==n.x&&ea(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)){const t=Math.abs(r-n.y)/(i-n.x);la(n,e)&&(t<d||t===d&&(n.x>o.x||n.x===o.x&&Zs(o,n)))&&(o=n,d=t)}n=n.next}while(n!==a);return o}(e,t);if(!n)return t;const i=ca(n,e);return Vs(i,i.next),Vs(n,n.next)}function Zs(e,t){return ia(e.prev,e,t.prev)<0&&ia(t.next,e,e.next)<0}function Xs(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Js(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function ea(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function ta(e,t,n,i,r,o,s,a){return!(e===s&&t===a)&&ea(e,t,n,i,r,o,s,a)}function na(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&oa(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(la(e,t)&&la(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(ia(e.prev,e,t.prev)||ia(e,t.prev,t))||ra(e,t)&&ia(e.prev,e,e.next)>0&&ia(t.prev,t,t.next)>0)}function ia(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ra(e,t){return e.x===t.x&&e.y===t.y}function oa(e,t,n,i){const r=aa(ia(e,t,n)),o=aa(ia(e,t,i)),s=aa(ia(n,i,e)),a=aa(ia(n,i,t));return r!==o&&s!==a||(!(0!==r||!sa(e,n,t))||(!(0!==o||!sa(e,i,t))||(!(0!==s||!sa(n,e,i))||!(0!==a||!sa(n,t,i)))))}function sa(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function aa(e){return e>0?1:e<0?-1:0}function la(e,t){return ia(e.prev,e,e.next)<0?ia(e,t,e.next)>=0&&ia(e,e.prev,t)>=0:ia(e,t,e.prev)<0||ia(e,e.next,t)<0}function ca(e,t){const n=ha(e.i,e.x,e.y),i=ha(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function da(e,t,n,i){const r=ha(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ua(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ha(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class pa{static triangulate(e,t,n=2){return Hs(e,t,n)}}class ma{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return ma.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];fa(e),ga(n,e);let o=e.length;t.forEach(fa);for(let e=0;e<t.length;e++)i.push(o),o+=t[e].length,ga(n,t[e]);const s=pa.triangulate(n,i);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}}function fa(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ga(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class va extends Or{constructor(e=[new un(0,-.5),new un(.5,0),new un(0,.5)],t=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=on(i,0,2*Math.PI);const r=[],o=[],s=[],a=[],l=[],c=1/t,d=new pn,u=new un,h=new pn,p=new pn,m=new pn;let f=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:f=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-f,h.z=0*g,m.copy(h),h.normalize(),a.push(h.x,h.y,h.z);break;case e.length-1:a.push(m.x,m.y,m.z);break;default:f=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),a.push(h.x,h.y,h.z),m.copy(p)}for(let r=0;r<=t;r++){const h=n+r*c*i,p=Math.sin(h),m=Math.cos(h);for(let n=0;n<=e.length-1;n++){d.x=e[n].x*p,d.y=e[n].y,d.z=e[n].x*m,o.push(d.x,d.y,d.z),u.x=r/t,u.y=n/(e.length-1),s.push(u.x,u.y);const i=a[3*n+0]*p,c=a[3*n+1],h=a[3*n+0]*m;l.push(i,c,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const i=t+n*e.length,o=i,s=i+e.length,a=i+e.length+1,l=i+1;r.push(o,s,l),r.push(a,l,s)}this.setIndex(r),this.setAttribute("position",new Mr(o,3)),this.setAttribute("uv",new Mr(s,2)),this.setAttribute("normal",new Mr(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new va(e.points,e.segments,e.phiStart,e.phiLength)}}class ya extends Or{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,s=Math.floor(n),a=Math.floor(i),l=s+1,c=a+1,d=e/s,u=t/a,h=[],p=[],m=[],f=[];for(let e=0;e<c;e++){const t=e*u-o;for(let n=0;n<l;n++){const i=n*d-r;p.push(i,-t,0),m.push(0,0,1),f.push(n/s),f.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<s;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),o=t+1+l*e;h.push(n,i,o),h.push(i,r,o)}this.setIndex(h),this.setAttribute("position",new Mr(p,3)),this.setAttribute("normal",new Mr(m,3)),this.setAttribute("uv",new Mr(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ya(e.width,e.height,e.widthSegments,e.heightSegments)}}class ba extends Or{constructor(e=new zs([new un(0,.5),new un(-.5,-.5),new un(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,a,t),s+=a,a=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===ma.isClockWise(c)&&(c=c.reverse());for(let e=0,t=d.length;e<t;e++){const t=d[e];!0===ma.isClockWise(t)&&(d[e]=t.reverse())}const u=ma.triangulateShape(c,d);for(let e=0,t=d.length;e<t;e++){const t=d[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=u.length;e<t;e++){const t=u[e],i=t[0]+s,r=t[1]+s,o=t[2]+s;n.push(i,r,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Mr(i,3)),this.setAttribute("normal",new Mr(r,3)),this.setAttribute("uv",new Mr(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new ba(n,e.curveSegments)}}class Aa extends Or{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],d=new pn,u=new pn,h=[],p=[],m=[],f=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0===h&&0===o?y=.5/t:h===n&&a===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;d.x=-e*Math.cos(i+a*r)*Math.sin(o+v*s),d.y=e*Math.cos(o+v*s),d.z=e*Math.sin(i+a*r)*Math.sin(o+v*s),p.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),f.push(a+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=c[e][i+1],r=c[e][i],s=c[e+1][i],l=c[e+1][i+1];(0!==e||o>0)&&h.push(t,r,l),(e!==n-1||a<Math.PI)&&h.push(r,s,l)}this.setIndex(h),this.setAttribute("position",new Mr(p,3)),this.setAttribute("normal",new Mr(m,3)),this.setAttribute("uv",new Mr(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Aa(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _a extends Or{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new pn,r=new pn;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],c=l.start;for(let e=c,a=c+l.count;e<a;e+=3)for(let a=0;a<3;a++){const l=s.getX(e+a),c=s.getX(e+(a+1)%3);i.fromBufferAttribute(o,l),r.fromBufferAttribute(o,c),!0===wa(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;i.fromBufferAttribute(o,a),r.fromBufferAttribute(o,l),!0===wa(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Mr(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function wa(e,t,n){const i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}class xa extends pr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new dr(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Ca extends Jr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ea extends pr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new dr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ma extends Ea{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new un(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return on(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new dr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new dr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new dr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Sa extends pr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new dr(16777215),this.specular=new dr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new dr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new un(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ti,this.combine=$,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ta extends pr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ka extends pr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function La(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Da(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ia(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function Ra(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function Oa(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push(...s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}class Pa{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ba extends Pa{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ct,endingEnd:Ct}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case Et:r=e,s=2*t-n;break;case Mt:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Et:o=e,a=2*n-t;break;case Mt:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),m=p*p,f=m*p,g=-u*f+2*u*m-u*p,v=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*p+1,y=(-1-h)*f+(1.5+h)*m+.5*p,b=h*f-h*m;for(let e=0;e!==s;++e)r[e]=g*o[c+e]+v*o[l+e]+y*o[a+e]+b*o[d+e];return r}}class Na extends Pa{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(i-t),d=1-c;for(let e=0;e!==s;++e)r[e]=o[l+e]*d+o[a+e]*c;return r}}class Ua extends Pa{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fa{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=La(t,this.TimeBufferType),this.values=La(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:La(e.times,Array),values:La(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Ua(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Na(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ba(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case _t:t=this.InterpolantFactoryMethodDiscrete;break;case wt:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _t;case this.InterpolantFactoryMethodLinear:return wt;case this.InterpolantFactoryMethodSmooth:return xt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,i,o),e=!1;break}o=i}if(void 0!==i&&Da(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===xt,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const i=s*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,s=0;s!==n;++s)t[i+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Fa.prototype.ValueTypeName="",Fa.prototype.TimeBufferType=Float32Array,Fa.prototype.ValueBufferType=Float32Array,Fa.prototype.DefaultInterpolation=wt;class za extends Fa{constructor(e,t,n){super(e,t,n)}}za.prototype.ValueTypeName="bool",za.prototype.ValueBufferType=Array,za.prototype.DefaultInterpolation=_t,za.prototype.InterpolantFactoryMethodLinear=void 0,za.prototype.InterpolantFactoryMethodSmooth=void 0;class Ha extends Fa{constructor(e,t,n,i){super(e,t,n,i)}}Ha.prototype.ValueTypeName="color";class ja extends Fa{constructor(e,t,n,i){super(e,t,n,i)}}ja.prototype.ValueTypeName="number";class Va extends Pa{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let l=e*s;for(let e=l+s;l!==e;l+=4)hn.slerpFlat(r,0,o,l-s,o,l,a);return r}}class Ya extends Fa{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new Va(this.times,this.values,this.getValueSize(),e)}}Ya.prototype.ValueTypeName="quaternion",Ya.prototype.InterpolantFactoryMethodSmooth=void 0;class Ga extends Fa{constructor(e,t,n){super(e,t,n)}}Ga.prototype.ValueTypeName="string",Ga.prototype.ValueBufferType=Array,Ga.prototype.DefaultInterpolation=_t,Ga.prototype.InterpolantFactoryMethodLinear=void 0,Ga.prototype.InterpolantFactoryMethodSmooth=void 0;class Qa extends Fa{constructor(e,t,n,i){super(e,t,n,i)}}Qa.prototype.ValueTypeName="vector";class $a{constructor(e="",t=-1,n=[],i=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=rn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let e=0,r=n.length;e!==r;++e)t.push(qa(n[e]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,i=n.length;e!==i;++e)t.push(Fa.toJSON(n[e]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,o=[];for(let e=0;e<r;e++){let s=[],a=[];s.push((e+r-1)%r,e,(e+1)%r),a.push(0,1,0);const l=Ia(s);s=Ra(s,1,l),a=Ra(a,1,l),i||0!==s[0]||(s.push(r),a.push(a[0])),o.push(new ja(".morphTargetInfluences["+t[e].name+"]",s,a).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(r);if(o&&o.length>1){const e=o[1];let t=i[e];t||(i[e]=t=[]),t.push(n)}}const o=[];for(const e in i)o.push(this.CreateFromMorphTargetSequence(e,i[e],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],s=[];Oa(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let n=0;n<r[t].morphTargets.length;n++)e[r[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let i=0;i!==r[t].morphTargets.length;++i){const i=r[t];e.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new ja(".morphTargetInfluence["+n+"]",e,o))}a=e.length*o}else{const o=".bones["+t[e].name+"]";n(Qa,o+".position",r,"pos",i),n(Ya,o+".quaternion",r,"rot",i),n(Qa,o+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qa(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ja;case"vector":case"vector2":case"vector3":case"vector4":return Qa;case"color":return Ha;case"quaternion":return Ya;case"bool":case"boolean":return za;case"string":return Ga}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Oa(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Wa={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Ka{constructor(e,t,n){const i=this;let r,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,a),s===a&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const Za=new Ka;class Xa{constructor(e){this.manager=void 0!==e?e:Za,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Xa.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ja={};class el extends Error{constructor(e,t){super(e),this.response=t}}class tl extends Xa{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Wa.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==Ja[e])return void Ja[e].push({onLoad:t,onProgress:n,onError:i});Ja[e]=[],Ja[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Ja[e],i=t.body.getReader(),r=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=r?parseInt(r):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){i.read().then(({done:i,value:r})=>{if(i)e.close();else{a+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}},t=>{e.error(t)})}()}});return new Response(l)}throw new el(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(""===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{Wa.add(e,t);const n=Ja[e];delete Ja[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=Ja[e];if(void 0===n)throw this.manager.itemError(e),t;delete Ja[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class nl extends Xa{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Wa.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const s=bn("img");function a(){c(),Wa.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class il extends Xa{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new To,s=new tl(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(e){let n;try{n=r.parse(e)}catch(e){if(void 0===i)return void console.error(e);i(e)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ue,o.wrapT=void 0!==n.wrapT?n.wrapT:ue,o.magFilter=void 0!==n.magFilter?n.magFilter:ge,o.minFilter=void 0!==n.minFilter?n.minFilter:ge,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=ye),1===n.mipmapCount&&(o.minFilter=ge),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)},n,i),o}}class rl extends Xa{constructor(e){super(e)}load(e,t,n,i){const r=new Fn,o=new nl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class ol extends Gi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new dr(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class sl extends ol{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new dr(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const al=new yi,ll=new pn,cl=new pn;class dl{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new un(512,512),this.mapType=be,this.map=null,this.mapPass=null,this.matrix=new yi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $o,this._frameExtents=new un(1,1),this._viewportCount=1,this._viewports=[new zn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ll.setFromMatrixPosition(e.matrixWorld),t.position.copy(ll),cl.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cl),t.updateMatrixWorld(),al.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(al),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(al)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ul extends dl{constructor(){super(new ro(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=2*nn*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hl extends ol{constructor(e,t,n=0,i=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.target=new Gi,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new ul}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const pl=new yi,ml=new pn,fl=new pn;class gl extends dl{constructor(){super(new ro(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new un(4,2),this._viewportCount=6,this._viewports=[new zn(2,1,1,1),new zn(0,1,1,1),new zn(3,1,1,1),new zn(1,1,1,1),new zn(3,0,1,1),new zn(1,0,1,1)],this._cubeDirections=[new pn(1,0,0),new pn(-1,0,0),new pn(0,0,1),new pn(0,0,-1),new pn(0,1,0),new pn(0,-1,0)],this._cubeUps=[new pn(0,1,0),new pn(0,1,0),new pn(0,1,0),new pn(0,1,0),new pn(0,0,1),new pn(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),ml.setFromMatrixPosition(e.matrixWorld),n.position.copy(ml),fl.copy(n.position),fl.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(fl),n.updateMatrixWorld(),i.makeTranslation(-ml.x,-ml.y,-ml.z),pl.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pl)}}class vl extends ol{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new gl}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class yl extends eo{constructor(e=-1,t=1,n=1,i=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class bl extends dl{constructor(){super(new yl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Al extends ol{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gi.DEFAULT_UP),this.updateMatrix(),this.target=new Gi,this.shadow=new bl}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _l extends ol{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class wl extends ol{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class xl{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Cl extends Or{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}const El=new WeakMap;class Ml extends Xa{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Wa.get(e);if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then(n=>{if(!0!==El.has(o))return t&&t(n),r.manager.itemEnd(e),n;i&&i(El.get(o)),r.manager.itemError(e),r.manager.itemEnd(e)}):(setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const a=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){return Wa.add(e,n),t&&t(n),r.manager.itemEnd(e),n}).catch(function(t){i&&i(t),El.set(a,t),Wa.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Wa.add(e,a),r.manager.itemStart(e)}}class Sl extends ro{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Tl{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=kl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=kl();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function kl(){return performance.now()}class Ll{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(n[e]!==n[e+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let e=n,r=i;e!==r;++e)t[e]=t[i+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)e[t+i]=e[n+i]}_slerp(e,t,n,i){hn.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const o=this._workIndex*r;hn.multiplyQuaternionsFlat(e,o,e,t,e,n),hn.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){const o=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*o+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}}const Dl="\\[\\]\\.:\\/",Il=new RegExp("["+Dl+"]","g"),Rl="[^"+Dl+"]",Ol="[^"+Dl.replace("\\.","")+"]",Pl=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Rl)+/(WCOD+)?/.source.replace("WCOD",Ol)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rl)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rl)+"$"),Bl=["material","materials","bones","map"];class Nl{constructor(e,t,n){this.path=t,this.parsedPath=n||Nl.parseTrackName(t),this.node=Nl.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Nl.Composite(e,t,n):new Nl(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Il,"")}static parseTrackName(e){const t=Pl.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Bl.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Nl.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nl.Composite=class{constructor(e,t,n){const i=n||Nl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Nl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Nl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Nl.prototype.GetterByBindingType=[Nl.prototype._getValue_direct,Nl.prototype._getValue_array,Nl.prototype._getValue_arrayElement,Nl.prototype._getValue_toArray],Nl.prototype.SetterByBindingTypeAndVersioning=[[Nl.prototype._setValue_direct,Nl.prototype._setValue_direct_setNeedsUpdate,Nl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nl.prototype._setValue_array,Nl.prototype._setValue_array_setNeedsUpdate,Nl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nl.prototype._setValue_arrayElement,Nl.prototype._setValue_arrayElement_setNeedsUpdate,Nl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nl.prototype._setValue_fromArray,Nl.prototype._setValue_fromArray_setNeedsUpdate,Nl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ul{constructor(){this.isAnimationObjectGroup=!0,this.uuid=rn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let s,a=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],u=d.uuid;let h=t[u];if(void 0===h){h=a++,t[u]=h,e.push(d);for(let e=0,t=o;e!==t;++e)r[e].push(new Nl(d,n[e],i[e]))}else if(h<l){s=e[h];const a=--l,c=e[a];t[c.uuid]=h,e[h]=c,t[u]=a,e[a]=d;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[a];let s=t[h];t[h]=o,void 0===s&&(s=new Nl(d,n[e],i[e])),t[a]=s}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=r){const o=r++,c=e[o];t[c.uuid]=l,e[l]=c,t[a]=o,e[o]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[l]=i,t[o]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<r){const s=--r,a=e[s],c=--o,d=e[c];t[a.uuid]=l,e[l]=a,t[d.uuid]=s,e[s]=d,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[c];t[l]=i,t[s]=r,t.pop()}}else{const r=--o,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,d=new Array(l);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(d);for(let n=c,i=a.length;n!==i;++n){const i=a[n];d[n]=new Nl(i,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}class Fl{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,o=r.length,s=new Array(o),a={endingStart:Ct,endingEnd:Ct};for(let e=0;e!==o;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=At,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=2202===n;if(0===e)return-1===r||!o||1&~r?i:t-i;if(n===bt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&!(1&~r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Et,i.endingEnd=Et):(i.endingStart=e?this.zeroSlopeAtStart?Et:Ct:Mt,i.endingEnd=t?this.zeroSlopeAtEnd?Et:Ct:Mt)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}const zl=new Float32Array(1);class Hl extends Xt{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let e=0;e!==r;++e){const r=i[e],l=r.name;let d=c[l];if(void 0!==d)++d.referenceCount,o[e]=d;else{if(d=o[e],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,a,l));continue}const i=t&&t._propertyBindings[e].binding.parsedPath;d=new Ll(Nl.create(n,l,i),r.ValueTypeName,r.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,l),o[e]=d}s[e].resultBuffer=d.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Na(new Float32Array(2),new Float32Array(2),1,zl),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let o="string"==typeof e?$a.findByName(i,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:St),void 0!==a){const e=a.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Fl(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"==typeof e?$a.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let s=0;s!==n;++s){t[s]._update(i,e,r,o)}const s=this._bindings,a=this._nActiveBindings;for(let e=0;e!==a;++e)s[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const i=n[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const e in i){const t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class jl extends mo{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const Vl=new yi;class Yl{constructor(e,t,n=0,i=1/0){this.ray=new vi(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new ki,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Vl.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Vl),this}intersectObject(e,t=!0,n=[]){return Ql(e,this,n,t),n.sort(Gl),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)Ql(e[i],this,n,t);return n.sort(Gl),n}}function Gl(e,t){return e.distance-t.distance}function Ql(e,t,n,i){let r=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(r=!1)}if(!0===r&&!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Ql(i[e],t,n,!0)}}class $l{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=on(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(on(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const ql=new pn,Wl=new pn;class Kl{constructor(e=new pn,t=new pn){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ql.subVectors(e,this.start),Wl.subVectors(this.end,this.start);const n=Wl.dot(Wl);let i=Wl.dot(ql)/n;return t&&(i=on(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class Zl extends ss{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Or;i.setIndex(new xr(n,1)),i.setAttribute("position",new Mr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new qo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xl(e,t,n,i){const r=function(e){switch(e){case be:case Ae:return{byteLength:1,components:1};case we:case _e:case Me:return{byteLength:2,components:1};case Se:case Te:return{byteLength:2,components:4};case Ce:case xe:case Ee:return{byteLength:4,components:1};case Le:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(i);switch(n){case De:return e*t;case Be:case Ne:return e*t/r.components*r.byteLength;case Ue:case Fe:return e*t*2/r.components*r.byteLength;case Ie:return e*t*3/r.components*r.byteLength;case Re:case ze:return e*t*4/r.components*r.byteLength;case He:case je:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ve:case Ye:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Qe:case qe:return Math.max(e,16)*Math.max(t,8)/4;case Ge:case $e:return Math.max(e,8)*Math.max(t,8)/2;case We:case Ke:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Ze:case Xe:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Je:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case et:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case tt:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case nt:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case it:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case rt:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case ot:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case st:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case at:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case lt:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case ct:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case dt:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case ut:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case ht:case pt:case mt:return Math.ceil(e/4)*Math.ceil(t/4)*16;case ft:case gt:return Math.ceil(e/4)*Math.ceil(t/4)*8;case vt:case yt:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i)},4695:function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(3681))},4709:(e,t,n)=>{"use strict";n.d(t,{Bj:()=>a,XY:()=>r,c1:()=>s,h5:()=>d,s9:()=>c,xL:()=>i,zY:()=>u});const i=`{{lit-${String(Math.random()).slice(2)}}}`,r=`\x3c!--${i}--\x3e`,o=new RegExp(`${i}|${r}`),s="$lit$";class a{constructor(e,t){this.parts=[],this.element=t;const n=[],r=[],a=document.createTreeWalker(t.content,133,null,!1);let c=0,h=-1,p=0;const{strings:m,values:{length:f}}=e;for(;p<f;){const e=a.nextNode();if(null!==e){if(h++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:n}=t;let i=0;for(let e=0;e<n;e++)l(t[e].name,s)&&i++;for(;i-- >0;){const t=m[p],n=u.exec(t)[2],i=n.toLowerCase()+s,r=e.getAttribute(i);e.removeAttribute(i);const a=r.split(o);this.parts.push({type:"attribute",index:h,name:n,strings:a}),p+=a.length-1}}"TEMPLATE"===e.tagName&&(r.push(e),a.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(i)>=0){const i=e.parentNode,r=t.split(o),a=r.length-1;for(let t=0;t<a;t++){let n,o=r[t];if(""===o)n=d();else{const e=u.exec(o);null!==e&&l(e[2],s)&&(o=o.slice(0,e.index)+e[1]+e[2].slice(0,-s.length)+e[3]),n=document.createTextNode(o)}i.insertBefore(n,e),this.parts.push({type:"node",index:++h})}""===r[a]?(i.insertBefore(d(),e),n.push(e)):e.data=r[a],p+=a}}else if(8===e.nodeType)if(e.data===i){const t=e.parentNode;null!==e.previousSibling&&h!==c||(h++,t.insertBefore(d(),e)),c=h,this.parts.push({type:"node",index:h}),null===e.nextSibling?e.data="":(n.push(e),h--),p++}else{let t=-1;for(;-1!==(t=e.data.indexOf(i,t+1));)this.parts.push({type:"node",index:-1}),p++}}else a.currentNode=r.pop()}for(const e of n)e.parentNode.removeChild(e)}}const l=(e,t)=>{const n=e.length-t.length;return n>=0&&e.slice(n)===t},c=e=>-1!==e.index,d=()=>document.createComment(""),u=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/},4743:(e,t,n)=>{"use strict";n.d(t,{ab:()=>i.ab,Yp:()=>i.Yp,GP:()=>i.GP,Qh:()=>i.Qh,Vm:()=>i.Vm,h5:()=>c.h5,u$:()=>s.u,qy:()=>d,if:()=>a.if,XX:()=>l.X,Pf:()=>a.Pf});var i=n(3869);const r=new class{handleAttributeExpressions(e,t,n,r){const o=t[0];if("."===o){return new i.g$(e,t.slice(1),n).parts}if("@"===o)return[new i.GP(e,t.slice(1),r.eventContext)];if("?"===o)return[new i.Yp(e,t.slice(1),n)];return new i.pU(e,t,n).parts}handleTextExpression(e){return new i.Qh(e)}};var o=n(2387),s=n(6342),a=n(6187),l=(n(1142),n(8135)),c=(n(1046),n(1757),n(4709));"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const d=(e,...t)=>new o.Q(e,t,"html",r)},4757:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(4640),r=n(9979),o=n(3331),s=n(2799),a=n(4270),l=n(3275),c=n(7795),d=n(3889),u=n(5676);class h extends o.A{constructor(e,t,n){super(),this.viewports=[],this.rendererComponent=null,this.targetViewport=null,this.targetObject3D=null,this.targetComponent=null,this.targetScene=null,this.targetCamera=null,this.defaultScene=new i.Z58,this.defaultCamera=new u.Ay,this.system=e,this.canvas=t,this.overlay=n,this.renderer=new r.JeP({canvas:t,antialias:!0}),this.renderer.autoClear=!1,this.renderer.outputColorSpace=i.er$,this.picker=new c.A(this.renderer)}dispose(){this.renderer.dispose(),this.viewports.forEach(e=>e.dispose())}get canvasWidth(){return this.canvas.width}get canvasHeight(){return this.canvas.height}attach(){const e=this.canvasWidth,t=this.canvasHeight;this.viewports.forEach(n=>n.setCanvasSize(e,t)),this.renderer.setSize(e,t,!1),this.rendererComponent=this.system.getComponent(d.A,!0),this.rendererComponent.attachView(this)}detach(){this.rendererComponent=this.system.getComponent(d.A,!0),this.rendererComponent.detachView(this),this.rendererComponent=null}renderImage(e,t,n,i){const r=this.canvas.width,o=this.canvas.height;this.setRenderSize(e,t),this.render();const s=this.canvas.toDataURL(n,i);return this.setRenderSize(r,o),s}render(){const e=this.rendererComponent.activeSceneComponent;if(!e)return;let t=e.scene,n=e.activeCamera;t&&n||(t=this.defaultScene,n=this.defaultCamera);const i=this.renderer;i.clear(),i.__view=this;const r=this.viewports;for(let e=0,o=r.length;e<o;++e){const o=r[e];let s=i.getContext();s.clear(s.DEPTH_BUFFER_BIT),s.finish(),i.__viewport=o;const a=o.updateCamera(n);o.applyViewport(this.renderer),i.render(t,a)}}setRenderSize(e,t){this.canvas.width=e,this.canvas.height=t,this.viewports.forEach(n=>n.setCanvasSize(e,t)),this.renderer.xr.isPresenting||this.renderer.setSize(e,t,!1)}resize(){this.setRenderSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.xr.isPresenting||this.render()}setViewportCount(e){const t=this.viewports;for(let n=e;n<t.length;++n)t[n].dispose();for(let n=t.length;n<e;++n){const e=(new l.A).appendTo(this.overlay);t[n]=new a.A,t[n].setCanvasSize(this.canvasWidth,this.canvasHeight),t[n].overlay=e}t.length=e}getViewportCount(){return this.viewports.length}onPointer(e){if(!this.system)return!1;let t=!1,n=!1;"pointer-hover"===e.type?n=!0:e.isPrimary&&"pointer-down"===e.type&&(n=!0,t=!0);const i=this.routeEvent(e,n,t);if(i){const e=i.component;if(e){e.emit(i);const t=e.getComponent(s.A);!i.stopPropagation&&t&&t.propagateUp(!1,!0,i)}if(i.stopPropagation||this.system.emit(i),!i.stopPropagation){i.viewport.onPointer(i)&&this.system.getMainComponent(d.A).forceRender()}return!0}return!1}onTrigger(e){if(!this.system)return!1;const t=this.routeEvent(e,!0,!0);if(t){const e=t.component;if(e){e.emit(t);const n=e.getComponent(s.A);!t.stopPropagation&&n&&n.propagateUp(!1,!0,t)}if(t.stopPropagation||this.system.emit(t),!t.stopPropagation){t.viewport.onTrigger(t)&&this.system.getMainComponent(d.A).forceRender()}return!0}return!1}onKeypress(e){if(!this.system)return!1;const t=this.routeEvent(e,!1,!1);if(t){const e=t.component;if(e){e.emit(t);const n=e.getComponent(s.A);!t.stopPropagation&&n&&n.propagateUp(!1,!0,t)}if(t.stopPropagation||this.system.emit(t),!t.stopPropagation){t.viewport.onKeyboard(t)&&this.system.getMainComponent(d.A).forceRender()}return!0}return!1}pickPosition(e,t,n){return this.picker.pickPosition(this.targetScene,this.targetCamera,e,t,n)}pickNormal(e,t){return this.picker.pickNormal(this.targetScene,this.targetCamera,e,t)}routeEvent(e,t,n){let i=this.targetViewport,r=this.targetComponent&&this.targetComponent.node?this.targetComponent:null,o=r?this.targetObject3D:null;if(t){i=null;const t=this.viewports;for(let n=0,r=t.length;n<r;++n){const r=t[n];if(r.isInside(e)){i=r;break}}}if(!i)return null;const s=e;if(s.view=this,s.viewport=i,s.deviceX=i.getDeviceX(e.localX),s.deviceY=i.getDeviceY(e.localY),s.stopPropagation=!1,n){const t=this.rendererComponent.activeSceneComponent,n=this.targetScene=t&&t.scene,i=this.targetCamera=t&&t.activeCamera;if(o=null,r=null,n&&i)if(o=this.picker.pickObject(n,i,e),void 0===o)0;else{let e=o;for(;e&&!r;)r=e.userData.component,r||(e=e.parent);0}}return s.object3D=o,s.component=r,this.targetViewport=i,this.targetObject3D=o,this.targetComponent=r,s}}},4782:function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(3681))},4949:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(4640);n(8948);class r extends i.B69{constructor(){super(...arguments),this.isHTMLSpriteGroup=!0,this._visible=!0}getVisible(){return this._visible}setVisible(e){if(e!==this._visible){this._visible=e;const t=this.children;for(let n=0,i=t.length;n<i;++n)t[n].setVisible(e)}}dispose(){const e=this.children;for(let t=0,n=e.length;t<n;++t)e[t].dispose()}disposeHTMLElements(e){const t=this.children;for(let n=0,i=t.length;n<i;++n)t[n].disposeHTMLElement(e)}render(e,t){if(!this.visible)return;const n=e.getBoundingClientRect();e.scrollTop=0,e.scrollLeft=0;const i=this.children;for(let r=0,o=i.length;r<o;++r){const o=i[r],s=o.getHTMLElement(e);s&&o.renderHTMLElement(s,n,t)}}update(){const e=this.children;for(let t=0,n=e.length;t<n;++t)e[t].update()}}},4955:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,k:()=>i});var i,r=n(3423),o=n(1860),s=n(5240);!function(e){e[e.Graph=0]="Graph",e[e.Main=1]="Main",e[e.System=2]="System"}(i||(i={}));class a extends r.Ay{constructor(){super(...arguments),this._scope=i.Graph,this._scopedGraph=null,this._activeNode=null}get nodeType(){return this.constructor.nodeType}get followNodeSelection(){return this.constructor.followNodeSelection}get followComponentSelection(){return this.constructor.followComponentSelection}get retainSelection(){return this.constructor.retainSelection}get scope(){return this._scope}set scope(e){this._scope=e,this._activeNode&&!this.isNodeInScope(this._activeNode)&&(this.activeNode=null)}get scopedGraph(){return this._scopedGraph}set scopedGraph(e){e!==this._scopedGraph&&(this._scopedGraph=e,this._activeNode&&!this.isNodeInScope(this._activeNode)&&(this.activeNode=null),this.onScopedNodes(),this.emit({type:"scoped-nodes"}))}get scopedNodes(){switch(this._scope){case i.Graph:return(this._scopedGraph?this._scopedGraph.innerGraph:this.graph).getNodes(this.nodeType);case i.Main:return this.getMainNodes(this.nodeType);case i.System:return this.getSystemNodes(this.nodeType)}}get activeNode(){return this._activeNode}set activeNode(e){const t=this.activeNode;if(e!==t){if(t&&this.deactivateNode(t),e){if(!this.isNodeInScope(e))throw new Error("can't activate, node out of scope");this.activateNode(e)}this._activeNode=e,this.onActiveNode(t,e),this.emit({type:"active-node",previous:t,next:e})}}get selection(){return this.getSystemComponent(s.A)}create(){super.create(),this.system.nodes.on(o.A,this.onNode,this),this.followNodeSelection&&this.selection.selectedNodes.on(this.nodeType,this.onSelectNode,this),this.followComponentSelection&&this.selection.selectedComponents.on(r.Ay,this.onSelectComponent,this)}dispose(){this.activeNode&&(this.activeNode=null),this.system.nodes.off(o.A,this.onNode,this),this.followNodeSelection&&this.selection.selectedNodes.off(this.nodeType,this.onSelectNode,this),this.followComponentSelection&&this.selection.selectedComponents.off(r.Ay,this.onSelectComponent,this),super.dispose()}activateNode(e){}deactivateNode(e){}onActiveNode(e,t){}onScopedNodes(){}onNode(e){e.remove&&e.object===this.activeNode&&(this.activeNode=null),this.isNodeInScope(e.object)&&(this.onScopedNodes(),this.emit({type:"scoped-nodes"}))}onSelectNode(e){const t=e.object;this.isNodeInScope(t)&&(e.add?this.activeNode=t:e.remove&&!this.retainSelection&&t===this.activeNode&&(this.activeNode=null))}onSelectComponent(e){const t=e.object.node;t.is(this.nodeType)&&this.onSelectNode({type:t.typeName,object:t,add:e.add,remove:e.remove})}isNodeInScope(e){if(!e.is(this.nodeType))return!1;switch(this._scope){case i.Graph:const t=this._scopedGraph?this._scopedGraph.innerGraph:this.graph;return e.graph===t;case i.Main:return e.graph===this.system.graph;case i.System:return!0}return!1}}a.typeName="CNodeProvider",a.nodeType=o.A,a.followNodeSelection=!0,a.followComponentSelection=!1,a.retainSelection=!0},4965:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(4640),r=n(3423),o=n(2464);class s extends o.A{constructor(e,t){super(e,t),this.ins=this.addInputs(s.spotLightIns),this.object3D=new i.nCl,this.light.target.matrixAutoUpdate=!1}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return(n.position.changed||n.target.changed)&&(t.position.fromArray(n.position.value),t.target.position.fromArray(n.target.value),t.updateMatrix(),t.target.updateMatrix()),(n.distance.changed||n.decay.changed||n.angle.changed||n.penumbra.changed)&&(t.distance=n.distance.value,t.decay=n.decay.value,t.angle=n.angle.value*i.cj9.DEG2RAD,t.penumbra=n.penumbra.value,t.shadow.camera.near=t.distance?t.distance/800:.5),!0}onAddToParent(e){super.onAddToParent(e),e.add(this.light.target)}onRemoveFromParent(e){super.onRemoveFromParent(e),e.remove(this.light.target)}}s.typeName="CSpotLight",s.spotLightIns={position:r.gK.Vector3("Light.Position"),target:r.gK.Vector3("Light.Target",[0,-1,0]),distance:r.gK.Number("Light.Distance",{preset:0,min:0}),decay:r.gK.Number("Light.Decay",{preset:1,min:0}),angle:r.gK.Number("Light.Angle",{preset:45,min:0,max:89}),penumbra:r.gK.Percent("Light.Penumbra",{preset:.5,min:0})};class a extends s{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity,this.ins.distance,this.ins.decay,this.ins.angle,this.ins.penumbra,this.ins.shadowEnabled,this.ins.shadowResolution,this.ins.shadowBlur,this.ins.shadowIntensity]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}dispose(){this.ins.shadowEnabled.value&&this.light.shadow.map&&this.light.shadow.map.dispose(),super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if(n.type!==a.type)throw new Error("light type mismatch: not a spot light");return i.name.setValue(t.name),n.spot=n.spot||{},i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,color:void 0!==n.color?n.color:i.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset,position:i.position.schema.preset,target:i.target.schema.preset,distance:n.spot.distance||i.distance.schema.preset,decay:void 0!==n.spot.decay?n.spot.decay:i.decay.schema.preset,angle:void 0!==n.spot.angle?n.spot.angle:i.angle.schema.preset,penumbra:n.spot.penumbra||i.penumbra.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowResolution:void 0!==n.shadowResolution&&o.Y[n.shadowResolution]||1,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:i.shadowBlur.schema.preset,shadowIntensity:void 0!==n.shadowIntensity?n.shadowIntensity:i.shadowIntensity.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value,spot:{distance:n.distance.value,decay:n.decay.value,angle:n.angle.value,penumbra:n.penumbra.value}};i.type=a.type,n.shadowEnabled.value&&(i.shadowEnabled=!0,n.shadowBlur.isDefault()||(i.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(i.shadowResolution=o.Y[n.shadowResolution.value]),n.shadowIntensity.isDefault()||(i.shadowIntensity=n.shadowIntensity.value)),e.lights=e.lights||[];const r=e.lights.length;return e.lights.push(i),r}}a.typeName="CVSpotLight",a.type="spot",a.text="Spot Light",a.icon="spot"},4976:function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(3681))},5007:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,T:()=>i});var i,r=n(3423);!function(e){e[e.none=0]="none",e[e.menu=1]="menu",e[e.title=2]="title",e[e.logo=4]="logo",e[e.language=8]="language",e[e.tour_exit=16]="tour_exit",e[e.help=32]="help"}(i||(i={}));class o extends r.Ay{constructor(){super(...arguments),this.ins=this.addInputs(o.ins),this.outs=this.addOutputs(o.outs)}update(e){return!0}fromData(e){e=e||{},this.ins.setValues({visible:void 0===e.visible||e.visible,logo:void 0===e.logo||e.logo,menu:void 0===e.menu||e.menu,tools:void 0===e.tools||e.tools})}toData(){const e=this.ins;return{visible:e.visible.value,logo:e.logo.value,menu:e.menu.value,tools:e.tools.value}}isShowing(e){return(e&this.ins.visibleElements.value)===e}}o.typeName="CVInterface",o.ins={visible:r.gK.Boolean("Interface.Visible",!0),logo:r.gK.Boolean("Interface.Logo",!0),menu:r.gK.Boolean("Interface.Menu",!0),tools:r.gK.Boolean("Interface.Tools",!0),visibleElements:r.gK.Number("Interface.VisibleElements",63)},o.outs={documentTitle:r.gK.String("Document.Title")}},5068:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map(function(e){return i(e,n)})}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}(e))}function s(e,t){try{return t in e}catch(e){return!1}}function a(e,t,n){var r={};return n.isMergeableObject(e)&&o(e).forEach(function(t){r[t]=i(e[t],n)}),o(t).forEach(function(o){(function(e,t){return s(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(s(e,o)&&n.isMergeableObject(t[o])?r[o]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l}(o,n)(e[o],t[o],n):r[o]=i(t[o],n))}),r}function l(e,n,o){(o=o||{}).arrayMerge=o.arrayMerge||r,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=i;var s=Array.isArray(n);return s===Array.isArray(e)?s?o.arrayMerge(e,n,o):a(e,n,o):i(n,o)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return l(e,n,t)},{})};var c=l;e.exports=c},5092:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2420),r=n(6552),o=n(6262),s=n(7776),a=n(1469),l=[i.default,r.default,(0,o.default)(),s.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},5129:()=>{},5131:e=>{!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},n=function(e){return{eq:e}},i=n(function(e,t){return e===t}),r=function(e){return n(function(t,n){if(t.length!==n.length)return!1;for(var i=t.length,r=0;r<i;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},o=function(e,t){return function(e,t){return n(function(n,i){return e.eq(t(n),t(i))})}(r(e),function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)})},s=function(e){return n(function(t,n){var r=Object.keys(t),s=Object.keys(n);if(!o(i).eq(r,s))return!1;for(var a=r.length,l=0;l<a;l++){var c=r[l];if(!e.eq(t[c],n[c]))return!1}return!0})},a=n(function(e,n){if(e===n)return!0;var i=t(e);return i===t(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(i)?e===n:"array"===i?r(a).eq(e,n):"object"===i&&s(a).eq(e,n))});const l=Object.getPrototypeOf,c=(e,t,n)=>{var i;return!!n(e,t.prototype)||(null===(i=e.constructor)||void 0===i?void 0:i.name)===t.name},d=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&c(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(t)===e,u=e=>t=>typeof t===e,h=e=>t=>e===t,p=(e,t)=>f(e)&&c(e,t,(e,t)=>l(e)===t),m=d("string"),f=d("object"),g=e=>p(e,Object),v=d("array"),y=h(null),b=u("boolean"),A=h(void 0),_=e=>null==e,w=e=>!_(e),x=u("function"),C=u("number"),E=(e,t)=>{if(v(e)){for(let n=0,i=e.length;n<i;++n)if(!t(e[n]))return!1;return!0}return!1},M=()=>{},S=(e,t)=>(...n)=>e(t.apply(null,n)),T=(e,t)=>n=>e(t(n)),k=e=>()=>e,L=e=>e,D=(e,t)=>e===t;function I(e,...t){return(...n)=>{const i=t.concat(n);return e.apply(null,i)}}const R=e=>t=>!e(t),O=e=>()=>{throw new Error(e)},P=e=>e(),B=e=>{e()},N=k(!1),U=k(!0);class F{constructor(e,t){this.tag=e,this.value=t}static some(e){return new F(!0,e)}static none(){return F.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?F.some(e(this.value)):F.none()}bind(e){return this.tag?e(this.value):F.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:F.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return w(e)?F.some(e):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const z=Array.prototype.slice,H=Array.prototype.indexOf,j=Array.prototype.push,V=(e,t)=>H.call(e,t),Y=(e,t)=>V(e,t)>-1,G=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return!0}return!1},Q=(e,t)=>{const n=e.length,i=new Array(n);for(let r=0;r<n;r++){const n=e[r];i[r]=t(n,r)}return i},$=(e,t)=>{for(let n=0,i=e.length;n<i;n++){t(e[n],n)}},q=(e,t)=>{for(let n=e.length-1;n>=0;n--){t(e[n],n)}},W=(e,t)=>{const n=[],i=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];(t(o,r)?n:i).push(o)}return{pass:n,fail:i}},K=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},Z=(e,t,n)=>(q(e,(e,i)=>{n=t(n,e,i)}),n),X=(e,t,n)=>($(e,(e,i)=>{n=t(n,e,i)}),n),J=(e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return F.some(r);if(n(r,i))break}return F.none()},ee=(e,t)=>J(e,t,N),te=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return F.some(n)}return F.none()},ne=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!v(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);j.apply(t,e[n])}return t},ie=(e,t)=>ne(Q(e,t)),re=(e,t)=>{for(let n=0,i=e.length;n<i;++n){if(!0!==t(e[n],n))return!1}return!0},oe=e=>{const t=z.call(e,0);return t.reverse(),t},se=(e,t)=>K(e,e=>!Y(t,e)),ae=(e,t)=>{const n={};for(let i=0,r=e.length;i<r;i++){const r=e[i];n[String(r)]=t(r,i)}return n},le=(e,t)=>{const n=z.call(e,0);return n.sort(t),n},ce=(e,t)=>t>=0&&t<e.length?F.some(e[t]):F.none(),de=e=>ce(e,0),ue=e=>ce(e,e.length-1),he=x(Array.from)?Array.from:e=>z.call(e),pe=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i.isSome())return i}return F.none()},me=Object.keys,fe=Object.hasOwnProperty,ge=(e,t)=>{const n=me(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}},ve=(e,t)=>ye(e,(e,n)=>({k:n,v:t(e,n)})),ye=(e,t)=>{const n={};return ge(e,(e,i)=>{const r=t(e,i);n[r.k]=r.v}),n},be=e=>(t,n)=>{e[n]=t},Ae=(e,t,n,i)=>{ge(e,(e,r)=>{(t(e,r)?n:i)(e,r)})},_e=(e,t)=>{const n={};return Ae(e,t,be(n),M),n},we=(e,t)=>{const n=[];return ge(e,(e,i)=>{n.push(t(e,i))}),n},xe=e=>we(e,L),Ce=(e,t)=>Ee(e,t)?F.from(e[t]):F.none(),Ee=(e,t)=>fe.call(e,t),Me=(e,t)=>Ee(e,t)&&void 0!==e[t]&&null!==e[t],Se=e=>{const t={};return $(e,e=>{t[e]={}}),me(t)},Te=e=>void 0!==e.length,ke=Array.isArray,Le=(e,t,n)=>{if(!e)return!1;if(n=n||e,Te(e)){for(let i=0,r=e.length;i<r;i++)if(!1===t.call(n,e[i],i,e))return!1}else for(const i in e)if(Ee(e,i)&&!1===t.call(n,e[i],i,e))return!1;return!0},De=(e,t)=>{const n=[];return Le(e,(i,r)=>{n.push(t(i,r,e))}),n},Ie=(e,t)=>{const n=[];return Le(e,(i,r)=>{t&&!t(i,r,e)||n.push(i)}),n},Re=(e,t,n,i)=>{let r=A(n)?e[0]:n;for(let n=0;n<e.length;n++)r=t.call(i,r,e[n],n);return r},Oe=(e,t,n)=>{for(let i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1},Pe=e=>e[e.length-1],Be=e=>{let t,n=!1;return(...i)=>(n||(n=!0,t=e.apply(null,i)),t)},Ne=()=>Ue(0,0),Ue=(e,t)=>({major:e,minor:t}),Fe={nu:Ue,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Ne():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.test(t))return i}})(e,t);if(!n)return{major:0,minor:0};const i=e=>Number(t.replace(n,"$"+e));return Ue(i(1),i(2))})(e,n)},unknown:Ne},ze=(e,t)=>{const n=String(t).toLowerCase();return ee(e,e=>e.search(n))},He=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,je=(e,t)=>Ye(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Ve=(e,t,n=0,i)=>{const r=e.indexOf(t,n);return-1!==r&&(!!A(i)||r+t.length<=i)},Ye=(e,t)=>He(e,t,0),Ge=(e,t)=>He(e,t,e.length-t.length),Qe=e=>t=>t.replace(e,""),$e=Qe(/^\s+|\s+$/g),qe=Qe(/^\s+/g),We=Qe(/\s+$/g),Ke=e=>e.length>0,Ze=e=>!Ke(e),Xe=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?F.none():F.some(n)},Je=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,et=e=>t=>Ve(t,e),tt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ve(e,"edge/")&&Ve(e,"chrome")&&Ve(e,"safari")&&Ve(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Je],search:e=>Ve(e,"chrome")&&!Ve(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ve(e,"msie")||Ve(e,"trident")},{name:"Opera",versionRegexes:[Je,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:et("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:et("firefox")},{name:"Safari",versionRegexes:[Je,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ve(e,"safari")||Ve(e,"mobile/"))&&Ve(e,"applewebkit")}],nt=[{name:"Windows",search:et("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ve(e,"iphone")||Ve(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:et("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:et("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:et("linux"),versionRegexes:[]},{name:"Solaris",search:et("sunos"),versionRegexes:[]},{name:"FreeBSD",search:et("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:et("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],it={browsers:k(tt),oses:k(nt)},rt="Edge",ot="Chromium",st="Opera",at="Firefox",lt="Safari",ct=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isEdge:i(rt),isChromium:i(ot),isIE:i("IE"),isOpera:i(st),isFirefox:i(at),isSafari:i(lt)}},dt={unknown:()=>ct({current:void 0,version:Fe.unknown()}),nu:ct,edge:k(rt),chromium:k(ot),ie:k("IE"),opera:k(st),firefox:k(at),safari:k(lt)},ut="Windows",ht="Android",pt="Linux",mt="macOS",ft="Solaris",gt="FreeBSD",vt="ChromeOS",yt=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isWindows:i(ut),isiOS:i("iOS"),isAndroid:i(ht),isMacOS:i(mt),isLinux:i(pt),isSolaris:i(ft),isFreeBSD:i(gt),isChromeOS:i(vt)}},bt={unknown:()=>yt({current:void 0,version:Fe.unknown()}),nu:yt,windows:k(ut),ios:k("iOS"),android:k(ht),linux:k(pt),macos:k(mt),solaris:k(ft),freebsd:k(gt),chromeos:k(vt)},At=(e,t,n)=>{const i=it.browsers(),r=it.oses(),o=t.bind(e=>((e,t)=>pe(t.brands,t=>{const n=t.brand.toLowerCase();return ee(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:Fe.nu(parseInt(t.version,10),0)}))}))(i,e)).orThunk(()=>((e,t)=>ze(e,t).map(e=>{const n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(i,e)).fold(dt.unknown,dt.nu),s=((e,t)=>ze(e,t).map(e=>{const n=Fe.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e).fold(bt.unknown,bt.nu),a=((e,t,n,i)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,s=e.isiOS()||e.isAndroid(),a=s||i("(pointer:coarse)"),l=r||!o&&s&&i("(min-device-width:768px)"),c=o||s&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:k(r),isiPhone:k(o),isTablet:k(l),isPhone:k(c),isTouch:k(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:k(d),isDesktop:k(u)}})(s,o,e,n);return{browser:o,os:s,deviceType:a}},_t=e=>window.matchMedia(e).matches;let wt=Be(()=>At(navigator.userAgent,F.from(navigator.userAgentData),_t));const xt=()=>wt(),Ct=navigator.userAgent,Et=xt(),Mt=Et.browser,St=Et.os,Tt=Et.deviceType,kt=-1!==Ct.indexOf("Windows Phone"),Lt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Mt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Mt.isIE(),windowsPhone:kt,browser:{current:Mt.current,version:Mt.version,isChromium:Mt.isChromium,isEdge:Mt.isEdge,isFirefox:Mt.isFirefox,isIE:Mt.isIE,isOpera:Mt.isOpera,isSafari:Mt.isSafari},os:{current:St.current,version:St.version,isAndroid:St.isAndroid,isChromeOS:St.isChromeOS,isFreeBSD:St.isFreeBSD,isiOS:St.isiOS,isLinux:St.isLinux,isMacOS:St.isMacOS,isSolaris:St.isSolaris,isWindows:St.isWindows},deviceType:{isDesktop:Tt.isDesktop,isiPad:Tt.isiPad,isiPhone:Tt.isiPhone,isPhone:Tt.isPhone,isTablet:Tt.isTablet,isTouch:Tt.isTouch,isWebView:Tt.isWebView}},Dt=/^\s*|\s*$/g,It=e=>_(e)?"":(""+e).replace(Dt,""),Rt=function(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),Le(e,(e,r)=>!1!==t.call(i,e,r,n)&&(Rt(e,t,n,i),!0)))},Ot={trim:It,isArray:ke,is:(e,t)=>t?!("array"!==t||!ke(e))||typeof e===t:void 0!==e,toArray:e=>{if(ke(e))return e;{const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const i=m(e)?e.split(t||","):e||[];let r=i.length;for(;r--;)n[i[r]]={};return n},each:Le,map:De,grep:Ie,inArray:(e,t)=>{if(e)for(let n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},hasOwn:Ee,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if(Ee(i,t)){const n=i[t];void 0!==n&&(e[t]=n)}}return e},walk:Rt,resolve:(e,t=window)=>{const n=e.split(".");for(let e=0,i=n.length;e<i&&(t=t[n[e]]);e++);return t},explode:(e,t)=>v(e)?e:""===e?[]:De(e.split(t||","),It),_addCacheSuffix:e=>{const t=Lt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Pt=(e,t,n=D)=>e.exists(e=>n(e,t)),Bt=(e,t,n=D)=>Nt(e,t,n).getOr(e.isNone()&&t.isNone()),Nt=(e,t,n)=>e.isSome()&&t.isSome()?F.some(n(e.getOrDie(),t.getOrDie())):F.none(),Ut=(e,t)=>e?F.some(t):F.none(),Ft="undefined"!=typeof window?window:Function("return this;")(),zt=(e,t)=>((e,t)=>{let n=null!=t?t:Ft;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),Ht=(e,t)=>{const n=((e,t)=>zt(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},jt=Object.getPrototypeOf,Vt=e=>{const t=zt("ownerDocument.defaultView",e);return f(e)&&((e=>Ht("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(jt(e).constructor.name))},Yt=e=>e.dom.nodeName.toLowerCase(),Gt=e=>e.dom.nodeType,Qt=e=>t=>Gt(t)===e,$t=e=>qt(e)&&Vt(e.dom),qt=Qt(1),Wt=Qt(3),Kt=Qt(9),Zt=Qt(11),Xt=e=>t=>qt(t)&&Yt(t)===e,Jt=(e,t,n)=>{if(!(m(n)||b(n)||C(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},en=(e,t,n)=>{Jt(e.dom,t,n)},tn=(e,t)=>{const n=e.dom;ge(t,(e,t)=>{Jt(n,t,e)})},nn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},rn=(e,t)=>F.from(nn(e,t)),on=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},sn=(e,t)=>{e.dom.removeAttribute(t)},an=e=>X(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),ln=(e,t)=>{const n=nn(e,t);return void 0===n||""===n?[]:n.split(" ")},cn=e=>void 0!==e.dom.classList,dn=e=>ln(e,"class"),un=(e,t)=>((e,t,n)=>{const i=ln(e,t).concat([n]);return en(e,t,i.join(" ")),!0})(e,"class",t),hn=(e,t)=>((e,t,n)=>{const i=K(ln(e,t),e=>e!==n);return i.length>0?en(e,t,i.join(" ")):sn(e,t),!1})(e,"class",t),pn=(e,t)=>{cn(e)?e.dom.classList.add(t):un(e,t)},mn=e=>{0===(cn(e)?e.dom.classList:dn(e)).length&&sn(e,"class")},fn=(e,t)=>{if(cn(e)){e.dom.classList.remove(t)}else hn(e,t);mn(e)},gn=(e,t)=>{const n=cn(e)?e.dom.classList.toggle(t):((e,t)=>Y(dn(e),t)?hn(e,t):un(e,t))(e,t);return mn(e),n},vn=(e,t)=>cn(e)&&e.dom.classList.contains(t),yn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},bn={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return yn(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return yn(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return yn(n)},fromDom:yn,fromPoint:(e,t,n)=>F.from(e.dom.elementFromPoint(t,n)).map(yn)},An=(e,t)=>{const n=[],i=e=>(n.push(e),t(e));let r=t(e);do{r=r.bind(i)}while(r.isSome());return n},_n=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},wn=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,xn=(e,t)=>e.dom===t.dom,Cn=(e,t)=>{const n=e.dom,i=t.dom;return n!==i&&n.contains(i)},En=e=>bn.fromDom(e.dom.ownerDocument),Mn=e=>Kt(e)?e:En(e),Sn=e=>bn.fromDom(Mn(e).dom.defaultView),Tn=e=>F.from(e.dom.parentNode).map(bn.fromDom),kn=e=>F.from(e.dom.parentElement).map(bn.fromDom),Ln=(e,t)=>{const n=x(t)?t:N;let i=e.dom;const r=[];for(;null!==i.parentNode&&void 0!==i.parentNode;){const e=i.parentNode,t=bn.fromDom(e);if(r.push(t),!0===n(t))break;i=e}return r},Dn=e=>F.from(e.dom.previousSibling).map(bn.fromDom),In=e=>F.from(e.dom.nextSibling).map(bn.fromDom),Rn=e=>oe(An(e,Dn)),On=e=>An(e,In),Pn=e=>Q(e.dom.childNodes,bn.fromDom),Bn=(e,t)=>{const n=e.dom.childNodes;return F.from(n[t]).map(bn.fromDom)},Nn=e=>Bn(e,0),Un=e=>Bn(e,e.dom.childNodes.length-1),Fn=e=>e.dom.childNodes.length,zn=e=>Zt(e)&&w(e.dom.host),Hn=x(Element.prototype.attachShadow)&&x(Node.prototype.getRootNode),jn=k(Hn),Vn=Hn?e=>bn.fromDom(e.dom.getRootNode()):Mn,Yn=e=>zn(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return bn.fromDom(t)})(Mn(e)),Gn=e=>bn.fromDom(e.dom.host),Qn=e=>{if(jn()&&w(e.target)){const t=bn.fromDom(e.target);if(qt(t)&&$n(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return de(t)}}return F.from(e.target)},$n=e=>w(e.dom.shadowRoot),qn=e=>{const t=Wt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=Vn(e);return zn(t)?F.some(t):F.none()})(bn.fromDom(t)).fold(()=>n.body.contains(t),T(qn,Gn))};var Wn=(e,t,n,i,r)=>e(n,i)?F.some(n):x(r)&&r(n)?F.none():t(n,i,r);const Kn=(e,t,n)=>{let i=e.dom;const r=x(n)?n:N;for(;i.parentNode;){i=i.parentNode;const e=bn.fromDom(i);if(t(e))return F.some(e);if(r(e))break}return F.none()},Zn=(e,t,n)=>Wn((e,t)=>t(e),Kn,e,t,n),Xn=(e,t)=>ee(e.dom.childNodes,e=>t(bn.fromDom(e))).map(bn.fromDom),Jn=(e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const r=bn.fromDom(e.childNodes[i]);if(t(r))return F.some(r);const o=n(e.childNodes[i]);if(o.isSome())return o}return F.none()};return n(e.dom)},ei=(e,t,n)=>Kn(e,e=>_n(e,t),n),ti=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return wn(n)?F.none():F.from(n.querySelector(e)).map(bn.fromDom)})(t,e),ni=(e,t,n)=>Wn((e,t)=>_n(e,t),ei,e,t,n),ii=(e,t=!1)=>{return qn(e)?e.dom.isContentEditable:(n=e,ni(n,"[contenteditable]")).fold(k(t),e=>"true"===ri(e));var n},ri=e=>e.dom.contentEditable,oi=e=>void 0!==e.style&&x(e.style.getPropertyValue),si=(e,t,n)=>{if(!m(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);oi(e)&&e.style.setProperty(t,n)},ai=(e,t,n)=>{const i=e.dom;si(i,t,n)},li=(e,t)=>{const n=e.dom;ge(t,(e,t)=>{si(n,t,e)})},ci=(e,t)=>{const n=e.dom,i=window.getComputedStyle(n).getPropertyValue(t);return""!==i||qn(e)?i:di(n,t)},di=(e,t)=>oi(e)?e.style.getPropertyValue(t):"",ui=(e,t)=>{const n=e.dom,i=di(n,t);return F.from(i).filter(e=>e.length>0)},hi=e=>{const t={},n=e.dom;if(oi(n))for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t[i]=n.style[i]}return t},pi=(e,t)=>{((e,t)=>{oi(e)&&e.style.removeProperty(t)})(e.dom,t),Pt(rn(e,"style").map($e),"")&&sn(e,"style")},mi=(e,t)=>{Tn(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},fi=(e,t)=>{In(e).fold(()=>{Tn(e).each(e=>{vi(e,t)})},e=>{mi(e,t)})},gi=(e,t)=>{Nn(e).fold(()=>{vi(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},vi=(e,t)=>{e.dom.appendChild(t.dom)},yi=(e,t)=>{mi(e,t),vi(t,e)},bi=(e,t)=>{$(t,t=>{vi(e,t)})},Ai=e=>{e.dom.textContent="",$(Pn(e),e=>{_i(e)})},_i=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},wi=e=>{const t=Pn(e);var n,i;t.length>0&&(n=e,$(i=t,(e,t)=>{const r=0===t?n:i[t-1];fi(r,e)})),_i(e)},xi=e=>Q(e,bn.fromDom),Ci=e=>e.dom.innerHTML,Ei=(e,t)=>{const n=En(e).dom,i=bn.fromDom(n.createDocumentFragment()),r=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Pn(bn.fromDom(n))})(t,n);bi(i,r),Ai(e),vi(e,i)},Mi=(e,t)=>n=>{e(n)&&t((e=>{const t=bn.fromDom(Qn(e).getOr(e.target)),n=()=>e.stopPropagation(),i=()=>e.preventDefault(),r=S(i,n);return((e,t,n,i,r,o,s)=>({target:e,x:t,y:n,stop:i,prevent:r,kill:o,raw:s}))(t,e.clientX,e.clientY,n,i,r,e)})(n))},Si=(e,t,n,i)=>((e,t,n,i,r)=>{const o=Mi(n,i);return e.dom.addEventListener(t,o,r),{unbind:I(Ti,e,t,o,r)}})(e,t,n,i,!1),Ti=(e,t,n,i)=>{e.dom.removeEventListener(t,n,i)},ki=(e,t)=>({left:e,top:t,translate:(n,i)=>ki(e+n,t+i)}),Li=ki,Di=(e,t)=>void 0!==e?e:void 0!==t?t:0,Ii=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Li(n.offsetLeft,n.offsetTop):qn(e)?(e=>{const t=e.getBoundingClientRect();return Li(t.left,t.top)})(t):Li(0,0)},Ri=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,i=t.body.scrollTop||t.documentElement.scrollTop;return Li(n,i)},Oi=(e,t,n)=>{const i=(void 0!==n?n.dom:document).defaultView;i&&i.scrollTo(e,t)},Pi=(e,t)=>{xt().browser.isSafari()&&x(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Bi=(e,t,n,i)=>({x:e,y:t,width:n,height:i,right:e+n,bottom:t+i}),Ni=e=>{const t=void 0===e?window:e,n=t.document,i=Ri(bn.fromDom(n));return(e=>{const t=void 0===e?window:e;return xt().browser.isFirefox()?F.none():F.from(t.visualViewport)})(t).fold(()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return Bi(i.left,i.top,n,r)},e=>Bi(Math.max(e.pageLeft,i.left),Math.max(e.pageTop,i.top),e.width,e.height))},Ui=(e,t)=>{let n=[];return $(Pn(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(Ui(e,t))}),n},Fi=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return wn(n)?[]:Q(n.querySelectorAll(e),bn.fromDom)})(t,e),zi=(e,t,n)=>ei(e,t,n).isSome();class Hi{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,i){if(e){if(!i&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(t=i[n],t)return t}}}findPreviousNode(e,t){if(e){const n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return n}const i=e.parentNode;if(i&&i!==this.rootNode)return i}}}const ji=e=>t=>!!t&&t.nodeType===e,Vi=e=>!!e&&!Object.getPrototypeOf(e),Yi=ji(1),Gi=e=>Yi(e)&&$t(bn.fromDom(e)),Qi=e=>{const t=e.toLowerCase();return e=>w(e)&&e.nodeName.toLowerCase()===t},$i=e=>{const t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return Y(t,n)}return!1}},qi=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(Yi(t)){const i=t.ownerDocument.defaultView;if(i)for(let r=0;r<n.length;r++){const o=i.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[r])return!0}}return!1}},Wi=e=>t=>Yi(t)&&t.hasAttribute(e),Ki=e=>Yi(e)&&e.hasAttribute("data-mce-bogus"),Zi=e=>Yi(e)&&"TABLE"===e.tagName,Xi=e=>t=>{if(Gi(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Ji=$i(["textarea","input"]),er=ji(3),tr=ji(4),nr=ji(7),ir=ji(8),rr=ji(9),or=ji(11),sr=Qi("br"),ar=Qi("img"),lr=Xi("true"),cr=Xi("false"),dr=$i(["td","th"]),ur=$i(["td","th","caption"]),hr=$i(["video","audio","object","embed"]),pr=Qi("li"),mr=Qi("details"),fr=Qi("summary"),gr="\ufeff",vr=" ",yr=e=>e===gr,br=((e,t)=>{const n=t=>e(t)?F.from(t.dom.nodeValue):F.none();return{get:i=>{if(!e(i))throw new Error("Can only get "+t+" value of a "+t+" node");return n(i).getOr("")},getOption:n,set:(n,i)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=i}}})(Wt,"text"),Ar=e=>br.get(e),_r=e=>br.getOption(e),wr=e=>{let t;return n=>(t=t||ae(e,U),Ee(t,Yt(n)))},xr=e=>qt(e)&&"br"===Yt(e),Cr=wr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Er=wr(["ul","ol","dl"]),Mr=wr(["li","dd","dt"]),Sr=wr(["thead","tbody","tfoot"]),Tr=wr(["td","th"]),kr=wr(["pre","script","textarea","style"]),Lr=e=>{const t=Fi(e,"br"),n=K((e=>{const t=[];let n=e.dom;for(;n;)t.push(bn.fromDom(n)),n=n.lastChild;return t})(e).slice(-1),xr);t.length===n.length&&$(n,_i)},Dr=()=>{const e=bn.fromTag("br");return en(e,"data-mce-bogus","1"),e},Ir=e=>{Ai(e),vi(e,Dr())},Rr=gr,Or=yr,Pr=e=>e.replace(/\uFEFF/g,""),Br=Yi,Nr=er,Ur=e=>(Nr(e)&&(e=e.parentNode),Br(e)&&e.hasAttribute("data-mce-caret")),Fr=e=>Nr(e)&&Or(e.data),zr=e=>Ur(e)||Fr(e),Hr=e=>e.firstChild!==e.lastChild||!sr(e.firstChild),jr=e=>{const t=e.container();return!!er(t)&&(t.data.charAt(e.offset())===Rr||e.isAtStart()&&Fr(t.previousSibling))},Vr=e=>{const t=e.container();return!!er(t)&&(t.data.charAt(e.offset()-1)===Rr||e.isAtEnd()&&Fr(t.nextSibling))},Yr=e=>Nr(e)&&e.data[0]===Rr,Gr=e=>Nr(e)&&e.data[e.data.length-1]===Rr,Qr=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;const n=e.getElementsByTagName("br"),i=n[n.length-1];Ki(i)&&(null===(t=i.parentNode)||void 0===t||t.removeChild(i))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,$r=e=>Ur(e.startContainer),qr=lr,Wr=cr,Kr=sr,Zr=er,Xr=$i(["script","style","textarea"]),Jr=$i(["img","input","textarea","hr","iframe","video","audio","object","embed"]),eo=$i(["table"]),to=zr,no=e=>!to(e)&&(Zr(e)?!Xr(e.parentNode):Jr(e)||Kr(e)||eo(e)||io(e)),io=e=>!(e=>Yi(e)&&"true"===e.getAttribute("unselectable"))(e)&&Wr(e),ro=(e,t)=>no(e)&&((e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(io(n))return!1;if(qr(n))return!0}return!0})(e,t),oo=/^[ \t\r\n]*$/,so=e=>oo.test(e),ao=e=>{for(const t of e)if(!yr(t))return!1;return!0},lo=e=>"\n"===e||"\r"===e,co=(e,t=4,n=!0,i=!0)=>{const r=((e,t)=>t<=0?"":new Array(t+1).join(e))(" ",t),o=e.replace(/\t/g,r),s=X(o,(e,t)=>(e=>-1!==" \f\t\v".indexOf(e))(t)||t===vr?e.pcIsSpace||""===e.str&&n||e.str.length===o.length-1&&i||((e,t)=>t<e.length&&t>=0&&lo(e[t]))(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+vr}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:lo(t),str:e.str+t},{pcIsSpace:!1,str:""});return s.str},uo=(e,t)=>er(e)&&so(e.data)&&!((e,t)=>{const n=bn.fromDom(t),i=bn.fromDom(e);return zi(i,"pre,code",I(xn,n))})(e,t),ho=(e,t)=>no(e)&&!uo(e,t)||(e=>Yi(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||po(e),po=Wi("data-mce-bookmark"),mo=Wi("data-mce-bogus"),fo=(go="data-mce-bogus",vo="all",e=>Yi(e)&&e.getAttribute(go)===vo);var go,vo;const yo=e=>kn(bn.fromDom(e)).exists(e=>!ii(e)),bo=(e,t=!0)=>((e,t)=>{let n=0;if(ho(e,e))return!1;{let i=e.firstChild;if(!i)return!0;const r=new Hi(i,e);do{if(t){if(fo(i)){i=r.next(!0);continue}if(mo(i)){i=r.next();continue}}if(lr(i)&&yo(i))return!1;if(sr(i))n++,i=r.next();else{if(ho(i,e))return!1;i=r.next()}}while(i);return n<=1}})(e.dom,t),Ao=e=>"svg"===e.toLowerCase(),_o=e=>Ao(e.nodeName),wo=e=>"svg"===(null==e?void 0:e.nodeName)?"svg":"html",xo=["svg"],Co="data-mce-block",Eo=e=>Q((e=>K(me(e),e=>!/[A-Z]/.test(e)))(e),e=>`${e}:`+Q(xo,t=>`not(${t} ${e})`).join(":")).join(","),Mo=(e,t)=>w(t.querySelector(e))?(t.setAttribute(Co,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Co),!1),So=(e,t)=>{const n=Eo(e.getTransparentElements()),i=Eo(e.getBlockElements());return K(t.querySelectorAll(n),e=>Mo(i,e))},To=(e,t)=>{var n;const i=t?"lastChild":"firstChild";for(let t=e[i];t;t=t[i])if(bo(bn.fromDom(t)))return void(null===(n=t.parentNode)||void 0===n||n.removeChild(t))},ko=(e,t,n)=>{const i=e.getBlockElements(),r=bn.fromDom(t),o=e=>Yt(e)in i,s=e=>xn(e,r);$(xi(n),t=>{Kn(t,o,s).each(n=>{const i=((e,t)=>K(Pn(e),t))(t,t=>o(t)&&!e.isValidChild(Yt(n),Yt(t)));if(i.length>0){const t=kn(n);$(i,e=>{Kn(e,o,s).each(t=>{((e,t)=>{const n=document.createRange(),i=e.parentNode;if(i){n.setStartBefore(e),n.setEndBefore(t);const r=n.extractContents();To(r,!0),n.setStartAfter(t),n.setEndAfter(e);const o=n.extractContents();To(o,!1),bo(bn.fromDom(r))||i.insertBefore(r,e),bo(bn.fromDom(t))||i.insertBefore(t,e),bo(bn.fromDom(o))||i.insertBefore(o,e),i.removeChild(e)}})(t.dom,e.dom)})}),t.each(t=>So(e,t.dom))}})})},Lo=(e,t)=>{const n=So(e,t);ko(e,t,n),((e,t,n)=>{$([...n,...Po(e,t)?[t]:[]],t=>$(Fi(bn.fromDom(t),t.nodeName.toLowerCase()),t=>{Bo(e,t.dom)&&wi(t)}))})(e,t,n)},Do=(e,t)=>{if(Oo(e,t)){const n=Eo(e.getBlockElements());Mo(n,t)}},Io=e=>e.hasAttribute(Co),Ro=(e,t)=>Ee(e.getTransparentElements(),t),Oo=(e,t)=>Yi(t)&&Ro(e,t.nodeName),Po=(e,t)=>Oo(e,t)&&Io(t),Bo=(e,t)=>Oo(e,t)&&!Io(t),No=(e,t)=>1===t.type&&Ro(e,t.name)&&m(t.attr(Co)),Uo=xt().browser,Fo=e=>ee(e,qt),zo=(e,t)=>e.children&&Y(e.children,t),Ho=(e,t,n)=>{let i=0,r=0;const o=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===ci(bn.fromDom(e),"position")){const n=t.getBoundingClientRect();return i=n.left+(o.documentElement.scrollLeft||e.scrollLeft)-o.documentElement.clientLeft,r=n.top+(o.documentElement.scrollTop||e.scrollTop)-o.documentElement.clientTop,{x:i,y:r}}let s=t;for(;s&&s!==n&&s.nodeType&&!zo(s,n);){const e=s;i+=e.offsetLeft||0,r+=e.offsetTop||0,s=e.offsetParent}for(s=t.parentNode;s&&s!==n&&s.nodeType&&!zo(s,n);)i-=s.scrollLeft||0,r-=s.scrollTop||0,s=s.parentNode;r+=(e=>Uo.isFirefox()&&"table"===Yt(e)?Fo(Pn(e)).filter(e=>"caption"===Yt(e)).bind(e=>Fo(On(e)).map(t=>{const n=t.dom.offsetTop,i=e.dom.offsetTop,r=e.dom.offsetHeight;return n<=i?-r:0})).getOr(0):0)(bn.fromDom(t))}return{x:i,y:r}},jo=(e,t={})=>{let n=0;const i={},r=bn.fromDom(e),o=Mn(r),s=e=>{vi(Yn(r),e)},a=e=>{const t=Yn(r);ti(t,"#"+e).each(_i)},l=e=>Ce(i,e).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=e=>new Promise((n,r)=>{let a;const c=Ot._addCacheSuffix(e),d=l(c);i[c]=d,d.count++;const u=(e,t)=>{$(e,B),d.status=t,d.passed=[],d.failed=[],a&&(a.onload=null,a.onerror=null,a=null)},h=()=>u(d.passed,2),p=()=>u(d.failed,3);if(n&&d.passed.push(n),r&&d.failed.push(r),1===d.status)return;if(2===d.status)return void h();if(3===d.status)return void p();d.status=1;const m=bn.fromTag("link",o.dom);tn(m,{rel:"stylesheet",type:"text/css",id:d.id}),t.contentCssCors&&en(m,"crossOrigin","anonymous"),t.referrerPolicy&&en(m,"referrerpolicy",t.referrerPolicy),a=m.dom,a.onload=h,a.onerror=p,s(m),en(m,"href",c)}),d=e=>{const t=Ot._addCacheSuffix(e);Ce(i,t).each(e=>{0===--e.count&&(delete i[t],a(e.id))})};return{load:c,loadRawCss:(e,t)=>{const n=l(e);i[e]=n,n.count++;const r=bn.fromTag("style",o.dom);tn(r,{rel:"stylesheet",type:"text/css",id:n.id}),r.dom.innerHTML=t,s(r)},loadAll:e=>Promise.allSettled(Q(e,e=>c(e).then(k(e)))).then(e=>{const t=W(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(Q(t.fail,e=>e.reason)):Q(t.pass,e=>e.value)}),unload:d,unloadRawCss:e=>{Ce(i,e).each(t=>{0===--t.count&&(delete i[e],a(t.id))})},unloadAll:e=>{$(e,e=>{d(e)})},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},Vo=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const i=Vn(t).dom;return F.from(e.get(i)).getOrThunk(()=>{const t=jo(i,n);return e.set(i,t),t})}}})(),Yo=(e,t,n)=>w(e)&&(ho(e,t)||n.isInline(e.nodeName.toLowerCase())),Go=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Qo=(e,t,n)=>er(e)&&e.data.length>0&&((e,t,n)=>{const i=new Hi(e,t).prev(!1),r=new Hi(e,t).next(!1),o=A(i)||Yo(i,t,n),s=A(r)||Yo(r,t,n);return o&&s})(e,t,n),$o=(e,t,n,i)=>{var r;const o=i||t;if(Yi(t)&&Go(t))return t;const s=t.childNodes;for(let t=s.length-1;t>=0;t--)$o(e,s[t],n,o);if(Yi(t)){const e=t.childNodes;1===e.length&&Go(e[0])&&(null===(r=t.parentNode)||void 0===r||r.insertBefore(e[0],t))}return(e=>or(e)||rr(e))(t)||ho(t,o)||(e=>!!Yi(e)&&e.childNodes.length>0)(t)||Qo(t,o,n)||e.remove(t),t},qo=Ot.makeMap,Wo=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ko=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zo=/[<>&\"\']/g,Xo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Jo={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},es={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ts={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ns=(e,t)=>{const n={};if(e){const i=e.split(",");t=t||10;for(let e=0;e<i.length;e+=2){const r=String.fromCharCode(parseInt(i[e],t));if(!es[r]){const t="&"+i[e+1]+";";n[r]=t,n[t]=r}}return n}},is=ns("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),rs=(e,t)=>e.replace(t?Wo:Ko,e=>es[e]||e),os=(e,t)=>e.replace(t?Wo:Ko,e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":es[e]||"&#"+e.charCodeAt(0)+";"),ss=(e,t,n)=>{const i=n||is;return e.replace(t?Wo:Ko,e=>es[e]||i[e]||e)},as={encodeRaw:rs,encodeAllRaw:e=>(""+e).replace(Zo,e=>es[e]||e),encodeNumeric:os,encodeNamed:ss,getEncodeFunc:(e,t)=>{const n=ns(t)||is,i=(e,t)=>e.replace(t?Wo:Ko,e=>void 0!==es[e]?es[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"),r=(e,t)=>ss(e,t,n),o=qo(e.replace(/\+/g,","));return o.named&&o.numeric?i:o.named?t?r:ss:o.numeric?os:rs},decode:e=>e.replace(Xo,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Jo[t]||String.fromCharCode(t):ts[e]||is[e]||(e=>{const t=bn.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e))},ls=(e,t)=>(e=Ot.trim(e))?e.split(t||" "):[],cs=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),ds=(e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ie(ls(t,","),t=>{const i=n.exec(t);if(i){const t=i[1],n=i[2],r=i[3],o=i[4],s=i[5],a={attributes:{},attributesOrder:[]};if(e.each(e=>((e,t)=>{ge(e.attributes,(e,n)=>{t.attributes[n]=e}),t.attributesOrder.push(...e.attributesOrder)})(e,a)),"#"===t?a.paddEmpty=!0:"-"===t&&(a.removeEmpty=!0),"!"===o&&(a.removeEmptyAttrs=!0),s&&((e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,i=/[*?+]/,{attributes:r,attributesOrder:o}=t;$(ls(e,"|"),e=>{const s=n.exec(e);if(s){const e={},n=s[1],a=s[2].replace(/[\\:]:/g,":"),l=s[3],c=s[4];if("!"===n&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(a),e.required=!0),"-"===n)return delete r[a],void o.splice(Ot.inArray(o,a),1);if(l&&("="===l?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:a,value:c}),e.defaultValue=c):"~"===l?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:a,value:c}),e.forcedValue=c):"<"===l&&(e.validValues=Ot.makeMap(c,"?"))),i.test(a)){const n=e;t.attributePatterns=t.attributePatterns||[],n.pattern=cs(a),t.attributePatterns.push(n)}else r[a]||o.push(a),r[a]=e}})})(s,a),r&&(a.outputName=n),"@"===n){if(!e.isNone())return[];e=F.some(a)}return[r?{name:n,element:a,aliasName:r}:{name:n,element:a}]}return[]})},us={},hs=Ot.makeMap,ps=Ot.each,ms=Ot.extend,fs=Ot.explode,gs=(e,t={})=>{const n=hs(e," ",hs(e.toUpperCase()," "));return ms(n,t)},vs=e=>gs("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ys=(e,t)=>{if(e){const n={};return m(e)&&(e={"*":e}),ps(e,(e,i)=>{n[i]=n[i.toUpperCase()]="map"===t?hs(e,/[, ]/):fs(e,/[, ]/)}),n}},bs=(e={})=>{var t;const n={},i={};let r=[];const o={},s={},a=(t,n,i)=>{const r=e[t];if(r)return hs(r,/[, ]/,hs(r.toUpperCase(),/[, ]/));{let e=us[t];return e||(e=gs(n,i),us[t]=e),e}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",c=(e=>{const{globalAttributes:t,phrasingContent:n,flowContent:i}=(e=>{let t,n,i;t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",i="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",i+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(t+=" xml:lang",i=[i,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,i].join(" ");return{globalAttributes:t,blockContent:n,phrasingContent:i,flowContent:r}})(e),r={},o=(e,t,n)=>{r[e]={attributes:ae(t,k({})),attributesOrder:t,children:ae(n,k({}))}},s=(e,n="",i="")=>{const r=ls(i),s=ls(e);let a=s.length;const l=ls([t,n].join(" "));for(;a--;)o(s[a],l.slice(),r)},a=(e,t)=>{const n=ls(e),i=ls(t);let o=n.length;for(;o--;){const e=r[n[o]];for(let t=0,n=i.length;t<n;t++)e.attributes[i[t]]={},e.attributesOrder.push(i[t])}};"html5-strict"!==e&&($(ls("acronym applet basefont big font strike tt"),e=>{s(e,"",n)}),$(ls("center dir isindex noframes"),e=>{s(e,"",i)}));return s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),s("dd div","",i),s("address dt caption","","html4"===e?n:i),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),s("blockquote","cite",i),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",i),s("dl","","dt dd"),s("a","href target rel media hreflang type","html4"===e?n:i),s("q","cite",n),s("ins del","cite datetime",i),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",i),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),s("param","name value"),s("map","name",[i,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",i),s("th","colspan rowspan headers scope abbr",i),s("form","accept-charset action autocomplete enctype method name novalidate target",i),s("fieldset","disabled form name",[i,"legend"].join(" ")),s("label","form for",n),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:n),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[i,"li"].join(" ")),s("noscript","",i),"html4"!==e&&(s("wbr"),s("ruby","",[n,"rt rp"].join(" ")),s("figcaption","",i),s("mark rt rp bdi","",n),s("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),s("canvas","width height",i),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[n,"option"].join(" ")),s("article section nav aside main header footer","",i),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[i,"figcaption"].join(" ")),s("time","datetime",n),s("dialog","open",i),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",n),s("progress","value max",n),s("meter","value min max low high optimum",n),s("details","open",[i,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name"),o("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),"html4"!==e&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&$([r.video,r.audio],e=>{delete e.children.audio,delete e.children.video}),$(ls("a form meter progress dfn"),e=>{r[e]&&delete r[e].children[e]}),delete r.caption.children.table,delete r.script,r})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const d=ys(e.valid_styles),u=ys(e.invalid_styles,"map"),h=ys(e.valid_classes,"map"),p=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),m=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=a("non_empty_elements",v+" pre svg",f),b=a("move_caret_before_on_enter_elements",v+" table",f),A="h1 h2 h3 h4 h5 h6",_=a("text_block_elements",A+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",_),x=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),C=a("transparent_elements","a ins del canvas map"),E=a("wrap_block_elements","pre "+A);ps("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{s[e]=new RegExp("</"+e+"[^>]*>","gi")});const M=e=>{const t=F.from(n["@"]),i=/[*?+]/;$(ds(t,null!=e?e:""),({name:e,element:t,aliasName:o})=>{if(o&&(n[o]=t),i.test(e)){const n=t;n.pattern=cs(e),r.push(n)}else n[e]=t})},S=e=>{r=[],$(me(n),e=>{delete n[e]}),M(e)},T=e=>{delete us.text_block_elements,delete us.block_elements,$((e=>{const t=/^(~)?(.+)$/;return ie(ls(e,","),e=>{const n=t.exec(e);if(n){const e="~"===n[1];return[{inline:e,cloneName:e?"span":"div",name:n[2]}]}return[]})})(null!=e?e:""),({inline:e,name:t,cloneName:r})=>{if(i[t]=i[r],o[t]=r,y[t.toUpperCase()]={},y[t]={},e||(w[t.toUpperCase()]={},w[t]={}),!n[t]){let e=n[r];e=ms({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,n[t]=e}ge(i,(e,n)=>{e[r]&&(i[n]=e=ms({},i[n]),e[t]=e[r])})})},L=e=>{$((e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ie(ls(e,","),e=>{const n=t.exec(e);if(n){const e=n[1],t=e?(e=>"-"===e?"remove":"add")(e):"replace";return[{operation:t,name:n[2],validChildren:ls(n[3],"|")}]}return[]})})(null!=e?e:""),({operation:e,name:t,validChildren:n})=>{const r="replace"===e?{"#comment":{}}:i[t];$(n,t=>{"remove"===e?delete r[t]:r[t]={}}),i[t]=r})},D=e=>{const t=n[e];if(t)return t;let i=r.length;for(;i--;){const t=r[i];if(t.pattern.test(e))return t}};e.valid_elements?(S(e.valid_elements),ps(c,(e,t)=>{i[t]=e.children})):(ps(c,(e,t)=>{n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},i[t]=e.children}),ps(ls("strong/b em/i"),e=>{const t=ls(e,"/");n[t[1]].outputName=t[0]}),ps(x,(t,i)=>{n[i]&&(e.padd_empty_block_inline_children&&(n[i].paddInEmptyBlock=!0),n[i].removeEmpty=!0)}),ps(ls("ol ul blockquote a table tbody"),e=>{n[e]&&(n[e].removeEmpty=!0)}),ps(ls("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{n[e]&&(n[e].paddEmpty=!0)}),ps(ls("span"),e=>{n[e].removeEmptyAttrs=!0})),delete n.svg,T(e.custom_elements),L(e.valid_children),M(e.extended_valid_elements),L("+ol[ul|ol],+ul[ul|ol]"),ps({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{n[t]&&(n[t].parentsRequired=ls(e))}),e.invalid_elements&&ps(fs(e.invalid_elements),e=>{n[e]&&delete n[e]}),D("span")||M("span[!data-mce-type|*]");const I=k(d),R=k(u),O=k(h),P=k(g),B=k(w),N=k(_),U=k(x),z=k(Object.seal(f)),H=k(m),j=k(y),V=k(b),Y=k(p),G=k(C),Q=k(E),q=k(Object.seal(s)),W=(e,t)=>{const n=D(e);if(n){if(!t)return!0;{if(n.attributes[t])return!0;const e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}}return!1},K=e=>Ee(B(),e),Z=e=>!Ye(e,"#")&&W(e)&&!K(e),X=k(o);return{type:l,children:i,elements:n,getValidStyles:I,getValidClasses:O,getBlockElements:B,getInvalidStyles:R,getVoidElements:z,getTextBlockElements:N,getTextInlineElements:U,getBoolAttrs:P,getElementRule:D,getSelfClosingElements:H,getNonEmptyElements:j,getMoveCaretBeforeOnEnterElements:V,getWhitespaceElements:Y,getTransparentElements:G,getSpecialElements:q,isValidChild:(e,t)=>{const n=i[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:W,isBlock:K,isInline:Z,isWrapper:e=>Ee(Q(),e)||Z(e),getCustomElements:X,addValidElements:M,setValidElements:S,addCustomElements:T,addValidChildren:L}},As=e=>je(e,"#").toUpperCase(),_s=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ws=e=>(e=>({value:As(e)}))(_s(e.red)+_s(e.green)+_s(e.blue)),xs=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Cs=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Es=(e,t,n,i)=>({red:e,green:t,blue:n,alpha:i}),Ms=(e,t,n,i)=>{const r=parseInt(e,10),o=parseInt(t,10),s=parseInt(n,10),a=parseFloat(i);return Es(r,o,s,a)},Ss=e=>{if("transparent"===e)return F.some(Es(0,0,0,0));const t=xs.exec(e);if(null!==t)return F.some(Ms(t[1],t[2],t[3],"1"));const n=Cs.exec(e);return null!==n?F.some(Ms(n[1],n[2],n[3],n[4])):F.none()},Ts=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,ks=e=>Ss(e).map(ws).map(e=>"#"+e.value).getOr(e),Ls=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,o={};let s,a;const l=gr;t&&(s=t.getValidStyles(),a=t.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let e=0;e<c.length;e++)o[c[e]]=l+e,o[l+e]=c[e];const d={parse:t=>{const s={};let a=!1;const c=e.url_converter,u=e.url_converter_scope||d,h=(e,t,n)=>{const i=s[e+"-top"+t];if(!i)return;const r=s[e+"-right"+t];if(!r)return;const o=s[e+"-bottom"+t];if(!o)return;const a=s[e+"-left"+t];if(!a)return;const l=[i,r,o,a];let c=l.length-1;for(;c--&&l[c]===l[c+1];);c>-1&&n||(s[e+t]=-1===c?l[0]:l.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])},p=e=>{const t=s[e];if(!t)return;const n=t.indexOf(",")>-1?[t]:t.split(" ");let i=n.length;for(;i--;)if(n[i]!==n[0])return!1;return s[e]=n[0],!0},f=e=>(a=!0,o[e]),g=(e,t)=>(a&&(e=e.replace(/\uFEFF[0-9]/g,e=>o[e])),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),v=e=>String.fromCharCode(parseInt(e.slice(1),16)),y=e=>e.replace(/\\[0-9a-f]+/gi,v),b=(t,n,i,r,o,s)=>{if(o=o||s)return"'"+(o=g(o)).replace(/\'/g,"\\'")+"'";if(n=g(n||i||r||""),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return c&&(n=c.call(u,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){let o;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,f));o=i.exec(t);){i.lastIndex=o.index+o[0].length;let t=o[1].replace(r,"").toLowerCase(),c=o[2].replace(r,"");if(t&&c){if(t=y(t),c=y(c),-1!==t.indexOf(l)||-1!==t.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(c)))continue;"font-weight"===t&&"700"===c?c="bold":"color"!==t&&"background-color"!==t||(c=c.toLowerCase()),m(e.force_hex_color)&&"off"!==e.force_hex_color&&Ss(c).each(t=>{"always"!==e.force_hex_color&&1!==t.alpha||(c=ks(Ts(t)))}),c=c.replace(n,b),s[t]=a?g(c,!0):c}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),A="border",w="border-style",x="border-color",p(_="border-width")&&p(w)&&p(x)&&(s[A]=s[_]+" "+s[w]+" "+s[x],delete s[_],delete s[w],delete s[x]),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}var A,_,w,x;return s},serialize:(e,t)=>{let n="";const i=(t,i)=>{const r=i[t];if(r)for(let t=0,i=r.length;t<i;t++){const i=r[t],o=e[i];o&&(n+=(n.length>0?" ":"")+i+": "+o+";")}};return t&&s?(i("*",s),i(t,s)):ge(e,(e,i)=>{e&&((e,t)=>{if(!a||!t)return!0;let n=a["*"];return!(n&&n[e]||(n=a[t],n&&n[e]))})(i,t)&&(n+=(n.length>0?" ":"")+i+": "+e+";")}),n}};return d},Ds={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Is=e=>_(e.preventDefault)||(e=>e instanceof Event||x(e.initEvent))(e),Rs=(e,t)=>{const n=null!=t?t:{};for(const t in e)Ee(Ds,t)||(n[t]=e[t]);return w(e.composedPath)&&(n.composedPath=()=>e.composedPath()),w(e.getModifierState)&&(n.getModifierState=t=>e.getModifierState(t)),w(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Os=(e,t,n,i)=>{var r;const o=Rs(t,i);return o.type=e,_(o.target)&&(o.target=null!==(r=o.srcElement)&&void 0!==r?r:n),Is(t)&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=U,x(t.preventDefault)&&t.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=U,x(t.stopPropagation)&&t.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=U,o.stopPropagation()},(e=>e.isDefaultPrevented===U||e.isDefaultPrevented===N)(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?U:N,o.isPropagationStopped=!0===o.cancelBubble?U:N,o.isImmediatePropagationStopped=N)),o},Ps=/^(?:mouse|contextmenu)|click/,Bs=(e,t,n,i)=>{e.addEventListener(t,n,i||!1)},Ns=(e,t,n,i)=>{e.removeEventListener(t,n,i||!1)},Us=(e,t)=>{const n=Os(e.type,e,document,t);if((e=>w(e)&&Ps.test(e.type))(e)&&A(e.pageX)&&!A(e.clientX)){const t=n.target.ownerDocument||document,i=t.documentElement,r=t.body,o=n;o.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),o.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)}return n},Fs=(e,t,n)=>{const i=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const o=()=>{Ns(e,"DOMContentLoaded",o),Ns(e,"load",o),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};"complete"===i.readyState||"interactive"===i.readyState&&i.body?o():Bs(e,"DOMContentLoaded",o),n.domLoaded||Bs(e,"load",o)};class zs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,i){const r=this;let o;const s=window,a=e=>{r.executeHandlers(Us(e||s.event),l)};if(!e||er(e)||ir(e))return n;let l;e[r.expando]?l=e[r.expando]:(l=r.count++,e[r.expando]=l,r.events[l]={}),i=i||e;const c=t.split(" ");let d=c.length;for(;d--;){let t=c[d],u=a,h=!1,p=!1;"DOMContentLoaded"===t&&(t="ready"),r.domLoaded&&"ready"===t&&"complete"===e.readyState?n.call(i,Us({type:t})):(r.hasFocusIn||"focusin"!==t&&"focusout"!==t||(h=!0,p="focusin"===t?"focus":"blur",u=e=>{const t=Us(e||s.event);t.type="focus"===t.type?"focusin":"focusout",r.executeHandlers(t,l)}),o=r.events[l][t],o?"ready"===t&&r.domLoaded?n(Us({type:t})):o.push({func:n,scope:i}):(r.events[l][t]=o=[{func:n,scope:i}],o.fakeName=p,o.capture=h,o.nativeHandler=u,"ready"===t?Fs(e,u,r):Bs(e,p||t,u,h)))}return e=o=null,n}unbind(e,t,n){if(!e||er(e)||ir(e))return this;const i=e[this.expando];if(i){let r=this.events[i];if(t){const i=t.split(" ");let o=i.length;for(;o--;){const t=i[o],s=r[t];if(s){if(n){let e=s.length;for(;e--;)if(s[e].func===n){const n=s.nativeHandler,i=s.fakeName,o=s.capture,a=s.slice(0,e).concat(s.slice(e+1));a.nativeHandler=n,a.fakeName=i,a.capture=o,r[t]=a}}n&&0!==s.length||(delete r[t],Ns(e,s.fakeName||t,s.nativeHandler,s.capture))}}}else ge(r,(t,n)=>{Ns(e,t.fakeName||n,t.nativeHandler,t.capture)}),r={};for(const e in r)if(Ee(r,e))return this;delete this.events[i];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||er(e)||ir(e))return this;const i=Us({type:t,target:e},n);do{const t=e[this.expando];t&&this.executeHandlers(i,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!i.isPropagationStopped());return this}clean(e){if(!e||er(e)||ir(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const t=e.getElementsByTagName("*");let n=t.length;for(;n--;)(e=t[n])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const n=this.events[t],i=n&&n[e.type];if(i)for(let t=0,n=i.length;t<n;t++){const n=i[t];if(n&&!1===n.func.call(n.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}zs.Event=new zs;const Hs=Ot.each,js=Ot.grep,Vs="data-mce-style",Ys=Ot.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Gs=(e,t,n)=>{_(n)||""===n?sn(e,t):en(e,t,n)},Qs=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),$s=(e,t)=>{let n=0;if(e)for(let i=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const e=r.nodeType;(!t||!er(r)||e!==i&&r.data.length)&&(n++,i=e)}return n},qs=(e,t)=>{const n=nn(t,"style"),i=e.serialize(e.parse(n),Yt(t));Gs(t,Vs,i)},Ws=(e,t,n)=>{const i=Qs(t);_(n)||""===n?pi(e,i):ai(e,i,((e,t)=>C(e)?Ee(Ys,t)?e+"":e+"px":e)(n,i))},Ks=(e,t={})=>{const n={},i=window,r={};let o=0;const s=Vo.forElement(bn.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:bs({}),c=Ls({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),d=t.ownEvents?new zs:zs.Event,u=l.getBlockElements(),h=t=>t&&e&&m(t)?e.getElementById(t):t,p=e=>{const t=h(e);return w(t)?bn.fromDom(t):null},f=(e,t,n="")=>{let i;const r=p(e);if(w(r)&&qt(r)){const e=q[t];i=e&&e.get?e.get(r.dom,t):nn(r,t)}return w(i)?i:n},g=e=>{const t=h(e);return _(t)?[]:t.attributes},y=(e,n,i)=>{D(e,e=>{if(Yi(e)){const r=bn.fromDom(e),o=""===i?null:i,s=nn(r,n),a=q[n];a&&a.set?a.set(r.dom,o,n):Gs(r,n,o),s!==o&&t.onSetAttrib&&t.onSetAttrib({attrElm:r.dom,attrName:n,attrValue:o})}})},b=()=>t.root_element||e.body,A=(t,n)=>Ho(e.body,h(t),n),C=(e,t,n)=>{const i=h(e);var r;if(!_(i)&&(Gi(i)||Yi(r=i)&&"http://www.w3.org/2000/svg"===r.namespaceURI))return n?ci(bn.fromDom(i),Qs(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),i.style?i.style[t]:void 0)},E=e=>{const t=h(e);if(!t)return{w:0,h:0};let n=C(t,"width"),i=C(t,"height");return n&&-1!==n.indexOf("px")||(n="0"),i&&-1!==i.indexOf("px")||(i="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(i,10)||t.offsetHeight||t.clientHeight}},S=(e,t)=>{if(!e)return!1;const n=v(e)?e:[e];return G(n,e=>_n(bn.fromDom(e),t))},T=(e,t,n,i)=>{const r=[];let o=h(e);i=void 0===i;const s=n||("BODY"!==b().nodeName?b().parentNode:null);if(m(t))if("*"===t)t=Yi;else{const e=t;t=t=>S(t,e)}for(;o&&!(o===s||_(o.nodeType)||rr(o)||or(o));){if(!t||t(o)){if(!i)return[o];r.push(o)}o=o.parentNode}return i?r:null},L=(e,t,n)=>{let i=t;if(e){m(t)&&(i=e=>S(e,t));for(let t=e[n];t;t=t[n])if(x(i)&&i(t))return t}return null},D=function(e,t,n){const i=null!=n?n:this;if(v(e)){const n=[];return Hs(e,(e,r)=>{const o=h(e);o&&n.push(t.call(i,o,r))}),n}{const n=h(e);return!!n&&t.call(i,n)}},I=(e,t)=>{D(e,e=>{ge(t,(t,n)=>{y(e,n,t)})})},R=(e,t)=>{D(e,e=>{const n=bn.fromDom(e);Ei(n,t)})},O=(t,n,i,r,o)=>D(t,t=>{const s=m(n)?e.createElement(n):n;return w(i)&&I(s,i),r&&(!m(r)&&r.nodeType?s.appendChild(r):m(r)&&R(s,r)),o?s:t.appendChild(s)}),P=(t,n,i)=>O(e.createElement(t),t,n,i,!0),B=as.encodeAllRaw,N=(e,t)=>D(e,e=>{const n=bn.fromDom(e);return t&&$(Pn(n),e=>{Wt(e)&&0===e.dom.length?_i(e):mi(n,e)}),_i(n),n.dom}),U=(e,t,n)=>{D(e,e=>{if(Yi(e)){const i=bn.fromDom(e),r=t.split(" ");$(r,e=>{if(w(n)){(n?pn:fn)(i,e)}else gn(i,e)})}})},F=(e,t,n)=>D(t,i=>{var r;const o=v(t)?e.cloneNode(!0):e;return n&&Hs(js(i.childNodes),e=>{o.appendChild(e)}),null===(r=i.parentNode)||void 0===r||r.replaceChild(o,i),i}),z=e=>{if(Yi(e)){const t="a"===e.nodeName.toLowerCase()&&!f(e,"href")&&f(e,"id");if(f(e,"name")||f(e,"data-mce-bookmark")||t)return!0}return!1},H=()=>e.createRange(),j=(n,r,o,s)=>{if(v(n)){let e=n.length;const t=[];for(;e--;)t[e]=j(n[e],r,o,s);return t}return!t.collect||n!==e&&n!==i||a.push([n,r,o,s]),d.bind(n,r,o,s||Q)},V=(t,n,r)=>{if(v(t)){let e=t.length;const i=[];for(;e--;)i[e]=V(t[e],n,r);return i}if(a.length>0&&(t===e||t===i)){let e=a.length;for(;e--;){const[i,o,s]=a[e];t!==i||n&&n!==o||r&&r!==s||d.unbind(i,o,s)}}return d.unbind(t,n,r)},Y=e=>{if(e&&Gi(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},Q={doc:e,settings:t,win:i,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:s,boundEvents:a,styles:c,schema:l,events:d,isBlock:e=>m(e)?Ee(u,e):Yi(e)&&(Ee(u,e.nodeName)||Po(l,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:b,getViewPort:e=>{const t=Ni(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=h(e),n=A(t),i=E(t);return{x:n.x,y:n.y,w:i.w,h:i.h}},getSize:E,getParent:(e,t,n)=>{const i=T(e,t,n,!1);return i&&i.length>0?i[0]:null},getParents:T,get:h,getNext:(e,t)=>L(e,t,"nextSibling"),getPrev:(e,t)=>L(e,t,"previousSibling"),select:(n,i)=>{var r,o;const s=null!==(o=null!==(r=h(i))&&void 0!==r?r:t.root_element)&&void 0!==o?o:e;return x(s.querySelectorAll)?he(s.querySelectorAll(n)):[]},is:S,add:O,create:P,createHTML:(e,t,n="")=>{let i="<"+e;for(const e in t)Me(t,e)&&(i+=" "+e+'="'+B(t[e])+'"');return Ze(n)&&Ee(l.getVoidElements(),e)?i+" />":i+">"+n+"</"+e+">"},createFragment:t=>{const n=e.createElement("div"),i=e.createDocumentFragment();let r;for(i.appendChild(n),t&&(n.innerHTML=t);r=n.firstChild;)i.appendChild(r);return i.removeChild(n),i},remove:N,setStyle:(e,n,i)=>{D(e,e=>{const r=bn.fromDom(e);Ws(r,n,i),t.update_styles&&qs(c,r)})},getStyle:C,setStyles:(e,n)=>{D(e,e=>{const i=bn.fromDom(e);ge(n,(e,t)=>{Ws(i,t,e)}),t.update_styles&&qs(c,i)})},removeAllAttribs:e=>D(e,e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}),setAttrib:y,setAttribs:I,getAttrib:f,getPos:A,parseStyle:e=>c.parse(e),serializeStyle:(e,t)=>c.serialize(e,t),addStyle:t=>{if(Q!==Ks.DOM&&e===document){if(n[t])return;n[t]=!0}let i=e.getElementById("mceDefaultStyles");if(!i){i=e.createElement("style"),i.id="mceDefaultStyles",i.type="text/css";const t=e.head;t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),$(e.split(","),e=>{r[e]=!0,s.load(e).catch(M)})},addClass:(e,t)=>{U(e,t,!0)},removeClass:(e,t)=>{U(e,t,!1)},hasClass:(e,t)=>{const n=p(e),i=t.split(" ");return w(n)&&re(i,e=>vn(n,e))},toggleClass:U,show:e=>{D(e,e=>pi(bn.fromDom(e),"display"))},hide:e=>{D(e,e=>ai(bn.fromDom(e),"display","none"))},isHidden:e=>{const t=p(e);return w(t)&&Pt(ui(t,"display"),"none")},uniqueId:e=>(e||"mce_")+o++,setHTML:R,getOuterHTML:e=>{const t=p(e);return w(t)?Yi(t.dom)?t.dom.outerHTML:(e=>{const t=bn.fromTag("div"),n=bn.fromDom(e.dom.cloneNode(!0));return vi(t,n),Ci(t)})(t):""},setOuterHTML:(e,t)=>{D(e,e=>{Yi(e)&&(e.outerHTML=t)})},decode:as.decode,encode:B,insertAfter:(e,t)=>{const n=h(t);return D(e,e=>{const t=null==n?void 0:n.parentNode,i=null==n?void 0:n.nextSibling;return t&&(i?t.insertBefore(e,i):t.appendChild(e)),e})},replace:F,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){const n=P(t);return Hs(g(e),t=>{y(n,t.nodeName,f(e,t.nodeName))}),F(n,e,!0),n}return e},findCommonAncestor:(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:D,getAttribs:g,isEmpty:(e,t,n)=>{let i=0;if(z(e))return!1;const r=e.firstChild;if(r){const o=new Hi(r,e),s=l?l.getWhitespaceElements():{},a=t||(l?l.getNonEmptyElements():null);let c=r;do{if(Yi(c)){const e=c.getAttribute("data-mce-bogus");if(e){c=o.next("all"===e);continue}const t=c.nodeName.toLowerCase();if(a&&a[t]){if("br"===t){i++,c=o.next();continue}return!1}if(z(c))return!1}if(ir(c))return!1;if(er(c)&&!so(c.data)&&(!(null==n?void 0:n.includeZwsp)||!ao(c.data)))return!1;if(er(c)&&c.parentNode&&s[c.parentNode.nodeName]&&so(c.data))return!1;c=o.next()}while(c)}return i<=1},createRng:H,nodeIndex:$s,split:(e,t,n)=>{let i,r,o=H();if(e&&t&&e.parentNode&&t.parentNode){const s=e.parentNode;return o.setStart(s,$s(e)),o.setEnd(t.parentNode,$s(t)),i=o.extractContents(),o=H(),o.setStart(t.parentNode,$s(t)+1),o.setEnd(s,$s(e)+1),r=o.extractContents(),s.insertBefore($o(Q,i,l),e),n?s.insertBefore(n,e):s.insertBefore(t,e),s.insertBefore($o(Q,r,l),e),N(e),n||t}},bind:j,unbind:V,fire:(e,t,n)=>d.dispatch(e,t,n),dispatch:(e,t,n)=>d.dispatch(e,t,n),getContentEditable:Y,getContentEditableParent:e=>{const t=b();let n=null;for(let i=e;i&&i!==t&&(n=Y(i),null===n);i=i.parentNode);return n},isEditable:e=>{if(w(e)){const t=Yi(e)?e:e.parentElement;return w(t)&&Gi(t)&&ii(bn.fromDom(t))}return!1},destroy:()=>{if(a.length>0){let e=a.length;for(;e--;){const[t,n,i]=a[e];d.unbind(t,n,i)}}ge(r,(e,t)=>{s.unload(t),delete r[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},q=((e,t,n)=>{const i=t.keep_values,r={set:(e,i,r)=>{const o=bn.fromDom(e);x(t.url_converter)&&w(i)&&(i=t.url_converter.call(t.url_converter_scope||n(),String(i),r,e)),Gs(o,"data-mce-"+r,i),Gs(o,r,i)},get:(e,t)=>{const n=bn.fromDom(e);return nn(n,"data-mce-"+t)||nn(n,t)}},o={style:{set:(t,n)=>{const r=bn.fromDom(t);i&&Gs(r,Vs,n),sn(r,"style"),m(n)&&li(r,e.parse(n))},get:t=>{const n=bn.fromDom(t),i=nn(n,Vs)||nn(n,"style");return e.serialize(e.parse(i),Yt(n))}}};return i&&(o.href=o.src=r),o})(c,t,k(Q));return Q};Ks.DOM=Ks(document),Ks.nodeIndex=$s;const Zs=Ks.DOM;class Xs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,n)=>{const i=Zs;let r;const o=()=>{i.remove(s),r&&(r.onerror=r.onload=r=null)},s=i.uniqueId();r=document.createElement("script"),r.id=s,r.type="text/javascript",r.src=Ot._addCacheSuffix(e),this.settings.referrerPolicy&&i.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=()=>{o(),t()},r.onerror=()=>{o(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;t.queue.push(e);return void 0===t.states[e]&&(t.states[e]=0),new Promise((n,i)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:i})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const t=this,n=(e,n)=>{Ce(t.scriptLoadedCallbacks,n).each(t=>{$(t,t=>t[e](n))}),delete t.scriptLoadedCallbacks[n]},i=e=>{const t=K(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(ie(t,({reason:e})=>v(e)?e:[e])):Promise.resolve()},r=e=>Promise.allSettled(Q(e,e=>2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,n("resolve",e);const o=t.queue;return o.length>0?(t.queue=[],r(o).then(i)):Promise.resolve()},()=>(t.states[e]=3,n("reject",e),Promise.reject(e)))))),o=e=>(t.loading=!0,r(e).then(e=>{t.loading=!1;const n=t.queueLoadedCallbacks.shift();return F.from(n).each(B),i(e)})),s=Se(e);return t.loading?new Promise((e,n)=>{t.queueLoadedCallbacks.push(()=>{o(s).then(e,n)})}):o(s)}}Xs.ScriptLoader=new Xs;const Js=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},ea={},ta=Js("en"),na=()=>Ce(ea,ta.get()),ia={getData:()=>ve(ea,e=>({...e})),setCode:e=>{e&&ta.set(e)},getCode:()=>ta.get(),add:(e,t)=>{let n=ea[e];n||(ea[e]=n={});const i=Q(me(t),e=>e.toLowerCase());ge(t,(e,r)=>{const o=r.toLowerCase();o!==r&&((e,t)=>{const n=e.indexOf(t);return-1!==n&&e.indexOf(t,n+1)>n})(i,o)?(Ee(t,o)||(n[o]=e),n[r]=e):n[o]=e})},translate:e=>{const t=na().getOr({}),n=e=>x(e)?Object.prototype.toString.call(e):i(e)?"":""+e,i=e=>""===e||null==e,r=e=>{const i=n(e);return Ee(t,i)?n(t[i]):Ce(t,i.toLowerCase()).map(n).getOr(i)},o=e=>e.replace(/{context:\w+}$/,"");if(i(e))return"";if(f(s=e)&&Ee(s,"raw"))return n(e.raw);var s;if((e=>v(e)&&e.length>1)(e)){const t=e.slice(1);return o(r(e[0]).replace(/\{([0-9]+)\}/g,(e,i)=>Ee(t,i)?n(t[i]):e))}return o(r(e))},isRtl:()=>na().bind(e=>Ce(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Ee(ea,e)},ra=()=>{const e=[],t={},n={},i=[],r=(e,t)=>{const n=K(i,n=>n.name===e&&n.state===t);$(n,e=>e.resolve())},o=e=>Ee(t,e),s=(e,n)=>{const i=ia.getCode();!i||n&&-1===(","+(n||"")+",").indexOf(","+i+",")||Xs.ScriptLoader.add(t[e]+"/langs/"+i+".js")},a=(e,t="added")=>"added"===t&&(e=>Ee(n,e))(e)||"loaded"===t&&o(e)?Promise.resolve():new Promise(n=>{i.push({name:e,state:t,resolve:n})});return{items:e,urls:t,lookup:n,get:e=>{if(n[e])return n[e].instance},requireLangPack:(e,t)=>{!1!==ra.languageLoad&&(o(e)?s(e,t):a(e,"loaded").then(()=>s(e,t)))},add:(t,i)=>(e.push(i),n[t]={instance:i},r(t,"added"),i),remove:e=>{delete t[e],delete n[e]},createUrl:(e,t)=>m(t)?m(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,i)=>{if(t[e])return Promise.resolve();let o=m(i)?i:i.prefix+i.resource+i.suffix;0!==o.indexOf("/")&&-1===o.indexOf("://")&&(o=ra.baseURL+"/"+o),t[e]=o.substring(0,o.lastIndexOf("/"));const s=()=>(r(e,"loaded"),Promise.resolve());return n[e]?s():Xs.ScriptLoader.add(o).then(s)},waitFor:a}};ra.languageLoad=!0,ra.baseURL="",ra.PluginManager=ra(),ra.ThemeManager=ra(),ra.ModelManager=ra();const oa=e=>{const t=Js(F.none()),n=()=>t.get().each(e=>clearInterval(e));return{clear:()=>{n(),t.set(F.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:i=>{n(),t.set(F.some(setInterval(i,e)))}}},sa=()=>{const e=(e=>{const t=Js(F.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(F.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(F.some(e))}}})(M);return{...e,on:t=>e.get().each(t)}},aa=(e,t)=>{let n=null;return{cancel:()=>{y(n)||(clearTimeout(n),n=null)},throttle:(...i)=>{y(n)&&(n=setTimeout(()=>{n=null,e.apply(null,i)},t))}}},la=(e,t)=>{let n=null;const i=()=>{y(n)||(clearTimeout(n),n=null)};return{cancel:i,throttle:(...r)=>{i(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},ca=k("mce-annotation"),da=k("data-mce-annotation"),ua=k("data-mce-annotation-uid"),ha=k("data-mce-annotation-active"),pa=k("data-mce-annotation-classes"),ma=k("data-mce-annotation-attrs"),fa=e=>t=>xn(t,e),ga=(e,t)=>{const n=e.selection.getRng(),i=bn.fromDom(n.startContainer),r=bn.fromDom(e.getBody()),o=t.fold(()=>"."+ca(),e=>`[${da()}="${e}"]`),s=Bn(i,n.startOffset).getOr(i);return ni(s,o,fa(r)).bind(t=>rn(t,`${ua()}`).bind(n=>rn(t,`${da()}`).map(t=>{const i=ya(e,n);return{uid:n,name:t,elements:i}})))},va=(e,t)=>on(e,"data-mce-bogus")||zi(e,'[data-mce-bogus="all"]',fa(t)),ya=(e,t)=>{const n=bn.fromDom(e.getBody()),i=Fi(n,`[${ua()}="${t}"]`);return K(i,e=>!va(e,n))},ba=(e,t)=>{const n=bn.fromDom(e.getBody()),i=Fi(n,`[${da()}="${t}"]`),r={};return $(i,e=>{if(!va(e,n)){const t=nn(e,ua()),n=Ce(r,t).getOr([]);r[t]=n.concat([e])}}),r},Aa=(e,t)=>{const n=Js({}),i=()=>({listeners:[],previous:sa()}),r=(e,t)=>{o(e,e=>(t(e),e))},o=(e,t)=>{const r=n.get(),o=t(Ce(r,e).getOrThunk(i));r[e]=o,n.set(r)},s=(t,n)=>{$(ya(e,t),e=>{n?en(e,ha(),"true"):sn(e,ha())})},a=la(()=>{const n=le(t.getNames());$(n,t=>{o(t,n=>{const i=n.previous.get();return ga(e,F.some(t)).fold(()=>{i.each(e=>{(e=>{r(e,t=>{$(t.listeners,t=>t(!1,e))})})(t),n.previous.clear(),s(e,!1)})},({uid:e,name:t,elements:o})=>{Pt(i,e)||(i.each(e=>s(e,!1)),((e,t,n)=>{r(e,i=>{$(i.listeners,i=>i(!0,e,{uid:t,nodes:Q(n,e=>e.dom)}))})})(t,e,o),n.previous.set(e),s(e,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);e.on("remove",()=>{a.cancel()}),e.on("NodeChange",()=>{a.throttle()});return{addListener:(e,t)=>{o(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}};let _a=0;const wa=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return _a++,e+"_"+n+_a+String(t)},xa=(e,t)=>bn.fromDom(e.dom.cloneNode(t)),Ca=e=>xa(e,!1),Ea=e=>xa(e,!0),Ma=(e,t)=>{const n=((e,t)=>{const n=bn.fromTag(t),i=an(e);return tn(n,i),n})(e,t);fi(e,n);const i=Pn(e);return bi(n,i),_i(e),n},Sa=(e,t,n=N)=>{const i=new Hi(e,t),r=e=>{let t;do{t=i[e]()}while(t&&!er(t)&&!n(t));return F.from(t).filter(er)};return{current:()=>F.from(i.current()).filter(er),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Ta=(e,t)=>{const n=t||(t=>e.isBlock(t)||sr(t)||cr(t)),i=(e,t,n,r)=>{if(er(e)){const n=r(e,t,e.data);if(-1!==n)return F.some({container:e,offset:n})}return n().bind(e=>i(e.container,e.offset,n,r))};return{backwards:(t,r,o,s)=>{const a=Sa(t,null!=s?s:e.getRoot(),n);return i(t,r,()=>a.prev().map(e=>({container:e,offset:e.length})),o).getOrNull()},forwards:(t,r,o,s)=>{const a=Sa(t,null!=s?s:e.getRoot(),n);return i(t,r,()=>a.next().map(e=>({container:e,offset:0})),o).getOrNull()}}},ka=Math.round,La=e=>e?{left:ka(e.left),top:ka(e.top),bottom:ka(e.bottom),right:ka(e.right),width:ka(e.width),height:ka(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Da=(e,t)=>(e=La(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Ia=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Ra=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Ia(t.top-e.bottom,e,t)},Oa=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Ia(t.bottom-e.top,e,t),Pa=(e,t,n)=>{const i=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-i)*(t-i)+(n-r)*(n-r))},Ba=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Na=(e,t)=>{if(Yi(e)&&e.hasChildNodes()){const n=e.childNodes,i=((e,t,n)=>Math.min(Math.max(e,t),n))(t,0,n.length-1);return n[i]}return e},Ua=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Fa=e=>m(e)&&e.charCodeAt(0)>=768&&Ua.test(e),za=Yi,Ha=no,ja=qi("display","block table"),Va=qi("float","left right"),Ya=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(za,Ha,R(Va)),Ga=R(qi("white-space","pre pre-line pre-wrap")),Qa=er,$a=sr,qa=Ks.nodeIndex,Wa=(e,t)=>t<0&&Yi(e)&&e.hasChildNodes()?void 0:Na(e,t),Ka=e=>e?e.createRange():Ks.DOM.createRng(),Za=e=>m(e)&&/[\r\n\t ]/.test(e),Xa=e=>!!e.setStart&&!!e.setEnd,Ja=e=>{const t=e.startContainer,n=e.startOffset;if(Za(e.toString())&&Ga(t.parentNode)&&er(t)){const e=t.data;if(Za(e[n-1])||Za(e[n+1]))return!0}return!1},el=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,tl=e=>{var t;let n;const i=e.getClientRects();return n=i.length>0?La(i[0]):La(e.getBoundingClientRect()),!Xa(e)&&$a(e)&&el(n)?(e=>{const t=e.ownerDocument,n=Ka(t),i=t.createTextNode(vr),r=e.parentNode;r.insertBefore(i,e),n.setStart(i,0),n.setEnd(i,1);const o=La(n.getBoundingClientRect());return r.removeChild(i),o})(e):el(n)&&Xa(e)&&null!==(t=(e=>{const t=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset;if(t===n&&er(n)&&0===i&&1===r){const t=e.cloneRange();return t.setEndAfter(n),tl(t)}return null})(e))&&void 0!==t?t:n},nl=(e,t)=>{const n=Da(e,t);return n.width=1,n.right=n.left+1,n},il=e=>{const t=[],n=e=>{var n,i;0!==e.height&&(t.length>0&&(n=e,i=t[t.length-1],n.left===i.left&&n.top===i.top&&n.bottom===i.bottom&&n.right===i.right)||t.push(e))},i=(e,t)=>{const i=Ka(e.ownerDocument);if(t<e.data.length){if(Fa(e.data[t]))return;if(Fa(e.data[t-1])&&(i.setStart(e,t),i.setEnd(e,t+1),!Ja(i)))return void n(nl(tl(i),!1))}t>0&&(i.setStart(e,t-1),i.setEnd(e,t),Ja(i)||n(nl(tl(i),!1))),t<e.data.length&&(i.setStart(e,t),i.setEnd(e,t+1),Ja(i)||n(nl(tl(i),!0)))},r=e.container(),o=e.offset();if(Qa(r))return i(r,o),t;if(za(r))if(e.isAtEnd()){const e=Wa(r,o);Qa(e)&&i(e,e.data.length),Ya(e)&&!$a(e)&&n(nl(tl(e),!1))}else{const s=Wa(r,o);if(Qa(s)&&i(s,0),Ya(s)&&e.isAtEnd())return n(nl(tl(s),!1)),t;const a=Wa(e.container(),e.offset()-1);Ya(a)&&!$a(a)&&(ja(a)||ja(s)||!Ya(s))&&n(nl(tl(a),!1)),Ya(s)&&n(nl(tl(s),!0))}return t},rl=(e,t,n)=>{const i=()=>(n||(n=il(rl(e,t))),n);return{container:k(e),offset:k(t),toRange:()=>{const n=Ka(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:i,isVisible:()=>i().length>0,isAtStart:()=>(Qa(e),0===t),isAtEnd:()=>Qa(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>Wa(e,n?t-1:t)}};rl.fromRangeStart=e=>rl(e.startContainer,e.startOffset),rl.fromRangeEnd=e=>rl(e.endContainer,e.endOffset),rl.after=e=>rl(e.parentNode,qa(e)+1),rl.before=e=>rl(e.parentNode,qa(e)),rl.isAbove=(e,t)=>Nt(de(t.getClientRects()),ue(e.getClientRects()),Ra).getOr(!1),rl.isBelow=(e,t)=>Nt(ue(t.getClientRects()),de(e.getClientRects()),Oa).getOr(!1),rl.isAtStart=e=>!!e&&e.isAtStart(),rl.isAtEnd=e=>!!e&&e.isAtEnd(),rl.isTextPosition=e=>!!e&&er(e.container()),rl.isElementPosition=e=>!rl.isTextPosition(e);const ol=(e,t)=>{er(t)&&0===t.data.length&&e.remove(t)},sl=(e,t,n)=>{or(n)?((e,t,n)=>{const i=F.from(n.firstChild),r=F.from(n.lastChild);t.insertNode(n),i.each(t=>ol(e,t.previousSibling)),r.each(t=>ol(e,t.nextSibling))})(e,t,n):((e,t,n)=>{t.insertNode(n),ol(e,n.previousSibling),ol(e,n.nextSibling)})(e,t,n)},al=er,ll=Ki,cl=Ks.nodeIndex,dl=e=>{const t=e.parentNode;return ll(t)?dl(t):t},ul=e=>e?Re(e.childNodes,(e,t)=>(ll(t)&&"BR"!==t.nodeName?e=e.concat(ul(t)):e.push(t),e),[]):[],hl=e=>t=>e===t,pl=e=>(al(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,n;t=ul(dl(e)),n=Oe(t,hl(e),e),t=t.slice(0,n+1);const i=Re(t,(e,n,i)=>(al(n)&&al(t[i-1])&&e++,e),0);return t=Ie(t,$i([e.nodeName])),n=Oe(t,hl(e),e),n-i})(e)+"]",ml=(e,t)=>{let n,i=[],r=t.container(),o=t.offset();if(al(r))n=((e,t)=>{let n=e;for(;(n=n.previousSibling)&&al(n);)t+=n.data.length;return t})(r,o);else{const e=r.childNodes;o>=e.length?(n="after",o=e.length-1):n="before",r=e[o]}i.push(pl(r));let s=((e,t,n)=>{const i=[];for(let r=t.parentNode;r&&r!==e&&(!n||!n(r));r=r.parentNode)i.push(r);return i})(e,r);return s=Ie(s,R(Ki)),i=i.concat(De(s,e=>pl(e))),i.reverse().join("/")+","+n},fl=(e,t)=>{if(!t)return null;const n=t.split(","),i=n[0].split("/"),r=n.length>1?n[1]:"before",o=Re(i,(e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let i=ul(e);return i=Ie(i,(e,t)=>!al(e)||!al(i[t-1])),i=Ie(i,$i([t])),i[n]})(e,n[1],parseInt(n[2],10))):null},e);if(!o)return null;if(!al(o)&&o.parentNode){let e;return e="after"===r?cl(o)+1:cl(o),rl(o.parentNode,e)}return((e,t)=>{let n=e,i=0;for(;al(n);){const r=n.data.length;if(t>=i&&t<=i+r){e=n,t-=i;break}if(!al(n.nextSibling)){e=n,t=r;break}i+=r,n=n.nextSibling}return al(e)&&t>e.data.length&&(t=e.data.length),rl(e,t)})(o,parseInt(r,10))},gl=cr,vl=(e,t,n,i,r)=>{const o=r?i.startContainer:i.endContainer;let s=r?i.startOffset:i.endOffset;const a=[],l=e.getRoot();if(er(o))a.push(n?((e,t,n)=>{let i=e(t.data.slice(0,n)).length;for(let n=t.previousSibling;n&&er(n);n=n.previousSibling)i+=e(n.data).length;return i})(t,o,s):s);else{let t=0;const i=o.childNodes;s>=i.length&&i.length&&(t=1,s=Math.max(0,i.length-1)),a.push(e.nodeIndex(i[s],n)+t)}for(let t=o;t&&t!==l;t=t.parentNode)a.push(e.nodeIndex(t,n));return a},yl=(e,t,n)=>{let i=0;return Ot.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==n&&void i++),i},bl=(e,t)=>{let n=t?e.startContainer:e.endContainer,i=t?e.startOffset:e.endOffset;if(Yi(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(t?i:i-1,r.length-1)],n&&(i=t?0:n.childNodes.length,t?e.setStart(n,i):e.setEnd(n,i))}},Al=e=>(bl(e,!0),bl(e,!1),e),_l=(e,t)=>{if(Yi(e)&&(e=Na(e,t),gl(e)))return e;if(zr(e)){er(e)&&Ur(e)&&(e=e.parentNode);let t=e.previousSibling;if(gl(t))return t;if(t=e.nextSibling,gl(t))return t}},wl=(e,t,n)=>{const i=n.getNode(),r=n.getRng();if("IMG"===i.nodeName||gl(i)){const e=i.nodeName;return{name:e,index:yl(n.dom,e,i)}}const o=(e=>_l(e.startContainer,e.startOffset)||_l(e.endContainer,e.endOffset))(r);if(o){const e=o.tagName;return{name:e,index:yl(n.dom,e,o)}}return((e,t,n,i)=>{const r=t.dom,o=vl(r,e,n,i,!0),s=t.isForward(),a=$r(i)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:o,forward:s,...a}:{start:o,end:vl(r,e,n,i,!1),forward:s,...a}})(e,n,t,r)},xl=(e,t,n)=>{const i={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",i,"&#xFEFF;"):e.create("span",i)},Cl=(e,t)=>{const n=e.dom;let i=e.getRng();const r=n.uniqueId(),o=e.isCollapsed(),s=e.getNode(),a=s.nodeName,l=e.isForward();if("IMG"===a)return{name:a,index:yl(n,a,s)};const c=Al(i.cloneRange());if(!o){c.collapse(!1);const e=xl(n,r+"_end",t);sl(n,c,e)}i=Al(i),i.collapse(!0);const d=xl(n,r+"_start",t);return sl(n,i,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},El=(e,t,n=!1)=>2===t?wl(Pr,n,e):3===t?(e=>{const t=e.getRng();return{start:ml(e.dom.getRoot(),rl.fromRangeStart(t)),end:ml(e.dom.getRoot(),rl.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):Cl(e,!1),Ml=I(wl,L,!0),Sl=e=>{const t=t=>t(e),n=k(e),i=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:U,isError:N,map:t=>kl.value(t(e)),mapError:i,bind:t,exists:t,forall:t,getOr:n,or:i,getOrThunk:n,orThunk:i,getOrDie:n,each:t=>{t(e)},toOptional:()=>F.some(e)};return r},Tl=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:N,isError:U,map:t,mapError:t=>kl.error(t(e)),bind:t,exists:N,forall:U,getOr:L,or:L,getOrThunk:P,orThunk:P,getOrDie:O(String(e)),each:M,toOptional:F.none};return n},kl={value:Sl,error:Tl,fromOption:(e,t)=>e.fold(()=>Tl(t),Sl)},Ll=e=>{if(!v(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return $(e,(i,r)=>{const o=me(i);if(1!==o.length)throw new Error("one and only one name per case");const s=o[0],a=i[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!v(a))throw new Error("case arguments must be an array");t.push(s),n[s]=(...n)=>{const i=n.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+i);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const i=me(e);if(t.length!==i.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+i.join(","));if(!re(t,e=>Y(i,e)))throw new Error("Not all branches were specified when using match. Specified: "+i.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:s,params:n})}}}}),n};Ll([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Dl=e=>"inline-command"===e.type||"inline-format"===e.type,Il=e=>"block-command"===e.type||"block-format"===e.type,Rl=e=>{const t=t=>kl.error({message:t,pattern:e}),n=(n,i,r)=>{if(void 0!==e.format){let r;if(v(e.format)){if(!re(e.format,m))return t(n+" pattern has non-string items in the `format` array");r=e.format}else{if(!m(e.format))return t(n+" pattern has non-string `format` parameter");r=[e.format]}return kl.value(i(r))}return void 0!==e.cmd?m(e.cmd)?kl.value(r(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!f(e))return t("Raw pattern is not an object");if(!m(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!m(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let i=e.start,r=e.end;return 0===r.length&&(r=i,i=""),n("Inline",e=>({type:"inline-format",start:i,end:r,format:e}),(e,t)=>({type:"inline-command",start:i,end:r,cmd:e,value:t}))}return void 0!==e.replacement?m(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):kl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,n)=>({type:"block-command",start:e.start,cmd:t,value:n}))},Ol=e=>K(e,Il),Pl=e=>K(e,Dl),Bl=e=>{const t=(e=>{const t=[],n=[];return $(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}})(Q(e,Rl));return $(t.errors,e=>console.error(e.message,e.pattern)),t.values},Nl=xt().deviceType,Ul=Nl.isTouch(),Fl=Ks.DOM,zl=e=>p(e,RegExp),Hl=e=>t=>t.options.get(e),jl=e=>m(e)||f(e),Vl=(e,t="")=>n=>{const i=m(n);if(i){if(-1!==n.indexOf("=")){const r=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return X(t,(e,t)=>{const n=t.split("="),i=n[0],r=n.length>1?n[1]:i;return e[$e(i)]=$e(r),e},{})})(n);return{value:Ce(r,e.id).getOr(t),valid:i}}return{value:n,valid:i}}return{valid:!1,message:"Must be a string."}},Yl=Hl("iframe_attrs"),Gl=Hl("doctype"),Ql=Hl("document_base_url"),$l=Hl("body_id"),ql=Hl("body_class"),Wl=Hl("content_security_policy"),Kl=Hl("br_in_pre"),Zl=Hl("forced_root_block"),Xl=Hl("forced_root_block_attrs"),Jl=Hl("newline_behavior"),ec=Hl("br_newline_selector"),tc=Hl("no_newline_selector"),nc=Hl("keep_styles"),ic=Hl("end_container_on_empty_block"),rc=Hl("automatic_uploads"),oc=Hl("images_reuse_filename"),sc=Hl("images_replace_blob_uris"),ac=Hl("icons"),lc=Hl("icons_url"),cc=Hl("images_upload_url"),dc=Hl("images_upload_base_path"),uc=Hl("images_upload_credentials"),hc=Hl("images_upload_handler"),pc=Hl("content_css_cors"),mc=Hl("referrer_policy"),fc=Hl("language"),gc=Hl("language_url"),vc=Hl("indent_use_margin"),yc=Hl("indentation"),bc=Hl("content_css"),Ac=Hl("content_style"),_c=Hl("font_css"),wc=Hl("directionality"),xc=Hl("inline_boundaries_selector"),Cc=Hl("object_resizing"),Ec=Hl("resize_img_proportional"),Mc=Hl("placeholder"),Sc=Hl("event_root"),Tc=Hl("service_message"),kc=Hl("theme"),Lc=Hl("theme_url"),Dc=Hl("model"),Ic=Hl("model_url"),Rc=Hl("inline_boundaries"),Oc=Hl("formats"),Pc=Hl("preview_styles"),Bc=Hl("format_empty_lines"),Nc=Hl("format_noneditable_selector"),Uc=Hl("custom_ui_selector"),Fc=Hl("inline"),zc=Hl("hidden_input"),Hc=Hl("submit_patch"),jc=Hl("add_form_submit_trigger"),Vc=Hl("add_unload_trigger"),Yc=Hl("custom_undo_redo_levels"),Gc=Hl("disable_nodechange"),Qc=Hl("readonly"),$c=Hl("editable_root"),qc=Hl("content_css_cors"),Wc=Hl("plugins"),Kc=Hl("external_plugins"),Zc=Hl("block_unsupported_drop"),Xc=Hl("visual"),Jc=Hl("visual_table_class"),ed=Hl("visual_anchor_class"),td=Hl("iframe_aria_text"),nd=Hl("setup"),id=Hl("init_instance_callback"),rd=Hl("urlconverter_callback"),od=Hl("auto_focus"),sd=Hl("browser_spellcheck"),ad=Hl("protect"),ld=Hl("paste_block_drop"),cd=Hl("paste_data_images"),dd=Hl("paste_preprocess"),ud=Hl("paste_postprocess"),hd=Hl("newdocument_content"),pd=Hl("paste_webkit_styles"),md=Hl("paste_remove_styles_if_webkit"),fd=Hl("paste_merge_formats"),gd=Hl("smart_paste"),vd=Hl("paste_as_text"),yd=Hl("paste_tab_spaces"),bd=Hl("allow_html_data_urls"),Ad=Hl("text_patterns"),_d=Hl("text_patterns_lookup"),wd=Hl("noneditable_class"),xd=Hl("editable_class"),Cd=Hl("noneditable_regexp"),Ed=Hl("preserve_cdata"),Md=Hl("highlight_on_focus"),Sd=Hl("xss_sanitization"),Td=Hl("init_content_sync"),kd=e=>Ot.explode(e.options.get("images_file_types")),Ld=Hl("table_tab_navigation"),Dd=Hl("details_initial_state"),Id=Hl("details_serialized_state"),Rd=Hl("force_hex_color"),Od=Hl("sandbox_iframes"),Pd=Yi,Bd=er,Nd=e=>{const t=e.parentNode;t&&t.removeChild(e)},Ud=e=>{const t=Pr(e);return{count:e.length-t.length,text:t}},Fd=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Rr));)e.deleteData(t,1)},zd=(e,t)=>(Yd(e),t),Hd=(e,t)=>{const n=t.container(),i=((e,t)=>{const n=V(e,t);return-1===n?F.none():F.some(n)})(he(n.childNodes),e).map(e=>e<t.offset()?rl(n,t.offset()-1):t).getOr(t);return Yd(e),i},jd=(e,t)=>Bd(e)&&t.container()===e?((e,t)=>{const n=Ud(e.data.substr(0,t.offset())),i=Ud(e.data.substr(t.offset()));return(n.text+i.text).length>0?(Fd(e),rl(e,t.offset()-n.count)):t})(e,t):zd(e,t),Vd=(e,t)=>rl.isTextPosition(t)?jd(e,t):((e,t)=>t.container()===e.parentNode?Hd(e,t):zd(e,t))(e,t),Yd=e=>{Pd(e)&&zr(e)&&(Hr(e)?e.removeAttribute("data-mce-caret"):Nd(e)),Bd(e)&&(Fd(e),0===e.data.length&&Nd(e))},Gd=cr,Qd=hr,$d=dr,qd=(e,t,n)=>{const i=Da(t.getBoundingClientRect(),n);let r,o;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;r=e.scrollLeft||t.scrollLeft,o=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();r=e.scrollLeft-t.left,o=e.scrollTop-t.top}i.left+=r,i.right+=r,i.top+=o,i.bottom+=o,i.width=1;let s=t.offsetWidth-t.clientWidth;return s>0&&(n&&(s*=-1),i.left+=s,i.right+=s),i},Wd=(e,t,n,i)=>{const r=sa();let o,s;const a=Zl(e),l=e.dom,c=()=>{(e=>{var t,n;const i=Fi(bn.fromDom(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<i.length;e++){const r=i[e].dom;let o=r.previousSibling;if(Gr(o)){const e=o.data;1===e.length?null===(t=o.parentNode)||void 0===t||t.removeChild(o):o.deleteData(e.length-1,1)}o=r.nextSibling,Yr(o)&&(1===o.data.length?null===(n=o.parentNode)||void 0===n||n.removeChild(o):o.deleteData(0,1))}})(t),s&&(Yd(s),s=null),r.on(e=>{l.remove(e.caret),r.clear()}),o&&(clearInterval(o),o=void 0)},d=()=>{o=setInterval(()=>{r.on(e=>{i()?l.toggleClass(e.caret,"mce-visual-caret-hidden"):l.addClass(e.caret,"mce-visual-caret-hidden")})},500)};return{show:(e,i)=>{let o;if(c(),$d(i))return null;if(!n(i))return s=((e,t)=>{var n;const i=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Rr),r=e.parentNode;if(t){const t=e.previousSibling;if(Nr(t)){if(zr(t))return t;if(Gr(t))return t.splitText(t.data.length-1)}null==r||r.insertBefore(i,e)}else{const t=e.nextSibling;if(Nr(t)){if(zr(t))return t;if(Yr(t))return t.splitText(1),t}e.nextSibling?null==r||r.insertBefore(i,e.nextSibling):null==r||r.appendChild(i)}return i})(i,e),o=i.ownerDocument.createRange(),Zd(s.nextSibling)?(o.setStart(s,0),o.setEnd(s,0)):(o.setStart(s,1),o.setEnd(s,1)),o;{const n=((e,t,n)=>{var i;const r=(null!==(i=t.ownerDocument)&&void 0!==i?i:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Dr().dom);const o=t.parentNode;return n?null==o||o.insertBefore(r,t):t.nextSibling?null==o||o.insertBefore(r,t.nextSibling):null==o||o.appendChild(r),r})(a,i,e),c=qd(t,i,e);l.setStyle(n,"top",c.top),s=n;const u=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(u,{...c}),l.add(t,u),r.set({caret:u,element:i,before:e}),e&&l.addClass(u,"mce-visual-caret-before"),d(),o=i.ownerDocument.createRange(),o.setStart(n,0),o.setEnd(n,0)}return o},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(e=>{const n=qd(t,e.element,e.before);l.setStyles(e.caret,{...n})})},destroy:()=>clearInterval(o)}},Kd=()=>Lt.browser.isFirefox(),Zd=e=>Gd(e)||Qd(e),Xd=e=>(Zd(e)||Zi(e)&&Kd())&&kn(bn.fromDom(e)).exists(ii),Jd=lr,eu=cr,tu=hr,nu=qi("display","block table table-cell table-caption list-item"),iu=zr,ru=Ur,ou=Yi,su=er,au=no,lu=e=>e>0,cu=e=>e<0,du=(e,t)=>{let n;for(;n=e(t);)if(!ru(n))return n;return null},uu=(e,t,n,i,r)=>{const o=new Hi(e,i),s=eu(e)||ru(e);let a;if(cu(t)){if(s&&(a=du(o.prev.bind(o),!0),n(a)))return a;for(;a=du(o.prev.bind(o),r);)if(n(a))return a}if(lu(t)){if(s&&(a=du(o.next.bind(o),!0),n(a)))return a;for(;a=du(o.next.bind(o),r);)if(n(a))return a}return null},hu=(e,t)=>{for(;e&&e!==t;){if(nu(e))return e;e=e.parentNode}return null},pu=(e,t,n)=>hu(e.container(),n)===hu(t.container(),n),mu=(e,t)=>{if(!t)return F.none();const n=t.container(),i=t.offset();return ou(n)?F.from(n.childNodes[i+e]):F.none()},fu=(e,t)=>{var n;const i=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)),i},gu=(e,t,n)=>hu(t,e)===hu(n,e),vu=(e,t,n)=>{const i=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let e=r[i];if(e&&iu(e)&&(e=e[i]),eu(e)||tu(e)){if(gu(t,e,r))return e;break}if(au(e))break;r=r.parentNode}return null},yu=I(fu,!0),bu=I(fu,!1),Au=(e,t,n)=>{let i;const r=I(vu,!0,t),o=I(vu,!1,t),s=n.startContainer,a=n.startOffset;if(Ur(s)){const e=su(s)?s.parentNode:s,t=e.getAttribute("data-mce-caret");if("before"===t&&(i=e.nextSibling,Xd(i)))return yu(i);if("after"===t&&(i=e.previousSibling,Xd(i)))return bu(i)}if(!n.collapsed)return n;if(er(s)){if(iu(s)){if(1===e){if(i=o(s),i)return yu(i);if(i=r(s),i)return bu(i)}if(-1===e){if(i=r(s),i)return bu(i);if(i=o(s),i)return yu(i)}return n}if(Gr(s)&&a>=s.data.length-1)return 1===e&&(i=o(s),i)?yu(i):n;if(Yr(s)&&a<=1)return-1===e&&(i=r(s),i)?bu(i):n;if(a===s.data.length)return i=o(s),i?yu(i):n;if(0===a)return i=r(s),i?bu(i):n}return n},_u=(e,t)=>mu(e?0:-1,t).filter(eu),wu=(e,t,n)=>{const i=Au(e,t,n);return-1===e?rl.fromRangeStart(i):rl.fromRangeEnd(i)},xu=e=>F.from(e.getNode()).map(bn.fromDom),Cu=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Eu=(e,t)=>{const n=pu(e,t);return!(n||!sr(e.getNode()))||n};var Mu;!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Mu||(Mu={}));const Su=cr,Tu=er,ku=Yi,Lu=sr,Du=no,Iu=e=>Jr(e)||(e=>!!io(e)&&!X(he(e.getElementsByTagName("*")),(e,t)=>e||qr(t),!1))(e),Ru=ro,Ou=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Pu=(e,t)=>{if(lu(e)){if(Du(t.previousSibling)&&!Tu(t.previousSibling))return rl.before(t);if(Tu(t))return rl(t,0)}if(cu(e)){if(Du(t.nextSibling)&&!Tu(t.nextSibling))return rl.after(t);if(Tu(t))return rl(t,t.data.length)}return cu(e)?Lu(t)?rl.before(t):rl.after(t):rl.before(t)},Bu=(e,t,n)=>{let i,r,o,s;if(!ku(n)||!t)return null;if(t.isEqual(rl.after(n))&&n.lastChild){if(s=rl.after(n.lastChild),cu(e)&&Du(n.lastChild)&&ku(n.lastChild))return Lu(n.lastChild)?rl.before(n.lastChild):s}else s=t;const a=s.container();let l=s.offset();if(Tu(a)){if(cu(e)&&l>0)return rl(a,--l);if(lu(e)&&l<a.length)return rl(a,++l);i=a}else{if(cu(e)&&l>0&&(r=Ou(a,l-1),Du(r)))return!Iu(r)&&(o=uu(r,e,Ru,r),o)?Tu(o)?rl(o,o.data.length):rl.after(o):Tu(r)?rl(r,r.data.length):rl.before(r);if(lu(e)&&l<a.childNodes.length&&(r=Ou(a,l),Du(r)))return Lu(r)?((e,t)=>{const n=t.nextSibling;return n&&Du(n)?Tu(n)?rl(n,0):rl.before(n):Bu(Mu.Forwards,rl.after(t),e)})(n,r):!Iu(r)&&(o=uu(r,e,Ru,r),o)?Tu(o)?rl(o,0):rl.before(o):Tu(r)?rl(r,0):rl.after(r);i=r||s.getNode()}if(i&&(lu(e)&&s.isAtEnd()||cu(e)&&s.isAtStart())&&(i=uu(i,e,U,n,!0),Ru(i,n)))return Pu(e,i);r=i?uu(i,e,Ru,n):i;const c=Pe(K(((e,t)=>{const n=[];let i=e;for(;i&&i!==t;)n.push(i),i=i.parentNode;return n})(a,n),Su));return!c||r&&c.contains(r)?r?Pu(e,r):null:(s=lu(e)?rl.after(c):rl.before(c),s)},Nu=e=>({next:t=>Bu(Mu.Forwards,t,e),prev:t=>Bu(Mu.Backwards,t,e)}),Uu=e=>rl.isTextPosition(e)?0===e.offset():no(e.getNode()),Fu=e=>{if(rl.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return no(e.getNode(!0))},zu=(e,t)=>!rl.isTextPosition(e)&&!rl.isTextPosition(t)&&e.getNode()===t.getNode(!0),Hu=(e,t,n)=>{return e?!zu(t,n)&&(i=t,!(!rl.isTextPosition(i)&&sr(i.getNode())))&&Fu(t)&&Uu(n):!zu(n,t)&&Uu(t)&&Fu(n);var i},ju=(e,t,n)=>{const i=Nu(t);return F.from(e?i.next(n):i.prev(n))},Vu=(e,t,n)=>ju(e,t,n).bind(i=>pu(n,i,t)&&Hu(e,n,i)?ju(e,t,i):F.some(i)),Yu=(e,t,n,i)=>Vu(e,t,n).bind(n=>i(n)?Yu(e,t,n,i):F.some(n)),Gu=(e,t)=>{const n=e?t.firstChild:t.lastChild;return er(n)?F.some(rl(n,e?0:n.data.length)):n?no(n)?F.some(e?rl.before(n):sr(i=n)?rl.before(i):rl.after(i)):((e,t,n)=>{const i=e?rl.before(n):rl.after(n);return ju(e,t,i)})(e,t,n):F.none();var i},Qu=I(ju,!0),$u=I(ju,!1),qu=I(Gu,!0),Wu=I(Gu,!1),Ku="_mce_caret",Zu=e=>Yi(e)&&e.id===Ku,Xu=(e,t)=>{let n=t;for(;n&&n!==e;){if(Zu(n))return n;n=n.parentNode}return null},Ju=e=>Ee(e,"name"),eh=e=>Ot.isArray(e.start),th=e=>!(!Ju(e)&&b(e.forward))||e.forward,nh=(e,t)=>(Yi(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),ih=(e,t)=>Wu(e).fold(N,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),rh=(e,t,n)=>!(!(e=>!e.hasChildNodes())(t)||!Xu(e,t))&&(((e,t)=>{var n;const i=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Rr);e.appendChild(i),t.setStart(i,0),t.setEnd(i,0)})(t,n),!0),oh=(e,t,n,i)=>{const r=n[t?"start":"end"],o=e.getRoot();if(r){let e=o,n=r[0];for(let t=r.length-1;e&&t>=1;t--){const n=e.childNodes;if(rh(o,e,i))return!0;if(r[t]>n.length-1)return!!rh(o,e,i)||ih(e,i);e=n[r[t]]}er(e)&&(n=Math.min(r[0],e.data.length)),Yi(e)&&(n=Math.min(r[0],e.childNodes.length)),t?i.setStart(e,n):i.setEnd(e,n)}return!0},sh=e=>er(e)&&e.data.length>0,ah=(e,t,n)=>{const i=e.get(n.id+"_"+t),r=null==i?void 0:i.parentNode,o=n.keep;if(i&&r){let s,a;if("start"===t?o?i.hasChildNodes()?(s=i.firstChild,a=1):sh(i.nextSibling)?(s=i.nextSibling,a=0):sh(i.previousSibling)?(s=i.previousSibling,a=i.previousSibling.data.length):(s=r,a=e.nodeIndex(i)+1):(s=r,a=e.nodeIndex(i)):o?i.hasChildNodes()?(s=i.firstChild,a=1):sh(i.previousSibling)?(s=i.previousSibling,a=i.previousSibling.data.length):(s=r,a=e.nodeIndex(i)):(s=r,a=e.nodeIndex(i)),!o){const r=i.previousSibling,o=i.nextSibling;let l;for(Ot.each(Ot.grep(i.childNodes),e=>{er(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);if(er(o)&&er(r)&&!Lt.browser.isOpera()){const t=r.data.length;r.appendData(o.data),e.remove(o),s=r,a=t}}return F.some(rl(s,a))}return F.none()},lh=(e,t)=>{const n=e.dom;if(t){if(eh(t))return((e,t)=>{const n=e.createRng();return oh(e,!0,t,n)&&oh(e,!1,t,n)?F.some({range:n,forward:th(t)}):F.none()})(n,t);if((e=>m(e.start))(t))return((e,t)=>{const n=F.from(fl(e.getRoot(),t.start)),i=F.from(fl(e.getRoot(),t.end));return Nt(n,i,(n,i)=>{const r=e.createRng();return r.setStart(n.container(),n.offset()),r.setEnd(i.container(),i.offset()),{range:r,forward:th(t)}})})(n,t);if((e=>Ee(e,"id"))(t))return((e,t)=>{const n=ah(e,"start",t),i=ah(e,"end",t);return Nt(n,i.or(n),(n,i)=>{const r=e.createRng();return r.setStart(nh(e,n.container()),n.offset()),r.setEnd(nh(e,i.container()),i.offset()),{range:r,forward:th(t)}})})(n,t);if(Ju(t))return((e,t)=>F.from(e.select(t.name)[t.index]).map(t=>{const n=e.createRng();return n.selectNode(t),{range:n,forward:!0}}))(n,t);if((e=>Ee(e,"rng"))(t))return F.some({range:t.rng,forward:th(t)})}return F.none()},ch=(e,t,n)=>El(e,t,n),dh=(e,t)=>{lh(e,t).each(({range:t,forward:n})=>{e.setRng(t,n)})},uh=e=>Yi(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),hh=(ph=vr,e=>ph===e);var ph;const mh=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),fh=e=>!mh(e)&&!hh(e)&&!yr(e),gh=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},vh=e=>K((e=>ie(e,e=>{const t=Ba(e);return t?[bn.fromDom(t)]:[]}))(e),Tr),yh=(e,t)=>{const n=Fi(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:vh(e)},bh=e=>yh(gh(e.selection.getSel()),bn.fromDom(e.getBody())),Ah=(e,t)=>ei(e,"table",t),_h=e=>Nn(e).fold(k([e]),t=>[e].concat(_h(t))),wh=e=>Un(e).fold(k([e]),t=>"br"===Yt(t)?Dn(t).map(t=>[e].concat(wh(t))).getOr([]):[e].concat(wh(t))),xh=(e,t)=>Nt((e=>{const t=e.startContainer,n=e.startOffset;return er(t)?0===n?F.some(bn.fromDom(t)):F.none():F.from(t.childNodes[n]).map(bn.fromDom)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return er(t)?n===t.data.length?F.some(bn.fromDom(t)):F.none():F.from(t.childNodes[n-1]).map(bn.fromDom)})(t),(t,n)=>{const i=ee(_h(e),I(xn,t)),r=ee(wh(e),I(xn,n));return i.isSome()&&r.isSome()}).getOr(!1),Ch=(e,t,n,i)=>{const r=n,o=new Hi(n,r),s=_e(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!Y(["td","th","table"],t.toLowerCase()));let a=n;do{if(er(a)&&0!==Ot.trim(a.data).length)return void(i?t.setStart(a,0):t.setEnd(a,a.data.length));if(s[a.nodeName])return void(i?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=i?o.next():o.prev());"BODY"===r.nodeName&&(i?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},Eh=e=>{const t=e.selection.getSel();return w(t)&&t.rangeCount>0},Mh=(e,t)=>{const n=bh(e);n.length>0?$(n,n=>{const i=n.dom,r=e.dom.createRng();r.setStartBefore(i),r.setEndAfter(i),t(r,!0)}):t(e.selection.getRng(),!1)},Sh=(e,t,n)=>{const i=Cl(e,t);n(i),e.moveToBookmark(i)},Th=e=>C(null==e?void 0:e.nodeType),kh=e=>Yi(e)&&!uh(e)&&!Zu(e)&&!Ki(e),Lh=(e,t,n)=>{const{selection:i,dom:r}=e,o=i.getNode(),s=cr(o);Sh(i,!0,()=>{t()});s&&cr(o)&&r.isChildOf(o,e.getBody())?e.selection.select(o):n(i.getStart())&&Dh(r,i)},Dh=(e,t)=>{var n,i;const r=t.getRng(),{startContainer:o,startOffset:s}=r;if(!((e,t)=>{if(kh(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),i=parseInt(n,10);return!isNaN(i)&&i>0}return!1})(e,t.getNode())&&Yi(o)){const a=o.childNodes,l=e.getRoot();let c;if(s<a.length){const t=a[s];c=new Hi(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:l)}else{const t=a[a.length-1];c=new Hi(t,null!==(i=e.getParent(t,e.isBlock))&&void 0!==i?i:l),c.next(!0)}for(let n=c.current();n;n=c.next()){if("false"===e.getContentEditable(n))return;if(er(n)&&!Ph(n))return r.setStart(n,0),void t.setRng(r)}}},Ih=(e,t,n)=>{if(e){const i=t?"nextSibling":"previousSibling";for(e=n?e:e[i];e;e=e[i])if(Yi(e)||!Ph(e))return e}},Rh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Po(e,t),Oh=(e,t,n)=>e.schema.isValidChild(t,n),Ph=(e,t=!1)=>{if(w(e)&&er(e)){const n=t?e.data.replace(/ /g," "):e.data;return so(n)}return!1},Bh=(e,t)=>{const n=e.dom;return kh(t)&&"false"===n.getContentEditable(t)&&((e,t)=>{const n="[data-mce-cef-wrappable]",i=Nc(e),r=Ze(i)?n:`${n},${i}`;return _n(bn.fromDom(t),r)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},Nh=(e,t)=>x(e)?e(t):(w(t)&&(e=e.replace(/%(\w+)/g,(e,n)=>t[n]||e)),e),Uh=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Fh=(e,t)=>{if(_(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=ks(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},zh=(e,t,n)=>{const i=e.getStyle(t,n);return Fh(i,n)},Hh=(e,t)=>{let n;return e.getParent(t,t=>!!Yi(t)&&(n=e.getStyle(t,"text-decoration"),!!n&&"none"!==n)),n},jh=(e,t,n)=>e.getParents(t,n,e.getRoot()),Vh=(e,t,n)=>{const i=e.formatter.get(t);return w(i)&&G(i,n)},Yh=(e,t,n)=>{const i=["inline","block","selector","attributes","styles","classes"],r=e=>_e(e,(e,t)=>G(i,e=>e===t));return Vh(e,t,t=>{const i=r(t);return Vh(e,n,e=>{const t=r(e);return((e,t,n=a)=>s(n).eq(e,t))(i,t)})})},Gh=e=>Me(e,"block"),Qh=e=>Me(e,"selector"),$h=e=>Me(e,"inline"),qh=e=>Qh(e)&&!1!==e.expand&&!$h(e),Wh=e=>(e=>{const t=[];let n=e;for(;n;){if(er(n)&&n.data!==Rr||n.childNodes.length>1)return[];Yi(n)&&t.push(n),n=n.firstChild}return t})(e).length>0,Kh=e=>Zu(e.dom)&&Wh(e.dom),Zh=uh,Xh=jh,Jh=Ph,ep=Rh,tp=e=>sr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,np=(e,t)=>{let n=t;for(;n;){if(Yi(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ip=(e,t,n,i)=>{const r=t.data;if(e){for(let e=n;e>0;e--)if(i(r.charAt(e-1)))return e}else for(let e=n;e<r.length;e++)if(i(r.charAt(e)))return e;return-1},rp=(e,t,n)=>ip(e,t,n,e=>hh(e)||mh(e)),op=(e,t,n)=>ip(e,t,n,fh),sp=(e,t,n,i,r,o)=>{let s;const a=e.getParent(n,e.isBlock)||t,l=(t,n,i)=>{const o=Ta(e),l=r?o.backwards:o.forwards;return F.from(l(t,n,(e,t)=>Zh(e.parentNode)?-1:(s=e,i(r,e,t)),a))};return l(n,i,rp).bind(e=>o?l(e.container,e.offset+(r?-1:0),op):F.some(e)).orThunk(()=>s?F.some({container:s,offset:r?0:s.length}):F.none())},ap=(e,t,n,i,r)=>{const o=i[r];er(i)&&Ze(i.data)&&o&&(i=o);const s=Xh(e,i);for(let i=0;i<s.length;i++)for(let r=0;r<t.length;r++){const o=t[r];if((!w(o.collapsed)||o.collapsed===n.collapsed)&&(Qh(o)&&e.is(s[i],o.selector)))return s[i]}return i},lp=(e,t,n,i)=>{var r;let o=n;const s=e.getRoot(),a=t[0];if(Gh(a)&&(o=a.wrapper?null:e.getParent(n,a.block,s)),!o){const t=null!==(r=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:s;o=e.getParent(er(n)?n.parentNode:n,t=>t!==s&&ep(e.schema,t),t)}if(o&&Gh(a)&&a.wrapper&&(o=Xh(e,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o&&o[i]&&!e.isBlock(o[i])&&(o=o[i],!Uh(o,"br")););return o||n},cp=(e,t,n,i)=>{const r=n.parentNode;return!w(n[i])&&(!(r!==t&&!_(r)&&!e.isBlock(r))||cp(e,t,r,i))},dp=(e,t,n,i,r)=>{let o=n;const s=r?"previousSibling":"nextSibling",a=e.getRoot();if(er(n)&&!Jh(n)&&(r?i>0:i<n.data.length))return n;for(;o;){if(!t[0].block_expand&&e.isBlock(o))return o;for(let t=o[s];t;t=t[s]){const n=er(t)&&!cp(e,a,t,s);if(!Zh(t)&&!tp(t)&&!Jh(t,n))return o}if(o===a||o.parentNode===a){n=o;break}o=o.parentNode}return n},up=e=>Zh(e.parentNode)||Zh(e),hp=(e,t,n,i=!1)=>{let{startContainer:r,startOffset:o,endContainer:s,endOffset:a}=t;const l=n[0];if(Yi(r)&&r.hasChildNodes()&&(r=Na(r,o),er(r)&&(o=0)),Yi(s)&&s.hasChildNodes()&&(s=Na(s,t.collapsed?a:a-1),er(s)&&(a=s.data.length)),r=np(e,r),s=np(e,s),up(r)&&(r=Zh(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,er(r)&&(o=t.collapsed?r.length:0)),up(s)&&(s=Zh(s)?s:s.parentNode,s=t.collapsed?s.nextSibling||s:s.previousSibling||s,er(s)&&(a=t.collapsed?0:s.length)),t.collapsed){sp(e,e.getRoot(),r,o,!0,i).each(({container:e,offset:t})=>{r=e,o=t});sp(e,e.getRoot(),s,a,!1,i).each(({container:e,offset:t})=>{s=e,a=t})}return($h(l)||l.block_expand)&&($h(l)&&er(r)&&0!==o||(r=dp(e,n,r,o,!0)),$h(l)&&er(s)&&a!==s.data.length||(s=dp(e,n,s,a,!1))),qh(l)&&(r=ap(e,n,t,r,"previousSibling"),s=ap(e,n,t,s,"nextSibling")),(Gh(l)||Qh(l))&&(r=lp(e,n,r,"previousSibling"),s=lp(e,n,s,"nextSibling"),Gh(l)&&(e.isBlock(r)||(r=dp(e,n,r,o,!0)),e.isBlock(s)||(s=dp(e,n,s,a,!1)))),Yi(r)&&r.parentNode&&(o=e.nodeIndex(r),r=r.parentNode),Yi(s)&&s.parentNode&&(a=e.nodeIndex(s)+1,s=s.parentNode),{startContainer:r,startOffset:o,endContainer:s,endOffset:a}},pp=(e,t,n)=>{var i;const r=t.startOffset,o=Na(t.startContainer,r),s=t.endOffset,a=Na(t.endContainer,s-1),l=e=>{const t=e[0];er(t)&&t===o&&r>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===s&&e.length>0&&n===a&&er(n)&&e.splice(e.length-1,1),e},c=(e,t,n)=>{const i=[];for(;e&&e!==n;e=e[t])i.push(e);return i},d=(t,n)=>e.getParent(t,e=>e.parentNode===n,n),u=(e,t,i)=>{const r=i?"nextSibling":"previousSibling";for(let o=e,s=o.parentNode;o&&o!==t;o=s){s=o.parentNode;const t=c(o===e?o:o[r],r);t.length&&(i||t.reverse(),n(l(t)))}};if(o===a)return n(l([o]));const h=null!==(i=e.findCommonAncestor(o,a))&&void 0!==i?i:e.getRoot();if(e.isChildOf(o,a))return u(o,h,!0);if(e.isChildOf(a,o))return u(a,h);const p=d(o,h)||o,m=d(a,h)||a;u(o,p,!0);const f=c(p===o?p:p.nextSibling,"nextSibling",m===a?m.nextSibling:m);f.length&&n(l(f)),u(a,m)},mp=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],fp=(e,t,n,i)=>Tn(t).fold(()=>"skipping",r=>"br"===i||(e=>Wt(e)&&Ar(e)===Rr)(t)?"valid":(e=>qt(e)&&vn(e,ca()))(t)?"existing":Zu(t.dom)?"caret":G(mp,e=>_n(t,e))?"valid-block":Oh(e,n,i)&&Oh(e,Yt(r),n)?"valid":"invalid-child"),gp=(e,t,n,i,r,o)=>{const{uid:s=t,...a}=n;pn(e,ca()),en(e,`${ua()}`,s),en(e,`${da()}`,i);const{attributes:l={},classes:c=[]}=r(s,a);if(tn(e,l),((e,t)=>{$(t,t=>{pn(e,t)})})(e,c),o){c.length>0&&en(e,`${pa()}`,c.join(","));const t=me(l);t.length>0&&en(e,`${ma()}`,t.join(","))}},vp=e=>{fn(e,ca()),sn(e,`${ua()}`),sn(e,`${da()}`),sn(e,`${ha()}`);const t=rn(e,`${ma()}`).map(e=>e.split(",")).getOr([]),n=rn(e,`${pa()}`).map(e=>e.split(",")).getOr([]);var i;$(t,t=>sn(e,t)),i=e,$(n,e=>{fn(i,e)}),sn(e,`${pa()}`),sn(e,`${ma()}`)},yp=(e,t,n,i,r)=>{const o=bn.fromTag("span",e);return gp(o,t,n,i,r,!1),o},bp=(e,t,n,i,r,o)=>{const s=[],a=yp(e.getDoc(),n,o,i,r),l=sa(),c=()=>{l.clear()},d=e=>{$(e,u)},u=t=>{switch(fp(e,t,"span",Yt(t))){case"invalid-child":{c();const e=Pn(t);d(e),c();break}case"valid-block":c(),gp(t,n,o,i,r,!0);break;case"valid":{const e=l.get().getOrThunk(()=>{const e=Ca(a);return s.push(e),l.set(e),e});yi(t,e);break}}};return pp(e.dom,t,e=>{c(),(e=>{const t=Q(e,bn.fromDom);d(t)})(e)}),s},Ap=(e,t,n,i)=>{e.undoManager.transact(()=>{const r=e.selection,o=r.getRng(),s=bh(e).length>0,a=wa("mce-annotation");if(o.collapsed&&!s&&((e,t)=>{const n=hp(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,o),r.getRng().collapsed&&!s){const o=yp(e.getDoc(),a,i,t,n.decorate);Ei(o,vr),r.getRng().insertNode(o.dom),r.select(o.dom)}else Sh(r,!1,()=>{Mh(e,r=>{bp(e,r,a,t,n.decorate,i)})})})},_p=e=>{const t=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>Ce(e,t).map(e=>e.settings),getNames:()=>me(e)}})();((e,t)=>{const n=da(),i=e=>F.from(e.attr(n)).bind(t.lookup),r=e=>{var t,n;e.attr(ua(),null),e.attr(da(),null),e.attr(ha(),null);const i=F.from(e.attr(ma())).map(e=>e.split(",")).getOr([]),r=F.from(e.attr(pa())).map(e=>e.split(",")).getOr([]);$(i,t=>e.attr(t,null));const o=null!==(n=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==n?n:[],s=se(o,[ca()].concat(r));e.attr("class",s.length>0?s.join(" "):null),e.attr(pa(),null),e.attr(ma(),null)};e.serializer.addTempAttr(ha()),e.serializer.addAttributeFilter(n,e=>{for(const t of e)i(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():r(t))})})})(e,t);const n=Aa(e,t),i=Xt("span"),r=e=>{$(e,e=>{i(e)?wi(e):vp(e)})};return{register:(e,n)=>{t.register(e,n)},annotate:(n,i)=>{t.lookup(n).each(t=>{Ap(e,n,t,i)})},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{ga(e,F.some(t)).each(({elements:t})=>{const n=e.selection.getBookmark();r(t),e.selection.moveToBookmark(n)})},removeAll:t=>{const n=e.selection.getBookmark();ge(ba(e,t),(e,t)=>{r(e)}),e.selection.moveToBookmark(n)},getAll:t=>{const n=ba(e,t);return ve(n,e=>Q(e,e=>e.dom))}}},wp=e=>({getBookmark:I(ch,e),moveToBookmark:I(dh,e)});wp.isBookmarkNode=uh;const xp=(e,t,n)=>!n.collapsed&&G(n.getClientRects(),n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t)),Cp=(e,t,n)=>{e.dispatch(t,n)},Ep=(e,t,n,i)=>{e.dispatch("FormatApply",{format:t,node:n,vars:i})},Mp=(e,t,n,i)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:i})},Sp=(e,t)=>e.dispatch("SetContent",t),Tp=(e,t)=>e.dispatch("GetContent",t),kp=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Lp={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Lp.metaKeyPressed(e),metaKeyPressed:e=>Lt.os.isMacOS()||Lt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Dp="data-mce-selected",Ip=Math.abs,Rp=Math.round,Op={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Pp=(e,t)=>{const n=t.dom,i=t.getDoc(),r=document,o=t.getBody();let s,a,l,c,d,u,h,p,m,f,g,v,y,b,A;const _=e=>w(e)&&(ar(e)||n.is(e,"figure.image")),x=e=>hr(e)||n.hasClass(e,"mce-preview-object"),C=e=>{const n=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){const n=e.touches[0];return _(e.target)&&!xp(n.clientX,n.clientY,t)}return _(e.target)&&!xp(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},E=e=>n.hasClass(e,"mce-preview-object")&&w(e.firstElementChild)?[e,e.firstElementChild]:n.is(e,"figure.image")?[e.querySelector("img")]:[e],M=e=>{const i=Cc(t);return!!i&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(n.hasClass(e,"mce-preview-object")&&w(e.firstElementChild)?_n(bn.fromDom(e.firstElementChild),i):_n(bn.fromDom(e),i))))},S=(e,i,r)=>{if(w(r)){const o=E(e);$(o,e=>{e.style[i]||!t.schema.isValid(e.nodeName.toLowerCase(),i)?n.setStyle(e,i,r):n.setAttrib(e,i,""+r)})}},T=(e,t,n)=>{S(e,"width",t),S(e,"height",n)},k=e=>{let i,r,d,w,C;i=e.screenX-u,r=e.screenY-h,v=i*c[2]+p,y=r*c[3]+m,v=v<5?5:v,y=y<5?5:y,d=(_(s)||x(s))&&!1!==Ec(t)?!Lp.modifierPressed(e):Lp.modifierPressed(e),d&&(Ip(i)>Ip(r)?(y=Rp(v*f),v=Rp(y/f)):(v=Rp(y/f),y=Rp(v*f))),T(a,v,y),w=c.startPos.x+i,C=c.startPos.y+r,w=w>0?w:0,C=C>0?C:0,n.setStyles(l,{left:w,top:C,display:"block"}),l.innerHTML=v+" &times; "+y,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",undefined+(p-v)),c[3]<0&&a.clientHeight<=y&&n.setStyle(a,"top",undefined+(m-y)),i=o.scrollWidth-b,r=o.scrollHeight-A,i+r!==0&&n.setStyles(l,{left:w-i,top:C-r}),g||(((e,t,n,i,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:i,origin:r})})(t,s,p,m,"corner-"+c.name),g=!0)},L=()=>{const e=g;g=!1,e&&(S(s,"width",v),S(s,"height",y)),n.unbind(i,"mousemove",k),n.unbind(i,"mouseup",L),r!==i&&(n.unbind(r,"mousemove",k),n.unbind(r,"mouseup",L)),n.remove(a),n.remove(l),n.remove(d),D(s),e&&(((e,t,n,i,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:i,origin:r})})(t,s,v,y,"corner-"+c.name),n.setAttrib(s,"style",n.getAttrib(s,"style"))),t.nodeChanged()},D=e=>{B();const g=n.getPos(e,o),_=g.x,w=g.y,C=e.getBoundingClientRect(),S=C.width||C.right-C.left,D=C.height||C.bottom-C.top;s!==e&&(R(),s=e,v=y=0);const I=t.dispatch("ObjectSelected",{target:e});M(e)&&!I.isDefaultPrevented()?ge(Op,(e,t)=>{const g=g=>{const v=E(s)[0];var y;u=g.screenX,h=g.screenY,p=v.clientWidth,m=v.clientHeight,f=m/p,c=e,c.name=t,c.startPos={x:S*e[0]+_,y:D*e[1]+w},b=o.scrollWidth,A=o.scrollHeight,d=n.add(o,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=x(y=s)?n.create("img",{src:Lt.transparentSrc}):y.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:_,top:w,margin:0}),T(a,S,D),a.removeAttribute(Dp),o.appendChild(a),n.bind(i,"mousemove",k),n.bind(i,"mouseup",L),r!==i&&(n.bind(r,"mousemove",k),n.bind(r,"mouseup",L)),l=n.add(o,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+m)};let v=n.get("mceResizeHandle"+t);v&&n.remove(v),v=n.add(o,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),n.bind(v,"mousedown",e=>{e.stopImmediatePropagation(),e.preventDefault(),g(e)}),e.elm=v,n.setStyles(v,{left:S*e[0]+_-v.offsetWidth/2,top:D*e[1]+w-v.offsetHeight/2})}):R(!1)},I=aa(D,0),R=(e=!0)=>{I.cancel(),B(),s&&e&&s.removeAttribute(Dp),ge(Op,(e,t)=>{const i=n.get("mceResizeHandle"+t);i&&(n.unbind(i),n.remove(i))})},O=(e,t)=>n.isChildOf(e,t),P=i=>{if(g||t.removed||t.composing)return;const r="mousedown"===i.type?i.target:e.getNode(),s=ni(bn.fromDom(r),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>n.isEditable(e.parentElement)||"IMG"===e.nodeName&&n.isEditable(e)).getOrUndefined(),a=w(s)?n.getAttrib(s,Dp,"1"):"1";if($(n.select(`img[${Dp}],hr[${Dp}]`),e=>{e.removeAttribute(Dp)}),w(s)&&O(s,o)&&t.hasFocus()){N();const t=e.getStart(!0);if(O(t,s)&&O(e.getEnd(!0),s))return n.setAttrib(s,Dp,a),void I.throttle(s)}R()},B=()=>{ge(Op,e=>{e.elm&&(n.unbind(e.elm),delete e.elm)})},N=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",()=>{N(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",P),t.on("keyup compositionend",e=>{s&&"TABLE"===s.nodeName&&P(e)}),t.on("hide blur",R),t.on("contextmenu longpress",C,!0)}),t.on("remove",B);return{isResizable:M,showResizeRect:D,hideResizeRect:R,updateResizeRect:P,destroy:()=>{I.cancel(),s=a=d=null}}},Bp=(e,t,n)=>{const i=e.document.createRange();var r;return r=i,t.fold(e=>{r.setStartBefore(e.dom)},(e,t)=>{r.setStart(e.dom,t)},e=>{r.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})})(i,n),i},Np=(e,t,n,i,r)=>{const o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(i.dom,r),o},Up=Ll([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Fp=(e,t,n)=>t(bn.fromDom(n.startContainer),n.startOffset,bn.fromDom(n.endContainer),n.endOffset),zp=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:k(e),rtl:F.none}),relative:(t,n)=>({ltr:Be(()=>Bp(e,t,n)),rtl:Be(()=>F.some(Bp(e,n,t)))}),exact:(t,n,i,r)=>({ltr:Be(()=>Np(e,t,n,i,r)),rtl:Be(()=>F.some(Np(e,i,r,t,n)))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter(e=>!1===e.collapsed).map(e=>Up.rtl(bn.fromDom(e.endContainer),e.endOffset,bn.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>Fp(0,Up.ltr,n));return Fp(0,Up.ltr,n)})(0,n)};Up.ltr,Up.rtl;const Hp=(e,t,n,i)=>({start:e,soffset:t,finish:n,foffset:i}),jp=(e,t,n)=>{var i,r;return F.from(null===(r=(i=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(i,t,n)).bind(t=>{if(null===t.offsetNode)return F.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),F.some(n)})},Vp=(e,t,n)=>{var i,r;return F.from(null===(r=(i=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(i,t,n))},Yp=document.caretPositionFromPoint?jp:document.caretRangeFromPoint?Vp:F.none,Gp=Ll([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Qp={before:Gp.before,on:Gp.on,after:Gp.after,cata:(e,t,n,i)=>e.fold(t,n,i),getStart:e=>e.fold(L,L,L)},$p=Ll([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),qp={domRange:$p.domRange,relative:$p.relative,exact:$p.exact,exactFromRange:e=>$p.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>bn.fromDom(e.startContainer),relative:(e,t)=>Qp.getStart(e),exact:(e,t,n,i)=>e}))(e);return Sn(t)},range:Hp},Wp=(e,t)=>{const n=Yt(e);return"input"===n?Qp.after(e):Y(["br","img"],n)?0===t?Qp.before(e):Qp.after(e):Qp.on(e,t)},Kp=(e,t)=>{const n=e.fold(Qp.before,Wp,Qp.after),i=t.fold(Qp.before,Wp,Qp.after);return qp.relative(n,i)},Zp=(e,t,n,i)=>{const r=Wp(e,t),o=Wp(n,i);return qp.relative(r,o)},Xp=(e,t)=>{const n=(t||document).createDocumentFragment();return $(e,e=>{n.appendChild(e.dom)}),bn.fromDom(n)},Jp=e=>{const t=qp.getWin(e).dom,n=(e,n,i,r)=>Np(t,e,n,i,r),i=(e=>e.match({domRange:e=>{const t=bn.fromDom(e.startContainer),n=bn.fromDom(e.endContainer);return Zp(t,e.startOffset,n,e.endOffset)},relative:Kp,exact:Zp}))(e);return zp(t,i).match({ltr:n,rtl:n})},em=(e,t,n)=>((e,t,n)=>{const i=bn.fromDom(e.document);return Yp(i,t,n).map(e=>Hp(bn.fromDom(e.startContainer),e.startOffset,bn.fromDom(e.endContainer),e.endOffset))})(e,t,n),tm=(e,t,n)=>{const i=Sn(bn.fromDom(n));return em(i.dom,e,t).map(e=>{const t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined()},nm=(e,t)=>w(e)&&w(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,im=(e,t,n)=>null!==((e,t,n)=>{let i=e;for(;i&&i!==t;){if(n(i))return i;i=i.parentNode}return null})(e,t,n),rm=(e,t,n)=>im(e,t,e=>e.nodeName===n),om=(e,t)=>zr(e)&&!im(e,t,Zu),sm=(e,t,n)=>{const i=t.parentNode;if(i){const r=new Hi(t,e.getParent(i,e.isBlock)||e.getRoot());let o;for(;o=r[n?"prev":"next"]();)if(sr(o))return!0}return!1},am=(e,t,n,i,r)=>{const o=e.getRoot(),s=e.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return F.none();const d=e.getParent(a,e.isBlock)||o;if(i&&sr(r)&&t&&e.isEmpty(d))return F.some(rl(a,e.nodeIndex(r)));const u=new Hi(r,d);for(;c=u[i?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||om(c,o))return F.none();if(er(c)&&c.data.length>0)return rm(c,o,"A")?F.none():F.some(rl(c,i?c.data.length:0));if(e.isBlock(c)||s[c.nodeName.toLowerCase()])return F.none();l=c}return ir(l)?F.none():n&&l?F.some(rl(l,0)):F.none()},lm=(e,t,n,i)=>{const r=e.getRoot();let o,s=!1,a=n?i.startContainer:i.endContainer,l=n?i.startOffset:i.endOffset;const c=Yi(a)&&l===a.childNodes.length,d=e.schema.getNonEmptyElements();let u=n;if(zr(a))return F.none();if(Yi(a)&&l>a.childNodes.length-1&&(u=!1),rr(a)&&(a=r,l=0),a===r){if(u&&(o=a.childNodes[l>0?l-1:0],o)){if(zr(o))return F.none();if(d[o.nodeName]||Zi(o))return F.none()}if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=er(a)&&c?a.data.length:0,!t&&a===r.lastChild&&Zi(a))return F.none();if(((e,t)=>{let n=t;for(;n&&n!==e;){if(cr(n))return!0;n=n.parentNode}return!1})(r,a)||zr(a))return F.none();if(mr(a))return F.none();if(a.hasChildNodes()&&!Zi(a)){o=a;const t=new Hi(a,r);do{if(cr(o)||zr(o)){s=!1;break}if(er(o)&&o.data.length>0){l=u?0:o.data.length,a=o,s=!0;break}if(d[o.nodeName.toLowerCase()]&&!ur(o)){l=e.nodeIndex(o),a=o.parentNode,u||l++,s=!0;break}}while(o=u?t.next():t.prev())}}}return t&&(er(a)&&0===l&&am(e,c,t,!0,a).each(e=>{a=e.container(),l=e.offset(),s=!0}),Yi(a)&&(o=a.childNodes[l],o||(o=a.childNodes[l-1]),!o||!sr(o)||((e,t)=>{var n;return(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)===t})(o,"A")||sm(e,o,!1)||sm(e,o,!0)||am(e,c,t,!0,o).each(e=>{a=e.container(),l=e.offset(),s=!0}))),u&&!t&&er(a)&&l===a.data.length&&am(e,c,t,!1,a).each(e=>{a=e.container(),l=e.offset(),s=!0}),s&&a?F.some(rl(a,l)):F.none()},cm=(e,t)=>{const n=t.collapsed,i=t.cloneRange(),r=rl.fromRangeStart(t);return lm(e,n,!0,i).each(e=>{n&&rl.isAbove(r,e)||i.setStart(e.container(),e.offset())}),n||lm(e,n,!1,i).each(e=>{i.setEnd(e.container(),e.offset())}),n&&i.collapse(!0),nm(t,i)?F.none():F.some(i)},dm=(e,t)=>e.splitText(t),um=e=>{let t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset;if(t===i&&er(t)){if(n>0&&n<t.data.length)if(i=dm(t,n),t=i.previousSibling,r>n){r-=n;const e=dm(i,r).previousSibling;t=i=e,r=e.data.length,n=0}else r=0}else if(er(t)&&n>0&&n<t.data.length&&(t=dm(t,n),n=0),er(i)&&r>0&&r<i.data.length){const e=dm(i,r).previousSibling;i=e,r=e.data.length}return{startContainer:t,startOffset:n,endContainer:i,endOffset:r}},hm=e=>({walk:(t,n)=>pp(e,t,n),split:um,expand:(t,n={type:"word"})=>{if("word"===n.type){const n=hp(e,t,[{inline:"span"}]),i=e.createRng();return i.setStart(n.startContainer,n.startOffset),i.setEnd(n.endContainer,n.endOffset),i}return t},normalize:t=>cm(e,t).fold(N,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});hm.compareRanges=nm,hm.getCaretRangeFromPoint=tm,hm.getSelectedNode=Ba,hm.getNode=Na;const pm=((e,t)=>{const n=n=>{const i=t(n);if(i<=0||null===i){const t=ci(n,e);return parseFloat(t)||0}return i},i=(e,t)=>X(t,(t,n)=>{const i=ci(e,n),r=void 0===i?0:parseInt(i,10);return isNaN(r)?t:t+r},0);return{set:(t,n)=>{if(!C(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const i=t.dom;oi(i)&&(i.style[e]=n+"px")},get:n,getOuter:n,aggregate:i,max:(e,t,n)=>{const r=i(e,n);return t>r?t-r:0}}})("height",e=>{const t=e.dom;return qn(e)?t.getBoundingClientRect().height:t.offsetHeight}),mm=()=>bn.fromDom(document),fm=(e,t)=>e.view(t).fold(k([]),t=>{const n=e.owner(t),i=fm(e,n);return[t].concat(i)});var gm=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?F.none():F.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(bn.fromDom)},owner:e=>Mn(e)});const vm=e=>{const t=mm(),n=Ri(t),i=((e,t)=>{const n=t.owner(e);return fm(t,n)})(e,gm),r=Ii(e),o=Z(i,(e,t)=>{const n=Ii(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Li(o.left+r.left+n.left,o.top+r.top+n.top)},ym=e=>"textarea"===Yt(e),bm=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,i=t.defaultView,r=t.documentElement;if(n===e.dom)return Li(n.offsetLeft,n.offsetTop);const o=Di(null==i?void 0:i.pageYOffset,r.scrollTop),s=Di(null==i?void 0:i.pageXOffset,r.scrollLeft),a=Di(r.clientTop,n.clientTop),l=Di(r.clientLeft,n.clientLeft);return Ii(e).translate(s-l,o-a)})(e),i=(e=>pm.get(e))(e);return{element:e,bottom:n.top+i,height:i,pos:n,cleanup:t}},Am=(e,t)=>{const n=((e,t)=>{const n=Pn(e);if(0===n.length||ym(e))return{element:e,offset:t};if(t<n.length&&!ym(n[t]))return{element:n[t],offset:0};{const i=n[n.length-1];return ym(i)?{element:e,offset:t}:"img"===Yt(i)?{element:i,offset:1}:Wt(i)?{element:i,offset:Ar(i).length}:{element:i,offset:Pn(i).length}}})(e,t),i=bn.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return mi(n.element,i),bm(i,()=>_i(i))},_m=(e,t,n,i)=>{Em(e,(r,o)=>xm(e,t,n,i),n)},wm=(e,t,n,i,r)=>{const o={elm:i.element.dom,alignToTop:r};if(((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,o))return;n(e,t,Ri(t).top,i,r),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,o)},xm=(e,t,n,i)=>{const r=bn.fromDom(e.getBody()),o=bn.fromDom(e.getDoc());r.dom.offsetWidth;const s=Am(bn.fromDom(n.startContainer),n.startOffset);wm(e,o,t,s,i),s.cleanup()},Cm=(e,t,n,i)=>{const r=bn.fromDom(e.getDoc());wm(e,r,n,(e=>bm(bn.fromDom(e),M))(t),i)},Em=(e,t,n)=>{const i=n.startContainer,r=n.startOffset,o=n.endContainer,s=n.endOffset;t(bn.fromDom(i),bn.fromDom(o));const a=e.dom.createRng();a.setStart(i,r),a.setEnd(o,s),e.selection.setRng(n)},Mm=(e,t,n,i,r)=>{const o=t.pos;if(i)Oi(o.left,o.top,r);else{const i=o.top-n+t.height;Oi(-e.getBody().getBoundingClientRect().left,i,r)}},Sm=(e,t,n,i,r,o)=>{const s=i+n,a=r.pos.top,l=r.bottom,c=l-a>=i;if(a<n)Mm(e,r,i,!1!==o,t);else if(a>s){Mm(e,r,i,c?!1!==o:!0===o,t)}else l>s&&!c&&Mm(e,r,i,!0===o,t)},Tm=(e,t,n,i,r)=>{const o=Sn(t).dom.innerHeight;Sm(e,t,n,o,i,r)},km=(e,t,n,i,r)=>{const o=Sn(t).dom.innerHeight;Sm(e,t,n,o,i,r);const s=vm(i.element),a=Ni(window);s.top<a.y?Pi(i.element,!1!==r):s.top>a.bottom&&Pi(i.element,!0===r)},Lm=(e,t,n)=>_m(e,Tm,t,n),Dm=(e,t,n)=>Cm(e,t,Tm,n),Im=(e,t,n)=>_m(e,km,t,n),Rm=(e,t,n)=>Cm(e,t,km,n),Om=(e,t,n)=>{(e.inline?Lm:Im)(e,t,n)},Pm=(e,t=!1)=>e.dom.focus({preventScroll:t}),Bm=e=>{const t=Vn(e).dom;return e.dom===t.activeElement},Nm=(e=mm())=>F.from(e.dom.activeElement).map(bn.fromDom),Um=(e,t)=>{const n=Wt(t)?Ar(t).length:Pn(t).length+1;return e>n?n:e<0?0:e},Fm=e=>qp.range(e.start,Um(e.soffset,e.start),e.finish,Um(e.foffset,e.finish)),zm=(e,t)=>!Vi(t.dom)&&(Cn(e,t)||xn(e,t)),Hm=e=>t=>zm(e,t.start)&&zm(e,t.finish),jm=e=>qp.range(bn.fromDom(e.startContainer),e.startOffset,bn.fromDom(e.endContainer),e.endOffset),Vm=e=>(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?F.from(t.getRangeAt(0)):F.none()).map(jm)})(Sn(e).dom).filter(Hm(e)),Ym=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),F.some(t)}catch(e){return F.none()}},Gm=e=>{const t=(e=>e.inline||Lt.browser.isFirefox())(e)?Vm(bn.fromDom(e.getBody())):F.none();e.bookmark=t.isSome()?t:e.bookmark},Qm=e=>(e.bookmark?e.bookmark:F.none()).bind(t=>((e,t)=>F.from(t).filter(Hm(e)).map(Fm))(bn.fromDom(e.getBody()),t)).bind(Ym),$m={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},qm={setEditorTimeout:(e,t,n)=>((e,t)=>(C(t)||(t=0),setTimeout(e,t)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const i=((e,t)=>(C(t)||(t=0),setInterval(e,t)))(()=>{e.removed?clearInterval(i):t()},n);return i}},Wm=e=>{const t=aa(()=>{Gm(e)},0);e.on("init",()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};Ks.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Ks.DOM.unbind(document,"mouseup",n)})})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||Gm(e)})})(e,t)}),e.on("remove",()=>{t.cancel()})};let Km;const Zm=Ks.DOM,Xm=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Jm=(e,t)=>{const n=Uc(e),i=Zm.getParent(t,t=>(e=>Yi(e)&&$m.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n));return null!==i},ef=e=>{try{const t=Vn(bn.fromDom(e.getElement()));return Nm(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},tf=(e,t)=>{const n=t.editor;Wm(n);const i=(e,t)=>{if(Md(e)&&!0!==e.inline){t(bn.fromDom(e.getContainer()),"tox-edit-focus")}};n.on("focusin",()=>{const t=e.focusedEditor;Xm(ef(n))&&i(n,pn),t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))}),n.on("focusout",()=>{qm.setEditorTimeout(n,()=>{const t=e.focusedEditor;Xm(ef(n))&&t===n||i(n,fn),Jm(n,ef(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Km||(Km=t=>{const n=e.activeEditor;n&&Qn(t).each(t=>{const i=t;i.ownerDocument===document&&(i===document.body||Jm(n,i)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},Zm.bind(document,"focusin",Km))},nf=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Km&&(Zm.unbind(document,"focusin",Km),Km=null)},rf=(e,t)=>(e=>e.collapsed?F.from(Na(e.startContainer,e.startOffset)).map(bn.fromDom):F.none())(t).bind(t=>Sr(t)?F.some(t):Cn(e,t)?F.none():F.some(e)),of=(e,t)=>{rf(bn.fromDom(e.getBody()),t).bind(e=>qu(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},sf=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},af=e=>{return Bm(e)||(t=e,Nm(Vn(t)).filter(e=>t.dom.contains(e.dom))).isSome();var t},lf=e=>e.inline?(e=>{const t=e.getBody();return t&&af(bn.fromDom(t))})(e):(e=>w(e.iframeElement)&&Bm(bn.fromDom(e.iframeElement)))(e),cf=e=>lf(e)||(e=>{const t=Vn(bn.fromDom(e.getElement()));return Nm(t).filter(t=>!Xm(t.dom)&&Jm(e,t.dom)).isSome()})(e),df=e=>e.editorManager.setActive(e),uf=(e,t)=>{e.removed||(t?df(e):(e=>{const t=e.selection,n=e.getBody();let i=t.getRng();e.quirks.refreshContentEditable(),w(e.bookmark)&&!lf(e)&&Qm(e).each(t=>{e.selection.setRng(t),i=t});const r=((e,t)=>e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)))(e,t.getNode());if(r&&e.dom.isChildOf(r,n))return sf(r),of(e,i),void df(e);e.inline||(Lt.browser.isOpera()||sf(n),e.getWin().focus()),(Lt.browser.isFirefox()||e.inline)&&(sf(n),of(e,i)),df(e)})(e))},hf=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),pf=(e,t,n,i,r)=>{const o=n?t.startContainer:t.endContainer,s=n?t.startOffset:t.endOffset;return F.from(o).map(bn.fromDom).map(e=>i&&t.collapsed?e:Bn(e,r(e,s)).getOr(e)).bind(e=>qt(e)?F.some(e):Tn(e).filter(qt)).map(e=>e.dom).getOr(e)},mf=(e,t,n=!1)=>pf(e,t,!0,n,(e,t)=>Math.min(Fn(e),t)),ff=(e,t,n=!1)=>pf(e,t,!1,n,(e,t)=>t>0?t-1:t),gf=(e,t)=>{const n=e;for(;e&&er(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},vf=(e,t)=>Q(t,t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t}),yf=["img","br"],bf=e=>{const t=_r(e).filter(e=>0!==e.trim().length||e.indexOf(vr)>-1).isSome();return t||Y(yf,Yt(e))||(e=>$t(e)&&"false"===nn(e,"contenteditable"))(e)},Af=(e,t)=>{const n=e=>{const i=Pn(e);for(let e=i.length-1;e>=0;e--){const r=i[e];if(t(r))return F.some(r);const o=n(r);if(o.isSome())return o}return F.none()};return n(e)},_f="[data-mce-autocompleter]",wf=(e,t)=>{if(xf(bn.fromDom(e.getBody())).isNone()){const i=bn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());vi(i,bn.fromDom(t.extractContents())),t.insertNode(i.dom),Tn(i).each(e=>e.dom.normalize()),(n=i,Af(n,bf)).map(t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===Yt(e)?1:_r(e).fold(()=>Pn(e).length,e=>e.length))(t))})}var n},xf=e=>ti(e,_f),Cf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ef=(e,t,n)=>{const i=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[i])return e[i];if(e!==t){let n=e[r];if(n)return n;for(let i=e.parent;i&&i!==t;i=i.parent)if(n=i[r],n)return n}},Mf=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!so(n))return!1;const i=e.parent;return!i||"span"===i.name&&!i.attr("style")||!/^[ ]+$/.test(n)},Sf=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Tf{static create(e,t){const n=new Tf(e,Cf[e]||1);return t&&ge(t,(e,t)=>{n.attr(t,e)}),n}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const n=this;if(!m(e))return w(e)&&ge(e,(e,t)=>{n.attr(t,e)}),n;const i=n.attributes;if(i){if(void 0!==t){if(null===t){if(e in i.map){delete i.map[e];let t=i.length;for(;t--;)if(i[t].name===e)return i.splice(t,1),n}return n}if(e in i.map){let n=i.length;for(;n--;)if(i[n].name===e){i[n].value=t;break}}else i.push({name:e,value:t});return i.map[e]=t,n}return i.map[e]}}clone(){const e=this,t=new Tf(e.name,e.type),n=e.attributes;if(n){const e=[];e.map={};for(let t=0,i=n.length;t<i;t++){const i=n[t];"id"!==i.name&&(e[e.length]={name:i.name,value:i.value},e.map[i.name]=i.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i&&(i.next=n),t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n&&(n.prev=i),e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const i=t.parent||this;return n?(t===i.firstChild?i.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=i,e}getAll(e){const t=this,n=[];for(let i=t.firstChild;i;i=Ef(i,t))i.name===e&&n.push(i);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=Ef(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){var i;const r=this;let o=r.firstChild;if(Sf(r))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(e[o.name])return!1;if(Sf(o))return!1}if(8===o.type)return!1;if(3===o.type&&!Mf(o))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&so(null!==(i=o.value)&&void 0!==i?i:""))return!1;if(n&&n(o))return!1}while(o=Ef(o,r));return!0}walk(e){return Ef(this,null,e)}}const kf=Ot.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Lf=e=>m(e.nodeValue)&&e.nodeValue.includes(Rr),Df=e=>(0===e.length?"":`${Q(e,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',If=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>Lf(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Rf=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>{if(Lf(e)){const t=e.parentNode;return t&&Ee(kf,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),Of=e=>null!==If(e).nextNode(),Pf=e=>null!==Rf(e).nextNode(),Bf=(e,t)=>null!==t.querySelector(Df(e)),Nf=(e,t)=>{$(((e,t)=>t.querySelectorAll(Df(e)))(e,t),t=>{const n=bn.fromDom(t);"all"===nn(n,"data-mce-bogus")?_i(n):$(e,e=>{on(n,e)&&sn(n,e)})})},Uf=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},Ff=S(Uf,If),zf=S(Uf,Rf),Hf=(e,t)=>{const n=[{condition:I(Bf,t),action:I(Nf,t)},{condition:Of,action:Ff},{condition:Pf,action:zf}];let i=e,r=!1;return $(n,({condition:t,action:n})=>{t(i)&&(r||(i=e.cloneNode(!0),r=!0),n(i))}),i},jf=e=>{const t=Fi(e,"[data-mce-bogus]");$(t,e=>{"all"===nn(e,"data-mce-bogus")?_i(e):xr(e)?(mi(e,bn.fromText(gr)),_i(e)):wi(e)})},Vf=e=>{const t=Fi(e,"input");$(t,e=>{sn(e,"name")})},Yf=(e,t)=>{const n=e.getDoc(),i=Vn(bn.fromDom(e.getBody())),r=bn.fromTag("div",n);en(r,"data-mce-bogus","all"),li(r,{position:"fixed",left:"-9999999px",top:"0"}),Ei(r,t.innerHTML),jf(r),Vf(r);const o=(e=>zn(e)?e:bn.fromDom(Mn(e).dom.body))(i);vi(o,r);const s=Pr(r.dom.innerText);return _i(r),s},Gf=(e,t,n)=>{let i;i="raw"===t.format?Ot.trim(Pr(Hf(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?Yf(e,n):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=Zl(e),i=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(i,"")})(e,e.serializer.serialize(n,t));return"text"!==t.format&&!kr(bn.fromDom(n))&&m(i)?Ot.trim(i):i},Qf=Ot.makeMap,$f=e=>{const t=[],n=(e=e||{}).indent,i=Qf(e.indent_before||""),r=Qf(e.indent_after||""),o=as.getEncodeFunc(e.entity_encoding||"raw",e.entities),s="xhtml"!==e.element_format;return{start:(e,a,l)=>{if(n&&i[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}if(t.push("<",e),a)for(let e=0,n=a.length;e<n;e++){const n=a[e];t.push(" ",n.name,'="',o(n.value,!0),'"')}if(t[t.length]=!l||s?">":" />",l&&n&&r[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}},end:e=>{let i;t.push("</",e,">"),n&&r[e]&&t.length>0&&(i=t[t.length-1],i.length>0&&"\n"!==i&&t.push("\n"))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:o(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,i)=>{i?t.push("<?",e," ",o(i),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},qf=(e={},t=bs())=>{const n=$f(e);e.validate=!("validate"in e)||e.validate;return{serialize:i=>{const r=e.validate,o={3:e=>{var t;n.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;n.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{n.pi(e.name,e.value)},10:e=>{var t;n.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;n.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do{s(t)}while(t=t.next)}};n.reset();const s=e=>{var i;const a=o[e.type];if(a)a(e);else{const o=e.name,a=o in t.getVoidElements();let l=e.attributes;if(r&&l&&l.length>1){const n=[];n.map={};const i=t.getElementRule(e.name);if(i){for(let e=0,t=i.attributesOrder.length;e<t;e++){const t=i.attributesOrder[e];if(t in l.map){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=l.length;e<t;e++){const t=l[e].name;if(!(t in n.map)){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}l=n}}if(n.start(o,l,a),Ao(o))m(e.value)&&n.text(e.value,!0),n.end(o);else if(!a){let t=e.firstChild;if(t){"pre"!==o&&"textarea"!==o||3!==t.type||"\n"!==(null===(i=t.value)||void 0===i?void 0:i[0])||n.text("\n",!0);do{s(t)}while(t=t.next)}n.end(o)}}};return 1!==i.type||e.inner?3===i.type?o[3](i):o[11](i):s(i),n.getContent()}}},Wf=new Set;$(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{Wf.add(e)});const Kf=["font","text-decoration","text-emphasis"],Zf=(e,t)=>me(e.parseStyle(e.getAttrib(t,"style"))),Xf=(e,t)=>re(Zf(e,t),e=>!(e=>Wf.has(e))(e)),Jf=(e,t,n)=>{const i=Zf(e,t),r=Zf(e,n),o=i=>{var r,o;const s=null!==(r=e.getStyle(t,i))&&void 0!==r?r:"",a=null!==(o=e.getStyle(n,i))&&void 0!==o?o:"";return Ke(s)&&Ke(a)&&s!==a};return G(i,e=>{const t=t=>G(t,t=>t===e);if(!t(r)&&t(Kf)){const e=K(r,e=>G(Kf,t=>Ye(e,t)));return G(e,o)}return o(e)})},eg=(e,t,n)=>F.from(n.container()).filter(er).exists(i=>{const r=e?0:-1;return t(i.data.charAt(n.offset()+r))}),tg=I(eg,!0,mh),ng=I(eg,!1,mh),ig=e=>{const t=e.container();return er(t)&&(0===t.data.length||Or(t.data)&&wp.isBookmarkNode(t.parentNode))},rg=(e,t)=>n=>mu(e?0:-1,n).filter(t).isSome(),og=e=>ar(e)&&"block"===ci(bn.fromDom(e),"display"),sg=e=>cr(e)&&!(e=>Yi(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),ag=rg(!0,og),lg=rg(!1,og),cg=rg(!0,hr),dg=rg(!1,hr),ug=rg(!0,Zi),hg=rg(!1,Zi),pg=rg(!0,sg),mg=rg(!1,sg),fg=(e,t)=>((e,t,n)=>Cn(t,e)?Ln(e,e=>n(e)||xn(e,t)).slice(0,-1):[])(e,t,N),gg=(e,t)=>[e].concat(fg(e,t)),vg=(e,t,n)=>Yu(e,t,n,ig),yg=(e,t,n)=>ee(gg(bn.fromDom(t.container()),e),(e=>t=>e.isBlock(Yt(t)))(n)),bg=(e,t,n,i)=>vg(e,t.dom,n).forall(e=>yg(t,n,i).fold(()=>!pu(e,n,t.dom),i=>!pu(e,n,t.dom)&&Cn(i,bn.fromDom(e.container())))),Ag=(e,t,n,i)=>yg(t,n,i).fold(()=>vg(e,t.dom,n).forall(e=>!pu(e,n,t.dom)),t=>vg(e,t.dom,n).isNone()),_g=I(Ag,!1),wg=I(Ag,!0),xg=I(bg,!1),Cg=I(bg,!0),Eg=e=>xu(e).exists(xr),Mg=(e,t,n,i)=>{const r=K(gg(bn.fromDom(n.container()),t),e=>i.isBlock(Yt(e))),o=de(r).getOr(t);return ju(e,o.dom,n).filter(Eg)},Sg=(e,t,n)=>xu(t).exists(xr)||Mg(!0,e,t,n).isSome(),Tg=(e,t,n)=>(e=>F.from(e.getNode(!0)).map(bn.fromDom))(t).exists(xr)||Mg(!1,e,t,n).isSome(),kg=I(Mg,!1),Lg=I(Mg,!0),Dg=e=>rl.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Ig=(e,t,n)=>{const i=K(gg(bn.fromDom(t.container()),e),e=>n.isBlock(Yt(e)));return de(i).getOr(e)},Rg=(e,t,n)=>Dg(t)?ng(t):ng(t)||$u(Ig(e,t,n).dom,t).exists(ng),Og=(e,t,n)=>Dg(t)?tg(t):tg(t)||Qu(Ig(e,t,n).dom,t).exists(tg),Pg=e=>xu(e).bind(e=>Zn(e,qt)).exists(e=>(e=>Y(["pre","pre-wrap"],e))(ci(e,"white-space"))),Bg=(e,t,n)=>((e,t)=>$u(e.dom,t).isNone())(e,t)||((e,t)=>Qu(e.dom,t).isNone())(e,t)||_g(e,t,n)||wg(e,t,n)||Tg(e,t,n)||Sg(e,t,n),Ng=(e,t)=>n=>{return i=new Hi(n,e)[t](),w(i)&&cr(i)&&nu(i);var i},Ug=(e,t,n)=>!Pg(t)&&(Bg(e,t,n)||Rg(e,t,n)||Og(e,t,n)),Fg=(e,t,n)=>!Pg(t)&&(_g(e,t,n)||xg(e,t,n)||Tg(e,t,n)||Rg(e,t,n)||((e,t)=>{const n=$u(e.dom,t).getOr(t),i=Ng(e.dom,"prev");return t.isAtStart()&&(i(t.container())||i(n.container()))})(e,t)),zg=(e,t,n)=>!Pg(t)&&(wg(e,t,n)||Cg(e,t,n)||Sg(e,t,n)||Og(e,t,n)||((e,t)=>{const n=Qu(e.dom,t).getOr(t),i=Ng(e.dom,"next");return t.isAtEnd()&&(i(t.container())||i(n.container()))})(e,t)),Hg=(e,t,n)=>Fg(e,t,n)||zg(e,(e=>{const t=e.container(),n=e.offset();return er(t)&&n<t.data.length?rl(t,n+1):e})(t),n),jg=(e,t)=>hh(e.charAt(t)),Vg=(e,t)=>mh(e.charAt(t)),Yg=(e,t,n,i)=>{const r=t.data,o=rl(t,0);return n||!jg(r,0)||Hg(e,o,i)?!!(n&&Vg(r,0)&&Fg(e,o,i))&&(t.data=vr+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Gg=e=>{const t=e.data,n=(e=>{const t=e.split("");return Q(t,(e,n)=>hh(e)&&n>0&&n<t.length-1&&fh(t[n-1])&&fh(t[n+1])?" ":e).join("")})(t);return n!==t&&(e.data=n,!0)},Qg=(e,t,n,i)=>{const r=t.data,o=rl(t,r.length-1);return n||!jg(r,r.length-1)||Hg(e,o,i)?!!(n&&Vg(r,r.length-1)&&zg(e,o,i))&&(t.data=r.slice(0,-1)+vr,!0):(t.data=r.slice(0,-1)+" ",!0)},$g=(e,t,n)=>{const i=t.container();if(!er(i))return F.none();if((e=>{const t=e.container();return er(t)&&Ve(t.data,vr)})(t)){const r=Yg(e,i,!1,n)||Gg(i)||Qg(e,i,!1,n);return Ut(r,t)}if(Hg(e,t,n)){const r=Yg(e,i,!0,n)||Qg(e,i,!0,n);return Ut(r,t)}return F.none()},qg=(e,t,n,i)=>{if(0===n)return;const r=bn.fromDom(e),o=Kn(r,e=>i.isBlock(Yt(e))).getOr(r),s=e.data.slice(t,t+n),a=t+n>=e.data.length&&zg(o,rl(e,e.data.length),i),l=0===t&&Fg(o,rl(e,0),i);e.replaceData(t,n,co(s,4,l,a))},Wg=(e,t,n)=>{const i=e.data.slice(t),r=i.length-qe(i).length;qg(e,t,r,n)},Kg=(e,t,n)=>{const i=e.data.slice(0,t),r=i.length-We(i).length;qg(e,t-r,r,n)},Zg=(e,t,n,i,r=!0)=>{const o=We(e.data).length,s=r?e:t,a=r?t:e;return r?s.appendData(a.data):s.insertData(0,a.data),_i(bn.fromDom(a)),i&&Wg(s,o,n),s},Xg=(e,t)=>((e,t)=>{const n=e.container(),i=e.offset();return!rl.isTextPosition(e)&&n===t.parentNode&&i>rl.before(t).offset()})(t,e)?rl(t.container(),t.offset()-1):t,Jg=e=>{return no(e.previousSibling)?F.some((t=e.previousSibling,er(t)?rl(t,t.data.length):rl.after(t))):e.previousSibling?Wu(e.previousSibling):F.none();var t},ev=e=>{return no(e.nextSibling)?F.some((t=e.nextSibling,er(t)?rl(t,0):rl.before(t))):e.nextSibling?qu(e.nextSibling):F.none();var t},tv=(e,t)=>Jg(t).orThunk(()=>ev(t)).orThunk(()=>((e,t)=>F.from(t.previousSibling?t.previousSibling:t.parentNode).bind(t=>$u(e,rl.before(t))).orThunk(()=>Qu(e,rl.after(t))))(e,t)),nv=(e,t)=>ev(t).orThunk(()=>Jg(t)).orThunk(()=>((e,t)=>Qu(e,rl.after(t)).orThunk(()=>$u(e,rl.before(t))))(e,t)),iv=(e,t,n)=>((e,t,n)=>e?nv(t,n):tv(t,n))(e,t,n).map(I(Xg,n)),rv=(e,t,n)=>{n.fold(()=>{e.focus()},n=>{e.selection.setRng(n.toRange(),t)})},ov=(e,t)=>t&&Ee(e.schema.getBlockElements(),Yt(t)),sv=(e,t,n,i)=>{const r=Dn(e).filter(Wt),o=In(e).filter(Wt);return _i(e),(s=r,a=o,l=t,c=(e,t,r)=>{const o=e.dom,s=t.dom,a=o.data.length;return Zg(o,s,n,i),r.container()===s?rl(o,a):r},s.isSome()&&a.isSome()&&l.isSome()?F.some(c(s.getOrDie(),a.getOrDie(),l.getOrDie())):F.none()).orThunk(()=>(i&&(r.each(e=>Kg(e.dom,e.dom.length,n)),o.each(e=>Wg(e.dom,0,n))),t));var s,a,l,c},av=(e,t,n,i=!0,r=!1)=>{const o=iv(t,e.getBody(),n.dom),s=Kn(n,I(ov,e),(a=e.getBody(),e=>e.dom===a));var a;const l=sv(n,o,e.schema,((e,t)=>Ee(e.schema.getTextInlineElements(),Yt(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):s.bind(e=>((e,t)=>{if(bo(e)){const n=bn.fromHtml('<br data-mce-bogus="1">');return t?$(Pn(e),e=>{Kh(e)||_i(e)}):Ai(e),vi(e,n),F.some(rl.before(n.dom))}return F.none()})(e,r)).fold(()=>{i&&rv(e,t,l)},n=>{i&&rv(e,t,F.some(n))})},lv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,cv=(e,t)=>_n(bn.fromDom(t),xc(e))&&!Po(e.schema,t)&&e.dom.isEditable(t),dv=e=>{var t;return"rtl"===Ks.DOM.getStyle(e,"direction",!0)||(e=>lv.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},uv=(e,t,n)=>{const i=((e,t,n)=>K(Ks.DOM.getParents(n.container(),"*",t),e))(e,t,n);return F.from(i[i.length-1])},hv=(e,t)=>{const n=t.container(),i=t.offset();return e?Fr(n)?er(n.nextSibling)?rl(n.nextSibling,0):rl.after(n):jr(t)?rl(n,i+1):t:Fr(n)?er(n.previousSibling)?rl(n.previousSibling,n.previousSibling.data.length):rl.before(n):Vr(t)?rl(n,i-1):t},pv=I(hv,!0),mv=I(hv,!1),fv=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},gv=e=>fv(e,"Delete"),vv=e=>Cr(e)||Mr(e),yv=(e,t)=>Cn(e,t)?Zn(t,vv,(e=>t=>Pt(Tn(t),e,xn))(e)):F.none(),bv=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Av=(e,t,n)=>Nt(qu(n),Wu(n),(i,r)=>{const o=hv(!0,i),s=hv(!1,r),a=hv(!1,t);return e?Qu(n,a).exists(e=>e.isEqual(s)&&t.isEqual(o)):$u(n,a).exists(e=>e.isEqual(o)&&t.isEqual(s))}).getOr(!0),_v=e=>{var t;return(8===Gt(t=e)||"#comment"===Yt(t)?Dn(e):Un(e)).bind(_v).orThunk(()=>F.some(e))},wv=(e,t,n,i=!0)=>{var r;t.deleteContents();const o=_v(n).getOr(n),s=bn.fromDom(null!==(r=e.dom.getParent(o.dom,e.dom.isBlock))&&void 0!==r?r:n.dom);if(s.dom===e.getBody()?bv(e,i):bo(s)&&(Ir(s),i&&e.selection.setCursorLocation(s.dom,0)),!xn(n,s)){const e=Pt(Tn(s),n)?[]:Tn(a=s).map(Pn).map(e=>K(e,e=>!xn(a,e))).getOr([]);$(e.concat(Pn(n)),e=>{xn(e,s)||Cn(e,s)||!bo(e)||_i(e)})}var a},xv=(e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?Xn(bn.fromDom(n.parentNode),n=>!xn(e,n)&&t(n)):F.none()})(e,t).isSome(),Cv=(e,t)=>Jn(e,t).isSome(),Ev=e=>Fi(e,"td,th"),Mv=(e,t)=>Ah(bn.fromDom(e),t),Sv=e=>(e=>Nt(e.startTable,e.endTable,(t,n)=>{const i=Cv(t,e=>xn(e,n)),r=Cv(n,e=>xn(e,t));return i||r?{...e,startTable:i?F.none():e.startTable,endTable:r?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}:e}).getOr(e))(e),Tv=(e,t)=>({start:e,end:t}),kv=Ll([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Lv=(e,t)=>ni(bn.fromDom(e),"td,th",t),Dv=e=>!xn(e.start,e.end),Iv=(e,t)=>Ah(e.start,t).bind(n=>Ah(e.end,t).bind(e=>Ut(xn(n,e),n))),Rv=e=>t=>Iv(t,e).map(e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,Ev(e))),Ov=(e,t,n,i)=>{if(n.collapsed||!e.forall(Dv))return F.none();if(t.isSameTable){const t=e.bind(Rv(i));return F.some({start:t,end:t})}{const e=Lv(n.startContainer,i),t=Lv(n.endContainer,i),r=e.bind((e=>t=>Ah(t,e).bind(e=>ue(Ev(e)).map(e=>Tv(t,e))))(i)).bind(Rv(i)),o=t.bind((e=>t=>Ah(t,e).bind(e=>de(Ev(e)).map(e=>Tv(e,t))))(i)).bind(Rv(i));return F.some({start:r,end:o})}},Pv=(e,t)=>te(e,e=>xn(e,t)),Bv=e=>Nt(Pv(e.cells,e.rng.start),Pv(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),Nv=(e,t,n)=>e.exists(e=>((e,t)=>!Dv(e)&&Iv(e,t).exists(e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))(e,n)&&xh(e.start,t)),Uv=(e,t)=>{const{startTable:n,endTable:i}=t,r=e.cloneRange();return n.each(e=>r.setStartAfter(e.dom)),i.each(e=>r.setEndBefore(e.dom)),r},Fv=(e,t)=>{const n=(e=>t=>xn(e,t))(e),i=((e,t)=>{const n=Lv(e.startContainer,t),i=Lv(e.endContainer,t);return Nt(n,i,Tv)})(t,n),r=((e,t)=>{const n=Mv(e.startContainer,t),i=Mv(e.endContainer,t),r=n.isSome(),o=i.isSome(),s=Nt(n,i,xn).getOr(!1);return Sv({startTable:n,endTable:i,isStartInTable:r,isEndInTable:o,isSameTable:s,isMultiTable:!s&&r&&o})})(t,n);return Nv(i,t,n)?i.map(e=>kv.singleCellTable(t,e.start)):r.isMultiTable?((e,t,n,i)=>Ov(e,t,n,i).bind(({start:e,end:i})=>{const r=e.bind(Bv).getOr([]),o=i.bind(Bv).getOr([]);if(r.length>0&&o.length>0){const e=Uv(n,t);return F.some(kv.multiTable(r,o,e))}return F.none()}))(i,r,t,n):((e,t,n,i)=>Ov(e,t,n,i).bind(({start:e,end:t})=>e.or(t)).bind(e=>{const{isSameTable:i}=t,r=Bv(e).getOr([]);if(i&&e.cells.length===r.length)return F.some(kv.fullTable(e.table));if(r.length>0){if(i)return F.some(kv.partialTable(r,F.none()));{const e=Uv(n,t);return F.some(kv.partialTable(r,F.some({...t,rng:e})))}}return F.none()}))(i,r,t,n)},zv=e=>$(e,e=>{sn(e,"contenteditable"),Ir(e)}),Hv=(e,t,n,i)=>{const r=n.cloneRange();i?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Gv(e,r,t,!1).each(e=>e())},jv=e=>{const t=bh(e),n=bn.fromDom(e.selection.getNode());dr(n.dom)&&bo(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&G(t,e=>xn(e,n))&&en(n,"data-mce-selected","1")},Vv=(e,t,n)=>F.some(()=>{const i=e.selection.getRng(),r=n.bind(({rng:n,isStartInTable:r})=>{const o=((e,t)=>F.from(e.dom.getParent(t,e.dom.isBlock)).map(bn.fromDom))(e,r?n.endContainer:n.startContainer);n.deleteContents(),((e,t,n)=>{n.each(n=>{t?_i(n):(Ir(n),e.selection.setCursorLocation(n.dom,0))})})(e,r,o.filter(bo));const s=r?t[0]:t[t.length-1];return Hv(e,s,i,r),bo(s)?F.none():F.some(r?t.slice(1):t.slice(0,-1))}).getOr(t);zv(r),jv(e)}),Yv=(e,t,n,i)=>F.some(()=>{const r=e.selection.getRng(),o=t[0],s=n[n.length-1];Hv(e,o,r,!0),Hv(e,s,r,!1);const a=bo(o)?t:t.slice(1),l=bo(s)?n:n.slice(0,-1);zv(a.concat(l)),i.deleteContents(),jv(e)}),Gv=(e,t,n,i=!0)=>F.some(()=>{wv(e,t,n,i)}),Qv=(e,t)=>F.some(()=>av(e,!1,t)),$v=(e,t,n,i)=>Wv(t,i).fold(()=>((e,t,n)=>Fv(t,n).bind(t=>t.fold(I(Gv,e),I(Qv,e),I(Vv,e),I(Yv,e))))(e,t,n),t=>((e,t)=>Kv(e,t))(e,t)),qv=(e,t)=>ee(gg(t,e),Tr),Wv=(e,t)=>ee(gg(t,e),Xt("caption")),Kv=(e,t)=>F.some(()=>{Ir(t),e.selection.setCursorLocation(t.dom,0)}),Zv=(e,t,n,i,r)=>Vu(n,e.getBody(),r).fold(()=>F.some(M),o=>((e,t,n,i)=>qu(e.dom).bind(r=>Wu(e.dom).map(e=>t?n.isEqual(r)&&i.isEqual(e):n.isEqual(e)&&i.isEqual(r))).getOr(!0))(i,n,r,o)?((e,t)=>Kv(e,t))(e,i):((e,t,n)=>Wv(e,bn.fromDom(n.getNode())).fold(()=>F.some(M),e=>Ut(!xn(e,t),M)))(t,i,o)),Xv=(e,t,n,i)=>{const r=rl.fromRangeStart(e.selection.getRng());return qv(n,i).bind(i=>bo(i)?Kv(e,i):((e,t,n,i,r)=>Vu(n,e.getBody(),r).bind(e=>qv(t,bn.fromDom(e.getNode())).bind(e=>xn(e,i)?F.none():F.some(M))))(e,n,t,i,r))},Jv=(e,t)=>e?ug(t):hg(t),ey=(e,t,n)=>{const i=bn.fromDom(e.getBody());return Wv(i,n).fold(()=>Xv(e,t,i,n).orThunk(()=>Ut(((e,t)=>{const n=rl.fromRangeStart(e.selection.getRng());return Jv(t,n)||ju(t,e.getBody(),n).exists(e=>Jv(t,e))})(e,t),M)),n=>((e,t,n,i)=>{const r=rl.fromRangeStart(e.selection.getRng());return bo(i)?Kv(e,i):Zv(e,n,t,i,r)})(e,t,i,n))},ty=(e,t)=>{const n=bn.fromDom(e.selection.getStart(!0)),i=bh(e);return e.selection.isCollapsed()&&0===i.length?ey(e,t,n):((e,t,n)=>{const i=bn.fromDom(e.getBody()),r=e.selection.getRng();return 0!==n.length?Vv(e,n,F.none()):$v(e,i,r,t)})(e,n,i)},ny=(e,t)=>{let n=t;for(;n&&n!==e;){if(lr(n)||cr(n))return n;n=n.parentNode}return null},iy=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ry=Ot.each,oy=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),i=e=>G(iy,t=>Ye(e,t))||n.has(e);return{compare:(e,n)=>{if(e.nodeName!==n.nodeName||e.nodeType!==n.nodeType)return!1;const r=e=>{const n={};return ry(t.getAttribs(e),r=>{const o=r.nodeName.toLowerCase();"style"===o||i(o)||(n[o]=t.getAttrib(e,o))}),n},o=(e,t)=>{for(const n in e)if(Ee(e,n)){const i=t[n];if(A(i))return!1;if(e[n]!==i)return!1;delete t[n]}for(const e in t)if(Ee(t,e))return!1;return!0};if(Yi(e)&&Yi(n)){if(!o(r(e),r(n)))return!1;if(!o(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style"))))return!1}return!uh(e)&&!uh(n)},isAttributeInternal:i}},sy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),ay=(e,t,n,i)=>{const r=n.name;for(let t=0,o=e.length;t<o;t++){const o=e[t];if(o.name===r){const e=i.nodes[r];e?e.nodes.push(n):i.nodes[r]={filter:o,nodes:[n]}}}if(n.attributes)for(let e=0,r=t.length;e<r;e++){const r=t[e],o=r.name;if(o in n.attributes.map){const e=i.attributes[o];e?e.nodes.push(n):i.attributes[o]={filter:r,nodes:[n]}}}},ly=(e,t)=>{const n=(e,n)=>{ge(e,e=>{const i=he(e.nodes);$(e.filter.callbacks,r=>{for(let t=i.length-1;t>=0;t--){const r=i[t];(n?void 0!==r.attr(e.filter.name):r.name===e.filter.name)&&!_(r.parent)||i.splice(t,1)}i.length>0&&r(i,e.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},cy=(e,t,n,i={})=>{const r=((e,t,n)=>{const i={nodes:{},attributes:{}};return n.firstChild&&((e,t)=>{let n=e;for(;n=n.walk();)t(n)})(n,n=>{ay(e,t,n,i)}),i})(e,t,n);ly(r,i)},dy=(e,t,n,i)=>{if((e.pad_empty_with_br||t.insert)&&n(i)){const e=new Tf("br",1);t.insert&&e.attr("data-mce-bogus","1"),i.empty().append(e)}else i.empty().append(new Tf("#text",3)).value=vr},uy=(e,t)=>{const n=null==e?void 0:e.firstChild;return w(n)&&n===e.lastChild&&n.name===t},hy=(e,t,n,i)=>i.isEmpty(t,n,t=>((e,t)=>{const n=e.getElementRule(t.name);return!0===(null==n?void 0:n.paddEmpty)})(e,t)),py=e=>{let t;for(let n=e;n;n=n.parent){const e=n.attr("contenteditable");if("false"===e)break;"true"===e&&(t=n)}return F.from(t)},my=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const i=e.children();for(const e of i)n&&!t.isValidChild(n.name,e.name)&&my(e,t,n);e.unwrap()}},fy=(e,t,n,i=M)=>{const r=t.getTextBlockElements(),o=t.getNonEmptyElements(),s=t.getWhitespaceElements(),a=Ot.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=e=>e!==n&&!a[e.name];for(let n=0;n<e.length;n++){const a=e[n];let d,u,h;if(!a.parent||l.has(a))continue;if(r[a.name]&&"li"===a.parent.name){let e=a.next;for(;e&&r[e.name];)e.name="li",l.add(e),a.parent.insert(e,a.parent),e=e.next;a.unwrap();continue}const p=[a];for(d=a.parent;d&&!t.isValidChild(d.name,a.name)&&c(d);d=d.parent)p.push(d);if(d&&p.length>1)if(gy(t,a,d))my(a,t);else{p.reverse(),u=p[0].clone(),i(u);let e=u;for(let n=0;n<p.length-1;n++){t.isValidChild(e.name,p[n].name)&&n>0?(h=p[n].clone(),i(h),e.append(h)):h=e;for(let e=p[n].firstChild;e&&e!==p[n+1];){const t=e.next;h.append(e),e=t}e=h}hy(t,o,s,u)?d.insert(a,p[0],!0):(d.insert(u,p[0],!0),d.insert(a,u)),d=p[0],(hy(t,o,s,d)||uy(d,"br"))&&d.empty().remove()}else if(a.parent){if("li"===a.name){let e=a.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(a);continue}if(e=a.next,e&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(a,e.firstChild,!0);continue}const t=new Tf("ul",1);i(t),a.wrap(t);continue}if(t.isValidChild(a.parent.name,"div")&&t.isValidChild("div",a.name)){const e=new Tf("div",1);i(e),a.wrap(e)}else my(a,t)}}},gy=(e,t,n=t.parent)=>!!n&&(!(!e.children[t.name]||e.isValidChild(n.name,t.name))||(!("a"!==t.name||!((e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1})(n,"a"))||!(!(e=>"summary"===e.name)(n)||!sy(t))&&!((null==n?void 0:n.firstChild)===t&&(null==n?void 0:n.lastChild)===t))),vy=e=>{const t=rl.fromRangeStart(e),n=rl.fromRangeEnd(e),i=e.commonAncestorContainer;return ju(!1,i,n).map(r=>!pu(t,n,i)&&pu(t,r,i)?((e,t,n,i)=>{const r=document.createRange();return r.setStart(e,t),r.setEnd(n,i),r})(t.container(),t.offset(),r.container(),r.offset()):e).getOr(e)},yy=e=>e.collapsed?e:vy(e),by=(e,t)=>e.getBlockElements()[t.name]&&(e=>w(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===vr)(t.firstChild),Ay=(e,t)=>{let n=t.firstChild,i=t.lastChild;return n&&"meta"===n.name&&(n=n.next),i&&"mce_marker"===i.attr("id")&&(i=i.prev),((e,t)=>{const n=e.getNonEmptyElements();return w(t)&&(t.isEmpty(n)||by(e,t))})(e,i)&&(i=null==i?void 0:i.prev),!(!n||n!==i)&&("ul"===n.name||"ol"===n.name)},_y=e=>w(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(e=>e.data===vr||sr(e))(e.firstChild),wy=e=>{return e.length>0&&(!(t=e[e.length-1]).firstChild||_y(t))?e.slice(0,-1):e;var t},xy=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Cy=(e,t)=>{const n=rl.after(e),i=Nu(t).prev(n);return i?i.toRange():null},Ey=(e,t,n)=>{const i=e.parentNode;return i&&Ot.each(t,t=>{i.insertBefore(t,e)}),((e,t)=>{const n=rl.before(e),i=Nu(t).next(n);return i?i.toRange():null})(e,n)},My=(e,t,n,i)=>{const r=((e,t,n)=>{const i=t.serialize(n);return(e=>{var t,n;const i=e.firstChild,r=e.lastChild;return i&&"META"===i.nodeName&&(null===(t=i.parentNode)||void 0===t||t.removeChild(i)),r&&"mce_marker"===r.id&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r)),e})(e.createFragment(i))})(t,e,i),o=xy(t,n.startContainer),s=wy((a=r.firstChild,K(null!==(l=null==a?void 0:a.childNodes)&&void 0!==l?l:[],e=>"LI"===e.nodeName)));var a,l;const c=t.getRoot(),d=e=>{const i=rl.fromRangeStart(n),r=Nu(t.getRoot()),s=1===e?r.prev(i):r.next(i),a=null==s?void 0:s.getNode();return!a||xy(t,a)!==o};return o?d(1)?Ey(o,s,c):d(2)?((e,t,n,i)=>(i.insertAfter(t.reverse(),e),Cy(t[0],n)))(o,s,c,t):((e,t,n,i)=>{const r=((e,t)=>{const n=t.cloneRange(),i=t.cloneRange();return n.setStartBefore(e),i.setEndAfter(e),[n.cloneContents(),i.cloneContents()]})(e,i),o=e.parentNode;return o&&(o.insertBefore(r[0],e),Ot.each(t,t=>{o.insertBefore(t,e)}),o.insertBefore(r[1],e),o.removeChild(e)),Cy(t[t.length-1],n)})(o,s,c,n):null},Sy=["pre"],Ty=dr,ky=(e,t,n)=>{F.from(e.getParent(t,"td,th")).map(bn.fromDom).each(e=>((e,t)=>{Un(e).each(n=>{Dn(n).each(i=>{t.isBlock(Yt(e))&&xr(n)&&t.isBlock(Yt(i))&&_i(n)})})})(e,n))},Ly=(e,t)=>{var n,i,r;let o;const s=e.dom,a=e.selection;if(!t)return;a.scrollIntoView(t);const l=ny(e.getBody(),t);if(l&&"false"===s.getContentEditable(l))return s.remove(t),void a.select(l);let c=s.createRng();const d=t.previousSibling;if(er(d)){c.setStart(d,null!==(i=null===(n=d.nodeValue)||void 0===n?void 0:n.length)&&void 0!==i?i:0);const e=t.nextSibling;er(e)&&(d.appendData(e.data),null===(r=e.parentNode)||void 0===r||r.removeChild(e))}else c.setStartBefore(t),c.setEndBefore(t);const u=s.getParent(t,s.isBlock);if(s.remove(t),u&&s.isEmpty(u)){const t=Ty(u);Ai(bn.fromDom(u)),c.setStart(u,0),c.setEnd(u,0),t||(e=>!!e.getAttribute("data-mce-fragment"))(u)||!(o=(t=>{let n=rl.fromRangeStart(t);return n=Nu(e.getBody()).next(n),null==n?void 0:n.toRange()})(c))?s.add(u,s.create("br",t?{}:{"data-mce-bogus":"1"})):(c=o,s.remove(u))}a.setRng(c)},Dy=e=>{const t=e.dom,n=yy(e.selection.getRng());e.selection.setRng(n);const i=t.getParent(n.startContainer,Ty);((e,t,n)=>{if(w(n))return n===e.getParent(t.endContainer,Ty)&&xh(bn.fromDom(n),t);return!1})(t,n,i)?Gv(e,n,bn.fromDom(i)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&er(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},Iy=(e,t,n)=>{var i,r;const o=e.selection,s=e.dom,a=e.parser,l=n.merge,c=qf({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=Pr(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let u=o.getRng();const h=u.startContainer,p=e.getBody();h===p&&o.isCollapsed()&&s.isBlock(p.firstChild)&&((e,t)=>w(t)&&!e.schema.getVoidElements()[t.nodeName])(e,p.firstChild)&&s.isEmpty(p.firstChild)&&(u=s.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),o.setRng(u)),o.isCollapsed()||Dy(e);const m=o.getNode(),f={context:m.nodeName.toLowerCase(),data:n.data,insert:!0},g=a.parse(t,f);if(!0===n.paste&&Ay(e.schema,g)&&((e,t)=>!!xy(e,t))(s,m))return u=My(c,s,o.getRng(),g),u&&o.setRng(u),t;!0===n.paste&&((e,t,n,i)=>{var r;const o=t.firstChild,s=t.lastChild,a=o===("bookmark"===s.attr("data-mce-type")?s.prev:s),l=Y(Sy,o.name);if(a&&l){const t="false"!==o.attr("contenteditable"),s=(null===(r=e.getParent(n,e.isBlock))||void 0===r?void 0:r.nodeName.toLowerCase())===o.name,a=F.from(ny(i,n)).forall(lr);return t&&s&&a}return!1})(s,g,m,e.getBody())&&(null===(i=g.firstChild)||void 0===i||i.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(g);let v=g.lastChild;if(v&&"mce_marker"===v.attr("id")){const t=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!s.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(t,v,"br"===v.name);break}}if(e._selectionOverrides.showBlockCaretContainer(m),f.invalid||((e,t,n)=>{var i;return G(n.children(),sy)&&"SUMMARY"===(null===(i=e.getParent(t,e.isBlock))||void 0===i?void 0:i.nodeName)})(s,m,g)){e.selection.setContent(d);let n,i=o.getNode();const l=e.getBody();for(rr(i)?i=n=l:n=i;n&&n!==l;)i=n,n=n.parentNode;t=i===l?l.innerHTML:s.getOuterHTML(i);const u=a.parse(t),h=(e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return F.some(t);return F.none()})(u),p=h.bind(py).getOr(u);h.each(e=>e.replace(g));const m=g.children(),f=null!==(r=g.parent)&&void 0!==r?r:u;g.unwrap();const v=K(m,t=>gy(e.schema,t,f));fy(v,e.schema,p),cy(a.getNodeFilters(),a.getAttributeFilters(),u),t=c.serialize(u),i===l?s.setHTML(l,t):s.setOuterHTML(i,t)}else t=c.serialize(g),((e,t,n)=>{var i;if("all"===n.getAttribute("data-mce-bogus"))null===(i=n.parentNode)||void 0===i||i.insertBefore(e.dom.createFragment(t),n);else{const i=n.firstChild,r=n.lastChild;!i||i===r&&"BR"===i.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,m);var y;return((e,t)=>{const n=e.schema.getTextInlineElements(),i=e.dom;if(t){const t=e.getBody(),r=oy(e);Ot.each(i.select("*[data-mce-fragment]"),e=>{if(w(n[e.nodeName.toLowerCase()])&&Xf(i,e))for(let n=e.parentElement;w(n)&&n!==t&&!Jf(i,e,n);n=n.parentElement)if(r.compare(n,e)){i.remove(e,!0);break}})}})(e,l),Ly(e,s.get("mce_marker")),y=e.getBody(),Ot.each(y.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),ky(s,o.getStart(),e.schema),((e,t,n)=>{const i=Ln(bn.fromDom(n),e=>xn(e,bn.fromDom(t)));ce(i,i.length-2).filter(qt).fold(()=>Lo(e,t),t=>Lo(e,t.dom))})(e.schema,e.getBody(),o.getStart()),t},Ry=e=>e instanceof Tf,Oy=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{lf(e)&&qu(e.getBody()).each(t=>{const n=t.getNode(),i=Zi(n)?qu(n).getOr(t):t;e.selection.setRng(i.toRange())})})(e)},Py=(e,t,n)=>F.from(e.getBody()).map(i=>Ry(t)?((e,t,n,i)=>{cy(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const r=qf({validate:!1},e.schema).serialize(n),o=Pr(kr(bn.fromDom(t))?r:Ot.trim(r));return Oy(e,o,i.no_selection),{content:n,html:o}})(e,i,t,n):((e,t,n,i)=>{if(0===(n=Pr(n)).length||/^\s+$/.test(n)){const r='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+r+"</li>");const o=Zl(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())?(n=r,n=e.dom.createHTML(o,Xl(e),n)):n||(n=r),Oy(e,n,i.no_selection),{content:n,html:n}}{"raw"!==i.format&&(n=qf({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const r=kr(bn.fromDom(t))?n:Ot.trim(n);return Oy(e,r,i.no_selection),{content:r,html:r}}})(e,i,t,n)).getOr({content:t,html:Ry(n.content)?"":n.content}),By=e=>x(e)?e:N,Ny=(e,t,n)=>{const i=t(e),r=By(n);return i.orThunk(()=>r(e)?F.none():((e,t,n)=>{let i=e.dom;const r=By(n);for(;i.parentNode;){i=i.parentNode;const e=bn.fromDom(i),n=t(e);if(n.isSome())return n;if(r(e))break}return F.none()})(e,t,r))},Uy=Uh,Fy=(e,t,n)=>{const i=e.formatter.get(n);if(i)for(let n=0;n<i.length;n++){const r=i[n];if(Qh(r)&&!1===r.inherit&&e.dom.is(t,r.selector))return!0}return!1},zy=(e,t,n,i,r)=>{const o=e.dom.getRoot();if(t===o)return!1;const s=e.dom.getParent(t,t=>!!Fy(e,t,n)||(t.parentNode===o||!!Vy(e,t,n,i,!0)));return!!Vy(e,s,n,i,r)},Hy=(e,t,n)=>!(!$h(n)||!Uy(t,n.inline))||(!(!Gh(n)||!Uy(t,n.block))||!!Qh(n)&&(Yi(t)&&e.is(t,n.selector))),jy=(e,t,n,i,r,o)=>{const s=n[i],a="attributes"===i;if(x(n.onmatch))return n.onmatch(t,n,i);if(s)if(Te(s)){for(let n=0;n<s.length;n++)if(a?e.getAttrib(t,s[n]):zh(e,t,s[n]))return!0}else for(const i in s)if(Ee(s,i)){const l=a?e.getAttrib(t,i):zh(e,t,i),c=Nh(s[i],o),d=_(l)||Ze(l);if(d&&_(c))continue;if(r&&d&&!n.exact)return!1;if((!r||n.exact)&&!Uy(l,Fh(c,i)))return!1}return!0},Vy=(e,t,n,i,r)=>{const o=e.formatter.get(n),s=e.dom;if(o&&Yi(t))for(let n=0;n<o.length;n++){const a=o[n];if(Hy(e.dom,t,a)&&jy(s,t,a,"attributes",r,i)&&jy(s,t,a,"styles",r,i)){const n=a.classes;if(n)for(let r=0;r<n.length;r++)if(!e.dom.hasClass(t,Nh(n[r],i)))return;return a}}},Yy=(e,t,n,i,r)=>{if(i)return zy(e,i,t,n,r);if(i=e.selection.getNode(),zy(e,i,t,n,r))return!0;const o=e.selection.getStart();return!(o===i||!zy(e,o,t,n,r))},Gy=(e,t)=>{const n=t=>xn(t,bn.fromDom(e.getBody()));return F.from(e.selection.getStart(!0)).bind(i=>Ny(bn.fromDom(i),n=>pe(t,t=>((t,n)=>Vy(e,t.dom,n)?F.some(n):F.none())(n,t)),n)).getOrNull()},Qy=(e,t,n)=>X(n,(n,i)=>{const r=((e,t)=>Vh(e,t,e=>{const t=e=>x(e)||e.length>1&&"%"===e.charAt(0);return G(["styles","attributes"],n=>Ce(e,n).exists(e=>{const n=v(e)?e:xe(e);return G(n,t)}))}))(e,i);return e.formatter.matchNode(t,i,{},r)?n.concat([i]):n},[]),$y=Rr,qy=e=>{if(e){const t=new Hi(e,e);for(let e=t.current();e;e=t.next())if(er(e))return e}return null},Wy=e=>{const t=bn.fromTag("span");return tn(t,{id:Ku,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&vi(t,bn.fromText($y)),t},Ky=(e,t,n)=>{const i=e.dom,r=e.selection;if(Wh(t))av(e,!1,bn.fromDom(t),n,!0);else{const e=r.getRng(),n=i.getParent(t,i.isBlock),o=e.startContainer,s=e.startOffset,a=e.endContainer,l=e.endOffset,c=(e=>{const t=qy(e);return t&&t.data.charAt(0)===$y&&t.deleteData(0,1),t})(t);i.remove(t,!0),o===c&&s>0&&e.setStart(c,s-1),a===c&&l>0&&e.setEnd(c,l-1),n&&i.isEmpty(n)&&Ir(bn.fromDom(n)),r.setRng(e)}},Zy=(e,t,n)=>{const i=e.dom,r=e.selection;if(t)Ky(e,t,n);else if(!(t=Xu(e.getBody(),r.getStart())))for(;t=i.get(Ku);)Ky(e,t,n)},Xy=(e,t)=>(e.appendChild(t),t),Jy=(e,t)=>{var n;const i=Z(e,(e,t)=>Xy(e,t.cloneNode(!1)),t),r=null!==(n=i.ownerDocument)&&void 0!==n?n:document;return Xy(i,r.createTextNode($y))},eb=(e,t,n,i)=>{const r=e.dom,o=e.selection;let s=!1;const a=e.formatter.get(t);if(!a)return;const l=o.getRng(),c=l.startContainer,d=l.startOffset;let u=c;er(c)&&(d!==c.data.length&&(s=!0),u=u.parentNode);const h=[];let p;for(;u;){if(Vy(e,u,t,n,i)){p=u;break}u.nextSibling&&(s=!0),h.push(u),u=u.parentNode}if(p)if(s){const s=o.getBookmark();l.collapse(!0);let c=hp(r,l,a,!0);c=um(c),e.formatter.remove(t,n,c,i),o.moveToBookmark(s)}else{const s=Xu(e.getBody(),p),a=w(s)?r.getParents(p.parentNode,U,s):[],l=Wy(!1).dom;((e,t,n)=>{var i,r;const o=e.dom,s=o.getParent(n,I(Rh,e.schema));s&&o.isEmpty(s)?null===(i=n.parentNode)||void 0===i||i.replaceChild(t,n):(Lr(bn.fromDom(n)),o.isEmpty(n)?null===(r=n.parentNode)||void 0===r||r.replaceChild(t,n):o.insertAfter(t,n))})(e,l,null!=s?s:p);const c=((e,t,n,i,r,o)=>{const s=e.formatter,a=e.dom,l=K(me(s.get()),e=>e!==i&&!Ve(e,"removeformat")),c=Qy(e,n,l);if(K(c,t=>!Yh(e,t,i)).length>0){const e=n.cloneNode(!1);return a.add(t,e),s.remove(i,r,e,o),a.remove(e),F.some(e)}return F.none()})(e,l,p,t,n,i),d=Jy([...h,...c.toArray(),...a],l);s&&Ky(e,s,w(s)),o.setCursorLocation(d,1),r.isEmpty(p)&&r.remove(p)}},tb=e=>{e.on("mouseup keydown",t=>{var n;((e,t,n)=>{const i=e.selection,r=e.getBody();Zy(e,null,n),8!==t&&46!==t||!i.isCollapsed()||i.getStart().innerHTML!==$y||Zy(e,Xu(r,i.getStart()),!0),37!==t&&39!==t||Zy(e,Xu(r,i.getStart()),!0)})(e,t.keyCode,(n=e.selection.getRng().endContainer,er(n)&&Ge(n.data,vr)))})},nb=e=>{const t=Wy(!1),n=Jy(e,t.dom);return{caretContainer:t,caretPosition:rl(n,0)}},ib=(e,t)=>{const{caretContainer:n,caretPosition:i}=nb(t);return mi(bn.fromDom(e),n),_i(bn.fromDom(e)),i},rb=(e,t)=>{if(Zu(t.dom))return!1;const n=e.schema.getTextInlineElements();return Ee(n,Yt(t))&&!Zu(t.dom)&&!Ki(t.dom)},ob={},sb=$i(["pre"]);((e,t)=>{ob[e]||(ob[e]=[]),ob[e].push(t)})("pre",e=>{const t=e.selection.getRng();if(!t.collapsed){const t=e.selection.getSelectedBlocks(),n=K(K(t,sb),(e=>t=>{const n=t.previousSibling;return sb(n)&&Y(e,n)})(t));$(n,e=>{((e,t)=>{const n=bn.fromDom(t),i=Mn(n).dom;_i(n),bi(bn.fromDom(e),[bn.fromTag("br",i),bn.fromTag("br",i),...Pn(n)])})(e.previousSibling,e)})}});const ab=["fontWeight","fontStyle","color","fontSize","fontFamily"],lb=e=>ee(e,e=>$h(e)&&"span"===e.inline&&(e=>f(e.styles)&&G(me(e.styles),e=>Y(ab,e)))(e)),cb=(e,t)=>{const n=e.get(t);return v(n)?lb(n):F.none()},db=(e,t)=>$u(t,rl.fromRangeStart(e)).isNone(),ub=(e,t)=>!1===Qu(t,rl.fromRangeEnd(e)).exists(e=>!sr(e.getNode())||Qu(t,e).isSome()),hb=e=>t=>pr(t)&&e.isEditable(t),pb=e=>K((e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return db(n,t[0])&&ub(n,t[0])?t:[];{const e=de(t).filter(e=>db(n,e)).toArray(),i=ue(t).filter(e=>ub(n,e)).toArray(),r=t.slice(1,-1);return e.concat(r).concat(i)}})(e),hb(e.dom)),mb=e=>K(e.getSelectedBlocks(),hb(e.dom)),fb=Ot.each,gb=e=>Yi(e)&&!uh(e)&&!Zu(e)&&!Ki(e),vb=(e,t)=>{for(let n=e;n;n=n[t]){if(er(n)&&Ke(n.data))return e;if(Yi(n)&&!uh(n))return n}return e},yb=(e,t,n)=>{const i=oy(e),r=Gi(t)&&e.dom.isEditable(t),o=Gi(n)&&e.dom.isEditable(n);if(r&&o){const r=vb(t,"previousSibling"),o=vb(n,"nextSibling");if(i.compare(r,o)){for(let e=r.nextSibling;e&&e!==o;){const t=e;e=e.nextSibling,r.appendChild(t)}return e.dom.remove(o),Ot.each(Ot.grep(o.childNodes),e=>{r.appendChild(e)}),r}}return n},bb=(e,t,n,i)=>{var r;if(i&&!1!==t.merge_siblings){const t=null!==(r=yb(e,Ih(i),i))&&void 0!==r?r:i;yb(e,t,Ih(t,!0))}},Ab=(e,t,n)=>{fb(e.childNodes,e=>{gb(e)&&(t(e)&&n(e),e.hasChildNodes()&&Ab(e,t,n))})},_b=(e,t)=>n=>!(!n||!zh(e,n,t)),wb=(e,t,n)=>i=>{e.setStyle(i,t,n),""===i.getAttribute("style")&&i.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,i)},xb=Ll([{keep:[]},{rename:["name"]},{removed:[]}]),Cb=/^(src|href|style)$/,Eb=Ot.each,Mb=Uh,Sb=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Tb=(e,t,n)=>{let i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(Yi(i)){const e=i.childNodes.length-1;!n&&r&&r--,i=i.childNodes[r>e?e:r]}return er(i)&&n&&r>=i.data.length&&(i=new Hi(i,e.getBody()).next()||i),er(i)&&!n&&0===r&&(i=new Hi(i,e.getBody()).prev()||i),i},kb=(e,t)=>{const n=t?"firstChild":"lastChild",i=e[n];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&i?"TR"===e.nodeName&&i[n]||i:e},Lb=(e,t,n,i)=>{var r;const o=e.create(n,i);return null===(r=t.parentNode)||void 0===r||r.insertBefore(o,t),o.appendChild(t),o},Db=(e,t,n,i,r)=>{const o=bn.fromDom(t),s=bn.fromDom(e.create(i,r)),a=n?On(o):Rn(o);return bi(s,a),n?(mi(o,s),gi(s,o)):(fi(o,s),vi(s,o)),s.dom},Ib=(e,t,n)=>{const i=t.parentNode;let r;const o=e.dom,s=Zl(e);Gh(n)&&i===o.getRoot()&&(n.list_block&&Mb(t,n.list_block)||$(he(t.childNodes),t=>{Oh(e,s,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=Lb(o,t,s),o.setAttribs(r,Xl(e))):r=null})),(e=>Qh(e)&&$h(e)&&Pt(Ce(e,"mixed"),!0))(n)&&!Mb(n.inline,t)||o.remove(t,!0)},Rb=(e,t,n)=>C(e)?{name:t,value:null}:{name:e,value:Nh(t,n)},Ob=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Pb=(e,t,n,i,r)=>{let o=!1;Eb(n.styles,(s,a)=>{const{name:l,value:c}=Rb(a,s,i),d=Fh(c,l);(n.remove_similar||y(c)||!Yi(r)||Mb(zh(e,r,l),d))&&e.setStyle(t,l,""),o=!0}),o&&Ob(e,t)},Bb=(e,t,n,i,r)=>{const o=e.dom,s=oy(e),a=e.schema;if($h(t)&&Ro(a,t.inline)&&Po(a,i)&&i.parentElement===e.getBody())return Ib(e,i,t),xb.removed();if(!t.ceFalseOverride&&i&&"false"===o.getContentEditableParent(i))return xb.keep();if(i&&!Hy(o,i,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(i,t))return xb.keep();const l=i,c=t.preserve_attributes;if($h(t)&&"all"===t.remove&&v(c)){const e=K(o.getAttribs(l),e=>Y(c,e.name.toLowerCase()));if(o.removeAllAttribs(l),$(e,e=>o.setAttrib(l,e.name,e.value)),e.length>0)return xb.rename("span")}if("all"!==t.remove){Pb(o,l,t,n,r),Eb(t.attributes,(e,i)=>{const{name:s,value:a}=Rb(i,e,n);if(t.remove_similar||y(a)||!Yi(r)||Mb(o.getAttrib(r,s),a)){if("class"===s){const e=o.getAttrib(l,s);if(e){let t="";if($(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void o.setAttrib(l,s,t)}}if(Cb.test(s)&&l.removeAttribute("data-mce-"+s),"style"===s&&$i(["li"])(l)&&"none"===o.getStyle(l,"list-style-type"))return l.removeAttribute(s),void o.setStyle(l,"list-style-type","none");"class"===s&&l.removeAttribute("className"),l.removeAttribute(s)}}),Eb(t.classes,e=>{e=Nh(e,n),Yi(r)&&!o.hasClass(r,e)||o.removeClass(l,e)});const e=o.getAttribs(l);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(!s.isAttributeInternal(n))return xb.keep()}}return"none"!==t.remove?(Ib(e,l,t),xb.removed()):xb.keep()},Nb=(e,t,n,i)=>Bb(e,t,n,i,i).fold(k(i),t=>(e.dom.createFragment().appendChild(i),e.dom.rename(i,t)),k(null)),Ub=(e,t,n,i,r)=>{const o=e.formatter.get(t),s=o[0],a=e.dom,l=e.selection,c=i=>{const a=((e,t,n,i,r)=>{let o;return t.parentNode&&$(jh(e.dom,t.parentNode).reverse(),t=>{if(!o&&Yi(t)&&"_start"!==t.id&&"_end"!==t.id){const s=Vy(e,t,n,i,r);s&&!1!==s.split&&(o=t)}}),o})(e,i,t,n,r);return((e,t,n,i,r,o,s,a)=>{var l,c;let d,u;const h=e.dom;if(n){const p=n.parentNode;for(let n=i.parentNode;n&&n!==p;n=n.parentNode){let i=h.clone(n,!1);for(let n=0;n<t.length&&(i=Nb(e,t[n],a,i),null!==i);n++);i&&(d&&i.appendChild(d),u||(u=i),d=i)}!o||s.mixed&&h.isBlock(n)||(i=null!==(l=h.split(n,i))&&void 0!==l?l:i),d&&u&&(null===(c=r.parentNode)||void 0===c||c.insertBefore(d,r),u.appendChild(r),$h(s)&&bb(e,s,0,d))}return i})(e,o,a,i,i,!0,s,n)},d=t=>G(o,i=>zb(e,i,n,t,t)),u=t=>{const n=he(t.childNodes),i=d(t)||G(o,e=>Hy(a,t,e)),r=t.parentNode;if(!i&&w(r)&&qh(s)&&d(r),s.deep&&n.length)for(let e=0;e<n.length;e++)u(n[e]);$(["underline","line-through","overline"],n=>{Yi(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&Hh(a,t.parentNode)===n&&zb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,t)})},h=e=>{const t=a.get(e?"_start":"_end");if(t){let n=t[e?"firstChild":"lastChild"];return(e=>uh(e)&&Yi(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),er(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),a.remove(t,!0),n}return null},p=t=>{let n,i,r=hp(a,t,o,t.collapsed);if(s.split){if(r=um(r),n=Tb(e,r,!0),i=Tb(e,r),n!==i){if(n=kb(n,!0),i=kb(i,!1),Sb(a,n,i)){const e=F.from(n.firstChild).getOr(n);return c(Db(a,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(Sb(a,i,n)){const e=F.from(i.lastChild).getOr(i);return c(Db(a,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1)}n=Lb(a,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=Lb(a,i,"span",{id:"_end","data-mce-type":"bookmark"});const e=a.createRng();e.setStartAfter(n),e.setEndBefore(i),pp(a,e,e=>{$(e,e=>{uh(e)||uh(e.parentNode)||c(e)})}),c(n),c(i),n=h(!0),i=h()}else n=i=c(n);r.startContainer=n.parentNode?n.parentNode:n,r.startOffset=a.nodeIndex(n),r.endContainer=i.parentNode?i.parentNode:i,r.endOffset=a.nodeIndex(i)+1}pp(a,r,e=>{$(e,u)})};if(i){if(Th(i)){const e=a.createRng();e.setStartBefore(i),e.setEndAfter(i),p(e)}else p(i);Mp(e,t,i,n)}else l.isCollapsed()&&$h(s)&&!bh(e).length?eb(e,t,n,r):(Lh(e,()=>Mh(e,p),i=>$h(s)&&Yy(e,t,n,i)),e.nodeChanged()),((e,t,n)=>{"removeformat"===t?$(mb(e.selection),t=>{$(ab,n=>e.dom.setStyle(t,n,"")),Ob(e.dom,t)}):cb(e.formatter,t).each(t=>{$(mb(e.selection),i=>Pb(e.dom,i,t,n,null))})})(e,t,n),Mp(e,t,i,n)},Fb=(e,t,n,i,r)=>{(i||e.selection.isEditable())&&Ub(e,t,n,i,r)},zb=(e,t,n,i,r)=>Bb(e,t,n,i,r).fold(N,t=>(e.dom.rename(i,t),!0),U),Hb=Ot.each,jb=(e,t,n,i)=>{Hb(t,t=>{$h(t)&&Hb(e.dom.select(t.inline,i),i=>{gb(i)&&zb(e,t,n,i,t.exact?i:null)}),((e,t,n)=>{if(t.clear_child_styles){const i=t.links?"*:not(a)":"*";fb(e.select(i,n),n=>{gb(n)&&e.isEditable(n)&&fb(t.styles,(t,i)=>{e.setStyle(n,i,"")})})}})(e.dom,t,i)})},Vb=Ot.each,Yb=(e,t,n,i)=>{if(Vb(n.styles,(n,r)=>{e.setStyle(t,r,Nh(n,i))}),n.styles){const n=e.getAttrib(t,"style");n&&e.setAttrib(t,"data-mce-style",n)}},Gb=(e,t,n,i)=>{const r=e.formatter.get(t),o=r[0],s=!i&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(e,t=o)=>{x(t.onformat)&&t.onformat(e,t,n,i),Yb(a,e,t,n),Vb(t.attributes,(t,i)=>{a.setAttrib(e,i,Nh(t,n))}),Vb(t.classes,t=>{const i=Nh(t,n);a.hasClass(e,i)||a.addClass(e,i)})},d=(e,t)=>{let n=!1;return Vb(e,e=>!!Qh(e)&&("false"===a.getContentEditable(t)&&!e.ceFalseOverride||(!(!w(e.collapsed)||e.collapsed===s)||(!(a.is(t,e.selector)&&!Zu(t))||(c(t,e),n=!0,!1))))),n},u=e=>{if(m(e)){const t=a.create(e);return c(t),t}return null},h=(i,s,a)=>{const l=[];let h=!0;const p=o.inline||o.block,m=u(p),f=i=>(e=>Gh(e)&&!0===e.wrapper)(o)&&Vy(e,i,t,n),g=(t,n,i)=>{const r=(e=>Gh(e)&&!0!==e.wrapper)(o)&&Rh(e.schema,t)&&Oh(e,n,p);return i&&r};pp(i,s,t=>{let n;const s=t=>{let u=!1,v=h,y=!1;const b=t.parentNode,A=b.nodeName.toLowerCase(),_=i.getContentEditable(t);w(_)&&(v=h,h="true"===_,u=!0,y=Bh(e,t));const x=h&&!u;if(sr(t)&&!((e,t,n,i)=>{if(Bc(e)&&$h(t)&&n.parentNode){const t=vs(e.schema),r=xv(bn.fromDom(n),e=>Zu(e.dom));return Me(t,i)&&bo(bn.fromDom(n.parentNode),!1)&&!r}return!1})(e,o,t,A))return n=null,void(Gh(o)&&i.remove(t));if(f(t))n=null;else{if(g(t,A,x)){const e=i.rename(t,p);return c(e),l.push(e),void(n=null)}if(Qh(o)){let e=d(r,t);if(!e&&w(b)&&qh(o)&&(e=d(r,b)),!$h(o)||e)return void(n=null)}w(m)&&((t,n,r,s)=>{const l=t.nodeName.toLowerCase(),c=Oh(e,p,l)&&Oh(e,n,p),d=!a&&er(t)&&Or(t.data),u=Zu(t),h=!$h(o)||!i.isBlock(t);return(r||s)&&c&&!d&&!u&&h})(t,A,x,y)?(n||(n=i.clone(m,!1),b.insertBefore(n,t),l.push(n)),y&&u&&(h=v),n.appendChild(t)):(n=null,$(he(t.childNodes),s),u&&(h=v),n=null)}};$(t,s)}),!0===o.links&&$(l,e=>{const t=e=>{"A"===e.nodeName&&c(e,o),$(he(e.childNodes),t)};t(e)}),$(l,s=>{const a=(e=>{let t=0;return $(e.childNodes,e=>{(e=>w(e)&&er(e)&&0===e.length)(e)||uh(e)||t++}),t})(s);!(l.length>1)&&i.isBlock(s)||0!==a?($h(o)||Gh(o)&&o.wrapper)&&(o.exact||1!==a||(s=(e=>{const t=ee(e.childNodes,kh).filter(e=>"false"!==i.getContentEditable(e)&&Hy(i,e,o));return t.map(t=>{const n=i.clone(t,!1);return c(n),i.replace(n,e,!0),i.remove(t,!0),n}).getOr(e)})(s)),jb(e,r,n,s),((e,t,n,i,r)=>{const o=r.parentNode;Vy(e,o,n,i)&&zb(e,t,i,r)||t.merge_with_parents&&o&&e.dom.getParent(o,o=>!!Vy(e,o,n,i)&&(zb(e,t,i,r),!0))})(e,o,t,n,s),((e,t,n,i)=>{if(t.styles&&t.styles.backgroundColor){const r=_b(e,"fontSize");Ab(i,t=>r(t)&&e.isEditable(t),wb(e,"backgroundColor",Nh(t.styles.backgroundColor,n)))}})(i,o,n,s),((e,t,n,i)=>{const r=t=>{if(Gi(t)&&Yi(t.parentNode)&&e.isEditable(t)){const n=Hh(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Ot.walk(i,r,"childNodes"),r(i))})(i,o,0,s),((e,t,n,i)=>{if($h(t)&&("sub"===t.inline||"sup"===t.inline)){const n=_b(e,"fontSize");Ab(i,t=>n(t)&&e.isEditable(t),wb(e,"fontSize",""));const r=K(e.select("sup"===t.inline?"sub":"sup",i),e.isEditable);e.remove(r,!0)}})(i,o,0,s),bb(e,o,0,s)):i.remove(s,!0)})},p=Th(i)?i:l.getNode();if("false"===a.getContentEditable(p)&&!Bh(e,p))return d(r,i=p),void Ep(e,t,i,n);if(o){if(i)if(Th(i)){if(!d(r,i)){const e=a.createRng();e.setStartBefore(i),e.setEndAfter(i),h(a,hp(a,e,r),!0)}}else h(a,i,!0);else s&&$h(o)&&!bh(e).length?((e,t,n)=>{let i;const r=e.selection,o=e.formatter.get(t);if(!o)return;const s=r.getRng();let a=s.startOffset;const l=s.startContainer.nodeValue;i=Xu(e.getBody(),r.getStart());const c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&a>0&&a<l.length&&c.test(l.charAt(a))&&c.test(l.charAt(a-1))){const i=r.getBookmark();s.collapse(!0);let a=hp(e.dom,s,o);a=um(a),e.formatter.apply(t,n,a),r.moveToBookmark(i)}else{let o=i?qy(i):null;i&&(null==o?void 0:o.data)===$y||(d=e.getDoc(),u=Wy(!0).dom,i=d.importNode(u,!0),o=i.firstChild,s.insertNode(i),a=1),e.formatter.apply(t,n,i),r.setCursorLocation(o,a)}var d,u})(e,t,n):(l.setRng(yy(l.getRng())),Lh(e,()=>{Mh(e,(e,t)=>{const n=t?e:hp(a,e,r);h(a,n,!1)})},U),e.nodeChanged()),cb(e.formatter,t).each(t=>{$(pb(e.selection),e=>Yb(a,e,t,n))});((e,t)=>{Ee(ob,e)&&$(ob[e],e=>{e(t)})})(t,e)}Ep(e,t,i,n)},Qb=(e,t,n,i)=>{(i||e.selection.isEditable())&&Gb(e,t,n,i)},$b=e=>Ee(e,"vars"),qb=e=>e.selection.getStart(),Wb=(e,t,n,i,r)=>J(t,t=>{const o=e.formatter.matchNode(t,n,null!=r?r:{},i);return!A(o)},t=>!!Fy(e,t,n)||!i&&w(e.formatter.matchNode(t,n,r,!0))),Kb=(e,t)=>{const n=null!=t?t:qb(e);return K(jh(e.dom,n),e=>Yi(e)&&!Ki(e))},Zb=(e,t,n)=>{const i=Kb(e,t);ge(n,(n,r)=>{const o=n=>{const o=Wb(e,i,r,n.similar,$b(n)?n.vars:void 0),s=o.isSome();if(n.state.get()!==s){n.state.set(s);const e=o.getOr(t);$b(n)?n.callback(s,{node:e,format:r,parents:i}):$(n.callbacks,t=>t(s,{node:e,format:r,parents:i}))}};$([n.withSimilar,n.withoutSimilar],o),$(n.withVars,o)})},Xb=(e,t,n,i,r,o)=>(((e,t,n,i,r,o)=>{const s=t.get();$(n.split(","),t=>{const n=Ce(s,t).getOrThunk(()=>{const e={withSimilar:{state:Js(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Js(!1),similar:!1,callbacks:[]},withVars:[]};return s[t]=e,e}),a=()=>{const n=Kb(e);return Wb(e,n,t,r,o).isSome()};if(A(o)){const e=r?n.withSimilar:n.withoutSimilar;e.callbacks.push(i),1===e.callbacks.length&&e.state.set(a())}else n.withVars.push({state:Js(a()),similar:r,vars:o,callback:i})}),t.set(s)})(e,t,n,i,r,o),{unbind:()=>((e,t,n)=>{const i=e.get();$(t.split(","),e=>Ce(i,e).each(t=>{i[e]={withSimilar:{...t.withSimilar,callbacks:K(t.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...t.withoutSimilar,callbacks:K(t.withoutSimilar.callbacks,e=>e!==n)},withVars:K(t.withVars,e=>e.callback!==n)}})),e.set(i)})(t,n,i)}),Jb=Ot.explode,eA=()=>{const e={};return{addFilter:(t,n)=>{$(Jb(t),t=>{Ee(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)})},getFilters:()=>xe(e),removeFilter:(t,n)=>{$(Jb(t),t=>{if(Ee(e,t))if(w(n)){const i=e[t],r=K(i.callbacks,e=>e!==n);r.length>0?i.callbacks=r:delete e[t]}else delete e[t]})}}},tA=(e,t,n)=>{e.addNodeFilter("font",e=>{$(e,e=>{const i=t.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),s=e.attr("size");r&&(i.color=r),o&&(i["font-family"]=o),s&&Xe(s).each(e=>{i["font-size"]=n[e-1]}),e.name="span",e.attr("style",t.serialize(i)),((e,t)=>{$(t,t=>{e.attr(t,null)})})(e,["color","face","size"])})})},nA=(e,t,n)=>{var i;const r=Ls();t.convert_fonts_to_spans&&tA(e,r,Ot.explode(null!==(i=t.font_size_legacy_values)&&void 0!==i?i:"")),((e,t,n)=>{e.addNodeFilter("strike",e=>{const i="html4"!==t.type;$(e,e=>{if(i)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}})})})(e,n,r)},iA=(e,t,n)=>{t.addNodeFilter("br",(t,i,r)=>{const o=Ot.extend({},n.getBlockElements()),s=n.getNonEmptyElements(),a=n.getWhitespaceElements();o.body=1;const l=e=>e.name in o||No(n,e);for(let i=0,c=t.length;i<c;i++){let c=t[i],d=c.parent;if(d&&l(d)&&c===d.lastChild){let t=c.prev;for(;t;){const e=t.name;if("span"!==e||"bookmark"!==t.attr("data-mce-type")){"br"===e&&(c=null);break}t=t.prev}if(c&&(c.remove(),hy(n,s,a,d))){const t=n.getElementRule(d.name);t&&(t.removeEmpty?d.remove():t.paddEmpty&&dy(e,r,l,d))}}else{let e=c;for(;d&&d.firstChild===e&&d.lastChild===e&&(e=d,!o[d.name]);)d=d.parent;if(e===d){const e=new Tf("#text",3);e.value=vr,c.replace(e)}}}})},rA=e=>{const[t,...n]=e.split(","),i=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const e=";base64"===r[2],t=e?(e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(i):decodeURIComponent(i);return F.some({type:r[1],data:t,base64Encoded:e})}return F.none()},oA=(e,t,n=!0)=>{let i=t;if(n)try{i=atob(t)}catch(e){return F.none()}const r=new Uint8Array(i.length);for(let e=0;e<r.length;e++)r[e]=i.charCodeAt(e);return F.some(new Blob([r],{type:e}))},sA=e=>{return Ye(e,"blob:")?(e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(e):Ye(e,"data:")?(t=e,new Promise((e,n)=>{rA(t).bind(({type:e,data:t,base64Encoded:n})=>oA(e,t,n)).fold(()=>n("Invalid data URI"),e)})):Promise.reject("Unknown URI format");var t},aA=e=>new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>{t(i.result)},i.onerror=()=>{var e;n(null===(e=i.error)||void 0===e?void 0:e.message)},i.readAsDataURL(e)});let lA=0;const cA=(e,t,n)=>rA(e).bind(({data:e,type:i,base64Encoded:r})=>{if(t&&!r)return F.none();{const t=r?e:btoa(e);return n(t,i)}}),dA=(e,t,n)=>{const i=e.create((r||"blobid")+lA++,t,n);var r;return e.add(i),i},uA=(e,t,n=!1)=>cA(t,n,(t,n)=>F.from(e.getByData(t,n)).orThunk(()=>oA(n,t).map(n=>dA(e,n,t)))),hA=(e,t)=>{const{blob_cache:n}=t;if(n){const t=e=>{const t=e.attr("src");(e=>e.attr("src")===Lt.transparentSrc||w(e.attr("data-mce-placeholder")))(e)||(e=>w(e.attr("data-mce-bogus")))(e)||_(t)||uA(n,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>$(e,t))}},pA=(e,t)=>Ye(e,`${t}/`),mA=(e,t)=>{const n=e.schema;t.remove_trailing_brs&&iA(t,e,n),e.addAttributeFilter("href",e=>{let n=e.length;const i=e=>{const t=e?Ot.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter(e=>e.length>0).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",i(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,n,i,r,o=e.length;for(;o--;)if(r=e[o],"a"===r.name&&r.firstChild&&!r.attr("href"))for(i=r.parent,t=r.lastChild;t&&i;)n=t.prev,i.insert(t,r),t=n}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,n,i=e.length;for(;i--;)if(t=e[i],n=t.parent,n&&("ul"===n.name||"ol"===n.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new Tf("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const i=n.getValidClasses();t.validate&&i&&e.addAttributeFilter("class",e=>{var t;let n=e.length;for(;n--;){const r=e[n],o=null!==(t=r.attr("class"))&&void 0!==t?t:"",s=Ot.explode(o," ");let a="";for(let e=0;e<s.length;e++){const t=s[e];let n=!1,o=i["*"];o&&o[t]&&(n=!0),o=i[r.name],!n&&o&&o[t]&&(n=!0),n&&(a&&(a+=" "),a+=t)}a.length||(a=null),r.attr("class",a)}}),hA(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>$(e,e=>{e.replace(((e,t,n,i,r)=>{let o;o=A(e)?"iframe":pA(e,"image")?"img":pA(e,"video")?"video":pA(e,"audio")?"audio":"iframe";const s=new Tf(o,1);return s.attr("audio"===o?{src:t}:{src:t,width:n,height:i}),"audio"!==o&&"video"!==o||s.attr("controls",""),"iframe"===o&&r&&s.attr("sandbox",""),s})(e.attr("type"),"object"===e.name?e.attr("data"):e.attr("src"),e.attr("width"),e.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",e=>$(e,e=>e.attr("sandbox","")))},{entries:fA,setPrototypeOf:gA,isFrozen:vA,getPrototypeOf:yA,getOwnPropertyDescriptor:bA}=Object;let{freeze:AA,seal:_A,create:wA}=Object,{apply:xA,construct:CA}="undefined"!=typeof Reflect&&Reflect;xA||(xA=function(e,t,n){return e.apply(t,n)}),AA||(AA=function(e){return e}),_A||(_A=function(e){return e}),CA||(CA=function(e,t){return new e(...t)});const EA=NA(Array.prototype.forEach),MA=NA(Array.prototype.pop),SA=NA(Array.prototype.push),TA=NA(String.prototype.toLowerCase),kA=NA(String.prototype.toString),LA=NA(String.prototype.match),DA=NA(String.prototype.replace),IA=NA(String.prototype.indexOf),RA=NA(String.prototype.trim),OA=NA(RegExp.prototype.test),PA=(BA=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CA(BA,t)});var BA;function NA(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return xA(e,t,i)}}function UA(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:TA,gA&&gA(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(vA(t)||(t[r]=e),i=e)}e[i]=!0}return e}function FA(e){const t=wA(null);for(const[n,i]of fA(e))t[n]=i;return t}function zA(e,t){for(;null!==e;){const n=bA(e,t);if(n){if(n.get)return NA(n.get);if("function"==typeof n.value)return NA(n.value)}e=yA(e)}return function(e){return console.warn("fallback value for",e),null}}const HA=AA(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jA=AA(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),VA=AA(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),YA=AA(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),GA=AA(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),QA=AA(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$A=AA(["#text"]),qA=AA(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),WA=AA(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),KA=AA(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZA=AA(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),XA=_A(/\{\{[\w\W]*|[\w\W]*\}\}/gm),JA=_A(/<%[\w\W]*|[\w\W]*%>/gm),e_=_A(/\${[\w\W]*}/gm),t_=_A(/^data-[\-\w.\u00B7-\uFFFF]/),n_=_A(/^aria-[\-\w]+$/),i_=_A(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),r_=_A(/^(?:\w+script|data):/i),o_=_A(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),s_=_A(/^html$/i);var a_=Object.freeze({__proto__:null,MUSTACHE_EXPR:XA,ERB_EXPR:JA,TMPLIT_EXPR:e_,DATA_ATTR:t_,ARIA_ATTR:n_,IS_ALLOWED_URI:i_,IS_SCRIPT_OR_DATA:r_,ATTR_WHITESPACE:o_,DOCTYPE_NAME:s_});const l_=()=>"undefined"==typeof window?null:window;var c_=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l_();const n=t=>e(t);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const i=t.document,r=i.currentScript;let{document:o}=t;const{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:m}=t,f=c.prototype,g=zA(f,"cloneNode"),v=zA(f,"nextSibling"),y=zA(f,"childNodes"),b=zA(f,"parentNode");if("function"==typeof a){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let A,_="";const{implementation:w,createNodeIterator:x,createDocumentFragment:C,getElementsByTagName:E}=o,{importNode:M}=i;let S={};n.isSupported="function"==typeof fA&&"function"==typeof b&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:k,TMPLIT_EXPR:L,DATA_ATTR:D,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:O}=a_;let{IS_ALLOWED_URI:P}=a_,B=null;const N=UA({},[...HA,...jA,...VA,...GA,...$A]);let U=null;const F=UA({},[...qA,...WA,...KA,...ZA]);let z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,j=null,V=!0,Y=!0,G=!1,Q=!0,$=!1,q=!1,W=!1,K=!1,Z=!1,X=!1,J=!1,ee=!0,te=!1,ne=!0,ie=!1,re={},oe=null;const se=UA({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ae=null;const le=UA({},["audio","video","img","source","image","track"]);let ce=null;const de=UA({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml";let me=pe,fe=!1,ge=null;const ve=UA({},[ue,he,pe],kA);let ye;const be=["application/xhtml+xml","text/html"];let Ae,_e=null;const we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){if(!_e||_e!==e){if(e&&"object"==typeof e||(e={}),e=FA(e),ye=ye=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ae="application/xhtml+xml"===ye?kA:TA,B="ALLOWED_TAGS"in e?UA({},e.ALLOWED_TAGS,Ae):N,U="ALLOWED_ATTR"in e?UA({},e.ALLOWED_ATTR,Ae):F,ge="ALLOWED_NAMESPACES"in e?UA({},e.ALLOWED_NAMESPACES,kA):ve,ce="ADD_URI_SAFE_ATTR"in e?UA(FA(de),e.ADD_URI_SAFE_ATTR,Ae):de,ae="ADD_DATA_URI_TAGS"in e?UA(FA(le),e.ADD_DATA_URI_TAGS,Ae):le,oe="FORBID_CONTENTS"in e?UA({},e.FORBID_CONTENTS,Ae):se,H="FORBID_TAGS"in e?UA({},e.FORBID_TAGS,Ae):{},j="FORBID_ATTR"in e?UA({},e.FORBID_ATTR,Ae):{},re="USE_PROFILES"in e&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,$=e.SAFE_FOR_TEMPLATES||!1,q=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,J=e.RETURN_TRUSTED_TYPE||!1,K=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ne=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,P=e.ALLOWED_URI_REGEXP||i_,me=e.NAMESPACE||pe,z=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$&&(Y=!1),X&&(Z=!0),re&&(B=UA({},[...$A]),U=[],!0===re.html&&(UA(B,HA),UA(U,qA)),!0===re.svg&&(UA(B,jA),UA(U,WA),UA(U,ZA)),!0===re.svgFilters&&(UA(B,VA),UA(U,WA),UA(U,ZA)),!0===re.mathMl&&(UA(B,GA),UA(U,KA),UA(U,ZA))),e.ADD_TAGS&&(B===N&&(B=FA(B)),UA(B,e.ADD_TAGS,Ae)),e.ADD_ATTR&&(U===F&&(U=FA(U)),UA(U,e.ADD_ATTR,Ae)),e.ADD_URI_SAFE_ATTR&&UA(ce,e.ADD_URI_SAFE_ATTR,Ae),e.FORBID_CONTENTS&&(oe===se&&(oe=FA(oe)),UA(oe,e.FORBID_CONTENTS,Ae)),ne&&(B["#text"]=!0),q&&UA(B,["html","head","body"]),B.table&&(UA(B,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw PA('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw PA('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,_=A.createHTML("")}else void 0===A&&(A=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(m,r)),null!==A&&"string"==typeof _&&(_=A.createHTML(""));AA&&AA(e),_e=e}},Ee=UA({},["mi","mo","mn","ms","mtext"]),Me=UA({},["foreignobject","desc","title","annotation-xml"]),Se=UA({},["title","style","font","a","script"]),Te=UA({},jA);UA(Te,VA),UA(Te,YA);const ke=UA({},GA);UA(ke,QA);const Le=function(e){SA(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},De=function(e,t){try{SA(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){SA(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!U[e])if(Z||X)try{Le(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ie=function(e){let t,n;if(K)e="<remove></remove>"+e;else{const t=LA(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ye&&me===pe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=A?A.createHTML(e):e;if(me===pe)try{t=(new p).parseFromString(i,ye)}catch(e){}if(!t||!t.documentElement){t=w.createDocument(me,"template",null);try{t.documentElement.innerHTML=fe?_:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),me===pe?E.call(t,q?"html":"body")[0]:q?t.documentElement:r},Re=function(e){return x.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Oe=function(e){return"object"==typeof l?e instanceof l:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Pe=function(e,t,i){S[e]&&EA(S[e],e=>{e.call(n,t,i,_e)})},Be=function(e){let t;if(Pe("beforeSanitizeElements",e,null),(i=e)instanceof h&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof u)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return Le(e),!0;var i;const r=Ae(e.nodeName);if(Pe("uponSanitizeElement",e,{tagName:r,allowedTags:B}),e.hasChildNodes()&&!Oe(e.firstElementChild)&&(!Oe(e.content)||!Oe(e.content.firstElementChild))&&OA(/<[/\w]/g,e.innerHTML)&&OA(/<[/\w]/g,e.textContent))return Le(e),!0;if(!B[r]||H[r]){if(!H[r]&&Ue(r)){if(z.tagNameCheck instanceof RegExp&&OA(z.tagNameCheck,r))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(r))return!1}if(ne&&!oe[r]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i)t.insertBefore(g(n[i],!0),v(e))}}return Le(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:me,tagName:"template"});const n=TA(e.tagName),i=TA(t.tagName);return!!ge[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===pe?"svg"===n:t.namespaceURI===ue?"svg"===n&&("annotation-xml"===i||Ee[i]):Boolean(Te[n]):e.namespaceURI===ue?t.namespaceURI===pe?"math"===n:t.namespaceURI===he?"math"===n&&Me[i]:Boolean(ke[n]):e.namespaceURI===pe?!(t.namespaceURI===he&&!Me[i])&&!(t.namespaceURI===ue&&!Ee[i])&&!ke[n]&&(Se[n]||!Te[n]):!("application/xhtml+xml"!==ye||!ge[e.namespaceURI]))}(e)?(Le(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!OA(/<\/no(script|embed|frames)/i,e.innerHTML)?($&&3===e.nodeType&&(t=e.textContent,t=DA(t,T," "),t=DA(t,k," "),t=DA(t,L," "),e.textContent!==t&&(SA(n.removed,{element:e.cloneNode()}),e.textContent=t)),Pe("afterSanitizeElements",e,null),!1):(Le(e),!0)},Ne=function(e,t,n){if(ee&&("id"===t||"name"===t)&&(n in o||n in we))return!1;if(Y&&!j[t]&&OA(D,t));else if(V&&OA(I,t));else if(!U[t]||j[t]){if(!(Ue(e)&&(z.tagNameCheck instanceof RegExp&&OA(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&OA(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&OA(z.tagNameCheck,n)||z.tagNameCheck instanceof Function&&z.tagNameCheck(n))))return!1}else if(ce[t]);else if(OA(P,DA(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==IA(n,"data:")||!ae[e]){if(G&&!OA(R,DA(n,O,"")));else if(n)return!1}else;return!0},Ue=function(e){return e.indexOf("-")>0},Fe=function(e){let t,n,i,r;Pe("beforeSanitizeAttributes",e,null);const{attributes:o}=e;if(!o)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(r=o.length;r--;){t=o[r];const{name:a,namespaceURI:l}=t;n="value"===a?t.value:RA(t.value);const c=n;if(i=Ae(a),s.attrName=i,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",e,s),n=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){De(a,e);continue}if(!Q&&OA(/\/>/i,n)){De(a,e);continue}$&&(n=DA(n,T," "),n=DA(n,k," "),n=DA(n,L," "));const d=Ae(e.nodeName);if(Ne(d,i,n)){if(!te||"id"!==i&&"name"!==i||(De(a,e),n="user-content-"+n),A&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(l);else switch(m.getAttributeType(d,i)){case"TrustedHTML":n=A.createHTML(n);break;case"TrustedScriptURL":n=A.createScriptURL(n)}if(n!==c)try{l?e.setAttributeNS(l,a,n):e.setAttribute(a,n)}catch(t){De(a,e)}}else De(a,e)}Pe("afterSanitizeAttributes",e,null)},ze=function e(t){let n;const i=Re(t);for(Pe("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Pe("uponSanitizeShadowNode",n,null),Be(n)||(n.content instanceof s&&e(n.content),Fe(n));Pe("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t,r,o,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(fe=!e,fe&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Oe(e)){if("function"!=typeof e.toString)throw PA("toString is not a function");if("string"!=typeof(e=e.toString()))throw PA("dirty is not a string, aborting")}if(!n.isSupported)return e;if(W||Ce(c),n.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=Ae(e.nodeName);if(!B[t]||H[t])throw PA("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)t=Ie("\x3c!----\x3e"),r=t.ownerDocument.importNode(e,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?t=r:t.appendChild(r);else{if(!Z&&!$&&!q&&-1===e.indexOf("<"))return A&&J?A.createHTML(e):e;if(t=Ie(e),!t)return Z?null:J?_:""}t&&K&&Le(t.firstChild);const d=Re(ie?e:t);for(;o=d.nextNode();)Be(o)||(o.content instanceof s&&ze(o.content),Fe(o));if(ie)return e;if(Z){if(X)for(a=C.call(t.ownerDocument);t.firstChild;)a.appendChild(t.firstChild);else a=t;return(U.shadowroot||U.shadowrootmode)&&(a=M.call(i,a,!0)),a}let u=q?t.outerHTML:t.innerHTML;return q&&B["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&OA(s_,t.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+u),$&&(u=DA(u,T," "),u=DA(u,k," "),u=DA(u,L," ")),A&&J?A.createHTML(u):u},n.setConfig=function(e){Ce(e),W=!0},n.clearConfig=function(){_e=null,W=!1},n.isValidAttribute=function(e,t,n){_e||Ce({});const i=Ae(e),r=Ae(t);return Ne(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(S[e]=S[e]||[],SA(S[e],t))},n.removeHook=function(e){if(S[e])return MA(S[e])},n.removeHooks=function(e){S[e]&&(S[e]=[])},n.removeAllHooks=function(){S={}},n}();const d_=Ot.each,u_=Ot.trim,h_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],p_={ftp:21,http:80,https:443,mailto:25},m_=["img","video"],f_=(e,t,n)=>{const i=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(i)||!e.allow_html_data_urls&&(/^data:image\//i.test(i)?((e,t)=>w(e)?!e:!w(t)||!Y(m_,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(i):/^data:/i.test(i)))};class g_{static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(t=i[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const i=as.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!f_(n,i,t)}}static getDocumentBaseUrl(e){var t;let n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(e,t={}){this.path="",this.directory="",e=u_(e),this.settings=t;const n=t.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(i.source=e);const r=0===e.indexOf("//");if(0!==e.indexOf("/")||r||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=n?n.path:new g_(document.location.href).directory;if(""===(null==n?void 0:n.protocol))e="//mce_host"+i.toAbsPath(t,e);else{const r=/([^#?]*)([#?]?.*)/.exec(e);r&&(e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(t,r[1])+r[2])}}e=e.replace(/@@/g,"(mce_at)");const o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);o&&d_(h_,(e,t)=>{let n=o[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[e]=n}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),r&&(i.protocol="")}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const t=new g_(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();const n=this.getURI(),i=t.getURI();if(n===i||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===i)return n;let r=this.toRelPath(this.path,t.path);return t.query&&(r+="?"+t.query),t.anchor&&(r+="#"+t.anchor),r}toAbsolute(e,t){const n=new g_(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=this.protocol?p_[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,i,r=0,o="";const s=e.substring(0,e.lastIndexOf("/")).split("/"),a=t.split("/");if(s.length>=a.length)for(n=0,i=s.length;n<i;n++)if(n>=a.length||s[n]!==a[n]){r=n+1;break}if(s.length<a.length)for(n=0,i=a.length;n<i;n++)if(n>=s.length||s[n]!==a[n]){r=n+1;break}if(1===r)return t;for(n=0,i=s.length-(r-1);n<i;n++)o+="../";for(n=r-1,i=a.length;n<i;n++)o+=n!==r-1?"/"+a[n]:a[n];return o}toAbsPath(e,t){let n=0;const i=/\/$/.test(t)?"/":"",r=e.split("/"),o=t.split("/"),s=[];d_(r,e=>{e&&s.push(e)});const a=[];for(let e=o.length-1;e>=0;e--)0!==o[e].length&&"."!==o[e]&&(".."!==o[e]?n>0?n--:a.push(o[e]):n++);const l=s.length-n;let c;return c=l<=0?oe(a).join("/"):s.slice(0,l).join("/")+"/"+oe(a).join("/"),0!==c.indexOf("/")&&(c="/"+c),i&&c.lastIndexOf("/")!==c.length-1&&(c+=i),c}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const v_=Ot.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),y_="data-mce-type";let b_=0;const A_=(e,t,n,i,r)=>{var o,s,a,l;const c=t.validate,d=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(o=e.nodeValue)&&void 0!==o?o:"")&&(e.nodeValue=" "+e.nodeValue);const u=null!==(s=null==r?void 0:r.tagName)&&void 0!==s?s:e.nodeName.toLowerCase();if("html"!==i&&n.isValid(i))return void(w(r)&&(r.allowedTags[u]=!0));if(1!==e.nodeType||"body"===u)return;const h=bn.fromDom(e),p=on(h,y_),f=nn(h,"data-mce-bogus");if(!p&&m(f))return void("all"===f?_i(h):wi(h));const g=n.getElementRule(u);if(!c||g){if(w(r)&&(r.allowedTags[u]=!0),c&&g&&!p){if($(null!==(a=g.attributesForced)&&void 0!==a?a:[],e=>{en(h,e.name,"{$uid}"===e.value?"mce_"+b_++:e.value)}),$(null!==(l=g.attributesDefault)&&void 0!==l?l:[],e=>{on(h,e.name)||en(h,e.name,"{$uid}"===e.value?"mce_"+b_++:e.value)}),g.attributesRequired&&!G(g.attributesRequired,e=>on(h,e)))return void wi(h);if(g.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(h))return void wi(h);g.outputName&&g.outputName!==u&&Ma(h,g.outputName)}}else Ee(d,u)?_i(h):wi(h)},__=(e,t,n,i,r,o)=>"html"!==n&&!Ao(i)||!(r in v_&&f_(e,o,i))&&(!e.validate||t.isValid(i,r)||Ye(r,"data-")||Ye(r,"aria-")),w_=(e,t)=>e.hasAttribute(y_)&&("id"===t||"class"===t||"style"===t),x_=(e,t)=>e in t.getBoolAttrs(),C_=(e,t,n,i)=>{const{attributes:r}=e;for(let o=r.length-1;o>=0;o--){const s=r[o],a=s.name,l=s.value;__(t,n,i,e.tagName.toLowerCase(),a,l)||w_(e,a)?x_(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},E_=(e,t,n)=>{const i=c_();return i.addHook("uponSanitizeElement",(i,r)=>{A_(i,e,t,n.track(i),r)}),i.addHook("uponSanitizeAttribute",(i,r)=>{((e,t,n,i,r)=>{const o=e.tagName.toLowerCase(),{attrName:s,attrValue:a}=r;r.keepAttr=__(t,n,i,o,s,a),r.keepAttr?(r.allowedAttributes[s]=!0,x_(s,n)&&(r.attrValue=s),t.allow_svg_data_urls&&Ye(a,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):w_(e,s)&&(r.forceKeepAttr=!0)})(i,e,t,n.current(),r)}),i},M_=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>`xlink:${e}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};return c_().sanitize(e,n),e.innerHTML},S_=(e,t)=>{const n=(()=>{let e=[];const t=()=>e[e.length-1];return{track:n=>{_o(n)&&e.push(n);let i=t();return i&&!i.contains(n)&&(e.pop(),i=t()),wo(i)},current:()=>wo(t()),reset:()=>{e=[]}}})();if(e.sanitize){const i=E_(e,t,n),r=(t,r)=>{i.sanitize(t,((e,t)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(e,r)),i.removed=[],n.reset()};return{sanitizeHtmlElement:r,sanitizeNamespaceElement:M_}}return{sanitizeHtmlElement:(i,r)=>{const o=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let s;for(;s=o.nextNode();){const i=n.track(s);A_(s,e,t,i),Yi(s)&&C_(s,e,t,i)}n.reset()},sanitizeNamespaceElement:M}},T_=Ot.makeMap,k_=Ot.extend,L_=(e,t,n,i)=>{const r=e.name,o=r in n&&"title"!==r&&"textarea"!==r,s=t.childNodes;for(let t=0,r=s.length;t<r;t++){const r=s[t],a=new Tf(r.nodeName.toLowerCase(),r.nodeType);if(Yi(r)){const e=r.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];a.attr(n.name,n.value)}Ao(a.name)&&(i(r),a.value=r.innerHTML)}else er(r)?(a.value=r.data,o&&(a.raw=!0)):(ir(r)||tr(r)||nr(r))&&(a.value=r.data);Ao(a.name)||L_(a,r,n,i),e.append(a)}},D_=(e,t,n,i)=>{const r=n.validate,o=t.getNonEmptyElements(),s=t.getWhitespaceElements(),a=k_(T_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=vs(t),c=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,h=e=>{let t=e.parent;for(;w(t);){if(t.name in s)return!0;t=t.parent}return!1},p=n=>n.name in a||No(t,n)||Ao(n.name)&&n.parent===e,m=(t,n)=>{const r=n?t.prev:t.next;return!w(r)&&!_(t.parent)&&(p(t.parent)&&(t.parent!==e||!0===i.isRootContent))};return[e=>{var t;if(3===e.type&&!h(e)){let n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(c," "),(((e,t)=>w(e)&&(t(e)||"br"===e.name))(e.prev,p)||m(e,!0))&&(n=n.replace(d,"")),0===n.length?e.remove():e.value=n}},e=>{var a;if(1===e.type){const a=t.getElementRule(e.name);if(r&&a){const r=hy(t,o,s,e);a.paddInEmptyBlock&&r&&(e=>{let n=e;for(;w(n);){if(n.name in l)return hy(t,o,s,n);n=n.parent}return!1})(e)?dy(n,i,p,e):a.removeEmpty&&r?p(e)?e.remove():e.unwrap():a.paddEmpty&&(r||(e=>{var t;return uy(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===vr})(e))&&dy(n,i,p,e)}}else if(3===e.type&&!h(e)){let t=null!==(a=e.value)&&void 0!==a?a:"";(e.next&&p(e.next)||m(e,!1))&&(t=t.replace(u,"")),0===t.length?e.remove():e.value=t}}]},I_=(e={},t=bs())=>{const n=eA(),i=eA(),r={validate:!0,root_name:"body",sanitize:!0,...e},o=new DOMParser,s=S_(r,t),a=n.addFilter,l=n.getFilters,c=n.removeFilter,d=i.addFilter,u=i.getFilters,h=i.removeFilter,p=(e,n)=>{const i=m(n.attr(y_)),r=1===n.type&&!Ee(e,n.name)&&!No(t,n)&&!Ao(n.name);return 3===n.type||r&&!i},f={schema:t,addAttributeFilter:d,getAttributeFilters:u,removeAttributeFilter:h,addNodeFilter:a,getNodeFilters:l,removeNodeFilter:c,parse:(e,n={})=>{var i;const a=r.validate,c=null!==(i=n.context)&&void 0!==i?i:r.root_name,d=((e,n,i="html")=>{const r="xhtml"===i?"application/xhtml+xml":"text/html",a=Ee(t.getSpecialElements(),n.toLowerCase()),l=a?`<${n}>${e}</${n}>`:e,c="xhtml"===i?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${l}</body></html>`:`<body>${l}</body>`,d=o.parseFromString(c,r).body;return s.sanitizeHtmlElement(d,r),a?d.firstChild:d})(e,c,n.format);Lo(t,d);const h=new Tf(c,11);L_(h,d,t.getSpecialElements(),s.sanitizeNamespaceElement),d.innerHTML="";const[m,f]=D_(h,t,r,n),g=[],v=a?e=>((e,n)=>{gy(t,e)&&n.push(e)})(e,g):M,y={nodes:{},attributes:{}},b=e=>ay(l(),u(),e,y);if(((e,t,n)=>{const i=[];for(let n=e,r=n;n;r=n,n=n.walk()){const o=n;$(t,e=>e(o)),_(o.parent)&&o!==e?n=r:i.push(o)}for(let e=i.length-1;e>=0;e--){const t=i[e];$(n,e=>e(t))}})(h,[m,b],[f,v]),g.reverse(),a&&g.length>0)if(n.context){const{pass:e,fail:i}=W(g,e=>e.parent===h);fy(i,t,h,b),n.invalid=e.length>0}else fy(g,t,h,b);const A=((e,t)=>{var n;const i=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===i?"":!0===i?"p":i})(r,n);return A&&("body"===h.name||n.isRootContent)&&((e,n)=>{const i=k_(T_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),o=/^[ \t\r\n]+/,s=/[ \t\r\n]+$/;let a=e.firstChild,l=null;const c=e=>{var t,n;e&&(a=e.firstChild,a&&3===a.type&&(a.value=null===(t=a.value)||void 0===t?void 0:t.replace(o,"")),a=e.lastChild,a&&3===a.type&&(a.value=null===(n=a.value)||void 0===n?void 0:n.replace(s,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;a;){const t=a.next;p(i,a)?(l||(l=new Tf(n,1),l.attr(r.forced_root_block_attrs),e.insert(l,a)),l.append(a)):(c(l),l=null),a=t}c(l)}})(h,A),n.invalid||ly(y,n),h}};return mA(f,r),((e,t,n)=>{t.inline_styles&&nA(e,t,n)})(f,r,t),f},R_=(e,t,n)=>{const i=(e=>Ry(e)?qf({validate:!1}).serialize(e):e)(e),r=t(i);if(r.isDefaultPrevented())return r;if(Ry(e)){if(r.content!==i){const t=I_({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:t}}return{...r,content:e}}return r},O_=(e,t)=>{if(t.no_events)return kl.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?kl.error(Tp(e,{content:"",...n}).content):kl.value(n)}},P_=(e,t,n)=>{if(n.no_events)return t;{const i=R_(t,t=>Tp(e,{...n,content:t}),{sanitize:Sd(e),sandbox_iframes:Od(e)});return i.content}},B_=(e,t)=>{if(t.no_events)return kl.value(t);{const n=R_(t.content,n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:n}),{sanitize:Sd(e),sandbox_iframes:Od(e)});return n.isDefaultPrevented()?(Sp(e,n),kl.error(void 0)):kl.value(n)}},N_=(e,t,n)=>{n.no_events||Sp(e,{...n,content:t})},U_=(e,t,n)=>({element:e,width:t,rows:n}),F_=(e,t)=>({element:e,cells:t}),z_=(e,t)=>({x:e,y:t}),H_=(e,t)=>rn(e,t).bind(Xe).getOr(1),j_=(e,t,n)=>{const i=e.rows;return!!(i[n]?i[n].cells:[])[t]},V_=e=>X(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),Y_=(e,t)=>{const n=e.rows;for(let e=0;e<n.length;e++){const i=n[e].cells;for(let n=0;n<i.length;n++)if(xn(i[n],t))return F.some(z_(n,e))}return F.none()},G_=(e,t,n,i,r)=>{const o=[],s=e.rows;for(let e=n;e<=r;e++){const n=s[e].cells,r=t<i?n.slice(t,i+1):n.slice(i,t+1);o.push(F_(s[e].element,r))}return o},Q_=e=>{const t=U_(Ca(e),0,[]);return $(Fi(e,"tr"),(e,n)=>{$(Fi(e,"td,th"),(i,r)=>{((e,t,n,i,r)=>{const o=H_(r,"rowspan"),s=H_(r,"colspan"),a=e.rows;for(let e=n;e<n+o;e++){a[e]||(a[e]=F_(Ea(i),[]));for(let i=t;i<t+s;i++)a[e].cells[i]=e===n&&i===t?r:Ca(r)}})(t,((e,t,n)=>{for(;j_(e,t,n);)t++;return t})(t,r,n),n,e,i)})}),U_(t.element,V_(t.rows),t.rows)},$_=e=>((e,t)=>{const n=Ca(e.element),i=bn.fromTag("tbody");return bi(i,t),vi(n,i),n})(e,(e=>Q(e.rows,e=>{const t=Q(e.cells,e=>{const t=Ea(e);return sn(t,"colspan"),sn(t,"rowspan"),t}),n=Ca(e.element);return bi(n,t),n}))(e)),q_=(e,t,n)=>Y_(e,t).bind(t=>Y_(e,n).map(n=>((e,t,n)=>{const i=t.x,r=t.y,o=n.x,s=n.y,a=r<s?G_(e,i,r,o,s):G_(e,i,s,o,r);return U_(e.element,V_(a),a)})(e,t,n))),W_=(e,t)=>ee(e,e=>"li"===Yt(e)&&xh(e,t)).fold(k([]),t=>(e=>ee(e,e=>"ul"===Yt(e)||"ol"===Yt(e)))(e).map(e=>{const t=bn.fromTag(Yt(e)),n=_e(hi(e),(e,t)=>Ye(t,"list-style"));return li(t,n),[bn.fromTag("li"),t]}).getOr([])),K_=(e,t,n)=>{const i=bn.fromDom(t.commonAncestorContainer),r=gg(i,e),o=K(r,e=>n.isWrapper(Yt(e))),s=W_(r,t),a=o.concat(s.length?s:(e=>Mr(e)?Tn(e).filter(Er).fold(k([]),t=>[e,t]):Er(e)?[e]:[])(i));return Q(a,Ca)},Z_=()=>Xp([]),X_=(e,t,n)=>((e,t)=>{const n=X(t,(e,t)=>(vi(t,e),t),e);return t.length>0?Xp([n]):n})(bn.fromDom(t.cloneContents()),K_(e,t,n)),J_=(e,t)=>((e,t)=>ei(t,"table",I(xn,e)))(e,t[0]).bind(e=>{const n=t[0],i=t[t.length-1],r=Q_(e);return q_(r,n,i).map(e=>Xp([$_(e)]))}).getOrThunk(Z_),ew=(e,t,n)=>{const i=yh(t,e);return i.length>0?J_(e,i):((e,t,n)=>t.length>0&&t[0].collapsed?Z_():X_(e,t[0],n))(e,t,n)},tw=(e,t)=>t>=0&&t<e.length&&mh(e.charAt(t)),nw=e=>Pr(e.innerText),iw=(e,t)=>{if("text"===t.format)return(e=>F.from(e.selection.getRng()).map(t=>{var n;const i=F.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),o=(e=>e.map(e=>e.nodeName).getOr("div").toLowerCase())(i),s=bn.fromDom(t.cloneContents());jf(s),Vf(s);const a=e.dom.add(r,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},s.dom),l=nw(a),c=Pr(null!==(n=a.textContent)&&void 0!==n?n:"");if(e.dom.remove(a),tw(c,0)||tw(c,c.length-1)){const e=i.getOr(r),t=nw(e),n=t.indexOf(l);return-1===n?l:(tw(t,n-1)?" ":"")+l+(tw(t,n+l.length)?" ":"")}return l}).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),i=e.dom.create("body"),r=e.selection.getSel(),o=vf(e,gh(r)),s=t.contextual?ew(bn.fromDom(e.getBody()),o,e.schema).dom:n.cloneContents();return s&&i.appendChild(s),e.selection.serializer.serialize(i,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}},rw=e=>Yi(e)?e.outerHTML:er(e)?as.encodeRaw(e.data,!1):ir(e)?"\x3c!--"+e.data+"--\x3e":"",ow=(e,t,n)=>{const i=(e=>{let t;const n=document.createElement("div"),i=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)i.appendChild(t);return i})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];e.insertBefore(i,t)}else e.appendChild(i)},sw=(e,t)=>(((e,t)=>{let n=0;$(e,e=>{0===e[0]?n++:1===e[0]?(ow(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}})(t,n)})})(((e,t)=>{const n=e.length+t.length+2,i=new Array(n),r=new Array(n),o=(n,i,r,s,l)=>{const c=a(n,i,r,s);if(null===c||c.start===i&&c.diag===i-s||c.end===n&&c.diag===n-r){let o=n,a=r;for(;o<i||a<s;)o<i&&a<s&&e[o]===t[a]?(l.push([0,e[o]]),++o,++a):i-n>s-r?(l.push([2,e[o]]),++o):(l.push([1,t[a]]),++a)}else{o(n,c.start,r,c.start-c.diag,l);for(let t=c.start;t<c.end;++t)l.push([0,e[t]]);o(c.end,i,c.end-c.diag,s,l)}},s=(n,i,r,o)=>{let s=n;for(;s-i<o&&s<r&&e[s]===t[s-i];)++s;return((e,t,n)=>({start:e,end:t,diag:n}))(n,s,i)},a=(n,o,a,l)=>{const c=o-n,d=l-a;if(0===c||0===d)return null;const u=c-d,h=d+c,p=(h%2==0?h:h+1)/2;let m,f,g,v,y;for(i[1+p]=n,r[1+p]=o+1,m=0;m<=p;++m){for(f=-m;f<=m;f+=2){for(g=f+p,f===-m||f!==m&&i[g-1]<i[g+1]?i[g]=i[g+1]:i[g]=i[g-1]+1,v=i[g],y=v-n+a-f;v<o&&y<l&&e[v]===t[y];)i[g]=++v,++y;if(u%2!=0&&u-m<=f&&f<=u+m&&r[g-u]<=i[g])return s(r[g-u],f+n-a,o,l)}for(f=u-m;f<=u+m;f+=2){for(g=f+p-u,f===u-m||f!==u+m&&r[g+1]<=r[g-1]?r[g]=r[g+1]-1:r[g]=r[g-1],v=r[g]-1,y=v-n+a-f;v>=n&&y>=a&&e[v]===t[y];)r[g]=v--,y--;if(u%2==0&&-m<=f&&f<=m&&r[g]<=i[g+u])return s(r[g],f+n-a,o,l)}}return null},l=[];return o(0,e.length,0,t.length,l),l})(Q(he(t.childNodes),rw),e),t),t),aw=Be(()=>document.implementation.createHTMLDocument("undo")),lw=e=>{const t=e.serializer.getTempAttrs(),n=Hf(e.getBody(),t);return(e=>null!==e.querySelector("iframe"))(n)?(i=((e,t)=>K(Q(he(e.childNodes),t?S(Pr,rw):rw),e=>e.length>0))(n,!0),{type:"fragmented",fragments:i,content:"",bookmark:null,beforeBookmark:null}):{type:"complete",fragments:null,content:Pr(n.innerHTML),bookmark:null,beforeBookmark:null};var i},cw=(e,t,n)=>{const i=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?sw(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!w(i)||!eh(i)||!i.isFakeCaret}),i&&(e.selection.moveToBookmark(i),e.selection.scrollIntoView())},dw=e=>"fragmented"===e.type?e.fragments.join(""):e.content,uw=e=>{const t=bn.fromTag("body",aw());return Ei(t,dw(e)),$(Fi(t,"*[data-mce-bogus]"),wi),Ci(t)},hw=(e,t)=>!(!e||!t)&&(!!((e,t)=>dw(e)===dw(t))(e,t)||((e,t)=>uw(e)===uw(t))(e,t)),pw=e=>0===e.get(),mw=(e,t,n)=>{pw(n)&&(e.typing=t)},fw=(e,t)=>{e.typing&&(mw(e,!1,t),e.add())},gw=e=>({init:{bindEvents:M},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{pw(t)&&n.set(Ml(e.selection))})(e,t,n),add:(t,n,i,r,o,s)=>((e,t,n,i,r,o,s)=>{const a=lw(e),l=Ot.extend(o||{},a);if(!pw(i)||e.removed)return null;const c=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:c,originalEvent:s}).isDefaultPrevented())return null;if(c&&hw(c,l))return null;t.data[n.get()]&&r.get().each(e=>{t.data[n.get()].beforeBookmark=e});const d=Yc(e);if(d&&t.data.length>d){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}l.bookmark=Ml(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const u={level:l,lastLevel:c,originalEvent:s};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",u),e.dispatch("change",u)):e.dispatch("AddUndo",u),l})(e,t,n,i,r,o,s),undo:(t,n,i)=>((e,t,n,i)=>{let r;return t.typing&&(t.add(),t.typing=!1,mw(t,!1,n)),i.get()>0&&(i.set(i.get()-1),r=t.data[i.get()],cw(e,r,!0),e.setDirty(!0),e.dispatch("Undo",{level:r})),r})(e,t,n,i),redo:(t,n)=>((e,t,n)=>{let i;return t.get()<n.length-1&&(t.set(t.get()+1),i=n[t.get()],cw(e,i,!1),e.setDirty(!0),e.dispatch("Redo",{level:i})),i})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!hw(lw(e),t.data[0]))(e,t,n),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(fw(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,n,i,r)=>((e,t,n,i,r)=>{if(t.transact(i)){const i=t.data[n.get()].bookmark,o=t.data[n.get()-1];cw(e,o,!0),t.transact(r)&&(t.data[n.get()-1].beforeBookmark=i)}})(e,t,n,i,r)},formatter:{match:(t,n,i,r)=>Yy(e,t,n,i,r),matchAll:(t,n)=>((e,t,n)=>{const i=[],r={},o=e.selection.getStart();return e.dom.getParent(o,o=>{for(let s=0;s<t.length;s++){const a=t[s];!r[a]&&Vy(e,o,a,n)&&(r[a]=!0,i.push(a))}},e.dom.getRoot()),i})(e,t,n),matchNode:(t,n,i,r)=>Vy(e,t,n,i,r),canApply:t=>((e,t)=>{const n=e.formatter.get(t),i=e.dom;if(n&&e.selection.isEditable()){const t=e.selection.getStart(),r=jh(i,t);for(let e=n.length-1;e>=0;e--){const t=n[e];if(!Qh(t))return!0;for(let e=r.length-1;e>=0;e--)if(i.is(r[e],t.selector))return!0}}return!1})(e,t),closest:t=>Gy(e,t),apply:(t,n,i)=>Qb(e,t,n,i),remove:(t,n,i,r)=>Fb(e,t,n,i,r),toggle:(t,n,i)=>((e,t,n,i)=>{const r=e.formatter.get(t);r&&(!Yy(e,t,n,i)||"toggle"in r[0]&&!r[0].toggle?Qb(e,t,n,i):Fb(e,t,n,i))})(e,t,n,i),formatChanged:(t,n,i,r,o)=>Xb(e,t,n,i,r,o)},editor:{getContent:t=>((e,t)=>F.from(e.getBody()).fold(k("tree"===t.format?new Tf("body",11):""),n=>Gf(e,t,n)))(e,t),setContent:(t,n)=>Py(e,t,n),insertContent:(t,n)=>Iy(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,i=w(t)?t:e.getBody();$(n.select("table,a",i),t=>{switch(t.nodeName){case"TABLE":const i=Jc(e),r=n.getAttrib(t,"border");r&&"0"!==r||!e.hasVisual?n.removeClass(t,i):n.addClass(t,i);break;case"A":if(!n.getAttrib(t,"href")){const i=n.getAttrib(t,"name")||t.id,r=ed(e);i&&e.hasVisual?n.addClass(t,r):n.removeClass(t,r)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const i=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(n,t);return O_(e,i).fold(L,t=>{const n=iw(e,t);return P_(e,n,t)})})(e,t,n)},autocompleter:{addDecoration:t=>wf(e,t),removeDecoration:()=>((e,t)=>xf(t).each(t=>{const n=e.selection.getBookmark();wi(t),e.selection.moveToBookmark(n)}))(e,bn.fromDom(e.getBody()))},raw:{getModel:()=>F.none()}}),vw=e=>Ee(e.plugins,"rtc"),yw=e=>{const t=e;return(e=>Ce(e.plugins,"rtc").bind(e=>F.from(e.setup)))(e).fold(()=>(t.rtcInstance=gw(e),F.none()),e=>(t.rtcInstance=(()=>{const e=k(null),t=k("");return{init:{bindEvents:M},undoManager:{beforeChange:M,add:e,undo:e,redo:e,clear:M,reset:M,hasUndo:N,hasRedo:N,transact:e,ignore:M,extra:M},formatter:{match:N,matchAll:k([]),matchNode:k(void 0),canApply:N,closest:t,apply:M,remove:M,toggle:M,formatChanged:k({unbind:M})},editor:{getContent:t,setContent:k({content:"",html:""}),insertContent:k(""),addVisual:M},selection:{getContent:t},autocompleter:{addDecoration:M,removeDecoration:M},raw:{getModel:k(F.none())}}})(),F.some(()=>e().then(e=>(t.rtcInstance=(e=>{const t=e=>f(e)?e:{},{init:n,undoManager:i,formatter:r,editor:o,selection:s,autocompleter:a,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:i.beforeChange,add:i.add,undo:i.undo,redo:i.redo,clear:i.clear,reset:i.reset,hasUndo:i.hasUndo,hasRedo:i.hasRedo,transact:(e,t,n)=>i.transact(n),ignore:(e,t)=>i.ignore(t),extra:(e,t,n,r)=>i.extra(n,r)},formatter:{match:(e,n,i,o)=>r.match(e,t(n),o),matchAll:r.matchAll,matchNode:r.matchNode,canApply:e=>r.canApply(e),closest:e=>r.closest(e),apply:(e,n,i)=>r.apply(e,t(n)),remove:(e,n,i,o)=>r.remove(e,t(n)),toggle:(e,n,i)=>r.toggle(e,t(n)),formatChanged:(e,t,n,i,o)=>r.formatChanged(t,n,i,o)},editor:{getContent:e=>o.getContent(e),setContent:(e,t)=>({content:o.setContent(e,t),html:""}),insertContent:(e,t)=>(o.insertContent(e),""),addVisual:o.addVisual},selection:{getContent:(e,t)=>s.getContent(t)},autocompleter:{addDecoration:a.addDecoration,removeDecoration:a.removeDecoration},raw:{getModel:()=>F.some(l.getRawModel())}}})(e),e.rtc.isRemote)))))},bw=e=>e.rtcInstance?e.rtcInstance:gw(e),Aw=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},_w=e=>Aw(e).init.bindEvents(),ww=(e,t={})=>((e,t,n)=>Aw(e).selection.getContent(t,n))(e,t.format?t.format:"html",t),xw=e=>0===e.dom.length?(_i(e),F.none()):F.some(e),Cw=(e,t,n,i,r)=>{e.bind(e=>((i?Kg:Wg)(e.dom,i?e.dom.length:0,r),t.filter(Wt).map(t=>((e,t,n,i,r)=>{const o=e.dom,s=t.dom,a=i?o.length:s.length;i?(Zg(o,s,r,!1,!i),n.setStart(s,a)):(Zg(s,o,r,!1,!i),n.setEnd(s,a))})(e,t,n,i,r)))).orThunk(()=>{const e=((e,t)=>e.filter(e=>wp.isBookmarkNode(e.dom)).bind(t?In:Dn))(t,i).or(t).filter(Wt);return e.map(e=>((e,t,n)=>{Tn(e).each(i=>{const r=e.dom;t&&Fg(i,rl(r,0),n)?Wg(r,0,n):!t&&zg(i,rl(r,r.length),n)&&Kg(r,r.length,n)})})(e,i,r))})},Ew=(e,t,n={})=>{const i=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(n,t);B_(e,i).each(t=>{const n=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),i=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),r=i?{context:i.nodeName.toLowerCase()}:{},o=e.parser.parse(t.content,{forced_root_block:!1,...r,...t});return qf({validate:!1},e.schema).serialize(o)}return t.content})(e,t),i=e.selection.getRng();((e,t,n)=>{const i=F.from(t.firstChild).map(bn.fromDom),r=F.from(t.lastChild).map(bn.fromDom);e.deleteContents(),e.insertNode(t);const o=i.bind(Dn).filter(Wt).bind(xw),s=r.bind(In).filter(Wt).bind(xw);Cw(o,i,e,!0,n),Cw(s,r,e,!1,n),e.collapse(!1)})(i,i.createContextualFragment(n),e.schema),e.selection.setRng(i),Om(e,i),N_(e,n,t)})},Mw=(e,t,n)=>{if(Ee(e,t)){const i=K(e[t],e=>e!==n);0===i.length?delete e[t]:e[t]=i}};var Sw=(e,t)=>{let n,i;const r=(t,n)=>ee(n,n=>e.is(n,t)),o=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,s)=>(n||(n={},i={},t.on("NodeChange",e=>{const t=e.element,s=o(t),a={};ge(n,(e,t)=>{r(t,s).each(n=>{i[t]||($(e,e=>{e(!0,{node:n,selector:t,parents:s})}),i[t]=e),a[t]=e})}),ge(i,(e,n)=>{a[n]||(delete i[n],$(e,e=>{e(!1,{node:t,selector:n,parents:s})}))})})),n[e]||(n[e]=[]),n[e].push(s),r(e,o(t.selection.getStart())).each(()=>{i[e]=n[e]}),{unbind:()=>{Mw(n,e,s),Mw(i,e,s)}})}};const Tw=e=>!(!e||!e.ownerDocument)&&Cn(bn.fromDom(e.ownerDocument),bn.fromDom(e)),kw=(e,t,n,i)=>{let r,o;const{selectorChangedWithUnbind:s}=Sw(e,i),a=(e,t)=>Ew(i,e,t),l=e=>{const t=d();t.collapse(!!e),u(t)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let n;const s=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},a=t.document;if(w(i.bookmark)&&!lf(i)){const e=Qm(i);if(e.isSome())return e.map(e=>vf(i,[e])[0]).getOr(a.createRange())}try{const e=c();e&&!Vi(e.anchorNode)&&(n=e.rangeCount>0?e.getRangeAt(0):a.createRange(),n=vf(i,[n])[0])}catch(e){}if(n||(n=a.createRange()),rr(n.startContainer)&&n.collapsed){const t=e.getRoot();n.setStart(t,0),n.setEnd(t,0)}return r&&o&&(0===s(n.START_TO_START,n,r)&&0===s(n.END_TO_END,n,r)?n=o:(r=null,o=null)),n},u=(e,t)=>{if(!(e=>!!e&&Tw(e.startContainer)&&Tw(e.endContainer))(e))return;const n=c();if(e=i.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){o=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),r=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==n?void 0:n.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(t,0,t,1))}i.dispatch("AfterSetSelectionRange",{range:e,forward:t})},h=()=>{const t=c(),n=null==t?void 0:t.anchorNode,i=null==t?void 0:t.focusNode;if(!t||!n||!i||Vi(n)||Vi(i))return!0;const r=e.createRng(),o=e.createRng();try{r.setStart(n,t.anchorOffset),r.collapse(!0),o.setStart(i,t.focusOffset),o.collapse(!0)}catch(e){return!0}return r.compareBoundaryPoints(r.START_TO_START,o)<=0},p={dom:e,win:t,serializer:n,editor:i,expand:(t={type:"word"})=>u(hm(e).expand(d(),t)),collapse:l,setCursorLocation:(t,n)=>{const r=e.createRng();w(t)&&w(n)?(r.setStart(t,n),r.setEnd(t,n),u(r),l(!1)):(Ch(e,r,i.getBody(),!0),u(r))},getContent:e=>ww(i,e),setContent:a,getBookmark:(e,t)=>m.getBookmark(e,t),moveToBookmark:e=>m.moveToBookmark(e),select:(t,n)=>(((e,t,n)=>F.from(t).bind(t=>F.from(t.parentNode).map(i=>{const r=e.nodeIndex(t),o=e.createRng();return o.setStart(i,r),o.setEnd(i,r+1),n&&(Ch(e,o,t,!0),Ch(e,o,t,!1)),o})))(e,t,n).each(u),t),isCollapsed:()=>{const e=d(),t=c();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{const t=d(),n=i.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?re(n,t=>e.isEditable(t.parentElement)):hf(e,t)},isForward:h,setNode:t=>(a(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;let n=t.startContainer,i=t.endContainer;const r=t.startOffset,o=t.endOffset;let s=t.commonAncestorContainer;t.collapsed||(n===i&&o-r<2&&n.hasChildNodes()&&(s=n.childNodes[r]),er(n)&&er(i)&&(n=n.length===r?gf(n.nextSibling,!0):n.parentNode,i=0===o?gf(i.previousSibling,!1):i.parentNode,n&&n===i&&(s=n)));const a=er(s)?s.parentNode:s;return Gi(a)?a:e})(i.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:e=>mf(i.getBody(),d(),e),getEnd:e=>ff(i.getBody(),d(),e),getSelectedBlocks:(t,n)=>((e,t,n,i)=>{const r=[],o=e.getRoot(),s=e.getParent(n||mf(o,t,t.collapsed),e.isBlock),a=e.getParent(i||ff(o,t,t.collapsed),e.isBlock);if(s&&s!==o&&r.push(s),s&&a&&s!==a){let t;const n=new Hi(s,o);for(;(t=n.next())&&t!==a;)e.isBlock(t)&&r.push(t)}return a&&s!==a&&a!==o&&r.push(a),r})(e,d(),t,n),normalize:()=>{const t=d(),n=c();if(!(gh(n).length>1)&&Eh(i)){const n=cm(e,t);return n.each(e=>{u(e,h())}),n.getOr(t)}return t},selectorChanged:(e,t)=>(s(e,t),p),selectorChangedWithUnbind:s,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{w(e)?((e,t,n)=>{(e.inline?Dm:Rm)(e,t,n)})(i,e,t):Om(i,d(),t)},placeCaretAt:(e,t)=>u(tm(e,t,i.getDoc())),getBoundingClientRect:()=>{const e=d();return e.collapsed?rl.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=r=o=null,f.destroy()}},m=wp(p),f=Pp(p,i);return p.bookmarkManager=m,p.controlSelection=f,p},Lw=(e,t,n)=>((e,t)=>w(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let i;const r=e.dom;let o=t.cloneNode(!0);const s=document.implementation;if(s.createHTMLDocument){const e=s.createHTMLDocument("");Ot.each("BODY"===o.nodeName?o.childNodes:[o],t=>{e.body.appendChild(e.importNode(t,!0))}),o="BODY"!==o.nodeName?e.body.firstChild:e.body,i=r.doc,r.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:o}),i&&(r.doc=i),o})(e,t,n):t,Dw=(e,t,n)=>{-1===Ot.inArray(t,n)&&(e.addAttributeFilter(n,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.push(n))},Iw=(e,t,n,i,r)=>{const o=((e,t,n)=>qf(e,t).serialize(n))(t,n,i);return((e,t,n)=>{if(!t.no_events&&e){const i=((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n});return i.content}return n})(e,r,o)},Rw=(e,t)=>{const n=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:Ks.DOM,o=t&&t.schema?t.schema:bs(i),s=I_(i,o);((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(e,t)=>{let n=e.length;for(;n--;){const i=e[n];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(t,null)}}),e.addAttributeFilter("src,href,style",(e,i)=>{const r="data-mce-"+i,o=t.url_converter,s=t.url_converter_scope;let a=e.length;for(;a--;){const t=e[a];let l=t.attr(r);void 0!==l?(t.attr(i,l.length>0?l:null),t.attr(r,null)):(l=t.attr(i),"style"===i?l=n.serializeStyle(n.parseStyle(l),t.name):o&&(l=o.call(s,l,i,t.name)),t.attr(i,l.length>0?l:null))}}),e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const n=e[t];let i=n.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(e,t,n)=>{let i=e.length;for(;i--;){const t=e[i];if("bookmark"===t.attr("data-mce-type")&&!n.cleanup){const e=F.from(t.firstChild).exists(e=>{var t;return!Or(null!==(t=e.value)&&void 0!==t?t:"")});e?t.unwrap():t.remove()}}}),e.addNodeFilter("noscript",e=>{var t;let n=e.length;for(;n--;){const i=e[n].firstChild;i&&(i.value=as.decode(null!==(t=i.value)&&void 0!==t?t:""))}}),e.addNodeFilter("script,style",(e,n)=>{var i;const r=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let o=e.length;for(;o--;){const s=e[o],a=s.firstChild,l=null!==(i=null==a?void 0:a.value)&&void 0!==i?i:"";if("script"===n){const e=s.attr("type");e&&s.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&a&&l.length>0&&(a.value="// <![CDATA[\n"+r(l)+"\n// ]]>")}else"xhtml"===t.element_format&&a&&l.length>0&&(a.value="\x3c!--\n"+r(l)+"\n--\x3e")}}),e.addNodeFilter("#comment",e=>{let i=e.length;for(;i--;){const r=e[i],o=r.value;t.preserve_cdata&&0===(null==o?void 0:o.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=n.decode(o.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==o?void 0:o.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(o).substr(14))}}),e.addNodeFilter("xml:namespace,input",(e,t)=>{let n=e.length;for(;n--;){const i=e[n];7===i.type?i.remove():1===i.type&&("input"!==t||i.attr("type")||i.attr("type","text"))}}),e.addAttributeFilter("data-mce-type",t=>{$(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.remove_trailing_brs&&iA(t,e,e.schema)})(s,i,r);return{schema:o,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(e,n={})=>{const a={format:"html",...n},l=Lw(t,e,a),c=((e,t,n)=>{const i=Pr(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||kr(bn.fromDom(t))?i:Ot.trim(i)})(r,l,a),d=((e,t,n)=>{const i=n.selection?{forced_root_block:!1,...n}:n,r=e.parse(t,i);return(e=>{const t=e=>"br"===(null==e?void 0:e.name),n=e.lastChild;if(t(n)){const e=n.prev;t(e)&&(n.remove(),e.remove())}})(r),r})(s,c,a);return"tree"===a.format?d:Iw(t,i,o,d,a)},addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:I(Dw,s,n),getTempAttrs:k(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},Ow=(e,t)=>{const n=Rw(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Pw=(e,t={})=>{const n=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return O_(e,n).fold(L,t=>{const n=((e,t)=>bw(e).editor.getContent(t))(e,t);return P_(e,n,t)})},Bw=(e,t,n={})=>{const i=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return B_(e,i).map(t=>{const n=((e,t,n)=>bw(e).editor.setContent(t,n))(e,t.content,t);return N_(e,n.html,t),n.content}).getOr(t)},Nw="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Uw="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Fw="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),zw=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Hw=(e,t)=>{const n=K(t,t=>Ee(e,t));return le(n)},jw=e=>{const t=Hw(e,Nw),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),le(t)},Vw=e=>Hw(e,Uw),Yw=(e,t)=>{const n=Ot.makeMap(e.plugins," "),i=K(t,e=>Ee(n,e));return le(i)},Gw=e=>Yw(e,Fw),Qw=e=>Yw(e,zw.map(e=>e.name)),$w=e=>ee(zw,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),qw=(e,t)=>{((e,t)=>{const n=jw(e),i=Gw(t),r=i.length>0,o=n.length>0,s="mobile"===t.theme;if(r||o||s){const e="\n- ",t=s?`\n\nThemes:${e}mobile`:"",a=r?`\n\nPlugins:${e}${i.join(e)}`:"",l=o?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+a+l)}})(e,t),((e,t)=>{const n=Vw(e),i=Qw(t),r=i.length>0,o=n.length>0;if(r||o){const e="\n- ",t=r?`\n\nPlugins:${e}${i.map($w).join(e)}`:"",s=o?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+t+s)}})(e,t)},Ww=Ks.DOM,Kw=e=>F.from(e).each(e=>e.destroy()),Zw=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,i=e.getBody(),r=e.getElement();i&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&w(null==r?void 0:r.nextSibling)&&Ww.remove(r.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&i&&(e=>{Ww.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),Ww.remove(e.getContainer()),Kw(t),Kw(n),e.destroy()}},Xw=(e,t)=>{const{selection:n,dom:i}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Kw(n),Kw(i)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Ww.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}})(e),e.destroyed=!0):e.remove())},Jw=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Ee(e,t)}})(),ex=ra.ModelManager,tx=(e,t)=>t.dom[e],nx=(e,t)=>parseInt(ci(t,e),10),ix=I(tx,"clientWidth"),rx=I(tx,"clientHeight"),ox=I(nx,"margin-top"),sx=I(nx,"margin-left"),ax=(e,t,n)=>{const i=bn.fromDom(e.getBody()),r=e.inline?i:(o=i,bn.fromDom(Mn(o).dom.documentElement));var o;const s=((e,t,n,i)=>{const r=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?r.left+t.dom.clientLeft+sx(t):0),y:i-(e?r.top+t.dom.clientTop+ox(t):0)}})(e.inline,r,t,n);return((e,t,n)=>{const i=ix(e),r=rx(e);return t>=0&&n>=0&&t<=i&&n<=r})(r,s.x,s.y)},lx=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return(n=t,F.from(n).map(bn.fromDom)).map(qn).getOr(!1);var n};const cx=e=>{const t=[],n=()=>{const t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},i=()=>F.from(t[0]),r=()=>{$(t,e=>{e.reposition()})},o=e=>{te(t,t=>t===e).each(e=>{t.splice(e,1)})},s=(s,a=!0)=>e.removed||!lx(e)?{}:(a&&e.dispatch("BeforeOpenNotification",{notification:s}),ee(t,e=>{return t=n().getArgs(e),i=s,!(t.type!==i.type||t.text!==i.text||t.progressBar||t.timeout||i.progressBar||i.timeout);var t,i}).getOrThunk(()=>{e.editorManager.setActive(e);const a=n().open(s,()=>{o(a),r(),cf(e)&&i().fold(()=>e.focus(),e=>Pm(bn.fromDom(e.getEl())))});return(e=>{t.push(e)})(a),r(),e.dispatch("OpenNotification",{notification:{...a}}),a})),a=k(t);return(e=>{e.on("SkinLoaded",()=>{const t=Tc(e);t&&s({text:t,type:"warning",timeout:0},!1),r()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),e.on("remove",()=>{$(t.slice(),e=>{n().close(e)})})})(e),{open:s,close:()=>{i().each(e=>{n().close(e),o(e),r()})},getNotifications:a}},dx=ra.PluginManager,ux=ra.ThemeManager;const hx=e=>{let t=[];const n=()=>{const t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},i=(e,t)=>(...n)=>t?t.apply(e,n):void 0,r=n=>{t.push(n),(t=>{e.dispatch("OpenWindow",{dialog:t})})(n)},o=n=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(n),t=K(t,e=>e!==n),0===t.length&&e.focus()},s=t=>{e.editorManager.setActive(e),Gm(e),e.ui.show();const n=t();return r(n),n};return e.on("remove",()=>{$(t,e=>{n().close(e)})}),{open:(e,t)=>s(()=>n().open(e,t,o)),openUrl:e=>s(()=>n().openUrl(e,o)),alert:(e,t,r)=>{const o=n();o.alert(e,i(r||o,t))},confirm:(e,t,r)=>{const o=n();o.confirm(e,i(r||o,t))},close:()=>{F.from(t[t.length-1]).each(e=>{n().close(e),o(e)})}}},px=(e,t)=>{e.notificationManager.open({type:"error",text:t})},mx=(e,t)=>{e._skinLoaded?px(e,t):e.on("SkinLoaded",()=>{px(e,t)})},fx=(e,t,n)=>{Cp(e,t,{message:n}),console.error(n)},gx=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,vx=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},yx=e=>"content/"+e+"/content.css",bx=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",i=`content${e.editorManager.suffix}.css`;return Q(t,t=>(e=>tinymce.Resource.has(yx(e)))(t)?t:(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?`${n}/${t}/${i}`:e.documentBaseURI.toAbsolute(t))},Ax=e=>{e.contentCSS=e.contentCSS.concat((e=>bx(e,bc(e)))(e),(e=>bx(e,_c(e)))(e))},_x=(e,t)=>{const n={};return{findAll:(i,r=U)=>{const o=K((e=>e?he(e.getElementsByTagName("img")):[])(i),t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===Lt.transparentSrc)&&(Ye(n,"blob:")?!e.isUploaded(n)&&r(t):!!Ye(n,"data:")&&r(t))))}),s=Q(o,e=>{const i=e.src;if(Ee(n,i))return n[i].then(t=>m(t)?t:{image:e,blobInfo:t.blobInfo});{const r=((e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(Ye(t,"blob:")){const i=e.getByUri(t);return w(i)?Promise.resolve(i):sA(t).then(t=>aA(t).then(i=>cA(i,!1,n=>F.some(dA(e,t,n))).getOrThunk(n)))}return Ye(t,"data:")?uA(e,t).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(t,i).then(t=>(delete n[i],{image:e,blobInfo:t})).catch(e=>(delete n[i],e));return n[i]=r,r}});return Promise.all(s)}}},wx=()=>{let e={};const t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:t=>!!n(t)&&1===e[t].status,isUploaded:t=>!!n(t)&&2===e[t].status,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,i)=>{e[n]=t(2,i)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let xx=0;const Cx=e=>e+xx+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),Ex=(e,t)=>{const n={},i=(e,n)=>new Promise((i,r)=>{const o=new XMLHttpRequest;o.open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=e=>{n(e.loaded/e.total*100)},o.onerror=()=>{r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{if(o.status<200||o.status>=300)return void r("HTTP Error: "+o.status);const e=JSON.parse(o.responseText);var n,s;e&&m(e.location)?i((n=t.basePath,s=e.location,n?n.replace(/\/$/,"")+"/"+s.replace(/^\//,""):s)):r("Invalid JSON: "+o.responseText)};const s=new FormData;s.append("file",e.blob(),e.filename()),o.send(s)}),r=x(t.handler)?t.handler:i,o=(e,t)=>({url:t,blobInfo:e,status:!0}),s=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),a=(e,t)=>{Ot.each(n[e],e=>{e(t)}),delete n[e]},l=(t,i)=>(t=Ot.grep(t,t=>!e.isUploaded(t.blobUri())),Promise.all(Ot.map(t,t=>e.isPending(t.blobUri())?(e=>{const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})})(t):((t,n,i)=>(e.markPending(t.blobUri()),new Promise(r=>{let l,c;try{const d=()=>{l&&(l.close(),c=M)},u=n=>{d(),e.markUploaded(t.blobUri(),n),a(t.blobUri(),o(t,n)),r(o(t,n))},h=n=>{d(),e.removeFailed(t.blobUri()),a(t.blobUri(),s(t,n)),r(s(t,n))};c=e=>{e<0||e>100||F.from(l).orThunk(()=>F.from(i).map(P)).each(t=>{l=t,t.progressBar.value(e)})},n(t,c).then(u,e=>{h(m(e)?{message:e}:e)})}catch(e){r(s(t,e))}})))(t,r,i))));return{upload:(e,n)=>t.url||r!==i?l(e,n):new Promise(e=>{e([])})}},Mx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Sx=(e,t)=>Ex(t,{url:cc(e),basePath:dc(e),credentials:uc(e),handler:hc(e)}),Tx=e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&w(e.schema.getTextBlockElements()[Yt(t)]))(e,t)&&vi(t,bn.fromHtml('<br data-mce-bogus="1" />'))},kx=e=>{const t=(()=>{let e=[];const t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const t=e.id||Cx("blobid"),n=e.name||t,i=e.blob;return{id:k(t),name:k(n),filename:k(e.filename||n+"."+(r=i.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.toLowerCase()]||"dat")),blob:k(i),base64:k(e.base64),blobUri:k(e.blobUri||URL.createObjectURL(i)),uri:k(e.uri)};var r},n=t=>ee(e,t).getOrUndefined(),i=e=>n(t=>t.id()===e);return{create:(e,n,i,r,o)=>{if(m(e))return t({id:e,name:r,filename:o,blob:n,base64:i});if(f(e))return t(e);throw new Error("Unknown input type")},add:t=>{i(t.id())||e.push(t)},get:i,getByUri:e=>n(t=>t.blobUri()===e),getByData:(e,t)=>n(n=>n.base64()===e&&n.blob().type===t),findFirst:n,removeByUri:t=>{e=K(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{$(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}})();let n,i;const r=wx(),o=[],s=t=>n=>e.selection?t(n):[],a=(e,t,n)=>{let i=0;do{i=e.indexOf(t,i),-1!==i&&(e=e.substring(0,i)+n+e.substr(i+t.length),i+=n.length-t.length+1)}while(-1!==i);return e},l=(e,t,n)=>{const i=`src="${n}"${n===Lt.transparentSrc?' data-mce-placeholder="1"':""}`;return e=a(e,`src="${t}"`,i),e=a(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=(t,n)=>{$(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=Q(e.fragments,e=>l(e,t,n)):e.content=l(e.content,t,n)})},d=()=>(n||(n=Sx(e,r)),p().then(s(i=>{const r=Q(i,e=>e.blobInfo);return n.upload(r,Mx(e)).then(s(n=>{const r=[];let o=!1;const s=Q(n,(n,s)=>{const{blobInfo:a,image:l}=i[s];let d=!1;return n.status&&sc(e)?(n.url&&!Ve(l.src,n.url)&&(o=!0),t.removeByUri(l.src),vw(e)||((t,n)=>{const i=e.convertURL(n,"src");var r;c(t.src,n),tn(bn.fromDom(t),{src:oc(e)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":i})})(l,n.url)):n.error&&(n.error.remove&&(c(l.src,Lt.transparentSrc),r.push(l),d=!0),((e,t)=>{mx(e,ia.translate(["Failed to upload image: {0}",t]))})(e,n.error.message)),{element:l,status:n.status,uploadUri:n.url,blobInfo:a,removed:d}});return r.length>0&&!vw(e)?e.undoManager.transact(()=>{$(xi(r),n=>{const i=Tn(n);_i(n),i.each(Tx(e)),t.removeByUri(n.dom.src)})}):o&&e.undoManager.dispatchChange(),s}))}))),u=()=>rc(e)?d():Promise.resolve([]),h=e=>re(o,t=>t(e)),p=()=>(i||(i=_x(r,t)),i.findAll(e.getBody(),h).then(s(t=>{const n=K(t,t=>m(t)?(mx(e,t),!1):"blob"!==t.uriType);return vw(e)||$(n,e=>{c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),n}))),g=n=>n.replace(/src="(blob:[^"]+)"/g,(n,i)=>{const o=r.getResultUri(i);if(o)return'src="'+o+'"';let s=t.getByUri(i);if(s||(s=X(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(i),void 0)),s){return'src="data:'+s.blob().type+";base64,"+s.base64()+'"'}return n});return e.on("SetContent",()=>{rc(e)?u():p()}),e.on("RawSaveContent",e=>{e.content=g(e.content)}),e.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=g(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{$(e,e=>{const n=e.attr("src");if(!n||t.getByUri(n))return;const i=r.getResultUri(n);i&&e.attr("src",i)})})}),{blobCache:t,addFilter:e=>{o.push(e)},uploadImages:d,uploadImagesAuto:u,scanForImages:p,destroy:()=>{t.destroy(),r.destroy(),i=n=null}}},Lx={remove_similar:!0,inherit:!1},Dx={selector:"td,th",...Lx},Ix={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Dx},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Dx},tablecellbordercolor:{styles:{borderColor:"%value"},...Dx},tablecellclass:{classes:["%value"],...Dx},tableclass:{selector:"table",classes:["%value"],...Lx},tablecellborderstyle:{styles:{borderStyle:"%value"},...Dx},tablecellborderwidth:{styles:{borderWidth:"%value"},...Dx}},Rx=k(Ix),Ox=e=>{const t={},n=(e,i)=>{e&&(m(e)?(v(i)||(i=[i]),$(i,e=>{A(e.deep)&&(e.deep=!Qh(e)),A(e.split)&&(e.split=!Qh(e)||$h(e)),A(e.remove)&&Qh(e)&&!$h(e)&&(e.remove="none"),Qh(e)&&$h(e)&&(e.mixed=!0,e.block_expand=!0),m(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=i):ge(e,(e,t)=>{n(t,e)}))};return n((e=>{const t=e.dom,n=e.schema.type,i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[i,e,t]:[e,i,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,n)=>Yi(e)&&e.hasAttribute("href"),onformat:(e,n,i)=>{Ot.each(i,(n,i)=>{t.setAttrib(e,i,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ot.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{i[e]={block:e,remove:"all"}}),i})(e)),n(Rx()),n(Oc(e)),{get:e=>w(e)?t[e]:t,has:e=>Ee(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}},Px=Ot.each,Bx=Ks.DOM,Nx=e=>w(e)&&f(e),Ux=(e,t)=>{const n=t&&t.schema||bs({}),i=e=>{const t=m(e)?{name:e,classes:[],attrs:{}}:e,n=Bx.create(t.name);return((e,t)=>{t.classes.length>0&&Bx.addClass(e,t.classes.join(" ")),Bx.setAttribs(e,t.attrs)})(n,t),n},r=(e,t,o)=>{let s;const a=t[0],l=Nx(a)?a.name:void 0,c=((e,t)=>{const i=n.getElementRule(e.nodeName.toLowerCase()),r=null==i?void 0:i.parentsRequired;return!(!r||!r.length)&&(t&&Y(r,t)?t:r[0])})(e,l);if(c)l===c?(s=a,t=t.slice(1)):s=c;else if(a)s=a,t=t.slice(1);else if(!o)return e;const d=s?i(s):Bx.create("div");d.appendChild(e),o&&Ot.each(o,t=>{const n=i(t);d.insertBefore(n,e)});const u=Nx(s)?s.siblings:void 0;return r(d,t,u)},o=Bx.create("div");if(e.length>0){const t=e[0],n=i(t),s=Nx(t)?t.siblings:void 0;o.appendChild(r(n,e.slice(1),s))}return o},Fx=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Ot.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,i,r,o)=>{switch(t){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Ot.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===r){const e=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return""})),n.name=t||"div",n},zx=(e,t)=>{let n="",i=Pc(e);if(""===i)return"";const r=e=>m(e)?e.replace(/%(\w+)/g,""):"",o=(t,n)=>Bx.getStyle(null!=n?n:e.getBody(),t,!0);if(m(t)){const n=e.formatter.get(t);if(!n)return"";t=n[0]}if("preview"in t){const e=t.preview;if(!1===e)return"";i=e||i}let s,a=t.block||t.inline||"span";const l=(c=t.selector,m(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ot.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{const t=Ot.map(e.split(/(?:~\+|~|\+)/),Fx),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=a),a=t.selector,s=Ux(l,e)):s=Ux([a],e);const d=Bx.select(a,s)[0]||s.firstChild;Px(t.styles,(e,t)=>{const n=r(e);n&&Bx.setStyle(d,t,n)}),Px(t.attributes,(e,t)=>{const n=r(e);n&&Bx.setAttrib(d,t,n)}),Px(t.classes,e=>{const t=r(e);Bx.hasClass(d,t)||Bx.addClass(d,t)}),e.dispatch("PreviewFormats"),Bx.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);const u=o("fontSize"),h=/px$/.test(u)?parseInt(u,10):0;return Px(i.split(" "),e=>{let t=o(e,d);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=o(e),"#ffffff"===ks(t).toLowerCase())||"color"===e&&"#000000"===ks(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===h)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*h+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),Bx.remove(s),n},Hx=e=>{const t=Ox(e),n=Js({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),tb(e),vw(e)||((e,t)=>{e.set({}),t.on("NodeChange",n=>{Zb(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const i=F.from(n.node).map(e=>Th(e)?e:e.startContainer).bind(e=>Yi(e)?F.some(e):F.from(e.parentElement)).getOrThunk(()=>qb(t));Zb(t,i,e.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,i)=>{((e,t,n,i)=>{Aw(e).formatter.apply(t,n,i)})(e,t,n,i)},remove:(t,n,i,r)=>{((e,t,n,i,r)=>{Aw(e).formatter.remove(t,n,i,r)})(e,t,n,i,r)},toggle:(t,n,i)=>{((e,t,n,i)=>{Aw(e).formatter.toggle(t,n,i)})(e,t,n,i)},match:(t,n,i,r)=>((e,t,n,i,r)=>Aw(e).formatter.match(t,n,i,r))(e,t,n,i,r),closest:t=>((e,t)=>Aw(e).formatter.closest(t))(e,t),matchAll:(t,n)=>((e,t,n)=>Aw(e).formatter.matchAll(t,n))(e,t,n),matchNode:(t,n,i,r)=>((e,t,n,i,r)=>Aw(e).formatter.matchNode(t,n,i,r))(e,t,n,i,r),canApply:t=>((e,t)=>Aw(e).formatter.canApply(t))(e,t),formatChanged:(t,i,r,o)=>((e,t,n,i,r,o)=>Aw(e).formatter.formatChanged(t,n,i,r,o))(e,n,t,i,r,o),getCssText:I(zx,e)}},jx=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Vx=e=>{const t=sa(),n=Js(0),i=Js(0),r={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{Aw(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(o,s)=>((e,t,n,i,r,o,s)=>Aw(e).undoManager.add(t,n,i,r,o,s))(e,r,i,n,t,o,s),dispatchChange:()=>{e.setDirty(!0);const t=lw(e);t.bookmark=Ml(e.selection),e.dispatch("change",{level:t,lastLevel:ce(r.data,i.get()).getOrUndefined()})},undo:()=>((e,t,n,i)=>Aw(e).undoManager.undo(t,n,i))(e,r,n,i),redo:()=>((e,t,n)=>Aw(e).undoManager.redo(t,n))(e,i,r.data),clear:()=>{((e,t,n)=>{Aw(e).undoManager.clear(t,n)})(e,r,i)},reset:()=>{((e,t)=>{Aw(e).undoManager.reset(t)})(e,r)},hasUndo:()=>((e,t,n)=>Aw(e).undoManager.hasUndo(t,n))(e,r,i),hasRedo:()=>((e,t,n)=>Aw(e).undoManager.hasRedo(t,n))(e,r,i),transact:t=>((e,t,n,i)=>Aw(e).undoManager.transact(t,n,i))(e,r,n,t),ignore:t=>{((e,t,n)=>{Aw(e).undoManager.ignore(t,n)})(e,n,t)},extra:(t,n)=>{((e,t,n,i,r)=>{Aw(e).undoManager.extra(t,n,i,r)})(e,r,i,t,n)}};return vw(e)||((e,t,n)=>{const i=Js(!1),r=e=>{mw(t,!1,n),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{const i=e.command;jx(i)||(fw(t,n),t.beforeChange())}),e.on("ExecCommand",e=>{const t=e.command;jx(t)||r(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",r),e.on("dragend",r),e.on("keyup",n=>{const o=n.keyCode;if(n.isDefaultPrevented())return;const s=Lt.os.isMacOS()&&"Meta"===n.key;(o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey||s)&&(r(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),i.get()&&t.typing&&!hw(lw(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),i.set(!1),e.nodeChanged())}),e.on("keydown",e=>{const o=e.keyCode;if(e.isDefaultPrevented())return;if(o>=33&&o<=36||o>=37&&o<=40||45===o)return void(t.typing&&r(e));const s=e.ctrlKey&&!e.altKey||e.metaKey;if((o<16||o>20)&&224!==o&&91!==o&&!t.typing&&!s)return t.beforeChange(),mw(t,!0,n),t.add({},e),void i.set(!0);(Lt.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}),e.on("mousedown",e=>{t.typing&&r(e)}),e.on("input",e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&r(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})})(e,r,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},Yx=[9,27,Lp.HOME,Lp.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Lp.DOWN,Lp.UP,Lp.LEFT,Lp.RIGHT].concat(Lt.browser.isFirefox()?[224]:[]),Gx="data-mce-placeholder",Qx=e=>"keydown"===e.type||"keyup"===e.type,$x=e=>{const t=e.keyCode;return t===Lp.BACKSPACE||t===Lp.DELETE},qx=e=>{var t;const n=e.dom,i=Zl(e),r=null!==(t=Mc(e))&&void 0!==t?t:"",o=(t,s)=>{if((e=>{if(Qx(e)){const t=e.keyCode;return!$x(e)&&(Lp.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Y(Yx,t))}return!1})(t))return;const a=e.getBody(),l=!(e=>Qx(e)&&!($x(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,n)=>{if(bo(bn.fromDom(t),!1)){const i=t.firstElementChild;return!i||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===i.nodeName.toLowerCase()}return!1})(n,a,i);(""!==n.getAttrib(a,Gx)!==l||s)&&(n.setAttrib(a,Gx,l?r:null),n.setAttrib(a,"aria-placeholder",l?r:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",o),e.off(l?"keyup":"keydown",o))};Ke(r)&&e.on("init",t=>{o(t,!0),e.on("change SetContent ExecCommand",o),e.on("paste",t=>qm.setEditorTimeout(e,()=>o(t)))})},Wx=(e,t)=>({from:e,to:t}),Kx=(e,t)=>{const n=bn.fromDom(e),i=bn.fromDom(t.container());return yv(n,i).map(e=>((e,t)=>({block:e,position:t}))(e,t))},Zx=(e,t)=>Zn(t,e=>Tr(e)||lr(e.dom),t=>xn(t,e)).filter(qt).getOr(e),Xx=(e,t,n)=>{const i=Kx(e,rl.fromRangeStart(n)),r=i.bind(n=>ju(t,e,n.position).bind(n=>Kx(e,n).map(n=>((e,t,n)=>sr(n.position.getNode())&&!bo(n.block)?Gu(!1,n.block.dom).bind(i=>i.isEqual(n.position)?ju(t,e,i).bind(t=>Kx(e,t)):F.some(n)).getOr(n):n)(e,t,n))));return Nt(i,r,Wx).filter(t=>(e=>!xn(e.from.block,e.to.block))(t)&&((e,t)=>{const n=bn.fromDom(e);return xn(Zx(n,t.from.block),Zx(n,t.to.block))})(e,t)&&(e=>!1===cr(e.from.block.dom)&&!1===cr(e.to.block.dom))(t)&&(e=>{const t=e=>Cr(e)||Io(e.dom);return t(e.from.block)&&t(e.to.block)})(t))},Jx=(e,t)=>{const n=((e,t)=>{const n=Pn(e);return te(n,e=>t.isBlock(Yt(e))).fold(k(n),e=>n.slice(0,e))})(e,t);return $(n,_i),n},eC=(e,t)=>{const n=gg(t,e);return ee(n.reverse(),e=>bo(e)).each(_i)},tC=(e,t,n,i,r)=>{if(bo(n))return Ir(n),qu(n.dom);0===K(Rn(r),e=>!bo(e)).length&&bo(t)&&mi(r,bn.fromTag("br"));const o=$u(n.dom,rl.before(r.dom));return $(Jx(t,i),e=>{mi(r,e)}),eC(e,t),o},nC=(e,t,n,i)=>{if(bo(n)){if(bo(t)){const e=e=>{const t=(e,n)=>Nn(e).fold(()=>n,e=>((e,t)=>e.isInline(Yt(t)))(i,e)?t(e,n.concat(Ca(e))):n);return t(e,[])},r=Z(e(n),(e,t)=>(yi(e,t),t),Dr());Ai(t),vi(t,r)}return _i(n),qu(t.dom)}const r=Wu(n.dom);return $(Jx(t,i),e=>{vi(n,e)}),eC(e,t),r},iC=(e,t)=>Cn(t,e)?((e,t)=>{const n=gg(t,e);return F.from(n[n.length-1])})(t,e):F.none(),rC=(e,t)=>{Gu(e,t.dom).bind(e=>F.from(e.getNode())).map(bn.fromDom).filter(xr).each(_i)},oC=(e,t,n,i)=>(rC(!0,t),rC(!1,n),iC(t,n).fold(I(nC,e,t,n,i),I(tC,e,t,n,i))),sC=(e,t,n,i,r)=>t?oC(e,i,n,r):oC(e,n,i,r),aC=(e,t)=>{const n=bn.fromDom(e.getBody()),i=((e,t,n)=>n.collapsed?Xx(e,t,n):F.none())(n.dom,t,e.selection.getRng()).map(i=>()=>{sC(n,t,i.from.block,i.to.block,e.schema).each(t=>{e.selection.setRng(t.toRange())})});return i},lC=(e,t)=>{const n=bn.fromDom(t),i=I(xn,e);return Kn(n,Tr,i).isSome()},cC=(e,t)=>{const n=$u(e.dom,rl.fromRangeStart(t)).isNone(),i=Qu(e.dom,rl.fromRangeEnd(t)).isNone();return!((e,t)=>lC(e,t.startContainer)||lC(e,t.endContainer))(e,t)&&n&&i},dC=e=>{const t=bn.fromDom(e.getBody()),n=e.selection.getRng();return cC(t,n)?(e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}))(e):((e,t,n)=>{const i=t.getRng();return Nt(yv(e,bn.fromDom(i.startContainer)),yv(e,bn.fromDom(i.endContainer)),(r,o)=>xn(r,o)?F.none():F.some(()=>{i.deleteContents(),sC(e,!0,r,o,n).each(e=>{t.setRng(e.toRange())})})).getOr(F.none())})(t,e.selection,e.schema)},uC=(e,t)=>e.selection.isCollapsed()?F.none():dC(e),hC=(e,t,n,i,r)=>F.from(t._selectionOverrides.showCaret(e,n,i,r)),pC=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?F.none():F.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),mC=(e,t,n)=>t.collapsed?((e,t,n)=>{const i=Au(1,e.getBody(),t),r=rl.fromRangeStart(i),o=r.getNode();if(Zd(o))return hC(1,e,o,!r.isAtEnd(),!1);const s=r.getNode(!0);if(Zd(s))return hC(1,e,s,!1,!1);const a=ny(e.dom.getRoot(),r.getNode());return Zd(a)?hC(1,e,a,!1,n):F.none()})(e,t,n).getOr(t):t,fC=e=>pg(e)||cg(e),gC=e=>mg(e)||dg(e),vC=(e,t,n,i,r,o)=>{hC(i,e,o.getNode(!r),r,!0).each(n=>{if(t.collapsed){const e=t.cloneRange();r?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),((e,t)=>{er(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},yC=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!er(n.commonAncestorContainer))return F.none();const i=t?Mu.Forwards:Mu.Backwards,r=Nu(e.getBody()),o=I(Cu,t?r.next:r.prev),s=t?fC:gC,a=wu(i,e.getBody(),n),l=o(a),c=l?hv(t,l):l;if(!c||!Eu(a,c))return F.none();if(s(c))return F.some(()=>vC(e,n,a.getNode(),i,t,c));const d=o(c);return d&&s(d)&&Eu(c,d)?F.some(()=>vC(e,n,a.getNode(),i,t,d)):F.none()})(e,t),bC=(e,t)=>{const n=e.getBody();return t?qu(n).filter(pg):Wu(n).filter(mg)},AC=e=>{const t=e.selection.getRng();return!t.collapsed&&(bC(e,!0).exists(e=>e.isEqual(rl.fromRangeStart(t)))||bC(e,!1).exists(e=>e.isEqual(rl.fromRangeEnd(t))))},_C=Ll([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),wC=(e,t,n,i)=>{const r=i.getNode(!t);return yv(bn.fromDom(e),bn.fromDom(n.getNode())).map(e=>bo(e)?_C.remove(e.dom):_C.moveToElement(r)).orThunk(()=>F.some(_C.moveToElement(r)))},xC=(e,t,n,i)=>ju(t,e,n).bind(r=>{return o=r.getNode(),w(o)&&(Tr(bn.fromDom(o))||Mr(bn.fromDom(o)))||((e,t,n,i,r)=>{const o=t=>r.isInline(t.nodeName.toLowerCase())&&!pu(n,i,e);return _u(!t,n).fold(()=>_u(t,i).fold(N,o),o)})(e,t,n,r,i)?F.none():t&&cr(r.getNode())||!t&&cr(r.getNode(!0))?wC(e,t,n,r):t&&mg(n)||!t&&pg(n)?F.some(_C.moveToPosition(r)):F.none();var o}),CC=(e,t,n,i)=>((e,t)=>{const n=t.getNode(!e),i=e?"after":"before";return Yi(n)&&n.getAttribute("data-mce-caret")===i})(t,n)?((e,t)=>_(t)?F.none():e&&cr(t.nextSibling)?F.some(_C.moveToElement(t.nextSibling)):!e&&cr(t.previousSibling)?F.some(_C.moveToElement(t.previousSibling)):F.none())(t,n.getNode(!t)).orThunk(()=>xC(e,t,n,i)):xC(e,t,n,i).bind(t=>((e,t,n)=>n.fold(e=>F.some(_C.remove(e)),e=>F.some(_C.moveToElement(e)),n=>pu(t,n,e)?F.none():F.some(_C.moveToPosition(n))))(e,n,t)),EC=(e,t)=>F.from(ny(e.getBody(),t)),MC=(e,t)=>{const n=e.selection.getNode();return EC(e,n).filter(cr).fold(()=>((e,t,n,i)=>{const r=Au(t?1:-1,e,n),o=rl.fromRangeStart(r),s=bn.fromDom(e);return!t&&mg(o)?F.some(_C.remove(o.getNode(!0))):t&&pg(o)?F.some(_C.remove(o.getNode())):!t&&pg(o)&&Tg(s,o,i)?kg(s,o,i).map(e=>_C.remove(e.getNode())):t&&mg(o)&&Sg(s,o,i)?Lg(s,o,i).map(e=>_C.remove(e.getNode())):CC(e,t,o,i)})(e.getBody(),t,e.selection.getRng(),e.schema).map(n=>()=>n.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),av(e,t,bn.fromDom(n)),!0))(e,t),((e,t)=>n=>{const i=t?rl.before(n):rl.after(n);return e.selection.setRng(i.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))),()=>F.some(M))},SC=(e,t)=>{const n=e.selection.getNode();if(cr(n)&&!dr(n)){return EC(e,n.parentNode).filter(cr).fold(()=>F.some(()=>{var n;n=bn.fromDom(e.getBody()),$(Fi(n,".mce-offscreen-selection"),_i),av(e,t,bn.fromDom(e.selection.getNode())),bv(e)}),()=>F.some(M))}return AC(e)?F.some(()=>{wv(e,e.selection.getRng(),bn.fromDom(e.getBody()))}):F.none()},TC=e=>{const t=e.dom,n=e.selection,i=ny(e.getBody(),n.getNode());if(lr(i)&&t.isBlock(i)&&t.isEmpty(i)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(i,""),i.appendChild(e),n.setRng(rl.before(e).toRange())}return!0},kC=(e,t)=>e.selection.isCollapsed()?MC(e,t):SC(e,t),LC=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=rl.fromRangeStart(e.selection.getRng());return ju(t,e.getBody(),n).filter(e=>t?ag(e):lg(e)).bind(e=>mu(t?0:-1,e)).map(t=>()=>e.selection.select(t))})(e,t):F.none(),DC=er,IC=e=>DC(e)&&e.data[0]===Rr,RC=e=>DC(e)&&e.data[e.data.length-1]===Rr,OC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Rr)},PC=(e,t)=>e?(e=>{var t;if(DC(e.previousSibling))return RC(e.previousSibling)||e.previousSibling.appendData(Rr),e.previousSibling;if(DC(e))return IC(e)||e.insertData(0,Rr),e;{const n=OC(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}})(t):(e=>{var t,n;if(DC(e.nextSibling))return IC(e.nextSibling)||e.nextSibling.insertData(0,Rr),e.nextSibling;if(DC(e))return RC(e)||e.appendData(Rr),e;{const i=OC(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(i,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(i),i}})(t),BC=I(PC,!0),NC=I(PC,!1),UC=(e,t)=>er(e.container())?PC(t,e.container()):PC(t,e.getNode()),FC=(e,t)=>{const n=t.get();return n&&e.container()===n&&Fr(n)},zC=(e,t)=>t.fold(t=>{Yd(e.get());const n=BC(t);return e.set(n),F.some(rl(n,n.length-1))},t=>qu(t).map(t=>{if(FC(t,e)){const t=e.get();return rl(t,1)}{Yd(e.get());const n=UC(t,!0);return e.set(n),rl(n,1)}}),t=>Wu(t).map(t=>{if(FC(t,e)){const t=e.get();return rl(t,t.length-1)}{Yd(e.get());const n=UC(t,!1);return e.set(n),rl(n,n.length-1)}}),t=>{Yd(e.get());const n=NC(t);return e.set(n),F.some(rl(n,1))}),HC=(e,t)=>{for(let n=0;n<e.length;n++){const i=e[n].apply(null,t);if(i.isSome())return i}return F.none()},jC=Ll([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),VC=(e,t)=>{const n=hu(t,e);return n||e},YC=(e,t,n)=>{const i=pv(n),r=VC(t,i.container());return uv(e,r,i).fold(()=>Qu(r,i).bind(I(uv,e,r)).map(e=>jC.before(e)),F.none)},GC=(e,t)=>null===Xu(e,t),QC=(e,t,n)=>uv(e,t,n).filter(I(GC,t)),$C=(e,t,n)=>{const i=mv(n);return QC(e,t,i).bind(e=>$u(e,i).isNone()?F.some(jC.start(e)):F.none())},qC=(e,t,n)=>{const i=pv(n);return QC(e,t,i).bind(e=>Qu(e,i).isNone()?F.some(jC.end(e)):F.none())},WC=(e,t,n)=>{const i=mv(n),r=VC(t,i.container());return uv(e,r,i).fold(()=>$u(r,i).bind(I(uv,e,r)).map(e=>jC.after(e)),F.none)},KC=e=>!dv(XC(e)),ZC=(e,t,n)=>HC([YC,$C,qC,WC],[e,t,n]).filter(KC),XC=e=>e.fold(L,L,L,L),JC=e=>e.fold(k("before"),k("start"),k("end"),k("after")),eE=e=>e.fold(jC.before,jC.before,jC.after,jC.after),tE=e=>e.fold(jC.start,jC.start,jC.end,jC.end),nE=(e,t,n,i,r,o)=>Nt(uv(t,n,i),uv(t,n,r),(t,i)=>t!==i&&((e,t,n)=>{const i=hu(t,e),r=hu(n,e);return w(i)&&i===r})(n,t,i)?jC.after(e?t:i):o).getOr(o),iE=(e,t)=>e.fold(U,e=>{return i=t,!(JC(n=e)===JC(i)&&XC(n)===XC(i));var n,i}),rE=(e,t)=>e?t.fold(S(F.some,jC.start),F.none,S(F.some,jC.after),F.none):t.fold(F.none,S(F.some,jC.before),F.none,S(F.some,jC.end)),oE=(e,t,n,i)=>{const r=hv(e,i),o=ZC(t,n,r);return ZC(t,n,r).bind(I(rE,e)).orThunk(()=>((e,t,n,i,r)=>{const o=hv(e,r);return ju(e,n,o).map(I(hv,e)).fold(()=>i.map(eE),r=>ZC(t,n,r).map(I(nE,e,t,n,o,r)).filter(I(iE,i))).filter(KC)})(e,t,n,o,i))},sE=(e,t,n)=>{const i=e?1:-1;return t.setRng(rl(n.container(),n.offset()+i).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},aE=(e,t)=>{const n=t.selection.getRng(),i=e?rl.fromRangeEnd(n):rl.fromRangeStart(n);return!!(e=>x(e.selection.getSel().modify))(t)&&(e&&jr(i)?sE(!0,t.selection,i):!(e||!Vr(i))&&sE(!1,t.selection,i))};var lE;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(lE||(lE={}));const cE=(e,t)=>e===Mu.Backwards?oe(t):t,dE=(e,t,n)=>e===Mu.Forwards?t.next(n):t.prev(n),uE=(e,t,n,i)=>sr(i.getNode(t===Mu.Forwards))?lE.Br:!1===pu(n,i)?lE.Block:lE.Wrap,hE=(e,t,n,i)=>{const r=Nu(n);let o=i;const s=[];for(;o;){const n=dE(t,r,o);if(!n)break;if(sr(n.getNode(!1)))return t===Mu.Forwards?{positions:cE(t,s).concat([n]),breakType:lE.Br,breakAt:F.some(n)}:{positions:cE(t,s),breakType:lE.Br,breakAt:F.some(n)};if(n.isVisible()){if(e(o,n)){const e=uE(0,t,o,n);return{positions:cE(t,s),breakType:e,breakAt:F.some(n)}}s.push(n),o=n}else o=n}return{positions:cE(t,s),breakType:lE.Eol,breakAt:F.none()}},pE=(e,t,n,i)=>t(n,i).breakAt.map(i=>{const r=t(n,i).positions;return e===Mu.Backwards?r.concat(i):[i].concat(r)}).getOr([]),mE=(e,t)=>X(e,(e,n)=>e.fold(()=>F.some(n),i=>Nt(de(i.getClientRects()),de(n.getClientRects()),(e,r)=>{const o=Math.abs(t-e.left);return Math.abs(t-r.left)<=o?n:i}).or(e)),F.none()),fE=(e,t)=>de(t.getClientRects()).bind(t=>mE(e,t.left)),gE=I(hE,rl.isAbove,-1),vE=I(hE,rl.isBelow,1),yE=I(pE,-1,gE),bE=I(pE,1,vE),AE=(e,t)=>gE(e,t).breakAt.isNone(),_E=(e,t)=>vE(e,t).breakAt.isNone(),wE=(e,t)=>fE(yE(e,t),t),xE=(e,t)=>fE(bE(e,t),t),CE=cr,EE=(e,t)=>Math.abs(e.left-t),ME=(e,t)=>Math.abs(e.right-t),SE=(e,t)=>Re(e,(e,n)=>{const i=Math.min(EE(e,t),ME(e,t)),r=Math.min(EE(n,t),ME(n,t));return r===i&&Me(n,"node")&&CE(n.node)||r<i?n:e}),TE=e=>{const t=t=>Q(t,t=>{const n=La(t);return n.node=e,n});if(Yi(e))return t(e.getClientRects());if(er(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},kE=e=>ie(e,TE);var LE;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(LE||(LE={}));const DE=(e,t,n,i,r,o)=>{let s=0;const a=[],l=i=>{let o=kE([i]);-1===e&&(o=o.reverse());for(let e=0;e<o.length;e++){const i=o[e];if(!n(i,c)){if(a.length>0&&t(i,Pe(a))&&s++,i.line=s,r(i))return!0;a.push(i)}}return!1},c=Pe(o.getClientRects());if(!c)return a;const d=o.getNode();return d&&(l(d),((e,t,n,i)=>{let r=i;for(;r=uu(r,e,ro,t);)if(n(r))return})(e,i,l,d)),a},IE=I(DE,LE.Up,Ra,Oa),RE=I(DE,LE.Down,Oa,Ra),OE=e=>Pe(e.getClientRects()),PE=e=>t=>((e,t)=>t.line>e)(e,t),BE=e=>t=>((e,t)=>t.line===e)(e,t),NE=(e,t)=>{e.selection.setRng(t),Om(e,e.selection.getRng())},UE=(e,t,n)=>F.some(mC(e,t,n)),FE=(e,t,n,i,r,o)=>{const s=t===Mu.Forwards,a=Nu(e.getBody()),l=I(Cu,s?a.next:a.prev),c=s?i:r;if(!n.collapsed){const i=Ba(n);if(o(i))return hC(t,e,i,t===Mu.Backwards,!1);if(AC(e)){const e=n.cloneRange();return e.collapse(t===Mu.Backwards),F.from(e)}}const d=wu(t,e.getBody(),n);if(c(d))return pC(e,d.getNode(!s));let u=l(d);const h=$r(n);if(!u)return h?F.some(n):F.none();if(u=hv(s,u),c(u))return hC(t,e,u.getNode(!s),s,!1);const p=l(u);return p&&c(p)&&Eu(u,p)?hC(t,e,p.getNode(!s),s,!1):h?UE(e,u.toRange(),!1):F.none()},zE=(e,t,n,i,r,o)=>{const s=wu(t,e.getBody(),n),a=Pe(s.getClientRects()),l=t===LE.Down,c=e.getBody();if(!a)return F.none();if(AC(e)){const e=l?rl.fromRangeEnd(n):rl.fromRangeStart(n);return(l?xE:wE)(c,e).orThunk(()=>F.from(e)).map(e=>e.toRange())}const d=(l?RE:IE)(c,PE(1),s),u=K(d,BE(1)),h=a.left,p=SE(u,h);if(p&&o(p.node)){const n=Math.abs(h-p.left),i=Math.abs(h-p.right);return hC(t,e,p.node,n<i,!1)}let m;if(m=i(s)?s.getNode():r(s)?s.getNode(!0):Ba(n),m){const n=((e,t,n,i)=>{const r=Nu(t);let o,s,a,l;const c=[];let d=0;1===e?(o=r.next,s=Oa,a=Ra,l=rl.after(i)):(o=r.prev,s=Ra,a=Oa,l=rl.before(i));const u=OE(l);do{if(!l.isVisible())continue;const e=OE(l);if(a(e,u))continue;c.length>0&&s(e,Pe(c))&&d++;const t=La(e);if(t.position=l,t.line=d,n(t))return c;c.push(t)}while(l=o(l));return c})(t,c,PE(1),m);let i=SE(K(n,BE(1)),h);if(i)return UE(e,i.position.toRange(),!1);if(i=Pe(K(n,BE(0))),i)return UE(e,i.position.toRange(),!1)}return 0===u.length?HE(e,l).filter(l?r:i).map(t=>mC(e,t.toRange(),!1)):F.none()},HE=(e,t)=>{const n=e.selection.getRng(),i=t?rl.fromRangeEnd(n):rl.fromRangeStart(n),r=(o=i.container(),s=e.getBody(),Kn(bn.fromDom(o),e=>Jd(e.dom),e=>e.dom===s).map(e=>e.dom).getOr(s));var o,s;if(t){const e=vE(r,i);return ue(e.positions)}{const e=gE(r,i);return de(e.positions)}},jE=(e,t,n)=>HE(e,t).filter(n).exists(t=>(e.selection.setRng(t.toRange()),!0)),VE=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},YE=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},GE=(e,t,n)=>zC(t,n).map(t=>(VE(e,t),n)),QE=(e,t,n)=>{const i=e.getBody(),r=((e,t,n)=>{const i=rl.fromRangeStart(e);if(e.collapsed)return i;{const r=rl.fromRangeEnd(e);return n?$u(t,r).getOr(r):Qu(t,i).getOr(i)}})(e.selection.getRng(),i,n),o=I(cv,e);return oE(n,o,i,r).bind(n=>GE(e,t,n))},$E=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const i=rl.fromRangeStart(e.selection.getRng());rl.isTextPosition(i)&&!(e=>jr(e)||Vr(e))(i)&&(VE(e,Vd(n,i)),t.set(null))}},qE=(e,t,n)=>!!Rc(e)&&QE(e,t,n).isSome(),WE=(e,t,n)=>!!Rc(t)&&aE(e,t),KE=e=>{const t=Js(null),n=I(cv,e);return e.on("NodeChange",i=>{Rc(e)&&(((e,t,n)=>{const i=Q(Fi(bn.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),r=K(i,e),o=K(n,e);$(se(r,o),I(YE,!1)),$(se(o,r),I(YE,!0))})(n,e.dom,i.parents),$E(e,t),((e,t,n,i)=>{if(t.selection.isCollapsed()){const r=K(i,e);$(r,i=>{const r=rl.fromRangeStart(t.selection.getRng());ZC(e,t.getBody(),r).bind(e=>GE(t,n,e))})}})(n,e,t,i.parents))}),t},ZE=I(WE,!0),XE=I(WE,!1),JE=(e,t,n)=>{if(Rc(e)){const i=HE(e,t).getOrThunk(()=>{const n=e.selection.getRng();return t?rl.fromRangeEnd(n):rl.fromRangeStart(n)});return ZC(I(cv,e),e.getBody(),i).exists(t=>{const i=eE(t);return zC(n,i).exists(t=>(VE(e,t),!0))})}return!1},eM=(e,t)=>n=>zC(t,n).map(t=>()=>VE(e,t)),tM=(e,t,n,i)=>{const r=e.getBody(),o=I(cv,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,i)),gv(e),ZC(o,r,rl.fromRangeStart(e.selection.getRng())).map(tE).bind(eM(e,t)).each(B)}),e.nodeChanged()},nM=(e,t,n,i)=>{const r=((e,t)=>{const n=hu(t,e);return n||e})(e.getBody(),i.container()),o=I(cv,e),s=ZC(o,r,i);return s.bind(e=>n?e.fold(k(F.some(tE(e))),F.none,k(F.some(eE(e))),F.none):e.fold(F.none,k(F.some(eE(e))),F.none,k(F.some(tE(e))))).map(eM(e,t)).getOrThunk(()=>{const a=Vu(n,r,i),l=a.bind(e=>ZC(o,r,e));return Nt(s,l,()=>uv(o,r,i).bind(t=>(e=>Nt(qu(e),Wu(e),(t,n)=>{const i=hv(!0,t),r=hv(!1,n);return Qu(e,i).forall(e=>e.isEqual(r))}).getOr(!0))(t)?F.some(()=>{av(e,n,bn.fromDom(t))}):F.none())).getOrThunk(()=>l.bind(()=>a.map(r=>()=>{n?tM(e,t,i,r):tM(e,t,r,i)})))})},iM=(e,t,n)=>{if(e.selection.isCollapsed()&&Rc(e)){const i=rl.fromRangeStart(e.selection.getRng());return nM(e,t,n,i)}return F.none()},rM=(e,t)=>{const n=bn.fromDom(e.getBody()),i=bn.fromDom(e.selection.getStart()),r=gg(i,n);return te(r,t).fold(k(r),e=>r.slice(0,e))},oM=e=>1===Fn(e),sM=e=>rM(e,t=>e.schema.isBlock(Yt(t))||(e=>Fn(e)>1)(t)),aM=(e,t)=>{const n=I(rb,e);return ie(t,e=>n(e)?[e.dom]:[])},lM=e=>{const t=(e=>rM(e,t=>e.schema.isBlock(Yt(t))))(e);return aM(e,t)},cM=(e,t)=>{const n=K(sM(e),oM);return ue(n).bind(i=>{const r=rl.fromRangeStart(e.selection.getRng());return Av(t,r,i.dom)&&!Kh(i)?F.some(()=>((e,t,n,i)=>{const r=aM(t,i);if(0===r.length)av(t,e,n);else{const e=ib(n.dom,r);t.selection.setRng(e.toRange())}})(t,e,i,n)):F.none()})},dM=(e,t)=>{const n=e.selection.getStart(),i=((e,t)=>{const n=t.parentElement;return sr(t)&&!y(n)&&e.dom.isEmpty(n)})(e,n)||(r=n,Kh(bn.fromDom(r)))?ib(n,t):((e,t)=>{const{caretContainer:n,caretPosition:i}=nb(t);return e.insertNode(n.dom),i})(e.selection.getRng(),t);var r;e.selection.setRng(i.toRange())},uM=e=>er(e.startContainer),hM=e=>(e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!y(t)&&!y(n)&&t.isEqualNode(n)})(e)&&(e=>{const t=e.endContainer;return e.endOffset===(er(t)?t.length:t.childNodes.length)})(e),pM=e=>{const t=e.selection.getRng();return(e=>0===e.startOffset&&uM(e))(t)&&((e,t)=>{const n=t.startContainer.parentElement;return!y(n)&&rb(e,bn.fromDom(n))})(e,t)&&(e=>hM(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},mM=e=>{if(pM(e)){const t=lM(e);return F.some(()=>{gv(e),((e,t)=>{const n=se(t,lM(e));n.length>0&&dM(e,n)})(e,t)})}return F.none()},fM=(e,t)=>e.selection.isCollapsed()?cM(e,t):mM(e),gM=(e,t)=>((e,t,n)=>Kn(e,t,n).isSome())(e,e=>Zu(e.dom),e=>t.isBlock(Yt(e))),vM=e=>{const t=e.selection.getRng();return t.collapsed&&(uM(t)||e.dom.isEmpty(t.startContainer))&&!(e=>gM(bn.fromDom(e.selection.getStart()),e.schema))(e)},yM=e=>(vM(e)&&dM(e,[]),!0),bM=(e,t,n)=>w(n)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),av(e,t,bn.fromDom(n))}):F.none(),AM=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?cg:dg,i=t?Mu.Forwards:Mu.Backwards,r=wu(i,e.getBody(),e.selection.getRng());return n(r)?bM(e,t,r.getNode(!t)):F.from(hv(t,r)).filter(e=>n(e)&&Eu(r,e)).bind(n=>bM(e,t,n.getNode(!t)))})(e,t):((e,t)=>{const n=e.selection.getNode();return hr(n)?bM(e,t,n):F.none()})(e,t),_M=e=>Xe(null!=e?e:"").getOr(0),wM=(e,t)=>(e||"table"===Yt(t)?"margin":"padding")+("rtl"===ci(t,"direction")?"-right":"-left"),xM=e=>{const t=EM(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>re(t,t=>{const n=wM(vc(e),t),i=ui(t,n).map(_M).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&i>0}))(e,t))},CM=e=>Er(e)||Mr(e),EM=e=>K(xi(e.selection.getSelectedBlocks()),e=>!CM(e)&&!(e=>Tn(e).exists(CM))(e)&&Zn(e,e=>lr(e.dom)||cr(e.dom)).exists(e=>lr(e.dom))),MM=(e,t)=>{var n,i;const{dom:r}=e,o=yc(e),s=null!==(i=null===(n=/[a-z%]+$/i.exec(o))||void 0===n?void 0:n[0])&&void 0!==i?i:"px",a=_M(o),l=vc(e);$(EM(e),e=>{((e,t,n,i,r,o)=>{const s=wM(n,bn.fromDom(o)),a=_M(e.getStyle(o,s));if("outdent"===t){const t=Math.max(0,a-i);e.setStyle(o,s,t?t+r:"")}else{const t=a+i+r;e.setStyle(o,s,t)}})(r,t,l,a,s,e.dom)})},SM=e=>MM(e,"outdent"),TM=e=>{if(e.selection.isCollapsed()&&xM(e)){const t=e.dom,n=e.selection.getRng(),i=rl.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(null!==r&&_g(bn.fromDom(r),i,e.schema))return F.some(()=>SM(e))}return F.none()},kM=(e,t,n)=>pe([TM,kC,yC,(e,n)=>iM(e,t,n),aC,ty,LC,AM,uC,fM],t=>t(e,n)).filter(t=>e.selection.isEditable()),LM=(e,t)=>{kM(e,t,!0).fold(()=>{e.selection.isEditable()&&(e=>{fv(e,"ForwardDelete")})(e)},B)},DM=(e,t)=>{e.addCommand("delete",()=>{((e,t)=>{kM(e,t,!1).fold(()=>{e.selection.isEditable()&&(gv(e),bv(e))},B)})(e,t)}),e.addCommand("forwardDelete",()=>{LM(e,t)})},IM=e=>void 0===e.touches||1!==e.touches.length?F.none():F.some(e.touches[0]),RM=e=>{const t=sa(),n=Js(!1),i=la(t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)},400);e.on("touchstart",e=>{IM(e).each(r=>{i.cancel();const o={x:r.clientX,y:r.clientY,target:e.target};i.throttle(e),n.set(!1),t.set(o)})},!0),e.on("touchmove",r=>{i.cancel(),IM(r).each(i=>{t.on(r=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),i=Math.abs(e.clientY-t.y);return n>5||i>5})(i,r)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",r=>{i.cancel(),"touchcancel"!==r.type&&t.get().filter(e=>e.target.isEqualNode(r.target)).each(()=>{n.get()?r.preventDefault():e.dispatch("tap",{...r,type:"tap"})})},!0)},OM=(e,t)=>Ee(e,t.nodeName),PM=(e,t)=>!!er(t)||!!Yi(t)&&!(OM(e.getBlockElements(),t)||uh(t)||Po(e,t)||_o(t)),BM=(e,t)=>{if(er(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||OM(e,t.nextSibling)||_o(t.nextSibling)}return!1},NM=e=>e.dom.create(Zl(e),Xl(e)),UM=e=>{const t=e.dom,n=e.selection,i=e.schema,r=i.getBlockElements(),o=n.getStart(),s=e.getBody();let a,l,c=!1;const d=Zl(e);if(!o||!Yi(o))return;const u=s.nodeName.toLowerCase();if(!i.isValidChild(u,d.toLowerCase())||((e,t,n)=>G(fg(bn.fromDom(n),bn.fromDom(t)),t=>OM(e,t.dom)))(r,s,o))return;const h=n.getRng(),{startContainer:p,startOffset:m,endContainer:f,endOffset:g}=h,v=lf(e);let y=s.firstChild;for(;y;)if(Yi(y)&&Do(i,y),PM(i,y)){if(BM(r,y)){l=y,y=y.nextSibling,t.remove(l);continue}a||(a=NM(e),s.insertBefore(a,y),c=!0),l=y,y=y.nextSibling,a.appendChild(l)}else a=null,y=y.nextSibling;c&&v&&(h.setStart(p,m),h.setEnd(f,g),n.setRng(h),e.nodeChanged())},FM=(e,t,n)=>{const i=bn.fromDom(NM(e)),r=Dr();vi(i,r),n(t,i);const o=document.createRange();return o.setStartBefore(r.dom),o.setEndBefore(r.dom),o},zM=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),HM=(e,t,n)=>function(i){const r=arguments,o=r[r.length-2],s=o>0?t.charAt(o-1):"";if('"'===s)return i;if(">"===s){const e=t.lastIndexOf("<",o);if(-1!==e){if(-1!==t.substring(e,o).indexOf('contenteditable="false"'))return i}}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},jM=e=>{const t="contenteditable",n=" "+Ot.trim(xd(e))+" ",i=" "+Ot.trim(wd(e))+" ",r=zM(n),o=zM(i),s=Cd(e);s.length>0&&e.on("BeforeSetContent",t=>{((e,t,n)=>{let i=t.length,r=n.content;if("raw"!==n.format){for(;i--;)r=r.replace(t[i],HM(e,r,wd(e)));n.content=r}})(e,s,t)}),e.parser.addAttributeFilter("class",e=>{let n=e.length;for(;n--;){const i=e[n];r(i)?i.attr(t,"true"):o(i)&&i.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let n=e.length;for(;n--;){const i=e[n];(r(i)||o(i))&&(s.length>0&&i.attr("data-mce-content")?(i.name="#text",i.type=3,i.raw=!0,i.value=i.attr("data-mce-content")):i.attr(t,null))}})},VM=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Qr(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},YM=(e,t)=>{const n=(e=>ti(bn.fromDom(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull())(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void VM(e,n)):void(Hr(n)&&(VM(e,n),e.undoManager.add()))},GM=cr,QM=(e,t,n)=>{const i=Nu(e.getBody()),r=I(Cu,1===t?i.next:i.prev);if(n.collapsed){const i=e.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!r(rl.fromRangeStart(n))){const n=bn.fromDom((e=>{const t=e.dom.create(Zl(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?fi(bn.fromDom(i),n):mi(bn.fromDom(i),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},$M=(e,t)=>{const n=t?Mu.Forwards:Mu.Backwards,i=e.selection.getRng();return((e,t,n)=>FE(t,e,n,pg,mg,GM))(n,e,i).orThunk(()=>(QM(e,n,i),F.none()))},qM=(e,t)=>{const n=t?1:-1,i=e.selection.getRng();return((e,t,n)=>zE(t,e,n,e=>pg(e)||ug(e),e=>mg(e)||hg(e),GM))(n,e,i).orThunk(()=>(QM(e,n,i),F.none()))},WM=(e,t)=>$M(e,((e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return dv(n)?!t:t})(e.selection,t)).exists(t=>(NE(e,t),!0)),KM=(e,t)=>qM(e,t).exists(t=>(NE(e,t),!0)),ZM=(e,t)=>jE(e,t,t?mg:pg),XM=(e,t)=>bC(e,!t).map(n=>{const i=n.toRange(),r=e.selection.getRng();return t?i.setStart(r.startContainer,r.startOffset):i.setEnd(r.endContainer,r.endOffset),i}).exists(t=>(NE(e,t),!0)),JM=e=>Y(["figcaption"],Yt(e)),eS=(e,t)=>{const n=bn.fromDom(e.getBody()),i=rl.fromRangeStart(e.selection.getRng());return((e,t,n)=>{const i=I(xn,t);return Zn(bn.fromDom(e.container()),e=>n.isBlock(Yt(e)),i).filter(JM)})(i,n,e.schema).exists(()=>{if(((e,t,n)=>t?_E(e.dom,n):AE(e.dom,n))(n,t,i)){const i=FM(e,n,t?vi:gi);return e.selection.setRng(i),!0}return!1})},tS=(e,t)=>!!e.selection.isCollapsed()&&eS(e,t),nS=(e,t)=>t?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(t=>((e,t)=>{const n=e.selection.getRng(),i=rl.fromRangeStart(n);return!(e.getBody().lastChild!==t||!_E(t,i)||(e.execCommand("InsertNewBlockAfter"),0))})(e,t)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(t=>F.from(e.dom.getParent(t,"details")).map(n=>((e,t,n)=>{const i=e.selection.getRng(),r=rl.fromRangeStart(i);return!(e.getBody().firstChild!==t||!AE(n,r)||(e.execCommand("InsertNewBlockBefore"),0))})(e,n,t))).getOr(!1),iS=(e,t)=>nS(e,t),rS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},oS=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,sS=(e,t)=>ie((e=>Q(e,e=>({...rS,...e})))(e),e=>oS(e,t)?[e]:[]),aS=(e,t)=>ie((e=>Q(e,e=>({...rS,...e})))(e),e=>oS(e,t)?[e]:[]),lS=(e,...t)=>()=>e.apply(null,t),cS=(e,t)=>ee(sS(e,t),e=>e.action()),dS=(e,t)=>pe(aS(e,t),e=>e.action()),uS=(e,t)=>{const n=t?Mu.Forwards:Mu.Backwards,i=e.selection.getRng();return FE(e,n,i,cg,dg,hr).exists(t=>(NE(e,t),!0))},hS=(e,t)=>{const n=t?1:-1,i=e.selection.getRng();return zE(e,n,i,cg,dg,hr).exists(t=>(NE(e,t),!0))},pS=(e,t)=>jE(e,t,t?dg:cg),mS=Ll([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),fS={...mS,none:e=>mS.none(e)},gS=(e,t,n)=>ie(Pn(e),e=>_n(e,t)?n(e)?[e]:[]:gS(e,t,n)),vS=(e,t)=>((e,t,n=N)=>n(t)?F.none():Y(e,Yt(t))?F.some(t):ei(t,e.join(","),e=>_n(e,"table")||n(e)))(["td","th"],e,t),yS=e=>gS(e,"th,td",U),bS=(e,t)=>ni(e,"table",t),AS=(e,t,n,i,r=U)=>{const o=1===i;if(!o&&n<=0)return fS.first(e[0]);if(o&&n>=e.length-1)return fS.last(e[e.length-1]);{const o=n+i,s=e[o];return r(s)?fS.middle(t,s):AS(e,t,o,i,r)}},_S=(e,t)=>bS(e,t).bind(t=>{const n=yS(t);return te(n,t=>xn(e,t)).map(e=>({index:e,all:n}))}),wS=(e,t,n,i,r)=>{const o=Fi(bn.fromDom(n),"td,th,caption").map(e=>e.dom),s=K(((e,t)=>ie(t,t=>{const n=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}))(La(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))(e,o),e=>t(e,r));return((e,t,n)=>X(e,(e,i)=>e.fold(()=>F.some(i),e=>{const r=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(i.x-t)+Math.abs(i.y-n));return F.some(o<r?i:e)}),F.none()))(s,i,r).map(e=>e.cell)},xS=I(wS,e=>e.bottom,(e,t)=>e.y<t),CS=I(wS,e=>e.top,(e,t)=>e.y>t),ES=(e,t)=>de(t.getClientRects()).bind(t=>xS(e,t.left,t.top)).bind(e=>{return fE(Wu(n=e).map(e=>gE(n,e).positions.concat(e)).getOr([]),t);var n}),MS=(e,t)=>ue(t.getClientRects()).bind(t=>CS(e,t.left,t.top)).bind(e=>{return fE(qu(n=e).map(e=>[e].concat(vE(n,e).positions)).getOr([]),t);var n}),SS=(e,t,n)=>{const i=e(t,n);return(e=>e.breakType===lE.Wrap&&0===e.positions.length)(i)||!sr(n.getNode())&&(e=>e.breakType===lE.Br&&1===e.positions.length)(i)?!((e,t,n)=>n.breakAt.exists(n=>e(t,n).breakAt.isSome()))(e,t,i):i.breakAt.isNone()},TS=I(SS,gE),kS=I(SS,vE),LS=(e,t,n,i)=>{const r=e.selection.getRng(),o=t?1:-1;return!(!Kd()||!((e,t,n)=>{const i=rl.fromRangeStart(t);return Gu(!e,n).exists(e=>e.isEqual(i))})(t,r,n))&&(hC(o,e,n,!t,!1).each(t=>{NE(e,t)}),!0)},DS=(e,t)=>{const n=t.getNode(e);return Zi(n)?F.some(n):F.none()},IS=(e,t,n)=>{const i=DS(!!t,n),r=!1===t;i.fold(()=>NE(e,n.toRange()),i=>Gu(r,e.getBody()).filter(e=>e.isEqual(n)).fold(()=>NE(e,n.toRange()),n=>((e,t,n)=>{t.undoManager.transact(()=>{const i=e?fi:mi,r=FM(t,bn.fromDom(n),i);NE(t,r)})})(t,e,i)))},RS=(e,t,n,i)=>{const r=e.selection.getRng(),o=rl.fromRangeStart(r),s=e.getBody();if(!t&&TS(i,o)){const i=((e,t,n)=>ES(t,n).orThunk(()=>de(n.getClientRects()).bind(n=>mE(yE(e,rl.before(t)),n.left))).getOr(rl.before(t)))(s,n,o);return IS(e,t,i),!0}if(t&&kS(i,o)){const i=((e,t,n)=>MS(t,n).orThunk(()=>de(n.getClientRects()).bind(n=>mE(bE(e,rl.after(t)),n.left))).getOr(rl.after(t)))(s,n,o);return IS(e,t,i),!0}return!1},OS=(e,t,n)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(i=>F.from(e.dom.getParent(i,"table")).map(r=>n(e,t,r,i))).getOr(!1),PS=(e,t)=>OS(e,t,LS),BS=(e,t)=>OS(e,t,RS),NS=(e,t,n)=>n.fold(F.none,F.none,(e,t)=>{return(n=t,Jn(n,bf)).map(e=>(e=>{const t=qp.exact(e,0,e,0);return Jp(t)})(e));var n},n=>(e.execCommand("mceTableInsertRowAfter"),US(e,t,n))),US=(e,t,n)=>NS(e,t,((e,t,n)=>_S(e,n).fold(()=>fS.none(e),n=>AS(n.all,e,n.index,1,t)))(n,ii)),FS=(e,t,n)=>NS(e,t,((e,t,n)=>_S(e,n).fold(()=>fS.none(),n=>AS(n.all,e,n.index,-1,t)))(n,ii)),zS=(e,t)=>{const n=["table","li","dl"],i=bn.fromDom(e.getBody()),r=e=>{const t=Yt(e);return xn(e,i)||Y(n,t)},o=e.selection.getRng(),s=bn.fromDom(t?o.endContainer:o.startContainer);return vS(s,r).map(n=>{bS(n,r).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t);return(t?US:FS)(e,r,n).each(t=>{e.selection.setRng(t)}),!0}).getOr(!1)},HS=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const i=Lt.os.isMacOS()||Lt.os.isiOS();cS([{keyCode:Lp.RIGHT,action:lS(WM,e,!0)},{keyCode:Lp.LEFT,action:lS(WM,e,!1)},{keyCode:Lp.UP,action:lS(KM,e,!1)},{keyCode:Lp.DOWN,action:lS(KM,e,!0)},...i?[{keyCode:Lp.UP,action:lS(XM,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Lp.DOWN,action:lS(XM,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Lp.RIGHT,action:lS(PS,e,!0)},{keyCode:Lp.LEFT,action:lS(PS,e,!1)},{keyCode:Lp.UP,action:lS(BS,e,!1)},{keyCode:Lp.DOWN,action:lS(BS,e,!0)},{keyCode:Lp.UP,action:lS(BS,e,!1)},{keyCode:Lp.UP,action:lS(iS,e,!1)},{keyCode:Lp.DOWN,action:lS(iS,e,!0)},{keyCode:Lp.RIGHT,action:lS(uS,e,!0)},{keyCode:Lp.LEFT,action:lS(uS,e,!1)},{keyCode:Lp.UP,action:lS(hS,e,!1)},{keyCode:Lp.DOWN,action:lS(hS,e,!0)},{keyCode:Lp.RIGHT,action:lS(qE,e,t,!0)},{keyCode:Lp.LEFT,action:lS(qE,e,t,!1)},{keyCode:Lp.RIGHT,ctrlKey:!i,altKey:i,action:lS(ZE,e,t)},{keyCode:Lp.LEFT,ctrlKey:!i,altKey:i,action:lS(XE,e,t)},{keyCode:Lp.UP,action:lS(tS,e,!1)},{keyCode:Lp.DOWN,action:lS(tS,e,!0)}],n).each(e=>{n.preventDefault()})})(e,t,n)})},jS=(e,t)=>({container:e,offset:t}),VS=Ks.DOM,YS=e=>t=>e===t?-1:0,GS=(e,t,n)=>{if(er(e)&&t>=0)return F.some(jS(e,t));{const i=Ta(VS);return F.from(i.backwards(e,t,YS(e),n)).map(e=>jS(e.container,e.container.data.length))}},QS=(e,t,n)=>{if(!er(e))return F.none();const i=e.data;if(t>=0&&t<=i.length)return F.some(jS(e,t));{const i=Ta(VS);return F.from(i.backwards(e,t,YS(e),n)).bind(e=>{const i=e.container.data;return QS(e.container,t+i.length,n)})}},$S=(e,t,n)=>{if(!er(e))return F.none();const i=e.data;if(t<=i.length)return F.some(jS(e,t));{const r=Ta(VS);return F.from(r.forwards(e,t,YS(e),n)).bind(e=>$S(e.container,t-i.length,n))}},qS=(e,t,n,i,r)=>{const o=Ta(e,(e=>t=>e.isBlock(t)||Y(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return F.from(o.backwards(t,n,i,r))},WS=e=>Pr(e.toString().replace(/\u00A0/g," ")),KS=e=>""!==e&&-1!=="  \f\n\r\t\v".indexOf(e),ZS=(e,t)=>e.substring(t.length),XS=(e,t,n,i=0)=>{if(!(r=t).collapsed||!er(r.startContainer))return F.none();var r;const o={text:"",offset:0},s=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return qS(e,t.startContainer,t.startOffset,(e,t,i)=>(o.text=i+o.text,o.offset+=t,((e,t,n)=>{let i;const r=n.charAt(0);for(i=t-1;i>=0;i--){const o=e.charAt(i);if(KS(o))return F.none();if(r===o&&Ve(e,n,i,t))break}return F.some(i)})(o.text,o.offset,n).getOr(t)),s).bind(e=>{const r=t.cloneRange();if(r.setStart(e.container,e.offset),r.setEnd(t.endContainer,t.endOffset),r.collapsed)return F.none();const o=WS(r);return 0!==o.lastIndexOf(n)||ZS(o,n).length<i?F.none():F.some({text:ZS(o,n),range:r,trigger:n})})},JS=(e,t,n,i=0)=>{return(r=bn.fromDom(t.startContainer),ni(r,_f)).fold(()=>XS(e,t,n,i),t=>{const i=e.createRng();i.selectNode(t.dom);const r=WS(i);return F.some({range:i,text:ZS(r,n),trigger:n})});var r},eT=e=>{if((e=>3===e.nodeType)(e))return jS(e,e.data.length);{const t=e.childNodes;return t.length>0?eT(t[t.length-1]):jS(e,t.length)}},tT=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?tT(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?eT(n[n.length-1]):jS(e,t)},nT=e=>t=>{const n=tT(t.startContainer,t.startOffset);return!((e,t)=>{var n;const i=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return qS(e,t.container,t.offset,(e,t)=>0===t?-1:t,i).filter(e=>{const t=e.container.data.charAt(e.offset-1);return!KS(t)}).isSome()})(e,n)},iT=(e,t)=>{const n=t(),i=e.selection.getRng();return((e,t,n)=>pe(n.triggers,n=>JS(e,t,n)))(e.dom,i,n).bind(n=>rT(e,t,n))},rT=(e,t,n,i={})=>{var r;const o=t(),s=null!==(r=e.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",a=K(o.lookupByTrigger(n.trigger),t=>n.text.length>=t.minChars&&t.matches.getOrThunk(()=>nT(e.dom))(n.range,s,n.text));if(0===a.length)return F.none();const l=Promise.all(Q(a,e=>e.fetch(n.text,e.maxResults,i).then(t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return F.some({lookupData:l,context:n})};var oT;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(oT||(oT={}));const sT=(e,t,n)=>e.stype===oT.Error?t(e.serror):n(e.svalue),aT=e=>({stype:oT.Value,svalue:e}),lT=e=>({stype:oT.Error,serror:e}),cT=e=>sT(e,kl.error,kl.value),dT=aT,uT=e=>{const t=[],n=[];return $(e,e=>{sT(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}},hT=lT,pT=(e,t)=>e.stype===oT.Error?t(e.serror):e,mT=(e,t)=>e.stype===oT.Value?{stype:oT.Value,svalue:t(e.svalue)}:e,fT=(e,t)=>e.stype===oT.Error?{stype:oT.Error,serror:t(e.serror)}:e,gT=sT,vT=e=>f(e)&&me(e).length>100?" removed due to size":JSON.stringify(e,null,2),yT=(e,t)=>hT([{path:e,getErrorInfo:t}]),bT=(e,t,n,i)=>Ce(n,i).fold(()=>((e,t,n)=>yT(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+vT(t)))(e,n,i),n=>n.extract(e.concat(["branch: "+i]),t)),AT=(e,t)=>({extract:(n,i)=>Ce(i,e).fold(()=>((e,t)=>yT(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(n,e),e=>bT(n,i,t,e)),toString:()=>"chooseOn("+e+"). Possible values: "+me(t)}),_T=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let i=0;i<t.length;i++){const r=t[i];for(const t in r)Ee(r,t)&&(n[t]=e(n[t],r[t]))}return n},wT=_T((e,t)=>g(e)&&g(t)?wT(e,t):t),xT=(_T((e,t)=>t),e=>({tag:"defaultedThunk",process:k(e)})),CT=e=>S(hT,ne)(e),ET=e=>{const t=uT(e);return t.errors.length>0?CT(t.errors):dT(t.values)},MT=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},ST=e=>({extract:(t,n)=>pT(e(n),e=>((e,t)=>yT(e,k(t)))(t,e)),toString:k("val")}),TT=ST(dT),kT=(e,t,n,i)=>Ce(t,n).fold(()=>((e,t,n)=>yT(e,()=>'Could not find valid *required* value for "'+t+'" in '+vT(n)))(e,n,t),i),LT=(e,t,n,i)=>i(Ce(e,t).getOrThunk(()=>n(e))),DT=(e,t,n,i,r)=>{const o=e=>r.extract(t.concat([i]),e),s=e=>e.fold(()=>dT(F.none()),e=>{const n=r.extract(t.concat([i]),e);return mT(n,F.some)});switch(e.tag){case"required":return kT(t,n,i,o);case"defaultedThunk":return LT(n,i,e.process,o);case"option":return((e,t,n)=>n(Ce(e,t)))(n,i,s);case"defaultedOptionThunk":return((e,t,n,i)=>i(Ce(e,t).map(t=>!0===t?n(e):t)))(n,i,e.process,s);case"mergeWithThunk":return LT(n,i,k({}),t=>{const i=wT(e.process(n),t);return o(i)})}},IT=e=>({extract:(t,n)=>((e,t,n)=>{const i={},r=[];for(const o of n)MT(o,(n,o,s,a)=>{const l=DT(s,e,t,n,a);gT(l,e=>{r.push(...e)},e=>{i[o]=e})},(e,n)=>{i[e]=n(t)});return r.length>0?hT(r):dT(i)})(t,n,e),toString:()=>{const t=Q(e,e=>MT(e,(e,t,n,i)=>e+" -> "+i.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+t.join("\n")+"}"}}),RT=e=>({extract:(t,n)=>{const i=Q(n,(n,i)=>e.extract(t.concat(["["+i+"]"]),n));return ET(i)},toString:()=>"array("+e.toString()+")"}),OT=(e,t,n)=>cT(((e,t,n)=>{const i=t.extract([e],n);return fT(i,e=>({input:n,errors:e}))})(e,t,n)),PT=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:k("... (only showing first ten failures)")}]):e;return Q(t,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+vT(e.input),BT=(e,t)=>AT(e,ve(t,IT)),NT=k(TT),UT=(e,t)=>ST(n=>{const i=typeof n;return e(n)?dT(n):hT(`Expected type: ${t} but got: ${i}`)}),FT=UT(C,"number"),zT=UT(m,"string"),HT=UT(b,"boolean"),jT=UT(x,"function"),VT=(e,t,n,i)=>({tag:"field",key:e,newKey:t,presence:n,prop:i}),YT=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),GT=e=>{return t=t=>Y(e,t)?kl.value(t):kl.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),ST(e=>t(e).fold(hT,dT));var t},QT=(e,t)=>VT(e,e,{tag:"required",process:{}},t),$T=e=>QT(e,zT),qT=e=>QT(e,jT),WT=(e,t)=>VT(e,e,{tag:"option",process:{}},t),KT=e=>WT(e,zT),ZT=(e,t,n)=>VT(e,e,xT(t),n),XT=(e,t)=>ZT(e,t,FT),JT=(e,t,n)=>ZT(e,t,GT(n)),ek=(e,t)=>ZT(e,t,HT),tk=(e,t)=>ZT(e,t,jT),nk=$T("type"),ik=qT("fetch"),rk=qT("onAction"),ok=tk("onSetup",()=>M),sk=KT("text"),ak=KT("icon"),lk=KT("tooltip"),ck=KT("label"),dk=ek("active",!1),uk=ek("enabled",!0),hk=ek("primary",!1),pk=e=>((e,t)=>ZT(e,t,zT))("type",e),mk=IT([nk,$T("trigger"),XT("minChars",1),(gk=1,((e,t)=>VT(e,e,xT(t),NT()))("columns",gk)),XT("maxResults",10),(fk="matches",WT(fk,jT)),ik,rk,((e,t,n)=>ZT(e,t,RT(n)))("highlightOn",[],zT)]);var fk,gk;const vk=[uk,lk,ak,sk,ok],yk=[dk].concat(vk),bk=[tk("predicate",N),JT("scope","node",["node","editor"]),JT("position","selection",["node","selection","line"])],Ak=vk.concat([pk("contextformbutton"),hk,rk,YT("original",L)]),_k=yk.concat([pk("contextformbutton"),hk,rk,YT("original",L)]),wk=vk.concat([pk("contextformbutton")]),xk=yk.concat([pk("contextformtogglebutton")]),Ck=BT("type",{contextformbutton:Ak,contextformtogglebutton:_k});IT([pk("contextform"),tk("initValue",k("")),ck,((e,t)=>VT(e,e,{tag:"required",process:{}},RT(t)))("commands",Ck),WT("launch",BT("type",{contextformbutton:wk,contextformtogglebutton:xk}))].concat(bk));const Ek=e=>{const t=e.ui.registry.getAll().popups,n=ve(t,e=>{return(t=e,OT("Autocompleter",mk,{trigger:t.ch,...t})).fold(e=>{throw new Error(PT(e))},L);var t}),i=Se(we(n,e=>e.trigger)),r=xe(n);return{dataset:n,triggers:i,lookupByTrigger:e=>K(r,t=>t.trigger===e)}},Mk=e=>{const t=sa(),n=Js(!1),i=t.isSet,r=()=>{i()&&((e=>{Aw(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},o=n=>{i()||(((e,t)=>{Aw(e).autocompleter.addDecoration(t)})(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))},s=Be(()=>Ek(e)),a=i=>{(n=>t.get().map(t=>JS(e.dom,e.selection.getRng(),t.trigger).bind(t=>rT(e,s,t,n))).getOrThunk(()=>iT(e,s)))(i).fold(r,i=>{o(i.context),i.lookupData.then(o=>{t.get().map(s=>{const a=i.context;s.trigger===a.trigger&&(a.text.length-s.matchLength>=10?r():(t.set({...s,matchLength:a.text.length}),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:o}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:o}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{const n=f(t)?t.fetchOptions:{};a(n)}),e.addCommand("mceAutocompleterClose",r),((e,t)=>{const n=la(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&n.throttle()}),e.on("keydown",e=>{const i=e.which;8===i?n.throttle():27===i&&t.cancelIfNecessary()}),e.on("remove",n.cancel)})(e,{cancelIfNecessary:r,load:a})},Sk=xt().browser.isSafari(),Tk=e=>Ir(bn.fromDom(e)),kk=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},Lk=(e,t)=>F.from(e.getParent(t.container(),"details")),Dk=(e,t)=>Lk(e,t).isSome(),Ik=(e,t)=>t.startSummary.exists(t=>((e,t)=>qu(t).exists(t=>t.isEqual(e)))(e,t)),Rk=(e,t)=>t.startSummary.exists(t=>((e,t)=>Wu(t).exists(n=>sr(n.getNode())&&$u(t,n).exists(t=>t.isEqual(e))||n.isEqual(e)))(e,t)),Ok=(e,t)=>{const n=t.getNode();A(n)||e.selection.setCursorLocation(n,t.offset())},Pk=(e,t,n)=>{const i=e.dom.getParent(t.container(),"details");if(i&&!i.open){const t=e.dom.select("summary",i)[0];if(t){(n?qu(t):Wu(t)).each(t=>Ok(e,t))}}else Ok(e,t)},Bk=(e,t,n)=>{const{dom:i,selection:r}=e,o=e.getBody();if("character"===n){const n=rl.fromRangeStart(r.getRng()),s=i.getParent(n.container(),i.isBlock),a=Lk(i,n),l=s&&i.isEmpty(s),c=y(null==s?void 0:s.previousSibling),d=y(null==s?void 0:s.nextSibling);if(l){if(t?d:c){if(Vu(!t,o,n).exists(e=>Dk(i,e)&&!Bt(a,Lk(i,e))))return!0}}return Vu(t,o,n).fold(N,n=>{const r=Lk(i,n);if(Dk(i,n)&&!Bt(a,r)){if(t||Pk(e,n,!1),s&&l){if(t&&c)return!0;if(!t&&d)return!0;Pk(e,n,t),e.dom.remove(s)}return!0}return!1})}return!1},Nk=(e,t,n,i)=>{const r=e.selection.getRng(),o=rl.fromRangeStart(r),s=e.getBody();return"selection"===i?((e,t)=>{const n=t.startSummary.exists(t=>t.contains(e.startContainer)),i=t.startSummary.exists(t=>t.contains(e.endContainer)),r=t.startDetails.forall(e=>t.endDetails.forall(t=>e!==t));return(n||i)&&!(n&&i)||r})(r,t):n?Rk(o,t)||((e,t,n)=>n.startDetails.exists(n=>Qu(e,t).forall(e=>!n.contains(e.container()))))(s,o,t):Ik(o,t)||((e,t)=>t.startDetails.exists(n=>$u(n,e).forall(n=>t.startSummary.exists(t=>!t.contains(e.container())&&t.contains(n.container())))))(o,t)},Uk=(e,t,n)=>((e,t)=>{const n=F.from(e.getParent(t.startContainer,"details")),i=F.from(e.getParent(t.endContainer,"details"));if(n.isSome()||i.isSome()){const t=n.bind(t=>F.from(e.select("summary",t)[0]));return F.some({startSummary:t,startDetails:n,endDetails:i})}return F.none()})(e.dom,e.selection.getRng()).fold(()=>Bk(e,t,n),i=>Nk(e,i,t,n)||Bk(e,t,n)),Fk=(e,t,n)=>{const i=e.selection,r=i.getNode(),o=i.getRng(),s=rl.fromRangeStart(o);return!!fr(r)&&("selection"===n&&kk(o,r)||Av(t,s,r)?Tk(r):e.undoManager.transact(()=>{const o=i.getSel();let{anchorNode:s,anchorOffset:a,focusNode:l,focusOffset:c}=null!=o?o:{};const d=()=>{w(s)&&w(a)&&w(l)&&w(c)&&(null==o||o.setBaseAndExtent(s,a,l,c))},u=(e,t)=>{$(e.childNodes,e=>{Th(e)&&t.appendChild(e)})},h=e.dom.create("span",{"data-mce-bogus":"1"});u(r,h),r.appendChild(h),d(),"word"!==n&&"line"!==n||null==o||o.modify("extend",t?"right":"left",n),!i.isCollapsed()&&kk(i.getRng(),h)?Tk(r):(e.execCommand(t?"ForwardDelete":"Delete"),s=null==o?void 0:o.anchorNode,a=null==o?void 0:o.anchorOffset,l=null==o?void 0:o.focusNode,c=null==o?void 0:o.focusOffset,u(h,r),d()),e.dom.remove(h)}),!0)},zk=(e,t,n)=>Uk(e,t,n)||Sk&&Fk(e,t,n)?F.some(M):F.none(),Hk=e=>(t,n,i={})=>{const r=t.getBody(),o={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:M,inputType:n},s=Rs(new InputEvent(e));return t.dispatch(e,{...s,...o,...i})},jk=Hk("input"),Vk=Hk("beforeinput"),Yk=xt(),Gk=Yk.os,Qk=Gk.isMacOS()||Gk.isiOS(),$k=Yk.browser.isFirefox(),qk=(e,t)=>{let n=!1;e.on("keydown",i=>{n=i.keyCode===Lp.BACKSPACE,i.isDefaultPrevented()||((e,t,n)=>{const i=n.keyCode===Lp.BACKSPACE?"deleteContentBackward":"deleteContentForward",r=e.selection.isCollapsed(),o=r?"character":"selection",s=e=>r?e?"word":"line":"selection";dS([{keyCode:Lp.BACKSPACE,action:lS(TM,e)},{keyCode:Lp.BACKSPACE,action:lS(kC,e,!1)},{keyCode:Lp.DELETE,action:lS(kC,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(yC,e,!1)},{keyCode:Lp.DELETE,action:lS(yC,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(iM,e,t,!1)},{keyCode:Lp.DELETE,action:lS(iM,e,t,!0)},{keyCode:Lp.BACKSPACE,action:lS(ty,e,!1)},{keyCode:Lp.DELETE,action:lS(ty,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(zk,e,!1,o)},{keyCode:Lp.DELETE,action:lS(zk,e,!0,o)},...Qk?[{keyCode:Lp.BACKSPACE,altKey:!0,action:lS(zk,e,!1,s(!0))},{keyCode:Lp.DELETE,altKey:!0,action:lS(zk,e,!0,s(!0))},{keyCode:Lp.BACKSPACE,metaKey:!0,action:lS(zk,e,!1,s(!1))}]:[{keyCode:Lp.BACKSPACE,ctrlKey:!0,action:lS(zk,e,!1,s(!0))},{keyCode:Lp.DELETE,ctrlKey:!0,action:lS(zk,e,!0,s(!0))}],{keyCode:Lp.BACKSPACE,action:lS(LC,e,!1)},{keyCode:Lp.DELETE,action:lS(LC,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(AM,e,!1)},{keyCode:Lp.DELETE,action:lS(AM,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(uC,e,!1)},{keyCode:Lp.DELETE,action:lS(uC,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(aC,e,!1)},{keyCode:Lp.DELETE,action:lS(aC,e,!0)},{keyCode:Lp.BACKSPACE,action:lS(fM,e,!1)},{keyCode:Lp.DELETE,action:lS(fM,e,!0)}],n).filter(t=>e.selection.isEditable()).each(t=>{n.preventDefault(),Vk(e,i).isDefaultPrevented()||(t(),jk(e,i))})})(e,t,i)}),e.on("keyup",t=>{t.isDefaultPrevented()||((e,t,n)=>{cS([{keyCode:Lp.BACKSPACE,action:lS(TC,e)},{keyCode:Lp.DELETE,action:lS(TC,e)},...Qk?[{keyCode:Lp.BACKSPACE,altKey:!0,action:lS(yM,e)},{keyCode:Lp.DELETE,altKey:!0,action:lS(yM,e)},...n?[{keyCode:$k?224:91,action:lS(yM,e)}]:[]]:[{keyCode:Lp.BACKSPACE,ctrlKey:!0,action:lS(yM,e)},{keyCode:Lp.DELETE,ctrlKey:!0,action:lS(yM,e)}]],t)})(e,t,n),n=!1})},Wk=(e,t)=>{const n=e.dom,i=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(Yi(e)||er(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(n.doc.createTextNode(vr),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Hi(t,t);let n,o=t;for(;n=e.current();){if(er(n)){r.setStart(n,0),r.setEnd(n,0);break}if(i[n.nodeName.toLowerCase()]){r.setStartBefore(n),r.setEndBefore(n);break}o=n,n=e.next()}n||(r.setStart(o,0),r.setEnd(o,0))}else sr(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Om(e,r)},Kk=(e,t)=>{const n=e.getRoot();let i,r=t;for(;r!==n&&r&&"false"!==e.getContentEditable(r);){if("true"===e.getContentEditable(r)){i=r;break}r=r.parentNode}return r!==n?i:n},Zk=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Xk=e=>{e.innerHTML='<br data-mce-bogus="1">'},Jk=(e,t)=>{if(Zl(e).toLowerCase()===t.tagName.toLowerCase()){((e,t,n)=>{const i=e.dom;F.from(n.style).map(i.parseStyle).each(e=>{const n={...hi(bn.fromDom(t)),...e};i.setStyles(t,n)});const r=F.from(n.class).map(e=>e.split(/\s+/)),o=F.from(t.className).map(e=>K(e.split(/\s+/),e=>""!==e));Nt(r,o,(e,n)=>{const r=K(n,t=>!Y(e,t)),o=[...e,...r];i.setAttrib(t,"class",o.join(" "))});const s=["style","class"],a=_e(n,(e,t)=>!Y(s,t));i.setAttribs(t,a)})(e,t,Xl(e))}},eL=(e,t,n,i,r=!0,o,s)=>{const a=e.dom,l=e.schema,c=Zl(e),d=n?n.nodeName.toUpperCase():"";let u=t;const h=l.getTextInlineElements();let p;p=o||"TABLE"===d||"HR"===d?a.create(o||c,s||{}):n.cloneNode(!1);let m=p;if(r){do{if(h[u.nodeName]){if(Zu(u)||uh(u))continue;const e=u.cloneNode(!1);a.setAttrib(e,"id",""),p.hasChildNodes()?(e.appendChild(p.firstChild),p.appendChild(e)):(m=e,p.appendChild(e))}}while((u=u.parentNode)&&u!==i)}else a.setAttrib(p,"style",null),a.setAttrib(p,"class",null);return Jk(e,p),Xk(m),p},tL=(e,t,n)=>!t&&n.nodeName.toLowerCase()===Zl(e)&&e.dom.isEmpty(n)&&((e,t,n)=>{let i=t;for(;i&&i!==e&&y(i.nextSibling);){const e=i.parentElement;if(!e||!n(e))return mr(e);i=e}return!1})(e.getBody(),n,t=>Ee(e.schema.getTextBlockElements(),t.nodeName.toLowerCase())),nL=(e,t,n)=>{var i,r,o;const s=t(Zl(e)),a=((e,t)=>e.dom.getParent(t,mr))(e,n);a&&(e.dom.insertAfter(s,a),Wk(e,s),(null!==(o=null===(r=null===(i=n.parentElement)||void 0===i?void 0:i.childNodes)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>1&&e.dom.remove(n))},iL=(e,t)=>{const n=null==e?void 0:e.parentNode;return w(n)&&n.nodeName===t},rL=e=>w(e)&&/^(OL|UL|LI)$/.test(e.nodeName),oL=e=>w(e)&&/^(LI|DT|DD)$/.test(e.nodeName),sL=e=>{const t=e.parentNode;return oL(t)?t:e},aL=(e,t,n)=>{let i=e[n?"firstChild":"lastChild"];for(;i&&!Yi(i);)i=i[n?"nextSibling":"previousSibling"];return i===t},lL=e=>X(we(hi(bn.fromDom(e)),(e,t)=>`${t}: ${e};`),(e,t)=>e+t,""),cL=(e,t,n,i,r)=>{const o=e.dom,s=e.selection.getRng(),a=n.parentNode;if(n===e.getBody()||!a)return;var l;rL(l=n)&&rL(l.parentNode)&&(r="LI");const c=oL(i)?lL(i):void 0;let d=oL(i)&&c?t(r,{style:lL(i)}):t(r);if(aL(n,i,!0)&&aL(n,i,!1))if(iL(n,"LI")){const e=sL(n);o.insertAfter(d,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?o.remove(e):o.remove(n)}else o.replace(d,n);else if(aL(n,i,!0))iL(n,"LI")?(o.insertAfter(d,sL(n)),d.appendChild(o.doc.createTextNode(" ")),d.appendChild(n)):a.insertBefore(d,n),o.remove(i);else if(aL(n,i,!1))o.insertAfter(d,sL(n)),o.remove(i);else{n=sL(n);const e=s.cloneRange();e.setStartAfter(i),e.setEndAfter(n);const t=e.extractContents();if("LI"===r&&((e,t)=>e.firstChild&&e.firstChild.nodeName===t)(t,"LI")){const e=K(Q(d.children,bn.fromDom),R(Xt("br")));d=t.firstChild,o.insertAfter(t,n),$(e,e=>gi(bn.fromDom(d),e)),c&&d.setAttribute("style",c)}else o.insertAfter(t,n),o.insertAfter(d,n);o.remove(i)}Wk(e,d)},dL=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),uL=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,hL=(e,t)=>w(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),pL=(e,t,n)=>er(t)?e?1===n&&t.data.charAt(n-1)===Rr?0:n:n===t.data.length-1&&t.data.charAt(n)===Rr?t.data.length:n:n,mL={insert:(e,t)=>{let n,i,r,o,s=!1;const a=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=Zl(e),u=bn.fromDom(c.startContainer),h=Bn(u,c.startOffset),p=h.exists(e=>$t(e)&&!ii(e)),f=c.collapsed&&p,g=(t,i)=>eL(e,n,C,x,nc(e),t,i),v=e=>{const t=pL(e,n,i);if(er(n)&&(e?t>0:t<n.data.length))return!1;if(n.parentNode===C&&s&&!e)return!0;if(e&&Yi(n)&&n===C.firstChild)return!0;if(uL(n,"TABLE")||uL(n,"HR"))return s&&!e||!s&&e;const r=new Hi(n,C);let o;for(er(n)&&(e&&0===t?r.prev():e||t!==n.data.length||r.next());o=r.current();){if(Yi(o)){if(!o.getAttribute("data-mce-bogus")){const e=o.nodeName.toLowerCase();if(l[e]&&"br"!==e)return!1}}else if(er(o)&&!so(o.data))return!1;e?r.prev():r.next()}return!0},y=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==E?g(d):g(),((e,t)=>{const n=ic(e);return!_(t)&&(m(n)?Y(Ot.explode(n),t.nodeName.toLowerCase()):n)})(e,o)&&hL(a,o)&&a.isEmpty(C,void 0,{includeZwsp:!0})?t=a.split(o,C):a.insertAfter(t,C),Wk(e,t),t};cm(a,c).each(e=>{c.setStart(e.startContainer,e.startOffset),c.setEnd(e.endContainer,e.endOffset)}),n=c.startContainer,i=c.startOffset;const b=!(!t||!t.shiftKey),A=!(!t||!t.ctrlKey);Yi(n)&&n.hasChildNodes()&&!f&&(s=i>n.childNodes.length-1,n=n.childNodes[Math.min(i,n.childNodes.length-1)]||n,i=s&&er(n)?n.data.length:0);const x=Kk(a,n);if(!x||((e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)})(e,n))return;b||(n=((e,t,n,i,r)=>{var o,s;const a=e.dom,l=null!==(o=Kk(a,i))&&void 0!==o?o:a.getRoot();let c=a.getParent(i,a.isBlock);if(!c||!hL(a,c)){if(c=c||l,!c.hasChildNodes()){const i=a.create(t);return Jk(e,i),c.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i}let o,d=i;for(;d&&d.parentNode!==c;)d=d.parentNode;for(;d&&!a.isBlock(d);)o=d,d=d.previousSibling;const u=null===(s=null==o?void 0:o.parentElement)||void 0===s?void 0:s.nodeName;if(o&&u&&e.schema.isValidChild(u,t.toLowerCase())){const s=o.parentNode,l=a.create(t);for(Jk(e,l),s.insertBefore(l,o),d=o;d&&!a.isBlock(d);){const e=d.nextSibling;l.appendChild(d),d=e}n.setStart(i,r),n.setEnd(i,r)}}return i})(e,d,c,n,i));let C=a.getParent(n,a.isBlock)||a.getRoot();o=w(null==C?void 0:C.parentNode)?a.getParent(C.parentNode,a.isBlock):null,r=C?C.nodeName.toUpperCase():"";const E=o?o.nodeName.toUpperCase():"";if("LI"===E&&!A){C=o,o=o.parentNode,r=E}if(Yi(o)&&tL(e,b,C))return nL(e,g,C);if(/^(LI|DT|DD)$/.test(r)&&Yi(o)&&a.isEmpty(C))return void cL(e,g,o,C,d);if(!(f||C!==e.getBody()&&hL(a,C)))return;const M=C.parentNode;let S;if(f)S=g(d),h.fold(()=>{vi(u,bn.fromDom(S))},e=>{mi(e,bn.fromDom(S))}),e.selection.setCursorLocation(S,0);else if(Ur(C))S=Qr(C),a.isEmpty(C)&&Xk(C),Jk(e,S),Wk(e,S);else if(v(!1))S=y();else if(v(!0)&&M){S=M.insertBefore(g(),C);const t=bn.fromDom(c.startContainer).dom.hasChildNodes()&&c.collapsed;Wk(e,uL(C,"HR")||t?S:C)}else{const t=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,pL(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,pL(!1,e.endContainer,e.endOffset)),t})(c).cloneRange();t.setEndAfter(C);const n=t.extractContents();(e=>{$(Ui(bn.fromDom(e),Wt),e=>{const t=e.dom;t.nodeValue=Pr(t.data)})})(n),(e=>{let t=e;do{er(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(n),S=n.firstChild,a.insertAfter(n,C),((e,t,n)=>{var i;const r=[];if(!n)return;let o=n;for(;o=o.firstChild;){if(e.isBlock(o))return;Yi(o)&&!t[o.nodeName.toLowerCase()]&&r.push(o)}let s=r.length;for(;s--;)o=r[s],(!o.hasChildNodes()||o.firstChild===o.lastChild&&""===(null===(i=o.firstChild)||void 0===i?void 0:i.nodeValue)||dL(e,o))&&e.remove(o)})(a,l,S),((e,t)=>{t.normalize();const n=t.lastChild;(!n||Yi(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")})(a,C),a.isEmpty(C)&&Xk(C),S.normalize(),a.isEmpty(S)?(a.remove(S),y()):(Jk(e,S),Wk(e,S))}a.setAttrib(S,"id",""),e.dispatch("NewBlock",{newBlock:S})},fakeEventName:"insertParagraph"},fL=(e,t,n)=>{const i=e.dom.createRng();n?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)),e.selection.setRng(i),Om(e,i)},gL=(e,t)=>{const n=e.selection,i=e.dom,r=n.getRng();let o,s=!1;cm(i,r).each(e=>{r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset)});let a=r.startOffset,l=r.startContainer;if(Yi(l)&&l.hasChildNodes()){const e=a>l.childNodes.length-1;l=l.childNodes[Math.min(a,l.childNodes.length-1)]||l,a=e&&er(l)?l.data.length:0}let c=i.getParent(l,i.isBlock);const d=c&&c.parentNode?i.getParent(c.parentNode,i.isBlock):null,u=d?d.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==u||h||(c=d),er(l)&&a>=l.data.length&&(((e,t,n)=>{const i=new Hi(t,n);let r;const o=e.getNonEmptyElements();for(;r=i.next();)if(o[r.nodeName.toLowerCase()]||er(r)&&r.length>0)return!0;return!1})(e.schema,l,c||i.getRoot())||(o=i.create("br"),r.insertNode(o),r.setStartAfter(o),r.setEndAfter(o),s=!0)),o=i.create("br"),sl(i,r,o),fL(e,o,s),e.undoManager.add()},vL=(e,t)=>{const n=bn.fromTag("br");mi(bn.fromDom(t),n),e.undoManager.add()},yL=(e,t)=>{bL(e.getBody(),t)||fi(bn.fromDom(t),bn.fromTag("br"));const n=bn.fromTag("br");fi(bn.fromDom(t),n),fL(e,n.dom,!1),e.undoManager.add()},bL=(e,t)=>{return n=rl.after(t),!!sr(n.getNode())||Qu(e,rl.after(t)).map(e=>sr(e.getNode())).getOr(!1);var n},AL=e=>e&&"A"===e.nodeName&&"href"in e,_L=e=>e.fold(N,AL,AL,N),wL=(e,t)=>{t.fold(M,I(vL,e),I(yL,e),M)},xL={insert:(e,t)=>{const n=(e=>{const t=I(cv,e),n=rl.fromRangeStart(e.selection.getRng());return ZC(t,e.getBody(),n).filter(_L)})(e);n.isSome()?n.each(I(wL,e)):gL(e,t)},fakeEventName:"insertLineBreak"},CL=(e,t)=>Zk(e).filter(e=>t.length>0&&_n(bn.fromDom(e),t)).isSome(),EL=Ll([{br:[]},{block:[]},{none:[]}]),ML=(e,t)=>(e=>CL(e,tc(e)))(e),SL=e=>(t,n)=>(e=>Zk(e).filter(e=>Mr(bn.fromDom(e))).isSome())(t)===e,TL=(e,t)=>(n,i)=>{const r=(e=>Zk(e).fold(k(""),e=>e.nodeName.toUpperCase()))(n)===e.toUpperCase();return r===t},kL=e=>{const t=Kk(e.dom,e.selection.getStart());return _(t)},LL=e=>TL("pre",e),DL=e=>(t,n)=>Kl(t)===e,IL=(e,t)=>(e=>CL(e,ec(e)))(e),RL=(e,t)=>t,OL=e=>{const t=Zl(e),n=Kk(e.dom,e.selection.getStart());return w(n)&&e.schema.isValidChild(n.nodeName,t)},PL=e=>{const t=e.selection.getRng(),n=bn.fromDom(t.startContainer),i=Bn(n,t.startOffset).map(e=>$t(e)&&!ii(e));return t.collapsed&&i.getOr(!0)},BL=(e,t)=>(n,i)=>X(e,(e,t)=>e&&t(n,i),!0)?F.some(t):F.none(),NL=(e,t,n)=>{if(t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),w(n)){if(Vk(t,e.fakeEventName).isDefaultPrevented())return}e.insert(t,n),w(n)&&jk(t,e.fakeEventName)},UL=(e,t)=>{const n=()=>NL(xL,e,t),i=()=>NL(mL,e,t),r=((e,t)=>HC([BL([ML],EL.none()),BL([LL(!0),kL],EL.none()),BL([TL("summary",!0)],EL.br()),BL([LL(!0),DL(!1),RL],EL.br()),BL([LL(!0),DL(!1)],EL.block()),BL([LL(!0),DL(!0),RL],EL.block()),BL([LL(!0),DL(!0)],EL.br()),BL([SL(!0),RL],EL.br()),BL([SL(!0)],EL.block()),BL([IL],EL.br()),BL([RL],EL.br()),BL([OL],EL.block()),BL([PL],EL.block())],[e,!(!t||!t.shiftKey)]).getOr(EL.none()))(e,t);switch(Jl(e)){case"linebreak":r.fold(n,n,M);break;case"block":r.fold(i,i,M);break;case"invert":r.fold(i,n,M);break;default:r.fold(n,i,M)}},FL=xt(),zL=FL.os.isiOS()&&FL.browser.isSafari(),HL=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{UL(e,t)}))},jL=e=>{let t=F.none();e.on("keydown",n=>{n.keyCode===Lp.ENTER&&(zL&&(e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(er(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,i=t.data.charAt(e.startOffset-1);return n.test(i)}return!1})(e.selection.getRng())?(e=>{t=F.some(e.selection.getBookmark()),e.undoManager.add()})(e):HL(e,n))}),e.on("keyup",n=>{n.keyCode===Lp.ENTER&&t.each(()=>((e,n)=>{e.undoManager.undo(),t.fold(M,t=>e.selection.moveToBookmark(t)),HL(e,n),t=F.none()})(e,n))})},VL=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const i=Lt.os.isMacOS()||Lt.os.isiOS();cS([{keyCode:Lp.END,action:lS(ZM,e,!0)},{keyCode:Lp.HOME,action:lS(ZM,e,!1)},...i?[]:[{keyCode:Lp.HOME,action:lS(XM,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Lp.END,action:lS(XM,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Lp.END,action:lS(pS,e,!0)},{keyCode:Lp.HOME,action:lS(pS,e,!1)},{keyCode:Lp.END,action:lS(JE,e,!0,t)},{keyCode:Lp.HOME,action:lS(JE,e,!1,t)}],n).each(e=>{n.preventDefault()})})(e,t,n)})},YL=e=>{e.on("input",t=>{t.isComposing||(e=>{const t=bn.fromDom(e.getBody());e.selection.isCollapsed()&&$g(t,rl.fromRangeStart(e.selection.getRng()),e.schema).each(t=>{e.selection.setRng(t.toRange())})})(e)})},GL=xt(),QL=e=>e.stopImmediatePropagation(),$L=e=>e.keyCode===Lp.PAGE_UP||e.keyCode===Lp.PAGE_DOWN,qL=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",QL,!0):!n&&e.get()&&t.off("NodeChange",QL),e.set(n)},WL=(e,t)=>{if(GL.os.isMacOS())return;const n=Js(!1);e.on("keydown",t=>{$L(t)&&qL(n,e,!0)}),e.on("keyup",i=>{i.isDefaultPrevented()||((e,t,n)=>{cS([{keyCode:Lp.PAGE_UP,action:lS(JE,e,!1,t)},{keyCode:Lp.PAGE_DOWN,action:lS(JE,e,!0,t)}],n)})(e,t,i),$L(i)&&n.get()&&(qL(n,e,!1),e.nodeChanged())})},KL=(e,t)=>{const n=t.container(),i=t.offset();return er(n)?(n.insertData(i,e),F.some(rl(n,i+e.length))):xu(t).map(n=>{const i=bn.fromText(e);return t.isAtEnd()?fi(n,i):mi(n,i),rl(i.dom,e.length)})},ZL=I(KL,vr),XL=I(KL," "),JL=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},eD=e=>{const t=rl.fromRangeStart(e.selection.getRng()),n=bn.fromDom(e.getBody());if(e.selection.isCollapsed()){const i=I(cv,e),r=rl.fromRangeStart(e.selection.getRng());return ZC(i,e.getBody(),r).bind((e=>t=>t.fold(t=>$u(e.dom,rl.before(t)),e=>qu(e),e=>Wu(e),t=>Qu(e.dom,rl.after(t))))(n)).map(i=>()=>((e,t,n)=>i=>Ug(e,i,n)?ZL(t):XL(t))(n,t,e.schema)(i).each(JL(e)))}return F.none()},tD=e=>{return Ut(Lt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const t=bn.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");((e,t,n)=>Ug(e,t,n)?ZL(t):XL(t))(t,rl.fromRangeStart(e.selection.getRng()),e.schema).each(JL(e))});var t,n},nD=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{dS([{keyCode:Lp.SPACEBAR,action:lS(eD,e)},{keyCode:Lp.SPACEBAR,action:lS(tD,e)}],t).each(n=>{t.preventDefault(),Vk(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),jk(e,"insertText",{data:" "}))})})(e,t)})},iD=e=>Ld(e)?[{keyCode:Lp.TAB,action:lS(zS,e,!0)},{keyCode:Lp.TAB,shiftKey:!0,action:lS(zS,e,!1)}]:[],rD=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{cS([...iD(e)],t).each(e=>{t.preventDefault()})})(e,t)})},oD=e=>{if(e.addShortcut("Meta+P","","mcePrint"),Mk(e),vw(e))return Js(null);{const t=KE(e);return(e=>{e.on("beforeinput",t=>{e.selection.isEditable()&&!G(t.getTargetRanges(),t=>!hf(e.dom,t))||t.preventDefault()})})(e),(e=>{e.on("keyup compositionstart",I(YM,e))})(e),HS(e,t),qk(e,t),jL(e),nD(e),YL(e),rD(e),VL(e,t),WL(e,t),t}};class sD{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",n=>{const i=e.selection.getRng(),r={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==n.type&&nm(r,t)||e.dispatch("SelectionChange"),t=r}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const t=e.selection.getStart(!0);t&&Eh(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&Eh(e)&&("IMG"===e.selection.getNode().nodeName?qm.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const t=this.editor.selection;let n;if(this.editor.initialized&&t&&!Gc(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();n=t.getStart(!0)||i,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,i)||(n=i);const r=[];this.editor.dom.getParent(n,e=>e===i||(r.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:n,parents:r})}}isSameElementPath(e){let t;const n=this.editor,i=oe(n.dom.getParents(e,U,n.getBody()));if(i.length===this.lastPath.length){for(t=i.length;t>=0&&i[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=i,!0}return this.lastPath=i,!1}}const aD=wa("image"),lD=wa("event"),cD=e=>t=>{t[lD]=e},dD=cD(0),uD=cD(2),hD=cD(1),pD=(mD=0,e=>{const t=e;return F.from(t[lD]).exists(e=>e===mD)});var mD;const fD=wa("mode"),gD=e=>t=>{t[fD]=e},vD=(e,t)=>gD(t)(e),yD=gD(0),bD=gD(2),AD=gD(1),_D=e=>t=>{const n=t;return F.from(n[fD]).exists(t=>t===e)},wD=_D(0),xD=_D(1),CD=["none","copy","link","move"],ED=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],MD=()=>{const e=new window.DataTransfer;let t="move",n="all";const i={get dropEffect(){return t},set dropEffect(e){Y(CD,e)&&(t=e)},get effectAllowed(){return n},set effectAllowed(e){pD(i)&&Y(ED,e)&&(n=e)},get items(){return((e,t)=>({...t,get length(){return t.length},add:(n,i)=>{if(wD(e)){if(!m(n))return t.add(n);if(!A(i))return t.add(n,i)}return null},remove:n=>{wD(e)&&t.remove(n)},clear:()=>{wD(e)&&t.clear()}}))(i,e.items)},get files(){return xD(i)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(t,n,r)=>{var o;wD(i)&&(o={image:t,x:n,y:r},i[aD]=o,e.setDragImage(t,n,r))},getData:t=>xD(i)?"":e.getData(t),setData:(t,n)=>{wD(i)&&e.setData(t,n)},clearData:t=>{wD(i)&&e.clearData(t)}};return yD(i),i},SD=e=>{const t=MD(),n=(e=>{const t=e;return F.from(t[fD])})(e);return bD(e),dD(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,(e=>{const t=e;return F.from(t[aD])})(e).each(e=>t.setDragImage(e.image,e.x,e.y)),$(e.types,n=>{"Files"!==n&&t.setData(n,e.getData(n))}),$(e.files,e=>t.items.add(e)),(e=>{const t=e;return F.from(t[lD])})(e).each(e=>{((e,t)=>{cD(t)(e)})(t,e)}),n.each(n=>{vD(e,n),vD(t,n)}),t},TD=(e,t)=>e.setData("text/html",t),kD="x-tinymce/html",LD=k(kD),DD="\x3c!-- "+kD+" --\x3e",ID=e=>DD+e,RD=e=>-1!==e.indexOf(DD),OD=(e,t,n)=>{const i=e.split(/\n\n/),r=((e,t)=>{let n="<"+e;const i=we(t,(e,t)=>t+'="'+as.encodeAllRaw(e)+'"');return i.length&&(n+=" "+i.join(" ")),n+">"})(t,n),o="</"+t+">",s=Q(i,e=>e.split(/\n/).join("<br />"));return 1===s.length?s[0]:Q(s,e=>r+e+o).join("")},PD="%MCEPASTEBIN%",BD=e=>e.dom.get("mcepastebin"),ND=e=>w(e)&&"mcepastebin"===e.id,UD=e=>e===PD,FD=e=>{const t=Js(null);return{create:()=>((e,t)=>{const{dom:n,selection:i}=e,r=e.getBody();t.set(i.getRng());const o=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},PD);Lt.browser.isFirefox()&&n.setStyle(o,"left","rtl"===n.getStyle(r,"direction",!0)?65535:-65535),n.bind(o,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),o.focus(),i.select(o,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(BD(e)){let i;const r=t.get();for(;i=BD(e);)n.remove(i),n.unbind(i);r&&e.selection.setRng(r)}t.set(null)})(e,t),getEl:()=>BD(e),getHtml:()=>(e=>{const t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[i,...r]=K(e.getBody().childNodes,ND);$(r,e=>{n(i,e)});const o=t.select("div[id=mcepastebin]",i);for(let e=o.length-1;e>=0;e--){const r=t.create("div");i.insertBefore(r,o[e]),n(r,o[e])}return i?i.innerHTML:""})(e),getLastRng:t.get}},zD=(e,t)=>(Ot.each(t,t=>{e=p(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),HD=e=>e=zD(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?vr:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),jD=(e,t)=>({content:e,cancelled:t}),VD=(e,t,n)=>{const i=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),r=((e,t)=>{const n=I_({sanitize:Sd(e),sandbox_iframes:Od(e)},e.schema);n.addNodeFilter("meta",e=>{Ot.each(e,e=>{e.remove()})});const i=n.parse(t,{forced_root_block:!1,isRootContent:!0});return qf({validate:!0},e.schema).serialize(i)})(e,i.content);return e.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?((e,t,n)=>{const i=e.dom.create("div",{style:"display:none"},t),r=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,i,n);return jD(r.node.innerHTML,r.isDefaultPrevented())})(e,r,n):jD(r,i.isDefaultPrevented())},YD=(e,t)=>(e.insertContent(t,{merge:fd(e),paste:!0}),!0),GD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),QD=(e,t,n)=>!(e.selection.isCollapsed()||!GD(t))&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0))(e,t,n),$D=(e,t,n)=>!!((e,t)=>GD(t)&&G(kd(e),e=>Ge(t.toLowerCase(),`.${e.toLowerCase()}`)))(e,t)&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0))(e,t,n),qD=(e,t,n)=>{n||!gd(e)?YD(e,t):((e,t)=>{Ot.each([QD,$D,YD],n=>!n(e,t,YD))})(e,t)},WD=(e=>{let t=0;return()=>e+t++})("mceclip"),KD=e=>{const t=MD();return TD(t,e),bD(t),t},ZD=(e,t,n,i,r)=>{const o=((e,t,n)=>VD(e,t,n))(e,t,n);if(!o.cancelled){const t=o.content,n=()=>qD(e,t,i);if(r){Vk(e,"insertFromPaste",{dataTransfer:KD(t)}).isDefaultPrevented()||(n(),jk(e,"insertFromPaste"))}else n()}},XD=(e,t,n,i)=>{const r=n||RD(t);ZD(e,(e=>e.replace(DD,""))(t),r,!1,i)},JD=(e,t,n)=>{const i=e.dom.encode(t).replace(/\r\n/g,"\n"),r=co(i,yd(e)),o=OD(r,Zl(e),Xl(e));ZD(e,o,!1,!0,n)},eI=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const i=e.types[n];try{t[i]=e.getData(i)}catch(e){t[i]=""}}return t},tI=(e,t)=>t in e&&e[t].length>0,nI=e=>tI(e,"text/html")||tI(e,"text/plain"),iI=(e,t,n,i)=>{const r=WD(),o=oc(e)&&w(n.name),s=o?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return w(n)?e.dom.encode(n[1]):void 0})(e,n.name):r,a=o?n.name:void 0,l=t.create(r,n,i,s,a);return t.add(l),l},rI=e=>{const t=kd(e);return e=>Ye(e.type,"image/")&&G(t,t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Ot.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type)},oI=(e,t,n)=>{const i="paste"===t.type?t.clipboardData:t.dataTransfer;var r;if(cd(e)&&i){const o=((e,t)=>{const n=t.items?ie(he(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],i=t.files?he(t.files):[];return K(n.length>0?n:i,rI(e))})(e,i);if(o.length>0)return t.preventDefault(),(r=o,Promise.all(Q(r,e=>aA(e).then(t=>({file:e,uri:t}))))).then(t=>{n&&e.selection.setRng(n),$(t,t=>{((e,t)=>{rA(t.uri).each(({data:n,type:i,base64Encoded:r})=>{const o=r?n:btoa(n),s=t.file,a=e.editorUpload.blobCache,l=a.getByData(o,i),c=null!=l?l:iI(e,a,s,o);XD(e,`<img src="${c.blobUri()}">`,!1,!0)})})(e,t)})}),!0}return!1},sI=(e,t,n,i,r)=>{let o=HD(n);const s=tI(t,LD())||RD(n),a=!s&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(o),l=GD(o);(UD(o)||!o.length||a&&!l)&&(i=!0),(i||l)&&(o=tI(t,"text/plain")&&a?t["text/plain"]:(e=>{const t=bs(),n=I_({},t);let i="";const r=t.getVoidElements(),o=Ot.makeMap("script noscript style textarea video audio iframe object"," "),s=t.getBlockElements(),a=e=>{const n=e.name,l=e;if("br"!==n){if("wbr"!==n)if(r[n]&&(i+=" "),o[n])i+=" ";else{if(3===e.type&&(i+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do{a(t)}while(t=t.next)}s[n]&&l.next&&(i+="\n","p"===n&&(i+="\n"))}}else i+="\n"};return e=zD(e,[/<!\[[^\]]+\]>/g]),a(n.parse(e)),i})(o)),UD(o)||(i?JD(e,o,r):XD(e,o,s,r))},aI=(e,t,n)=>{let i;e.on("keydown",e=>{(e=>Lp.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(i=e.shiftKey&&86===e.keyCode)}),e.on("paste",r=>{if(r.isDefaultPrevented()||(e=>{var t,n;return Lt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(r))return;const o="text"===n.get()||i;i=!1;const s=eI(r.clipboardData);!nI(s)&&oI(e,r,t.getLastRng()||e.selection.getRng())||(tI(s,"text/html")?(r.preventDefault(),sI(e,s,s["text/html"],o,!0)):tI(s,"text/plain")&&tI(s,"text/uri-list")?(r.preventDefault(),sI(e,s,s["text/plain"],o,!0)):(t.create(),qm.setEditorTimeout(e,()=>{const n=t.getHtml();t.remove(),sI(e,s,n,o,!1)},0)))})},lI=(e,t,n)=>{aI(e,t,n),(e=>{const t=e=>Ye(e,"webkit-fake-url"),n=e=>Ye(e,"data:");e.parser.addNodeFilter("img",(i,r,o)=>{if(!cd(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(o))for(const r of i){const i=r.attr("src");m(i)&&!r.attr("data-mce-object")&&i!==Lt.transparentSrc&&(t(i)||!bd(e)&&n(i))&&r.remove()}})})(e)},cI=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{((e,t)=>{"text"===t.get()?(t.set("html"),kp(e,!1)):(t.set("text"),kp(e,!0)),e.focus()})(e,t)}),e.addCommand("mceInsertClipboardContent",(t,n)=>{n.html&&XD(e,n.html,n.internal,!1),n.text&&JD(e,n.text,!1)})},dI=(e,t,n,i)=>{((e,t,n)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(LD(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),i()):n(t.html,i)},uI=e=>(t,n)=>{const{dom:i,selection:r}=e,o=i.create("div",{contenteditable:"false","data-mce-bogus":"all"}),s=i.create("div",{contenteditable:"true"},t);i.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(s),i.add(e.getBody(),o);const a=r.getRng();s.focus();const l=i.createRng();l.selectNodeContents(s),r.setRng(l),qm.setEditorTimeout(e,()=>{r.setRng(a),i.remove(o),n()},0)},hI=e=>({html:ID(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),pI=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),mI=e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&pI(e)&&e.selection.isEditable()&&dI(t,hI(e),uI(e),()=>{if(Lt.browser.isChromium()||Lt.browser.isFirefox()){const t=e.selection.getRng();qm.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&pI(e)&&dI(t,hI(e),uI(e),M)})(e))},fI=(e,t)=>{var n,i;return hm.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(i=t.clientY)&&void 0!==i?i:0,e.getDoc())},gI=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},vI=(e,t)=>{ld(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),cd(e)||e.on("drop",e=>{const t=e.dataTransfer;t&&(e=>G(e.files,e=>/^image\//.test(e.type)))(t)&&e.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const i=fI(e,n);if(_(i))return;const r=eI(n.dataTransfer),o=tI(r,LD());if((!nI(r)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(r))&&oI(e,n,i))return;const s=r[LD()],a=s||r["text/html"]||r["text/plain"],l=((e,t,n,i)=>{const r=e.getParent(n,e=>Po(t,e));if(!y(e.getParent(n,"summary")))return!0;if(r&&Ee(i,"text/html")){const e=(new DOMParser).parseFromString(i["text/html"],"text/html").body;return!y(e.querySelector(r.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,i.startContainer,r),c=t.get();c&&!l||a&&(n.preventDefault(),qm.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(s||c&&l)&&e.execCommand("Delete"),gI(e,i);const t=HD(a);r["text/html"]?XD(e,t,o,!0):JD(e,t,!0)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",n=>{cd(e)&&!t.get()&&(n.preventDefault(),gI(e,fI(e,n))),"dragend"===n.type&&t.set(!1)}),(e=>{e.on("input",t=>{const n=e=>y(e.querySelector("summary"));if("deleteByDrag"===t.inputType){const t=K(e.dom.select("details"),n);$(t,t=>{sr(t.firstChild)&&t.firstChild.remove();const n=e.dom.create("summary");n.appendChild(Dr().dom),t.prepend(n)})}})})(e)},yI=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,bI=e=>Ot.trim(e).replace(yI,ks).toLowerCase(),AI=(e,t,n)=>{const i=pd(e);if(n||"all"===i||!md(e))return t;const r=i?i.split(/[, ]/):[];if(r&&"none"!==i){const n=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,o,s)=>{const a=n.parseStyle(n.decode(o)),l={};for(let e=0;e<r.length;e++){const t=a[r[e]];let o=t,s=n.getStyle(i,r[e],!0);/color/.test(r[e])&&(o=bI(o),s=bI(s)),s!==o&&(l[r[e]]=t)}const c=n.serializeStyle(l,"span");return c?t+' style="'+c+'"'+s:t+s})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,i)=>t+' style="'+n+'"'+i),t},_I=e=>{const t=Js(!1),n=Js(vd(e)?"text":"html"),i=FD(e);(e=>{(Lt.browser.isChromium()||Lt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})})(e,AI)})(e),cI(e,n),(e=>{const t=t=>n=>{t(e,n)},n=dd(e);x(n)&&e.on("PastePreProcess",t(n));const i=ud(e);x(i)&&e.on("PastePostProcess",t(i))})(e),e.on("PreInit",()=>{mI(e),vI(e,t),lI(e,i,n)})},wI=e=>{(e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})})(e),(e=>{e.parser.addNodeFilter("details",t=>{const n=Dd(e);$(t,e=>{"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=Id(e);$(t,e=>{"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)})})})(e)},xI=sr,CI=er,EI=e=>cr(e.dom),MI=e=>t=>xn(bn.fromDom(e),t),SI=(e,t,n)=>Zn(bn.fromDom(e),e=>(e=>lr(e.dom))(e)||n.isBlock(Yt(e)),MI(t)).getOr(bn.fromDom(t)).dom,TI=(e,t)=>Zn(bn.fromDom(e),EI,MI(t)),kI=(e,t,n)=>{const i=new Hi(e,t),r=n?i.next.bind(i):i.prev.bind(i);let o=e;for(let t=n?e:r();t&&!xI(t);t=r())no(t)&&(o=t);return o},LI=e=>{const t=((e,t,n)=>{const i=rl.fromRangeStart(e).getNode(),r=SI(i,t,n),o=kI(i,r,!1),s=kI(i,r,!0),a=document.createRange();return TI(o,r).fold(()=>{CI(o)?a.setStart(o,0):a.setStartBefore(o)},e=>a.setStartBefore(e.dom)),TI(s,r).fold(()=>{CI(s)?a.setEnd(s,s.data.length):a.setEndAfter(s)},e=>a.setEndAfter(e.dom)),a})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(yy(t))};var DI;!function(e){e.Before="before",e.After="after"}(DI||(DI={}));const II=(e,t)=>Math.abs(e.left-t),RI=(e,t)=>Math.abs(e.right-t),OI=(e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5},PI=(e,t)=>(e=>X(e,(e,t)=>e.fold(()=>F.some(t),e=>{const n=Math.min(t.left,e.left),i=Math.min(t.top,e.top),r=Math.max(t.right,e.right),o=Math.max(t.bottom,e.bottom);return F.some({top:i,right:r,bottom:o,left:n,width:r-n,height:o-i})}),F.none()))(K(e,e=>{return(n=t)>=(i=e).top&&n<=i.bottom;var n,i})).fold(()=>[[],e],t=>{const{pass:n,fail:i}=W(e,e=>OI(e,t));return[n,i]}),BI=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),NI=(e,t,n,i)=>{const r=e=>no(e.node)?F.some(e):Yi(e.node)?NI(he(e.node.childNodes),t,n,!1):F.none(),o=(e,o)=>{const s=le(e,(e,i)=>o(e,t,n)-o(i,t,n));return pe(s,r).map(e=>i&&!er(e.node)&&s.length>1?((e,i,o)=>r(i).filter(i=>Math.abs(o(e,t,n)-o(i,t,n))<2&&er(i.node)))(e,s[1],o).getOr(e):e)},[s,a]=PI(kE(e),n),{pass:l,fail:c}=W(a,e=>e.top<n);return o(s,BI).orThunk(()=>o(c,Pa)).orThunk(()=>o(l,Pa))},UI=(e,t,n)=>{const i=bn.fromDom(e),r=Mn(i),o=bn.fromPoint(r,t,n).filter(e=>Cn(i,e)).getOr(i);return((e,t,n,i)=>{const r=(t,o)=>{const s=K(t.dom.childNodes,R(e=>Yi(e)&&e.classList.contains("mce-drag-container")));return o.fold(()=>NI(s,n,i,!0),e=>{const t=K(s,t=>t!==e.dom);return NI(t,n,i,!0)}).orThunk(()=>(xn(t,e)?F.none():kn(t)).bind(e=>r(e,F.some(t))))};return r(t,F.none())})(i,o,t,n)},FI=(e,t,n)=>UI(e,t,n).filter(e=>Xd(e.node)).map(e=>((e,t)=>({node:e.node,position:II(e,t)<RI(e,t)?DI.Before:DI.After}))(e,t)),zI=e=>{var t,n;const i=e.getBoundingClientRect(),r=e.ownerDocument,o=r.documentElement,s=r.defaultView;return{top:i.top+(null!==(t=null==s?void 0:s.scrollY)&&void 0!==t?t:0)-o.clientTop,left:i.left+(null!==(n=null==s?void 0:s.scrollX)&&void 0!==n?n:0)-o.clientLeft}},HI=(e,t)=>{return n=(e=>e.inline?zI(e.getBody()):{left:0,top:0})(e),i=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),r=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=zI(e.getContentAreaContainer()),i=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,i={left:t.scrollLeft,top:t.scrollTop},r={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?i:r})(e);return{left:t.pageX-n.left+i.left,top:t.pageY-n.top+i.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:r.left-n.left+i.left,pageY:r.top-n.top+i.top};var n,i,r},jI=e=>({target:e,srcElement:e}),VI=(e,t,n,i)=>{const r=((e,t)=>{const n=SD(e);return"dragstart"===t?(dD(n),yD(n)):"drop"===t?(uD(n),bD(n)):(hD(n),AD(n)),n})(n,e);return A(i)?((e,t,n)=>{const i=O("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:i,initEvent:i,preventDefault:M,stopImmediatePropagation:M,stopPropagation:M,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:n,...jI(t)}})(e,t,r):((e,t,n,i)=>({...t,dataTransfer:i,type:e,...jI(n)}))(e,i,t,r)},YI=cr,GI=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(YI,lr),QI=(e,t,n,i)=>{const r=e.dom,o=t.cloneNode(!0);r.setStyles(o,{width:n,height:i}),r.setAttrib(o,"data-mce-selected",null);const s=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(s,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),s.appendChild(o),s},$I=(e,t)=>n=>()=>{const i="left"===e?n.scrollX:n.scrollY;n.scroll({[e]:i+t,behavior:"smooth"})},qI=$I("left",-32),WI=$I("left",32),KI=$I("top",-32),ZI=$I("top",32),XI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},JI=(e,t)=>n=>{if((e=>0===e.button)(n)){const i=ee(t.dom.getParents(n.target),GI).getOr(null);if(w(i)&&((e,t,n)=>YI(n)&&n!==t&&e.isEditable(n.parentElement))(t.dom,t.getBody(),i)){const r=t.dom.getPos(i),o=t.getBody(),s=t.getDoc().documentElement;e.set({element:i,dataTransfer:MD(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?o.scrollWidth:s.offsetWidth)-2,maxY:(t.inline?o.scrollHeight:s.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:i.offsetWidth,height:i.offsetHeight,ghost:QI(t,i,i.offsetWidth,i.offsetHeight),intervalId:oa(100)})}}},eR=(e,t,n,i,r)=>{"dragstart"===t&&TD(i,e.dom.getOuterHTML(n));const o=VI(t,n,i,r);return e.dispatch(t,o)},tR=(e,t)=>{const n=aa((e,n)=>((e,t,n)=>{e._selectionOverrides.hideFakeCaret(),FI(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),i=>{const r=e._selectionOverrides.showCaret(1,i.node,i.position===DI.Before,!1);r?e.selection.setRng(r):e.selection.placeCaretAt(t,n)})})(t,e,n),0);t.on("remove",n.cancel);const i=e;return r=>e.on(e=>{const o=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(!e.dragging&&o>10){const n=eR(t,"dragstart",e.element,e.dataTransfer,r);if(w(n.dataTransfer)&&(e.dataTransfer=n.dataTransfer),n.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const o=r.currentTarget===t.getDoc().documentElement,l=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,HI(t,r));s=e.ghost,a=t.getBody(),s.parentNode!==a&&a.appendChild(s),((e,t,n,i,r,o,s,a,l,c,d,u)=>{let h=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>r&&(h=t.pageX+n-r),t.pageY+i>o&&(p=t.pageY+i-o),e.style.width=n-h+"px",e.style.height=i-p+"px";const m=l.clientHeight,f=l.clientWidth,g=s+l.getBoundingClientRect().top,v=a+l.getBoundingClientRect().left;d.on(e=>{e.intervalId.clear(),e.dragging&&u&&(s+8>=m?e.intervalId.set(ZI(c)):s-8<=0?e.intervalId.set(KI(c)):a+8>=f?e.intervalId.set(WI(c)):a-8<=0?e.intervalId.set(qI(c)):g+16>=window.innerHeight?e.intervalId.set(ZI(window)):g-16<=0?e.intervalId.set(KI(window)):v+16>=window.innerWidth?e.intervalId.set(WI(window)):v-16<=0&&e.intervalId.set(qI(window)))})})(e.ghost,l,e.width,e.height,e.maxX,e.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),i,o),n.throttle(r.clientX,r.clientY)}var s,a})},nR=(e,t)=>n=>{e.on(e=>{var i;if(e.intervalId.clear(),e.dragging){if(((e,t,n)=>!_(t)&&t!==n&&!e.dom.isChildOf(t,n)&&e.dom.isEditable(t))(t,(e=>{const t=e.getSel();if(w(t)){const e=t.getRangeAt(0).startContainer;return er(e)?e.parentNode:e}return null})(t.selection),e.element)){const r=null!==(i=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==i?i:t.getBody();eR(t,"drop",r,e.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);XI(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Ir(bn.fromDom(n))})(t.dom,e.element),(e=>{const t=e.getData("text/html");return""===t?F.none():F.some(t)})(e.dataTransfer).each(e=>t.insertContent(e)),t._selectionOverrides.hideFakeCaret()})}eR(t,"dragend",t.getBody(),e.dataTransfer,n)}}),rR(e)},iR=(e,t,n)=>{e.on(e=>{e.intervalId.clear(),e.dragging&&n.fold(()=>eR(t,"dragend",e.element,e.dataTransfer),n=>eR(t,"dragend",e.element,e.dataTransfer,n))}),rR(e)},rR=e=>{e.on(e=>{e.intervalId.clear(),XI(e.ghost)}),e.clear()},oR=e=>{const t=sa(),n=Ks.DOM,i=document,r=JI(t,e),o=tR(t,e),s=nR(t,e),a=((e,t)=>n=>iR(e,t,F.some(n)))(t,e);e.on("mousedown",r),e.on("mousemove",o),e.on("mouseup",s),n.bind(i,"mousemove",o),n.bind(i,"mouseup",a),e.on("remove",()=>{n.unbind(i,"mousemove",o),n.unbind(i,"mouseup",a)}),e.on("keydown",n=>{n.keyCode===Lp.ESC&&iR(t,e,F.none())})},sR=e=>{oR(e),Zc(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(Y(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&mx(e,"Dropped file type is not supported"))}},n=n=>{Jm(e,n.target)&&t(n)},i=()=>{const i=Ks.DOM,r=e.dom,o=document,s=e.inline?e.getBody():e.getDoc(),a=["drop","dragover"];$(a,e=>{i.bind(o,e,n),r.bind(s,e,t)}),e.on("remove",()=>{$(a,e=>{i.unbind(o,e,n),r.unbind(s,e,t)})})};e.on("init",()=>{qm.setEditorTimeout(e,i,0)})})(e)},aR=cr,lR=(e,t)=>ny(e.getBody(),t),cR=e=>{const t=e.selection,n=e.dom,i=e.getBody(),r=Wd(e,i,n.isBlock,()=>lf(e)),o="sel-"+n.uniqueId(),s="data-mce-selected";let a;const l=e=>e!==i&&(aR(e)||hr(e))&&n.isChildOf(e,i)&&n.isEditable(e.parentNode),c=(n,i,o,s=!0)=>e.dispatch("ShowCaret",{target:i,direction:n,before:o}).isDefaultPrevented()?null:(s&&t.scrollIntoView(i,-1===n),r.show(o,i)),d=()=>{e.on("click",t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",t=>{const n=t.target,i=lR(e,n);aR(i)?(t.preventDefault(),pC(e,i).each(f)):l(n)&&pC(e,n).each(f)},!0),e.on("mousedown",r=>{const o=r.target;if(o!==i&&"HTML"!==o.nodeName&&!n.isChildOf(o,i))return;if(!ax(e,r.clientX,r.clientY))return;g(),v();const s=lR(e,o);aR(s)?(r.preventDefault(),pC(e,s).each(f)):FI(i,r.clientX,r.clientY).each(n=>{r.preventDefault();(e=>{e&&t.setRng(e)})(c(1,n.node,n.position===DI.Before,!1)),Gi(s)?s.focus():e.getBody().focus()})}),e.on("keypress",e=>{Lp.modifierPressed(e)||aR(t.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let t=e.range;if(a){if(!a.parentNode)return void(a=null);t=t.cloneRange(),t.selectNode(a),e.range=t}}),e.on("SetSelectionRange",e=>{e.range=p(e.range);const t=f(e.range,e.forward);t&&(e.range=t)});e.on("AfterSetSelectionRange",e=>{const t=e.range,i=t.startContainer.parentElement;var r;h(t)||Yi(r=i)&&"mcepastebin"===r.id||v(),(e=>w(e)&&n.hasClass(e,"mce-offscreen-selection"))(i)||g()}),sR(e),(e=>{const t=aa(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=mC(e,t,!1);e.selection.setRng(n)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})})(e),(e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(hr(n)){const t=ny(e.getBody(),n),i=cr(t)?t:n;e.selection.getNode()!==i&&pC(e,i).each(t=>e.selection.setRng(t))}})})})(e)},u=e=>zr(e)||Yr(e)||Gr(e),h=e=>u(e.startContainer)||u(e.endContainer),p=t=>{const i=e.schema.getVoidElements(),r=n.createRng(),o=t.startContainer,s=t.startOffset,a=t.endContainer,l=t.endOffset;return Ee(i,o.nodeName.toLowerCase())?0===s?r.setStartBefore(o):r.setStartAfter(o):r.setStart(o,s),Ee(i,a.nodeName.toLowerCase())?0===l?r.setEndBefore(a):r.setEndAfter(a):r.setEnd(a,l),r},m=i=>{const r=i.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:i,targetClone:r});if(l.isDefaultPrevented())return null;const c=((i,r)=>{const s=bn.fromDom(e.getBody()),a=e.getDoc(),l=ti(s,"#"+o).getOrThunk(()=>{const e=bn.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',a);return en(e,"id",o),vi(s,e),e}),c=n.createRng();Ai(l),bi(l,[bn.fromText(vr,a),bn.fromDom(r),bn.fromText(vr,a)]),c.setStart(l.dom.firstChild,1),c.setEnd(l.dom.lastChild,0),li(l,{top:n.getPos(i,e.getBody()).y+"px"}),Pm(l);const d=t.getSel();return d&&(d.removeAllRanges(),d.addRange(c)),c})(i,l.targetClone),d=bn.fromDom(i);return $(Fi(bn.fromDom(e.getBody()),`*[${s}]`),e=>{xn(d,e)||sn(e,s)}),n.getAttrib(i,s)||i.setAttribute(s,"1"),a=i,v(),c},f=(e,t)=>{if(!e)return null;if(e.collapsed){if(!h(e)){const r=t?1:-1,o=wu(r,i,e),s=o.getNode(!t);if(w(s)){if(Xd(s))return c(r,s,!!t&&!o.isAtEnd(),!1);if(Fr(s)&&cr(s.nextSibling)){const e=n.createRng();return e.setStart(s,0),e.setEnd(s,0),e}}const a=o.getNode(t);if(w(a)){if(Xd(a))return c(r,a,!t&&!o.isAtEnd(),!1);if(Fr(a)&&cr(a.previousSibling)){const e=n.createRng();return e.setStart(a,1),e.setEnd(a,1),e}}}return null}let r=e.startContainer,o=e.startOffset;const s=e.endOffset;if(er(r)&&0===o&&aR(r.parentNode)&&(r=r.parentNode,o=n.nodeIndex(r),r=r.parentNode),!Yi(r))return null;if(s===o+1&&r===e.endContainer){const e=r.childNodes[o];if(l(e))return m(e)}return null},g=()=>{a&&a.removeAttribute(s),ti(bn.fromDom(e.getBody()),"#"+o).each(_i),a=null},v=()=>{r.hide()};return vw(e)||d(),{showCaret:c,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Qr(e),t.scrollIntoView(e))},hideFakeCaret:v,destroy:()=>{r.destroy(),a=null}}},dR=(e,t)=>{let n=t;for(let t=e.previousSibling;er(t);t=t.previousSibling)n+=t.data.length;return n},uR=(e,t,n,i,r)=>{if(er(n)&&(i<0||i>n.data.length))return[];const o=r&&er(n)?[dR(n,i)]:[i];let s=n;for(;s!==t&&s.parentNode;)o.push(e.nodeIndex(s,r)),s=s.parentNode;return s===t?o.reverse():[]},hR=(e,t,n,i,r,o,s=!1)=>({start:uR(e,t,n,i,s),end:uR(e,t,r,o,s)}),pR=(e,t)=>{const n=t.slice(),i=n.pop();if(C(i)){return X(n,(e,t)=>e.bind(e=>F.from(e.childNodes[t])),F.some(e)).bind(e=>er(e)&&(i<0||i>e.data.length)?F.none():F.some({node:e,offset:i}))}return F.none()},mR=(e,t)=>pR(e,t.start).bind(({node:n,offset:i})=>pR(e,t.end).map(({node:e,offset:t})=>{const r=document.createRange();return r.setStart(n,i),r.setEnd(e,t),r})),fR=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const i=t.parentNode;e.remove(t,er(t.firstChild)&&so(t.firstChild.data)),fR(e,i,n)}},gR=(e,t,n,i=!0)=>{const r=t.startContainer.parentNode,o=t.endContainer.parentNode;t.deleteContents(),i&&!n(t.startContainer)&&(er(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),er(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),fR(e,r,n),r!==o&&fR(e,o,n))},vR=(e,t)=>F.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),yR=(e,t,n)=>{const i=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Ol(i).concat(e.blockPatterns),inlinePatterns:Pl(i).concat(e.inlinePatterns)}},bR=(e,t,n,i)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,i),r.toString()},AR=(e,t,n)=>{const i=((e,t,n)=>{if(er(e)&&t>=e.length)return F.some(jS(e,t));{const i=Ta(VS);return F.from(i.forwards(e,t,YS(e),n)).map(e=>jS(e.container,0))}})(t,0,t);i.each(i=>{const r=i.container;$S(r,n.start.length,t).each(n=>{const i=e.createRng();i.setStart(r,0),i.setEnd(n.container,n.offset),gR(e,i,e=>e===t)});const o=bn.fromDom(r),s=Ar(o);/^\s[^\s]/.test(s)&&((e,t)=>{br.set(e,t)})(o,s.slice(1))})},_R=(e,t)=>{const n=e.dom,i=t.pattern,r=mR(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return vR(e,r).each(t=>{"block-format"===i.type?((e,t)=>{const n=t.get(e);return v(n)&&de(n).exists(e=>Ee(e,"block"))})(i.format,e.formatter)&&e.undoManager.transact(()=>{AR(e.dom,t,i),e.formatter.apply(i.format)}):"block-command"===i.type&&e.undoManager.transact(()=>{AR(e.dom,t,i),e.execCommand(i.cmd,!1,i.value)})}),!0},wR=(e,t)=>{const n=(e=>le(e,(e,t)=>t.start.length-e.start.length))(e),i=t.replace(vr," ");return ee(n,e=>0===t.indexOf(e.start)||0===i.indexOf(e.start))},xR=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),CR=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},ER=(e,t,n)=>{const i=mR(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=i.startContainer,o=i.endContainer,s=0===i.endOffset?o:o.splitText(i.endOffset),a=0===i.startOffset?r:r.splitText(i.startOffset),l=a.parentNode;return{prefix:t,end:s.parentNode.insertBefore(xR(e,t+"-end"),s),start:l.insertBefore(xR(e,t+"-start"),a)}},MR=(e,t,n)=>{fR(e,e.get(t.prefix+"-end"),n),fR(e,e.get(t.prefix+"-start"),n)},SR=e=>0===e.start.length,TR=(e,t,n,i)=>{const r=t.start;var o;return qS(e,i.container,i.offset,(o=r,(e,t)=>{const n=e.data.substring(0,t),i=n.lastIndexOf(o.charAt(o.length-1)),r=n.lastIndexOf(o);return-1!==r?r+o.length:-1!==i?i+1:-1}),n).bind(i=>{var o,s;const a=null!==(s=null===(o=n.textContent)||void 0===o?void 0:o.indexOf(r))&&void 0!==s?s:-1;if(-1!==a&&i.offset>=a+r.length){const t=e.createRng();return t.setStart(i.container,i.offset-r.length),t.setEnd(i.container,i.offset),F.some(t)}{const o=i.offset-r.length;return QS(i.container,o,n).map(t=>{const n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(i.container,i.offset),n}).filter(e=>e.toString()===r).orThunk(()=>TR(e,t,n,jS(i.container,0)))}})},kR=(e,t,n,i)=>{const r=e.dom,o=r.getRoot(),s=n.pattern,a=n.position.container,l=n.position.offset;return QS(a,l-n.pattern.end.length,t).bind(c=>{const d=hR(r,o,c.container,c.offset,a,l,i);if(SR(s))return F.some({matches:[{pattern:s,startRng:d,endRng:d}],position:c});{const a=LR(e,n.remainingPatterns,c.container,c.offset,t,i),l=a.getOr({matches:[],position:c}),u=l.position,h=((e,t,n,i,r,o=!1)=>{if(0===t.start.length&&!o){const t=e.createRng();return t.setStart(n,i),t.setEnd(n,i),F.some(t)}return GS(n,i,r).bind(n=>TR(e,t,r,n).bind(e=>{var t;if(o){if(e.endContainer===n.container&&e.endOffset===n.offset)return F.none();if(0===n.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return F.none()}return F.some(e)}))})(r,s,u.container,u.offset,t,a.isNone());return h.map(e=>{const t=((e,t,n,i=!1)=>hR(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,i))(r,o,e,i);return{matches:l.matches.concat([{pattern:s,startRng:t,endRng:d}]),position:jS(e.startContainer,e.startOffset)}})}})},LR=(e,t,n,i,r,o)=>{const s=e.dom;return GS(n,i,s.getRoot()).bind(a=>{const l=bR(s,r,n,i);for(let s=0;s<t.length;s++){const c=t[s];if(!Ge(l,c.end))continue;const d=t.slice();d.splice(s,1);const u=kR(e,r,{pattern:c,remainingPatterns:d,position:a},o);if(u.isNone()&&i>0)return LR(e,t,n,i-1,r,o);if(u.isSome())return u}return F.none()})},DR=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?$(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},IR=(e,t,n,i,r,o)=>{var s;return((e,t)=>{const n=re(e,e=>G(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t})(LR(e,r.inlinePatterns,n,i,t,o).fold(()=>[],e=>e.matches),LR(e,(s=r.inlinePatterns,le(s,(e,t)=>t.end.length-e.end.length)),n,i,t,o).fold(()=>[],e=>e.matches))},RR=(e,t)=>{if(0===t.length)return;const n=e.dom,i=e.selection.getBookmark(),r=((e,t)=>{const n=wa("mce_textpattern"),i=Z(t,(t,i)=>{const r=ER(e,n+`_end${t.length}`,i.endRng);return t.concat([{...i,endMarker:r}])},[]);return Z(i,(t,r)=>{const o=i.length-t.length-1,s=SR(r.pattern)?r.endMarker:ER(e,n+`_start${o}`,r.startRng);return t.concat([{...r,startMarker:s}])},[])})(n,t);$(r,t=>{const i=n.getParent(t.startMarker.start,n.isBlock),r=e=>e===i;SR(t.pattern)?((e,t,n,i)=>{const r=CR(e.dom,n);gR(e.dom,r,i),DR(e,t,r)})(e,t.pattern,t.endMarker,r):((e,t,n,i,r)=>{const o=e.dom,s=CR(o,i),a=CR(o,n);gR(o,a,r),gR(o,s,r);const l={prefix:n.prefix,start:n.end,end:i.start},c=CR(o,l);DR(e,t,c)})(e,t.pattern,t.startMarker,t.endMarker,r),MR(n,t.endMarker,r),MR(n,t.startMarker,r)}),e.selection.moveToBookmark(i)},OR=(e,t)=>{const n=e.selection.getRng();return vR(e,n).map(i=>{var r;const o=Math.max(0,n.startOffset),s=yR(t,i,null!==(r=i.textContent)&&void 0!==r?r:""),a=IR(e,i,n.startContainer,o,s,!0),l=((e,t,n,i)=>{var r;const o=e.dom,s=Zl(e);if(!o.is(t,s))return[];const a=null!==(r=t.textContent)&&void 0!==r?r:"";return wR(n.blockPatterns,a).map(e=>Ot.trim(a).length===e.start.length?[]:[{pattern:e,range:hR(o,o.getRoot(),t,0,t,0,i)}]).getOr([])})(e,i,s,!0);return(l.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{(e=>{e.insertContent(Rr,{preserve_zwsp:!0})})(e),RR(e,a),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();$(t,t=>_R(e,t)),e.selection.moveToBookmark(n)})(e,l);const t=e.selection.getRng(),n=GS(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each(t=>{const n=t.container;n.data.charAt(t.offset-1)===gr&&(n.deleteData(t.offset-1,1),fR(e.dom,n.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)},PR=(e,t,n)=>{for(let i=0;i<e.length;i++)if(n(e[i],t))return!0;return!1},BR=e=>{const t=[",",".",";",":","!","?"],n=[32],i=()=>{return t=Ad(e),n=_d(e),{inlinePatterns:Pl(t),blockPatterns:Ol(t),dynamicPatternsLookup:n};var t,n},r=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",t=>{if(13===t.keyCode&&!Lp.modifierPressed(t)&&e.selection.isCollapsed()){const n=i();(n.inlinePatterns.length>0||n.blockPatterns.length>0||r())&&OR(e,n)&&t.preventDefault()}},!0);const o=()=>{if(e.selection.isCollapsed()){const t=i();(t.inlinePatterns.length>0||r())&&((e,t)=>{const n=e.selection.getRng();vR(e,n).map(i=>{const r=Math.max(0,n.startOffset-1),o=bR(e.dom,i,n.startContainer,r),s=yR(t,i,o),a=IR(e,i,n.startContainer,r,s,!1);a.length>0&&e.undoManager.transact(()=>{RR(e,a)})})})(e,t)}};e.on("keyup",e=>{PR(n,e,(e,t)=>e===t.keyCode&&!Lp.modifierPressed(t))&&o()}),e.on("keypress",n=>{PR(t,n,(e,t)=>e.charCodeAt(0)===t.charCode)&&qm.setEditorTimeout(e,o)})},NR=e=>{const t=Ot.each,n=Lp.BACKSPACE,i=Lp.DELETE,r=e.dom,o=e.selection,s=e.parser,a=Lt.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=Lt.deviceType.isiPhone()||Lt.deviceType.isiPad(),u=Lt.os.isMacOS()||Lt.os.isiOS(),h=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},p=e=>e.isDefaultPrevented(),f=()=>{const t=e=>{const t=r.create("body"),n=e.cloneContents();return t.appendChild(n),o.serializer.serialize(t,{format:"html"})};e.on("keydown",o=>{const s=o.keyCode;if(!p(o)&&(s===i||s===n)&&e.selection.isEditable()){const n=e.selection.isCollapsed(),i=e.getBody();if(n&&!bo(bn.fromDom(i)))return;if(!n&&!(n=>{const i=t(n),o=r.createRng();return o.selectNode(e.getBody()),i===t(o)})(e.selection.getRng()))return;o.preventDefault(),e.setContent(""),i.firstChild&&r.isBlock(i.firstChild)?e.selection.setCursorLocation(i.firstChild,0):e.selection.setCursorLocation(i,0),e.nodeChanged()}})},g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},v=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",t=>{let n;if(t.target===e.getDoc().documentElement)if(n=o.getRng(),e.getBody().focus(),"mousedown"===t.type){if(zr(n.startContainer))return;o.placeCaretAt(t.clientX,t.clientY)}else o.setRng(n)})},y=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!p(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),qm.setEditorTimeout(e,()=>{t.focus()})}})},b=()=>{const t=ed(e);e.on("click",n=>{const i=n.target;/^(IMG|HR)$/.test(i.nodeName)&&r.isEditable(i)&&(n.preventDefault(),e.selection.select(i),e.nodeChanged()),"A"===i.nodeName&&r.hasClass(i,t)&&0===i.childNodes.length&&r.isEditable(i.parentNode)&&(n.preventDefault(),o.select(i))})},A=()=>{e.on("keydown",e=>{if(!p(e)&&e.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){const t=o.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},_=()=>{const t=()=>{h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),Cc(e)||h("enableObjectResizing",!1)};Qc(e)||e.on("BeforeExecCommand mousedown",t)},w=()=>{e.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(r.select("a:not([data-mce-block])"),e=>{var t;let n=e.parentNode;const i=r.getRoot();if((null==n?void 0:n.lastChild)===e){for(;n&&!r.isBlock(n);){if((null===(t=n.parentNode)||void 0===t?void 0:t.lastChild)!==n||n===i)return;n=n.parentNode}r.add(n,"br",{"data-mce-bogus":1})}})})},x=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},C=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},E=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())}))},S=()=>{u&&e.on("keydown",t=>{if(Lp.metaKeyPressed(t)&&!t.shiftKey&&(37===t.keyCode||39===t.keyCode)){t.preventDefault();e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary")}})},T=()=>{e.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})},L=M,D=()=>{e.on("keydown",t=>{if(p(t)||t.keyCode!==Lp.BACKSPACE)return;let n=o.getRng();const i=n.startContainer,s=n.startOffset,a=r.getRoot();let l=i;if(n.collapsed&&0===s){for(;l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==a;)l=l.parentNode;"BLOCKQUOTE"===l.nodeName&&(e.formatter.toggle("blockquote",void 0,l),n=r.createRng(),n.setStart(i,0),n.setEnd(i,0),o.setRng(n))}}),f(),Lt.windowsPhone||e.on("keyup focusin mouseup",t=>{Lp.modifierPressed(t)||(e=>{const t=e.getBody(),n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&0===n.startOffset&&n.endOffset===t.childNodes.length})(e)||o.normalize()},!0),c&&(v(),b(),e.on("init",()=>{h("DefaultParagraphSeparator",Zl(e))}),k(),A(),s.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),d?(C(),E(),T()):g()),l&&(e.on("keydown",t=>{if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){const e=o.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return r.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(r.remove(n),t.preventDefault())}}}),y(),(()=>{const n=()=>{const n=r.getAttribs(o.getStart().cloneNode(!1));return()=>{const i=o.getStart();i!==e.getBody()&&(r.setAttrib(i,"style",null),t(n,e=>{i.setAttributeNode(e.cloneNode(!0))}))}},i=()=>!o.isCollapsed()&&r.getParent(o.getStart(),r.isBlock)!==r.getParent(o.getEnd(),r.isBlock);e.on("keypress",t=>{let r;return!(!(p(t)||8!==t.keyCode&&46!==t.keyCode)&&i()&&(r=n(),e.getDoc().execCommand("delete",!1),r(),t.preventDefault(),1))}),r.bind(e.getDoc(),"cut",t=>{if(!p(t)&&i()){const t=n();qm.setEditorTimeout(e,()=>{t()})}})})(),_(),w(),x(),S(),A(),e.on("drop",t=>{var n;const i=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/html");m(i)&&/^<img[^>]*>$/.test(i)&&e.dispatch("dragend",new window.DragEvent("dragend",t))}))};return vw(e)?(c&&(v(),b(),k(),g(),d&&(C(),E(),T())),l&&(y(),_(),x(),S())):D(),{refreshContentEditable:L,isHidden:()=>{if(!l||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},UR=Ks.DOM,FR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,zR=e=>_e(e,e=>!1===A(e)),HR=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return zR({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:FR(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},jR=e=>{const t=e.options.get;return zR({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},VR=e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||Eh(e)&&e.selection.getStart(!0)!==t||qu(t).each(t=>{const n=t.getNode(),i=Zi(n)?qu(n).getOr(t):t;e.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const t=id(e);x(t)&&t.call(e,e),(e=>{const t=od(e);t&&qm.setEditorTimeout(e,()=>{let n;n=!0===t?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(e)},YR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,GR=e=>{const t=YR(e),n=_c(e),i=e.contentCSS,r=()=>{t.unloadAll(i),e.inline||e.ui.styleSheetLoader.unloadAll(n)},o=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let t="";Ot.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}const s=Promise.all(((e,t,n)=>{const{pass:i,fail:r}=W(t,e=>tinymce.Resource.has(yx(e))),o=i.map(t=>{const n=tinymce.Resource.get(yx(t));return m(n)?Promise.resolve(YR(e).loadRawCss(t,n)):Promise.resolve()}),s=[...o,YR(e).loadAll(r)];return e.inline?s:s.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,i,n)).then(o).catch(o),a=Ac(e);return a&&((e,t)=>{const n=bn.fromDom(e.getBody()),i=Yn(Vn(n)),r=bn.fromTag("style");en(r,"type","text/css"),vi(r,bn.fromText(t)),vi(i,r),e.on("remove",()=>{_i(r)})})(e,a),s},QR=e=>{!0!==e.removed&&((e=>{vw(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),VR(e))},$R=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(UR.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const i=e.getBody();i.disabled=!0,e.readonly=Qc(e),e._editableRoot=$c(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===UR.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable="true"),i.disabled=!1,e.editorUpload=kx(e),e.schema=bs(jR(e)),e.dom=Ks(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:pc(e),referrerPolicy:mc(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)},force_hex_color:Rd(e)}),e.parser=(e=>{const t=I_(HR(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,n)=>{const i=e.dom,r="data-mce-"+n;let o=t.length;for(;o--;){const s=t[o];let a=s.attr(n);if(a&&!s.attr(r)){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===n?(a=i.serializeStyle(i.parseStyle(a),s.name),a.length||(a=null),s.attr(r,a),s.attr(n,a)):"tabindex"===n?(s.attr(r,a),s.attr(n,null)):s.attr(r,e.convertURL(a,n,s.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){const n=e[t],i=n.attr("type")||"no/type";0!==i.indexOf("mce-")&&n.attr("type","mce-"+i)}}),Ed(e)&&t.addNodeFilter("#cdata",t=>{var n;let i=t.length;for(;i--;){const r=t[i];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode(null!==(n=r.value)&&void 0!==n?n:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let n=t.length;const i=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(i)&&0===e.getAll("br").length&&e.append(new Tf("br",1))}}),t})(e),e.serializer=Ow((e=>{const t=e.options.get;return{...HR(e),...jR(e),...zR({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=kw(e.dom,e.getWin(),e.serializer,e),e.annotator=_p(e),e.formatter=Hx(e),e.undoManager=Vx(e),e._nodeChangeDispatcher=new sD(e),e._selectionOverrides=cR(e),RM(e),wI(e),jM(e),vw(e)||((e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),LI(e))})})(e),(e=>{BR(e)})(e));const r=oD(e);DM(e,r),(e=>{e.on("NodeChange",I(UM,e))})(e),qx(e),_I(e);const o=yw(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),sd(e)||(t.body.spellcheck=!1,UR.setAttrib(n,"spellcheck","false")),e.quirks=NR(e),(e=>{e.dispatch("PostRender")})(e);const i=wc(e);void 0!==i&&(n.dir=i);const r=ad(e);r&&e.on("BeforeSetContent",e=>{Ot.each(r,t=>{e.content=e.content.replace(t,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})})(e),o.fold(()=>{const t=(e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}})(e);GR(e).then(()=>{QR(e),t()})},t=>{e.setProgressState(!0),GR(e).then(()=>{t().then(t=>{e.setProgressState(!1),QR(e),_w(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),QR(e),_w(e)})})})},qR=U,WR=Ks.DOM,KR=(e,t)=>{const n=e.translate("Rich Text Area"),i=rn(bn.fromDom(e.getElement()),"tabindex").bind(Xe),r=((e,t,n,i)=>{const r=bn.fromTag("iframe");return i.each(e=>en(r,"tabindex",e)),tn(r,n),tn(r,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),pn(r,"tox-edit-area__iframe"),r})(e.id,n,Yl(e),i).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=(e=>{let t=Gl(e)+"<html><head>";Ql(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=$l(e),i=ql(e),r=e.translate(td(e));return Wl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Wl(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${i}" data-id="${e.id}" aria-label="${r}"><br></body></html>`,t})(e),WR.add(t.iframeContainer,r)},ZR=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,$R(e)};if(Td(e)||Lt.browser.isFirefox()){const t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close(),n()}else{const r=(i=bn.fromDom(t),Si(i,"load",qR,()=>{r.unbind(),n()}));t.srcdoc=e.iframeHTML}var i},XR=Ks.DOM,JR=(e,t,n)=>{const i=dx.get(n),r=dx.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Ot.trim(n),i&&-1===Ot.inArray(t,n)){if(e.plugins[n])return;try{const o=i(e,r)||{};e.plugins[n]=o,x(o.init)&&(o.init(e,r),t.push(n))}catch(t){((e,t,n)=>{const i=ia.translate(["Failed to initialize plugin: {0}",t]);Cp(e,"PluginLoadError",{message:i}),vx(i,n),mx(e,i)})(e,n,t)}}},eO=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),tO=e=>{const t=e.getElement();return e.inline?eO(null):(e=>{const t=XR.create("div");return XR.insertAfter(t,e),eO(t,t)})(t)},nO=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,m(kc(e))?(e=>{const t=e.theme.renderUI;return t?t():tO(e)})(e):x(kc(e))?(e=>{const t=e.getElement(),n=kc(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n})(e):tO(e)},iO=async e=>{e.dispatch("ScriptsLoaded"),(e=>{const t=Ot.trim(ac(e)),n=e.ui.registry.getAll().icons,i={...Jw.get("default").icons,...Jw.get(t).icons};ge(i,(t,i)=>{Ee(n,i)||e.ui.registry.addIcon(i,t)})})(e),(e=>{const t=kc(e);if(m(t)){const n=ux.get(t);e.theme=n(e,ux.urls[t])||{},x(e.theme.init)&&e.theme.init(e,ux.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{const t=Dc(e),n=ex.get(t);e.model=n(e,ex.urls[t])})(e),(e=>{const t=[];$(Wc(e),n=>{JR(e,t,(e=>e.replace(/^\-/,""))(n))})})(e);const t=await nO(e);((e,t)=>{const n={show:F.from(t.show).getOr(M),hide:F.from(t.hide).getOr(M),isEnabled:F.from(t.isEnabled).getOr(U),setEnabled:n=>{e.mode.isReadOnly()||F.from(t.setEnabled).each(e=>e(n))}};e.ui={...e.ui,...n}})(e,F.from(t.api).getOr({})),e.editorContainer=t.editorContainer,Ax(e),e.inline?$R(e):((e,t)=>{KR(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=WR.isHidden(t.editorContainer)),e.getElement().style.display="none",WR.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,ZR(e)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},rO=Ks.DOM,oO=e=>"-"===e.charAt(0),sO=(e,t)=>{const n=fc(t),i=gc(t);if(!ia.hasCode(n)&&"en"!==n){const r=Ke(i)?i:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(r).catch(()=>{((e,t,n)=>{fx(e,"LanguageLoadError",gx("language",t,n))})(t,r,n)})}},aO=(e,t)=>{const n=kc(e);if(m(n)&&!oO(n)&&!Ee(ux.urls,n)){const i=Lc(e),r=i?e.documentBaseURI.toAbsolute(i):`themes/${n}/theme${t}.js`;ux.load(n,r).catch(()=>{((e,t,n)=>{fx(e,"ThemeLoadError",gx("theme",t,n))})(e,r,n)})}},lO=(e,t)=>{const n=Dc(e);if("plugin"!==n&&!Ee(ex.urls,n)){const i=Ic(e),r=m(i)?e.documentBaseURI.toAbsolute(i):`models/${n}/model${t}.js`;ex.load(n,r).catch(()=>{((e,t,n)=>{fx(e,"ModelLoadError",gx("model",t,n))})(e,r,n)})}},cO=(e,t,n)=>F.from(t).filter(e=>Ke(e)&&!Jw.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:F.some(t)})),dO=(e,t,n)=>{const i=cO(t,"default",n),r=(e=>F.from(lc(e)).filter(Ke).map(e=>({url:e,name:F.none()})))(t).orThunk(()=>cO(t,ac(t),""));$((e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})([i,r]),n=>{e.add(n.url).catch(()=>{((e,t,n)=>{fx(e,"IconsLoadError",gx("icons",t,n))})(t,n.url,n.name.getOrUndefined())})})},uO=(e,t)=>{const n=(t,n)=>{dx.load(t,n).catch(()=>{((e,t,n)=>{fx(e,"PluginLoadError",gx("plugin",t,n))})(e,n,t)})};ge(Kc(e),(t,i)=>{n(i,t),e.options.set("plugins",Wc(e).concat(i))}),$(Wc(e),e=>{!(e=Ot.trim(e))||dx.urls[e]||oO(e)||n(e,`plugins/${e}/plugin${t}.js`)})},hO=(e,t)=>{const n=Xs.ScriptLoader,i=()=>{!e.removed&&(e=>{const t=kc(e);return!m(t)||w(ux.get(t))})(e)&&(e=>{const t=Dc(e);return w(ex.get(t))})(e)&&iO(e)};aO(e,t),lO(e,t),sO(n,e),dO(n,e,t),uO(e,t),n.loadQueue().then(i,i)},pO=e=>{const t=e.id;ia.setCode(fc(e));const n=()=>{rO.unbind(window,"ready",n),e.render()};if(!zs.Event.domLoaded)return void rO.bind(window,"ready",n);if(!e.getElement())return;const i=bn.fromDom(e.getElement()),r=an(i);e.on("remove",()=>{q(i.dom.attributes,e=>sn(i,e.name)),tn(i,r)}),e.ui.styleSheetLoader=((e,t)=>Vo.forElement(e,{contentCssCors:qc(t),referrerPolicy:mc(t)}))(i,e),Fc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const o=e.getElement().form||rO.getParent(t,"form");o&&(e.formElement=o,zc(e)&&!Ji(e.getElement())&&(rO.insertAfter(rO.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},rO.bind(o,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Hc(e)||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),o._mceOldSubmit(o)))),e.windowManager=hx(e),e.notificationManager=cx(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",e=>{e.save&&(e.content=rO.encode(e.content))}),jc(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Vc(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),hO(e,e.suffix)},mO=xt().deviceType,fO=mO.isPhone(),gO=mO.isTablet(),vO=e=>{if(_(e))return[];{const t=v(e)?e:e.split(/[ ,]/),n=Q(t,$e);return K(n,Ke)}},yO=(e,t)=>{const n=((e,t)=>{const n={},i={};return Ae(e,t,be(n),be(i)),{t:n,f:i}})(t,(t,n)=>Y(e,n));return i=n.t,r=n.f,{sections:k(i),options:k(r)};var i,r},bO=(e,t)=>Ee(e.sections(),t),AO=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ce(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),_O=(e,t)=>{var n;const i=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Ot.extend({},e.external_plugins,i):i},wO=(e,t,n,i)=>{const r=vO(n.forced_plugins),o=vO(i.plugins),s=((e,t)=>bO(e,t)?e.sections()[t]:{})(t,"mobile"),a=((e,t,n,i)=>e&&bO(t,"mobile")?i:n)(e,t,o,s.plugins?vO(s.plugins):o),l=((e,t)=>[...vO(e),...vO(t)])(r,a);return Ot.extend(i,{forced_plugins:r,plugins:l})},xO=(e,t,n,i,r)=>{var o;const s=e?{mobile:AO(null!==(o=r.mobile)&&void 0!==o?o:{},t)}:{},a=yO(["mobile"],wT(s,r)),l=Ot.extend(n,i,a.options(),((e,t)=>e&&bO(t,"mobile"))(e,a)?((e,t,n={})=>{const i=e.sections(),r=Ce(i,t).getOr({});return Ot.extend({},n,r)})(a,"mobile"):{},{external_plugins:_O(i,a.options())});return wO(e,a,i,l)},CO=(e,t)=>((e,t)=>Aw(e).editor.addVisual(t))(e,t),EO=e=>{const t=t=>()=>{$("left,center,right,justify".split(","),n=>{t!==n&&e.formatter.remove("align"+n)}),"none"!==t&&((t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},MO=e=>{EO(e),(e=>{const t=t=>()=>{const n=e.selection,i=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return G(i,n=>w(e.formatter.matchNode(n,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},SO=(e,t)=>{const n=e.selection,i=e.dom;return/^ | $/.test(t)?((e,t,n,i)=>{const r=bn.fromDom(e.getRoot());return n=Fg(r,rl.fromRangeStart(t),i)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),zg(r,rl.fromRangeEnd(t),i)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(i,n.getRng(),t,e.schema):t},TO=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:i}=(e=>{if("string"!=typeof e){const t=Ot.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);B_(e,{...i,content:SO(e,n),format:"html",set:!1,selection:!0}).each(t=>{const n=((e,t,n)=>bw(e).editor.insertContent(t,n))(e,t.content,i);N_(e,n,t),e.addVisual()})}},kO={"font-size":"size","font-family":"face"},LO=Xt("font"),DO=(e,t,n)=>Ny(bn.fromDom(n),t=>(t=>ui(t,e).orThunk(()=>LO(t)?Ce(kO,e).bind(e=>rn(t,e)):F.none()))(t),e=>xn(bn.fromDom(t),e)),IO=e=>(t,n)=>F.from(n).map(bn.fromDom).filter(qt).bind(n=>DO(e,t,n.dom).or(((e,t)=>F.from(Ks.DOM.getStyle(t,e,!0)))(e,n.dom))).getOr(""),RO=IO("font-size"),OO=S(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),IO("font-family")),PO=e=>qu(e.getBody()).bind(e=>{const t=e.container();return F.from(er(t)?t.parentNode:t)}),BO=(e,t)=>(e=>F.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?F.none():F.from(e.selection.getStart(!0))}))(e).orThunk(I(PO,e)).map(bn.fromDom).filter(qt).bind(t),NO=(e,t)=>BO(e,T(F.some,t)),UO=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const i=(e=>Ot.explode(e.options.get("font_size_style_values")))(e),r=(e=>Ot.explode(e.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:i[n-1]||t}return t}return t},FO=e=>{const t=e.split(/\s*,\s*/);return Q(t,e=>-1===e.indexOf(" ")||Ye(e,'"')||Ye(e,"'")?e:`'${e}'`).join(",")},zO=e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,i)=>{t(e,{value:i})},BackColor:(e,n,i)=>{t("hilitecolor",{value:i})},FontName:(t,n,i)=>{((e,t)=>{const n=UO(e,t);e.formatter.toggle("fontname",{value:FO(n)}),e.nodeChanged()})(e,i)},FontSize:(t,n,i)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:UO(e,t)}),e.nodeChanged()})(e,i)},LineHeight:(t,n,i)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,i)},Lang:(e,n,i)=>{var r;t(e,{value:i.code,customValue:null!==(r=i.customCode)&&void 0!==r?r:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,i)=>{t(m(i)?i:"p")},mceToggleFormat:(e,n,i)=>{t(i)}})},HO=e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>(e=>NO(e,t=>OO(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>(e=>NO(e,t=>RO(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>(e=>NO(e,t=>{const n=bn.fromDom(e.getBody()),i=Ny(t,e=>ui(e,"line-height"),I(xn,n));return i.getOrThunk(()=>{const e=parseFloat(ci(t,"line-height")),n=parseFloat(ci(t,"font-size"));return String(e/n)})}).getOr(""))(e))},jO=e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{MM(e,"indent")})(e)},Outdent:()=>{SM(e)}}),e.editorCommands.addCommands({Outdent:()=>xM(e)},"state")},VO=(e,t)=>{const n=e.dom,i=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),o=t?i.startContainer:i.endContainer,s=Kk(n,o);if(!s||!s.isContentEditable)return;const a=t?mi:fi,l=Zl(e);((e,t,n,i)=>{const r=e.dom,o=e=>r.isBlock(e)&&e.parentElement===n,s=o(t)?t:r.getParent(i,o,n);return F.from(s).map(bn.fromDom)})(e,r,s,o).each(t=>{const n=eL(e,o,t.dom,s,!1,l);a(t,bn.fromDom(n)),e.selection.setCursorLocation(n,0),e.dispatch("NewBlock",{newBlock:n}),jk(e,"insertParagraph")})},YO=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{VO(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{VO(e,!1)})(e)}})},GO=e=>{MO(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let i;try{n.execCommand(t)}catch(e){i=!0}if("paste"!==t||n.queryCommandEnabled(t)||(i=!0),i||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Lt.os.isMacOS()||Lt.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,i)=>{let r=0;e.dom.getParent(e.selection.getNode(),t=>!Yi(t)||r++!==i||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,n,i)=>{e.selection.select(i)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),lr);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,i)=>{TO(e,e.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,i)=>{TO(e,e.dom.encode(i))},insertHTML:(t,n,i)=>{TO(e,i)},mceInsertContent:(t,n,i)=>{TO(e,i)},mceSetContent:(t,n,i)=>{e.setContent(i)},mceReplaceContent:(t,n,i)=>{e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(hd(e))}})})(e),(e=>{const t=(t,n,i)=>{const r=m(i)?{href:i}:i,o=e.dom.getParent(e.selection.getNode(),"a");f(r)&&m(r.href)&&(r.href=r.href.replace(/ /g,"%20"),o&&r.href||e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,o))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),jO(e),YO(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{NL(mL,e)},mceInsertNewLine:(t,n,i)=>{UL(e,i)},InsertLineBreak:(t,n,i)=>{NL(xL,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const i=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(i)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{zO(e),HO(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,i)=>{const r=null!=i?i:e.selection.getNode();if(r!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(r,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,i)=>{uf(e,!0===i)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},QO=["toggleview"],$O=e=>Y(QO,e.toLowerCase());class qO{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,i){const r=this.editor,o=e.toLowerCase(),s=null==i?void 0:i.skip_focus;if(r.removed)return!1;"mcefocus"!==o&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(o)||s?(e=>{Qm(e).each(t=>e.selection.setRng(t))})(r):r.focus());if(r.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const a=this.commands.exec[o];return!!x(a)&&(a(o,t,n),r.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(!$O(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!x(n)&&n(t)}queryCommandValue(e){if(!$O(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return x(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;ge(e,(e,i)=>{$(i.toLowerCase().split(","),i=>{n[t][i]=e})})}addCommand(e,t,n){const i=e.toLowerCase();this.commands.exec[i]=(e,i,r)=>t.call(null!=n?n:this.editor,i,r)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}}const WO="data-mce-contenteditable",KO=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},ZO=(e,t)=>{e.dom.contentEditable=t?"true":"false"},XO=(e,t)=>{const n=bn.fromDom(e.getBody());((e,t,n)=>{vn(e,t)&&!n?fn(e,t):n&&pn(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{F.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,ZO(n,!1),$(Fi(n,'*[contenteditable="true"]'),e=>{en(e,WO,"true"),ZO(e,!1)})):(e.readonly=!1,e.hasEditableRoot()&&ZO(n,!0),(e=>{$(Fi(e,`*[${WO}="true"]`),e=>{sn(e,WO),ZO(e,!0)})})(n),KO(e,"StyleWithCSS",!1),KO(e,"enableInlineTableEditing",!1),KO(e,"enableObjectResizing",!1),cf(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},JO=e=>e.readonly,eP=e=>{e.parser.addAttributeFilter("contenteditable",t=>{JO(e)&&$(t,e=>{e.attr(WO,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(WO,t=>{JO(e)&&$(t,e=>{e.attr("contenteditable",e.attr(WO))})}),e.serializer.addTempAttr(WO)},tP=["copy"],nP=(e,t)=>{if((e=>"click"===e.type)(t)&&!Lp.metaKeyPressed(t)){const n=bn.fromDom(t.target);((e,t)=>ni(t,"a",t=>xn(t,bn.fromDom(e.getBody()))).bind(e=>rn(e,"href")))(e,n).each(n=>{if(t.preventDefault(),/^#/.test(n)){const t=e.dom.select(`${n},[name="${je(n,"#")}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(e=>Y(tP,e.type))(t)&&e.dispatch(t.type,t)},iP=Ot.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class rP{static isNative(e){return!!iP[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||N}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase(),i=Os(n,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const r=this.bindings[n];if(r)for(let e=0,t=r.length;e<t;e++){const t=r[e];if(!t.removed){if(t.once&&this.off(n,t.func),i.isImmediatePropagationStopped())return i;if(!1===t.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(e,t,n,i){if(!1===t&&(t=N),t){const r={func:t,removed:!1};i&&Ot.extend(r,i);const o=e.toLowerCase().split(" ");let s=o.length;for(;s--;){const e=o[s];let t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[r,...t]:[...t,r],this.bindings[e]=t}}return this}off(e,t){if(e){const n=e.toLowerCase().split(" ");let i=n.length;for(;i--;){const r=n[i];let o=this.bindings[r];if(!r)return ge(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(o){if(t){const e=W(o,e=>e.func===t);o=e.fail,this.bindings[r]=o,$(e.pass,e=>{e.removed=!0})}else o.length=0;o.length||(this.toggleEvent(e,!1),delete this.bindings[r])}}}else ge(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!(!t||0===t.length)}}const oP=e=>(e._eventDispatcher||(e._eventDispatcher=new rP({scope:e,toggleEvent:(t,n)=>{rP.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),sP={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const i=this;if(i.removed&&"remove"!==e&&"detach"!==e)return Os(e.toLowerCase(),null!=t?t:{},i);const r=oP(i).dispatch(e,t);if(!1!==n&&i.parent){let t=i.parent();for(;t&&!r.isPropagationStopped();)t.dispatch(e,r,!1),t=t.parent?t.parent():void 0}return r},on(e,t,n){return oP(this).on(e,t,n)},off(e,t){return oP(this).off(e,t)},once(e,t){return oP(this).once(e,t)},hasEventListeners(e){return oP(this).has(e)}},aP=Ks.DOM;let lP;const cP=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Sc(e);return n?(e.eventRoot||(e.eventRoot=aP.select(n)[0]),e.eventRoot):e.getBody()},dP=(e,t,n)=>{(e=>!e.hidden&&!JO(e))(e)?e.dispatch(t,n):JO(e)&&nP(e,n)},uP=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=cP(e,t);if(Sc(e)){if(lP||(lP={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||lP&&(ge(lP,(t,n)=>{e.dom.unbind(cP(e,n))}),lP=null)})),lP[t])return;const i=n=>{const i=n.target,r=e.editorManager.get();let o=r.length;for(;o--;){const e=r[o].getBody();(e===i||aP.isChildOf(i,e))&&dP(r[o],t,n)}};lP[t]=i,aP.bind(n,t,i)}else{const i=n=>{dP(e,t,n)};aP.bind(n,t,i),e.delegates[t]=i}},hP={...sP,bindPendingEventDelegates(){const e=this;Ot.each(e._pendingNativeEvents,t=>{uP(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?uP(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(cP(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(ge(e.delegates,(t,n)=>{e.dom.unbind(cP(e,n),n,t)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},pP=e=>m(e)?{value:e.split(/[ ,]/),valid:!0}:E(e,m)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},mP=(e,t)=>e+(Ze(t.message)?"":`. ${t.message}`),fP=e=>e.valid,gP=(e,t,n="")=>{const i=t(e);return b(i)?i?{value:e,valid:!0}:{valid:!1,message:n}:i},vP=(e,t)=>{const n={},i={},r=(e,t,n)=>{const r=gP(t,n);return fP(r)?(i[e]=r.value,!0):(console.warn(mP(`Invalid value passed for the ${e} option`,r)),!1)},o=e=>Ee(n,e);return{register:(e,o)=>{const s=(e=>m(e.processor))(o)?(e=>{const t=(()=>{switch(e){case"array":return v;case"boolean":return b;case"function":return x;case"number":return C;case"object":return f;case"string":return m;case"string[]":return pP;case"object[]":return e=>E(e,f);case"regexp":return e=>p(e,RegExp);default:return U}})();return n=>gP(n,t,`The value must be a ${e}.`)})(o.processor):o.processor,a=((e,t,n)=>{if(!A(t)){const i=gP(t,n);if(fP(i))return i.value;console.error(mP(`Invalid default value passed for the "${e}" option`,i))}})(e,o.default,s);n[e]={...o,default:a,processor:s};Ce(i,e).orThunk(()=>Ce(t,e)).each(t=>r(e,t,s))},isRegistered:o,get:e=>Ce(i,e).orThunk(()=>Ce(n,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(o(e)){const i=n[e];return i.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):r(e,t,i.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=o(e);return t&&delete i[e],t},isSet:e=>Ee(i,e)}},yP=["design","readonly"],bP=(e,t,n,i)=>{const r=n[t.get()],o=n[i];try{o.activate()}catch(e){return void console.error(`problem while activating editor mode ${i}:`,e)}r.deactivate(),r.editorReadOnly!==o.editorReadOnly&&XO(e,o.editorReadOnly),t.set(i),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,i)},AP=e=>{const t=Js("design"),n=Js({design:{activate:M,deactivate:M,editorReadOnly:!1},readonly:{activate:M,deactivate:M,editorReadOnly:!0}});return(e=>{e.serializer?eP(e):e.on("PreInit",()=>{eP(e)})})(e),(e=>{e.on("ShowCaret",t=>{JO(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{JO(e)&&t.preventDefault()})})(e),{isReadOnly:()=>JO(e),set:i=>((e,t,n,i)=>{if(i!==n.get()){if(!Ee(t,i))throw new Error(`Editor mode '${i}' is invalid`);e.initialized?bP(e,n,t,i):e.on("init",()=>bP(e,n,t,i))}})(e,n.get(),t,i),get:()=>t.get(),register:(e,t)=>{n.set(((e,t,n)=>{if(Y(yP,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(n.get(),e,t))}}},_P=Ot.each,wP=Ot.explode,xP={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},CP=Ot.makeMap("alt,ctrl,shift,meta,access"),EP=e=>{const t={},n=Lt.os.isMacOS()||Lt.os.isiOS();_P(wP(e.toLowerCase(),"+"),e=>{(e=>e in CP)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=xP[e]||e.toUpperCase().charCodeAt(0))});const i=[t.keyCode];let r;for(r in CP)t[r]?i.push(r):t[r]=!1;return t.id=i.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class MP{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(_P(t.shortcuts,n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,n,i){const r=this,o=r.normalizeCommandFunc(n);return _P(wP(Ot.trim(e)),e=>{const n=r.createShortcut(e,t,o,i);r.shortcuts[n.id]=n}),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const t=this,n=e;return"string"==typeof n?()=>{t.editor.execCommand(n,!1,null)}:Ot.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,i){const r=Ot.map(wP(e,">"),EP);return r[r.length-1]=Ot.extend(r[r.length-1],{func:n,scope:i||this.editor}),Ot.extend(r[0],{desc:this.editor.translate(t),subpatterns:r.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const SP=()=>{const e=(()=>{const e={},t={},n={},i={},r={},o={},s={},a={},l=(e,t)=>(n,i)=>{e[n.toLowerCase()]={...i,type:t}};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(r,"contextmenu"),addContextToolbar:l(o,"contexttoolbar"),addContextForm:l(o,"contextform"),addSidebar:l(s,"sidebar"),addView:l(a,"views"),addIcon:(e,t)=>i[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:i,popups:n,contextMenus:r,contextToolbars:o,sidebars:s,views:a})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},TP=Ks.DOM,kP=Ot.extend,LP=Ot.each;class DP{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,kP(this,hP);const i=this;this.id=e,this.hidden=!1;const r=((e,t)=>xO(fO||gO,fO,t,e,t))(n.defaultOptions,t);this.options=vP(0,r),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Vl(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Vl(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=m(e)&&Ke(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{const t=Y(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>b(e)||m(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||m(e)||E(e,m);return t?m(e)?{value:Q(e.split(","),$e),valid:t}:v(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Fc(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=m(e)||E(e,m);return t?{value:v(e)?e:Q(e.split(","),$e),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{const t=b(e)||m(e);return t?!1===e||Nl.isiPhone()||Nl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Ul}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||m(e)||x(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{const t=!1===e||m(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:jl}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:jl}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:jl}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>m(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>E(e,f)||!1===e?{value:Bl(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>{return x(e)?{value:(t=e,e=>{const n=t(e);return Bl(n)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>E(e,zl)?{value:e,valid:!0}:zl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:e=>{const t=Y(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:e=>{const t=Y(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("force_hex_color",{processor:e=>{const t=["always","rgb_only","off"],n=Y(t,e);return n?{value:e,valid:n}:{valid:!1,message:`Must be one of: ${t.join(", ")}.`}},default:"off"}),t("sandbox_iframes",{processor:"boolean",default:!1}),t("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:ia.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:Fl.getAttrib(e.getElement(),"placeholder")})})})(i);const o=this.options.get;o("deprecation_warnings")&&qw(t,r);const s=o("suffix");s&&(n.suffix=s),this.suffix=n.suffix;const a=o("base_url");a&&n._setBaseUrl(a),this.baseUri=n.baseURI;const l=mc(i);l&&(Xs.ScriptLoader._setReferrerPolicy(l),Ks.DOM.styleSheetLoader._setReferrerPolicy(l));const c=qc(i);w(c)&&Ks.DOM.styleSheetLoader._setContentCssCors(c),ra.languageLoad=o("language_load"),ra.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new g_(Ql(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Fc(i),this.hasVisual=Xc(i),this.shortcuts=new MP(this),this.editorCommands=new qO(this),GO(this);const d=o("cache_suffix");d&&(Lt.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:SP(),styleSheetLoader:void 0,show:M,hide:M,setEnabled:M,isEnabled:U},this.mode=AP(i),n.dispatch("SetupEditor",{editor:this});const u=nd(i);x(u)&&u.call(i,i)}render(){pO(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return lf(this)}translate(e){return ia.translate(e)}getParam(e,t,n){const i=this.options;return i.isRegistered(e)||(w(n)?i.register(e,{processor:n,default:t}):i.register(e,{processor:U,default:t})),i.isSet(e)||A(t)?i.get(e):t}hasPlugin(e,t){return!!Y(Wc(this),e)&&(!t||void 0!==dx.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,i){this.shortcuts.add(e,t,n,i)}execCommand(e,t,n,i){return this.editorCommands.execCommand(e,t,n,i)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(TP.show(e.getContainer()),TP.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(TP.hide(e.getContainer()),TP.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){const t=this,n=t.getElement();if(t.removed)return"";if(n){const i={...e,load:!0},r=Ji(n)?n.value:n.innerHTML,o=t.setContent(r,i);return i.no_events||t.dispatch("LoadContent",{...i,element:n}),o}return""}save(e={}){const t=this;let n=t.getElement();if(!n||!t.initialized||t.removed)return"";const i={...e,save:!0,element:n};let r=t.getContent(i);const o={...i,content:r};if(o.no_events||t.dispatch("SaveContent",o),"raw"===o.format&&t.dispatch("RawSaveContent",o),r=o.content,Ji(n))n.value=r;else{!e.is_removing&&t.inline||(n.innerHTML=r);const i=TP.getParent(t.id,"form");i&&LP(i.elements,e=>e.name!==t.id||(e.value=r,!1))}return o.element=i.element=n=null,!1!==o.set_dirty&&t.setDirty(!1),r}setContent(e,t){return Bw(this,e,t)}getContent(e){return Pw(this,e)}insertContent(e,t){t&&(e=kP({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Bw(this,this.startContent,{format:"raw"}):Bw(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||TP.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=TP.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==n?void 0:n.body)&&void 0!==t?t:null}convertURL(e,t,n){const i=this,r=i.options.get,o=rd(i);if(x(o))return o.call(i,e,n,!0,t);if(!r("convert_urls")||"link"===n||f(n)&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length)return e;const s=new g_(e);return"http"!==s.protocol&&"https"!==s.protocol&&""!==s.protocol?e:r("relative_urls")?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,r("remove_script_host"))}addVisual(e){CO(this,e)}setEditableRoot(e){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){Zw(this)}destroy(e){Xw(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const IP=Ks.DOM,RP=Ot.each;let OP,PP=!1,BP=[];const NP=e=>{const t=e.type;RP(HP.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},UP=e=>{if(e!==PP){const t=Ks.DOM;e?(t.bind(window,"resize",NP),t.bind(window,"scroll",NP)):(t.unbind(window,"resize",NP),t.unbind(window,"scroll",NP)),PP=e}},FP=e=>{const t=BP;return BP=K(BP,t=>e!==t),HP.activeEditor===e&&(HP.activeEditor=BP.length>0?BP[0]:null),HP.focusedEditor===e&&(HP.focusedEditor=null),t.length!==BP.length},zP="CSS1Compat"!==document.compatMode,HP={...sP,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.3",releaseDate:"2024-02-08",i18n:ia,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",i=g_.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(i)&&(i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(i)||(i+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const e=document.getElementsByTagName("script");for(let i=0;i<e.length;i++){const r=e[i].src||"";if(""===r)continue;const o=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==o.indexOf(".min")&&(n=".min"),t=r.substring(0,r.lastIndexOf("/"));break}}if(!t&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(n=".min"),t=e.substring(0,e.lastIndexOf("/"))}}var o;e.baseURL=new g_(i).toAbsolute(t),e.documentBaseURL=i,e.baseURI=new g_(e.baseURL),e.suffix=n,(o=e).on("AddEditor",I(tf,o)),o.on("RemoveEditor",I(nf,o))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const i=e.plugin_base_urls;void 0!==i&&ge(i,(e,t)=>{ra.PluginManager.urls[t]=e})},init(e){const t=this;let n;const i=Ot.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=e=>{n=e};const o=()=>{let n=0;const s=[];let a;IP.unbind(window,"ready",o),(n=>{const i=e[n];if(i)i.apply(t,[])})("onpageload"),a=((e,t)=>{const n=[],i=x(t)?e=>G(n,n=>t(n,e)):e=>Y(n,e);for(let t=0,r=e.length;t<r;t++){const r=e[t];i(r)||n.push(r)}return n})((e=>Lt.browser.isIE()||Lt.browser.isEdge()?(vx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):zP?(vx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):m(e.selector)?IP.select(e.selector):w(e.target)?[e.target]:[])(e)),Ot.each(a,e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(FP(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)}),a=Ot.grep(a,e=>!t.get(e.id)),0===a.length?r([]):RP(a,o=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in i)(e,o)?vx("Could not initialize inline editor on invalid inline target element",o):((e,i,o)=>{const l=new DP(e,i,t);s.push(l),l.on("init",()=>{++n===a.length&&r(s)}),l.targetElm=l.targetElm||o,l.render()})((e=>{let t=e.id;return t||(t=Ce(e,"name").filter(e=>!IP.get(e)).getOrThunk(IP.uniqueId),e.setAttribute("id",t)),t})(o),e,o)})};return IP.bind(window,"ready",o),new Promise(e=>{n?e(n):r=t=>{e(t)}})},get(e){return 0===arguments.length?BP.slice(0):m(e)?ee(BP,t=>t.id===e).getOr(null):C(e)&&BP[e]?BP[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&BP.push(e),UP(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),OP||(OP=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",OP))),e},createEditor(e,t){return this.add(new DP(e,t,this))},remove(e){const t=this;let n;if(e){if(!m(e))return n=e,y(t.get(n.id))?null:(FP(n)&&t.dispatch("RemoveEditor",{editor:n}),0===BP.length&&window.removeEventListener("beforeunload",OP),n.remove(),UP(BP.length>0),n);RP(IP.select(e),e=>{n=t.get(e.id),n&&t.remove(n)})}else for(let e=BP.length-1;e>=0;e--)t.remove(BP[e])},execCommand(e,t,n){var i;const r=this,o=f(n)?null!==(i=n.id)&&void 0!==i?i:n.index:n;switch(e){case"mceAddEditor":if(!r.get(o)){const e=n.options;new DP(o,e,r).render()}return!0;case"mceRemoveEditor":{const e=r.get(o);return e&&e.remove(),!0}case"mceToggleEditor":{const e=r.get(o);return e?(e.isHidden()?e.show():e.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{RP(BP,e=>{e.save()})},addI18n:(e,t)=>{ia.add(e,t)},translate:e=>ia.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new g_(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new g_(this.baseURL)}};HP.setup();const jP=(()=>{const e=sa();return{FakeClipboardItem:e=>({items:e,types:me(e),getType:t=>Ce(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),VP=Math.min,YP=Math.max,GP=Math.round,QP=(e,t,n)=>{let i=t.x,r=t.y;const o=e.w,s=e.h,a=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(i+=a),"c"===c[0]&&(r+=GP(l/2)),"c"===c[1]&&(i+=GP(a/2)),"b"===c[3]&&(r-=s),"r"===c[4]&&(i-=o),"c"===c[3]&&(r-=GP(s/2)),"c"===c[4]&&(i-=GP(o/2)),$P(i,r,o,s)},$P=(e,t,n,i)=>({x:e,y:t,w:n,h:i}),qP={inflate:(e,t,n)=>$P(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:QP,findBestRelativePosition:(e,t,n,i)=>{for(let r=0;r<i.length;r++){const o=QP(e,t,i[r]);if(o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return i[r]}return null},intersect:(e,t)=>{const n=YP(e.x,t.x),i=YP(e.y,t.y),r=VP(e.x+e.w,t.x+t.w),o=VP(e.y+e.h,t.y+t.h);return r-n<0||o-i<0?null:$P(n,i,r-n,o-i)},clamp:(e,t,n)=>{let i=e.x,r=e.y,o=e.x+e.w,s=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=YP(0,t.x-i),d=YP(0,t.y-r),u=YP(0,o-a),h=YP(0,s-l);return i+=c,r+=d,n&&(o+=c,s+=d,i-=u,r-=h),o-=u,s-=h,$P(i,r,o-i,s-r)},create:$P,fromClientRect:e=>$P(e.left,e.top,e.width,e.height)},WP=(()=>{const e={},t={},n={};return{load:(n,i)=>{const r=`Script at URL "${i}" failed to load`,o=`Script at URL "${i}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const s=new Promise((e,s)=>{const a=((e,t,n=1e3)=>{let i=!1,r=null;const o=e=>(...t)=>{i||(i=!0,null!==r&&(clearTimeout(r),r=null),e.apply(null,t))},s=o(e),a=o(t);return{start:(...e)=>{i||null!==r||(r=setTimeout(()=>a.apply(null,e),n))},resolve:s,reject:a}})(e,s);t[n]=a.resolve,Xs.ScriptLoader.loadScript(i).then(()=>a.start(o),()=>a.reject(r))});return e[n]=s,s}},add:(i,r)=>{void 0!==t[i]&&(t[i](r),delete t[i]),e[i]=Promise.resolve(r),n[i]=r},has:e=>e in n,get:e=>n[e],unload:t=>{delete e[t]}}})();let KP;try{const e="__storage_test__";KP=window.localStorage,KP.setItem(e,e),KP.removeItem(e)}catch(e){KP=(()=>{let e={},t=[];const n={getItem:t=>e[t]||null,setItem:(n,i)=>{t.push(n),e[n]=String(i)},key:e=>t[e],removeItem:n=>{t=t.filter(e=>e===n),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const ZP={geom:{Rect:qP},util:{Delay:qm,Tools:Ot,VK:Lp,URI:g_,EventDispatcher:rP,Observable:sP,I18n:ia,LocalStorage:KP,ImageUploader:e=>{const t=wx(),n=Sx(e,t);return{upload:(t,i=!0)=>n.upload(t,i?Mx(e):void 0)}}},dom:{EventUtils:zs,TreeWalker:Hi,TextSeeker:Ta,DOMUtils:Ks,ScriptLoader:Xs,RangeUtils:hm,Serializer:Ow,StyleSheetLoader:jo,ControlSelection:Pp,BookmarkManager:wp,Selection:kw,Event:zs.Event},html:{Styles:Ls,Entities:as,Node:Tf,Schema:bs,DomParser:I_,Writer:$f,Serializer:qf},Env:Lt,AddOnManager:ra,Annotator:_p,Formatter:Hx,UndoManager:Vx,EditorCommands:qO,WindowManager:hx,NotificationManager:cx,EditorObservable:hP,Shortcuts:MP,Editor:DP,FocusManager:$m,EditorManager:HP,DOM:Ks.DOM,ScriptLoader:Xs.ScriptLoader,PluginManager:dx,ThemeManager:ux,ModelManager:ex,IconManager:Jw,Resource:WP,FakeClipboard:jP,trim:Ot.trim,isArray:Ot.isArray,is:Ot.is,toArray:Ot.toArray,makeMap:Ot.makeMap,each:Ot.each,map:Ot.map,grep:Ot.grep,inArray:Ot.inArray,extend:Ot.extend,walk:Ot.walk,resolve:Ot.resolve,explode:Ot.explode,_addCacheSuffix:Ot._addCacheSuffix},XP=Ot.extend(HP,ZP);(e=>{window.tinymce=e,window.tinyMCE=e})(XP),(t=>{try{e.exports=t}catch(e){}})(XP)}()},5182:(e,t,n)=>{n(7555)},5240:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(3627),r=n(0),o=n(3423),s=n(1860),a=n(4424),l=n(3331);class c{constructor(e,t){this._args=e,this._props=t,this._args=e,this._state=null}get name(){return this._props.name||this._props.do.name.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}do(){if(this._state)throw new Error("undo should be called before execute can be applied again");this._state=this._props.do.apply(this._props.target,this._args)}undo(){if(!this._props.undo)throw new Error("can't undo this command");if(!this._state)throw new Error("execute should be called before undo can be applied");this._props.undo.call(this._props.target,this._state),this._state=null}canDo(){return!this._props.canDo||this._props.canDo()}canUndo(){return!!this._props.undo}}class d extends l.A{constructor(e){super(),this.addEvent("update"),this.stack=[],this.pointer=-1,this.capacity=void 0!==e?e:d.defaultCapacity}register(e){let t;t="function"==typeof e?e:t=>new c(t,e);return(...e)=>{const n=t(e);this.do(n)}}setCapacity(e){for(this.capacity=e;this.stack.length>e;)this.stack.shift(),this.pointer--;this.pointer<0&&(this.stack=[],this.pointer=-1)}do(e){console.log(`Commander.do - '${e.name}'`),e.do(),e.canUndo()&&(this.stack.splice(this.pointer+1),this.stack.push(e),this.stack.length>this.capacity&&this.stack.shift(),this.pointer=this.stack.length-1,this.emit("update"))}undo(){if(this.pointer>=0){this.stack[this.pointer].undo(),this.pointer--,this.emit("update")}}redo(){if(this.pointer<this.stack.length-1){this.pointer++;this.stack[this.pointer].do(),this.emit("update")}}clear(){this.stack.length>0&&(this.stack=[],this.pointer=-1,this.emit("update"))}canUndo(){return this.pointer>=0}canRedo(){return this.pointer<this.stack.length-1}getUndoText(){return this.pointer>=0?"Undo "+this.stack[this.pointer].name:"Can't Undo"}getRedoText(){return this.pointer<this.stack.length-1?"Redo "+this.stack[this.pointer+1].name:"Can't Redo"}}d.defaultCapacity=30;class u extends o.Ay{createActions(e){return{}}}u.typeName="CController",u.isSystemSingleton=!0;class h extends u{getSelectedNode(e){return this.selectedNodes.get(e,!0)}getSelectedNodes(e){return this.selectedNodes.getArray(e)}getSelectedComponent(e){return this.selectedComponents.get(e,!0)}getSelectedComponents(e){return this.selectedComponents.getArray(e)}constructor(e,t){super(e,t),this.outs=this.addOutputs(h.selOuts),this.multiSelect=!1,this.exclusiveSelect=!0,this.selectedNodes=new i.A(s.A),this.selectedComponents=new i.A(o.Ay),this._activeGraph=null,this.addEvents("select-node","select-component","active-graph","update"),this.selectedNodes.on(s.A,e=>this.onSelectNode(e.object,e.add)),this.selectedComponents.on(o.Ay,e=>this.onSelectComponent(e.object,e.add)),this._activeGraph=this.system.graph}get activeGraph(){return this._activeGraph}set activeGraph(e){if(e!==this.activeGraph){this.clearSelection();const t=this._activeGraph;this._activeGraph=e,this.onActiveGraph(e),this.emit({type:"active-graph",previous:t,next:e})}}hasParentGraph(){return this._activeGraph&&this._activeGraph.parent}activateParentGraph(){this._activeGraph&&this._activeGraph.parent.graph&&(this.activeGraph=this._activeGraph.parent.graph)}hasChildGraph(){return this.selectedComponents.has(a.Ay)}activateChildGraph(){const e=this.selectedComponents.get(a.Ay,!0);e&&(this.activeGraph=e.innerGraph)}create(){super.create(),this.system.nodes.on(s.A,this.onSystemNode,this),this.system.components.on(o.Ay,this.onSystemComponent,this)}dispose(){this.system.nodes.off(s.A,this.onSystemNode,this),this.system.components.off(o.Ay,this.onSystemComponent,this),super.dispose()}createActions(e){return{selectNode:e.register({name:"Select Node",do:this.selectNode,target:this}),selectComponent:e.register({name:"Select Component",do:this.selectComponent,target:this}),clearSelection:e.register({name:"Clear Selection",do:this.clearSelection,target:this})}}nodeContainsSelectedComponent(e){const t=e.components.getArray();for(let e=0,n=t.length;e<n;++e)if(this.selectedComponents.contains(t[e]))return!0;return!1}selectNode(e,t=!1){this.activeGraph=e.graph;const n=this.selectedNodes,i=this.multiSelect&&t;e&&n.contains(e)?i&&n.remove(e):(this.exclusiveSelect&&this.selectedComponents.clear(),i||n.clear(),e&&n.add(e)),this.updateStats()}selectComponent(e,t=!1){this.activeGraph=e.graph;const n=this.selectedComponents,i=this.multiSelect&&t;e&&n.contains(e)?i&&n.remove(e):(this.exclusiveSelect&&this.selectedNodes.clear(),i||n.clear(),e&&n.add(e)),this.updateStats()}clearSelection(){this.selectedNodes.clear(),this.selectedComponents.clear(),this.updateStats()}onSelectNode(e,t){}onSelectComponent(e,t){}onActiveGraph(e){}onSystemNode(e){e.remove&&this.selectedNodes.contains(e.object)&&(this.selectedNodes.remove(e.object),this.updateStats())}onSystemComponent(e){e.remove&&this.selectedComponents.contains(e.object)&&(this.selectedComponents.remove(e.object),this.updateStats())}updateStats(){const e=this.outs;e.selNodeCount.setValue(this.selectedNodes.length),e.selComponentCount.setValue(this.selectedComponents.length)}}h.typeName="CSelection",h.selOuts={selNodeCount:r.gK.Integer("Selection.Nodes"),selComponentCount:r.gK.Integer("Selection.Components")}},5253:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match format "${e}"`,params:({schemaCode:e})=>i._`{format: ${e}}`},code(e,t){const{gen:n,data:r,$data:o,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:h}=l;c.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:h.formats,code:c.code.formats}),s=n.const("fDef",i._`${o}[${a}]`),l=n.let("fType"),d=n.let("format");n.if(i._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,()=>n.assign(l,i._`${s}.type || "string"`).assign(d,i._`${s}.validate`),()=>n.assign(l,i._`"string"`).assign(d,s)),e.fail$data((0,i.or)(!1===c.strictSchema?i.nil:i._`${a} && !${d}`,function(){const e=u.$async?i._`(${s}.async ? await ${d}(${r}) : ${d}(${r}))`:i._`${d}(${r})`,n=i._`(typeof ${d} == "function" ? ${e} : ${d}.test(${r}))`;return i._`${d} && ${d} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=h.formats[s];if(!o)return void function(){if(!1===c.strictSchema)return void h.logger.warn(e());throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${d}"`}}();if(!0===o)return;const[a,l,p]=function(e){const t=e instanceof RegExp?(0,i.regexpCode)(e):c.code.formats?i._`${c.code.formats}${(0,i.getProperty)(s)}`:void 0,r=n.scopeValue("formats",{key:s,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,i._`${r}.validate`];return["string",e,r]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!u.$async)throw new Error("async format in sync schema");return i._`await ${p}(${r})`}return"function"==typeof l?i._`${p}(${r})`:i._`${p}.test(${r})`}())}())}};t.default=r},5265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const i=n(7988),r=n(8089);var o=n(7988);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var s=n(8089);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?r.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=D(this.rhs,e,t)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof i.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=D(this.rhs,e,t),this}get names(){return L(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(e,t,n,i){super(e,n,i),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class m extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=D(this.code,e,t),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class f extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,n)=>t+n.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const r=n[i];r.optimizeNames(e,t)||(I(e,r.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>k(e,t.names),{})}}class g extends f{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends f{}class y extends g{}y.kind="else";class b extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(R(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=D(this.condition,e,t),this}get names(){const e=super.names;return L(e,this.condition),this.else&&k(e,this.else.names),e}}b.kind="if";class A extends g{}A.kind="for";class _ extends A{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=D(this.iteration,e,t),this}get names(){return k(super.names,this.iteration.names)}}class w extends A{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${t} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=L(super.names,this.from);return L(e,this.to)}}class x extends A{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=D(this.iterable,e,t),this}get names(){return k(super.names,this.iterable.names)}}class C extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class E extends f{render(e){return"return "+super.render(e)}}E.kind="return";class M extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&k(e,this.catch.names),this.finally&&k(e,this.finally.names),e}}class S extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}S.kind="catch";class T extends g{render(e){return"finally"+super.render(e)}}T.kind="finally";function k(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function L(e,t){return t instanceof i._CodeOrName?k(e,t.names):e}function D(e,t,n){return e instanceof i.Name?o(e):(r=e)instanceof i._Code&&r._items.some(e=>e instanceof i.Name&&1===t[e.str]&&void 0!==n[e.str])?new i._Code(e._items.reduce((e,t)=>(t instanceof i.Name&&(t=o(t)),t instanceof i._Code?e.push(...t._items):e.push(t),e),[])):e;var r;function o(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function I(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function R(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:i._`!${N(e)}`}t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const r=this._scope.toName(t);return void 0!==n&&i&&(this._constants[r.str]=n),this._leafNode(new l(e,r,n)),r}const(e,t,n){return this._def(r.varKinds.const,e,t,n)}let(e,t,n){return this._def(r.varKinds.let,e,t,n)}var(e,t,n){return this._def(r.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new d(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==i.nil&&this._leafNode(new m(e)),this}object(...e){const t=["{"];for(const[n,r]of e)t.length>1&&t.push(","),t.push(n),(n!==r||this.opts.es5)&&(t.push(":"),(0,i.addCodeArg)(t,r));return t.push("}"),new i._Code(t)}if(e,t,n){if(this._blockNode(new b(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(b,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,n,i,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const s=this._scope.toName(e);return this._for(new w(o,s,t,n),()=>i(s))}forOf(e,t,n,o=r.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof i.Name?t:this.var("_arr",t);return this.forRange("_i",0,i._`${e}.length`,t=>{this.var(s,i._`${e}[${t}]`),n(s)})}return this._for(new x("of",o,s,t),()=>n(s))}forIn(e,t,n,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,i._`Object.keys(${t})`,n);const s=this._scope.toName(e);return this._for(new x("in",o,s,t),()=>n(s))}endFor(){return this._endBlockNode(A)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new M;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new S(e),t(e)}return n&&(this._currNode=i.finally=new T,this.code(n)),this._endBlockNode(S,T)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=i.nil,n,r){return this._blockNode(new C(e,t,n)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=R;const O=B(t.operators.AND);t.and=function(...e){return e.reduce(O)};const P=B(t.operators.OR);function B(e){return(t,n)=>t===i.nil?n:n===i.nil?t:i._`${N(t)} ${e} ${N(n)}`}function N(e){return e instanceof i.Name?e:i._`(${e})`}t.or=function(...e){return e.reduce(P)}},5277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const i=n(5265),r=n(2363),o=n(6241),s=n(6280);function a(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,i._`${r.parentData}[${r.parentDataProperty}]`))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,i.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:r,schema:o,parentSchema:s,it:a}=e,c=t.macro.call(a.self,o,s,a),d=l(n,r,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const u=n.name("valid");e.subschema({schema:c,schemaPath:i.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:d,schema:u,parentSchema:h,$data:p,it:m}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(m,t);const f=!p&&t.compile?t.compile.call(m.self,u,h,m):t.validate,g=l(c,d,f),v=c.let("valid");function y(n=(t.async?i._`await `:i.nil)){const s=m.opts.passContext?r.default.this:r.default.self,a=!("compile"in t&&!p||!1===t.schema);c.assign(v,i._`${n}${(0,o.callValidateCode)(e,g,s,a)}`,t.modifying)}function b(e){var n;c.if((0,i.not)(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,function(){if(!1===t.errors)y(),t.modifying&&a(e),b(()=>e.error());else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try(()=>y(i._`await `),t=>c.assign(v,!1).if(i._`${t} instanceof ${m.ValidationError}`,()=>c.assign(e,i._`${t}.errors`),()=>c.throw(t))),e}():function(){const e=i._`${g}.errors`;return c.assign(e,null),y(i.nil),e}();t.modifying&&a(e),b(()=>function(e,t){const{gen:n}=e;n.if(i._`Array.isArray(${t})`,()=>{n.assign(r.default.vErrors,i._`${r.default.vErrors} === null ? ${t} : ${r.default.vErrors}.concat(${t})`).assign(r.default.errors,i._`${r.default.vErrors}.length`),(0,s.extendErrors)(e)},()=>e.error())}(e,n))}}),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:i},r,o){if(Array.isArray(r.keyword)?!r.keyword.includes(o):r.keyword!==o)throw new Error("ajv implementation error");const s=r.dependencies;if(null==s?void 0:s.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(r.validateSchema){if(!r.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${i}": `+n.errorsText(r.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}}},5289:(e,t,n)=>{var i=n(9348),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},5295:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var i=n(5724);function r(e){return(0,i.hasChildren)(e)?e.children:[]}function o(e){return e.parent||null}t.getChildren=r,t.getParent=o,t.getSiblings=function(e){var t=o(e);if(null!=t)return r(t);for(var n=[e],i=e.prev,s=e.next;null!=i;)n.unshift(i),i=i.prev;for(;null!=s;)n.push(s),s=s.next;return n},t.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,i.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,i.isTag)(t);)t=t.prev;return t}},5314:(e,t,n)=>{"use strict";var i=n(5838);e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected a string");return e.replace(new RegExp("(?:"+i(t)+"){2,}","g"),t)}},5324:()=>{},5335:function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(3681))},5362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var i=n(5724),r=n(1991),o={tag_name:function(e){return"function"==typeof e?function(t){return(0,i.isTag)(t)&&e(t.name)}:"*"===e?i.isTag:function(t){return(0,i.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,i.isText)(t)&&e(t.data)}:function(t){return(0,i.isText)(t)&&t.data===e}}};function s(e,t){return"function"==typeof t?function(n){return(0,i.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,i.isTag)(n)&&n.attribs[e]===t}}function a(e,t){return function(n){return e(n)||t(n)}}function l(e){var t=Object.keys(e).map(function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(o,t)?o[t](n):s(t,n)});return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var n=l(e);return!n||n(t)},t.getElements=function(e,t,n,i){void 0===i&&(i=1/0);var o=l(e);return o?(0,r.filter)(o,t,n,i):[]},t.getElementById=function(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,r.findOne)(s("id",e),t,n)},t.getElementsByTagName=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),(0,r.filter)(o.tag_name(e),t,n,i)},t.getElementsByTagType=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=1/0),(0,r.filter)(o.tag_type(e),t,n,i)}},5367:(e,t,n)=>{!function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,n){if(!(this instanceof r))return new r(t,n);var o=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(o),o.q=o.c="",o.bufferCheckPosition=e.MAX_BUFFER_LENGTH,o.opt=n||{},o.opt.lowercase=o.opt.lowercase||o.opt.lowercasetags,o.looseCase=o.opt.lowercase?"toLowerCase":"toUpperCase",o.tags=[],o.closed=o.closedRoot=o.sawRoot=!1,o.tag=o.error=null,o.strict=!!t,o.noscript=!(!t&&!o.opt.noscript),o.state=C.BEGIN,o.strictEntities=o.opt.strictEntities,o.ENTITIES=o.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),o.attribList=[],o.opt.xmlns&&(o.ns=Object.create(u)),o.trackPosition=!1!==o.opt.position,o.trackPosition&&(o.position=o.line=o.column=0),M(o,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){D(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return L(n,"Cannot write after close. Assign an onready handler.");if(null===t)return D(n);"object"==typeof t&&(t=t.toString());var r=0,o="";for(;o=z(t,r++),n.c=o,o;)switch(n.trackPosition&&(n.position++,"\n"===o?(n.line++,n.column=0):n.column++),n.state){case C.BEGIN:if(n.state=C.BEGIN_WHITESPACE,"\ufeff"===o)continue;F(n,o);continue;case C.BEGIN_WHITESPACE:F(n,o);continue;case C.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=r-1;o&&"<"!==o&&"&"!==o;)(o=z(t,r++))&&n.trackPosition&&(n.position++,"\n"===o?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(s,r-1)}"<"!==o||n.sawRoot&&n.closedRoot&&!n.strict?(g(o)||n.sawRoot&&!n.closedRoot||I(n,"Text data outside of root node."),"&"===o?n.state=C.TEXT_ENTITY:n.textNode+=o):(n.state=C.OPEN_WAKA,n.startTagPosition=n.position);continue;case C.SCRIPT:"<"===o?n.state=C.SCRIPT_ENDING:n.script+=o;continue;case C.SCRIPT_ENDING:"/"===o?n.state=C.CLOSE_TAG:(n.script+="<"+o,n.state=C.SCRIPT);continue;case C.OPEN_WAKA:if("!"===o)n.state=C.SGML_DECL,n.sgmlDecl="";else if(g(o));else if(b(h,o))n.state=C.OPEN_TAG,n.tagName=o;else if("/"===o)n.state=C.CLOSE_TAG,n.tagName="";else if("?"===o)n.state=C.PROC_INST,n.procInstName=n.procInstBody="";else{if(I(n,"Unencoded <"),n.startTagPosition+1<n.position){var c=n.position-n.startTagPosition;o=new Array(c).join(" ")+o}n.textNode+="<"+o,n.state=C.TEXT}continue;case C.SGML_DECL:(n.sgmlDecl+o).toUpperCase()===a?(S(n,"onopencdata"),n.state=C.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+o==="--"?(n.state=C.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+o).toUpperCase()===l?(n.state=C.DOCTYPE,(n.doctype||n.sawRoot)&&I(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===o?(S(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=C.TEXT):v(o)?(n.state=C.SGML_DECL_QUOTED,n.sgmlDecl+=o):n.sgmlDecl+=o;continue;case C.SGML_DECL_QUOTED:o===n.q&&(n.state=C.SGML_DECL,n.q=""),n.sgmlDecl+=o;continue;case C.DOCTYPE:">"===o?(n.state=C.TEXT,S(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=o,"["===o?n.state=C.DOCTYPE_DTD:v(o)&&(n.state=C.DOCTYPE_QUOTED,n.q=o));continue;case C.DOCTYPE_QUOTED:n.doctype+=o,o===n.q&&(n.q="",n.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:n.doctype+=o,"]"===o?n.state=C.DOCTYPE:v(o)&&(n.state=C.DOCTYPE_DTD_QUOTED,n.q=o);continue;case C.DOCTYPE_DTD_QUOTED:n.doctype+=o,o===n.q&&(n.state=C.DOCTYPE_DTD,n.q="");continue;case C.COMMENT:"-"===o?n.state=C.COMMENT_ENDING:n.comment+=o;continue;case C.COMMENT_ENDING:"-"===o?(n.state=C.COMMENT_ENDED,n.comment=k(n.opt,n.comment),n.comment&&S(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+o,n.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==o?(I(n,"Malformed comment"),n.comment+="--"+o,n.state=C.COMMENT):n.state=C.TEXT;continue;case C.CDATA:"]"===o?n.state=C.CDATA_ENDING:n.cdata+=o;continue;case C.CDATA_ENDING:"]"===o?n.state=C.CDATA_ENDING_2:(n.cdata+="]"+o,n.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===o?(n.cdata&&S(n,"oncdata",n.cdata),S(n,"onclosecdata"),n.cdata="",n.state=C.TEXT):"]"===o?n.cdata+="]":(n.cdata+="]]"+o,n.state=C.CDATA);continue;case C.PROC_INST:"?"===o?n.state=C.PROC_INST_ENDING:g(o)?n.state=C.PROC_INST_BODY:n.procInstName+=o;continue;case C.PROC_INST_BODY:if(!n.procInstBody&&g(o))continue;"?"===o?n.state=C.PROC_INST_ENDING:n.procInstBody+=o;continue;case C.PROC_INST_ENDING:">"===o?(S(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=C.TEXT):(n.procInstBody+="?"+o,n.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:b(p,o)?n.tagName+=o:(R(n),">"===o?B(n):"/"===o?n.state=C.OPEN_TAG_SLASH:(g(o)||I(n,"Invalid character in tag name"),n.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===o?(B(n,!0),N(n)):(I(n,"Forward-slash in opening tag not followed by >"),n.state=C.ATTRIB);continue;case C.ATTRIB:if(g(o))continue;">"===o?B(n):"/"===o?n.state=C.OPEN_TAG_SLASH:b(h,o)?(n.attribName=o,n.attribValue="",n.state=C.ATTRIB_NAME):I(n,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===o?n.state=C.ATTRIB_VALUE:">"===o?(I(n,"Attribute without value"),n.attribValue=n.attribName,P(n),B(n)):g(o)?n.state=C.ATTRIB_NAME_SAW_WHITE:b(p,o)?n.attribName+=o:I(n,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===o)n.state=C.ATTRIB_VALUE;else{if(g(o))continue;I(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",S(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===o?B(n):b(h,o)?(n.attribName=o,n.state=C.ATTRIB_NAME):(I(n,"Invalid attribute name"),n.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(g(o))continue;v(o)?(n.q=o,n.state=C.ATTRIB_VALUE_QUOTED):(I(n,"Unquoted attribute value"),n.state=C.ATTRIB_VALUE_UNQUOTED,n.attribValue=o);continue;case C.ATTRIB_VALUE_QUOTED:if(o!==n.q){"&"===o?n.state=C.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=o;continue}P(n),n.q="",n.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:g(o)?n.state=C.ATTRIB:">"===o?B(n):"/"===o?n.state=C.OPEN_TAG_SLASH:b(h,o)?(I(n,"No whitespace between attributes"),n.attribName=o,n.attribValue="",n.state=C.ATTRIB_NAME):I(n,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!y(o)){"&"===o?n.state=C.ATTRIB_VALUE_ENTITY_U:n.attribValue+=o;continue}P(n),">"===o?B(n):n.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(n.tagName)">"===o?N(n):b(p,o)?n.tagName+=o:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=C.SCRIPT):(g(o)||I(n,"Invalid tagname in closing tag"),n.state=C.CLOSE_TAG_SAW_WHITE);else{if(g(o))continue;A(h,o)?n.script?(n.script+="</"+o,n.state=C.SCRIPT):I(n,"Invalid tagname in closing tag."):n.tagName=o}continue;case C.CLOSE_TAG_SAW_WHITE:if(g(o))continue;">"===o?N(n):I(n,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var d,u;switch(n.state){case C.TEXT_ENTITY:d=C.TEXT,u="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:d=C.ATTRIB_VALUE_QUOTED,u="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:d=C.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===o?(n[u]+=U(n),n.entity="",n.state=d):b(n.entity.length?f:m,o)?n.entity+=o:(I(n,"Invalid character in entity name"),n[u]+="&"+n.entity+o,n.entity="",n.state=d);continue;default:throw new Error(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,o=0,s=i.length;o<s;o++){var a=t[i[o]].length;if(a>n)switch(i[o]){case"textNode":T(t);break;case"cdata":S(t,"oncdata",t.cdata),t.cdata="";break;case"script":S(t,"onscript",t.script),t.script="";break;default:L(t,"Max buffer length exceeded: "+i[o])}r=Math.max(r,a)}var l=e.MAX_BUFFER_LENGTH-r;t.bufferCheckPosition=l+t.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;T(e=this),""!==e.cdata&&(S(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(S(e,"onscript",e.script),e.script="")}};try{t=n(506).Stream}catch(e){t=function(){}}var o=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function s(e,n){if(!(this instanceof s))return new s(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,o.forEach(function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t,t;i.on(e,t)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(961).I;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,n){var i=this;return i._parser["on"+e]||-1===o.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),t.prototype.on.call(i,e,n)};var a="[CDATA[",l="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/2000/xmlns/",u={xml:c,xmlns:d},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function g(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function v(e){return'"'===e||"'"===e}function y(e){return">"===e||g(e)}function b(e,t){return e.test(t)}function A(e,t){return!b(e,t)}var _,w,x,C=0;for(var E in e.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var n=e.ENTITIES[t],i="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=i}),e.STATE)e.STATE[e.STATE[E]]=E;function M(e,t,n){e[t]&&e[t](n)}function S(e,t,n){e.textNode&&T(e),M(e,t,n)}function T(e){e.textNode=k(e.opt,e.textNode),e.textNode&&M(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function L(e,t){return T(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,M(e,"onerror",t),e}function D(e){return e.sawRoot&&!e.closedRoot&&I(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&L(e,"Unexpected end"),T(e),e.c="",e.closed=!0,M(e,"onend"),r.call(e,e.strict,e.opt),e}function I(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&L(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,S(e,"onopentagstart",n)}function O(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],r=n[1];return t&&"xmlns"===e&&(i="xmlns",r=""),{prefix:i,local:r}}function P(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=O(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==c)I(e,"xml: prefix must be bound to "+c+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==d)I(e,"xmlns: prefix must be bound to "+d+"\nActual: "+e.attribValue);else{var r=e.tag,o=e.tags[e.tags.length-1]||e;r.ns===o.ns&&(r.ns=Object.create(o.ns)),r.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,S(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var n=e.tag,i=O(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(I(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){S(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var o=0,s=e.attribList.length;o<s;o++){var a=e.attribList[o],l=a[0],c=a[1],d=O(l,!0),u=d.prefix,h=d.local,p=""===u?"":n.ns[u]||"",m={name:l,value:c,prefix:u,local:h,uri:p};u&&"xmlns"!==u&&!p&&(I(e,"Unbound namespace prefix: "+JSON.stringify(u)),m.uri=u),e.tag.attributes[l]=m,S(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),S(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=C.TEXT:e.state=C.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function N(e){if(!e.tagName)return I(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=C.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=C.SCRIPT);S(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--;){if(e.tags[t].name===i)break;I(e,"Unexpected close tag")}if(t<0)return I(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=C.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,S(e,"onclosetag",e.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach(function(t){var n=o.ns[t];S(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=C.TEXT}function U(e){var t,n=e.entity,i=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||r.toLowerCase()!==n?(I(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function F(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):g(t)||(I(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function z(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}C=e.STATE,String.fromCodePoint||(_=String.fromCharCode,w=Math.floor,x=function(){var e,t,n=[],i=-1,r=arguments.length;if(!r)return"";for(var o="";++i<r;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||w(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(i+1===r||n.length>16384)&&(o+=_.apply(null,n),n.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x)}(t)},5370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`Object.keys(${n}).length ${o} ${r}`)}};t.default=r},5391:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(3151),r=n(1365),o=n(7022),s=n(6335),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&d(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function d(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,i.eachItem)(e[n],e=>t+=d(e)),t===1/0))return 1/0}return t}function u(e="",t){!1!==t&&(e=m(e));return h(s.parse(e))}function h(e){return s.serialize(e).split("#")[0]+"#"}t.getFullPath=u,t._getFullPath=h;const p=/#\/?$/;function m(e){return e?e.replace(p,""):""}t.normalizeId=m,t.resolveUrl=function(e,t){return t=m(t),s.resolve(e,t)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n}=this.opts,i=m(e[n]||t),a={"":i},l=u(i,!1),c={},d=new Set;return o(e,{allKeys:!0},(e,t,i,r)=>{if(void 0===r)return;const o=l+t;let u=a[r];function g(t){if(t=m(u?s.resolve(u,t):t),d.has(t))throw p(t);d.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==m(o)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=o),t}function v(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);g.call(this,`#${e}`)}}"string"==typeof e[n]&&(u=g.call(this,e[n])),v.call(this,e.$anchor),v.call(this,e.$dynamicAnchor),a[t]=u}),c;function h(e,t,n){if(void 0!==t&&!r(e,t))throw p(n)}function p(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},5394:function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"يېرىم كېچە":i<900?"سەھەر":i<1130?"چۈشتىن بۇرۇن":i<1230?"چۈش":i<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(3681))},5451:(e,t,n)=>{"use strict";const i=n(7130),r=n(6607),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let i=a(n);const r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const r=function(e){if(l.isBuffer(e)){const t=0|m(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return d(e),a(e<0?0:0|m(e))}function h(e){const t=e.length<0?0:0|m(e.length),n=a(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function m(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return i?-1:Q(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(r){let i=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*s}else-1!==i&&(o-=o-i),i=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){let n=!0;for(let i=0;i<l;i++)if(c(e,o+i)!==c(t,i)){n=!1;break}if(n)return o}return-1}function A(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const o=t.length;let s;for(i>o/2&&(i=o/2),s=0;s<i;++s){const i=parseInt(t.substr(2*s,2),16);if(K(i))return s;e[n+s]=i}return s}function _(e,t,n,i){return q(Q(t,e.length-n),e,n,i)}function w(e,t,n,i){return q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function x(e,t,n,i){return q($(t),e,n,i)}function C(e,t,n,i){return q(function(e,t){let n,i,r;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(r+s<=n){let n,i,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:n=e[r+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[r+1],i=e[r+2],a=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=s}return function(e){const t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=S));return n}(i)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return d(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return u(e)},l.allocUnsafeSlow=function(e){return u(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(W(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(W(t,Uint8Array))r+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,r){if(W(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(i,r),d=e.slice(t,n);for(let e=0;e<a;++e)if(c[e]!==d[e]){o=c[e],s=d[e];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function T(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function k(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function L(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=Z[e[i]];return r}function D(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,r,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function O(e,t,n,i,r){j(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function P(e,t,n,i,r){j(t,i,r,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function B(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,i,o){return t=+t,n>>>=0,o||B(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function U(e,t,n,i,o){return t=+t,n>>>=0,o||B(e,0,n,8),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=X(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))}),l.prototype.readBigUInt64BE=X(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=this[e],r=1,o=0;for(;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let i=t,r=1,o=this[e+--i];for(;i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=X(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=X(function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){R(this,e,t,n,Math.pow(2,8*n)-1,0)}let r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=X(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=X(function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=0,o=1,s=0;for(this[t]=255&e;++r<n&&(o*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/o|0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=n-1,o=1,s=0;for(this[t+r]=255&e;--r>=0&&(o*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/o|0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=X(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=X(function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const o=l.isBuffer(e)?e:l.from(e,i),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=o[r%s]}return this};const F={};function z(e,t,n){F[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function j(e,t,n,i,r,o){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(o+1)}${i}`:`>= -(2${i} ** ${8*(o+1)-1}${i}) and < 2 ** ${8*(o+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new F.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(i,r,o)}function V(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),z("ERR_OUT_OF_RANGE",function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=H(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=H(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i},RangeError);const G=/[^+/0-9A-Za-z-_]/g;function Q(e,t){let n;t=t||1/0;const i=e.length;let r=null;const o=[];for(let s=0;s<i;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const Z=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function X(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},5452:function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(3681))},5532:(e,t,n)=>{"use strict";n.d(t,{Pq:()=>r,Ay:()=>s});var i=n(2704);class r{static makeZeros(){return new r(0,0,0)}static makeOnes(){return new r(1,1,1)}static makeUnitX(){return new r(1,0,0)}static makeUnitY(){return new r(0,1,0)}static makeUnitZ(){return new r(0,0,1)}static makeCopy(e){return new r(e.x,e.y,e.z)}static makeFromScalar(e){return new r(e,e,e)}static makeFromArray(e){return new r(e[0],e[1],e[2])}static toString(e){return`[${e.x}, ${e.y}, ${e.z}]`}constructor(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setFromScalar(e){return this.x=e,this.y=e,this.z=e,this}setFromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}setZeros(){return this.x=0,this.y=0,this.z=0,this}setOnes(){return this.x=1,this.y=1,this.z=1,this}setUnitX(){return this.x=1,this.y=0,this.z=0,this}setUnitY(){return this.x=0,this.y=1,this.z=0,this}setUnitZ(){return this.x=0,this.y=0,this.z=1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}mul(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}div(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}mulScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}divScalar(e){return this.x/=e,this.y/=e,this.z/=e,this}translate(e,t,n){return this.x+=e,this.y+=t,this.z+=n,this}rotateX(e){const t=Math.cos(e),n=Math.sin(e),i=this.y,r=this.z;return this.y=t*i-n*r,this.z=n*i+t*r,this}rotateY(e){const t=Math.cos(e),n=Math.sin(e),i=this.x,r=this.z;return this.x=t*i+n*r,this.z=-n*i+t*r,this}rotateZ(e){const t=Math.cos(e),n=Math.sin(e),i=this.x,r=this.y;return this.x=t*i-n*r,this.y=n*i+t*r,this}scale(e,t,n){return this.x*=e,this.y*=t,this.z*=n,this}invert(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x*=e,this.y*=e,this.z*=e,this}homogenize(){return this.x/=this.z,this.y/=this.z,this.z=1,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){const t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,i=this.x*e.y-this.y*e.x;return this.x=t,this.y=n,this.z=i,this}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){const e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n}distanceTo(e){const t=e.x-this.x,n=e.y-this.y,i=e.z-this.z;return Math.sqrt(t*t+n*n+i*i)}min(){return this.x<this.y?this.x<this.z?this.x:this.z:this.y<this.z?this.y:this.z}max(){return this.x>this.y?this.x>this.z?this.x:this.z:this.y>this.z?this.y:this.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}clone(){return new r(this.x,this.y,this.z)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e):[this.x,this.y,this.z]}toVector2(e){return e?(e.x=this.x,e.y=this.y,e):new i.A(this.x,this.y)}toString(){return r.toString(this)}}r.zeros=new r(0,0,0),r.ones=new r(1,1,1),r.unitX=new r(1,0,0),r.unitY=new r(0,1,0),r.unitZ=new r(0,0,1);class o{static makeZeros(){return new o(0,0,0,0)}static makeOnes(){return new o(1,1,1,1)}static makeUnitX(){return new o(1,0,0,0)}static makeUnitY(){return new o(0,1,0,0)}static makeUnitZ(){return new o(0,0,1,0)}static makeUnitW(){return new o(0,0,0,1)}static makeCopy(e){return new o(e.x,e.y,e.z,e.w)}static makeFromScalar(e){return new o(e,e,e,e)}static makeFromArray(e){return new o(e[0],e[1],e[2],e[3])}static makeFromPosition(e){return new o(e.x,e.y,e.z,1)}static makeFromDirection(e){return new o(e.x,e.y,e.z,0)}static toString(e){return`[${e.x}, ${e.y}, ${e.z}, ${e.w}]`}constructor(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=i||0}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=void 0===i?1:i,this}setFromScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setFromArray(e,t=1){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}setPosition(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=1,this}setDirection(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=0,this}setZeros(){return this.x=0,this.y=0,this.z=0,this.w=0,this}setOnes(){return this.x=1,this.y=1,this.z=1,this.w=1,this}setUnitX(){return this.x=1,this.y=0,this.z=0,this.w=0,this}setUnitY(){return this.x=0,this.y=1,this.z=0,this.w=0,this}setUnitZ(){return this.x=0,this.y=0,this.z=1,this.w=0,this}setUnitW(){return this.x=0,this.y=0,this.z=0,this.w=1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}mul(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}div(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}normalize(){const e=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}homogenize(){return this.x/=this.w,this.y/=this.w,this.z/=this.w,this.w=1,this}project(e){const t=this.dot(e)/this.lengthSquared();return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}length(){const e=this.x,t=this.y,n=this.z,i=this.w;return Math.sqrt(e*e+t*t+n*n+i*i)}lengthSquared(){const e=this.x,t=this.y,n=this.z,i=this.w;return e*e+t*t+n*n+i*i}isZero(){return 0===this.x&&0===this.y&&0===this.z&&0===this.w}clone(){return new o(this.x,this.y,this.z,this.w)}toArray(e,t){return e?(void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e):[this.x,this.y,this.z,this.w]}toVector3(e){return e?(e.x=this.x,e.y=this.y,e.z=this.z,e):new r(this.x,this.y,this.z)}toString(){return o.toString(this)}}o.zeros=new o(0,0,0,0),o.ones=new o(1,1,1,1),o.unitX=new o(1,0,0,0),o.unitY=new o(0,1,0,0),o.unitZ=new o(0,0,1,0),o.unitW=new o(0,0,0,1);class s{static fromString(e){return(new s).setString(e)}static fromArray(e){return new s(e)}constructor(e=0,t=0,n=0,i=1){e instanceof s?(this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w):Array.isArray(e)?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this.w=void 0!==e[3]?e[3]:1):"string"==typeof e?this.setString(e):(this.x=e,this.y=t,this.z=n,this.w=i)}get r(){return this.x}get g(){return this.y}get b(){return this.z}get a(){return this.w}set r(e){this.x=e}set g(e){this.y=e}set b(e){this.z=e}set a(e){this.w=e}get red(){return this.x}get green(){return this.y}get blue(){return this.z}get alpha(){return this.w}set red(e){this.x=e}set green(e){this.y=e}set blue(e){this.z=e}set alpha(e){this.w=e}get redByte(){return Math.floor(255*this.x)}get greenByte(){return Math.floor(255*this.y)}get blueByte(){return Math.floor(255*this.z)}get alphaByte(){return Math.floor(255*this.w)}set redByte(e){this.x=e/255}set greenByte(e){this.y=e/255}set blueByte(e){this.z=e/255}set alphaByte(e){this.w=e/255}inverseMultiply(e){return this.x=this.x*(1-e)+e,this.y=this.y*(1-e)+e,this.z=this.z*(1-e)+e,this}multiply(e){return this.x*=e,this.y*=e,this.z*=e,this}copy(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w}clone(){return new s(this.x,this.y,this.z,this.w)}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=void 0===i?1:i,this}setBytes(e,t,n,i){return this.x=e/255,this.y=t/255,this.z=n/255,this.w=void 0===i?1:i/255,this}setUInt24RGB(e){return this.x=e>>16&255,this.y=e>>8&255,this.z=255&e,this.w=1,this}setUInt32RGBA(e){return this.x=e>>24&255,this.y=e>>16&255,this.z=e>>8&255,this.w=255&e,this.w=1,this}setRed(e){return this.x=e,this}setGreen(e){return this.y=e,this}setBlue(e){return this.z=e,this}setAlpha(e){return this.w=e,this}setRedByte(e){return this.x=e/255,this}setGreenByte(e){return this.y=e/255,this}setBlueByte(e){return this.z=e/255,this}setAlphaByte(e){return this.w=e/255,this}setHSV(e,t=1,n=1,i){"object"==typeof e&&(t=e.y,n=e.z,i=void 0!==e.w?e.w:i,e=e.x);const r=Math.floor(e/60),o=e/60-r,s=n*(1-t),a=n*(1-o*t),l=n*(1-(1-o)*t);let c,d,u;switch(r%6){case 0:c=n,d=l,u=s;break;case 1:c=a,d=n,u=s;break;case 2:c=s,d=n,u=l;break;case 3:c=s,d=a,u=n;break;case 4:c=l,d=s,u=n;break;case 5:c=n,d=s,u=a}return this.x=c,this.y=d,this.z=u,void 0!==i&&(this.w=i),this}setHSL(e,t=1,n=1,i){if("object"==typeof e&&(t=e.y,n=e.z,i=void 0!==e.w?e.w:i,e=e.x),0===t)this.x=this.y=this.z=n;else{function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e/=360;var r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;this.x=s(o,r,e+1/3),this.y=s(o,r,e),this.z=s(o,r,e-1/3)}return void 0!==i&&(this.w=i),this}fromArray(e){this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this.w=void 0!==e[3]?e[3]:1}setString(e,t=1,n=!0){var i;e=e.trim().toLowerCase(),e=s.presets[e]||e;let r=null===(i=/^#?([0-9a-f]{3,8})$/i.exec(e))||void 0===i?void 0:i[1];if(r&&(3===r.length||4==r.length)){const e=1/15;return this.x=Number.parseInt(r.charAt(0),16)*e,this.y=Number.parseInt(r.charAt(1),16)*e,this.z=Number.parseInt(r.charAt(2),16)*e,this.w=4==r.length?Number.parseInt(r.charAt(3),16)*e:t,this}if(r&&(6===r.length||8==r.length)){const e=1/255;return this.x=Number.parseInt(r.substr(0,2),16)*e,this.y=Number.parseInt(r.substr(2,2),16)*e,this.z=Number.parseInt(r.substr(4,2),16)*e,this.w=8==r.length?Number.parseInt(r.substr(6,2),16)*e:t,this}if(0===e.indexOf("rgb")){let n=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(n){const e=1/255;return this.x=Number.parseInt(n[1])*e,this.y=Number.parseInt(n[2])*e,this.z=Number.parseInt(n[3])*e,this.w=t,this}if(n=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i),n){const e=1/255;return this.x=Number.parseInt(n[1])*e,this.y=Number.parseInt(n[2])*e,this.z=Number.parseInt(n[3])*e,this.w=Number.parseFloat(n[4]),this}}if(0===e.indexOf("hsl")){let n=e.match(/(\d+(\.\d+)?)/g);return n&&this.setHSL(Number.parseFloat(n[0]),.01*Number.parseFloat(n[1]),.01*Number.parseFloat(n[2]),void 0!==n[3]?Number.parseFloat(n[3]):t),this}if(n)throw new RangeError("failed to parse color from string: "+e);return this}toUInt24RGB(){return Math.floor(255*this.x)<<16+Math.floor(255*this.y)<<8+Math.floor(255*this.z)}toUInt32RGBA(){return Math.floor(255*this.x)<<24+Math.floor(255*this.y)<<16+Math.floor(255*this.z)<<8+Math.floor(255*this.w)}toVector3(e){return e?(e.x=this.r,e.y=this.g,e.z=this.b,e):new r(this.r,this.g,this.b)}toVector4(e){return e?(e.x=this.r,e.y=this.g,e.z=this.b,e.w=this.a,e):new o(this.r,this.g,this.b,this.a)}toHSV(e){let t=this.x,n=this.y,i=this.z,o=Math.min(t,n,i),s=Math.max(t,n,i),a=s-o,l=0,c=0===s?0:a/s,d=s;return 0!==a&&(l=60*(t===s?(n-i)/a+(n<i?6:0):n===s?(i-t)/a+2:(t-n)/a+4)),e?(e.x=l,e.y=c,e.z=d,e):new r(l,c,d)}toHSL(e){let t=this.x,n=this.y,i=this.z,o=Math.min(t,n,i),s=Math.max(t,n,i),a=s-o,l=0,c=0,d=.5*(s+o);return 0!==a&&(c=d>.5?a/(2-s-o):a/(s+o),l=60*(t===s?(n-i)/a+(n<i?6:0):n===s?2+(i-t)/a:4+(t-n)/a)),e?(e.x=l,e.y=c,e.z=d,e):new r(l,c,d)}toRGBArray(e){return e?(e[0]=this.r,e[1]=this.g,e[2]=this.b,e):[this.r,this.g,this.b]}toRGBAArray(e){return e?(e[0]=this.r,e[1]=this.g,e[2]=this.b,e[3]=this.a,e):[this.r,this.g,this.b,this.a]}toString(e){let t=[this.redByte,this.greenByte,this.blueByte];return(e||void 0===e&&this.w<1)&&t.push(this.alphaByte),"#"+t.map(e=>e.toString(16).padStart(2,"0")).join("")}}s.presets={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},5541:function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},5572:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(3681))},5590:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(4640),r=n(3423),o=n(2464);class s extends o.A{constructor(e,t){super(e,t),this.ins=this.addInputs(s.dirLightIns),this.object3D=new i.ZyN,this.light.target.matrixAutoUpdate=!1}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;if((n.color.changed||n.intensity.changed)&&(t.intensity=n.intensity.value*Math.PI),(n.position.changed||n.target.changed)&&(t.position.fromArray(n.position.value),t.target.position.fromArray(n.target.value),t.updateMatrix(),t.target.updateMatrix()),n.shadowSize.changed){const e=t.shadow.camera,i=.5*n.shadowSize.value;e.left=e.bottom=-i,e.right=e.top=i,e.near=.05*n.shadowSize.value,e.far=50*n.shadowSize.value,e.updateProjectionMatrix()}return!0}onAddToParent(e){super.onAddToParent(e),e.add(this.light.target)}onRemoveFromParent(e){super.onRemoveFromParent(e),e.remove(this.light.target)}}s.typeName="CDirectionalLight",s.dirLightIns={position:r.gK.Vector3("Light.Position"),target:r.gK.Vector3("Light.Target",[0,-1,0]),shadowSize:r.gK.Number("Shadow.Size",{preset:100,min:0})}},5600:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,n=(e,t,n)=>{var i;return!!n(e,t.prototype)||(null===(i=e.constructor)||void 0===i?void 0:i.name)===t.name},i=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(t)===e,r=e=>t=>typeof t===e,o=i("string"),s=i("object"),a=e=>((e,i)=>s(e)&&n(e,i,(e,n)=>t(e)===n))(e,Object),l=i("array"),c=(d=null,e=>d===e);var d;const u=r("boolean"),h=e=>!(e=>null==e)(e),p=r("function"),m=r("number"),f=()=>{};class g{constructor(e,t){this.tag=e,this.value=t}static some(e){return new g(!0,e)}static none(){return g.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?g.some(e(this.value)):g.none()}bind(e){return this.tag?e(this.value):g.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:g.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?g.some(e):g.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}g.singletonNone=new g(!1);const v=Object.keys,y=Object.hasOwnProperty,b=(e,t,n,i)=>{((e,t)=>{const n=v(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}})(e,(e,r)=>{(t(e,r)?n:i)(e,r)})},A=(e,t)=>y.call(e,t),_=Array.prototype.push,w=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);_.apply(t,e[n])}return t},x=e=>((e,t)=>t>=0&&t<e.length?g.some(e[t]):g.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const C=(e,t,n)=>{((e,t,n)=>{if(!(o(n)||u(n)||m(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)},E=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return E(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return E(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return E(n)},fromDom:E,fromPoint:(e,t,n)=>g.from(e.dom.elementFromPoint(t,n)).map(E)};var S=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),T=tinymce.util.Tools.resolve("tinymce.util.URI");const k=e=>e.length>0,L=e=>t=>t.options.get(e),D=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||o(e)||((e,t)=>{if(l(e)){for(let n=0,i=e.length;n<i;++n)if(!t(e[n]))return!1;return!0}return!1})(e,s)||p(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},I=L("image_dimensions"),R=L("image_advtab"),O=L("image_uploadtab"),P=L("image_prepend_url"),B=L("image_class_list"),N=L("image_description"),U=L("image_title"),F=L("image_caption"),z=L("image_list"),H=L("a11y_advanced_options"),j=L("automatic_uploads"),V=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),Y=e=>(e&&(e=e.replace(/px$/,"")),e),G=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),Q=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),$=(e,t)=>{const n=e.options.get;return T.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},q=S.DOM,W=e=>e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?Y(e.style.marginLeft):"",K=e=>e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?Y(e.style.marginTop):"",Z=e=>e.style.borderWidth?Y(e.style.borderWidth):"",X=(e,t)=>{var n;return e.hasAttribute(t)&&null!==(n=e.getAttribute(t))&&void 0!==n?n:""},J=e=>null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName,ee=(e,t,n)=>{""===n||null===n?e.removeAttribute(t):e.setAttribute(t,n)},te=e=>{J(e)?(e=>{const t=e.parentNode;h(t)&&(q.insertAfter(e,t),q.remove(t))})(e):(e=>{const t=q.create("figure",{class:"image"});q.insertAfter(t,e),t.appendChild(e),t.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"})(e)},ne=(e,t)=>{const n=e.getAttribute("style"),i=t(null!==n?n:"");i.length>0?(e.setAttribute("style",i),e.setAttribute("data-mce-style",i)):e.removeAttribute("style")},ie=(e,t)=>(e,n,i)=>{const r=e.style;r[n]?(r[n]=G(i),ne(e,t)):ee(e,n,i)},re=(e,t)=>e.style[t]?Y(e.style[t]):X(e,t),oe=(e,t)=>{const n=G(t);e.style.marginLeft=n,e.style.marginRight=n},se=(e,t)=>{const n=G(t);e.style.marginTop=n,e.style.marginBottom=n},ae=(e,t)=>{const n=G(t);e.style.borderWidth=n},le=(e,t)=>{e.style.borderStyle=t},ce=e=>{var t;return null!==(t=e.style.borderStyle)&&void 0!==t?t:""},de=e=>h(e)&&"FIGURE"===e.nodeName,ue=e=>0===q.getAttrib(e,"alt").length&&"presentation"===q.getAttrib(e,"role"),he=e=>ue(e)?"":X(e,"alt"),pe=(e,t)=>{var n;const i=document.createElement("img");return ee(i,"style",t.style),(W(i)||""!==t.hspace)&&oe(i,t.hspace),(K(i)||""!==t.vspace)&&se(i,t.vspace),(Z(i)||""!==t.border)&&ae(i,t.border),(ce(i)||""!==t.borderStyle)&&le(i,t.borderStyle),e(null!==(n=i.getAttribute("style"))&&void 0!==n?n:"")},me=(e,t)=>({src:X(t,"src"),alt:he(t),title:X(t,"title"),width:re(t,"width"),height:re(t,"height"),class:X(t,"class"),style:e(X(t,"style")),caption:J(t),hspace:W(t),vspace:K(t),border:Z(t),borderStyle:ce(t),isDecorative:ue(t)}),fe=(e,t,n,i,r)=>{n[i]!==t[i]&&r(e,i,String(n[i]))},ge=(e,t,n)=>{if(n){q.setAttrib(e,"role","presentation");const t=M.fromDom(e);C(t,"alt","")}else{if(c(t)){const t=M.fromDom(e);i="alt",t.dom.removeAttribute(i)}else{const n=M.fromDom(e);C(n,"alt",t)}"presentation"===q.getAttrib(e,"role")&&q.setAttrib(e,"role","")}var i},ve=(e,t)=>(n,i,r)=>{e(n,r),ne(n,t)},ye=(e,t,n)=>{const i=me(e,n);fe(n,i,t,"caption",(e,t,n)=>te(e)),fe(n,i,t,"src",ee),fe(n,i,t,"title",ee),fe(n,i,t,"width",ie(0,e)),fe(n,i,t,"height",ie(0,e)),fe(n,i,t,"class",ee),fe(n,i,t,"style",ve((e,t)=>ee(e,"style",t),e)),fe(n,i,t,"hspace",ve(oe,e)),fe(n,i,t,"vspace",ve(se,e)),fe(n,i,t,"border",ve(ae,e)),fe(n,i,t,"borderStyle",ve(le,e)),((e,t,n)=>{n.alt===t.alt&&n.isDecorative===t.isDecorative||ge(e,n.alt,n.isDecorative)})(n,i,t)},be=(e,t)=>{const n=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),i=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(i)},Ae=e=>{const t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||Q(t))?null:t},_e=(e,t)=>{var n;const i=e.dom,r=((e,t)=>{const n={};var i;return b(e,t,(i=n,(e,t)=>{i[t]=e}),f),n})(e.schema.getTextBlockElements(),(t,n)=>!e.schema.isValidChild(n,"figure")),o=i.getParent(t.parentNode,e=>{return t=r,n=e.nodeName,A(t,n)&&void 0!==t[n]&&null!==t[n];var t,n},e.getBody());return o&&null!==(n=i.split(o,t))&&void 0!==n?n:t},we=(e,t)=>{const n=((e,t)=>{const n=document.createElement("img");if(ye(e,{...t,caption:!1},n),ge(n,t.alt,t.isDecorative),t.caption){const e=q.create("figure",{class:"image"});return e.appendChild(n),e.appendChild(q.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e}return n})(t=>be(e,t),t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);const i=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(i,"data-mce-id",null),de(i)){const t=_e(e,i);e.selection.select(t)}else e.selection.select(i)},xe=(e,t)=>{const n=Ae(e);if(n)if(ye(t=>be(e,t),t,n),((e,t)=>{e.dom.setAttrib(t,"src",t.getAttribute("src"))})(e,n),de(n.parentNode)){const t=n.parentNode;_e(e,t),e.selection.select(n.parentNode)}else e.selection.select(n),((e,t,n)=>{const i=()=>{n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())};n.onload=()=>{t.width||t.height||!I(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),i()},n.onerror=i})(e,t,n)},Ce=(e,t)=>{const n=Ae(e);if(n){const i={...me(t=>be(e,t),n),...t},r=((e,t)=>{const n=t.src;return{...t,src:$(e,n)?n:""}})(e,i);i.src?xe(e,r):((e,t)=>{if(t){const n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,n)}else t.src&&we(e,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...t})},Ee=(Me=(e,t)=>a(e)&&a(t)?Ee(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)A(i,e)&&(t[e]=Me(t[e],i[e]))}return t});var Me,Se=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Te=tinymce.util.Tools.resolve("tinymce.util.Tools");const ke=e=>o(e.value)?e.value:"",Le=(e,t)=>{const n=[];return Te.each(e,e=>{const i=(e=>o(e.text)?e.text:o(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=Le(e.menu,t);n.push({text:i,items:r})}else{const r=t(e);n.push({text:i,value:r})}}),n},De=(e=ke)=>t=>t?g.from(t).map(t=>Le(t,e)):g.none(),Ie=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i.isSome())return i}return g.none()})(e,e=>(e=>A(e,"items"))(e)?Ie(e.items,t):e.value===t?g.some(e):g.none()),Re=De,Oe=e=>De(ke)(e),Pe=(e,t)=>e.bind(e=>Ie(e,t)),Be=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),Ne=e=>{const t=Re(t=>e.convertURL(t.value||t.url||"","src")),n=new Promise(n=>{((e,t)=>{const n=z(e);o(n)?fetch(n).then(e=>{e.ok&&e.json().then(t)}):p(n)?n(t):t(n)})(e,e=>{n(t(e).map(e=>w([[{text:"None",value:""}],e])))})}),i=Oe(B(e)),r=R(e),s=O(e),a=(e=>k(e.options.get("images_upload_url")))(e),l=(e=>h(e.options.get("images_upload_handler")))(e),c=(e=>{const t=Ae(e);return t?me(t=>be(e,t),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),d=N(e),u=U(e),m=I(e),f=F(e),v=H(e),y=j(e),b=g.some(P(e)).filter(e=>o(e)&&e.length>0);return n.then(e=>({image:c,imageList:e,classList:i,hasAdvTab:r,hasUploadTab:s,hasUploadUrl:a,hasUploadHandler:l,hasDescription:d,hasImageTitle:u,hasDimensions:m,hasImageCaption:f,prependURL:b,hasAccessibilityOptions:v,automaticUploads:y}))},Ue=e=>{const t=e.imageList.map(e=>({name:"images",type:"listbox",label:"Image list",items:e})),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},i=e.classList.map(e=>({name:"classes",type:"listbox",label:"Class",items:e}));return w([[{name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(r=e.classList.isSome()&&e.hasImageCaption,r?{type:"grid",columns:2}:{type:"panel"}),items:w([i.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var r},Fe=e=>({title:"General",name:"general",items:Ue(e)}),ze=Ue,He=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),je=e=>({src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}),Ve=(e,t)=>({src:e.src.value,alt:null!==e.alt&&0!==e.alt.length||!t?e.alt:null,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}),Ye=(e,t)=>{const n=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?g.none():e.prependURL.bind(e=>t.substring(0,e.length)!==e?g.some(e+t):g.none()))(e,n.src.value).each(e=>{t.setData({src:{value:e,meta:n.src.meta}})})},Ge=(e,t)=>{const n=t.getData(),i=n.src.meta;if(void 0!==i){const r=Ee({},n);((e,t,n)=>{e.hasDescription&&o(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&o(n.title)&&(t.title=n.title),e.hasDimensions&&(o(n.width)&&(t.dimensions.width=n.width),o(n.height)&&(t.dimensions.height=n.height)),o(n.class)&&Pe(e.classList,n.class).each(e=>{t.classes=e.value}),e.hasImageCaption&&u(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(o(n.style)&&(t.style=n.style),o(n.vspace)&&(t.vspace=n.vspace),o(n.border)&&(t.border=n.border),o(n.hspace)&&(t.hspace=n.hspace),o(n.borderstyle)&&(t.borderstyle=n.borderstyle))})(e,r,i),t.setData(r)}},Qe=(e,t,n,i)=>{Ye(t,i),Ge(t,i),((e,t,n,i)=>{const r=i.getData(),o=r.src.value,s=r.src.meta||{};s.width||s.height||!t.hasDimensions||(k(o)?e.imageSize(o).then(e=>{n.open&&i.setData({dimensions:e})}).catch(e=>console.error(e)):i.setData({dimensions:{width:"",height:""}}))})(e,t,n,i),((e,t,n)=>{const i=n.getData(),r=Pe(e.imageList,i.src.value);t.prevImage=r,n.setData({images:r.map(e=>e.value).getOr("")})})(t,n,i)},$e=(e,t,n,i)=>{const r=i.getData();i.block("Uploading image"),x(r.fileinput).fold(()=>{i.unblock()},r=>{const o=URL.createObjectURL(r),s=()=>{i.unblock(),URL.revokeObjectURL(o)},a=r=>{i.setData({src:{value:r,meta:{}}}),i.showTab("general"),Qe(e,t,n,i)};var l;(l=r,new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.onerror=()=>{var e;t(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(l)})).then(n=>{const l=e.createBlobCache(r,o,n);t.automaticUploads?e.uploadImage(l).then(e=>{a(e.url),s()}).catch(t=>{s(),e.alertErr(t)}):(e.addToBlobCache(l),a(l.blobUri()),i.unblock())})})},qe=(e,t,n)=>(i,r)=>{"src"===r.name?Qe(e,t,n,i):"images"===r.name?((e,t,n,i)=>{const r=i.getData(),o=Pe(t.imageList,r.images);o.each(e=>{const t=""===r.alt||n.prevImage.map(e=>e.text===r.alt).getOr(!1);t?""===e.value?i.setData({src:e,alt:n.prevAlt}):i.setData({src:e,alt:e.text}):i.setData({src:e})}),n.prevImage=o,Qe(e,t,n,i)})(e,t,n,i):"alt"===r.name?n.prevAlt=i.getData().alt:"fileinput"===r.name?$e(e,t,n,i):"isDecorative"===r.name&&i.setEnabled("alt",!i.getData().isDecorative)},We=e=>()=>{e.open=!1},Ke=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:w([[Fe(e)],e.hasAdvTab?[Be(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[He(e)]:[]])}}return{type:"panel",items:ze(e)}},Ze=(e,t,n)=>i=>{const r=Ee(je(t.image),i.getData()),o={...r,style:pe(n.normalizeCss,Ve(r,!1))};e.execCommand("mceUpdateImage",!1,Ve(o,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),i.close()},Xe=e=>t=>$(e,t)?(e=>new Promise(t=>{const n=document.createElement("img"),i=e=>{n.onload=n.onerror=null,n.parentNode&&n.parentNode.removeChild(n),t(e)};n.onload=()=>{const e={width:V(n.width,n.clientWidth),height:V(n.height,n.clientHeight)};i(Promise.resolve(e))},n.onerror=()=>{i(Promise.reject(`Failed to get image dimensions for: ${e}`))};const r=n.style;r.visibility="hidden",r.position="fixed",r.bottom=r.left="0px",r.width=r.height="auto",document.body.appendChild(n),n.src=e}))(e.documentBaseURI.toAbsolute(t)).then(e=>({width:String(e.width),height:String(e.height)})):Promise.resolve({width:"",height:""}),Je=e=>(t,n,i)=>{var r;return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:null===(r=t.name)||void 0===r?void 0:r.replace(/\.[^\.]+$/,""),filename:t.name,base64:i.split(",")[1]})},et=e=>t=>{e.editorUpload.blobCache.add(t)},tt=e=>t=>{e.windowManager.alert(t)},nt=e=>t=>be(e,t),it=e=>t=>e.dom.parseStyle(t),rt=e=>(t,n)=>e.dom.serializeStyle(t,n),ot=e=>t=>Se(e).upload([t],!1).then(e=>{var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]}),st=e=>{const t={imageSize:Xe(e),addToBlobCache:et(e),createBlobCache:Je(e),alertErr:tt(e),normalizeCss:nt(e),parseStyle:it(e),serializeStyle:rt(e),uploadImage:ot(e)};return{open:()=>{Ne(e).then(n=>{const i=(e=>({prevImage:Pe(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(n);return{title:"Insert/Edit Image",size:"normal",body:Ke(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:je(n.image),onSubmit:Ze(e,n,t),onChange:qe(t,n,i),onClose:We(i)}}).then(e.windowManager.open)}}},at=e=>{const t=e.attr("class");return h(t)&&/\bimage\b/.test(t)},lt=e=>t=>{let n=t.length;const i=t=>{t.attr("contenteditable",e?"true":null)};for(;n--;){const r=t[n];at(r)&&(r.attr("contenteditable",e?"false":null),Te.each(r.getAll("figcaption"),i))}},ct=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("image",e=>{D(e),(e=>{e.on("PreInit",()=>{e.parser.addNodeFilter("figure",lt(!0)),e.serializer.addNodeFilter("figure",lt(!1))})})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:st(e).open,onSetup:t=>{t.setActive(h(Ae(e)));const n=e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind,i=ct(e)(t);return()=>{n(),i()}}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:st(e).open,onSetup:ct(e)}),e.ui.registry.addContextMenu("image",{update:t=>e.selection.isEditable()&&(de(t)||"IMG"===t.nodeName&&!Q(t))?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",st(e).open),e.addCommand("mceUpdateImage",(t,n)=>{e.undoManager.transact(()=>Ce(e,n))})})(e)})}()},5609:function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn-bd",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t?e<4?e:e+12:"ভোর"===t||"সকাল"===t?e:"দুপুর"===t?e>=3?e:e+12:"বিকাল"===t||"সন্ধ্যা"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"রাত":e<6?"ভোর":e<12?"সকাল":e<15?"দুপুর":e<18?"বিকাল":e<20?"সন্ধ্যা":"রাত"},week:{dow:0,doy:6}})}(n(3681))},5623:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(2464),r=n(6389);class o extends i.A{constructor(){super(...arguments),this.canDelete=!1,this.environment=null}get settingProperties(){return[this.ins.enabled,this.ins.intensity]}create(){super.create(),this.environment=this.getGraphComponent(r.A);const e=this.environment.ins;e.intensity.linkFrom(this.ins.intensity),e.enabled.linkFrom(this.ins.enabled),this.node.name="Environment",this.ins.name.setValue("Environment"),this.node.transform.addTag("no_settings")}update(){return this.ins.enabled.changed&&this.node.emit({type:"change",what:"enabled",node:this.node}),!0}dispose(){super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if(n.type!==o.type)throw new Error("light type mismatch: not an environment light");return n.point=n.point||{},i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,intensity:n.intensity.value};i.type=o.type,e.lights=e.lights||[];const r=e.lights.length;return e.lights.push(i),r}}o.typeName="CVEnvironmentLight",o.type="environment",o.text="Environment Light",o.icon="globe"},5624:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3331);class r extends i.A{constructor(){super(),this._dict={},this.addEvent("type")}add(e){if(Array.isArray(e))return void e.forEach(e=>this.add(e));const t=e.typeName;if(!t)throw new Error("type must have a 'typeName' member");if(this._dict[t])throw new Error(`type '${t}' already registered`);this._dict[t]=e,this.emit({type:"type",add:!0,remove:!1,classType:e})}remove(e){if(Array.isArray(e))return void e.forEach(e=>this.remove(e));const t=e.typeName;if(!t)throw new Error("type must have a 'typeName' member");if(!this._dict[t])throw new Error(`type '${t}' not registered`);delete this._dict[t],this.emit({type:"type",add:!1,remove:!0,classType:e})}getType(e){let t=e;return"function"==typeof e?t=e.typeName:"object"==typeof e&&(t=e.constructor.typeName),this._dict[t]}createInstance(e,...t){const n=this.getType(e);if(!n)throw new Error(`type '${e}' not registered`);return new n(...t)}}},5626:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const i=n(5265),r=n(3151),o=n(6241),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return a(e,"additionalItems",t);n.items=!0,(0,r.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function a(e,t,n=e.schema){const{gen:o,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:i,errSchemaPath:o}=c,s=n.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);if(i.strictTuples&&!a){const e=`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,r.checkStrictMode)(c,e,i.strictTuples)}}(s),c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=r.mergeEvaluated.items(o,n.length,c.items));const d=o.name("valid"),u=o.const("len",i._`${a}.length`);n.forEach((t,n)=>{(0,r.alwaysValidSchema)(c,t)||(o.if(i._`${u} > ${n}`,()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},d)),e.ok(d))})}t.validateTuple=a,t.default=s},5632:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r.Ay,A:()=>f});var i=n(8337),r=n(5532),o=(n(8428),n(8738)),s=n(2704),a=n(6763),l=n(7280),c=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let d=class extends a.Ay{constructor(){super(),this.value=new s.A,this._offsetX=0,this._offsetY=0,this._knob=(new a.Ay).addClass("ff-knob").setStyle({display:"block",position:"relative "}),new l.A(this)}setXY(e,t){this.value.set(e,t),this.requestUpdate()}dragStart(e){const t=this._knob,n=this.getBoundingClientRect();e.target===this._knob?(this._offsetX=e.clientX-t.offsetLeft+.5*(t.clientWidth-t.offsetWidth),this._offsetY=e.clientY-t.offsetTop+.5*(t.clientHeight-t.offsetHeight)):(this._offsetX=n.left+.8*t.clientWidth,this._offsetY=n.top+.8*t.clientHeight),this.dragMove(e)}dragMove(e){const t=this._knob,n=e.clientX-this._offsetX,r=e.clientY-this._offsetY;let o=n/(this.clientWidth-t.clientWidth);o=i.A.limit(o,0,1);let s=1-r/(this.clientHeight-t.clientHeight);s=i.A.limit(s,0,1),o===this.value.x&&s===this.value.y||(this.value=this.value.set(o,s),this.emitChangeEvent(!0))}dragEnd(){this.emitChangeEvent(!1)}firstConnected(){this.setStyle({position:"relative",touchAction:"none"}),this.setAttribute("touch-action","none"),this.setAttribute("tabindex","0"),this.classList.add("ff-control","ff-vector-slider"),this.appendChild(this._knob)}update(e){const t=100*this.value.x,n=100*(1-this.value.y);this._knob.style.left=`${t.toFixed(3)}%`,this._knob.style.top=`${n.toFixed(3)}%`,super.update(e)}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value,isDragging:e},bubbles:!0}))}};c([(0,a.MZ)({attribute:!1})],d.prototype,"value",void 0),d=c([(0,a.EM)("ff-vector-slider")],d);const u=d;var h=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const p=new r.Ay;let m=class extends a.Ay{constructor(){super(),this.color=new r.Ay,this.alpha=!1,this.numeric=!1,this.onLumSatChange=this.onLumSatChange.bind(this),this.onHueChange=this.onHueChange.bind(this),this.onAlphaChange=this.onAlphaChange.bind(this),this.addEventListener("click",e=>e.stopPropagation()),this._hsv=new r.Pq,this._lumSatSlider=(new u).on("change",this.onLumSatChange),this._hueSlider=(new o.A).addClass("ff-hue-slider").on("change",this.onHueChange),this._hueSlider.direction="vertical"}firstConnected(){this.classList.add("ff-flex-column","ff-control","ff-color-edit")}update(e){e.has("color")&&this.color.toHSV(this._hsv),e.has("alpha")&&(this.alpha&&!this._alphaSlider?(this._alphaSlider=(new o.A).addClass("ff-alpha-slider").on("change",this.onAlphaChange),this._alphaSlider.direction="vertical"):!this.alpha&&this._alphaSlider&&this._alphaSlider.remove()),super.update(e)}render(){let e=null;if(this.numeric){const t=this.color,n=t.toString(!1).substr(1),i=this.alpha?a.qy`
                <div class="ff-text">A</div><ff-line-edit name="alphaByte" text=${t.alphaByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
            `:null;e=a.qy`<div class="ff-flex-row ff-numeric-controls">
                <div class="ff-text">R</div><ff-line-edit name="redByte" text=${t.redByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                <div class="ff-text">G</div><ff-line-edit name="greenByte" text=${t.greenByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                <div class="ff-text">B</div><ff-line-edit name="blueByte" text=${t.blueByte} align="center" @change=${this.onNumericEdit}></ff-line-edit>
                ${i}
                <div class="ff-text">#</div><ff-line-edit name="string" text=${n} class="ff-wide" align="center" @change=${this.onNumericEdit}></ff-line-edit>
            </div>`}return a.qy`<div class="ff-flex-row ff-slider-controls" role="application" @keydown=${this.onKeyDown}>
                ${this._lumSatSlider}${this._hueSlider}${this._alphaSlider}
            </div>${e}`}updated(){this._hueSlider.value=1-this._hsv.x/360;const e=`linear-gradient(to bottom, transparent, black), linear-gradient(to right, white, ${p.setHSV(this._hsv.x).toString(!1)})`;if(this._lumSatSlider.style.backgroundImage=e,this._lumSatSlider.setXY(this._hsv.y,this._hsv.z),this.alpha){const e=this.color.toString(!1),t=getComputedStyle(this._alphaSlider).color,n=`linear-gradient(to top, transparent, ${e}), repeating-linear-gradient(-45deg, transparent, transparent 8px, ${t} 8px, ${t} 16px)`;this._alphaSlider.style.backgroundImage=n,this._alphaSlider.value=this.color.alpha}}onLumSatChange(e){e.stopPropagation();const t=e.detail.value;this._hsv.y=t.x,this._hsv.z=t.y,this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onHueChange(e){e.stopPropagation(),this._hsv.x=360*(1-e.target.value),this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onAlphaChange(e){e.stopPropagation(),this.color.alpha=e.target.value,this.requestUpdate(),this.emitChangeEvent(e.detail.isDragging)}onNumericEdit(e){e.stopPropagation();const t=e.target.name;if("string"===t)this.color.setString(e.detail.text,1,!1);else{let n=parseInt(e.detail.text);if(!isFinite(n))return;this.color[t]=i.A.limit(n,0,255)}this.color.toHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(e.detail.isEditing)}onKeyDown(e){const t="ArrowRight"===e.code||"ArrowUp"===e.code,n="PageUp"===e.code,r="ArrowLeft"===e.code||"ArrowDown"===e.code,o="PageDown"===e.code;if(t||n||r||o)if(e.target===this._hueSlider||e.target===this._alphaSlider){const o=t||n?-1:1,s=t||r?.01:.1;e.target===this._hueSlider?(this._hsv.x=i.A.limit(this._hsv.x+360*s*o,0,360),this.color.setHSV(this._hsv)):this.color.alpha=i.A.limit(this.color.alpha+s*o,0,1),this.requestUpdate(),this.emitChangeEvent(!1)}else if(e.target===this._lumSatSlider&&(t||r)){const n=t?1:-1,r=e.shiftKey?.1:.01;"ArrowRight"===e.code||"ArrowLeft"===e.code?this._hsv.y=i.A.limit(this._hsv.y+r*n,0,1):this._hsv.z=i.A.limit(this._hsv.z+r*n,0,1),this.color.setHSV(this._hsv),this.requestUpdate(),this.emitChangeEvent(!1)}}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{color:this.color,isDragging:e},bubbles:!0}))}};h([(0,a.MZ)({attribute:!1})],m.prototype,"color",void 0),h([(0,a.MZ)({type:Boolean})],m.prototype,"alpha",void 0),h([(0,a.MZ)({type:Boolean})],m.prototype,"numeric",void 0),m=h([(0,a.EM)("ff-color-edit")],m);const f=m},5659:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(3423),r=n(3675),o=n(4085),s=n(8604),a=n(9337),l=n(1721);class c extends i.Ay{constructor(){super(...arguments),this.ins=this.addInputs(c.ins),this.outs=this.addOutputs(c.outs),this._tours=[]}get analytics(){return this.getMainComponent(s.A)}get language(){return this.getGraphComponent(a.A)}get setup(){return this.getGraphComponent(l.A)}get snapshots(){return this.getComponent(o.A)}get tours(){return this._tours}get activeSteps(){const e=this.activeTour;return e?e.steps:null}get activeTour(){return this._tours[this.outs.tourIndex.value]}get activeStep(){const e=this.activeTour;return e?e.steps[this.outs.stepIndex.value]:null}get title(){const e=this.activeTour;return 0===Object.keys(e.titles).length&&(e.titles[r.Nm]=e.title),e.titles[r.aL[this.language.outs.activeLanguage.value]]||"Missing content"}set title(e){this.activeTour.titles[r.aL[this.language.outs.activeLanguage.value]]=e}get lead(){const e=this.activeTour;return 0===Object.keys(e.leads).length&&(e.leads[r.Nm]=e.lead),e.leads[r.aL[this.language.outs.activeLanguage.value]]||""}set lead(e){this.activeTour.leads[r.aL[this.language.outs.activeLanguage.value]]=e}get taglist(){const e=this.activeTour;return 0===Object.keys(e.taglist).length&&e.tags.length>0&&(e.taglist[r.Nm]=e.tags),e.taglist[r.aL[this.language.outs.activeLanguage.value]]||[]}set taglist(e){this.activeTour.taglist[r.aL[this.language.outs.activeLanguage.value]]=e}get stepTitle(){const e=this.activeStep;return e?(0===Object.keys(e.titles).length&&(e.titles[r.Nm]=e.title),e.titles[r.aL[this.language.outs.activeLanguage.value]]||"Missing content"):null}set stepTitle(e){const t=this.activeStep;t&&(t.titles[r.aL[this.language.outs.activeLanguage.value]]=e)}get stepAltText(){const e=this.activeStep;return e?e.altTexts[r.aL[this.language.outs.activeLanguage.value]]||"Missing content":null}set stepAltText(e){const t=this.activeStep;t&&(t.altTexts[r.aL[this.language.outs.activeLanguage.value]]=e)}create(){super.create(),this.language.outs.activeLanguage.on("value",this.update,this)}dispose(){this.language.outs.activeLanguage.off("value",this.update,this),super.dispose()}update(e){const{ins:t,outs:n}=this,i=this._tours,r=this.snapshots,s=this.setup.navigation,a=this.setup.viewer.rootElement.shadowRoot.querySelector("#sceneview-sr");if(t.enabled.changed){if(!t.enabled.value)return n.tourIndex.set(),this.normalizeViewOrbit(c.sceneSnapshotId),r.tweenTo(c.sceneSnapshotId,e.secondsElapsed),r.deleteState(c.sceneSnapshotId),a.textContent="",!0;{const e={id:c.sceneSnapshotId,curve:o.k.EaseOutQuad,duration:1,threshold:0,values:r.getCurrentValues()};r.setState(e)}}const l=Math.min(i.length-1,Math.max(-1,t.tourIndex.value)),d=i[l],u=d?d.steps.length:0;n.stepCount.setValue(u);let h=-1;if((t.tourIndex.changed||t.enabled.changed)&&(l!==n.tourIndex.value&&(h=0),n.tourIndex.setValue(l),n.tourTitle.setValue(d?this.title:""),n.tourLead.setValue(d?this.lead:"")),0===u)return n.stepIndex.setValue(-1),n.stepTitle.setValue(""),!0;let p=!0;if(t.enabled.changed&&(h=n.stepIndex.value),t.stepIndex.changed&&(h=Math.min(d.steps.length-1,Math.max(0,t.stepIndex.value)),p=!1),t.first.changed&&(h=0),t.next.changed&&(h=n.stepIndex.value+1,h>=u&&(n.ending.setValue(!0),n.tourIndex.setValue(-1),n.tourTitle.setValue(""),n.tourLead.setValue(""),n.stepIndex.set(),h=-1,a.textContent="")),t.previous.changed&&(h=(n.stepIndex.value+u-1)%u),0===h&&this.normalizeViewOrbit(d.steps[0].id),h>=0){s.setChanged(!0);const e=d.steps[h];n.stepIndex.setValue(h),n.stepTitle.setValue(this.stepTitle||"Missing content"),r.ins.id.setValue(e.id),p?r.ins.tween.set():r.ins.recall.set(),a.textContent="Missing content"!=this.stepAltText?"Alt text: "+this.stepAltText:""}return!0}fromData(e){this._tours=e.map(e=>({title:e.title,titles:e.titles||{},steps:e.steps.map(e=>({title:e.title,titles:e.titles||{},altTexts:e.altTexts||{},id:e.id})),lead:e.lead||"",leads:e.leads||{},tags:e.tags||[],taglist:e.taglist||{}})),this._tours.forEach(e=>{Object.keys(e.titles).forEach(e=>{this.language.addLanguage(r.aL[e])}),e.steps.forEach(e=>{0==Object.keys(e.titles).length&&(e.titles[r.Nm]=e.title||null)})}),this.ins.tourIndex.setValue(-1),this.outs.count.setValue(this._tours.length)}toData(){return 0===this._tours.length?null:this._tours.map(e=>{const t={steps:e.steps.map(e=>{const t={};return t.id=e.id,Object.keys(e.titles).length>0?t.titles=e.titles:e.title&&(t.title=e.title),Object.keys(e.altTexts).length>0&&(t.altTexts=e.altTexts),t})};return Object.keys(e.titles).length>0?t.titles=e.titles:e.title&&(t.title=e.title),Object.keys(e.leads).length>0?t.leads=e.leads:e.lead&&(t.lead=e.lead),Object.keys(e.taglist).length>0?t.taglist=e.taglist:e.tags.length>0&&(t.tags=e.tags),t})}normalizeViewOrbit(e){const t=this.snapshots.getTargetProperties().findIndex(e=>"Orbit"==e.name),n=this.snapshots.getState(e),i=this.snapshots.getCurrentValues()[t];n&&i.forEach((e,i)=>{const r=Math.round((n.values[t][i]-e)/360);this.snapshots.getTargetProperties()[t].value[i]+=360*r})}}c.typeName="CVTours",c.sceneSnapshotId="scene-default",c.ins={enabled:i.gK.Boolean("Tours.Enabled"),tourIndex:i.gK.Integer("Tours.Index",-1),closed:i.gK.Event("Tours.Closed"),stepIndex:i.gK.Integer("Step.Index"),next:i.gK.Event("Step.Next"),previous:i.gK.Event("Step.Previous"),first:i.gK.Event("Step.First")},c.outs={count:i.gK.Integer("Tours.Count"),tourIndex:i.gK.Integer("Tour.Index",-1),tourTitle:i.gK.String("Tour.Title"),tourLead:i.gK.String("Tour.Lead"),stepCount:i.gK.Integer("Tour.Steps"),ending:i.gK.Boolean("Tour.Ending"),stepIndex:i.gK.Integer("Step.Index"),stepTitle:i.gK.String("Step.Title")}},5676:(e,t,n)=>{"use strict";n.d(t,{$R:()=>h,Ay:()=>m,Gz:()=>p});var i=n(4640),r=n(8337);const o=.5*Math.PI,s=new i.NRn,a=new i.Pq0,l=new i.Pq0,c=new i.Pq0,d=new i.kn4,u=(new i.kn4,[new i.Pq0(0,-o,0),new i.Pq0(0,o,0),new i.Pq0(-o,0,0),new i.Pq0(o,0,0),new i.Pq0(0,0,0),new i.Pq0(0,Math.PI,0)]);var h,p;!function(e){e[e.Perspective=0]="Perspective",e[e.Orthographic=1]="Orthographic"}(h||(h={})),function(e){e[e.None=-1]="None",e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Top=2]="Top",e[e.Bottom=3]="Bottom",e[e.Front=4]="Front",e[e.Back=5]="Back"}(p||(p={}));class m extends i.i7d{constructor(e){super(),this.isUniversalCamera=!0,this.fov=50,this.size=20,this.aspect=1,this.distance=20,this.zoom=1,this.near=.1,this.far=2e3,this.focus=10,this.filmGauge=35,this.filmOffset=0,this.view=null,this.setProjection(e)}setProjection(e){e===h.Orthographic?(this.type="OrthographicCamera",this.isPerspectiveCamera=!1,this.isOrthographicCamera=!0):(this.type="PerspectiveCamera",this.isPerspectiveCamera=!0,this.isOrthographicCamera=!1),this.updateProjectionMatrix()}getProjection(){return this.isOrthographicCamera?h.Orthographic:h.Perspective}setPreset(e){e!==p.None?(this.rotation.setFromVector3(u[e],"XYZ"),this.position.set(0,0,this.distance).applyQuaternion(this.quaternion)):(this.rotation.set(0,0,0),this.position.set(0,0,0)),this.updateMatrix()}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*i.cj9.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*i.cj9.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*i.cj9.RAD2DEG*Math.atan(Math.tan(.5*i.cj9.DEG2RAD*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,o,s){this.isPerspectiveCamera?i.ubm.prototype.setViewOffset.call(this,e,t,n,r,o,s):i.qUd.prototype.setViewOffset.call(this,e,t,n,r,o,s)}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}zoomToView(){}moveToView(e){this.updateMatrixWorld(!1),s.copy(e),d.extractRotation(this.matrixWorldInverse),s.applyMatrix4(d),s.getSize(a),s.getCenter(l);const t=Math.max(a.x/this.aspect,a.y);c.set(-l.x,-l.y,0),this.isPerspectiveCamera?c.z=a.z/(2*Math.tan(this.fov*r.A.DEG2RAD*.5)):(this.size=.5*t,c.z=2*a.z,this.far=Math.max(this.far,2*c.z)),d.extractRotation(this.matrixWorld),c.applyMatrix4(d),this.matrix.decompose(this.position,this.quaternion,this.scale),this.position.copy(c),this.updateMatrix()}updateProjectionMatrix(){const e=this.near,t=this.far,n=this.aspect,r=this.zoom,o=this.view;if(this.isOrthographicCamera){const i=this.size,s=i/(2*r),a=s*n;let l=-a,c=a,d=s,u=-s;if(o&&o.enabled){const e=r/(o.width/o.fullWidth),t=r/(o.height/o.fullHeight),s=i*n/o.width,a=i/o.height;l+=s*(o.offsetX/e),c=l+s*(o.width/e),d-=a*(o.offsetY/t),u=d-a*(o.height/t)}this.projectionMatrix.makeOrthographic(l,c,d,u,e,t)}else{let a=e*Math.tan(.5*i.cj9.DEG2RAD*this.fov)/r,l=2*a,c=n*l,d=-.5*c;o&&o.enabled&&(d+=o.offsetX*c/o.fullWidth,a-=o.offsetY*l/o.fullHeight,c*=o.width/o.fullWidth,l*=o.height/o.fullHeight);var s=this.filmOffset;0!==s&&(d+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,a,a-l,e,t)}this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}copy(e,t){return super.copy(e,t),this.type=e.type,this.isOrthographicCamera=e.isOrthographicCamera,this.isPerspectiveCamera=e.isPerspectiveCamera,this.fov=e.fov,this.size=e.size,this.aspect=e.aspect,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.view=e.view?Object.assign({},e.view):null,this}clone(){return(new this.constructor).copy(this)}toJSON(e){const t=super.toJSON(e);return Object.assign(t.object,{fov:this.fov,size:this.size,aspect:this.aspect,zoom:this.zoom,near:this.near,far:this.far,focus:this.focus,filmGauge:this.filmGauge,filmOffset:this.filmOffset}),null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}},5713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(2310),r=n(6241),o=n(3151),s=n(624),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new i.KeywordCxt(c,s.default,"additionalProperties"));const d=(0,r.allSchemaProperties)(n);for(const e of d)c.definedProperties.add(e);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(t,(0,o.toHash)(d),c.props));const u=d.filter(e=>!(0,o.alwaysValidSchema)(c,n[e]));if(0===u.length)return;const h=t.name("valid");for(const n of u)p(n)?m(n):(t.if((0,r.propertyInData)(t,l,n,c.opts.ownProperties)),m(n),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function m(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},5717:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,q:()=>r});var i=n(4640);new i.Pq0(1,0,0);function r(e,t,n){return Math.min(Math.max(e,t),n)}function o(e,t){var n=new i.kn4,r=new i.kn4;n.identity();do{r.compose(t.position,t.quaternion,t.scale),n.multiply(r.invert()),t=t.parent}while(e!==t);return n}},5724:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var o=n(2177),s=n(2426);r(n(2426),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:a,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?o.ElementType.Tag:void 0,i=new s.Element(e,t,void 0,n);this.addNode(i),this.tagStack.push(i)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===o.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new s.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},5750:function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(3681))},5771:function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(3681))},5838:e=>{"use strict";var t=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(t,"\\$&")}},5852:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(7482);class r extends i.A{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}dispose(){super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if(n.type!==r.type)throw new Error("light type mismatch: not an ambient light");return i.name.setValue(t.name),n.point=n.point||{},i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,color:void 0!==n.color?n.color:i.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value};i.type=r.type,e.lights=e.lights||[];const o=e.lights.length;return e.lights.push(i),o}}r.typeName="CVAmbientLight",r.type="ambient",r.text="Ambient Light",r.icon="globe"},5911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),t.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}))},5916:function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},5933:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,EM:()=>i.EM,MZ:()=>i.MZ,qy:()=>i.qy});n(9085);var i=n(6763),r=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class o extends i.Ay{constructor(e){super(),this.system=e}}r([(0,i.MZ)({attribute:!1})],o.prototype,"system",void 0)},5940:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i=function(e,t){const n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)},r={text:function(e,t){const n=window.URL.createObjectURL(new Blob([e],{type:"text/plain"}));i(n,t)},json:function(e,t){"object"==typeof e&&(e=JSON.stringify(e));const n=window.URL.createObjectURL(new Blob([e],{type:"text/json"}));i(n,t)},url:function(e,t){i(e,t)}}},5960:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,i=(o=String).prototype,i.isPrototypeOf(n)||(null===(s=r.constructor)||void 0===s?void 0:s.name)===o.name)?"string":t;var n,i;var r,o,s})(t)===e,n=e=>t=>typeof t===e,i=t("string"),r=t("object"),o=t("array"),s=n("boolean"),a=e=>!(e=>null==e)(e),l=n("function"),c=n("number"),d=()=>{},u=e=>()=>e,h=(e,t)=>e===t;const p=e=>t=>!e(t),m=u(!1);class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return a(e)?f.some(e):f.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);const g=Array.prototype.slice,v=Array.prototype.indexOf,y=Array.prototype.push,b=(e,t)=>{return n=e,i=t,v.call(n,i)>-1;var n,i},A=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return!0}return!1},_=(e,t)=>{const n=e.length,i=new Array(n);for(let r=0;r<n;r++){const n=e[r];i[r]=t(n,r)}return i},w=(e,t)=>{for(let n=0,i=e.length;n<i;n++){t(e[n],n)}},x=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},C=(e,t,n)=>(w(e,(e,i)=>{n=t(n,e,i)}),n),E=(e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return f.some(r);if(n(r,i))break}return f.none()},M=(e,t)=>E(e,t,m),S=(e,t)=>(e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);y.apply(t,e[n])}return t})(_(e,t)),T=e=>{const t=g.call(e,0);return t.reverse(),t},k=(e,t)=>t>=0&&t<e.length?f.some(e[t]):f.none(),L=e=>k(e,0),D=e=>k(e,e.length-1),I=(e,t)=>{const n=[],i=l(t)?e=>A(n,n=>t(n,e)):e=>b(n,e);for(let t=0,r=e.length;t<r;t++){const r=e[t];i(r)||n.push(r)}return n},R=(e,t,n=h)=>e.exists(e=>n(e,t)),O=(e,t,n)=>e.isSome()&&t.isSome()?f.some(n(e.getOrDie(),t.getOrDie())):f.none(),P=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return P(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return P(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return P(n)},fromDom:P,fromPoint:(e,t,n)=>f.from(e.dom.elementFromPoint(t,n)).map(P)},N=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},U=(e,t)=>e.dom===t.dom,F=N,z="undefined"!=typeof window?window:Function("return this;")(),H=(e,t)=>((e,t)=>{let n=null!=t?t:z;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),j=(e,t)=>{const n=((e,t)=>H(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},V=Object.getPrototypeOf,Y=e=>{const t=H("ownerDocument.defaultView",e);return r(e)&&((e=>j("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(V(e).constructor.name))},G=e=>e.dom.nodeName.toLowerCase(),Q=e=>e.dom.nodeType,$=e=>t=>Q(t)===e,q=e=>W(e)&&Y(e.dom),W=$(1),K=$(3),Z=$(9),X=$(11),J=e=>t=>W(t)&&G(t)===e,ee=e=>f.from(e.dom.parentNode).map(B.fromDom),te=e=>_(e.dom.childNodes,B.fromDom),ne=(e,t)=>{const n=e.dom.childNodes;return f.from(n[t]).map(B.fromDom)},ie=e=>ne(e,0),re=e=>ne(e,e.dom.childNodes.length-1),oe=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?e=>B.fromDom(e.dom.getRootNode()):e=>{return Z(e)?e:(t=e,B.fromDom(t.dom.ownerDocument));var t},se=e=>{const t=oe(e);return X(n=t)&&a(n.dom.host)?f.some(t):f.none();var n},ae=e=>B.fromDom(e.dom.host),le=e=>{const t=K(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return se(B.fromDom(t)).fold(()=>n.body.contains(t),(i=le,r=ae,e=>i(r(e))));var i,r};var ce=(e,t,n,i,r)=>e(n,i)?f.some(n):l(r)&&r(n)?f.none():t(n,i,r);const de=(e,t,n)=>{let i=e.dom;const r=l(n)?n:m;for(;i.parentNode;){i=i.parentNode;const e=B.fromDom(i);if(t(e))return f.some(e);if(r(e))break}return f.none()},ue=(e,t,n)=>ce((e,t)=>t(e),de,e,t,n),he=(e,t,n)=>de(e,e=>N(e,t),n),pe=e=>{return ce((e,t)=>N(e,t),he,e,"[contenteditable]",t);var t},me=e=>e.dom.contentEditable,fe=(e,t)=>{ee(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},ge=(e,t)=>{const n=(e=>f.from(e.dom.nextSibling).map(B.fromDom))(e);n.fold(()=>{ee(e).each(e=>{ve(e,t)})},e=>{fe(e,t)})},ve=(e,t)=>{e.dom.appendChild(t.dom)},ye=(e,t)=>{w(t,t=>{ve(e,t)})},be=e=>{e.dom.textContent="",w(te(e),e=>{Ae(e)})},Ae=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var _e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),we=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),xe=tinymce.util.Tools.resolve("tinymce.util.VK");const Ce=e=>_(e,B.fromDom),Ee=Object.keys,Me=(e,t)=>{const n=Ee(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}},Se=(e,t)=>{const n={};var i;return((e,t,n,i)=>{Me(e,(e,r)=>{(t(e,r)?n:i)(e,r)})})(e,t,(i=n,(e,t)=>{i[t]=e}),d),n},Te=(e,t)=>{const n=e.dom;Me(t,(e,t)=>{((e,t,n)=>{if(!(i(n)||s(n)||c(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(n,t,e)})},ke=e=>C(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),Le=e=>((e,t)=>B.fromDom(e.dom.cloneNode(t)))(e,!0),De=(e,t)=>{const n=((e,t)=>{const n=B.fromTag(t),i=ke(e);return Te(n,i),n})(e,t);ge(e,n);const i=te(e);return ye(n,i),Ae(e),n};var Ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Re=tinymce.util.Tools.resolve("tinymce.util.Tools");const Oe=e=>t=>a(t)&&t.nodeName.toLowerCase()===e,Pe=e=>t=>a(t)&&e.test(t.nodeName),Be=e=>a(e)&&3===e.nodeType,Ne=e=>a(e)&&1===e.nodeType,Ue=Pe(/^(OL|UL|DL)$/),Fe=Pe(/^(OL|UL)$/),ze=Oe("ol"),He=Pe(/^(LI|DT|DD)$/),je=Pe(/^(DT|DD)$/),Ve=Pe(/^(TH|TD)$/),Ye=Oe("br"),Ge=(e,t)=>a(t)&&t.nodeName in e.schema.getTextBlockElements(),Qe=(e,t)=>a(e)&&e.nodeName in t,$e=(e,t)=>a(t)&&t.nodeName in e.schema.getVoidElements(),qe=(e,t,n)=>{const i=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&i},We=(e,t)=>e.isChildOf(t,e.getRoot()),Ke=e=>t=>t.options.get(e),Ze=Ke("lists_indent_on_tab"),Xe=Ke("forced_root_block"),Je=Ke("forced_root_block_attrs"),et=(e,t)=>{const n=e.dom,i=e.schema.getBlockElements(),r=n.createFragment(),o=Xe(e),s=Je(e);let a,l,c=!1;for(l=n.create(o,s),Qe(t.firstChild,i)||r.appendChild(l);a=t.firstChild;){const e=a.nodeName;c||"SPAN"===e&&"bookmark"===a.getAttribute("data-mce-type")||(c=!0),Qe(a,i)?(r.appendChild(a),l=null):(l||(l=n.create(o,s),r.appendChild(l)),l.appendChild(a))}return!c&&l&&l.appendChild(n.create("br",{"data-mce-bogus":"1"})),r},tt=Ie.DOM,nt=(e,t,n)=>{const i=tt.select('span[data-mce-type="bookmark"]',t),r=et(e,n),o=tt.createRng();o.setStartAfter(n),o.setEndAfter(t);const s=o.extractContents();for(let t=s.firstChild;t;t=t.firstChild)if("LI"===t.nodeName&&e.dom.isEmpty(t)){tt.remove(t);break}e.dom.isEmpty(s)||tt.insertAfter(s,t),tt.insertAfter(r,t);const a=n.parentElement;a&&qe(e.dom,a)&&(e=>{const t=e.parentNode;t&&Re.each(i,e=>{t.insertBefore(e,n.parentNode)}),tt.remove(e)})(a),tt.remove(n),qe(e.dom,t)&&tt.remove(t)},it=J("dd"),rt=J("dt"),ot=(e,t)=>{var n;it(t)?De(t,"dt"):rt(t)&&(n=t,f.from(n.dom.parentElement).map(B.fromDom)).each(n=>nt(e,n.dom,t.dom))},st=e=>{rt(e)&&De(e,"dd")},at=(e,t)=>{if(Be(e))return{container:e,offset:t};const n=_e.getNode(e,t);return Be(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&Be(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Be(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},lt=e=>{const t=e.cloneRange(),n=at(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);const i=at(e.endContainer,e.endOffset);return t.setEnd(i.container,i.offset),t},ct=["OL","UL","DL"],dt=ct.join(","),ut=(e,t)=>{const n=t||e.selection.getStart(!0);return e.dom.getParent(n,dt,ft(e,n))},ht=e=>{const t=ut(e),n=e.selection.getSelectedBlocks();return((e,t)=>a(e)&&1===t.length&&t[0]===e)(t,n)?(e=>x(e.querySelectorAll(dt),Ue))(t):x(n,e=>Ue(e)&&t!==e)},pt=e=>{const t=e.selection.getSelectedBlocks();return x(((e,t)=>{const n=Re.map(t,t=>e.dom.getParent(t,"li,dd,dt",ft(e,t))||t);return I(n)})(e,t),He)},mt=(e,t)=>{const n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},ft=(e,t)=>{const n=e.dom.getParents(t,e.dom.isBlock),i=M(n,t=>{return n=e.schema,!Ue(i=t)&&!He(i)&&A(ct,e=>n.isValidChild(i.nodeName,e));var n,i});return i.getOr(e.getBody())},gt=(e,t)=>{const n=e.dom.getParents(t,"ol,ul",ft(e,t));return D(n)},vt=e=>{const t=(e=>{const t=gt(e,e.selection.getStart()),n=x(e.selection.getSelectedBlocks(),Fe);return t.toArray().concat(n)})(e),n=(e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",ft(e,t))})(e);return M(n,e=>{return t=B.fromDom(e),ee(t).exists(e=>He(e.dom)&&ie(e).exists(e=>!Ue(e.dom))&&re(e).exists(e=>!Ue(e.dom)));var t}).fold(()=>yt(e,t),e=>[e])},yt=(e,t)=>{const n=_(t,t=>gt(e,t).getOr(t));return I(n)},bt=e=>/\btox\-/.test(e.className),At=(e,t)=>E(e,Ue,Ve).exists(e=>e.nodeName===t&&!bt(e)),_t=(e,t)=>null!==t&&!e.dom.isEditable(t),wt=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return _t(e,n)},xt=(e,t)=>{const n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},Ct=(e,t)=>{const n=(t||document).createDocumentFragment();return w(e,e=>{n.appendChild(e.dom)}),B.fromDom(n)},Et=(e,t,n)=>e.dispatch("ListMutation",{action:t,element:n}),Mt=(St=/^\s+|\s+$/g,e=>e.replace(St,""));var St;const Tt=(e,t,n)=>{if(!i(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)&&e.style.setProperty(t,n)},kt=(e,t,n)=>{const i=e.dom;Tt(i,t,n)},Lt=e=>F(e,"OL,UL"),Dt=e=>ie(e).exists(Lt),It=e=>"listAttributes"in e,Rt=e=>"isComment"in e,Ot=e=>e.depth>0,Pt=e=>e.isSelected,Bt=e=>{const t=te(e),n=re(e).exists(Lt)?t.slice(0,-1):t;return _(n,Le)},Nt=(e,t)=>{ve(e.item,t.list)},Ut=(e,t)=>{const n={list:B.fromTag(t,e),item:B.fromTag("li",e)};return ve(n.list,n.item),n},Ft=(e,t,n)=>{const i=t.slice(0,n.depth);return D(i).each(t=>{if(It(n)){const i=((e,t,n)=>{const i=B.fromTag("li",e);return Te(i,t),ye(i,n),i})(e,n.itemAttributes,n.content);((e,t)=>{ve(e.list,t),e.item=t})(t,i),((e,t)=>{G(e.list)!==t.listType&&(e.list=De(e.list,t.listType)),Te(e.list,t.listAttributes)})(t,n)}else if((e=>"isFragment"in e)(n))ye(t.item,n.content);else{const e=B.fromHtml(`\x3c!--${n.content}--\x3e`);ve(t.list,e)}}),i},zt=(e,t,n)=>{const i=((e,t,n)=>{const i=[];for(let r=0;r<n;r++)i.push(Ut(e,It(t)?t.listType:t.parentListType));return i})(e,n,n.depth-t.length);var r;return(e=>{for(let t=1;t<e.length;t++)Nt(e[t-1],e[t])})(i),((e,t)=>{for(let t=0;t<e.length-1;t++)kt(e[t].item,"list-style-type","none");D(e).each(e=>{It(t)&&(Te(e.list,t.listAttributes),Te(e.item,t.itemAttributes)),ye(e.item,t.content)})})(i,n),r=i,O(D(t),L(r),Nt),t.concat(i)},Ht=(e,t)=>{let n=f.none();const i=C(t,(t,i,r)=>Rt(i)?0===r?(n=f.some(i),t):Ft(e,t,i):i.depth>t.length?zt(e,t,i):Ft(e,t,i),[]);return n.each(e=>{const t=B.fromHtml(`\x3c!--${e.content}--\x3e`);L(i).each(e=>{((e,t)=>{ie(e).fold(()=>{ve(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})})(e.list,t)})}),L(i).map(e=>e.list)},jt=e=>(w(e,(t,n)=>{((e,t)=>{const n=e[t].depth,i=e=>e.depth===n&&!e.dirty,r=e=>e.depth<n;return E(T(e.slice(0,t)),i,r).orThunk(()=>E(e.slice(t+1),i,r))})(e,n).fold(()=>{t.dirty&&It(t)&&(e=>{e.listAttributes=Se(e.listAttributes,(e,t)=>"start"!==t)})(t)},e=>{return i=e,void(It(n=t)&&It(i)&&(n.listType=i.listType,n.listAttributes={...i.listAttributes}));var n,i})}),e),Vt=(e,t,n,i)=>{var r,o;if(8===Q(o=i)||"#comment"===G(o))return[{depth:e+1,content:null!==(r=i.dom.nodeValue)&&void 0!==r?r:"",dirty:!1,isSelected:!1,isComment:!0}];t.each(e=>{U(e.start,i)&&n.set(!0)});const s=((e,t,n)=>ee(e).filter(W).map(i=>({depth:t,dirty:!1,isSelected:n,content:Bt(e),itemAttributes:ke(e),listAttributes:ke(i),listType:G(i),isInPreviousLi:!1})))(i,e,n.get());t.each(e=>{U(e.end,i)&&n.set(!1)});const a=re(i).filter(Lt).map(i=>Gt(e,t,n,i)).getOr([]);return s.toArray().concat(a)},Yt=(e,t,n,i)=>ie(i).filter(Lt).fold(()=>Vt(e,t,n,i),r=>{const o=C(te(i),(i,o,s)=>{if(0===s)return i;if(F(o,"LI"))return i.concat(Vt(e,t,n,o));{const t={isFragment:!0,depth:e,content:[o],isSelected:!1,dirty:!1,parentListType:G(r)};return i.concat(t)}},[]);return Gt(e,t,n,r).concat(o)}),Gt=(e,t,n,i)=>S(te(i),i=>(Lt(i)?Gt:Yt)(e+1,t,n,i)),Qt=(e,t)=>S(((e,t)=>{if(0===e.length)return[];{let n=t(e[0]);const i=[];let r=[];for(let o=0,s=e.length;o<s;o++){const s=e[o],a=t(s);a!==n&&(i.push(r),r=[]),n=a,r.push(s)}return 0!==r.length&&i.push(r),i}})(t,Ot),t=>L(t).exists(Ot)?((e,t)=>{const n=jt(t);return Ht(e.contentDocument,n).toArray()})(e,t):((e,t)=>{const n=jt(t);return _(n,t=>{const n=Rt(t)?Ct([B.fromHtml(`\x3c!--${t.content}--\x3e`)]):Ct(t.content);return B.fromDom(et(e,n.dom))})})(e,t)),$t=(e,t,n)=>{const i=((e,t)=>{const n=(()=>{let e=!1;return{get:()=>e,set:t=>{e=t}}})();return _(e,e=>({sourceList:e,entries:Gt(0,t,n,e)}))})(t,(e=>{const t=_(pt(e),B.fromDom);return O(M(t,p(Dt)),M(T(t),p(Dt)),(e,t)=>({start:e,end:t}))})(e));w(i,t=>{((e,t)=>{w(x(e,Pt),e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e))})(t.entries,n);const i=Qt(e,t.entries);var r;w(i,t=>{Et(e,"Indent"===n?"IndentList":"OutdentList",t.dom)}),r=t.sourceList,w(i,e=>{fe(r,e)}),Ae(t.sourceList)})},qt=(e,t)=>{const n=Ce(vt(e)),i=Ce((e=>x(pt(e),je))(e));let r=!1;if(n.length||i.length){const o=e.selection.getBookmark();$t(e,n,t),((e,t,n)=>{w(n,"Indent"===t?st:t=>ot(e,t))})(e,t,i),e.selection.moveToBookmark(o),e.selection.setRng(lt(e.selection.getRng())),e.nodeChanged(),r=!0}return r},Wt=(e,t)=>!(e=>{const t=ut(e);return _t(e,t)})(e)&&qt(e,t),Kt=e=>Wt(e,"Indent"),Zt=e=>Wt(e,"Outdent"),Xt=e=>Wt(e,"Flatten"),Jt=e=>"\ufeff"===e,en=(e,t)=>{return n=e,i=function(e,...t){return(...n)=>{const i=t.concat(n);return e.apply(null,i)}}(U,t),de(n,i,r).isSome();var n,i,r};var tn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const nn=Ie.DOM,rn=e=>{const t={},n=n=>{let i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Ne(i)){const e=nn.create("span",{"data-mce-type":"bookmark"});i.hasChildNodes()?(r=Math.min(r,i.childNodes.length-1),n?i.insertBefore(e,i.childNodes[r]):nn.insertAfter(e,i.childNodes[r])):i.appendChild(e),i=e,r=0}t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=r};return n(!0),e.collapsed||n(),t},on=e=>{const t=t=>{let n=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"];if(n){if(Ne(n)&&n.parentNode){const e=n;i=(e=>{var t;let n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,i=0;for(;n;){if(n===e)return i;Ne(n)&&"bookmark"===n.getAttribute("data-mce-type")||i++,n=n.nextSibling}return-1})(n),n=n.parentNode,nn.remove(e),!n.hasChildNodes()&&nn.isBlock(n)&&n.appendChild(nn.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=i}};t(!0),t();const n=nn.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),lt(n)},sn=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},an=(e,t)=>{Re.each(t,(t,n)=>{e.setAttribute(n,t)})},ln=(e,t,n)=>{((e,t,n)=>{const i=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",i)})(e,t,n),((e,t,n)=>{an(t,n["list-attributes"]),Re.each(e.select("li",t),e=>{an(e,n["list-item-attributes"])})})(e,t,n)},cn=(e,t)=>a(t)&&!Qe(t,e.schema.getBlockElements()),dn=(e,t,n,i)=>{let r=t[n?"startContainer":"endContainer"];const o=t[n?"startOffset":"endOffset"];Ne(r)&&(r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r),!n&&Ye(r.nextSibling)&&(r=r.nextSibling);const s=(t,n)=>{var r;const o=new we(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&i!==t;)t=t.parentNode;return t})(t)),s=n?"next":"prev";let a;for(;a=o[s]();)if(!$e(e,a)&&!Jt(a.textContent)&&0!==(null===(r=a.textContent)||void 0===r?void 0:r.length))return f.some(a);return f.none()};if(n&&Be(r))if(Jt(r.textContent))r=s(r,!1).getOr(r);else for(null!==r.parentNode&&cn(e,r.parentNode)&&(r=r.parentNode);null!==r.previousSibling&&(cn(e,r.previousSibling)||Be(r.previousSibling));)r=r.previousSibling;if(!n&&Be(r))if(Jt(r.textContent))r=s(r,!0).getOr(r);else for(null!==r.parentNode&&cn(e,r.parentNode)&&(r=r.parentNode);null!==r.nextSibling&&(cn(e,r.nextSibling)||Be(r.nextSibling));)r=r.nextSibling;for(;r.parentNode!==i;){const t=r.parentNode;if(Ge(e,r))return r;if(/^(TD|TH)$/.test(t.nodeName))return r;r=t}return r},un=(e,t,n)=>{const i=e.selection.getRng();let r="LI";const o=ft(e,((e,t)=>{const n=e.selection.getStart(!0),i=dn(e,t,!0,e.getBody());return en(B.fromDom(i),B.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:n})(e,i)),s=e.dom;if("false"===s.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(r="DT");const a=rn(i),l=x(((e,t,n)=>{const i=[],r=e.dom,o=dn(e,t,!0,n),s=dn(e,t,!1,n);let a;const l=[];for(let e=o;e&&(l.push(e),e!==s);e=e.nextSibling);return Re.each(l,t=>{var o;if(Ge(e,t))return i.push(t),void(a=null);if(r.isBlock(t)||Ye(t))return Ye(t)&&r.remove(t),void(a=null);const s=t.nextSibling;tn.isBookmarkNode(t)&&(Ue(s)||Ge(e,s)||!s&&t.parentNode===n)?a=null:(a||(a=r.create("p"),null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),i.push(a)),a.appendChild(t))}),i})(e,i,o),e.dom.isEditable);Re.each(l,i=>{let o;const a=i.previousSibling,l=i.parentNode;He(l)||(a&&Ue(a)&&a.nodeName===t&&((e,t,n)=>{const i=e.getStyle(t,"list-style-type");let r=n?n["list-style-type"]:"";return r=null===r?"":r,i===r})(s,a,n)?(o=a,i=s.rename(i,r),a.appendChild(i)):(o=s.create(t),l.insertBefore(o,i),o.appendChild(i),i=s.rename(i,r)),((e,t,n)=>{Re.each(n,n=>e.setStyle(t,n,""))})(s,i,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ln(s,o,n),pn(e.dom,o))}),e.selection.setRng(on(a))},hn=(e,t,n)=>{return((e,t)=>Ue(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,n)&&((e,t,n)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0))(e,t,n)&&(i=n,t.className===i.className);var i},pn=(e,t)=>{let n,i=t.nextSibling;if(hn(e,t,i)){const r=i;for(;n=r.firstChild;)t.appendChild(n);e.remove(r)}if(i=t.previousSibling,hn(e,t,i)){const r=i;for(;n=r.lastChild;)t.insertBefore(n,t.firstChild);e.remove(r)}},mn=(e,t,n,i)=>{if(t.nodeName!==n){const r=e.dom.rename(t,n);ln(e.dom,r,i),Et(e,sn(n),r)}else ln(e.dom,t,i),Et(e,sn(n),t)},fn=(e,t,n,i)=>{if(t.classList.forEach((e,n,i)=>{e.startsWith("tox-")&&(i.remove(e),0===i.length&&t.removeAttribute("class"))}),t.nodeName!==n){const r=e.dom.rename(t,n);ln(e.dom,r,i),Et(e,sn(n),r)}else ln(e.dom,t,i),Et(e,sn(n),t)},gn=e=>"list-style-type"in e,vn=(e,t,n)=>{const i=ut(e);if(wt(e,i))return;const o=ht(e),s=r(n)?n:{};o.length>0?((e,t,n,i,r)=>{const o=Ue(t);if(!o||t.nodeName!==i||gn(r)||bt(t)){un(e,i,r);const s=rn(e.selection.getRng()),a=o?[t,...n]:n,l=o&&bt(t)?fn:mn;Re.each(a,t=>{l(e,t,i,r)}),e.selection.setRng(on(s))}else Xt(e)})(e,i,o,t,s):((e,t,n,i)=>{if(t!==e.getBody())if(t)if(t.nodeName!==n||gn(i)||bt(t)){const r=rn(e.selection.getRng());bt(t)&&t.classList.forEach((e,n,i)=>{e.startsWith("tox-")&&(i.remove(e),0===i.length&&t.removeAttribute("class"))}),ln(e.dom,t,i);const o=e.dom.rename(t,n);pn(e.dom,o),e.selection.setRng(on(r)),un(e,n,i),Et(e,sn(n),o)}else Xt(e);else un(e,n,i),Et(e,sn(n),t)})(e,i,t,s)},yn=Ie.DOM,bn=(e,t)=>{const n=Re.grep(e.select("ol,ul",t));Re.each(n,t=>{((e,t)=>{const n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){const i=n.previousSibling;i&&"LI"===i.nodeName?(i.appendChild(t),qe(e,n)&&yn.remove(n)):yn.setStyle(n,"listStyleType","none")}if(Ue(n)){const e=n.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)})},An=(e,t,n,i)=>{let r=t.startContainer;const o=t.startOffset;if(Be(r)&&(n?o<r.data.length:o>0))return r;const s=e.schema.getNonEmptyElements();Ne(r)&&(r=_e.getNode(r,o));const a=new we(r,i);n&&((e,t)=>!!Ye(t)&&e.isBlock(t.nextSibling)&&!Ye(t.previousSibling))(e.dom,r)&&a.next();const l=n?a.next.bind(a):a.prev2.bind(a);for(;r=l();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(s[r.nodeName])return r;if(Be(r)&&r.data.length>0)return r}return null},_n=(e,t)=>{const n=t.childNodes;return 1===n.length&&!Ue(n[0])&&e.isBlock(n[0])},wn=e=>f.from(e).map(B.fromDom).filter(q).exists(e=>((e,t=!1)=>le(e)?e.dom.isContentEditable:pe(e).fold(u(t),e=>"true"===me(e)))(e)&&!b(["details"],G(e))),xn=(e,t,n)=>{let i;const r=_n(e,n)?n.firstChild:n;if(((e,t)=>{_n(e,t)&&wn(t.firstChild)&&e.remove(t.firstChild,!0)})(e,t),!qe(e,t,!0))for(;i=t.firstChild;)r.appendChild(i)},Cn=(e,t,n)=>{let i;const r=t.parentNode;if(!We(e,t)||!We(e,n))return;Ue(n.lastChild)&&(i=n.lastChild),r===n.lastChild&&Ye(r.previousSibling)&&e.remove(r.previousSibling);const o=n.lastChild;o&&Ye(o)&&t.hasChildNodes()&&e.remove(o),qe(e,n,!0)&&be(B.fromDom(n)),xn(e,t,n),i&&n.appendChild(i);const s=((e,t)=>{const n=e.dom,i=t.dom;return n!==i&&n.contains(i)})(B.fromDom(n),B.fromDom(t))?e.getParents(t,Ue,n):[];e.remove(t),w(s,t=>{qe(e,t)&&t!==e.getRoot()&&e.remove(t)})},En=(e,t,n,i)=>{const r=e.dom;if(r.isEmpty(i))((e,t,n)=>{be(B.fromDom(n)),Cn(e.dom,t,n),e.selection.setCursorLocation(n,0)})(e,n,i);else{const o=rn(t);Cn(r,n,i),e.selection.setRng(on(o))}},Mn=(e,t)=>{const n=e.dom,i=e.selection,r=i.getStart(),o=mt(e,r),s=n.getParent(i.getStart(),"LI",o);if(s){const r=s.parentElement;if(r===e.getBody()&&qe(n,r))return!0;const a=lt(i.getRng()),l=n.getParent(An(e,a,t,o),"LI",o),c=l&&(t?n.isChildOf(s,l):n.isChildOf(l,s));if(l&&l!==s&&!c)return e.undoManager.transact(()=>{var n,i;t?En(e,a,l,s):(null===(i=(n=s).parentNode)||void 0===i?void 0:i.firstChild)===n?Zt(e):((e,t,n,i)=>{const r=rn(t);Cn(e.dom,n,i);const o=on(r);e.selection.setRng(o)})(e,a,s,l)}),!0;if(c&&!t&&l!==s)return e.undoManager.transact(()=>{if(a.commonAncestorContainer.parentElement){const t=rn(a),i=a.commonAncestorContainer.parentElement;xn(n,a.commonAncestorContainer.parentElement,l),i.remove();const r=on(t);e.selection.setRng(r)}}),!0;if(!l&&!t&&0===a.startOffset&&0===a.endOffset)return e.undoManager.transact(()=>{Xt(e)}),!0}return!1},Sn=(e,t)=>{const n=e.dom,i=e.selection.getStart(),r=mt(e,i),o=n.getParent(i,n.isBlock,r);if(o&&n.isEmpty(o)){const i=lt(e.selection.getRng()),s=n.getParent(An(e,i,t,r),"LI",r);if(s){const a=e=>b(["td","th","caption"],G(e)),l=e=>e.dom===r;return!!((e,t,n=h)=>O(e,t,n).getOr(e.isNone()&&t.isNone()))(ue(B.fromDom(s),a,l),ue(B.fromDom(i.startContainer),a,l),U)&&(e.undoManager.transact(()=>{const i=s.parentNode;((e,t,n)=>{const i=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),i&&e.isEmpty(i)&&e.remove(i)})(n,o,r),pn(n,i),e.selection.select(s,!0),e.selection.collapse(t)}),!0)}}return!1},Tn=e=>{const t=e.selection.getStart(),n=mt(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||pt(e).length>0},kn=(e,t)=>{const n=e.selection;return!wt(e,n.getNode())&&(n.isCollapsed()?((e,t)=>Mn(e,t)||Sn(e,t))(e,t):(e=>!!Tn(e)&&(e.undoManager.transact(()=>{e.execCommand("Delete"),bn(e.dom,e.getBody())}),!0))(e))},Ln=e=>{const t=T(Mt(e).split("")),n=_(t,(e,t)=>{const n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n});return C(n,(e,t)=>e+t,0)},Dn=e=>{if(--e<0)return"";{const t=e%26,n=Math.floor(e/26);return Dn(n)+String.fromCharCode("A".charCodeAt(0)+t)}},In=e=>{const t=parseInt(e.start,10);return R(e.listStyleType,"upper-alpha")?Dn(t):R(e.listStyleType,"lower-alpha")?Dn(t).toLowerCase():e.start},Rn=e=>{const t=ut(e);ze(t)&&!wt(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:In({start:e.dom.getAttrib(t,"start","1"),listStyleType:f.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return f.some({listStyleType:f.none(),start:e});case 0:return f.some({listStyleType:f.some("upper-alpha"),start:Ln(e).toString()});case 1:return f.some({listStyleType:f.some("lower-alpha"),start:Ln(e).toString()});case 3:return f.some({listStyleType:f.none(),start:""});case 4:return f.none()}})(t.getData().start).each(t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})}),t.close()}})},On=(e,t)=>()=>{const n=ut(e);return a(n)&&n.nodeName===t},Pn=e=>{e.addCommand("mceListProps",()=>{Rn(e)})},Bn=e=>{e.on("BeforeExecCommand",t=>{const n=t.command.toLowerCase();"indent"===n?Kt(e):"outdent"===n&&Zt(e)}),e.addCommand("InsertUnorderedList",(t,n)=>{vn(e,"UL",n)}),e.addCommand("InsertOrderedList",(t,n)=>{vn(e,"OL",n)}),e.addCommand("InsertDefinitionList",(t,n)=>{vn(e,"DL",n)}),e.addCommand("RemoveList",()=>{Xt(e)}),Pn(e),e.addCommand("mceListUpdate",(t,n)=>{r(n)&&((e,t)=>{const n=ut(e);null===n||wt(e,n)||e.undoManager.transact(()=>{r(t.styles)&&e.dom.setStyles(n,t.styles),r(t.attrs)&&Me(t.attrs,(t,i)=>e.dom.setAttrib(n,i,t))})})(e,n)}),e.addQueryStateHandler("InsertUnorderedList",On(e,"UL")),e.addQueryStateHandler("InsertOrderedList",On(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",On(e,"DL"))};var Nn=tinymce.util.Tools.resolve("tinymce.html.Node");const Un=e=>3===e.type,Fn=e=>0===e.length,zn=e=>{const t=(t,n)=>{const i=Nn.create("li");w(t,e=>i.append(e)),n?e.insert(i,n,!0):e.append(i)},n=C(e.children(),(e,n)=>Un(n)?[...e,n]:Fn(e)||Un(n)?e:(t(e,n),[]),[]);Fn(n)||t(n)},Hn=e=>{Ze(e)&&(e=>{e.on("keydown",t=>{t.keyCode!==xe.TAB||xe.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?Zt(e):Kt(e))&&t.preventDefault()})})})(e),(e=>{e.on("ExecCommand",t=>{const n=t.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!Tn(e)||bn(e.dom,e.getBody())}),e.on("keydown",t=>{t.keyCode===xe.BACKSPACE?kn(e,!1)&&t.preventDefault():t.keyCode===xe.DELETE&&kn(e,!0)&&t.preventDefault()})})(e)},jn=(e,t)=>n=>(n.setEnabled(e.selection.isEditable()),xt(e,i=>{n.setActive(At(i.parents,t)),n.setEnabled(!wt(e,i.element)&&e.selection.isEditable())})),Vn=(e,t)=>n=>xt(e,i=>n.setEnabled(At(i.parents,t)&&!wt(e,i.element)));e.add("lists",e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",e=>w(e,zn))})})(e),e.hasPlugin("rtc",!0)?Pn(e):(Hn(e),Bn(e)),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:jn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:jn(e,"UL")}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:Vn(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const n=ut(e,t);return ze(n)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{kn(e,t)}}))(e)))}()},6116:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var r=function(e){var t,i;function r(t,i,r){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,r))||this}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(i);r.prototype.name=i.name,r.prototype.code=e,t[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},6187:(e,t,n)=>{"use strict";n.d(t,{Pf:()=>r,if:()=>o,o6:()=>i});const i="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,r=(e,t,n=null,i=null)=>{for(;t!==n;){const n=t.nextSibling;e.insertBefore(t,i),t=n}},o=(e,t,n=null)=>{for(;t!==n;){const n=t.nextSibling;e.removeChild(t),t=n}}},6211:function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",invalidDate:"Data inválida"})}(n(3681))},6216:(e,t,n)=>{"use strict";let i,r,o=n(6613);class s extends o{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,n){let i=super.normalize(e);if(t)if("prepend"===n)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of i)e.raws.before=t.raws.before;return i}removeChild(e,t){let n=this.index(e);return!t&&0===n&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[n].raws.before),super.removeChild(e)}toResult(e={}){return new i(new r,this,e).stringify()}}s.registerLazyResult=e=>{i=e},s.registerProcessor=e=>{r=e},e.exports=s,s.default=s,o.registerRoot(s)},6233:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(3423),r=n(4146),o=n(1160),s=n(8604);class a extends r.A{get analytics(){return this.getMainComponent(s.A)}constructor(e,t){super(e,t),this.ins=this.addInputs(a.ins),this.scope=r.X.Node}update(e){return this.ins.visible.changed,!0}activateComponent(e){e.activateTool(),this.analytics.sendProperty("Tools_ActiveTool",e.text)}deactivateComponent(e){e.deactivateTool()}onActiveComponent(e,t){}}a.typeName="CVToolProvider",a.isSystemSingleton=!0,a.componentType=o.Ay,a.ins={visible:i.gK.Boolean("Tools.Visible"),closed:i.gK.Event("Tools.Closed")}},6241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const i=n(5265),r=n(3151),o=n(2363);function s(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function a(e,t,n){return i._`${s(e)}.call(${t}, ${n})`}function l(e,t,n,r){const o=i._`${t}${(0,i.getProperty)(n)} === undefined`;return r?(0,i.or)(o,(0,i.not)(a(e,t,n))):o}function c(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:o}=e;n.if(l(n,r,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:i._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,o){return(0,i.or)(...r.map(r=>(0,i.and)(l(e,t,r,n.ownProperties),i._`${o} = ${r}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=s,t.isOwnProperty=a,t.propertyInData=function(e,t,n,r){const o=i._`${t}${(0,i.getProperty)(n)} !== undefined`;return r?i._`${o} && ${a(e,t,n)}`:o},t.noPropertyInData=l,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter(n=>!(0,r.alwaysValidSchema)(e,t[n]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:a},it:l},c,d,u){const h=u?i._`${e}, ${t}, ${r}${s}`:t,p=[[o.default.instancePath,(0,i.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&p.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const m=i._`${h}, ${n.object(...p)}`;return d!==i.nil?i._`${c}.call(${d}, ${m})`:i._`${c}(${m})`},t.usePattern=function({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"";return e.scopeValue("pattern",{key:n,ref:new RegExp(n,r),code:i._`new RegExp(${n}, ${r})`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(s){const l=t.const("len",i._`${n}.length`);t.forRange("i",0,l,n=>{e.subschema({keyword:o,dataProp:n,dataPropType:r.Type.Num},a),t.if((0,i.not)(a),s)})}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(e=>(0,r.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block(()=>n.forEach((n,r)=>{const s=e.subschema({keyword:o,schemaProp:r,compositeRule:!0},l);t.assign(a,i._`${a} || ${l}`);e.mergeValidEvaluated(s,l)||t.if((0,i.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},6257:e=>{"use strict";const t="'".charCodeAt(0),n='"'.charCodeAt(0),i="\\".charCodeAt(0),r="/".charCodeAt(0),o="\n".charCodeAt(0),s=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),d="[".charCodeAt(0),u="]".charCodeAt(0),h="(".charCodeAt(0),p=")".charCodeAt(0),m="{".charCodeAt(0),f="}".charCodeAt(0),g=";".charCodeAt(0),v="*".charCodeAt(0),y=":".charCodeAt(0),b="@".charCodeAt(0),A=/[\t\n\f\r "#'()/;[\\\]{}]/g,_=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,w=/.[\r\n"'(/\\]/,x=/[\da-f]/i;e.exports=function(e,C={}){let E,M,S,T,k,L,D,I,R,O,P=e.css.valueOf(),B=C.ignoreErrors,N=P.length,U=0,F=[],z=[];function H(t){throw e.error("Unclosed "+t,U)}return{back:function(e){z.push(e)},endOfFile:function(){return 0===z.length&&U>=N},nextToken:function(e){if(z.length)return z.pop();if(U>=N)return;let C=!!e&&e.ignoreUnclosed;switch(E=P.charCodeAt(U),E){case o:case s:case l:case c:case a:T=U;do{T+=1,E=P.charCodeAt(T)}while(E===s||E===o||E===l||E===c||E===a);L=["space",P.slice(U,T)],U=T-1;break;case d:case u:case m:case f:case y:case g:case p:{let e=String.fromCharCode(E);L=[e,e,U];break}case h:if(O=F.length?F.pop()[1]:"",R=P.charCodeAt(U+1),"url"===O&&R!==t&&R!==n&&R!==s&&R!==o&&R!==l&&R!==a&&R!==c){T=U;do{if(D=!1,T=P.indexOf(")",T+1),-1===T){if(B||C){T=U;break}H("bracket")}for(I=T;P.charCodeAt(I-1)===i;)I-=1,D=!D}while(D);L=["brackets",P.slice(U,T+1),U,T],U=T}else T=P.indexOf(")",U+1),M=P.slice(U,T+1),-1===T||w.test(M)?L=["(","(",U]:(L=["brackets",M,U,T],U=T);break;case t:case n:k=E===t?"'":'"',T=U;do{if(D=!1,T=P.indexOf(k,T+1),-1===T){if(B||C){T=U+1;break}H("string")}for(I=T;P.charCodeAt(I-1)===i;)I-=1,D=!D}while(D);L=["string",P.slice(U,T+1),U,T],U=T;break;case b:A.lastIndex=U+1,A.test(P),T=0===A.lastIndex?P.length-1:A.lastIndex-2,L=["at-word",P.slice(U,T+1),U,T],U=T;break;case i:for(T=U,S=!0;P.charCodeAt(T+1)===i;)T+=1,S=!S;if(E=P.charCodeAt(T+1),S&&E!==r&&E!==s&&E!==o&&E!==l&&E!==c&&E!==a&&(T+=1,x.test(P.charAt(T)))){for(;x.test(P.charAt(T+1));)T+=1;P.charCodeAt(T+1)===s&&(T+=1)}L=["word",P.slice(U,T+1),U,T],U=T;break;default:E===r&&P.charCodeAt(U+1)===v?(T=P.indexOf("*/",U+2)+1,0===T&&(B||C?T=P.length:H("comment")),L=["comment",P.slice(U,T+1),U,T],U=T):(_.lastIndex=U+1,_.test(P),T=0===_.lastIndex?P.length-1:_.lastIndex-2,L=["word",P.slice(U,T+1),U,T],F.push(L),U=T)}return U++,L},position:function(){return U}}}},6262:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8541),r=n(8086),o=n(5626),s=n(6458),a=n(8385),l=n(7405),c=n(101),d=n(624),u=n(5713),h=n(8569),p=n(991),m=n(2645),f=n(8031),g=n(4200),v=n(4571),y=n(3270);t.default=function(e=!1){const t=[p.default,m.default,f.default,g.default,v.default,y.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(r.default,s.default):t.push(i.default,o.default),t.push(a.default),t}},6280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const i=n(5265),r=n(3151),o=n(2363);function s(e,t){const n=e.const("err",t);e.if(i._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,i._`[${n}]`),i._`${o.default.vErrors}.push(${n})`),e.code(i._`${o.default.errors}++`)}function a(e,t){const{gen:n,validateName:r,schemaEnv:o}=e;o.$async?n.throw(i._`new ${e.ValidationError}(${t})`):(n.assign(i._`${r}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>i.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?i.str`"${e}" keyword must be ${t} ($data)`:i.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,r,o){const{it:l}=e,{gen:d,compositeRule:u,allErrors:h}=l,p=c(e,n,r);(null!=o?o:u||h)?s(d,p):a(l,i._`[${p}]`)},t.reportExtraError=function(e,n=t.keywordError,i){const{it:r}=e,{gen:l,compositeRule:d,allErrors:u}=r;s(l,c(e,n,i)),d||u||a(r,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(i._`${o.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(i._`${o.default.vErrors}.length`,t),()=>e.assign(o.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:r,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,s=>{e.const(l,i._`${o.default.vErrors}[${s}]`),e.if(i._`${l}.instancePath === undefined`,()=>e.assign(i._`${l}.instancePath`,(0,i.strConcat)(o.default.instancePath,a.errorPath))),e.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(i._`${l}.schema`,n),e.assign(i._`${l}.data`,r))})};const l={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema")};function c(e,t,n){const{createErrors:r}=e.it;return!1===r?i._`{}`:function(e,t,n={}){const{gen:r,it:s}=e,a=[d(s,n),u(e,n)];return function(e,{params:t,message:n},r){const{keyword:s,data:a,schemaValue:c,it:d}=e,{opts:u,propertyName:h,topSchemaRef:p,schemaPath:m}=d;r.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||i._`{}`]),u.messages&&r.push([l.message,"function"==typeof n?n(e):n]);u.verbose&&r.push([l.schema,c],[l.parentSchema,i._`${p}${m}`],[o.default.data,a]);h&&r.push([l.propertyName,h])}(e,t,a),r.object(...a)}(e,t,n)}function d({errorPath:e},{instancePath:t}){const n=t?i.str`${e}${(0,r.getErrorPath)(t,r.Type.Str)}`:e;return[o.default.instancePath,(0,i.strConcat)(o.default.instancePath,n)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let s=o?t:i.str`${t}/${e}`;return n&&(s=i.str`${s}${(0,r.getErrorPath)(n,r.Type.Str)}`),[l.schemaPath,s]}},6335:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,r=1;r<i;++r)t[r]=t[r].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function r(e){return e.toUpperCase()}function o(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function s(e,t){var n=e;if(t)for(var i in t)n[i]=t[i];return n}function a(e){var i="[A-Za-z]",r="[0-9]",o=t(r,"[A-Fa-f]"),s=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",d=t(i,r,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=n(i+t(i,r,"[\\+\\-\\.]")+"*"),h=n(n(s+"|"+t(d,a,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4]"+r)+"|"+n("1"+r+r)+"|"+n("[1-9]"+r)+"|"+r),n(n("25[0-5]")+"|"+n("2[0-4]"+r)+"|"+n("1"+r+r)+"|"+n("0?[1-9]"+r)+"|0?0?"+r)),m=n(p+"\\."+p+"\\."+p+"\\."+p),f=n(o+"{1,4}"),g=n(n(f+"\\:"+f)+"|"+m),v=n(n(f+"\\:")+"{6}"+g),y=n("\\:\\:"+n(f+"\\:")+"{5}"+g),b=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+g),A=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+g),_=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+g),w=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+g),x=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+g),C=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),E=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),M=n([v,y,b,A,_,w,x,C,E].join("|")),S=n(n(d+"|"+s)+"+"),T=(n(M+"\\%25"+S),n(M+n("\\%25|\\%(?!"+o+"{2})")+S)),k=n("[vV]"+o+"+\\."+t(d,a,"[\\:]")+"+"),L=n("\\["+n(T+"|"+M+"|"+k)+"\\]"),D=n(n(s+"|"+t(d,a))+"*"),I=n(L+"|"+m+"(?!"+D+")|"+D),R=n(r+"*"),O=n(n(h+"@")+"?"+I+n("\\:"+R)+"?"),P=n(s+"|"+t(d,a,"[\\:\\@]")),B=n(P+"*"),N=n(P+"+"),U=n(n(s+"|"+t(d,a,"[\\@]"))+"+"),F=n(n("\\/"+B)+"*"),z=n("\\/"+n(N+F)+"?"),H=n(U+F),j=n(N+F),V="(?!"+P+")",Y=(n(F+"|"+z+"|"+H+"|"+j+"|"+V),n(n(P+"|"+t("[\\/\\?]",c))+"*")),G=n(n(P+"|[\\/\\?]")+"*"),Q=n(n("\\/\\/"+O+F)+"|"+z+"|"+j+"|"+V),$=n(u+"\\:"+Q+n("\\?"+Y)+"?"+n("\\#"+G)+"?"),q=n(n("\\/\\/"+O+F)+"|"+z+"|"+H+"|"+V),W=n(q+n("\\?"+Y)+"?"+n("\\#"+G)+"?");return n($+"|"+W),n(u+"\\:"+Q+n("\\?"+Y)+"?"),n(n("\\/\\/("+n("("+h+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+z+"|"+j+"|"+V+")"),n("\\?("+Y+")"),n("\\#("+G+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+z+"|"+H+"|"+V+")"),n("\\?("+Y+")"),n("\\#("+G+")"),n(n("\\/\\/("+n("("+h+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+F+"|"+z+"|"+j+"|"+V+")"),n("\\?("+Y+")"),n("\\#("+G+")"),n("("+h+")@"),n("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]",i,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",d,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",d,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",d,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",d,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",d,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",d,a),"g"),UNRESERVED:new RegExp(d,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",d,l),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+m+")$"),IPV6ADDRESS:new RegExp("^\\[?("+M+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+S+")")+"?\\]?$")}}var l=a(!1),c=a(!0),d=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=2147483647,p=36,m=1,f=26,g=38,v=700,y=72,b=128,A="-",_=/^xn--/,w=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=p-m,M=Math.floor,S=String.fromCharCode;function T(e){throw new RangeError(C[e])}function k(e,t){for(var n=[],i=e.length;i--;)n[i]=t(e[i]);return n}function L(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+k((e=e.replace(x,".")).split("."),t).join(".")}function D(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}var I=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},R=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},O=function(e,t,n){var i=0;for(e=n?M(e/v):e>>1,e+=M(e/t);e>E*f>>1;i+=p)e=M(e/E);return M(i+(E+1)*e/(e+g))},P=function(e){var t=[],n=e.length,i=0,r=b,o=y,s=e.lastIndexOf(A);s<0&&(s=0);for(var a=0;a<s;++a)e.charCodeAt(a)>=128&&T("not-basic"),t.push(e.charCodeAt(a));for(var l=s>0?s+1:0;l<n;){for(var c=i,d=1,u=p;;u+=p){l>=n&&T("invalid-input");var g=I(e.charCodeAt(l++));(g>=p||g>M((h-i)/d))&&T("overflow"),i+=g*d;var v=u<=o?m:u>=o+f?f:u-o;if(g<v)break;var _=p-v;d>M(h/_)&&T("overflow"),d*=_}var w=t.length+1;o=O(i-c,w,0==c),M(i/w)>h-r&&T("overflow"),r+=M(i/w),i%=w,t.splice(i++,0,r)}return String.fromCodePoint.apply(String,t)},B=function(e){var t=[],n=(e=D(e)).length,i=b,r=0,o=y,s=!0,a=!1,l=void 0;try{for(var c,d=e[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u<128&&t.push(S(u))}}catch(e){a=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(a)throw l}}var g=t.length,v=g;for(g&&t.push(A);v<n;){var _=h,w=!0,x=!1,C=void 0;try{for(var E,k=e[Symbol.iterator]();!(w=(E=k.next()).done);w=!0){var L=E.value;L>=i&&L<_&&(_=L)}}catch(e){x=!0,C=e}finally{try{!w&&k.return&&k.return()}finally{if(x)throw C}}var I=v+1;_-i>M((h-r)/I)&&T("overflow"),r+=(_-i)*I,i=_;var P=!0,B=!1,N=void 0;try{for(var U,F=e[Symbol.iterator]();!(P=(U=F.next()).done);P=!0){var z=U.value;if(z<i&&++r>h&&T("overflow"),z==i){for(var H=r,j=p;;j+=p){var V=j<=o?m:j>=o+f?f:j-o;if(H<V)break;var Y=H-V,G=p-V;t.push(S(R(V+Y%G,0))),H=M(Y/G)}t.push(S(R(H,0))),o=O(r,I,v==g),r=0,++v}}}catch(e){B=!0,N=e}finally{try{!P&&F.return&&F.return()}finally{if(B)throw N}}++r,++i}return t.join("")},N=function(e){return L(e,function(e){return _.test(e)?P(e.slice(4).toLowerCase()):e})},U=function(e){return L(e,function(e){return w.test(e)?"xn--"+B(e):e})},F={version:"2.1.0",ucs2:{decode:D,encode:function(e){return String.fromCodePoint.apply(String,u(e))}},decode:P,encode:B,toASCII:U,toUnicode:N},z={};function H(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function j(e){for(var t="",n=0,i=e.length;n<i;){var r=parseInt(e.substr(n+1,2),16);if(r<128)t+=String.fromCharCode(r),n+=3;else if(r>=194&&r<224){if(i-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&r)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(r>=224){if(i-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function V(e,t){function n(e){var n=j(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,H).replace(t.PCT_ENCODED,r)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,H).replace(t.PCT_ENCODED,r)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,H).replace(t.PCT_ENCODED,r)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,H).replace(t.PCT_ENCODED,r)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,H).replace(t.PCT_ENCODED,r)),e}function Y(e){return e.replace(/^0*(.*)/,"$1")||"0"}function G(e,t){var n=e.match(t.IPV4ADDRESS)||[],i=d(n,2)[1];return i?i.split(".").map(Y).join("."):e}function Q(e,t){var n=e.match(t.IPV6ADDRESS)||[],i=d(n,3),r=i[1],o=i[2];if(r){for(var s=r.toLowerCase().split("::").reverse(),a=d(s,2),l=a[0],c=a[1],u=c?c.split(":").map(Y):[],h=l.split(":").map(Y),p=t.IPV4ADDRESS.test(h[h.length-1]),m=p?7:8,f=h.length-m,g=Array(m),v=0;v<m;++v)g[v]=u[v]||h[f+v]||"";p&&(g[m-1]=G(g[m-1],t));var y=g.reduce(function(e,t,n){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===n?i.length++:e.push({index:n,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],b=void 0;if(y&&y.length>1){var A=g.slice(0,y.index),_=g.slice(y.index+y.length);b=A.join(":")+"::"+_.join(":")}else b=g.join(":");return o&&(b+="%"+o),b}return e}var $=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,q=void 0==="".match(/(){0}/)[1];function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==t.iri?c:l;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var r=e.match($);if(r){q?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==e.indexOf("@")?r[3]:void 0,n.host=-1!==e.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==e.indexOf("?")?r[7]:void 0,n.fragment=-1!==e.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.host&&(n.host=Q(G(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=z[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)V(n,i);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=F.toASCII(n.host.replace(i.PCT_ENCODED,j).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}V(n,l)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function K(e,t){var n=!1!==t.iri?c:l,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(Q(G(String(e.host),n),n).replace(n.IPV6ADDRESS,function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"})),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var Z=/^\.\.?\//,X=/^\/\.(\/|$)/,J=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(Z))e=e.replace(Z,"");else if(e.match(X))e=e.replace(X,"/");else if(e.match(J))e=e.replace(J,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];e=e.slice(i.length),t.push(i)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:l,i=[],r=z[(t.scheme||e.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||r&&r.domainHost)try{e.host=t.iri?F.toUnicode(e.host):F.toASCII(e.host.replace(n.PCT_ENCODED,j).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}V(e,n),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var o=K(e,t);if(void 0!==o&&("suffix"!==t.reference&&i.push("//"),i.push(o),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var s=e.path;t.absolutePath||r&&r.absolutePath||(s=te(s)),void 0===o&&(s=s.replace(/^\/\//,"/%2F")),i.push(s)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=W(ne(e,n),n),t=W(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=te(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=te(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function re(e,t,n){var i=s({scheme:"null"},n);return ne(ie(W(e,i),W(t,i),i,!0),i)}function oe(e,t){return"string"==typeof e?e=ne(W(e,t),t):"object"===i(e)&&(e=W(ne(e,t),t)),e}function se(e,t,n){return"string"==typeof e?e=ne(W(e,n),n):"object"===i(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(W(t,n),n):"object"===i(t)&&(t=ne(t,n)),e===t}function ae(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:l.ESCAPE,H)}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:l.PCT_ENCODED,j)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},de={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function ue(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=ue(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(ue(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),i=d(n,2),r=i[0],o=i[1];e.path=r&&"/"!==r?r:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},me={},fe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",ve=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Ae="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",_e=new RegExp(fe,"g"),we=new RegExp(ve,"g"),xe=new RegExp(t("[^]",ye,"[\\.]",'[\\"]',be),"g"),Ce=new RegExp(t("[^]",fe,Ae),"g"),Ee=Ce;function Me(e){var t=j(e);return t.match(_e)?t:e}var Se={scheme:"mailto",parse:function(e,t){var n=e,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var r=!1,o={},s=n.query.split("&"),a=0,l=s.length;a<l;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var d=c[1].split(","),u=0,h=d.length;u<h;++u)i.push(d[u]);break;case"subject":n.subject=le(c[1],t);break;case"body":n.body=le(c[1],t);break;default:r=!0,o[le(c[0],t)]=le(c[1],t)}}r&&(n.headers=o)}n.query=void 0;for(var p=0,m=i.length;p<m;++p){var f=i[p].split("@");if(f[0]=le(f[0]),t.unicodeSupport)f[1]=le(f[1],t).toLowerCase();else try{f[1]=F.toASCII(le(f[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=f.join("@")}return n},serialize:function(e,t){var n=e,i=o(e.to);if(i){for(var s=0,a=i.length;s<a;++s){var l=String(i[s]),c=l.lastIndexOf("@"),d=l.slice(0,c).replace(we,Me).replace(we,r).replace(xe,H),u=l.slice(c+1);try{u=t.iri?F.toUnicode(u):F.toASCII(le(u,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=d+"@"+u}n.path=i.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var m in h)h[m]!==me[m]&&p.push(m.replace(we,Me).replace(we,r).replace(Ce,H)+"="+h[m].replace(we,Me).replace(we,r).replace(Ee,H));return p.length&&(n.query=p.join("&")),n}},Te=/^([^\:]+)\:(.*)/,ke={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(Te),i=e;if(n){var r=t.scheme||i.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=r+":"+(t.nid||o),l=z[a];i.nid=o,i.nss=s,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",i=e.nid,r=n+":"+(t.nid||i),o=z[r];o&&(e=o.serialize(e,t));var s=e,a=e.nss;return s.path=(i||t.nid)+":"+a,s}},Le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,De={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(Le)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};z[ce.scheme]=ce,z[de.scheme]=de,z[he.scheme]=he,z[pe.scheme]=pe,z[Se.scheme]=Se,z[ke.scheme]=ke,z[De.scheme]=De,e.SCHEMES=z,e.pctEncChar=H,e.pctDecChars=j,e.parse=W,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=ie,e.resolve=re,e.normalize=oe,e.equal=se,e.escapeComponent=ae,e.unescapeComponent=le,Object.defineProperty(e,"__esModule",{value:!0})}(t)},6342:(e,t,n)=>{"use strict";n.d(t,{q:()=>o,u:()=>r});const i=new WeakMap,r=e=>(...t)=>{const n=e(...t);return i.set(n,!0),n},o=e=>"function"==typeof e&&i.has(e)},6345:(e,t)=>{"use strict";function n(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Map(n([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(n([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(n([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(n([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))},6351:(e,t,n)=>{"use strict";n.d(t,{DI:()=>a,Dl:()=>l,g6:()=>d,nZ:()=>c});var i=n(4640);const r=new i.Pq0,o=new i.kn4,s=new i.O9p;new i.PTz;function a(e,t,n){const o=n||new i.PTz;return r.fromArray(e).multiplyScalar(i.cj9.DEG2RAD),s.setFromVector3(r,t),o.setFromEuler(s),o}function l(e,t,n){const o=n||[0,0,0];return s.setFromQuaternion(e,t),r.setFromEuler(s),r.multiplyScalar(i.cj9.RAD2DEG).toArray(o),o}function c(e){const t=new Map,n=new Map,i=new Map;e.traverse(e=>{const r=e;if(r.isMesh){const e=r.geometry;e&&t.set(e.uuid,e);const o=r.material;if(o){n.set(o.uuid,o);for(let e in o){const t=o[e];t&&t.isTexture&&i.set(t.uuid,t)}}}});for(let e of i)e[1].dispose();for(let e of n)e[1].dispose();for(let e of t)e[1].dispose()}function d(e,t,n){if(n||(n=e),!e.visible||e.layers.mask>1)return;const i=e.geometry;if(i&&e.visible){let s=e;for(o.identity();s&&s!==n;)o.premultiply(s.matrix),s=s.parent;if(i.isGeometry){const e=i.vertices;for(let n=0,i=e.length;n<i;++n)r.copy(e[n]).applyMatrix4(o),t.expandByPoint(r)}else if(i.isBufferGeometry){const e=i.attributes.position;if(void 0!==e)for(let n=0,i=e.count;n<i;++n)r.fromBufferAttribute(e,n).applyMatrix4(o),t.expandByPoint(r)}}const s=e.children;for(let e=0,i=s.length;e<i;++e)d(s[e],t,n)}},6389:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var i=n(4640),r=n(9979),o=n(3423),s=n(3600),a=n(6436),l=n(3889);const c=Math.PI/180;Math.PI;var d=n(1266),u=n(8313),h=n(5623),p=n(9616);const m=["studio_small_08_1k.hdr","capture_tent_mockup-v2-1k.hdr","spruit_sunrise_1k_HDR.hdr"],f=new i.O9p;class g extends o.Ay{constructor(){super(...arguments),this.ins=this.addInputs(g.envIns),this._target=null,this._pmremGenerator=null,this._currentIdx=0,this._imageOptions=m.slice(),this._loadingCount=0,this._isLegacy=!1,this._isLegacyRefl=!1}get settingProperties(){return[this.ins.intensity,this.ins.rotation,this.ins.imageIndex,this.ins.visible]}get assetReader(){return this.getMainComponent(s.A)}get background(){return this.getSystemComponent(d.A)}get sceneNode(){return this.getSystemComponent(a.A)}get renderer(){return this.getSystemComponent(l.A)}create(){super.create(),this.system.components.on(u.A,this.onMetaComponent,this),this.graph.components.on(p.A,this.onModelComponent,this)}dispose(){var e;this.graph.components.off(p.A,this.onModelComponent,this),this.system.components.off(u.A,this.onMetaComponent,this),this.sceneNode.scene.environment&&(this.sceneNode.scene.environment=null),this.sceneNode.scene.background&&(this.sceneNode.scene.background=null),this._target&&(this._target.dispose(),this._target=null),null===(e=this._pmremGenerator)||void 0===e||e.dispose(),this._pmremGenerator=null,super.dispose()}update(){var e,t;const n=this.ins;if(n.initialize.changed&&(this._isLegacy=!1,this._isLegacyRefl=!1,this.graph.hasComponent(h.A)||this.addLightComponent(!1)),n.imageIndex.changed&&(n.enabled.value||n.visible.value)&&this.loadEnvironmentMap(),n.intensity.changed&&(this.sceneNode.scene.environmentIntensity=n.intensity.value,n.visible.value&&(this.sceneNode.scene.backgroundIntensity=n.intensity.value)),n.rotation.changed){const e=n.rotation.value;f.set(e[0]*c,e[1]*c,e[2]*c)}return n.enabled.changed&&(n.enabled.value&&this.loadEnvironmentMap(),this.sceneNode.scene.environment=n.enabled.value?null===(e=this._target)||void 0===e?void 0:e.texture:null),n.visible.changed&&0==this._loadingCount&&(n.visible.value&&this.loadEnvironmentMap(),this.sceneNode.scene.background=n.visible.value?null===(t=this._target)||void 0===t?void 0:t.texture:null,n.visible.value&&this.sceneNode.scene.background&&(this.sceneNode.scene.background.needsUpdate=!0),this.background.ins.visible.setValue(!n.visible.value)),!this._target||n.enabled.value||n.visible.value||(this._target.dispose(),this._target=null,this.sceneNode.scene.environment=null,this.sceneNode.scene.background=null),!0}fromData(e){const t=this.ins;e.rotation&&t.rotation.setValue(e.rotation),e.index&&t.imageIndex.setValue(e.index),e.visible&&t.visible.setValue(e.visible)}toData(){const e=this.ins;return{index:e.imageIndex.value,visible:e.visible.value,rotation:e.rotation.cloneValue()}}loadEnvironmentMap(){const e=this.ins;if(e.imageIndex.value!=this._currentIdx||null===this._target){try{if(null===this._pmremGenerator){if(!this.renderer.views[0].renderer)throw new Error("No renderer found : can't generate environment");this._pmremGenerator=new r.BdL(this.renderer.views[0].renderer)}}catch(e){console.error("Failed to compile environment map : ",e)}const t=this._imageOptions[e.imageIndex.value];m.includes(t)?(this._loadingCount++,this.assetReader.getSystemTexture("images/"+t).then(e=>{this.updateEnvironmentMap(e,t)})):(this._loadingCount++,this.assetReader.getTexture(t).then(e=>{this.updateEnvironmentMap(e,t)})),this._currentIdx=e.imageIndex.value}}updateEnvironmentMap(e,t){const n=this.ins;this._imageOptions.indexOf(t)==n.imageIndex.value&&(this._target=this._pmremGenerator.fromEquirectangular(e,this._target),this.sceneNode.scene.environment=n.enabled.value?this._target.texture:null,this.sceneNode.scene.background=n.visible.value?this._target.texture:null,this.sceneNode.scene.environmentRotation=f,this.sceneNode.scene.backgroundRotation=f,this.renderer.forceRender()),e.dispose(),e=null,this._loadingCount--}onMetaComponent(e){const t=e.object;e.add&&t.once("load",()=>{const e=t.images.dictionary;Object.keys(e).forEach(t=>{const n=e[t];n.usage&&"Environment"===n.usage&&(this._imageOptions.push(n.uri),this.ins.imageIndex.setOptions(this._imageOptions.map(function(e,t){return t.toString()})))})})}addLightComponent(e){const t=this.graph.findNodeByName("Lights"),n=t.graph.createCustomNode(t);n.transform.createComponent(h.A).ins.enabled.setValue(e),t.transform.addChild(n.transform),this._isLegacy=!0}onModelComponent(e){const t=e.object;e.add?t.on("model-load",()=>this.legacyCheck(t),this):e.remove&&t.off("model-load",()=>this.legacyCheck(t),this)}legacyCheck(e){this._isLegacy&&!this._isLegacyRefl&&e.object3D.traverse(e=>{const t=e.material;if(t&&!this._isLegacyRefl&&(t.roughnessMap||t.metalnessMap)){this.graph.getComponent(h.A).transform.dispose(),this.addLightComponent(!0),this._isLegacyRefl=!0}})}}g.typeName="CVEnvironment",g.text="Environment",g.envIns={imageIndex:o.gK.Integer("Environment.MapIndex",{preset:0,options:m.map(function(e,t){return t.toString()})}),initialize:o.gK.Event("Environment.Init"),intensity:o.gK.Number("Environment.Intensity",{preset:1,min:0}),rotation:o.gK.Vector3("Environment.Rotation"),visible:o.gK.Boolean("Environment.Visible",!1),enabled:o.gK.Boolean("Environment.Enabled",!0)}},6401:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(3681))},6436:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(4640),r=n(3423),o=n(3889),s=n(8424);const a={view:null,viewport:null,renderer:null,scene:null,camera:null},l={type:"before-render",component:null,context:a},c={type:"after-render",component:null,context:a},d={activate:r.gK.Event("Scene.Activate")};class u extends s.Ay{constructor(e,t){super(e,t),this._activeCameraComponent=null,this._preRenderList=[],this._postRenderList=[],this._renderListsNeedUpdate=!0,this.ins=this.addInputs(d,0),this.addEvents("before-render","after-render","active-camera")}get scene(){return this.object3D}get activeCameraComponent(){return this._activeCameraComponent}set activeCameraComponent(e){if(e!==this._activeCameraComponent){const t=this._activeCameraComponent;this._activeCameraComponent=e;const n={type:"active-camera",previous:t,next:e};this.emit(n)}}get activeCamera(){return this._activeCameraComponent?this._activeCameraComponent.camera:null}get renderer(){return this.getMainComponent(o.A)}create(){super.create(),this.on("hierarchy",this.shouldUpdateRenderLists,this),this.on("child",this.shouldUpdateRenderLists,this);const e=this.renderer;e&&!e.activeSceneComponent&&(e.activeSceneComponent=this)}update(e){if(super.update(e),this.ins.activate.changed){const e=this.renderer;e&&(e.activeSceneComponent=this)}return!0}tick(e){return this._renderListsNeedUpdate&&(this.updateRenderLists(),this._renderListsNeedUpdate=!1),!1}dispose(){const e=this.renderer;e&&e.activeSceneComponent===this&&(e.activeSceneComponent=null),this.off("hierarchy",this.shouldUpdateRenderLists,this),this.off("child",this.shouldUpdateRenderLists,this),super.dispose()}preRender(e){const t=this._preRenderList;for(let n=0,i=t.length;n<i;++n)t[n].preRender(e)}postRender(e){const t=this._postRenderList;for(let n=0,i=t.length;n<i;++n)t[n].postRender(e)}createObject3D(){const e=new i.Z58;return e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),e}shouldUpdateRenderLists(){this._renderListsNeedUpdate=!0}updateRenderLists(){this._preRenderList=[],this._postRenderList=[],this.traverseDown(!1,!0,!0,e=>(e.preRender&&this._preRenderList.push(e),e.postRender&&this._postRenderList.push(e),!1)),this.changed=!0}_onBeforeRender(e,t,n){a.view=e.__view,a.viewport=e.__viewport,a.renderer=e,a.scene=t,a.camera=n,this.preRender(a),l.component=this,this.emit(l)}_onAfterRender(e,t,n){a.view=e.__view,a.viewport=e.__viewport,a.renderer=e,a.scene=t,a.camera=n,this.postRender(a),c.component=this,this.emit(c)}}u.typeName="CScene",u.isGraphSingleton=!0},6453:function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",w:"седмица",ww:"%d седмици",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(3681))},6458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o=n(6241),s=n(8541),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:i}=e,{prefixItems:a}=n;i.items=!0,(0,r.alwaysValidSchema)(i,t)||(a?(0,s.validateAdditionalItems)(e,a):e.ok((0,o.validateArray)(e)))}};t.default=a},6487:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},6514:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];e.defineLocale("ku",{months:i,monthsShort:i,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(e){return/ئێواره‌/.test(e)},meridiem:function(e,t,n){return e<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(3681))},6535:(e,t,n)=>{n(9658)},6544:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},6552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(7550),r=n(4035),o=n(935),s=n(3570),a=n(5370),l=n(8167),c=n(9551),d=n(637),u=n(1155),h=n(423),p=[i.default,r.default,o.default,s.default,a.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=p},6565:function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(3681))},6578:(e,t,n)=>{"use strict";let i=n(301),r=n(2610),o=n(8759),s=n(6216);class a{constructor(e=[]){this.version="8.5.6",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let n of e)if(!0===n.postcss?n=n():n.postcss&&(n=n.postcss),"object"==typeof n&&Array.isArray(n.plugins))t=t.concat(n.plugins);else if("object"==typeof n&&n.postcssPlugin)t.push(n);else if("function"==typeof n)t.push(n);else{if("object"!=typeof n||!n.parse&&!n.stringify)throw new Error(n+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new r(this,e,t):new o(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}e.exports=a,a.default=a,s.registerProcessor(a),i.registerProcessor(a)},6607:(e,t)=>{t.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,d=-7,u=n?r-1:0,h=n?-1:1,p=e[t+u];for(u+=h,o=p&(1<<-d)-1,p>>=-d,d+=a;d>0;o=256*o+e[t+u],u+=h,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;d>0;s=256*s+e[t+u],u+=h,d-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,d=(1<<c)-1,u=d>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,m=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=d?(a=0,s=d):s+u>=1?(a=(t*l-1)*Math.pow(2,r),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=m,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+p]=255&s,p+=m,s/=256,c-=8);e[n+p-m]|=128*f}},6613:(e,t,n)=>{"use strict";let i,r,o,s,a=n(9623),l=n(8290),c=n(3172),{isClean:d,my:u}=n(3963);function h(e){return e.map(e=>(e.nodes&&(e.nodes=h(e.nodes)),delete e.source,e))}function p(e){if(e[d]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)p(t)}class m extends c{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,n,i=this.getIterator();for(;this.indexes[i]<this.proxyOf.nodes.length&&(t=this.indexes[i],n=e(this.proxyOf.nodes[t],t),!1!==n);)this.indexes[i]+=1;return delete this.indexes[i],n}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...n)=>e[t](...n.map(e=>"function"==typeof e?(t,n)=>e(t.toProxy(),n):e)):"every"===t||"some"===t?n=>e[t]((e,...t)=>n(e.toProxy(),...t)):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map(e=>e.toProxy()):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,n)=>(e[t]===n||(e[t]=n,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let n,i=this.index(e),r=this.normalize(t,this.proxyOf.nodes[i]).reverse();i=this.index(e);for(let e of r)this.proxyOf.nodes.splice(i+1,0,e);for(let e in this.indexes)n=this.indexes[e],i<n&&(this.indexes[e]=n+r.length);return this.markDirty(),this}insertBefore(e,t){let n,i=this.index(e),r=0===i&&"prepend",o=this.normalize(t,this.proxyOf.nodes[i],r).reverse();i=this.index(e);for(let e of o)this.proxyOf.nodes.splice(i,0,e);for(let e in this.indexes)n=this.indexes[e],i<=n&&(this.indexes[e]=n+o.length);return this.markDirty(),this}normalize(e,t){if("string"==typeof e)e=h(r(e).nodes);else if(void 0===e)e=[];else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new l(e)]}else if(e.selector||e.selectors)e=[new s(e)];else if(e.name)e=[new i(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new a(e)]}return e.map(e=>(e[u]||m.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[d]&&p(e),e.raws||(e.raws={}),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let n in this.indexes)t=this.indexes[n],t>=e&&(this.indexes[n]=t-1);return this.markDirty(),this}replaceValues(e,t,n){return n||(n=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,n))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,n)=>{let i;try{i=e(t,n)}catch(e){throw t.addToError(e)}return!1!==i&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if("atrule"===n.type&&e.test(n.name))return t(n,i)}):this.walk((n,i)=>{if("atrule"===n.type&&n.name===e)return t(n,i)}):(t=e,this.walk((e,n)=>{if("atrule"===e.type)return t(e,n)}))}walkComments(e){return this.walk((t,n)=>{if("comment"===t.type)return e(t,n)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if("decl"===n.type&&e.test(n.prop))return t(n,i)}):this.walk((n,i)=>{if("decl"===n.type&&n.prop===e)return t(n,i)}):(t=e,this.walk((e,n)=>{if("decl"===e.type)return t(e,n)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((n,i)=>{if("rule"===n.type&&e.test(n.selector))return t(n,i)}):this.walk((n,i)=>{if("rule"===n.type&&n.selector===e)return t(n,i)}):(t=e,this.walk((e,n)=>{if("rule"===e.type)return t(e,n)}))}}m.registerParse=e=>{r=e},m.registerRule=e=>{s=e},m.registerAtRule=e=>{i=e},m.registerRoot=e=>{o=e},e.exports=m,m.default=m,m.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,i.prototype):"rule"===e.type?Object.setPrototypeOf(e,s.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type?Object.setPrototypeOf(e,a.prototype):"root"===e.type&&Object.setPrototypeOf(e,o.prototype),e[u]=!0,e.nodes&&e.nodes.forEach(e=>{m.rebuild(e)})}},6634:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+r({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function n(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){return e>9?i(e%10):e}function r(e,t){return 2===t?o(e):e}function o(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}var s=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],a=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,l=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,c=/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,d=[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],u=[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],h=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:h,fullWeekdaysParse:d,shortWeekdaysParse:u,minWeekdaysParse:h,monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:l,monthsShortStrictRegex:c,monthsParse:s,longMonthsParse:s,shortMonthsParse:s,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(3681))},6639:function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},6679:(e,t,n)=>{"use strict";var i,r,o;n.d(t,{Ui:()=>r,mB:()=>i,nf:()=>o}),function(e){e[e.PlayAnimation=0]="PlayAnimation",e[e.PlayAudio=1]="PlayAudio"}(i||(i={})),function(e){e[e.OnClick=0]="OnClick",e[e.OnLoad=1]="OnLoad",e[e.OnAnnotation=2]="OnAnnotation"}(r||(r={})),function(e){e[e.Single=0]="Single",e[e.PingPong=1]="PingPong",e[e.Loop=2]="Loop"}(o||(o={}))},6687:(e,t,n)=>{"use strict";n.d(t,{A:()=>ae,h:()=>se});var i=n(4424),r=n(9309),o=n(4146),s=n(4955),a=n(4222),l=n(3889),c=n(319),d=n(3644),u=n(6436),h=n(1860),p=n(8604),m=n(161),f=n(3600),g=n(1229),v=n(2902),y=n(8172),b=n(1721),A=n(1086),_=n(8313),w=n(9616),x=n(3423);class C extends x.Ay{constructor(){super(...arguments),this.ins=this.addInputs(C.ins)}get model(){return this.getComponent(w.A)}update(e){return!0}}C.typeName="CVAnnotations",C.ins={};var E=n(3350),M=n(9640),S=n(9610),T=n(2552),k=n(6884),L=n(4965),D=n(5623),I=n(5007),R=n(2652),O=n(7801),P=n(2654),B=n(1266),N=n(7137),U=n(7109),F=n(4340),z=n(2566),H=n(5659),j=n(4085),V=n(6389),Y=n(2791),G=n(9337),Q=n(3019),$=n(9909),q=n(7504),W=n(2154),K=n(3164),Z=n(2222),X=n(5852),J=n(4088);class ee extends J.A{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity,this.ins.ground]}get snapshotProperties(){return[this.ins.color,this.ins.intensity,this.ins.ground]}dispose(){super.dispose()}fromDocument(e,t){var n,i;if(!isFinite(t.light))throw new Error("light property missing in node");const r=e.lights[t.light],o=this.ins;if(r.type!==ee.type)throw new Error("light type mismatch: not an hemisphere light");return o.name.setValue(t.name),r.point=r.point||{},o.copyValues({enabled:void 0!==r.enabled?r.enabled:o.enabled.schema.preset,color:void 0!==r.color?r.color:o.color.schema.preset,intensity:void 0!==r.intensity?r.intensity:o.intensity.schema.preset,ground:null!==(i=null===(n=r.hemisphere)||void 0===n?void 0:n.ground)&&void 0!==i?i:o.ground.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value,hemisphere:{ground:n.ground.cloneValue()}};i.type=ee.type,e.lights=e.lights||[];const r=e.lights.length;return e.lights.push(i),r}}ee.typeName="CVHemisphereLight",ee.type="hemisphere",ee.text="Hemisphere Light",ee.icon="half-sun";var te=n(4640),ne=n(2464);class ie extends ne.A{constructor(e,t){super(e,t),this.ins=this.addInputs(ie.rectLightIns),this.object3D=new te.ure,this.light.width=1,this.light.height=1,this.object3D.matrixAutoUpdate=!1,this.transform.ins.scale.addEventListener("value",this.update,this)}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return(n.position.changed||n.target.changed)&&(t.position.fromArray(n.position.value),t.lookAt((new te.Pq0).fromArray(n.target.value)),t.updateMatrix()),this.light.width=10*this.transform.ins.scale.value[0],this.light.height=10*this.transform.ins.scale.value[2],!0}dispose(){this.transform.ins.scale.removeEventListener("value",this.update),super.dispose()}}ie.typeName="CRectLight",ie.rectLightIns={position:x.gK.Vector3("Light.Position",[0,0,0]),target:x.gK.Vector3("Light.Target",[0,-1,0]),size:x.gK.Vector2("Light.Size",[10,10])};class re extends ie{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}dispose(){super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if(n.type!==re.type)throw new Error(`light type mismatch: not a directional light (${n.type})`);return i.name.setValue(t.name),i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,color:void 0!==n.color?n.color:i.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset,position:i.position.schema.preset,target:i.target.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value};i.type=re.type,e.lights=e.lights||[];const r=e.lights.length;return e.lights.push(i),r}}re.typeName="CVRectLight",re.type="rect",re.text="Rectangular Light",re.icon="area";var oe=n(66);const se=[T.A,k.A,L.A,X.A,ee,re,D.A],ae=[i.Ay,r.A,o.A,s.A,a.A,l.A,c.A,d.A,u.A,h.A,p.A,Y.A,m.A,f.A,g.A,v.A,y.A,b.A,A.A,_.A,w.A,C,E.A,M.A,S.A,...se,I.A,R.A,O.Ay,P.Ay,oe.Ay,B.A,N.A,U.A,F.A,z.A,H.A,j.A,V.A,G.A,Q.A,$.A,q.A,W.A,K.A,Z.A]},6719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const i=n(5265),r=n(2874),o=n(2363),s=n(5391),a=n(3151),l=n(2310),c=n(6335);class d{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,s.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=p.call(this,e);if(t)return t;const n=(0,s.getFullPath)(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:d}=this.opts,u=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:d});let h;e.$async&&(h=u.scopeValue("Error",{ref:r.default,code:i._`require("ajv/dist/runtime/validation_error").default`}));const m=u.scopeName("validate");e.validateName=m;const f={gen:u,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,i.stringify)(e.schema)}:{ref:e.schema}),validateName:m,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:i.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(f),u.optimize(this.opts.code.optimize);const t=u.toString();g=`${u.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(m,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:m,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=f;n.evaluated={props:e instanceof i.Name?void 0:e,items:t instanceof i.Name?void 0:t,dynamicProps:e instanceof i.Name,dynamicItems:t instanceof i.Name},n.source&&(n.source.evaluated=(0,i.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return(0,s.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function p(e){for(const t of this._compilations)if(m(t,e))return t}function m(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||g.call(this,e,t)}function g(e,t){const n=c.parse(t),i=(0,s._getFullPath)(n);let r=(0,s.getFullPath)(e.baseId);if(Object.keys(e.schema).length>0&&i===r)return y.call(this,n,e);const o=(0,s.normalizeId)(i),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=g.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||u.call(this,a),o===(0,s.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,i=t[n];return i&&(r=(0,s.resolveUrl)(r,i)),new d({schema:t,schemaId:n,root:e,baseId:r})}return y.call(this,n,a)}}t.SchemaEnv=d,t.compileSchema=u,t.resolveRef=function(e,t,n){var i;n=(0,s.resolveUrl)(t,n);const r=e.refs[n];if(r)return r;let o=f.call(this,e,n);if(void 0===o){const r=null===(i=e.localRefs)||void 0===i?void 0:i[n],{schemaId:s}=this.opts;r&&(o=new d({schema:r,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[n]=h.call(this,o):void 0},t.getCompilingSchema=p,t.resolveSchema=g;const v=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:n,root:i}){var r;if("/"!==(null===(r=e.fragment)||void 0===r?void 0:r[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,a.unescapeFragment)(i)];if(void 0===e)return;const r="object"==typeof(n=e)&&n[this.opts.schemaId];!v.has(i)&&r&&(t=(0,s.resolveUrl)(t,r))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,a.schemaHasRulesButRef)(n,this.RULES)){const e=(0,s.resolveUrl)(t,n.$ref);o=g.call(this,i,e)}const{schemaId:l}=this.opts;return o=o||new d({schema:n,schemaId:l,root:i,baseId:t}),o.schema!==o.root.schema?o:void 0}},6739:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],d:["jedan dan","jednog dana"],dd:["dan","dana","dana"],M:["jedan mesec","jednog meseca"],MM:["mesec","meseca","meseci"],y:["jednu godinu","jedne godine"],yy:["godinu","godine","godina"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,r){var o,s=t.words[i];return 1===i.length?"y"===i&&n?"jedna godina":r||n?s[0]:s[1]:(o=t.correctGrammaticalCase(e,s),"yy"===i&&n&&"godinu"===o?e+" godina":e+" "+o)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},6748:e=>{"use strict";let t={comma:e=>t.split(e,[","],!0),space:e=>t.split(e,[" ","\n","\t"]),split(e,t,n){let i=[],r="",o=!1,s=0,a=!1,l="",c=!1;for(let n of e)c?c=!1:"\\"===n?c=!0:a?n===l&&(a=!1):'"'===n||"'"===n?(a=!0,l=n):"("===n?s+=1:")"===n?s>0&&(s-=1):0===s&&t.includes(n)&&(o=!0),o?(""!==r&&i.push(r.trim()),r="",o=!1):r+=n;return(n||""!==r)&&i.push(r.trim()),i}};e.exports=t,t.default=t},6763:(e,t,n)=>{"use strict";n.d(t,{EM:()=>Y,Ay:()=>V,qy:()=>u.qy,MZ:()=>E,XX:()=>u.XX,ux:()=>F});var i=n(6187),r=n(4709);function o(e,t){const{element:{content:n},parts:i}=e,r=document.createTreeWalker(n,133,null,!1);let o=a(i),s=i[o],l=-1,c=0;const d=[];let u=null;for(;r.nextNode();){l++;const e=r.currentNode;for(e.previousSibling===u&&(u=null),t.has(e)&&(d.push(e),null===u&&(u=e)),null!==u&&c++;void 0!==s&&s.index===l;)s.index=null!==u?-1:s.index-c,o=a(i,o),s=i[o]}d.forEach(e=>e.parentNode.removeChild(e))}const s=e=>{let t=11===e.nodeType?0:1;const n=document.createTreeWalker(e,133,null,!1);for(;n.nextNode();)t++;return t},a=(e,t=-1)=>{for(let n=t+1;n<e.length;n++){const t=e[n];if((0,r.s9)(t))return n}return-1};var l=n(8135),c=n(1046),d=n(1757),u=n(4743);const h=(e,t)=>`${e}--${t}`;let p=!0;void 0===window.ShadyCSS?p=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),p=!1);const m=e=>t=>{const n=h(t.type,e);let i=c.c.get(n);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},c.c.set(n,i));let o=i.stringsArray.get(t.strings);if(void 0!==o)return o;const s=t.strings.join(r.xL);if(o=i.keyString.get(s),void 0===o){const n=t.getTemplateElement();p&&window.ShadyCSS.prepareTemplateDom(n,e),o=new r.Bj(t,n),i.keyString.set(s,o)}return i.stringsArray.set(t.strings,o),o},f=["html","svg"],g=new Set,v=(e,t,n)=>{g.add(e);const i=n?n.element:document.createElement("template"),r=t.querySelectorAll("style"),{length:l}=r;if(0===l)return void window.ShadyCSS.prepareTemplateStyles(i,e);const d=document.createElement("style");for(let e=0;e<l;e++){const t=r[e];t.parentNode.removeChild(t),d.textContent+=t.textContent}(e=>{f.forEach(t=>{const n=c.c.get(h(t,e));void 0!==n&&n.keyString.forEach(e=>{const{element:{content:t}}=e,n=new Set;Array.from(t.querySelectorAll("style")).forEach(e=>{n.add(e)}),o(e,n)})})})(e);const u=i.content;n?function(e,t,n=null){const{element:{content:i},parts:r}=e;if(null==n)return void i.appendChild(t);const o=document.createTreeWalker(i,133,null,!1);let l=a(r),c=0,d=-1;for(;o.nextNode();)for(d++,o.currentNode===n&&(c=s(t),n.parentNode.insertBefore(t,n));-1!==l&&r[l].index===d;){if(c>0){for(;-1!==l;)r[l].index+=c,l=a(r,l);return}l=a(r,l)}}(n,d,u.firstChild):u.insertBefore(d,u.firstChild),window.ShadyCSS.prepareTemplateStyles(i,e);const p=u.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==p)t.insertBefore(p.cloneNode(!0),t.firstChild);else if(n){u.insertBefore(d,u.firstChild);const e=new Set;e.add(d),o(n,e)}};window.JSCompiler_renameProperty=(e,t)=>e;const y={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},b=(e,t)=>t!==e&&(t==t||e==e),A={attribute:!0,type:String,converter:y,reflect:!1,hasChanged:b},_="finalized";class w extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((t,n)=>{const i=this._attributeNameForProperty(n,t);void 0!==i&&(this._attributeToPropertyMap.set(i,n),e.push(i))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach((e,t)=>this._classProperties.set(t,e))}}static createProperty(e,t=A){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const n="symbol"==typeof e?Symbol():`__${e}`,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const r=this[e];this[t]=i,this.requestUpdateInternal(e,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||A}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(_)||e.finalize(),this[_]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const n of t)this.createProperty(n,e[n])}}static _attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,n=b){return n(e,t)}static _propertyValueFromAttribute(e,t){const n=t.type,i=t.converter||y,r="function"==typeof i?i:i.fromAttribute;return r?r(e,n):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const n=t.type,i=t.converter;return(i&&i.toAttribute||y.toAttribute)(e,n)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,t)=>this[t]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,n){t!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,t,n=A){const i=this.constructor,r=i._attributeNameForProperty(e,n);if(void 0!==r){const e=i._propertyValueToAttribute(t,n);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(r):this.setAttribute(r,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const n=this.constructor,i=n._attributeToPropertyMap.get(e);if(void 0!==i){const e=n.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=n._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,n){let i=!0;if(void 0!==e){const r=this.constructor;n=n||r.getPropertyOptions(e),r._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((e,t)=>this._propertyToAttribute(t,this[t],e)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}w[_]=!0;const x=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(n){n.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}},C=(e,t,n)=>{t.constructor.createProperty(n,e)};function E(e){return(t,n)=>void 0!==n?C(e,t,n):x(e,t)}const M=Element.prototype;M.msMatchesSelector||M.webkitMatchesSelector;const S=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,T=Symbol();class k{constructor(e,t){if(t!==T)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(S?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const L={};class D extends w{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,n)=>e.reduceRight((e,n)=>Array.isArray(n)?t(n,e):(e.add(n),e),n),n=t(e,new Set),i=[];n.forEach(e=>i.unshift(e)),this._styles=i}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map(e=>{if(e instanceof CSSStyleSheet&&!S){const t=Array.prototype.slice.call(e.cssRules).reduce((e,t)=>e+t.cssText,"");return new k(String(t),T)}return e})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?S?this.renderRoot.adoptedStyleSheets=e.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==L&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return L}}D.finalized=!0,D.render=(e,t,n)=>{if(!n||"object"!=typeof n||!n.scopeName)throw new Error("The `scopeName` option is required.");const r=n.scopeName,o=l.r.has(t),s=p&&11===t.nodeType&&!!t.host,a=s&&!g.has(r),c=a?document.createDocumentFragment():t;if((0,l.X)(e,c,Object.assign({templateFactory:m(r)},n)),a){const e=l.r.get(c);l.r.delete(c);const n=e.value instanceof d.i?e.value.template:void 0;v(r,c,n),(0,i.if)(t,t.firstChild),t.appendChild(c),l.r.set(t,e)}!o&&s&&window.ShadyCSS.styleElement(t.host)},D.shadowRootOptions={mode:"open"};const I=(e,t)=>{const n=e.startNode.parentNode,i=void 0===t?e.endNode:t.startNode,r=n.insertBefore((0,u.h5)(),i);n.insertBefore((0,u.h5)(),i);const o=new u.Qh(e.options);return o.insertAfterNode(r),o},R=(e,t)=>(e.setValue(t),e.commit(),e),O=(e,t,n)=>{const i=e.startNode.parentNode,r=n?n.startNode:e.endNode,o=t.endNode.nextSibling;o!==r&&(0,u.Pf)(i,t.startNode,o,r)},P=e=>{(0,u.if)(e.startNode.parentNode,e.startNode,e.endNode.nextSibling)},B=(e,t,n)=>{const i=new Map;for(let r=t;r<=n;r++)i.set(e[r],r);return i},N=new WeakMap,U=new WeakMap,F=(0,u.u$)((e,t,n)=>{let i;return void 0===n?n=t:void 0!==t&&(i=t),t=>{if(!(t instanceof u.Qh))throw new Error("repeat can only be used in text bindings");const r=N.get(t)||[],o=U.get(t)||[],s=[],a=[],l=[];let c,d,h=0;for(const t of e)l[h]=i?i(t,h):h,a[h]=n(t,h),h++;let p=0,m=r.length-1,f=0,g=a.length-1;for(;p<=m&&f<=g;)if(null===r[p])p++;else if(null===r[m])m--;else if(o[p]===l[f])s[f]=R(r[p],a[f]),p++,f++;else if(o[m]===l[g])s[g]=R(r[m],a[g]),m--,g--;else if(o[p]===l[g])s[g]=R(r[p],a[g]),O(t,r[p],s[g+1]),p++,g--;else if(o[m]===l[f])s[f]=R(r[m],a[f]),O(t,r[m],r[p]),m--,f++;else if(void 0===c&&(c=B(l,f,g),d=B(o,p,m)),c.has(o[p]))if(c.has(o[m])){const e=d.get(l[f]),n=void 0!==e?r[e]:null;if(null===n){const e=I(t,r[p]);R(e,a[f]),s[f]=e}else s[f]=R(n,a[f]),O(t,n,r[p]),r[e]=null;f++}else P(r[m]),m--;else P(r[p]),p++;for(;f<=g;){const e=I(t,s[g+1]);R(e,a[f]),s[f++]=e}for(;p<=m;){const e=r[p++];null!==e&&P(e)}N.set(t,s),U.set(t,l)}});var z,H=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let j=z=class extends D{constructor(){super(...arguments),this._isFirstConnected=!1}static setStyle(e,t){Object.assign(e.style,t)}static setAttribs(e,t){for(let n in t)e.setAttribute(n,t[n])}get shady(){return this.constructor.shady}appendTo(e){return e.appendChild(this),this}removeChildren(){for(;this.firstChild;)this.removeChild(this.firstChild)}getChildrenArray(){return Array.from(this.children)}appendElement(e,t){return this.createElement(e,t,this)}createElement(e,t,n){let i;return i="string"==typeof e?document.createElement(e):e instanceof HTMLElement?e:new e,t&&Object.assign(i.style,t),n&&n.appendChild(i),i}setStyle(e){return z.setStyle(this,e),this}setAttribute(e,t){return super.setAttribute(e,t),this}setAttributes(e){return z.setAttribs(this,e),this}addClass(...e){return e.forEach(e=>this.classList.add(e)),this}removeClass(...e){return e.forEach(e=>this.classList.remove(e)),this}setClass(e,t){return t?this.classList.add(e):this.classList.remove(e),this}hasFocus(){return document.activeElement===this}on(e,t,n){return this.addEventListener(e,t,n),this}off(e,t,n){return this.removeEventListener(e,t,n),this}connectedCallback(){this._isFirstConnected||(this._isFirstConnected=!0,this.firstConnected()),this.connected(),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.disconnected()}createRenderRoot(){return this.shady?super.createRenderRoot():this}firstConnected(){}connected(){}disconnected(){}onUpdate(){this.requestUpdate()}};j.tagName="ff-custom-element",j.shady=!1,j=z=H([Y("ff-custom-element")],j);const V=j;function Y(e){return t=>(t.tagName=e,customElements.define(t.tagName,t),t)}},6773:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>d});n(2867);var i,r=n(6763),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const s={info:"ff-info",success:"ff-success",warning:"ff-warning",error:"ff-error"},a={info:"info",success:"check",warning:"warning",error:"error"},l={info:2e3,success:2e3,warning:5e3,error:0};let c=i=class extends r.Ay{static show(e,t,n){new i(e,t,n)}constructor(e,t,n){super(),this._handler=0,this.on("transitionend",this.remove.bind(this)),this.message=e||"<messge>",this.level=t||"info",this.timeout=void 0!==n?n:l[this.level];const r=(i.shadowRootNode||document).getElementById(i.stackId);r?r.appendChild(this):console.warn(`element '#${i.stackId}' not found`)}close(){this._handler>0&&(window.clearTimeout(this._handler),this._handler=0),this.classList.add("ff-out")}firstUpdated(){this.classList.add("ff-notification",s[this.level]),this.timeout>0&&(this._handler=window.setTimeout(()=>this.close(),this.timeout))}render(){const e=a[this.level];return r.qy`<ff-icon name=${e}></ff-icon>
            <div class="ff-text">${this.message}</div>
            <ff-button inline icon="close" @click=${this.onClose}>`}onClose(e){e.stopPropagation(),this.close()}};c.stackId="ff-notification-stack",c.shadowRootNode=null,o([(0,r.MZ)({type:String})],c.prototype,"message",void 0),o([(0,r.MZ)({type:String})],c.prototype,"level",void 0),o([(0,r.MZ)({type:Number})],c.prototype,"timeout",void 0),c=i=o([(0,r.EM)("ff-notification")],c);const d=c},6788:(e,t,n)=>{var i=n(4484),r=n(1327);e.exports=function e(t,n,o,s,a){var l=-1,c=t.length;for(o||(o=r),a||(a=[]);++l<c;){var d=t[l];n>0&&o(d)?n>1?e(d,n-1,o,s,a):i(a,d):s||(a[a.length]=d)}return a}},6842:(e,t,n)=>{"use strict";let{existsSync:i,readFileSync:r}=n(8892),{dirname:o,join:s}=n(5324),{SourceMapConsumer:a,SourceMapGenerator:l}=n(8645);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let n=t.map?t.map.prev:void 0,i=this.loadMap(t.from,n);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=o(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new a(this.text)),this.consumerCache}decodeInline(e){let t=e.match(/^data:application\/json;charset=utf-?8,/)||e.match(/^data:application\/json,/);if(t)return decodeURIComponent(e.substr(t[0].length));let n=e.match(/^data:application\/json;charset=utf-?8;base64,/)||e.match(/^data:application\/json;base64,/);if(n)return i=e.substr(n[0].length),Buffer?Buffer.from(i,"base64").toString():window.atob(i);var i;let r=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+r)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/g);if(!t)return;let n=e.lastIndexOf(t.pop()),i=e.indexOf("*/",n);n>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(n,i)))}loadFile(e){if(this.root=o(e),i(e))return this.mapFile=e,r(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof a)return l.fromSourceMap(t).toString();if(t instanceof l)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let n=t(e);if(n){let e=this.loadFile(n);if(!e)throw new Error("Unable to load previous source map: "+n.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=s(o(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}e.exports=c,c.default=c},6854:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6857:(e,t,n)=>{var i={"./af":8237,"./af.js":8237,"./ar":7937,"./ar-dz":9540,"./ar-dz.js":9540,"./ar-kw":8664,"./ar-kw.js":8664,"./ar-ly":2309,"./ar-ly.js":2309,"./ar-ma":5572,"./ar-ma.js":5572,"./ar-sa":2470,"./ar-sa.js":2470,"./ar-tn":7080,"./ar-tn.js":7080,"./ar.js":7937,"./az":7881,"./az.js":7881,"./be":7859,"./be.js":7859,"./bg":6453,"./bg.js":6453,"./bm":8843,"./bm.js":8843,"./bn":1166,"./bn-bd":5609,"./bn-bd.js":5609,"./bn.js":1166,"./bo":7437,"./bo.js":7437,"./br":6634,"./br.js":6634,"./bs":7145,"./bs.js":7145,"./ca":2518,"./ca.js":2518,"./cs":3964,"./cs.js":3964,"./cv":1463,"./cv.js":1463,"./cy":8670,"./cy.js":8670,"./da":5541,"./da.js":5541,"./de":9577,"./de-at":8659,"./de-at.js":8659,"./de-ch":373,"./de-ch.js":373,"./de.js":9577,"./dv":8736,"./dv.js":8736,"./el":847,"./el.js":847,"./en-au":612,"./en-au.js":612,"./en-ca":3510,"./en-ca.js":3510,"./en-gb":3767,"./en-gb.js":3767,"./en-ie":5916,"./en-ie.js":5916,"./en-il":5771,"./en-il.js":5771,"./en-in":4365,"./en-in.js":4365,"./en-nz":1950,"./en-nz.js":1950,"./en-sg":7872,"./en-sg.js":7872,"./eo":9938,"./eo.js":9938,"./es":1574,"./es-do":7322,"./es-do.js":7322,"./es-mx":4142,"./es-mx.js":4142,"./es-us":7083,"./es-us.js":7083,"./es.js":1574,"./et":6487,"./et.js":6487,"./eu":7235,"./eu.js":7235,"./fa":347,"./fa.js":347,"./fi":1891,"./fi.js":1891,"./fil":8319,"./fil.js":8319,"./fo":4633,"./fo.js":4633,"./fr":8974,"./fr-ca":9687,"./fr-ca.js":9687,"./fr-ch":7432,"./fr-ch.js":7432,"./fr.js":8974,"./fy":1475,"./fy.js":1475,"./ga":7338,"./ga.js":7338,"./gd":9573,"./gd.js":9573,"./gl":9741,"./gl.js":9741,"./gom-deva":4048,"./gom-deva.js":4048,"./gom-latn":7307,"./gom-latn.js":7307,"./gu":4022,"./gu.js":4022,"./he":6565,"./he.js":6565,"./hi":769,"./hi.js":769,"./hr":6544,"./hr.js":6544,"./hu":7045,"./hu.js":7045,"./hy-am":1820,"./hy-am.js":1820,"./id":3571,"./id.js":3571,"./is":9770,"./is.js":9770,"./it":7635,"./it-ch":855,"./it-ch.js":855,"./it.js":7635,"./ja":2015,"./ja.js":2015,"./jv":1502,"./jv.js":1502,"./ka":8254,"./ka.js":8254,"./kk":7196,"./kk.js":7196,"./km":9594,"./km.js":9594,"./kn":4695,"./kn.js":4695,"./ko":4976,"./ko.js":4976,"./ku":6514,"./ku.js":6514,"./ky":5750,"./ky.js":5750,"./lb":8628,"./lb.js":8628,"./lo":3271,"./lo.js":3271,"./lt":3506,"./lt.js":3506,"./lv":7064,"./lv.js":7064,"./me":4136,"./me.js":4136,"./mi":364,"./mi.js":364,"./mk":8182,"./mk.js":8182,"./ml":5335,"./ml.js":5335,"./mn":313,"./mn.js":313,"./mr":605,"./mr.js":605,"./ms":4334,"./ms-my":2245,"./ms-my.js":2245,"./ms.js":4334,"./mt":6639,"./mt.js":6639,"./my":9628,"./my.js":9628,"./nb":4214,"./nb.js":4214,"./ne":9095,"./ne.js":9095,"./nl":3224,"./nl-be":8476,"./nl-be.js":8476,"./nl.js":3224,"./nn":1042,"./nn.js":1042,"./oc-lnc":4782,"./oc-lnc.js":4782,"./pa-in":2077,"./pa-in.js":2077,"./pl":2934,"./pl.js":2934,"./pt":1262,"./pt-br":6211,"./pt-br.js":6211,"./pt.js":1262,"./ro":3501,"./ro.js":3501,"./ru":4051,"./ru.js":4051,"./sd":3545,"./sd.js":3545,"./se":762,"./se.js":762,"./si":462,"./si.js":462,"./sk":2260,"./sk.js":2260,"./sl":7249,"./sl.js":7249,"./sq":9158,"./sq.js":9158,"./sr":6739,"./sr-cyrl":8110,"./sr-cyrl.js":8110,"./sr.js":6739,"./ss":5452,"./ss.js":5452,"./sv":2804,"./sv.js":2804,"./sw":9376,"./sw.js":9376,"./ta":4037,"./ta.js":4037,"./te":1289,"./te.js":1289,"./tet":9801,"./tet.js":9801,"./tg":3607,"./tg.js":3607,"./th":7166,"./th.js":7166,"./tk":3179,"./tk.js":3179,"./tl-ph":9611,"./tl-ph.js":9611,"./tlh":1792,"./tlh.js":1792,"./tr":3196,"./tr.js":3196,"./tzl":1674,"./tzl.js":1674,"./tzm":4457,"./tzm-latn":7563,"./tzm-latn.js":7563,"./tzm.js":4457,"./ug-cn":5394,"./ug-cn.js":5394,"./uk":318,"./uk.js":318,"./ur":4210,"./ur.js":4210,"./uz":9757,"./uz-latn":9831,"./uz-latn.js":9831,"./uz.js":9757,"./vi":2243,"./vi.js":2243,"./x-pseudo":9367,"./x-pseudo.js":9367,"./yo":2094,"./yo.js":2094,"./zh-cn":9244,"./zh-cn.js":9244,"./zh-hk":2076,"./zh-hk.js":2076,"./zh-mo":6401,"./zh-mo.js":6401,"./zh-tw":3980,"./zh-tw.js":3980};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=6857},6871:(e,t,n)=>{"use strict";var i=n(5838);e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError;return t=i(t),e.replace(new RegExp("^"+t+"|"+t+"$","g"),"")}},6884:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(4640),r=n(3423),o=n(2464);new i.Pq0;class s extends o.A{constructor(e,t){super(e,t),this.ins=this.addInputs(s.pointLightIns),this.object3D=new i.HiM}get light(){return this.object3D}update(e){super.update(e);const t=this.light,n=this.ins;return n.position.changed&&(t.position.fromArray(n.position.value),t.updateMatrix()),(n.distance.changed||n.decay.changed)&&(t.distance=n.distance.value,t.decay=n.decay.value,t.shadow.camera.near=t.distance?t.distance/800:.5),t.updateMatrix(),!0}}s.typeName="CPointLight",s.pointLightIns={position:r.gK.Vector3("Light.Position"),distance:r.gK.Number("Light.Distance",{preset:0,min:0}),decay:r.gK.Number("Light.Decay",{preset:1,min:0})};class a extends s{get settingProperties(){return[this.ins.name,this.ins.enabled,this.ins.color,this.ins.intensity,this.ins.distance,this.ins.decay,this.ins.shadowEnabled,this.ins.shadowResolution,this.ins.shadowBlur,this.ins.shadowIntensity]}get snapshotProperties(){return[this.ins.color,this.ins.intensity]}dispose(){this.ins.shadowEnabled.value&&this.light.shadow.map&&this.light.shadow.map.dispose(),super.dispose()}fromDocument(e,t){if(!isFinite(t.light))throw new Error("light property missing in node");const n=e.lights[t.light],i=this.ins;if(n.type!==a.type)throw new Error("light type mismatch: not a point light");return i.name.setValue(t.name),n.point=n.point||{},i.copyValues({enabled:void 0!==n.enabled?n.enabled:i.enabled.schema.preset,color:void 0!==n.color?n.color:i.color.schema.preset,intensity:void 0!==n.intensity?n.intensity:i.intensity.schema.preset,position:i.position.schema.preset,distance:n.point.distance||i.distance.schema.preset,decay:void 0!==n.point.decay?n.point.decay:i.decay.schema.preset,shadowEnabled:n.shadowEnabled||!1,shadowResolution:void 0!==n.shadowResolution&&o.Y[n.shadowResolution]||1,shadowBlur:void 0!==n.shadowBlur?n.shadowBlur:i.shadowBlur.schema.preset,shadowIntensity:void 0!==n.shadowIntensity?n.shadowIntensity:i.shadowIntensity.schema.preset}),t.light}toDocument(e,t){const n=this.ins,i={enabled:n.enabled.value,color:n.color.cloneValue(),intensity:n.intensity.value,point:{distance:n.distance.value,decay:n.decay.value}};i.type=a.type,n.shadowEnabled.value&&(i.shadowEnabled=!0,n.shadowBlur.isDefault()||(i.shadowBlur=n.shadowBlur.value),n.shadowResolution.isDefault()||(i.shadowResolution=o.Y[n.shadowResolution.value]),n.shadowIntensity.isDefault()||(i.shadowIntensity=n.shadowIntensity.value)),e.lights=e.lights||[];const r=e.lights.length;return e.lights.push(i),r}}a.typeName="CVPointLight",a.type="point",a.text="Point Light",a.icon="bulb"},6888:(e,t,n)=>{var i=n(546),r=n(7926),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},6943:(e,t,n)=>{"use strict";var i=n(5532),r=n(6763),o=(n(9498),n(5632),n(6773)),s=n(3051),a=n(4019),l=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let c=class extends a.A{get alphaEnabled(){return 4===this.property.elementCount}constructor(){super(),this.type="number",this.pickerActive=!1,this.compact=!1,this.floating=!0,this.color=new i.Ay,this.onPointerDown=e=>{this.pickerActive&&(e.composedPath()[0]instanceof Node&&this.contains(e.composedPath()[0])||(this.pickerActive=!1))}}firstConnected(){super.firstConnected(),this.classList.add("sv-property-color")}disconnected(){this.pickerActive=!1}update(e){if(e.has("property")){if("number"!==this.property.type||4<this.property.elementCount||this.property.elementCount<3)throw new Error(`not a color property: '${this.property.path}'`);const t=e.get("property");t&&t.off("value",this.onPropertyChange,this),this.property&&(this.property.on("value",this.onPropertyChange,this),this.color.fromArray(this.property.value))}e.has("pickerActive")&&(this.pickerActive?(this.setPickerFocus(),document.addEventListener("pointerdown",this.onPointerDown,{capture:!0,passive:!0})):document.removeEventListener("pointerdown",this.onPointerDown,{capture:!0})),super.update(e)}render(){const e=this.property,t=this.name||e.name,n=this.color.toString(this.alphaEnabled),i=r.qy`<ff-color-edit .color=${this.color} @keydown=${e=>this.onKeyDown(e)} @change=${this.onColorChange}></ff-color-edit>`,s=r.qy`<ff-popup .keepVisible=${!0} .anchor=${this} .position=${"anchor"} .align=${"end"} .justify=${"end"}>${i}</ff-popup>`;return r.qy`<label class="ff-label ff-off">${t}</label>
            <span class="sv-property-field">
                ${this.compact?null:r.qy`<input ?disabled=${"true"===this.ariaDisabled} class="ff-input"
                        type="text"
                        .value=${n}
                        @change=${e=>{try{this.color.setString(e.target.value),this.onColorChange(),e.target.setCustomValidity("")}catch(t){e.target.setCustomValidity(t.message),o.Ay.show(`Not a valid color: ${e.target.value}`,"warning",1e3)}}}
                    >`}
                <ff-button style="background-color: ${n}" title="${t} Color Picker" @click=${this.onButtonClick}></ff-button>
            </span>
            ${this.pickerActive?this.floating?s:i:null}
        `}async setPickerFocus(){await this.updateComplete;const e=this.getElementsByTagName("ff-color-edit").item(0);(0,s.R)(e)[0].focus()}onButtonClick(e){this.pickerActive=!this.pickerActive}onColorChange(){this.property.setValue(this.alphaEnabled?this.color.toRGBAArray():this.color.toRGBArray())}onPropertyChange(e){this.color.fromArray(e),this.requestUpdate()}onKeyDown(e){if("Escape"===e.code||"Enter"===e.code)e.preventDefault(),e.stopPropagation(),this.pickerActive=!1,this.getElementsByTagName("ff-button")[0].focus();else if("Tab"===e.code){const t=this.getElementsByTagName("ff-color-edit")[0];(0,s.i)((0,s.R)(t),e)}}};l([(0,r.MZ)({attribute:!1,type:Boolean})],c.prototype,"pickerActive",void 0),l([(0,r.MZ)({type:Boolean})],c.prototype,"compact",void 0),l([(0,r.MZ)({type:Boolean})],c.prototype,"floating",void 0),c=l([(0,r.EM)("sv-property-color")],c)},6944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var i=n(272),r=n(5362);t.getFeed=function(e){var t=l(u,e);return t?"feed"===t.name?function(e){var t,n=e.children,i={type:"atom",items:(0,r.getElementsByTagName)("entry",n).map(function(e){var t,n=e.children,i={media:a(n)};d(i,"id","id",n),d(i,"title","title",n);var r=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;r&&(i.link=r);var o=c("summary",n)||c("content",n);o&&(i.description=o);var s=c("updated",n);return s&&(i.pubDate=new Date(s)),i})};d(i,"id","id",n),d(i,"title","title",n);var o=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;o&&(i.link=o);d(i,"description","subtitle",n);var s=c("updated",n);s&&(i.updated=new Date(s));return d(i,"author","email",n,!0),i}(t):function(e){var t,n,i=null!==(n=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],o={type:e.name.substr(0,3),id:"",items:(0,r.getElementsByTagName)("item",e.children).map(function(e){var t=e.children,n={media:a(t)};d(n,"id","guid",t),d(n,"title","title",t),d(n,"link","link",t),d(n,"description","description",t);var i=c("pubDate",t)||c("dc:date",t);return i&&(n.pubDate=new Date(i)),n})};d(o,"title","title",i),d(o,"link","link",i),d(o,"description","description",i);var s=c("lastBuildDate",i);s&&(o.updated=new Date(s));return d(o,"author","managingEditor",i,!0),o}(t):null};var o=["url","type","lang"],s=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,r.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},i=0,r=o;i<r.length;i++){t[c=r[i]]&&(n[c]=t[c])}for(var a=0,l=s;a<l.length;a++){var c;t[c=l[a]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n})}function l(e,t){return(0,r.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,n){return void 0===n&&(n=!1),(0,i.textContent)((0,r.getElementsByTagName)(e,t,n,1)).trim()}function d(e,t,n,i,r){void 0===r&&(r=!1);var o=c(n,i,r);o&&(e[t]=o)}function u(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},6945:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3104),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===r.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>i._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:o,parentSchema:s,it:a}=e,{oneOf:l}=s;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");const c=o.propertyName;if("string"!=typeof c)throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!l)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),u=t.const("tag",i._`${n}${(0,i.getProperty)(c)}`);function h(n){const r=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(o,i.Name),r}t.if(i._`typeof ${u} == "string"`,()=>function(){const n=function(){var e;const t={},n=r(s);let i=!0;for(let t=0;t<l.length;t++){const s=l[t],a=null===(e=s.properties)||void 0===e?void 0:e[c];if("object"!=typeof a)throw new Error(`discriminator: oneOf schemas must have "properties/${c}"`);i=i&&(n||r(s)),o(a,t)}if(!i)throw new Error(`discriminator: "${c}" must be required`);return t;function r({required:e}){return Array.isArray(e)&&e.includes(c)}function o(e,t){if(e.const)a(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`);for(const n of e.enum)a(n,t)}}function a(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${c}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(i._`${u} === ${e}`),t.assign(d,h(n[e]));t.else(),e.error(!1,{discrError:r.DiscrError.Mapping,tag:u,tagName:c}),t.endIf()}(),()=>e.error(!1,{discrError:r.DiscrError.Tag,tag:u,tagName:c})),e.ok(d)}};t.default=o},6971:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const i=n(6280),r=n(5265),o=n(2363),s={message:"boolean schema is false"};function a(e,t){const{gen:n,data:r}=e,o={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,i.reportError)(o,s,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:i}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(r._`${i}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),a(e)):n.var(t,!0)}},7022:e=>{"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,r,o,s,a,l,c,d,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var p in r(s,a,l,c,d,u,h),s){var m=s[p];if(Array.isArray(m)){if(p in t.arrayKeywords)for(var f=0;f<m.length;f++)n(e,r,o,m[f],a+"/"+p+"/"+f,l,a,p,s,f)}else if(p in t.propsKeywords){if(m&&"object"==typeof m)for(var g in m)n(e,r,o,m[g],a+"/"+p+"/"+i(g),l,a,p,s,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&n(e,r,o,m,a+"/"+p,l,a,p,s)}o(s,a,l,c,d,u,h)}}function i(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7038:(e,t,n)=>{var i,r,o=n(5367),s=n(2669),a=n(7904).isArray;function l(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function c(e,t){var n;if(i.compact){if(!r[i[e+"Key"]]&&(a(i.alwaysArray)?-1!==i.alwaysArray.indexOf(i[e+"Key"]):i.alwaysArray)&&(r[i[e+"Key"]]=[]),r[i[e+"Key"]]&&!a(r[i[e+"Key"]])&&(r[i[e+"Key"]]=[r[i[e+"Key"]]]),e+"Fn"in i&&"string"==typeof t&&(t=i[e+"Fn"](t,r)),"instruction"===e&&("instructionFn"in i||"instructionNameFn"in i))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in i)t[n]=i.instructionFn(t[n],n,r);else{var o=t[n];delete t[n],t[i.instructionNameFn(n,o,r)]=o}a(r[i[e+"Key"]])?r[i[e+"Key"]].push(t):r[i[e+"Key"]]=t}else{r[i.elementsKey]||(r[i.elementsKey]=[]);var s={};if(s[i.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;s[i.nameKey]="instructionNameFn"in i?i.instructionNameFn(n,t,r):n,i.instructionHasAttributes?(s[i.attributesKey]=t[n][i.attributesKey],"instructionFn"in i&&(s[i.attributesKey]=i.instructionFn(s[i.attributesKey],n,r))):("instructionFn"in i&&(t[n]=i.instructionFn(t[n],n,r)),s[i.instructionKey]=t[n])}else e+"Fn"in i&&(t=i[e+"Fn"](t,r)),s[i[e+"Key"]]=t;i.addParent&&(s[i.parentKey]=r),r[i.elementsKey].push(s)}}function d(e){var t;if("attributesFn"in i&&e&&(e=i.attributesFn(e,r)),(i.trim||"attributeValueFn"in i||"attributeNameFn"in i||i.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(i.trim&&(e[t]=e[t].trim()),i.nativeTypeAttributes&&(e[t]=l(e[t])),"attributeValueFn"in i&&(e[t]=i.attributeValueFn(e[t],t,r)),"attributeNameFn"in i)){var n=e[t];delete e[t],e[i.attributeNameFn(t,e[t],r)]=n}return e}function u(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||i.instructionHasAttributes)){for(var n,o=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=o.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=d(t)}if("xml"===e.name.toLowerCase()){if(i.ignoreDeclaration)return;r[i.declarationKey]={},Object.keys(t).length&&(r[i.declarationKey][i.attributesKey]=t),i.addParent&&(r[i.declarationKey][i.parentKey]=r)}else{if(i.ignoreInstruction)return;i.trim&&(e.body=e.body.trim());var s={};i.instructionHasAttributes&&Object.keys(t).length?(s[e.name]={},s[e.name][i.attributesKey]=t):s[e.name]=e.body,c("instruction",s)}}function h(e,t){var n;if("object"==typeof e&&(t=e.attributes,e=e.name),t=d(t),"elementNameFn"in i&&(e=i.elementNameFn(e,r)),i.compact){var o;if(n={},!i.ignoreAttributes&&t&&Object.keys(t).length)for(o in n[i.attributesKey]={},t)t.hasOwnProperty(o)&&(n[i.attributesKey][o]=t[o]);!(e in r)&&(a(i.alwaysArray)?-1!==i.alwaysArray.indexOf(e):i.alwaysArray)&&(r[e]=[]),r[e]&&!a(r[e])&&(r[e]=[r[e]]),a(r[e])?r[e].push(n):r[e]=n}else r[i.elementsKey]||(r[i.elementsKey]=[]),(n={})[i.typeKey]="element",n[i.nameKey]=e,!i.ignoreAttributes&&t&&Object.keys(t).length&&(n[i.attributesKey]=t),i.alwaysChildren&&(n[i.elementsKey]=[]),r[i.elementsKey].push(n);n[i.parentKey]=r,r=n}function p(e){i.ignoreText||(e.trim()||i.captureSpacesBetweenElements)&&(i.trim&&(e=e.trim()),i.nativeType&&(e=l(e)),i.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",e))}function m(e){i.ignoreComment||(i.trim&&(e=e.trim()),c("comment",e))}function f(e){var t=r[i.parentKey];i.addParent||delete r[i.parentKey],r=t}function g(e){i.ignoreCdata||(i.trim&&(e=e.trim()),c("cdata",e))}function v(e){i.ignoreDoctype||(e=e.replace(/^ /,""),i.trim&&(e=e.trim()),c("doctype",e))}function y(e){e.note=e}e.exports=function(e,t){var n=o.parser(!0,{}),a={};if(r=a,i=function(e){return i=s.copyOptions(e),s.ensureFlagExists("ignoreDeclaration",i),s.ensureFlagExists("ignoreInstruction",i),s.ensureFlagExists("ignoreAttributes",i),s.ensureFlagExists("ignoreText",i),s.ensureFlagExists("ignoreComment",i),s.ensureFlagExists("ignoreCdata",i),s.ensureFlagExists("ignoreDoctype",i),s.ensureFlagExists("compact",i),s.ensureFlagExists("alwaysChildren",i),s.ensureFlagExists("addParent",i),s.ensureFlagExists("trim",i),s.ensureFlagExists("nativeType",i),s.ensureFlagExists("nativeTypeAttributes",i),s.ensureFlagExists("sanitize",i),s.ensureFlagExists("instructionHasAttributes",i),s.ensureFlagExists("captureSpacesBetweenElements",i),s.ensureAlwaysArrayExists(i),s.ensureKeyExists("declaration",i),s.ensureKeyExists("instruction",i),s.ensureKeyExists("attributes",i),s.ensureKeyExists("text",i),s.ensureKeyExists("comment",i),s.ensureKeyExists("cdata",i),s.ensureKeyExists("doctype",i),s.ensureKeyExists("type",i),s.ensureKeyExists("name",i),s.ensureKeyExists("elements",i),s.ensureKeyExists("parent",i),s.checkFnExists("doctype",i),s.checkFnExists("instruction",i),s.checkFnExists("cdata",i),s.checkFnExists("comment",i),s.checkFnExists("text",i),s.checkFnExists("instructionName",i),s.checkFnExists("elementName",i),s.checkFnExists("attributeName",i),s.checkFnExists("attributeValue",i),s.checkFnExists("attributes",i),i}(t),n.opt={strictEntities:!0},n.onopentag=h,n.ontext=p,n.oncomment=m,n.onclosetag=f,n.onerror=y,n.oncdata=g,n.ondoctype=v,n.onprocessinginstruction=u,n.write(e).close(),a[i.elementsKey]){var l=a[i.elementsKey];delete a[i.elementsKey],a[i.elementsKey]=l,delete a.text}return a}},7045:function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,i){var r=e;switch(n){case"s":return i||t?"néhány másodperc":"néhány másodperce";case"ss":return r+(i||t)?" másodperc":" másodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return r+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" óra":" órája");case"hh":return r+(i||t?" óra":" órája");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return r+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hónap":" hónapja");case"MM":return r+(i||t?" hónap":" hónapja");case"y":return"egy"+(i||t?" év":" éve");case"yy":return r+(i||t?" év":" éve")}return""}function i(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},7064:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function i(e,i,r){return e+" "+n(t[r],e,i)}function r(e,i,r){return n(t[r],e,i)}function o(e,t){return t?"dažas sekundes":"dažām sekundēm"}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:o,ss:i,m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},7078:(e,t,n)=>{"use strict";n.d(t,{I:()=>r.A,i:()=>i});var i,r=n(2464);!function(e){e[e.directional=0]="directional",e[e.point=1]="point",e[e.spot=2]="spot",e[e.ambient=3]="ambient",e[e.hemisphere=4]="hemisphere",e[e.rect=5]="rect"}(i||(i={}))},7080:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(3681))},7083:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(3681))},7109:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var i=n(4640);class r extends i.DXC{constructor(e){super(void 0,new i.mrM({color:4294967295,vertexColors:!0})),this.update(e)}set opacity(e){this.material.opacity=e,this.material.transparent=e<1,this.material.needsUpdate=!0}update(e){this.geometry&&this.geometry.dispose(),this.geometry=r.generate(e)}static generate(e){const t=new i.Q1f(e.mainColor),n=new i.Q1f(e.subColor),r=new i.Q1f(10894154),o=new i.Q1f(7315996),s=new i.Q1f(3113953),a=e.mainDivisions*e.subDivisions,l=e.size/a,c=.5*e.size,d=[],u=[];for(let i=0,o=0,h=-c;i<=a;++i,h+=l)if(d.push(-c,0,h,c,0,h),d.push(h,0,-c,h,0,c),i==a/2&&e.axesEnabled)r.toArray(u,o),o+=3,r.toArray(u,o),o+=3,s.toArray(u,o),o+=3,s.toArray(u,o),o+=3;else{const r=i%e.subDivisions===0?t:n;r.toArray(u,o),o+=3,r.toArray(u,o),o+=3,r.toArray(u,o),o+=3,r.toArray(u,o),o+=3}e.axesEnabled&&(d.push(0,-c,0,0,c,0),u.push(...o.toArray()),u.push(...o.toArray()));const h=new i.LoY;return h.setAttribute("position",new i.qtW(d,3)),h.setAttribute("color",new i.qtW(u,3)),h}}var o=n(3423),s=n(3074),a=n(3675),l=n(8172),c=n(4340);const d=new i.Pq0,u=new i.Pq0,h=(new i.kn4).makeRotationX(.5*Math.PI),p=new i.kn4;class m extends s.Ay{constructor(){super(...arguments),this.tape=null,this.ins=this.addInputs(m.gridIns),this.outs=this.addOutputs(m.gridOuts),this._lastViewport=null,this._gridProps={size:20,mainDivisions:2,subDivisions:10,mainColor:new i.Q1f(.5,.7,.8),subColor:new i.Q1f(.25,.35,.4),axesEnabled:!1}}get settingProperties(){return[this.ins.visible,this.ins.color,this.ins.opacity]}get snapshotProperties(){return[this.ins.opacity]}get grid(){return this.object3D}create(){this.ins.pickable.setValue(!1),this.ins.visible.setValue(!1),this.tape=this.node.createComponent(c.A),this.tape.ins.startPosition.setValue([0,0,0]),this.tape.ins.endPosition.setValue([0,0,0]),this.tape.ins.visible.setValue(!1),this.tape.addTag("no_settings"),super.create()}activate(){this.getGraphComponent(l.A).outs.boundingBox.linkTo(this.ins.boundingBox)}deactivate(){this.getGraphComponent(l.A).outs.boundingBox.unlinkTo(this.ins.boundingBox)}update(){const e=this.ins;if(e.color.changed||e.boundingBox.changed||e.axesEnabled.changed){const t=this._gridProps;if(e.color.changed){const n=t.mainColor,i=t.subColor;n.fromArray(e.color.value),i.r=.5*n.r,i.g=.5*n.g,i.b=.5*n.b}if(e.boundingBox.changed){const e=this.getGraphComponent(l.A),n=e.outs.boundingBox.value,i=e.ins.units.value;n.getSize(d);let r=Math.max(d.x,d.y,d.z),o=1;for(;r/o>5;)o*=10;r=Math.ceil(r/o)*o*2,t.size=r,this.outs.size.setValue(r),this.outs.units.setValue(i),t.mainDivisions=r/o,t.subDivisions=10,u.set(0,n.min.y,0),this.tape.ins.startPosition.setValue([-r/2,n.min.y+r/100,-r/2-r/100]),this.tape.ins.endPosition.setValue([-r/2+r/t.mainDivisions,n.min.y+r/100,-r/2-r/100])}t.axesEnabled=e.axesEnabled.value,this.object3D?this.grid.update(t):this.object3D=new r(t),e.boundingBox.changed&&(this.grid.position.copy(u),this.grid.updateMatrix())}return e.visible.changed&&(this.grid.visible=e.visible.value,this.tape.ins.visible.setValue(this.grid.visible&&e.labelEnabled.value)),e.opacity.changed&&(this.grid.opacity=e.opacity.value),e.labelEnabled.changed&&this.tape.ins.visible.setValue(this.grid.visible&&e.labelEnabled.value),!0}preRender(e){const t=e.viewport,n=this.object3D;if(t!==this._lastViewport){this._lastViewport=t;const i=e.viewport.camera;i?(0!=this._gridProps.axesEnabled&&(this._gridProps.axesEnabled=!1,this.grid.update(this._gridProps)),n.matrix.extractRotation(i.matrixWorld).multiply(h)):(n.matrix.extractRotation(p),this._gridProps.axesEnabled=!0,this.grid.update(this._gridProps)),n.updateMatrixWorld(!0)}}postRender(e){this.object3D.updateMatrix()}fromData(e){e=e||{},this.ins.copyValues({visible:!!e.visible,color:e.color||[.5,.7,.8]})}toData(){const e=this.ins;return{visible:e.visible.cloneValue(),color:e.color.cloneValue()}}}m.typeName="CVGrid",m.text="Grid",m.icon="",m.gridIns={color:o.gK.ColorRGB("Grid.Color",[.5,.7,.8]),opacity:o.gK.Percent("Grid.Opacity",1),boundingBox:o.gK.Object("Scene.BoundingBox",i.NRn),labelEnabled:o.gK.Boolean("Grid.LabelEnabled",!0),axesEnabled:o.gK.Boolean("Grid.AxesEnabled",!1)},m.gridOuts={size:o.gK.Number("Size"),units:o.gK.Enum("Units",a.uj)}},7111:(e,t,n)=>{"use strict";var i=n(6116).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(r?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},7114:(e,t,n)=>{"use strict";let i=n(6613),r=n(6748);class o extends i{get selectors(){return r.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,n=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(n)}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}}e.exports=o,o.default=o,i.registerRule(o)},7129:(e,t,n)=>{"use strict";let i=n(482);class r{get content(){return this.css}constructor(e,t,n){this.processor=e,this.messages=[],this.root=t,this.opts=n,this.css="",this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new i(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter(e=>"warning"===e.type)}}e.exports=r,r.default=r},7130:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],l=o[1],c=new r(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),d=0,u=l>0?s-4:s;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[d++]=255&t);1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,o=[],s=16383,a=0,l=i-r;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));1===r?(t=e[i-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function c(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(l(i));return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7134:(e,t,n)=>{"use strict";e.exports=d;var i=n(6116).F,r=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(882);function c(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,n){h(e,t,n)})}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(6854)(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,n){n(new r("_transform()"))},d.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},7137:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(3074),r=n(4640);class o extends r.eaF{constructor(){super(new r.bdM(2,2,1,1),new r._4j({transparent:!0})),this.geometry.rotateX(-90*r.cj9.DEG2RAD),this.material.onBeforeCompile=e=>{e.vertexShader=e.vertexShader.replace("#include <uv_pars_vertex>","varying vec2 vUv;\n                 uniform mat3 uvTransform;"),e.vertexShader=e.vertexShader.replace("#include <uv_vertex>","#include <uv_vertex>\n                 vUv = ( vec3( uv, 1 ) ).xy;"),e.fragmentShader=e.fragmentShader.replace("#include <uv_pars_fragment>","varying vec2 vUv;"),e.fragmentShader=e.fragmentShader.replace("#include <opaque_fragment>","#include <opaque_fragment>\n                 \n                 vec2 coords = vUv * 2.0 - 1.0;\n                 float f = dot(coords, coords);\n \t            gl_FragColor = vec4(outgoingLight, mix(diffuseColor.a, 0.0, f));\n                 \n")},this.receiveShadow=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}class s extends i.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(s.floorIns),this.object3D=new o}get floor(){return this.object3D}update(e){super.update(e);const t=this.ins,n=this.floor;return(t.position.changed||t.radius.changed)&&(n.position.fromArray(t.position.value),n.scale.setScalar(t.radius.value),n.updateMatrix()),t.color.changed&&n.material.color.fromArray(t.color.value),t.opacity.changed&&(n.material.opacity=t.opacity.value),!0}dispose(){this.floor.dispose(),super.dispose()}}s.typeName="CFloor",s.floorIns={position:i.gK.Vector3("Floor.Position",[0,-25,0]),radius:i.gK.Number("Floor.Radius",50),color:i.gK.ColorRGB("Floor.Color",[.6,.75,.8]),opacity:i.gK.Percent("Floor.Opacity",.5),castShadow:i.gK.Boolean("Shadow.Cast"),receiveShadow:i.gK.Boolean("Shadow.Receive")};var a=n(3423),l=n(8172);const c=new r.Pq0;class d extends s{get settingProperties(){return[this.ins.visible,this.ins.position,this.ins.radius,this.ins.color,this.ins.opacity,this.ins.receiveShadow,this.addIns.autoSize]}get snapshotProperties(){return[this.ins.opacity]}get sceneNode(){return this.getSystemComponent(l.A)}constructor(e,t){super(e,t),this.addIns=this.addInputs(d.floorAddIns),this.ins.visible.setValue(!1),this.ins.receiveShadow.setValue(!0),this.floor.renderOrder=-1}create(){super.create(),this.sceneNode.outs.boundingBox.on("value",this.recalculateSize,this)}dispose(){this.sceneNode.outs.boundingBox.off("value",this.recalculateSize,this),super.dispose()}update(e){const t=this.addIns;return t.autoSize.changed&&t.autoSize.value&&this.recalculateSize(),super.update(e),!0}recalculateSize(){const{addIns:e}=this;if(e.autoSize.value){const e=this.sceneNode.outs.boundingBox.value;e.getSize(c);const t=Math.max(c.x,c.y,c.z),{min:n,max:i}=e;this.ins.radius.setValue(t),this.ins.position.setValue([(n.x+i.x)/2,n.y,(n.z+i.z)/2])}}fromData(e){e=e||{},this.ins.copyValues({visible:!!e.visible,position:e.position||[0,-25,0],radius:void 0!==e.size?e.size:50,color:e.color||[.6,.75,.8],opacity:void 0!==e.opacity?e.opacity:.5,receiveShadow:!!e.receiveShadow,autoSize:void 0===e.autoSize||e.autoSize})}toData(){const e=this.ins;return{visible:e.visible.value,position:e.position.cloneValue(),size:e.radius.value,color:e.color.cloneValue(),opacity:e.opacity.value,receiveShadow:e.receiveShadow.value,autoSize:this.addIns.autoSize.value}}}d.typeName="CVFloor",d.text="Floor",d.icon="",d.floorAddIns={autoSize:a.gK.Boolean("Floor.AutoSize",!0)}},7145:function(e,t,n){!function(e){"use strict";function t(e,t,n){var i=e+" ";switch(n){case"ss":return i+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},7166:function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(3681))},7196:function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){var n=e%10,i=e>=100?100:null;return e+(t[e]||t[n]||t[i])},week:{dow:1,doy:7}})}(n(3681))},7229:(e,t,n)=>{"use strict";n.d(t,{AG:()=>r,zv:()=>o});const i=new(n(4640).Pq0)(1,0,0);function r(e){var t;null!==(t=e.defines)&&void 0!==t||(e.defines={}),e.defines.OBJECTSPACE_NORMALMAP=!1,e.defines.MODE_NORMALS=!1,e.defines.MODE_XRAY=!1,e.defines.CUT_PLANE=!1,e.defines.USE_ZONEMAP=!1,e.defines.OVERLAY_ALPHA=!1}function o(e){const t={cutPlaneColor:{value:i},zoneMap:{value:null}};e.onBeforeCompile=n=>{n.vertexShader=function(e){return(e="// Zone map support\n         #if defined(USE_ZONEMAP)\n             varying vec2 vZoneUv;\n         #endif\n         \n         #ifdef MODE_XRAY\n             varying float vIntensity;\n         #endif\n         \n".concat(e)).slice(0,e.lastIndexOf("}")).concat("\n         #ifdef MODE_NORMALS\n             vNormal = normal;\n         #endif\n         \n         #ifdef MODE_XRAY\n             vIntensity = pow(abs(1.0 - abs(dot(vNormal, vec3(0.0, 0.0, 1.0)))), 3.0);\n         #endif\n         \n         // Zone map support\n         #if defined(USE_ZONEMAP)\n             #if defined(USE_MAP)\n                 vZoneUv = (mapTransform * vec3(vMapUv, 1)).xy;\n             #else\n                 vZoneUv = uv;\n             #endif\n         #endif\n         }")}(n.vertexShader),n.fragmentShader=function(e){return(e=(e=(e=e.replace("void main() {","// Zone map support\n         #if defined(USE_ZONEMAP)\n             varying vec2 vZoneUv;\n             uniform sampler2D zoneMap;\n         #endif\n         \n         #ifdef MODE_XRAY\n             varying float vIntensity;\n         #endif\n         \n         #ifdef CUT_PLANE\n             uniform vec3 cutPlaneColor;\n         #endif\n         \n         void main() {")).replace("#include <opaque_fragment>","#include <opaque_fragment>\n         \n         #ifdef USE_ZONEMAP\n             vec4 zoneColor = texture2D(zoneMap, vZoneUv);\n         \n             #ifdef OVERLAY_ALPHA\n                 gl_FragColor += mix(vec4(0.0, 0.0, 0.0, 1.0), vec4(zoneColor.rgb, 1.0), zoneColor.a);\n             #endif\n             #ifndef OVERLAY_ALPHA\n                 gl_FragColor = mix(gl_FragColor, vec4(zoneColor.rgb, 1.0), zoneColor.a);\n             #endif\n         #endif\n         \n")).slice(0,e.lastIndexOf("}")).concat("\n         #ifdef CUT_PLANE\n         if (!gl_FrontFacing) {\n             gl_FragColor = vec4(cutPlaneColor.rgb, 1.0);\n         }\n         #endif\n         \n         #ifdef MODE_NORMALS\n             gl_FragColor = vec4(vec3(normal * 0.5 + 0.5), 1.0);\n         #endif\n         \n         #ifdef MODE_XRAY\n             gl_FragColor = vec4(vec3(0.4, 0.7, 1.0) * vIntensity, 1.0);\n         #endif\n         }")).replace("#include <aomap_fragment>","#include <aomap_fragment>\n         \n         #ifdef USE_AOMAP\n             if(length(reflectedLight.indirectDiffuse) == 0.0) {\n                 reflectedLight.directDiffuse *= ambientOcclusion;\n             }\n         #endif\n         \n")}(n.fragmentShader),n.uniforms.cutPlaneColor=t.cutPlaneColor,n.uniforms.zoneMap=t.zoneMap,e.userData.shader=n}}},7235:function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},7239:(e,t,n)=>{function i(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},7249:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r=e+" ";switch(n){case"s":return t||i?"nekaj sekund":"nekaj sekundami";case"ss":return r+=1===e?t?"sekundo":"sekundi":2===e?t||i?"sekundi":"sekundah":e<5?t||i?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return r+=1===e?t?"minuta":"minuto":2===e?t||i?"minuti":"minutama":e<5?t||i?"minute":"minutami":t||i?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return r+=1===e?t?"ura":"uro":2===e?t||i?"uri":"urama":e<5?t||i?"ure":"urami":t||i?"ur":"urami";case"d":return t||i?"en dan":"enim dnem";case"dd":return r+=1===e?t||i?"dan":"dnem":2===e?t||i?"dni":"dnevoma":t||i?"dni":"dnevi";case"M":return t||i?"en mesec":"enim mesecem";case"MM":return r+=1===e?t||i?"mesec":"mesecem":2===e?t||i?"meseca":"mesecema":e<5?t||i?"mesece":"meseci":t||i?"mesecev":"meseci";case"y":return t||i?"eno leto":"enim letom";case"yy":return r+=1===e?t||i?"leto":"letom":2===e?t||i?"leti":"letoma":e<5?t||i?"leta":"leti":t||i?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},7264:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},7280:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e){this.isEnabled=!0,this._isDragging=!1,this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this.target=e,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),e.addEventListener("pointercancel",this.onPointerUp)}get isDragging(){return this._isDragging}get startX(){return this._startX}get startY(){return this._startY}onPointerDown(e){e.isPrimary&&this.isEnabled&&(this._isDragging=!0,this._startX=this._lastX=e.clientX,this._startY=this._lastY=e.clientY,this.target.setPointerCapture(e.pointerId),this.target.dragStart(e)),e.stopPropagation(),e.preventDefault()}onPointerMove(e){if(e.isPrimary&&this._isDragging){const t=e.clientX-this._lastX;this._lastX=e.clientX;const n=e.clientY-this._lastY;this._lastY=e.clientY,this.target.dragMove(e,t,n)}e.stopPropagation(),e.preventDefault()}onPointerUp(e){this._isDragging&&e.isPrimary&&(this.target.dragEnd(e),this.target.releasePointerCapture(e.pointerId),this._isDragging=!1),e.stopPropagation(),e.preventDefault()}}},7297:(e,t,n)=>{"use strict";n.d(t,{Jb:()=>a,UH:()=>i,a9:()=>r,iO:()=>o,oo:()=>s,uj:()=>l.uj});var i,r,o,s,a,l=n(3675);!function(e){e[e.Image2D=0]="Image2D",e[e.Web3D=1]="Web3D",e[e.App3D=2]="App3D",e[e.iOSApp3D=3]="iOSApp3D",e[e.Print3D=4]="Print3D",e[e.Editorial3D=5]="Editorial3D"}(i||(i={})),function(e){e[e.Thumb=0]="Thumb",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.Highest=4]="Highest",e[e.AR=5]="AR"}(r||(r={})),function(e){e[e.Model=0]="Model",e[e.Geometry=1]="Geometry",e[e.Image=2]="Image",e[e.Texture=3]="Texture",e[e.Points=4]="Points",e[e.Volume=5]="Volume"}(o||(o={})),function(e){e[e.Color=0]="Color",e[e.Emissive=1]="Emissive",e[e.Occlusion=2]="Occlusion",e[e.Normal=3]="Normal",e[e.MetallicRoughness=4]="MetallicRoughness",e[e.Zone=5]="Zone"}(s||(s={})),function(e){e[e.Front=0]="Front",e[e.Back=1]="Back",e[e.Double=2]="Double"}(a||(a={}))},7307:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return i?r[n][0]:r[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){return"D"===t?e+"er":e},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(3681))},7322:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),i=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],r=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},7338:function(e,t,n){!function(e){"use strict";var t=["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],n=["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],i=["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],r=["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],o=["Do","Lu","Má","Cé","Dé","A","Sa"];e.defineLocale("ga",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(3681))},7350:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(449),r=n(3331);class o{constructor(){this.visited={},this.visiting={},this.sorted=[]}sort(e){for(let t=0,n=e.length;t<n;++t)this.visit(e[t]);const t=this.sorted;return this.visited={},this.visiting={},this.sorted=[],t}visit(e){const t=this.visited,n=this.visiting;if(t[e.id]||n[e.id])return;n[e.id]=!0;const i=e.outs.properties.concat(e.ins.properties);for(let e=0,t=i.length;e<t;++e){const t=i[e].outLinks;for(let e=0,n=t.length;e<n;++e){const n=t[e].destination.group,i=n.properties;for(let e=0,t=i.length;e<t;++e){const t=i[e].outLinks;for(let e=0,n=t.length;e<n;++e){const n=t[e].destination.group;this.visit(n.linkable)}}this.visit(n.linkable)}}n[e.id]=void 0,t[e.id]=!0,this.sorted.unshift(e)}}var s=n(3423),a=n(1860),l=n(3627);class c extends r.A{constructor(e,t){super({knownEvents:!1}),this.nodes=new l.A(a.A),this.components=new l.A(s.Ay),this.roots=[],this._sorter=new o,this._sortRequested=!0,this._sortedList=null,this._tockList=[],this._isActive=!1,this.system=e,this.parent=t}get isActive(){return this._isActive}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}hasComponent(e){return this.components.has(e)}getMainComponent(e,t=!1){return this.system.graph.components.get(e,t)}getMainComponents(e){return this.system.graph.components.getArray(e)}getMainComponentsByTag(e){return this.system.graph.components.getByTag(e)}hasMainComponent(e){return this.system.graph.components.has(e)}getSystemComponent(e,t=!1){return this.system.components.get(e,t)}getSystemComponents(e){return this.system.components.getArray(e)}getSystemComponentsByTag(e){return this.system.components.getByTag(e)}hasSystemComponent(e){return this.system.components.has(e)}getComponentById(e){return this.system.components.getById(e)}getNode(e,t=!1){return this.nodes.get(e,t)}getNodes(e){return this.nodes.getArray(e)}getNodesByTag(e){return this.nodes.getByTag(e)}hasNode(e){return this.nodes.has(e)}getMainNode(e,t=!1){return this.system.graph.nodes.get(e,t)}getMainNodes(e){return this.system.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.system.graph.nodes.getByTag(e)}hasMainNode(e){return this.system.graph.nodes.has(e)}getSystemNode(e,t=!1){return this.system.nodes.get(e,t)}getSystemNodes(e){return this.system.nodes.getArray(e)}getSystemNodesByTag(e){return this.system.nodes.getByTag(e)}hasSystemNode(e){return this.system.nodes.has(e)}getNodeById(e){return this.system.nodes.getById(e)}activate(){if(this._isActive)return;this._isActive=!0,this._sortRequested&&(this._sortRequested=!1,this.sort());const e=this._sortedList;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.activate&&n.activate()}}deactivate(){if(!this._isActive)return;this._isActive=!1;const e=this._sortedList;for(let t=0,n=e.length;t<n;++t){const n=e[t];n.deactivate&&n.deactivate()}}tick(e){if(!this._isActive)return;this._sortRequested&&(this._sortRequested=!1,this.sort());const t=this._sortedList;let n=!1;for(let i=0,r=t.length;i<r;++i){const r=t[i];r.updated=!1,r.changed?(r.update&&r.update(e)&&(r.updated=!0),r.tick&&r.tick(e)&&(r.updated=!0),r.resetChanged()):r.tick&&r.tick(e)&&(r.updated=!0),r.updated&&(n=!0,r.emit("update"))}return n}tock(e){if(!this._isActive)return;const t=this._tockList;let n=!1;for(let i=0,r=t.length;i<r;++i)n=t[i].tock(e)||n;return n}clear(){const e=this.nodes.cloneArray().reverse();for(let t=0,n=e.length;t<n;++t)e[t].dispose();if(this.nodes.length>0)throw new Error("graph not empty")}requestSort(){this._sortRequested=!0}sort(){this._sortedList=this._sorter.sort(this.components.getArray());this.parent&&(this.parent.name||this.parent.typeName)}createCustomNode(e,t,n){const r=this.system.registry.getType(e);if(!r)throw new Error(`node type '${a.A.getTypeName(e)}' not registered`);const o=new r(this,n||(0,i.A)(12,this.system.nodes.getDictionary()));return o.create(),t&&(o.name=t),n||(o.createComponents(),o.unlock()),o}createNode(e,t){const n=new a.A(this,t||(0,i.A)(12,this.system.nodes.getDictionary()));return n.create(),e&&(n.name=e),n.unlock(),n}findNodeByName(e,t){const n=this.nodes.getArray(t);for(let t=0,i=n.length;t<i;++t)if(n[t].name===e)return n[t]}findRootNodes(e){const t=this.nodes.getArray(e),n=[];for(let e=0,i=t.length;e<i;++e){const i=t[e].components.get("CHierarchy",!0);i&&i.parent||n.push(t[e])}return n}toString(e=!1){const t=this.nodes.getArray(),n=this.components.count(),i=`Graph - ${t.length} nodes, ${n} components.`;return e?i+"\n"+t.map(e=>e.toString(!0)).join("\n"):i}dump(e=""){console.log(e+"%cGraph","color: red");this.findRootNodes().forEach(t=>t.dump(e+"  "))}toJSON(){const e={},t=[],n=this.nodes.getArray();for(let e=0,i=n.length;e<i;++e){const i=n[e],r=this.nodeToJSON(i);r.type=i.typeName,r.id=i.id,i.name&&(r.name=i.name),t.push(r)}return t.length>0&&(e.nodes=t),e}fromJSON(e){e.nodes&&(e.nodes.forEach(e=>{this.createCustomNode(e.type,e.name,e.id).fromJSON(e)}),e.nodes.forEach(e=>{this.nodes.getById(e.id).referencesFromJSON(e)}))}nodeToJSON(e){return e.toJSON()}_addNode(e){this.nodes.add(e),this.system._addNode(e)}_removeNode(e){this.system._removeNode(e),this.nodes.remove(e)}_addNodeTag(e,t){this.nodes.addByTag(e,t),this.system._addNodeTag(e,t)}_removeNodeTag(e,t){this.system._removeNodeTag(e,t),this.nodes.removeByTag(e,t)}_addComponent(e){if(e.isGraphSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per graph`);this.components.add(e),this.system._addComponent(e),e.tock&&this._tockList.push(e),this._sortRequested=!0}_removeComponent(e){this.system._removeComponent(e),this.components.remove(e),e.tock&&this._tockList.splice(this._tockList.indexOf(e),1),this._sortRequested=!0}_addComponentTag(e,t){this.components.addByTag(e,t),this.system._addComponentTag(e,t)}_removeComponentTag(e,t){this.system._removeComponentTag(e,t),this.components.removeByTag(e,t)}_addRoot(e){this.roots.push(e),this.parent&&this.parent.onAddInnerRoot(e)}_removeRoot(e){this.parent&&this.parent.onRemoveInnerRoot(e),this.roots.splice(this.roots.indexOf(e),1)}}},7405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const i=n(5265),r=n(3151),o=n(6241);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const r=1===t?"property":"properties";return i.str`must have ${r} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:r}})=>i._`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const i in e){if("__proto__"===i)continue;(Array.isArray(e[i])?t:n)[i]=e[i]}return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:r,it:s}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const d=(0,o.propertyInData)(n,r,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?n.if(d,()=>{for(const t of c)(0,o.checkReportMissingProp)(e,t)}):(n.if(i._`${d} && (${(0,o.checkMissingProp)(e,c,a)})`),(0,o.reportMissingProp)(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:i,keyword:s,it:a}=e,l=n.name("valid");for(const c in t)(0,r.alwaysValidSchema)(a,t[c])||(n.if((0,o.propertyInData)(n,i,c,a.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>n.var(l,!0)),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=s},7430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1365);i.code='require("ajv/dist/runtime/equal").default',t.default=i},7432:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(3681))},7437:function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(3681))},7482:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(4640),r=n(2464);class o extends r.A{constructor(e,t){super(e,t),this.object3D=new i.$p8}get light(){return this.object3D}}o.typeName="CAmbientLight"},7504:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var i=n(1860),r=n(9309),o=n(3889),s=n(3644),a=n(319),l=n(161),c=n(3600),d=n(8604),u=n(2791);class h extends i.A{get pulse(){return this.components.get(r.A)}get renderer(){return this.components.get(o.A)}get fullscreen(){return this.components.get(a.A)}get selection(){return this.components.get(s.A)}get assetManager(){return this.components.get(l.A)}get assetReader(){return this.components.get(c.A)}get analytics(){return this.components.get(d.A)}get arManager(){return this.components.get(u.A)}createComponents(){this.createComponent(r.A),this.createComponent(o.A),this.createComponent(a.A),this.createComponent(l.A),this.createComponent(c.A),this.createComponent(d.A),this.createComponent(u.A);this.createComponent(s.A).ins.viewportBrackets.setValue(!1)}}h.typeName="NVEngine"},7550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=i.operators,o={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},s={message:({keyword:e,schemaCode:t})=>i.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(i._`${n} ${o[t].fail} ${r} || isNaN(${n})`)}};t.default=a},7555:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,i=(o=String).prototype,i.isPrototypeOf(n)||(null===(s=r.constructor)||void 0===s?void 0:s.name)===o.name)?"string":t;var n,i;var r,o,s})(t)===e,n=t("string"),i=t("object"),r=t("array"),o=e=>!(e=>null==e)(e);class s{constructor(e,t){this.tag=e,this.value=t}static some(e){return new s(!0,e)}static none(){return s.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?s.some(e(this.value)):s.none()}bind(e){return this.tag?e(this.value):s.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:s.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return o(e)?s.some(e):s.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}s.singletonNone=new s(!1);const a=Array.prototype.push,l=(e,t)=>{for(let n=0,i=e.length;n<i;n++){t(e[n],n)}},c=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!r(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);a.apply(t,e[n])}return t},d=Object.keys,u=Object.hasOwnProperty,h=(e,t)=>p(e,t)?s.from(e[t]):s.none(),p=(e,t)=>u.call(e,t),m=e=>t=>t.options.get(e),f=m("audio_template_callback"),g=m("video_template_callback"),v=m("iframe_template_callback"),y=m("media_live_embeds"),b=m("media_filter_html"),A=m("media_url_resolver"),_=m("media_alt_source"),w=m("media_poster"),x=m("media_dimensions");var C=tinymce.util.Tools.resolve("tinymce.util.Tools"),E=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.html.DomParser");const S=E.DOM,T=e=>e.replace(/px$/,""),k=e=>{const t=e.attr("style"),n=t?S.parseStyle(t):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:h(n,"max-width").map(T).getOr(""),height:h(n,"max-height").map(T).getOr("")}},L=(e,t)=>{let n={};for(let i=M({validate:!1,forced_root_block:!1},t).parse(e);i;i=i.walk())if(1===i.type){const e=i.name;if(i.attr("data-ephox-embed-iri")){n=k(i);break}n.source||"param"!==e||(n.source=i.attr("movie")),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(n.type||(n.type=e),n=C.extend(i.attributes.map,n)),"source"===e&&(n.source?n.altsource||(n.altsource=i.attr("src")):n.source=i.attr("src")),"img"!==e||n.poster||(n.poster=i.attr("src"))}return n.source=n.source||n.src||"",n.altsource=n.altsource||"",n.poster=n.poster||"",n},D=e=>{var t;const n=null!==(t=e.toLowerCase().split(".").pop())&&void 0!==t?t:"";return h({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n).getOr("")};var I=tinymce.util.Tools.resolve("tinymce.html.Node"),R=tinymce.util.Tools.resolve("tinymce.html.Serializer");const O=(e,t={})=>M({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...t},e),P=E.DOM,B=e=>/^[0-9.]+$/.test(e)?e+"px":e,N=(e,t)=>{const n=t.attr("style"),i=n?P.parseStyle(n):{};o(e.width)&&(i["max-width"]=B(e.width)),o(e.height)&&(i["max-height"]=B(e.height)),t.attr("style",P.serializeStyle(i))},U=["source","altsource"],F=(e,t,n,i)=>{let r=0,o=0;const s=O(i);s.addNodeFilter("source",e=>r=e.length);const a=s.parse(e);for(let e=a;e;e=e.walk())if(1===e.type){const i=e.name;if(e.attr("data-ephox-embed-iri")){N(t,e);break}switch(i){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&(e.attr("width",t.width),e.attr("height",t.height))}if(n)switch(i){case"video":e.attr("poster",t.poster),e.attr("src",null);for(let n=r;n<2;n++)if(t[U[n]]){const i=new I("source",1);i.attr("src",t[U[n]]),i.attr("type",t[U[n]+"mime"]||null),e.append(i)}break;case"iframe":e.attr("src",t.source);break;case"object":const n=e.getAll("img").length>0;if(t.poster&&!n){e.attr("src",t.poster);const n=new I("img",1);n.attr("src",t.poster),n.attr("width",t.width),n.attr("height",t.height),e.append(n)}break;case"source":if(o<2&&(e.attr("src",t[U[o]]),e.attr("type",t[U[o]+"mime"]||null),!t[U[o]])){e.remove();continue}o++;break;case"img":t.poster||e.remove()}}return R({},i).serialize(a)},z=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],H=(e,t)=>{const n=(e=>{const t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"})(t),i=e.regex.exec(t);let r=n+e.url;if(o(i))for(let e=0;e<i.length;e++)r=r.replace("$"+e,()=>i[e]?i[e]:"");return r.replace(/\?$/,"")},j=e=>{const t=z.filter(t=>t.regex.test(e));return t.length>0?C.extend({},t[0],{url:H(t[0],e)}):null},V=(e,t)=>{var n;const i=C.extend({},t);if(!i.source&&(C.extend(i,L(null!==(n=i.embed)&&void 0!==n?n:"",e.schema)),!i.source))return"";i.altsource||(i.altsource=""),i.poster||(i.poster=""),i.source=e.convertURL(i.source,"source"),i.altsource=e.convertURL(i.altsource,"source"),i.sourcemime=D(i.source),i.altsourcemime=D(i.altsource),i.poster=e.convertURL(i.poster,"poster");const r=j(i.source);if(r&&(i.source=r.url,i.type=r.type,i.allowfullscreen=r.allowFullscreen,i.width=i.width||String(r.w),i.height=i.height||String(r.h)),i.embed)return F(i.embed,i,!0,e.schema);{const t=f(e),n=g(e),r=v(e);return i.width=i.width||"300",i.height=i.height||"150",C.each(i,(t,n)=>{i[n]=e.dom.encode(""+t)}),"iframe"===i.type?((e,t)=>{if(t)return t(e);{const t=e.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}})(i,r):"application/x-shockwave-flash"===i.sourcemime?(e=>{let t='<object data="'+e.source+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>",t})(i):-1!==i.sourcemime.indexOf("audio")?((e,t)=>t?t(e):'<audio controls="controls" src="'+e.source+'">'+(e.altsource?'\n<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>")(i,t):((e,t)=>t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>")(i,n)}},Y=e=>e.hasAttribute("data-mce-object")||e.hasAttribute("data-ephox-embed-iri"),G={},Q=e=>t=>V(e,t),$=(e,t)=>{const n=A(e);return n?((e,t,n)=>new Promise((i,r)=>{const o=n=>(n.html&&(G[e.source]=n),i({url:e.source,html:n.html?n.html:t(e)}));G[e.source]?o(G[e.source]):n({url:e.source},o,r)}))(t,Q(e),n):((e,t)=>Promise.resolve({html:t(e),url:e.source}))(t,Q(e))},q=(e,t)=>{const n={};return h(e,"dimensions").each(e=>{l(["width","height"],i=>{h(t,i).orThunk(()=>h(e,i)).each(e=>n[i]=e)})}),n},W=(e,t)=>{const n=t&&"dimensions"!==t?((e,t)=>h(t,e).bind(e=>h(e,"meta")))(t,e).getOr({}):{},r=((e,t,n)=>r=>{const o=()=>h(e,r),a=()=>h(t,r),l=e=>h(e,"value").bind(e=>e.length>0?s.some(e):s.none());return{[r]:(r===n?o().bind(e=>i(e)?l(e).orThunk(a):a().orThunk(()=>s.from(e))):a().orThunk(()=>o().bind(e=>i(e)?l(e):s.from(e)))).getOr("")}})(e,n,t);return{...r("source"),...r("altsource"),...r("poster"),...r("embed"),...q(e,n)}},K=e=>{const t={...e,source:{value:h(e,"source").getOr("")},altsource:{value:h(e,"altsource").getOr("")},poster:{value:h(e,"poster").getOr("")}};return l(["width","height"],n=>{h(e,n).each(e=>{const i=t.dimensions||{};i[n]=e,t.dimensions=i})}),t},Z=e=>t=>{const n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})},X=(e,t)=>i=>{if(n(i.url)&&i.url.trim().length>0){const n=i.html,r={...L(n,t.schema),source:i.url,embed:n};e.setData(K(r))}},J=(e,t)=>{const n=e.dom.select("*[data-mce-object]");e.insertContent(t),((e,t)=>{const n=e.dom.select("*[data-mce-object]");for(let e=0;e<t.length;e++)for(let i=n.length-1;i>=0;i--)t[e]===n[i]&&n.splice(i,1);e.selection.select(n[0])})(e,n),e.nodeChanged()},ee=(e,t)=>o(t)&&"ephox-embed-iri"===t&&o(j(e)),te=(e,t)=>((e,t)=>e.width!==t.width||e.height!==t.height)(e,t)&&ee(t.source,e.type),ne=(e,t,n)=>{var i,r;t.embed=te(e,t)&&x(n)?V(n,{...t,embed:""}):F(null!==(i=t.embed)&&void 0!==i?i:"",t,!1,n.schema),t.embed&&(e.source===t.source||(r=t.source,p(G,r)))?J(n,t.embed):$(n,t).then(e=>{J(n,e.html)}).catch(Z(n))},ie=e=>{const t=(e=>{const t=e.selection.getNode(),n=Y(t)?e.serializer.serialize(t,{selection:!0}):"",i=L(n,e.schema),r=(()=>{if(ee(i.source,i.type)){const n=e.dom.getRect(t);return{width:n.w.toString().replace(/px$/,""),height:n.h.toString().replace(/px$/,"")}}return{}})();return{embed:n,...i,...r}})(e),n=(e=>{let t=e;return{get:()=>t,set:e=>{t=e}}})(t),i=K(t),r=x(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],o={title:"General",name:"general",items:c([[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],r])},s={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},a=[];_(e)&&a.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),w(e)&&a.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const l={title:"Advanced",name:"advanced",items:a},d=[o,s];a.length>0&&d.push(l);const u={type:"tabpanel",tabs:d},h=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{const i=W(t.getData());ne(n.get(),i,e),t.close()},onChange:(t,i)=>{switch(i.name){case"source":((t,n)=>{const i=W(n.getData(),"source");t.source!==i.source&&(X(h,e)({url:i.source,html:""}),$(e,i).then(X(h,e)).catch(Z(e)))})(n.get(),t);break;case"embed":(t=>{var n;const i=W(t.getData()),r=L(null!==(n=i.embed)&&void 0!==n?n:"",e.schema);t.setData(K(r))})(t);break;case"dimensions":case"altsource":case"poster":((t,n,i)=>{const r=W(t.getData(),n),o=te(i,r)&&x(e)?{...r,embed:""}:r,s=V(e,o);t.setData(K({...o,embed:s}))})(t,i.name,n.get())}n.set(W(t.getData()))},initialData:i})},re=(e,t)=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(e,t,0);var oe=tinymce.util.Tools.resolve("tinymce.Env");const se=e=>{const t=e.name;return"iframe"===t||"video"===t||"audio"===t},ae=(e,t,n,i=null)=>{const r=e.attr(n);return o(r)?r:p(t,n)?null:i},le=(e,t,n)=>{const i="img"===t.name||"video"===e.name,r=i?"300":null,o="audio"===e.name?"30":"150",s=i?o:null;t.attr({width:ae(e,n,"width",r),height:ae(e,n,"height",s)})},ce=(e,t)=>{const n=t.name,i=new I("img",1);return ue(e,t,i),le(t,i,{}),i.attr({style:t.attr("style"),src:oe.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),i},de=(e,t)=>{var n;const i=t.name,r=new I("span",1);r.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":i,class:"mce-preview-object mce-object-"+i}),ue(e,t,r);const s=e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:""),a=new I(i,1);if(le(t,a,s),a.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===i)a.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0",sandbox:t.attr("sandbox")});else{l(["controls","crossorigin","currentTime","loop","muted","poster","preload"],e=>{a.attr(e,t.attr(e))});const n=r.attr("data-mce-html");o(n)&&((e,t,n,i)=>{const r=O(e.schema).parse(i,{context:t});for(;r.firstChild;)n.append(r.firstChild)})(e,i,a,unescape(n))}const c=new I("span",1);return c.attr("class","mce-shim"),r.append(a),r.append(c),r},ue=(e,t,n)=>{var i;const r=null!==(i=t.attributes)&&void 0!==i?i:[];let o=r.length;for(;o--;){const t=r[o].name;let i=r[o].value;"width"===t||"height"===t||"style"===t||re(t,"data-mce-")||("data"!==t&&"src"!==t||(i=e.convertURL(i,t)),n.attr("data-mce-p-"+t,i))}const s=R({inner:!0},e.schema),a=new I("div",1);l(t.children(),e=>a.append(e));const c=s.serialize(a);c&&(n.attr("data-mce-html",escape(c)),n.empty())},he=e=>{const t=e.attr("class");return n(t)&&/\btiny-pageembed\b/.test(t)},pe=e=>{let t=e;for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||he(t))return!0;return!1},me=(e,t,n)=>{const i=(0,e.options.get)("xss_sanitization"),r=b(e);return O(e.schema,{sanitize:i,validate:r}).parse(n,{context:t})},fe=e=>{e.on("PreInit",()=>{const{schema:t,serializer:n,parser:i}=e,r=t.getBoolAttrs();l("webkitallowfullscreen mozallowfullscreen".split(" "),e=>{r[e]={}}),((e,t)=>{const n=d(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}})({embed:["wmode"]},(e,n)=>{const i=t.getElementRule(n);i&&l(e,e=>{i.attributes[e]={},i.attributesOrder.push(e)})}),i.addNodeFilter("iframe,video,audio,object,embed",(e=>t=>{let n,i=t.length;for(;i--;)n=t[i],n.parent&&(n.parent.attr("data-mce-object")||(se(n)&&y(e)?pe(n)||n.replace(de(e,n)):pe(n)||n.replace(ce(e,n))))})(e)),n.addAttributeFilter("data-mce-object",(t,n)=>{var i;let r=t.length;for(;r--;){const o=t[r];if(!o.parent)continue;const s=o.attr(n),a=new I(s,1);if("audio"!==s){const e=o.attr("class");e&&-1!==e.indexOf("mce-preview-object")&&o.firstChild?a.attr({width:o.firstChild.attr("width"),height:o.firstChild.attr("height")}):a.attr({width:o.attr("width"),height:o.attr("height")})}a.attr({style:o.attr("style")});const c=null!==(i=o.attributes)&&void 0!==i?i:[];let d=c.length;for(;d--;){const e=c[d].name;0===e.indexOf("data-mce-p-")&&a.attr(e.substr(11),c[d].value)}const u=o.attr("data-mce-html");if(u){const t=me(e,s,unescape(u));l(t.children(),e=>a.append(e))}o.replace(a)}})}),e.on("SetContent",()=>{const t=e.dom;l(t.select("span.mce-preview-object"),e=>{0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})})})},ge=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("media",e=>((e=>{const t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("iframe_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})})(e),(e=>{e.addCommand("mceMedia",()=>{ie(e)})})(e),(e=>{const t=()=>e.execCommand("mceMedia");e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:t=>{const n=e.selection;t.setActive(Y(n.getNode()));const i=n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind,r=ge(e)(t);return()=>{i(),r()}}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t,onSetup:ge(e)})})(e),(e=>{e.on("ResolveName",e=>{let t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})})(e),fe(e),(e=>{e.on("click keyup touchend",()=>{const t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectResized",t=>{const n=t.target;if(n.getAttribute("data-mce-object")){let i=n.getAttribute("data-mce-html");i&&(i=unescape(i),n.setAttribute("data-mce-html",escape(F(i,{width:String(t.width),height:String(t.height)},!1,e.schema))))}})})(e),(e=>({showDialog:()=>{ie(e)}}))(e)))}()},7563:function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(3681))},7571:(e,t,n)=>{n(5960)},7616:(e,t,n)=>{"use strict";let{dirname:i,relative:r,resolve:o,sep:s}=n(5324),{SourceMapConsumer:a,SourceMapGenerator:l}=n(8645),{pathToFileURL:c}=n(588),d=n(8262),u=Boolean(a&&l),h=Boolean(i&&o&&r&&s);e.exports=class{constructor(e,t,n,i){this.stringify=e,this.mapOpts=n.map||{},this.root=t,this.opts=n,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),r=e.root||i(e.file);!1===this.mapOpts.sourcesContent?(t=new a(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&e.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),h&&u&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=l.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new l({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new l({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,n=1,i=1,r="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,(s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(o.generated.line=n,o.generated.column=i-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=r,o.original.line=1,o.original.column=0,this.map.addMapping(o))),t=s.match(/\n/g),t?(n+=t.length,e=s.lastIndexOf("\n"),i=s.length-e):i+=s.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=n,o.generated.column=i-2,this.map.addMapping(o)):(o.source=r,o.original.line=1,o.original.column=0,o.generated.line=n,o.generated.column=i-1,this.map.addMapping(o)))}})}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(e=>e.annotation))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some(e=>e.inline))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(e=>e.withContent())}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let n=this.opts.to?i(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(n=i(o(n,this.mapOpts.annotation)));let s=r(n,e);return this.memoizedPaths.set(e,s),s}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new d(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let n=t.source.input.from;if(n&&!e[n]){e[n]=!0;let i=this.usesFileUrls?this.toFileUrl(n):this.toUrl(this.path(n));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(c){let t=c(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===s&&(e=e.replace(/\\/g,"/"));let n=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,n),n}}},7635:function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){return 0===this.day()?"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT":"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},7738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const i=n(5265),r=n(3151);function o(e,t,n){const{gen:o,compositeRule:s,data:a,opts:l}=e;if(void 0===n)return;const c=i._`${a}${(0,i.getProperty)(t)}`;if(s)return void(0,r.checkStrictMode)(e,`default is ignored for: ${c}`);let d=i._`${c} === undefined`;"empty"===l.useDefaults&&(d=i._`${d} || ${c} === null || ${c} === ""`),o.if(d,i._`${c} = ${(0,i.stringify)(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(i)&&i.forEach((t,n)=>o(e,n,t.default))}},7748:(e,t,n)=>{"use strict";var i=n(3567),r=Array.prototype.concat,o=Array.prototype.slice,s=e.exports=function(e){for(var t=[],n=0,s=e.length;n<s;n++){var a=e[n];i(a)?t=r.call(t,o.call(a)):t.push(a)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},7776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(5253).default];t.default=i},7784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(function(e){return e.charCodeAt(0)}))},7795:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(4640);class r extends i.BKk{constructor(){super(...arguments),this.isIndexShader=!0,this.uniformsNeedUpdate=!1,this.lights=!1,this.uniforms={index:{value:[0,0,0]}},this.vertexShader=["void main() {","  #include <begin_vertex>","  #include <project_vertex>","}"].join("\n"),this.fragmentShader=["uniform vec3 index;","void main() {","  gl_FragColor = vec4(index, 1.0);","}"].join("\n")}static indexFromPixel(e){return e[0]+e[1]<<8+e[2]<<16}static zoneFromPixel(e){return e[3]}setIndex(e){const t=e>>16,n=(e>>8)-(t<<8),i=e-(t<<16)-(n<<8),r=this.uniforms.index.value;r[0]=i/255,r[1]=n/255,r[2]=t/255,this.uniformsNeedUpdate=!0}}class o extends i.BKk{constructor(){super(...arguments),this.isPositionShader=!0,this.uniforms={index:{value:0},range:{value:[-1,1]}},this.vertexShader=["varying vec3 vLocalPosition;","void main() {","  #include <begin_vertex>","  #include <project_vertex>","  vLocalPosition = vec3(position);","}"].join("\n"),this.fragmentShader=["uniform float index;","uniform vec2 range;","varying vec3 vLocalPosition;","vec4 toVec4(float v) {","  float vn = (v - range.x) / (range.y - range.x);","  float b0 = floor(vn * 255.0) / 255.0; vn = (vn - b0) * 256.0;","  float b1 = floor(vn * 255.0) / 255.0; vn = (vn - b1) * 256.0;","  float b2 = floor(vn * 255.0) / 255.0; vn = (vn - b2) * 256.0;","  float b3 = floor(vn * 255.0) / 255.0;","  return vec4(clamp(b0, 0.0, 1.0), clamp(b1, 0.0, 1.0), clamp(b2, 0.0, 1.0), clamp(b3, 0.0, 1.0));","}","void main() {","  gl_FragColor = (index == 0.0 ? toVec4(vLocalPosition.x)","    : (index == 1.0 ? toVec4(vLocalPosition.y) : toVec4(vLocalPosition.z)));","}"].join("\n")}}class s extends i.BKk{constructor(){super(...arguments),this.isNormalShader=!0,this.uniforms={index:{value:0}},this.vertexShader=["varying vec3 vLocalNormal;","void main() {","  #include <beginnormal_vertex>","  #include <begin_vertex>","  #include <project_vertex>","  vLocalNormal = vec3(normal);","}"].join("\n"),this.fragmentShader=["uniform vec3 index;","varying vec3 vLocalNormal;","void main() {","  vec3 normal = normalize(vLocalNormal);","  gl_FragColor = vec4(normal * 0.5 + 0.5, 1.0);","}"].join("\n")}}const a=new i.Pq0,l=new i.Q1f,c=1e4,d=new i.NRn(new i.Pq0(-1e4,-1e4,-1e4),new i.Pq0(c,c,c));class u{static add(e,t){const n=e=>{e.material&&(e.onBeforeRender=function(t,n,i,r,o){o.isIndexShader&&o.setIndex(e.id)},e.onAfterRender=function(e,t,n,i,r){r.isIndexShader&&r.setIndex(0)})};t?e.traverse(e=>n(e)):n(e)}static remove(e,t){const n=e=>{e.material&&(e.onBeforeRender=null,e.onAfterRender=null)};t?e.traverse(e=>n(e)):n(e)}constructor(e){this.renderer=e,this.pickTextures=[];for(let e=0;e<3;++e)this.pickTextures[e]=new i.nWS(1,1,{stencilBuffer:!1});this.pickBuffer=new Uint8Array(4),this.indexShader=new r,this.positionShader=new o,this.normalShader=new s}pickObject(e,t,n){const i=this.pickIndex(e,t,n);if(i>0)return e.getObjectById(i)}pickIndex(e,t,n){const i=n.viewport;(t=i.updateCamera(t)).layers.disable(1);const r=e.overrideMaterial;e.overrideMaterial=this.indexShader;const o=this.renderer,s=this.pickTextures[0];o.getClearColor(l),i.applyPickViewport(s,n),o.setRenderTarget(s),o.setClearColor(0);const a=o.xr.enabled;o.xr.enabled=!1,o.clear(),o.render(e,t),o.xr.enabled=a,o.setRenderTarget(null),o.setClearColor(l),e.overrideMaterial=r,t.layers.enable(1);const c=this.pickBuffer;return o.readRenderTargetPixels(s,0,0,1,1,c),c[0]+256*c[1]+65536*c[2]}pickPosition(e,t,n,r,o){r=r||d,o=o||new i.Pq0;const s=n.viewport;(t=s.updateCamera(t)).layers.disable(1);const c=e.overrideMaterial,u=e.overrideMaterial=this.positionShader,h=this.renderer,p=this.pickTextures;h.getClearColor(l),h.setClearColor(0);for(let i=0;i<3;++i)u.uniforms.index.value=i,u.uniforms.range.value[0]=r.min.getComponent(i),u.uniforms.range.value[1]=r.max.getComponent(i),s.applyPickViewport(p[i],n),h.setRenderTarget(p[i]),h.clear(),h.render(e,t);h.setRenderTarget(null),h.setClearColor(l),e.overrideMaterial=c,t.layers.enable(1);const m=this.pickBuffer;for(let e=0;e<3;++e)h.readRenderTargetPixels(p[e],0,0,1,1,m),o.setComponent(e,2.337437050015319e-10*m[3]+5.983838848039216e-8*m[2]+1531862745098039e-20*m[1]+.003921568627451*m[0]);return r.getSize(a),o.multiply(a).add(r.min)}pickNormal(e,t,n,r){r=r||new i.Pq0;const o=n.viewport;(t=o.updateCamera(t)).layers.disable(1);const s=e.overrideMaterial;e.overrideMaterial=this.normalShader;const a=this.renderer,c=this.pickTextures[0];a.getClearColor(l),o.applyPickViewport(c,n),a.setRenderTarget(c),a.setClearColor(0),a.clear(),a.render(e,t),a.setRenderTarget(null),a.setClearColor(l),e.overrideMaterial=s,t.layers.enable(1);const d=this.pickBuffer;return a.readRenderTargetPixels(c,0,0,1,1,d),r.set(d[0]/255*2-1,d[1]/255*2-1,d[2]/255*2-1).normalize()}}},7801:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h});var i=n(3423),r=n(6773),o=n(2997),s=n(3911),a=n(8313),l=n(161),c=n(3600),d=n(8604),u=n(9337);class h extends i.Ay{constructor(){super(...arguments),this.ins=this.addInputs(h.ins),this.outs=this.addOutputs(h.outs)}get settingProperties(){return[this.ins.enabled,this.ins.position]}get snapshotProperties(){return[this.ins.enabled,this.ins.position,this.ins.articleId]}get articles(){return Object.keys(this._articles).map(e=>this._articles[e])}get activeArticle(){return this.outs.article.value}get assetManager(){return this.getMainComponent(l.A)}get assetReader(){return this.getMainComponent(c.A)}get analytics(){return this.getMainComponent(d.A)}get language(){return this.getGraphComponent(u.A)}create(){super.create(),this.getGraphComponents(a.A).forEach(e=>e.on("update",this.updateArticles,this)),this.graph.components.on(a.A,this.onMetaComponent,this),this.graph.components.on(u.A,this.onLanguageComponent,this),this.updateArticles()}dispose(){this.graph.components.off(u.A,this.onLanguageComponent,this),this.graph.components.off(a.A,this.onMetaComponent,this),this.getGraphComponents(a.A).forEach(e=>e.off("update",this.updateArticles,this)),super.dispose()}update(e){const t=this.ins,n=this.outs;if(t.enabled.changed,t.position.changed&&t.position.value==o.Yf.Left&&(r.Ay.show("Reader position not available. Using Overlay."),t.position.setValue(o.Yf.Overlay)),t.articleId.changed){const e=this._articles[t.articleId.value]||null,i=e&&e.article;n.article.setValue(i),n.content.setValue(""),i&&(this.readArticle(i),this.analytics.sendProperty("Reader_ArticleId",i.defaultTitle))}return t.refresh.changed&&this.refreshArticle(),!0}readArticle(e){const t=this.outs,n=e.uri;if(n)return this.assetReader.getText(n).then(e=>this.parseArticle(e,n)).then(e=>t.content.setValue(e)).catch(e=>t.content.setValue(`<h2>Article not found at ${n}</h2>`));t.content.setValue("<h2>Can't display article: no URI.</h2>")}parseArticle(e,t){e=e.replace(/[\n\r]/g,"");const n=this.assetManager.getAssetBasePath(t);return e=e.replace(/(src=\")(.*?)(\")/g,(e,t,i,r)=>(i.startsWith("/")||i.startsWith("http")||(i=this.assetManager.getAssetUrl(n+i)),t+i+r)),Promise.resolve(e)}onMetaComponent(e){e.add&&e.object.articles.on("update",this.updateArticles,this),e.remove&&e.object.articles.off("update",this.updateArticles,this),this.updateArticles()}onLanguageComponent(e){e.add&&e.object.outs.activeLanguage.on("value",this.updateLanguage,this),e.remove&&e.object.outs.activeLanguage.off("value",this.updateLanguage,this)}refreshArticle(){const e=this._articles[this.ins.articleId.value]||null,t=e&&e.article;t&&this.readArticle(t)}updateArticles(){const e=this.getGraphComponents(a.A),t=this._articles={};e.forEach(e=>{const n=e.articles,i=e.node;n.items.forEach(e=>{t[e.id]={article:e,node:i}})})}updateLanguage(){this.ins;this.articles.forEach(e=>{e.article.language=this.language.outs.activeLanguage.value}),this.ins.refresh.set()}fromData(e){e=e||{},this.ins.setValues({enabled:!!e.enabled,position:o.Yf[e.position]||o.Yf.Overlay})}toData(){const e=this.ins;return{enabled:e.enabled.value,position:o.Yf[e.position.value]||"Overlay"}}}h.typeName="CVReader",h.text="Reader",h.icon="",h.ins={enabled:i.gK.Boolean("Reader.Enabled"),visible:i.gK.Boolean("Reader.Visible",!0),closed:i.gK.Event("Reader.Closed"),refresh:i.gK.Event("Reader.Refresh"),position:i.gK.Enum("Reader.Position",o.Yf),articleId:i.gK.String("Article.ID"),focus:i.gK.Boolean("Reader.Focus")},h.outs={article:i.gK.Object("Article.Active",s.A),content:i.gK.String("Article.Content"),count:i.gK.Integer("Article.Count")}},7832:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(8446),r=n(3198),o=n(3675);class s extends i.A{constructor(){super(...arguments),this._language=o.aL[o.Nm],this._leadChanged=!1}get title(){return 0===Object.keys(this.data.titles).length&&(this.data.titles[o.aL[this.language]]=this.data.title),this.data.titles[o.aL[this.language]]||"Missing content"}set title(e){this.data.titles[o.aL[this.language]]=e,this.update()}titleIn(e){return 0===Object.keys(this.data.titles).length&&(this.data.titles[o.aL[this.language]]=this.data.title),this.data.titles[o.aL[e]]}get lead(){return 0===Object.keys(this.data.leads).length&&(this.data.leads[o.aL[this.language]]=this.data.lead),this.data.leads[o.aL[this.language]]||""}set lead(e){this.data.leads[o.aL[this.language]]=e,this.update()}leadIn(e){return 0===Object.keys(this.data.leads).length&&(this.data.leads[o.aL[this.language]]=this.data.lead),this.data.leads[o.aL[e]]||""}get tags(){return 0===Object.keys(this.data.taglist).length&&this.data.tags.length>0&&(this.data.taglist[o.aL[this.language]]=this.data.tags),this.data.taglist[o.aL[this.language]]||[]}set tags(e){this.data.taglist[o.aL[this.language]]=e,this.update()}get language(){return this._language}set language(e){this._language=e}get imageCredit(){return this.data.imageCredit[o.aL[this.language]]||""}set imageCredit(e){this.data.imageCredit[o.aL[this.language]]=e,this.update()}get imageAltText(){return this.data.imageAltText[o.aL[this.language]]||""}set imageAltText(e){this.data.imageAltText[o.aL[this.language]]=e,this.update()}get leadChanged(){return this._leadChanged}set leadChanged(e){this._leadChanged=e}static fromJSON(e){return new s(e)}init(){return{id:i.A.generateId(),title:"New Annotation",titles:{},lead:"",leads:{},marker:"",tags:[],taglist:{},articleId:"",imageUri:"",imageCredit:{},imageAltText:{},audioId:"",viewId:"",style:r.A.defaultTypeName,visible:!0,expanded:!1,position:null,direction:null,scale:1,offset:0,tilt:0,azimuth:0,color:[0,.61,.87],zoneIndex:-1}}deflate(e,t){t.id=e.id,Object.keys(this.data.titles).length>0?(t.titles={},Object.keys(this.data.titles).forEach(n=>{t.titles[n]=e.titles[n]})):e.title&&(t.title=e.title),Object.keys(this.data.leads).length>0?(t.leads={},Object.keys(this.data.leads).forEach(n=>{t.leads[n]=e.leads[n]})):e.lead&&(t.lead=e.lead),e.marker&&(t.marker=e.marker),Object.keys(this.data.taglist).length>0?(t.taglist={},Object.keys(this.data.taglist).forEach(n=>{t.taglist[n]=e.taglist[n].slice()})):e.tags.length>0&&(t.tags=e.tags),e.articleId&&(t.articleId=e.articleId),e.imageUri&&(t.imageUri=e.imageUri),e.imageUri&&(t.imageUri=e.imageUri),Object.keys(this.data.imageCredit).length>0&&(t.imageCredit={},Object.keys(this.data.imageCredit).forEach(n=>{t.imageCredit[n]=e.imageCredit[n]})),Object.keys(this.data.imageAltText).length>0&&(t.imageAltText={},Object.keys(this.data.imageAltText).forEach(n=>{t.imageAltText[n]=e.imageAltText[n]})),e.audioId&&(t.audioId=e.audioId),e.viewId&&(t.viewId=e.viewId),e.style!==r.A.defaultTypeName&&(t.style=e.style),!1===e.visible&&(t.visible=e.visible),e.position&&(t.position=e.position.slice()),e.direction&&(t.direction=e.direction.slice()),1!==e.scale&&(t.scale=e.scale),0!==e.offset&&(t.offset=e.offset),0!==e.tilt&&(t.tilt=e.tilt),0!==e.azimuth&&(t.azimuth=e.azimuth);const n=e.color;return!n||0===n[0]&&.61===n[1]&&.87===n[2]||(t.color=n.slice()),e.zoneIndex>-1&&(t.zoneIndex=e.zoneIndex),e}inflate(e,t){t.id=e.id,t.title=e.title||"",t.titles=e.titles||{},t.lead=e.lead||"",t.leads=e.leads||{},t.marker=e.marker||"",t.tags=e.tags||[],t.taglist=e.taglist||{},t.articleId=e.articleId||"",t.imageUri=e.imageUri||"",t.imageCredit=e.imageCredit||{},t.imageAltText=e.imageAltText||{},t.audioId=e.audioId||"",t.viewId=e.viewId||"",t.style=e.style||r.A.defaultTypeName,t.visible=void 0===e.visible||e.visible,t.expanded=!1,t.position=e.position.slice(),t.direction=e.direction.slice(),t.scale=void 0!==e.scale?e.scale:1,t.offset=e.offset||0,t.tilt=e.tilt||0,t.azimuth=e.azimuth||0,t.color=e.color||s.defaultColor.slice(),t.zoneIndex=void 0!==e.zoneIndex?e.zoneIndex:-1}}s.defaultColor=[0,.61,.87]},7859:function(e,t,n){!function(e){"use strict";function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,i){return"m"===i?n?"хвіліна":"хвіліну":"h"===i?n?"гадзіна":"гадзіну":e+" "+t({ss:n?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:n?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:n?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[i],+e)}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:n,mm:n,h:n,hh:n,d:"дзень",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(3681))},7872:function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},7881:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"bir neçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}})}(n(3681))},7891:(e,t,n)=>{"use strict";var i=n(4640),r=n(8337),o=n(5532),s=n(6763),a=(n(9498),n(9521)),l=n(3198),c=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const d=["sv-q0","sv-q1","sv-q2","sv-q3"],u=new o.Ay,h=new i.Pq0(0,1,0);class p extends a.Ay{constructor(e){super(e),this.quadrant=-1,this.adaptive=!0;const t=[];t.push(new i.Pq0(0,0,0)),t.push(new i.Pq0(0,1,0));const n=(new i.LoY).setFromPoints(t),r=new i.mrM({color:"#009cde",transparent:!0});r.toneMapped=!1,this.stemLine=new i.N1A(n,r),this.stemLine.frustumCulled=!1,this.stemLine.matrixAutoUpdate=!1,this.add(this.stemLine),this.update()}update(){const e=this.annotation.data;this.stemLine.scale.setScalar(e.scale),this.stemLine.position.y=e.offset,this.stemLine.updateMatrix();this.stemLine.material.color.fromArray(e.color),super.update()}renderHTMLElement(e,t,n){super.renderHTMLElement(e,t,n,this.stemLine,h);const i=r.A.scaleLimit(this.viewAngle*r.A.RAD2DEG,90,100,1,0),o=this.annotation.data.visible?i:0;this.stemLine.material.opacity=o,e.setOpacity(o),this.orientationQuadrant!==this.quadrant&&(e.classList.remove(d[this.quadrant]),e.classList.add(d[this.orientationQuadrant]),this.quadrant=this.orientationQuadrant),this.adaptive!==this.isAdaptive&&(this.isAdaptive?e.classList.remove("sv-static-width"):e.classList.add("sv-static-width"),this.adaptive=this.isAdaptive),this.setVisible(!this.isBehindCamera(this.stemLine,n)&&this.annotation.data.visible)}createHTMLElement(){return new m(this)}dispose(){super.dispose(),this.stemLine.geometry.dispose(),this.stemLine.material.dispose()}}p.typeName="Standard",l.A.registerDefaultType(p);let m=class extends a.sf{constructor(e){super(e),this.onClickTitle=this.onClickTitle.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.titleElement=this.appendElement("div"),this.titleElement.classList.add("sv-title"),this.titleElement.addEventListener("click",this.onClickTitle),this.titleElement.addEventListener("keydown",this.onKeyDown),this.titleElement.setAttribute("tabindex","0")}firstConnected(){super.firstConnected(),this.classList.add("sv-standard-annotation")}update(e){super.update(e);const t=this.sprite.annotation.data;t.viewId.length?this.classList.add("sv-enable-events"):this.classList.remove("sv-enable-events"),this.titleElement.innerText=this.sprite.annotation.title,u.fromArray(t.color),this.style.borderColor=u.toString()}onClickTitle(e){e.stopPropagation(),this.sprite.emitClickEvent()}onKeyDown(e){"Space"!==e.code&&"Enter"!==e.code||(e.stopPropagation(),this.sprite.emitClickEvent())}};m=c([(0,s.EM)("sv-standard-annotation")],m)},7904:e=>{e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},7926:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},7937:function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(e){return function(t,n,o,s){var a=i(t),l=r[e][i(t)];return 2===a&&(l=l[n?0:1]),l.replace(/%d/i,t)}},s=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:s,monthsShort:s,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(3681))},7970:(e,t,n)=>{"use strict";var i=n(6116).F.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(o||r);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){a=!1,c=!0,s||o.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,u=!0,a||o.call(t)},p=function(e){o.call(t,e)},m=function(){var e;return s&&!u?(t._readableState&&t._readableState.ended||(e=new i),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new i),o.call(t,e)):void 0},f=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",d),t.on("abort",m),t.req?f():t.on("request",f)),t.on("end",h),t.on("finish",d),!1!==n.error&&t.on("error",p),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",f),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",m)}}},7988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class r extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function o(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)l(n,t[i]),n.push(e[++i]);return new r(n)}t._Code=r,t.nil=new r(""),t._=o;const s=new r("+");function a(e,...t){const n=[d(e[0])];let i=0;for(;i<t.length;)n.push(s),l(n,t[i]),n.push(s,d(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function l(e,t){var n;t instanceof r?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:d(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new r(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new r(`.${e}`):o`[${e}]`},t.regexpCode=function(e){return new r(e.toString())}},8031:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>i._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=n,l=t.let("valid",!1),c=t.let("passing",null),d=t.name("_valid");e.setParams({passing:c}),t.block(function(){a.forEach((n,o)=>{let a;(0,r.alwaysValidSchema)(s,n)?t.var(d,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},d),o>0&&t.if(i._`${d} && ${l}`).assign(l,!1).assign(c,i._`[${c}, ${o}]`).else(),t.if(d,()=>{t.assign(l,!0),t.assign(c,o),a&&e.mergeEvaluated(a,i.Name)})})}),e.result(l,()=>e.reset(),()=>e.error(!0))}};t.default=o},8086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5626),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,i.validateTuple)(e,"items")};t.default=r},8089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const i=n(7988);class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=s;class a extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=i._`.${new i.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=i._`\n`;t.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:i.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:r}=i,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[r];if(s){const e=s.get(o);if(e)return e}else s=this._values[r]=new Map;s.set(o,i);const a=this._scope[r]||(this._scope[r]=[]),l=a.length;return a[l]=t.ref,i.setValue(t,{property:r,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return i._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,n){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,n)}_reduceValues(e,n,s={},a){let l=i.nil;for(const c in e){const d=e[c];if(!d)continue;const u=s[c]=s[c]||new Map;d.forEach(e=>{if(u.has(e))return;u.set(e,o.Started);let s=n(e);if(s){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=i._`${l}${n} ${e} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(e)))throw new r(e);l=i._`${l}${s}${this.opts._n}`}u.set(e,o.Completed)})}return l}}},8093:(e,t,n)=>{"use strict";let i=n(6613),r=n(8262),o=n(8495);function s(e,t){let n=new r(e,t),i=new o(n);try{i.parse()}catch(e){throw e}return i.root}e.exports=s,s.default=s,i.registerParse(s)},8110:function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једног минута"],mm:["минут","минута","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],d:["један дан","једног дана"],dd:["дан","дана","дана"],M:["један месец","једног месеца"],MM:["месец","месеца","месеци"],y:["једну годину","једне године"],yy:["годину","године","година"]},correctGrammaticalCase:function(e,t){return e%10>=1&&e%10<=4&&(e%100<10||e%100>=20)?e%10==1?t[0]:t[1]:t[2]},translate:function(e,n,i,r){var o,s=t.words[i];return 1===i.length?"y"===i&&n?"једна година":r||n?s[0]:s[1]:(o=t.correctGrammaticalCase(e,s),"yy"===i&&n&&"годину"===o?e+" година":e+" "+o)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:t.translate,dd:t.translate,M:t.translate,MM:t.translate,y:t.translate,yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(3681))},8135:(e,t,n)=>{"use strict";n.d(t,{X:()=>a,r:()=>s});var i=n(6187),r=n(3869),o=n(1046);const s=new WeakMap,a=(e,t,n)=>{let a=s.get(t);void 0===a&&((0,i.if)(t,t.firstChild),s.set(t,a=new r.Qh(Object.assign({templateFactory:o.v},n))),a.appendInto(t)),a.setValue(e),a.commit()}},8167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6241),r=n(5265),o=n(3151),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>r.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>r._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:c}=e,{opts:d}=c;if(!l&&0===n.length)return;const u=n.length>=d.loopRequired;if(c.allErrors?function(){if(u||l)e.block$data(r.nil,h);else for(const t of n)(0,i.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(u||l){const n=t.let("valid",!0);e.block$data(n,()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,s,()=>{t.assign(o,(0,i.propertyInData)(t,a,n,d.ownProperties)),t.if((0,r.not)(o),()=>{e.error(),t.break()})},r.nil)}(o,n)),e.ok(n)}else t.if((0,i.checkMissingProp)(e,n,o)),(0,i.reportMissingProp)(e,o),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!i.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",s,n=>{e.setParams({missingProperty:n}),t.if((0,i.noPropertyInData)(t,a,n,d.ownProperties),()=>e.error())})}}};t.default=s},8172:(e,t,n)=>{"use strict";n.d(t,{A:()=>_});var i=n(4640),r=n(3423),o=n(3675),s=n(1086),a=n(9616),l=n(9519),c=n(8424),d=n(9610),u=n(1721),h=n(3889),p=n(7078),m=n(5590),f=n(7482),g=n(4088);const v=new i.Pq0,y=new i.Pq0;function b(e){return"shadowSize"in e.ins}function A(e){return"distance"in e.ins}class _ extends s.A{constructor(){super(...arguments),this.ins=this.addInputs(_.ins),this.outs=this.addOutputs(_.outs),this.updateCameraHelper=()=>{const e=this.setup.navigation.ins.offset.value,t=v.set(e[0],e[1],e[2]).length();if(!this.system.getComponent("CVStoryApplication",!0)){const e=2.5*Math.max(t,this.outs.boundingRadius.value),n=this.setup.navigation.ins.maxOffset.value;this.setup.navigation.ins.maxOffset.setValue([n[0],n[1],e])}this.cameras.forEach(e=>{if(e.addIns.autoNearFar.value){const n=4*Math.max(t,this.outs.boundingRadius.value),i=Math.min(n/1e3,this.outs.boundingRadius.value/100);(n<e.ins.far.value||e.ins.far.value<2*this.setup.navigation.ins.maxOffset.value[2])&&(e.ins.far.setValue(n),e.ins.near.setValue(i),this.setup.navigation.ins.projection.set())}})}}get settingProperties(){return null}get snapshotProperties(){return null}get models(){return this.getGraphComponents(a.A)}get cameras(){return this.getGraphComponents(d.A)}get setup(){return this.getGraphComponent(u.A)}get renderer(){return this.getMainComponent(h.A)}create(){super.create(),this.outs.boundingBox.setValue(new i.NRn),this.graph.components.on(a.A,this.onModelComponent,this),this.models.forEach(e=>{e.ins.globalUnits.linkFrom(this.ins.units),this.ins.modelUpdated.linkFrom(e.outs.updated)})}update(e){const t=this.ins,n=this.outs;return t.units.changed&&(this.updateTransformHierarchy(),this.updateModelBoundingBox(),this.updateLights(),this.updateCameras(),n.units.setValue(t.units.value)),t.modelUpdated.changed&&(this.updateModelBoundingBox(),this.updateLights(),this.updateCameras()),t.sceneTransformed.changed&&this.updateModelBoundingBox(),t.lightUpdated.changed&&this.updateLights(),!0}dispose(){this.graph.components.off(a.A,this.onModelComponent,this),super.dispose()}fromDocument(e,t){this.ins.units.setValue(o.uj[t.units]||0),this.outs.units.setValue(o.uj[t.units]||0)}toDocument(e,t){t.units=o.uj[this.ins.units.getValidatedValue()]}onModelComponent(e){const t=e.object;e.add&&(t.ins.globalUnits.linkFrom(this.ins.units),this.ins.modelUpdated.linkFrom(t.outs.updated))}updateModelBoundingBox(){const e=this.outs.boundingBox.value;e.makeEmpty(),this.models.forEach(t=>{t.object3D.visible&&e.expandByObject(t.object3D)}),e.getSize(v),v.length()>0?(this.outs.boundingBox.set(),this.outs.boundingRadius.setValue(.5*v.length())):this.outs.boundingRadius.setValue(10)}updateTransformHierarchy(){if(0===this.models.length)return;const{ins:e,outs:t}=this,n=(0,l.A)(t.units.value,e.units.value),i=this.models[0].object3D.parent.parent;i.position.multiplyScalar(n),i.updateMatrix(),i.updateMatrixWorld(!0),this.models.forEach(e=>{const t=e.object3D.parent;t.position.multiplyScalar(n),t.updateMatrix(),t.updateMatrixWorld(!0)})}updateLights(){const{ins:e,outs:t}=this,n=this.graph.findNodeByName("Lights");if(n){const i=n.getComponent(c.Ay,!0),r=(0,l.A)(t.units.value,e.units.value);i.ins.scale.setValue([1,1,1]),i.children.forEach(e=>{var t,n;const i=e.getComponents(p.I);for(let e of i){if(e instanceof m.A){v.copy(e.light.position),y.copy(e.light.target.position);const t=y.sub(v).normalize();t.applyEuler(e.transform.object3D.rotation),v.copy(t.negate().multiplyScalar(1.2*this.outs.boundingRadius.value)),v.multiplyScalar(r),e.transform.ins.position.setValue(v.toArray()),v.setScalar(this.outs.boundingRadius.value*r*.2),e.transform.ins.scale.setValue(v.toArray()),e.light.updateMatrix()}else v.fromArray(e.transform.ins.position.value),v.multiplyScalar(r),e.transform.ins.position.setValue(v.toArray()),e instanceof f.A||e instanceof g.A?v.setScalar(this.outs.boundingRadius.value*r*.2):(v.fromArray(e.transform.ins.scale.value),v.multiplyScalar(r)),e.transform.ins.scale.setValue(v.toArray()),null===(t=e.light)||void 0===t||t.updateMatrix();b(e)?e.ins.shadowSize.setValue(2*this.outs.boundingRadius.value):A(e)&&(e.ins.distance.value?e.ins.distance.setValue(e.ins.distance.value*r):"far"in(null===(n=e.light.shadow)||void 0===n?void 0:n.camera)&&(e.light.shadow.camera.far=e.light.shadow.camera.far*r))}})}}updateCameras(){this.renderer.views[0]&&this.renderer.views[0].renderer.xr.isPresenting||this.updateCameraHelper()}}_.typeName="CVScene",_.text="Scene",_.icon="hierarchy",_.ins={units:r.gK.Enum("Scene.Units",o.uj,o.uj.cm),modelUpdated:r.gK.Event("Scene.ModelUpdated"),lightUpdated:r.gK.Event("Scene.LightUpdated"),sceneTransformed:r.gK.Event("Scene.Transformed")},_.outs={units:r.gK.Enum("Scene.Units",o.uj,o.uj.cm),boundingBox:r.gK.Object("Models.BoundingBox",i.NRn),boundingRadius:r.gK.Number("Models.BoundingRadius")}},8177:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,EM:()=>i.EM,qy:()=>i.qy});var i=n(6763),r=n(5933),o=n(2902);class s extends r.Ay{constructor(){super(...arguments),this.activeDocument=null}get documentProvider(){return this.system.getMainComponent(o.A)}connected(){const e=this.documentProvider;e.on("active-component",this.onActiveDocumentEvent,this);const t=e.activeComponent;t&&(this.activeDocument=t,this.onActiveDocument(null,t))}disconnected(){this.documentProvider.off("active-component",this.onActiveDocumentEvent,this);const e=this.activeDocument;e&&(this.activeDocument=null,this.onActiveDocument(e,null))}onActiveDocument(e,t){}onActiveDocumentEvent(e){this.activeDocument=e.next,this.onActiveDocument(e.previous,e.next)}}},8182:function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(3681))},8203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const i=n(5265),r=n(3151);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:i._`${e.schemaPath}${(0,i.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:i._`${e.schemaPath}${(0,i.getProperty)(t)}${(0,i.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,r.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==n){const{errorPath:s,dataPathArr:a,opts:l}=t;d(c.let("data",i._`${t.data}${(0,i.getProperty)(n)}`,!0)),e.errorPath=i.str`${s}${(0,r.getErrorPath)(n,o,l.jsPropertySyntax)}`,e.parentDataProperty=i._`${n}`,e.dataPathArr=[...a,e.parentDataProperty]}if(void 0!==s){d(s instanceof i.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)}function d(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:r,allErrors:o}){void 0!==i&&(e.compositeRule=i),void 0!==r&&(e.createErrors=r),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},8227:(e,t,n)=>{"use strict";let i=n(1352);function r(e,t){new i(t).stringify(e)}e.exports=r,r.default=r},8237:function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(3681))},8254:function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,function(e,t,n){return"ი"===n?t+"ში":t+n+"ში"})},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):e},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(3681))},8262:(e,t,n)=>{"use strict";let{nanoid:i}=n(945),{isAbsolute:r,resolve:o}=n(5324),{SourceMapConsumer:s,SourceMapGenerator:a}=n(8645),{fileURLToPath:l,pathToFileURL:c}=n(588),d=n(50),u=n(6842),h=n(3215),p=Symbol("lineToIndexCache"),m=Boolean(s&&a),f=Boolean(o&&r);function g(e){if(e[p])return e[p];let t=e.css.split("\n"),n=new Array(t.length),i=0;for(let e=0,r=t.length;e<r;e++)n[e]=i,i+=t[e].length+1;return e[p]=n,n}class v{get from(){return this.file||this.id}constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,t.document&&(this.document=t.document.toString()),t.from&&(!f||/^\w+:\/\//.test(t.from)||r(t.from)?this.file=t.from:this.file=o(t.from)),f&&m){let e=new u(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+i(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,n,i={}){let r,o,s,a,l;if(t&&"object"==typeof t){let e=t,i=n;if("number"==typeof e.offset){a=e.offset;let i=this.fromOffset(a);t=i.line,n=i.col}else t=e.line,n=e.column,a=this.fromLineAndColumn(t,n);if("number"==typeof i.offset){s=i.offset;let e=this.fromOffset(s);o=e.line,r=e.col}else o=i.line,r=i.column,s=this.fromLineAndColumn(i.line,i.column)}else if(n)a=this.fromLineAndColumn(t,n);else{a=t;let e=this.fromOffset(a);t=e.line,n=e.col}let u=this.origin(t,n,o,r);return l=u?new d(e,void 0===u.endLine?u.line:{column:u.column,line:u.line},void 0===u.endLine?u.column:{column:u.endColumn,line:u.endLine},u.source,u.file,i.plugin):new d(e,void 0===o?t:{column:n,line:t},void 0===o?n:{column:r,line:o},this.css,this.file,i.plugin),l.input={column:n,endColumn:r,endLine:o,endOffset:s,line:t,offset:a,source:this.css},this.file&&(c&&(l.input.url=c(this.file).toString()),l.input.file=this.file),l}fromLineAndColumn(e,t){return g(this)[e-1]+t-1}fromOffset(e){let t=g(this),n=0;if(e>=t[t.length-1])n=t.length-1;else{let i,r=t.length-2;for(;n<r;)if(i=n+(r-n>>1),e<t[i])r=i-1;else{if(!(e>=t[i+1])){n=i;break}n=i+1}}return{col:e-t[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:o(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,n,i){if(!this.map)return!1;let o,s,a=this.map.consumer(),d=a.originalPositionFor({column:t,line:e});if(!d.source)return!1;"number"==typeof n&&(o=a.originalPositionFor({column:i,line:n})),s=r(d.source)?c(d.source):new URL(d.source,this.map.consumer().sourceRoot||c(this.map.mapFile));let u={column:d.column,endColumn:o&&o.column,endLine:o&&o.line,line:d.line,url:s.toString()};if("file:"===s.protocol){if(!l)throw new Error("file: protocol is not available in this PostCSS build");u.file=l(s)}let h=a.sourceContentFor(d.source);return h&&(u.source=h),u}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}}e.exports=v,v.default=v,h&&h.registerInput&&h.registerInput(v)},8290:(e,t,n)=>{"use strict";let i=n(3172);class r extends i{get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}}e.exports=r,r.default=r},8313:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(3331);class r extends i.A{constructor(e){super(),this.addEvent("update"),this._list=e||[],this._dict={},e&&e.forEach(e=>{e.id&&(this._dict[e.id]=e)})}get length(){return this._list.length}get ids(){return Object.keys(this._dict)}get items(){return this._list}set items(e){this._list=e,this._dict={},e.forEach(e=>{e.id&&(this._dict[e.id]=e)}),this.emit({type:"update",item:null,what:"update"})}append(e){this._list.push(e),e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"add"})}insertBefore(e,t){const n=this._list.indexOf(t);n>=0&&this.insertAt(e,n)}insertAt(e,t){this._list.splice(t,0,e),e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"add"})}replaceItem(e,t){const n=this._list.indexOf(t);n>=0&&this.replaceAt(e,n)}replaceAt(e,t){const n=this._list[t];n.id&&delete this._dict[n.id],this._list[t]=e,e.id&&(this._dict[e.id]=e),this.emit({type:"update",item:e,what:"replace"})}moveItem(e,t){const n=this._list.indexOf(e);this.moveAt(n,t)}moveAt(e,t){const n=this._list;if(e+t<0||e+t>=n.length)return;const i=n[e];if(t>0){for(let i=0;i<t;++i)n[e+i]=n[e+i+1];n[e+t]=i}else{if(!(t<0))return;for(let i=0;i>t;--i)n[e+i]=n[e+i-1];n[e+t]=i}this.emit({type:"update",item:i,what:"move"})}removeById(e){const t=this._dict[e];return t&&this.removeItem(t),t}removeItem(e){const t=this._list.indexOf(e);return this.removeAt(t),t}removeAt(e){const t=this._list;if(e<0||e>=t.length)return;const n=t[e];return t.splice(e,1),n.id&&delete this._dict[n.id],this.emit({type:"update",item:n,what:"remove"}),n}getAt(e){return this._list[e]}getById(e){return this._dict[e]}getIndexOf(e){return this._list.indexOf(e)}copy(e){this.items=e.slice()}clone(){return this._list.slice()}}r.prototype[Symbol.iterator]=function(){return{index:0,list:this._list,next:function(){return this.index<this.list.length?{value:this.list[this.index++],done:!1}:{done:!0}}}};class o extends i.A{get length(){return this.ids.length}get items(){return this.ids.map(e=>this._dict[e])}set items(e){e.forEach(e=>{e.id&&(this._dict[e.id]=e)}),this.emit({type:"update",item:null,what:"update"})}get ids(){return Object.keys(this._dict)}get dictionary(){return this._dict}set dictionary(e){this._dict=e,this.emit({type:"update",item:null,what:"update"})}constructor(e){super(),this.addEvent("update"),this._dict={},e&&e.forEach(e=>{e.id&&(this._dict[e.id]=e)})}insert(e,t){if(!(t=t||e.id))throw new Error("can't insert, missing id");this._dict[t]=e,this.emit({type:"update",item:e,what:"insert"})}remove(e){const t="string"==typeof e?e:e.id,n=this._dict[t];void 0!==n&&(delete this._dict[t],this.emit({type:"update",item:n,what:"remove"}))}get(e){return this._dict[e]}getOrCreate(e,t){let n=this._dict[e];return n||(n=this._dict[e]=t,this.emit({type:"update",item:n,what:"insert"})),n}copy(e){this.dictionary=Object.assign({},e)}clone(){return Object.assign({},this._dict)}}var s=n(3423),a=n(3911),l=n(3675),c=n(9337);class d extends s.Ay{constructor(){super(...arguments),this.collection=new o,this.process=new o,this.images=new o,this.articles=new r,this.leadArticle=null,this.notes=[],this.audio=new o,this.actions=new o}get language(){return this.getGraphComponent(c.A,!0)}fromDocument(e,t){if(!isFinite(t.meta))throw new Error("info property missing in node");const n=e.metas[t.meta];if(n.collection&&(this.collection.dictionary=n.collection,this.collection.get("titles")&&Object.keys(this.collection.get("titles")).forEach(e=>{this.language.addLanguage(l.aL[e])})),n.process&&(this.process.dictionary=n.process),n.images){const e={};n.images.forEach(t=>e[t.quality]=t),this.images.dictionary=e}if(n.articles&&(this.articles.items=n.articles.map(e=>a.A.fromJSON(e)),void 0!==n.leadArticle&&(this.leadArticle=this.articles.getAt(n.leadArticle)),this.articles.items.forEach(e=>{Object.keys(e.data.titles).forEach(e=>{this.language.addLanguage(l.aL[e])}),e.language=this.language.outs.activeLanguage.value})),n.audio){const e={};n.audio.forEach(t=>{t.captionUris=t.captionUris||{},t.durations={},e[t.id]=t}),this.audio.dictionary=e}if(n.actions){const e={};n.actions.forEach(t=>{var n,i;null!==(n=t.animation)&&void 0!==n||(t.animation=""),null!==(i=t.audioId)&&void 0!==i||(t.audioId=""),e[t.id]=t}),this.actions.dictionary=e}return this.emit("load"),t.meta}toDocument(e,t){let n=null;if(this.collection.length>0&&(n={collection:this.collection.dictionary}),this.process.length>0&&(n=n||{},n.process=this.process.dictionary),this.images.length>0&&(n=n||{},n.images=this.images.items),this.articles.length>0){n=n||{};const e=this.articles.items;n.articles=e.map(e=>e.toJSON()),this.leadArticle&&(n.leadArticle=e.indexOf(this.leadArticle))}if(this.audio.length>0&&(n=n||{},n.audio=this.audio.items,n.audio.forEach(e=>{e.durations={}})),this.actions.length>0&&(n=n||{},n.actions=this.actions.items,n.actions.forEach(e=>{var t,n,i;(null===(t=e.animation)||void 0===t?void 0:t.length)<1&&delete e.animation,(null===(n=e.audioId)||void 0===n?void 0:n.length)<1&&delete e.audioId,(null===(i=e.annotationId)||void 0===i?void 0:i.length)<1&&delete e.annotationId})),n){e.metas=e.metas||[];const t=e.metas.length;return e.metas.push(n),t}}}d.typeName="CVMeta",d.text="Meta",d.icon="document"},8319:function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(3681))},8337:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const i={PI:3.141592653589793,DOUBLE_PI:6.283185307179586,HALF_PI:1.5707963267948966,QUARTER_PI:.7853981633974483,DEG2RAD:.017453292519943295,RAD2DEG:57.29577951308232,limit:(e,t,n)=>e<t?t:e>n?n:e,limitInt:function(e,t,n){return(e=Math.trunc(e))<t?t:e>n?n:e},normalize:(e,t,n)=>(e-t)/(n-t),normalizeLimit:(e,t,n)=>(e=(e-t)/(n-t))<0?0:e>1?1:e,denormalize:(e,t,n)=>(t+e)*(n-t),scale:(e,t,n,i,r)=>i+(e-t)/(n-t)*(r-i),scaleLimit:(e,t,n,i,r)=>i+((e=e<t?t:e>n?n:e)-t)/(n-t)*(r-i),deg2rad:function(e){return.017453292519943295*e},rad2deg:function(e){return 57.29577951308232*e},deltaRadians:function(e,t){return e=(e%=i.DOUBLE_PI)<0?e+i.DOUBLE_PI:e,(t=(t%=i.DOUBLE_PI)<0?t+i.DOUBLE_PI:t)-e>i.PI&&(e+=i.DOUBLE_PI),t-e},deltaDegrees:function(e,t){return e=(e%=i.DOUBLE_PI)<0?e+i.DOUBLE_PI:e,(t=(t%=i.DOUBLE_PI)<0?t+i.DOUBLE_PI:t)-e>i.PI&&(e+=i.DOUBLE_PI),t-e},curves:{linear:e=>e,easeIn:e=>Math.sin(e*i.HALF_PI),easeOut:e=>Math.cos(e*i.HALF_PI-i.PI)+1,ease:e=>.5*Math.cos(e*i.PI-i.PI)+.5,easeInQuad:e=>e*e,easeOutQuad:e=>e*(2-e),easeQuad:e=>e<.5?2*e*e:(4-2*e)*e-1,easeInCubic:e=>e*e*e,easeOutCubic:e=>--e*e*e+1,easeCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1- --e*e*e*e,easeQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e}},r=i},8347:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,i=(o=String).prototype,i.isPrototypeOf(n)||(null===(s=r.constructor)||void 0===s?void 0:s.name)===o.name)?"string":t;var n,i;var r,o,s})(t)===e,n=e=>t=>typeof t===e,i=t("string"),r=t("object"),o=t("array"),s=(a=null,e=>a===e);var a;const l=n("boolean"),c=e=>!(e=>null==e)(e),d=n("function"),u=(e,t)=>{if(o(e)){for(let n=0,i=e.length;n<i;++n)if(!t(e[n]))return!1;return!0}return!1},h=()=>{},p=(e,t)=>e===t;class m{constructor(e,t){this.tag=e,this.value=t}static some(e){return new m(!0,e)}static none(){return m.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?m.some(e(this.value)):m.none()}bind(e){return this.tag?e(this.value):m.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:m.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return c(e)?m.some(e):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const f=Array.prototype.indexOf,g=Array.prototype.push,v=(e,t)=>((e,t)=>f.call(e,t))(e,t)>-1,y=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);g.apply(t,e[n])}return t},b=(e,t)=>y(((e,t)=>{const n=e.length,i=new Array(n);for(let r=0;r<n;r++){const n=e[r];i[r]=t(n,r)}return i})(e,t)),A=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i.isSome())return i}return m.none()},_=(e,t,n=p)=>e.exists(e=>n(e,t)),w=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},x=(e,t)=>e?m.some(t):m.none(),C=e=>t=>t.options.get(e),E=C("link_assume_external_targets"),M=C("link_context_toolbar"),S=C("link_list"),T=C("link_default_target"),k=C("link_default_protocol"),L=C("link_target_list"),D=C("link_rel_list"),I=C("link_class_list"),R=C("link_title"),O=C("allow_unsafe_link_target"),P=C("link_quicklink");var B=tinymce.util.Tools.resolve("tinymce.util.Tools");const N=e=>i(e.value)?e.value:"",U=(e,t)=>{const n=[];return B.each(e,e=>{const r=(e=>i(e.text)?e.text:i(e.title)?e.title:"")(e);if(void 0!==e.menu){const i=U(e.menu,t);n.push({text:r,items:i})}else{const i=t(e);n.push({text:r,value:i})}}),n},F=(e=N)=>t=>m.from(t).map(t=>U(t,e)),z={sanitize:e=>F(N)(e),sanitizeWith:F,createUi:(e,t)=>n=>({name:e,type:"listbox",label:t,items:n}),getValue:N},H=Object.keys,j=Object.hasOwnProperty,V=(e,t,n,i)=>{((e,t)=>{const n=H(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}})(e,(e,r)=>{(t(e,r)?n:i)(e,r)})},Y=(e,t)=>j.call(e,t);var G=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Q=tinymce.util.Tools.resolve("tinymce.util.URI");const $=e=>c(e)&&"a"===e.nodeName.toLowerCase(),q=e=>$(e)&&!!Z(e),W=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),i=n.firstChild,r=new G(i,n),o=[];let s=i;do{t(s)&&o.push(s)}while(s=r.next());return o}},K=e=>/^\w+:/i.test(e),Z=e=>{var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},X=(e,t)=>{const n=["noopener"],i=e?e.split(/\s+/):[],r=e=>e.filter(e=>-1===B.inArray(n,e)),o=t?(e=>(e=r(e)).length>0?e.concat(n):n)(i):r(i);return o.length>0?(e=>B.trim(e.sort().join(" ")))(o):""},J=(e,t)=>(t=t||ne(e.selection.getRng())[0]||e.selection.getNode(),se(t)?m.from(e.dom.select("a[href]",t)[0]):m.from(e.dom.getParent(t,"a[href]"))),ee=(e,t)=>J(e,t).isSome(),te=(e,t)=>(e=>e.replace(/\uFEFF/g,""))(t.fold(()=>e.getContent({format:"text"}),e=>e.innerText||e.textContent||"")),ne=e=>W(e,q),ie=e=>B.grep(e,q),re=e=>ie(e).length>0,oe=e=>{const t=e.schema.getTextInlineElements(),n=e=>1===e.nodeType&&!$(e)&&!Y(t,e.nodeName.toLowerCase());if(J(e).exists(e=>e.hasAttribute("data-mce-block")))return!1;const i=e.selection.getRng();if(i.collapsed)return!0;return 0===W(i,n).length},se=e=>c(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),ae=(e,t)=>{const n={...t};if(0===D(e).length&&!O(e)){const e=X(n.rel,"_blank"===n.target);n.rel=e||null}return m.from(n.target).isNone()&&!1===L(e)&&(n.target=T(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||K(e)?e:t+"://"+e)(n.href,E(e)),n},le=(e,t,n)=>{const i=e.selection.getNode(),r=J(e,i),o=ae(e,(e=>{return t=["title","rel","class","target"],n=(t,n)=>(e[n].each(e=>{t[n]=e.length>0?e:null}),t),i={href:e.href},((e,t)=>{for(let n=0,i=e.length;n<i;n++)t(e[n],n)})(t,(e,t)=>{i=n(i,e,t)}),i;var t,n,i})(n));e.undoManager.transact(()=>{n.href===t.href&&t.attach(),r.fold(()=>{((e,t,n,i)=>{const r=e.dom;se(t)?pe(r,t,i):n.fold(()=>{e.execCommand("mceInsertLink",!1,i)},t=>{e.insertContent(r.createHTML("a",i,r.encode(t)))})})(e,i,n.text,o)},t=>{e.focus(),((e,t,n,i)=>{n.each(e=>{Y(t,"innerText")?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,i),e.selection.select(t)})(e,t,n.text,o)})})},ce=e=>{const{class:t,href:n,rel:i,target:r,text:o,title:a}=e;return((e,t)=>{const n={};var i;return V(e,t,(i=n,(e,t)=>{i[t]=e}),h),n})({class:t.getOrNull(),href:n,rel:i.getOrNull(),target:r.getOrNull(),text:o.getOrNull(),title:a.getOrNull()},(e,t)=>!1===s(e))},de=(e,t,n)=>{const i=((e,t)=>{const n=e.options.get,i={allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")},r=t.href;return{...t,href:Q.isDomSafe(r,"a",i)?r:""}})(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ce(i)):le(e,t,i)},ue=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact(()=>{const t=e.selection.getNode();se(t)?he(e,t):(e=>{const t=e.dom,n=e.selection,i=n.getBookmark(),r=n.getRng().cloneRange(),o=t.getParent(r.startContainer,"a[href]",e.getBody()),s=t.getParent(r.endContainer,"a[href]",e.getBody());o&&r.setStartBefore(o),s&&r.setEndAfter(s),n.setRng(r),e.execCommand("unlink"),n.moveToBookmark(i)})(e),e.focus()})})(e)},he=(e,t)=>{var n;const i=e.dom.select("img",t)[0];if(i){const r=e.dom.getParents(i,"a[href]",t)[0];r&&(null===(n=r.parentNode)||void 0===n||n.insertBefore(i,r),e.dom.remove(r))}},pe=(e,t,n)=>{var i;const r=e.select("img",t)[0];if(r){const t=e.create("a",n);null===(i=r.parentNode)||void 0===i||i.insertBefore(t,r),t.appendChild(r)}},me=e=>{return Y(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n},fe=(e,t)=>A(t,t=>me(t)?fe(e,t.items):x(t.value===e,t)),ge=(e,t,n,i)=>{const r=i[t],o=e.length>0;return void 0!==r?fe(r,n).map(t=>({url:{value:t.value,meta:{text:o?e:t.text,attach:h}},text:o?e:t.text})):m.none()},ve=(e,t)=>{const n={text:e.text,title:e.title},i=e=>{const t=(i=e.url,x(n.text.length<=0,m.from(null===(r=i.meta)||void 0===r?void 0:r.text).getOr(i.value)));var i,r;const o=(e=>{var t;return x(n.title.length<=0,m.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(e.url);return t.isSome()||o.isSome()?m.some({...t.map(e=>({text:e})).getOr({}),...o.map(e=>({title:e})).getOr({})}):m.none()},r=(e,i)=>{const r=(o=t,s=i,"link"===s?o.link:"anchor"===s?o.anchor:m.none()).getOr([]);var o,s;return ge(n.text,i,r,e)};return{onChange:(e,t)=>{const o=t.name;return"url"===o?i(e()):v(["anchor","link"],o)?r(e(),o):"text"===o||"title"===o?(n[o]=e()[o],m.none()):m.none()}}};var ye=tinymce.util.Tools.resolve("tinymce.util.Delay");const be=e=>{const t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?m.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>({...e,href:"mailto:"+t})}):m.none()},Ae=(e,t)=>n=>{const i=n.href;return 1===e&&!K(i)||0===e&&/^\s*www(\.|\d\.)/i.test(i)?m.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+i})}):m.none()},_e=(e,t)=>A([be,Ae(E(e),k(e))],e=>e(t)).fold(()=>Promise.resolve(t),n=>new Promise(i=>{((e,t,n)=>{const i=e.selection.getRng();ye.setEditorTimeout(e,()=>{e.windowManager.confirm(t,t=>{e.selection.setRng(i),n(t)})})})(e,n.message,e=>{i(e?n.preprocess(t):t)})})),we=e=>{const t=e.dom.select("a:not([href])"),n=b(t,e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]});return n.length>0?m.some([{text:"None",value:""}].concat(n)):m.none()},xe=e=>{const t=I(e);return t.length>0?z.sanitize(t):m.none()},Ce=e=>{try{return m.some(JSON.parse(e))}catch(e){return m.none()}},Ee=e=>{const t=t=>e.convertURL(t.value||t.url||"","href"),n=S(e);return new Promise(e=>{i(n)?fetch(n).then(e=>e.ok?e.text().then(Ce):Promise.reject()).then(e,()=>e(m.none())):d(n)?n(t=>e(m.some(t))):e(m.from(n))}).then(e=>e.bind(z.sanitizeWith(t)).map(e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))},Me=(e,t)=>{const n=D(e);if(n.length>0){const i=_(t,"_blank"),r=e=>X(z.getValue(e),i);return(!1===O(e)?z.sanitizeWith(r):z.sanitize)(n)}return m.none()},Se=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Te=e=>{const t=L(e);return o(t)?z.sanitize(t).orThunk(()=>m.some(Se)):!1===t?m.none():m.some(Se)},ke=(e,t,n)=>{const i=e.getAttrib(t,n);return null!==i&&i.length>0?m.some(i):m.none()},Le=(e,t)=>Ee(e).then(n=>{const i=((e,t)=>{const n=e.dom,i=oe(e)?m.some(te(e.selection,t)):m.none(),r=t.bind(e=>m.from(n.getAttrib(e,"href"))),o=t.bind(e=>m.from(n.getAttrib(e,"target"))),s=t.bind(e=>ke(n,e,"rel")),a=t.bind(e=>ke(n,e,"class"));return{url:r,text:i,title:t.bind(e=>ke(n,e,"title")),target:o,rel:s,linkClass:a}})(e,t);return{anchor:i,catalogs:{targets:Te(e),rels:Me(e,i.target),classes:xe(e),anchor:we(e),link:n},optNode:t,flags:{titleEnabled:R(e)}}}),De=e=>{const t=(e=>{const t=J(e);return Le(e,t)})(e);t.then(t=>{const n=((e,t)=>n=>{const i=n.getData();if(!i.url.value)return ue(e),void n.close();const r=e=>m.from(i[e]).filter(n=>!_(t.anchor[e],n)),o={href:i.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},s={href:i.url.value,attach:void 0!==i.url.meta&&i.url.meta.attach?i.url.meta.attach:h};_e(e,o).then(t=>{de(e,s,t)}),n.close()})(e,t);return((e,t,n)=>{const i=e.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),r=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],o=((e,t)=>{const n=e.anchor,i=n.url.getOr("");return{url:{value:i,meta:{original:{value:i}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:i,link:i,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,m.from(T(n))),s=e.catalogs,a=ve(o,s);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:y([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],i,r,w([s.anchor.map(z.createUi("anchor","Anchors")),s.rels.map(z.createUi("rel","Rel")),s.targets.map(z.createUi("target","Open link in...")),s.link.map(z.createUi("link","Link list")),s.classes.map(z.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onChange:(e,{name:t})=>{a.onChange(e.getData,{name:t}).each(t=>{e.setData(t)})},onSubmit:t}})(t,n,e)}).then(t=>{e.windowManager.open(t)})};var Ie=tinymce.util.Tools.resolve("tinymce.util.VK");const Re=e=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,n)},Oe=(e,t)=>e.dom.getParent(t,"a[href]"),Pe=e=>Oe(e,e.selection.getStart()),Be=(e,t)=>{if(t){const n=Z(t);if(/^#/.test(n)){const t=e.dom.select(n);t.length&&e.selection.scrollIntoView(t[0],!0)}else Re(t.href)}},Ne=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},Ue=e=>()=>{Be(e,Pe(e))},Fe=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),ze=e=>t=>{const n=()=>{t.setActive(!e.mode.isReadOnly()&&ee(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return n(),Fe(e,n)},He=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return n(),Fe(e,n)},je=e=>t=>{const n=()=>t.setEnabled((e=>1===(e.selection.isCollapsed()?ie(e.dom.getParents(e.selection.getStart())):ne(e.selection.getRng())).length)(e));return n(),Fe(e,n)},Ve=e=>t=>{const n=t=>{return re(t)||(n=e.selection.getRng(),ne(n).length>0);var n},i=e.dom.getParents(e.selection.getStart()),r=i=>{t.setEnabled(n(i)&&e.selection.isEditable())};return r(i),Fe(e,e=>r(e.parents))},Ye=e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(ee(e,n)),h};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ze(e)},label:"Link",predicate:t=>M(e)&&ee(e,t),initValue:()=>{return J(e).fold((t="",()=>t),Z);var t},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(ee(e,n)),ze(e)(t)},onAction:t=>{const n=t.getValue(),i=(t=>{const n=J(e),i=oe(e);if(n.isNone()&&i){const i=te(e.selection,n);return x(0===i.length,t)}return m.none()})(n);de(e,{href:n,attach:h},{href:n,text:i,title:m.none(),rel:m.none(),target:m.none(),class:m.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{ue(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Ue(e)(),t.hide()}}]})};e.add("link",e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=i(e)||l(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>i(e)||d(e)||u(e,r)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>l(e)||u(e,r),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ne(e),onSetup:ze(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ue(e),onSetup:je(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ue(e),onSetup:Ve(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ue(e),onSetup:je(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:He(e),onAction:Ne(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ue(e),onSetup:Ve(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:t=>e.dom.isEditable(t)?re(e.dom.getParents(t,"a"))?"link unlink openlink":"link":""})})(e),Ye(e),(e=>{e.on("click",t=>{const n=Oe(e,t.target);n&&Ie.metaKeyPressed(t)&&(t.preventDefault(),Be(e,n))}),e.on("keydown",t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){const n=Pe(e);n&&(t.preventDefault(),Be(e,n))}})})(e),(e=>{e.addCommand("mceLink",(t,n)=>{!0!==(null==n?void 0:n.dialog)&&P(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):De(e)})})(e),(e=>{e.addShortcut("Meta+K","",()=>{e.execCommand("mceLink")})})(e)})}()},8385:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r=n(3151),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?i.str`must contain at least ${e} valid item(s)`:i.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?i._`{minContains: ${e}}`:i._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:s,it:a}=e;let l,c;const{minContains:d,maxContains:u}=o;a.opts.next?(l=void 0===d?1:d,c=u):l=1;const h=t.const("len",i._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,r.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,r.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,r.alwaysValidSchema)(a,n)){let t=i._`${h} >= ${l}`;return void 0!==c&&(t=i._`${t} && ${h} <= ${c}`),void e.pass(t)}a.items=!0;const p=t.name("valid");function m(){const e=t.name("_valid"),n=t.let("count",0);f(e,()=>t.if(e,()=>function(e){t.code(i._`${e}++`),void 0===c?t.if(i._`${e} >= ${l}`,()=>t.assign(p,!0).break()):(t.if(i._`${e} > ${c}`,()=>t.assign(p,!1).break()),1===l?t.assign(p,!0):t.if(i._`${e} >= ${l}`,()=>t.assign(p,!0)))}(n)))}function f(n,i){t.forRange("i",0,h,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:r.Type.Num,compositeRule:!0},n),i()})}void 0===c&&1===l?f(p,()=>t.if(p,()=>t.break())):(t.let(p,!1),0===l?t.if(i._`${s}.length > 0`,m,()=>t.assign(p,!0)):m()),e.result(p,()=>e.reset())}};t.default=o},8415:(e,t,n)=>{"use strict";var i=n(4640),r=n(8337),o=n(5532),s=n(6763),a=n(3534),l=(n(9498),n(9521)),c=n(3198),d=n(8948),u=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const h=["sv-q0","sv-q1","sv-q2","sv-q3"],p=new o.Ay,m=new i.Pq0(0,1,0);class f extends l.Ay{constructor(e){super(e),this.quadrant=-1,this.adaptive=!0;const t=[];t.push(new i.Pq0(0,0,0)),t.push(new i.Pq0(0,1,0));const n=(new i.LoY).setFromPoints(t),r=new i.mrM({color:"#009cde",transparent:!0});r.toneMapped=!1,this.stemLine=new i.N1A(n,r),this.stemLine.frustumCulled=!1,this.stemLine.matrixAutoUpdate=!1,this.add(this.stemLine),this.update()}dispose(){this.stemLine.geometry.dispose(),this.stemLine.material.dispose(),super.dispose()}update(){const e=this.annotation.data;this.stemLine.scale.setScalar(e.scale),this.stemLine.position.y=e.offset,this.stemLine.updateMatrix();this.stemLine.material.color.fromArray(e.color),super.update()}renderHTMLElement(e,t,n){super.renderHTMLElement(e,t,n,this.stemLine,m);const i=r.A.scaleLimit(this.viewAngle*r.A.RAD2DEG,90,100,1,0),o=this.annotation.data.visible?i:0;if(this.stemLine.material.opacity=o,e.setOpacity(o),this.orientationQuadrant!==this.quadrant&&(e.classList.remove(h[this.quadrant]),e.classList.add(h[this.orientationQuadrant]),this.quadrant=this.orientationQuadrant),this.adaptive!==this.isAdaptive&&(this.isAdaptive?e.classList.remove("sv-static-width"):(e.classList.add("sv-static-width"),e.truncated=!1,e.classList.remove("sv-short"),e.requestUpdate()),this.adaptive=this.isAdaptive),this.setVisible(!this.isBehindCamera(this.stemLine,n)&&this.annotation.data.visible),this.adaptive&&!this.isAnimating&&this.annotation.data.expanded){if(!e.truncated){if(!e.classList.contains("sv-expanded"))return void e.requestUpdate().then(()=>{this.originalHeight=e.offsetHeight,this.originalWidth=e.offsetWidth,this.checkTruncate(e,t)});this.originalHeight=e.offsetHeight,this.originalWidth=e.offsetWidth}this.checkTruncate(e,t)}}createHTMLElement(){return new g(this)}checkTruncate(e,t){const n=this.quadrant==d.ox.TopLeft||this.quadrant==d.ox.TopRight,i=this.quadrant==d.ox.TopRight||this.quadrant==d.ox.BottomRight,r=i?e.getBoundingClientRect().left-t.left:e.getBoundingClientRect().right-t.left,o=n?e.getBoundingClientRect().bottom-t.top:e.getBoundingClientRect().top-t.top,s=n?o-this.originalHeight<=0:o+this.originalHeight>=t.height,a=i?r+this.originalWidth>=t.width:r-this.originalWidth<=0,l=s||a;l!==e.truncated&&(e.truncated=l,l?e.classList.add("sv-short"):e.classList.remove("sv-short"),e.requestUpdate().then(()=>{}))}}f.typeName="Extended",c.A.registerType(f);let g=class extends l.sf{constructor(e){super(e),this.isExpanded=void 0,this.onClickTitle=this.onClickTitle.bind(this),this.onClickArticle=this.onClickArticle.bind(this),this.onClickAudio=this.onClickAudio.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownArticle=this.onKeyDownArticle.bind(this),this.onClickOverlay=this.onClickOverlay.bind(this),this.addEventListener("keydown",this.onKeyDown),this.titleElement=this.appendElement("div"),this.titleElement.classList.add("sv-title"),this.titleElement.addEventListener("click",this.onClickTitle),this.titleElement.setAttribute("tabindex","0"),this.wrapperElement=this.appendElement("div"),this.contentElement=this.createElement("div",null,this.wrapperElement),this.contentElement.classList.add("sv-annotation-body"),this.contentElement.style.display="none"}firstConnected(){super.firstConnected(),this.classList.add("sv-extended-annotation")}update(e){super.update(e);const t=this.sprite.annotation,n=this.sprite.annotation.data,i=this.sprite.audioManager,r=!this.overlayed&&this.truncated&&(n.imageUri||n.articleId||t.lead.length>0);this.titleElement.innerText=this.sprite.annotation.title;const o=s.qy`
        ${n.imageUri&&!r?s.qy`<div><img alt="${t.imageAltText}" src="${this.sprite.assetManager.getAssetUrl(n.imageUri)}">${t.imageCredit?s.qy`<div class="sv-img-credit">${t.imageCredit}</div>`:null}</div>`:null}
        ${r?null:s.qy`<p>${(0,a._)(t.lead)}</p>`}
        ${n.audioId&&!this.overlayed?s.qy`<div id="audio_container" @pointerdown=${this.onClickAudio}></div>`:null}
        ${n.articleId&&!r?s.qy`<ff-button inline id="read-more" text="Read more..." icon="document" @keydown=${this.onKeyDownArticle} @pointerdown=${this.onClickArticle}></ff-button>`:null}
        ${r?s.qy`<ff-button inline id="more-info" text="+more info" @pointerdown=${this.onClickOverlay} ></ff-button>`:null}`;if((0,s.XX)(o,this.contentElement),p.fromArray(n.color),this.style.borderColor=p.toString(),this.isExpanded&&(this.contentElement.style.height="auto"),this.isExpanded!==n.expanded&&!this.overlayed)if(this.isExpanded=n.expanded,this.isExpanded){if(n.audioId){const e=this.querySelector("#audio_container");e.firstChild&&e.removeChild(e.firstChild),e.append(i.getPlayerById(n.audioId))}this.classList.add("sv-expanded"),this.style.minWidth=this.sprite.annotation.lead.length<40&&(!n.audioId||0==n.audioId.length)?"0":"",this.contentElement.style.display="block",this.contentElement.style.height="auto"}else this.classList.remove("sv-expanded"),this.contentElement.style.height="0",this.contentElement.style.display="none",i.activeId==n.audioId&&this.sprite.audioManager.stop();const l=this.querySelector(".sv-audio-view");if(n.audioId&&!this.overlayed)if(n.expanded){const e=this.querySelector("#audio_container");l&&e.removeChild(l),e.append(i.getPlayerById(n.audioId))}else!n.expanded&&l&&i.activeId==n.audioId&&i.stop()}onClickTitle(e){e.stopPropagation(),this.sprite.emitClickEvent()}onClickArticle(e){e.stopPropagation(),this.sprite.emitLinkEvent(this.sprite.annotation.data.articleId)}onClickAudio(e){e.stopPropagation()}onClickOverlay(e){e.stopPropagation();const t=this.contentElement;this.overlayed=!0,this.showOverlay(t)}onKeyDown(e){if("Space"===e.code||"Enter"===e.code){"more-info"===e.target.id?this.onClickOverlay(e):this.sprite.emitClickEvent()}}onKeyDownArticle(e){if("Space"===e.code||"Enter"===e.code){"read-more"===e.target.id&&this.onClickArticle(e)}}};g=u([(0,s.EM)("sv-extended-annotation")],g)},8420:(e,t,n)=>{"use strict";e.exports=r;var i=n(7134);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(6854)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},8424:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,I8:()=>u});var i=n(4640),r=n(8337),o=n(3423),s=n(2799);const a=new i.Pq0,l=new i.Pq0,c=new i.PTz,d=new i.O9p;var u;!function(e){e[e.XYZ=0]="XYZ",e[e.YZX=1]="YZX",e[e.ZXY=2]="ZXY",e[e.XZY=3]="XZY",e[e.YXZ=4]="YXZ",e[e.ZYX=5]="ZYX"}(u||(u={}));class h extends s.A{constructor(e,t){super(e,t),this.ins=this.addInputs(h.transformIns),this.outs=this.addOutputs(h.transformOuts),this._object3D=this.createObject3D(),this._object3D.matrixAutoUpdate=!1}get transform(){return this}get object3D(){return this._object3D}get children(){return this._children||[]}get matrix(){return this._object3D.matrix}update(e){const t=this._object3D,{position:n,rotation:i,order:o,scale:s}=this.ins,{matrix:l}=this.outs;t.position.fromArray(n.value),a.fromArray(i.value).multiplyScalar(r.A.DEG2RAD);const c=o.getOptionText();return t.rotation.setFromVector3(a,c),t.scale.fromArray(s.value),t.updateMatrix(),t.matrix.toArray(l.value),l.set(),!0}dispose(){this._object3D&&(this._object3D.children.slice().forEach(e=>this._object3D.remove(e)),this._object3D.parent&&this._object3D.parent.remove(this._object3D)),super.dispose()}setPropertiesFromMatrix(e){const t=!e;e=e||this._object3D.matrix;const{position:n,rotation:i,order:o,scale:s}=this.ins;e.decompose(a,c,l),a.toArray(n.value);const u=o.getOptionText();d.setFromQuaternion(c,u),a.setFromEuler(d),a.multiplyScalar(r.A.RAD2DEG).toArray(i.value),l.toArray(s.value),n.set(t),i.set(t),s.set(t)}addChild(e){super.addChild(e),this._object3D.add(e._object3D)}removeChild(e){this._object3D.remove(e._object3D),super.removeChild(e)}createObject3D(){let e=new i.B69;return e.name="Transform",e}}h.typeName="CTransform",h.transformIns={position:o.gK.Vector3("Transform.Position"),rotation:o.gK.Vector3("Transform.Rotation"),order:o.gK.Enum("Transform.Order",u),scale:o.gK.Scale3("Transform.Scale")},h.transformOuts={matrix:o.gK.Matrix4("Transform.Matrix")}},8428:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var i=n(6763),r=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let o=class extends i.Ay{constructor(){super(...arguments),this.name="",this.index=0,this.text="",this.placeholder="",this.align="left",this.initialValue="",this.requestFocus=!1}get inputElement(){return this.getElementsByTagName("input").item(0)}focus(){this.requestFocus=!0,this.performUpdate()}hasFocus(){const e=document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement;return this.inputElement===e}firstConnected(){this.classList.add("ff-control","ff-line-edit")}shouldUpdate(e){return!this.hasFocus()&&super.shouldUpdate(e)}render(){return i.qy`<input
            type="text" .value=${this.text} placeholder=${this.placeholder}
            @keydown=${this.onKeyDown} @change=${this.onChange} @input=${this.onInput}
            @focus=${this.onFocus} @blur=${this.onBlur}
            style="box-sizing: border-box; width:100%; text-align: ${this.align};">`}updated(){this.requestFocus&&(this.requestFocus=!1,this.inputElement.focus())}onKeyDown(e){const t=e.target;"Enter"===e.key?(this.commit(t),t.blur()):"Escape"===e.key&&(this.revert(t),t.blur())}onChange(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!1)}onInput(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!0)}onFocus(e){this.initialValue=e.target.value,e.target.select()}onBlur(e){this.commit(e.target),this.requestUpdate()}revert(e){e.value=this.initialValue,this.dispatchChangeEvent(e.value,!1)}commit(e){this.initialValue=e.value,this.dispatchChangeEvent(e.value,!1)}dispatchChangeEvent(e,t){this.dispatchEvent(new CustomEvent("change",{detail:{text:e,isEditing:t}}))}};r([(0,i.MZ)({type:String})],o.prototype,"name",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"index",void 0),r([(0,i.MZ)({type:String})],o.prototype,"text",void 0),r([(0,i.MZ)({type:String})],o.prototype,"placeholder",void 0),r([(0,i.MZ)({type:String})],o.prototype,"align",void 0),o=r([(0,i.EM)("ff-line-edit")],o);const s=o},8446:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(3331),r=n(449);class o extends i.A{static generateId(){return(0,r.A)()}constructor(e){super(),this.addEvents("update","dispose"),e?this.fromJSON(e):this._data=this.init()}get id(){return this._data.id}get data(){return this._data}set(e,t){this._data[e]=t,this.update()}get(e){return this._data[e]}update(){this.emit({type:"update",document:this})}dispose(){this.emit({type:"dispose",document:this}),this._data=null}fromJSON(e){return this._data={},this.inflate(e,this._data),this.update(),this}toJSON(e){return e=e||{},this.deflate(this._data,e),e}init(){return{}}inflate(e,t){Object.assign(t,e)}deflate(e,t){t=t||{},Object.assign(t,this._data)}}},8466:e=>{"use strict";e.exports=JSON.parse('{"asset":{"type":"application/si-dpo-3d.document+json","version":"2.0","generator":"Voyager"},"scene":0,"scenes":[{"nodes":[0,1],"setup":0}],"nodes":[{"translation":[0,0,15],"camera":0},{"name":"Lights","children":[2,3,4]},{"translation":[0,0,2],"rotation":[0.4829741,-0.1070728,0.1880998,0.8484633],"scale":[1,1,1],"name":"Shadow Caster #1","light":0},{"rotation":[0.3546969,0.163893,-0.3861077,0.8356136],"scale":[1,1,1],"name":"Shadow Caster #2","light":1},{"name":"Environment","light":2}],"setups":[{"units":"cm","interface":{"visible":true,"logo":true,"menu":true,"tools":true},"viewer":{"shader":"Default","toneMapping":true,"exposure":1,"gamma":2,"annotationsVisible":false},"reader":{"enabled":false,"position":"Overlay"},"navigation":{"type":"Orbit","enabled":true,"autoZoom":true,"lightsFollowCamera":true,"autoRotation":false,"orbit":{"orbit":[-24,-26,0],"offset":[0,0,150],"minOrbit":[-90,null,null],"maxOrbit":[90,null,null],"minOffset":[null,null,0.1],"maxOffset":[null,null,10000]}},"background":{"style":"RadialGradient","color0":[0.2,0.25,0.3],"color1":[0.01,0.03,0.05]},"floor":{"visible":false,"position":[0,-25,0],"size":50,"color":[0.6,0.75,0.8],"opacity":0.5,"receiveShadow":false},"grid":{"visible":false,"color":[0.5,0.7,0.8]},"tape":{"enabled":false,"startPosition":[0,0,0],"startDirection":[0,0,0],"endPosition":[0,0,0],"endDirection":[0,0,0]},"slicer":{"enabled":false,"axis":"X","inverted":false,"position":0.5}}],"cameras":[{"type":"perspective","perspective":{"yfov":52,"znear":0.1,"zfar":100000}}],"lights":[{"enabled":false,"color":[1,0.95,0.9],"intensity":0.01,"type":"directional","shadowEnabled":true,"shadowIntensity":50},{"enabled":false,"color":[0.9,0.95,1],"intensity":0.01,"type":"directional","shadowEnabled":true,"shadowIntensity":60},{"enabled":true,"intensity":1,"type":"environment"}]}')},8476:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return e?/-MMM-/.test(i)?n[e.month()]:t[e.month()]:t},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(3681))},8495:(e,t,n)=>{"use strict";let i=n(1024),r=n(9623),o=n(8290),s=n(6216),a=n(7114),l=n(6257);const c={empty:!0,space:!0};e.exports=class{constructor(e){this.input=e,this.root=new s,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,n,r,o=new i;o.name=e[1].slice(1),""===o.name&&this.unnamedAtrule(o,e),this.init(o,e[2]);let s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){o.source.end=this.getPosition(e[2]),o.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(r=l.length-1,n=l[r];n&&"space"===n[0];)n=l[--r];n&&(o.source.end=this.getPosition(n[3]||n[2]),o.source.end.offset++)}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}o.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(o.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(o,"params",l),s&&(e=l[l.length-1],o.source.end=this.getPosition(e[3]||e[2]),o.source.end.offset++,this.spaces=o.raws.between,o.raws.between="")):(o.raws.afterName="",o.params=""),a&&(o.nodes=[],this.current=o)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let n,i=0;for(let r=t-1;r>=0&&(n=e[r],"space"===n[0]||(i+=1,2!==i));r--);throw this.input.error("Missed semicolon","word"===n[0]?n[3]+1:n[2])}colon(e){let t,n,i,r=0;for(let[o,s]of e.entries()){if(n=s,i=n[0],"("===i&&(r+=1),")"===i&&(r-=1),0===r&&":"===i){if(t){if("word"===t[0]&&"progid"===t[1])continue;return o}this.doubleColon(n)}t=n}return!1}comment(e){let t=new r;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let n=e[1].slice(2,-2);if(/^\s*$/.test(n))t.text="",t.raws.left=n,t.raws.right="";else{let e=n.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=l(this.input)}decl(e,t){let n=new o;this.init(n,e[0][2]);let i,r=e[e.length-1];for(";"===r[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(r[3]||r[2]||function(e){for(let t=e.length-1;t>=0;t--){let n=e[t],i=n[3]||n[2];if(i)return i}}(e)),n.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];for(n.source.start=this.getPosition(e[0][2]),n.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}for(n.raws.between="";e.length;){if(i=e.shift(),":"===i[0]){n.raws.between+=i[1];break}"word"===i[0]&&/\w/.test(i[1])&&this.unknownWord([i]),n.raws.between+=i[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let s,a=[];for(;e.length&&(s=e[0][0],"space"===s||"comment"===s);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(i=e[t],"!important"===i[1].toLowerCase()){n.important=!0;let i=this.stringFrom(e,t);i=this.spacesFromEnd(e)+i," !important"!==i&&(n.raws.important=i);break}if("important"===i[1].toLowerCase()){let i=e.slice(0),r="";for(let e=t;e>0;e--){let t=i[e][0];if(r.trim().startsWith("!")&&"space"!==t)break;r=i.pop()[1]+r}r.trim().startsWith("!")&&(n.important=!0,n.raws.important=r,e=i)}if("space"!==i[0]&&"comment"!==i[0])break}e.some(e=>"space"!==e[0]&&"comment"!==e[0])&&(n.raws.between+=a.map(e=>e[1]).join(""),a=[]),this.raw(n,"value",a.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new a;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="",t.source.end=this.getPosition(e[2]),t.source.end.offset+=t.raws.ownSemicolon.length)}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,n=null,i=!1,r=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(n=l[0],a.push(l),"("===n||"["===n)r||(r=l),o.push("("===n?")":"]");else if(s&&i&&"{"===n)r||(r=l),o.push("}");else if(0===o.length){if(";"===n){if(i)return void this.decl(a,s);break}if("{"===n)return void this.rule(a);if("}"===n){this.tokenizer.back(a.pop()),t=!0;break}":"===n&&(i=!0)}else n===o[o.length-1]&&(o.pop(),0===o.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(r),t&&i){if(!s)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,n,i){let r,o,s,a,l=n.length,d="",u=!0;for(let e=0;e<l;e+=1)r=n[e],o=r[0],"space"!==o||e!==l-1||i?"comment"===o?(a=n[e-1]?n[e-1][0]:"empty",s=n[e+1]?n[e+1][0]:"empty",c[a]||c[s]||","===d.slice(-1)?u=!1:d+=r[1]):d+=r[1]:u=!1;if(!u){let i=n.reduce((e,t)=>e+t[1],"");e.raws[t]={raw:i,value:d}}e[t]=d}rule(e){e.pop();let t=new a;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)n=e.pop()[1]+n;return n}spacesAndCommentsFromStart(e){let t,n="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)n+=e.shift()[1];return n}spacesFromEnd(e){let t,n="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)n=e.pop()[1]+n;return n}stringFrom(e,t){let n="";for(let i=t;i<e.length;i++)n+=e[i][1];return e.splice(t,e.length-t),n}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word "+e[0][1],{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}},8541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const i=n(5265),r=n(3151),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:i}=t;Array.isArray(i)?s(e,i):(0,r.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:n,schema:o,data:s,keyword:a,it:l}=e;l.items=!0;const c=n.const("len",i._`${s}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(i._`${c} <= ${t.length}`);else if("object"==typeof o&&!(0,r.alwaysValidSchema)(l,o)){const o=n.var("valid",i._`${c} <= ${t.length}`);n.if((0,i.not)(o),()=>function(o){n.forRange("i",t.length,c,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:r.Type.Num},o),l.allErrors||n.if((0,i.not)(o),()=>n.break())})}(o)),e.ok(o)}}t.validateAdditionalItems=s,t.default=o},8569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6241),r=n(5265),o=n(3151),s=n(3151),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:a,parentSchema:l,it:c}=e,{opts:d}=c,u=(0,i.allSchemaProperties)(n),h=u.filter(e=>(0,o.alwaysValidSchema)(c,n[e]));if(0===u.length||h.length===u.length&&(!c.opts.unevaluated||!0===c.props))return;const p=d.strictSchema&&!d.allowMatchingProperties&&l.properties,m=t.name("valid");!0===c.props||c.props instanceof r.Name||(c.props=(0,s.evaluatedPropsToName)(t,c.props));const{props:f}=c;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,o.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",a,o=>{t.if(r._`${(0,i.usePattern)(e,n)}.test(${o})`,()=>{const i=h.includes(n);i||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:s.Type.Str},m),c.opts.unevaluated&&!0!==f?t.assign(r._`${f}[${o}]`,!0):i||c.allErrors||t.if((0,r.not)(m),()=>t.break())})})}!function(){for(const e of u)p&&g(e),c.allErrors?v(e):(t.var(m,!0),v(e),t.if(m))}()}};t.default=a},8570:(e,t,n)=>{var i=n(7264),r=n(7748),o=Object.hasOwnProperty,s=Object.create(null);for(var a in i)o.call(i,a)&&(s[i[a]]=a);var l=e.exports={to:{},get:{}};function c(e,t,n){return Math.min(Math.max(t,e),n)}function d(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}l.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=l.get.hsl(e),n="hsl";break;case"hwb":t=l.get.hwb(e),n="hwb";break;default:t=l.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},l.get.rgb=function(e){if(!e)return null;var t,n,r,s=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var a=2*n;s[n]=parseInt(t.slice(a,a+2),16)}r&&(s[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)s[n]=parseInt(t[n]+t[n],16);r&&(s[3]=parseInt(r+r,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(t[n+1],0);t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:o.call(i,t[1])?((s=i[t[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?s[3]=.01*parseFloat(t[4]):s[3]=parseFloat(t[4]))}for(n=0;n<3;n++)s[n]=c(s[n],0,255);return s[3]=c(s[3],0,1),s},l.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var e=r(arguments);return"#"+d(e[0])+d(e[1])+d(e[2])+(e[3]<1?d(Math.round(255*e[3])):"")},l.to.rgb=function(){var e=r(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},l.to.rgb.percent=function(){var e=r(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),i=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+i+"%)":"rgba("+t+"%, "+n+"%, "+i+"%, "+e[3]+")"},l.to.hsl=function(){var e=r(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},l.to.hwb=function(){var e=r(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},l.to.keyword=function(e){return s[e.slice(0,3)]}},8604:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3423);class r extends i.Ay{constructor(){super(...arguments),this._title="Untitled",this._timerStart=0}startTimer(){0===this._timerStart&&(this._timerStart=Date.now())}resetTimer(){this._timerStart=0}getTimerTime(){return this._timerStart>0?Date.now()-this._timerStart:0}setTitle(e){this._title=e}sendProperty(e,t){if("function"==typeof gtag){const n=void 0!==t?t.toString():"undefined";gtag("event",e.toLowerCase(),{scene_title:this._title,event_value:n})}}}r.typeName="CVAnalytics",r.text="Analytics",r.icon="",r.isSystemSingleton=!0},8628:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?r[n][0]:r[n][1]}function n(e){return r(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function i(e){return r(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function r(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return r(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return r(e)}return r(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},8645:()=>{},8659:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},8664:function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(3681))},8670:function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(3681))},8722:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var i=n(4640),r=n(8337);const o=new i.IUQ,s=(new i.IUQ,new i.Pq0),a=new i.Pq0,l=new i.kn4,c=new i.O9p,d=new i.PTz,u={PI:3.141592653589793,DOUBLE_PI:6.283185307179586,HALF_PI:1.5707963267948966,QUARTER_PI:.7853981633974483,DEG2RAD:.017453292519943295,RAD2DEG:57.29577951308232,composeOrbitMatrix:function(e,t,n){const r=e.x,o=e.y,s=e.z,a=t.x,l=t.y,c=t.z,d=Math.sin(r),u=Math.cos(r),h=Math.sin(o),p=Math.cos(o),m=Math.sin(s),f=Math.cos(s),g=p*f,v=f*h*d-m*u,y=f*h*u+m*d,b=p*m,A=d*h*m+f*u,_=m*h*u-f*d,w=-h,x=p*d,C=p*u,E=(n=n||new i.kn4).elements;return E[0]=g,E[1]=b,E[2]=w,E[3]=0,E[4]=v,E[5]=A,E[6]=x,E[7]=0,E[8]=y,E[9]=_,E[10]=C,E[11]=0,E[12]=a*g+l*v+c*y,E[13]=a*b+l*A+c*_,E[14]=a*w+l*x+c*C,E[15]=1,n},decomposeOrbitMatrix:function(e,t,n){c.setFromRotationMatrix(e,"ZYX"),t.setFromEuler(c),l.copy(e).invert(),o.set(0,0,0,1),o.applyMatrix4(l),n.x=-o.x,n.y=-o.y,n.z=-o.z},isMatrix4Identity:function(e){const t=e.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},decomposeTransformMatrix:function(e,t,n,i){l.fromArray(e),l.decompose(s,d,a),c.setFromQuaternion(d,"XYZ"),s.toArray(t),a.toArray(i),s.setFromEuler(c),o.multiplyScalar(r.A.RAD2DEG),s.toArray(n)}}},8736:function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(3681))},8738:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var i=n(8337),r=n(6763),o=n(7280),s=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let a=class extends r.Ay{constructor(){super(),this.direction="horizontal",this.value=0,this._isVertical=!1,this._offsetX=0,this._offsetY=0,this._knob=(new r.Ay).addClass("ff-knob").setStyle({display:"block",position:"relative "}),new o.A(this)}dragStart(e){const t=this._knob,n=this.getBoundingClientRect();e.target===this._knob?(this._offsetX=e.clientX-t.offsetLeft+.5*(t.clientWidth-t.offsetWidth),this._offsetY=e.clientY-t.offsetTop+.5*(t.clientHeight-t.offsetHeight)):(this._offsetX=n.left+.8*t.clientWidth,this._offsetY=n.top+.8*t.clientHeight),this.dragMove(e)}dragMove(e){const t=this._knob,n=e.clientX-this._offsetX,r=e.clientY-this._offsetY;let o=this._isVertical?1-r/(this.clientHeight-t.clientHeight):n/(this.clientWidth-t.clientWidth);o=i.A.limit(o,0,1),o!==this.value&&(this.value=o,this.emitChangeEvent(!0))}dragEnd(){this.emitChangeEvent(!1)}firstConnected(){this.setStyle({position:"relative",touchAction:"none"}),this.setAttribute("touch-action","none"),this.setAttribute("tabindex","0"),this.classList.add("ff-control","ff-linear-slider"),this.appendChild(this._knob)}update(e){if(e.has("direction")&&(this._isVertical="vertical"===this.direction,this.setClass("ff-horizontal",!this._isVertical),this.setClass("ff-vertical",this._isVertical)),e.has("value")){const e=i.A.limit(this.value,0,1),t=this._isVertical?0:100*e,n=this._isVertical?100*(1-e):0;this._knob.style.left=`${t.toFixed(3)}%`,this._knob.style.top=`${n.toFixed(3)}%`}super.update(e)}emitChangeEvent(e){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value,isDragging:e},bubbles:!0}))}};s([(0,r.MZ)({type:String})],a.prototype,"direction",void 0),s([(0,r.MZ)({type:Number})],a.prototype,"value",void 0),a=s([(0,r.EM)("ff-linear-slider")],a);const l=a},8759:(e,t,n)=>{"use strict";let i=n(7616),r=n(8093);const o=n(7129);let s=n(8227);n(4376);class a{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=r;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(e,t,n){let r;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=n,this._map=void 0;let a=s;this.result=new o(this._processor,r,this._opts),this.result.css=t;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new i(a,r,this._opts,t);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else c.clearAnnotation(),this.result.css=c.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}}e.exports=a,a.default=a},8843:function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(3681))},8892:()=>{},8912:(e,t,n)=>{"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var r;e.exports=C,C.WritableState=x;var o={deprecate:n(7239)},s=n(2365),a=n(5451).Buffer,l=n.g.Uint8Array||function(){};var c,d=n(9932),u=n(7111).getHighWaterMark,h=n(6116).F,p=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,f=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,A=h.ERR_UNKNOWN_ENCODING,_=d.errorOrDestroy;function w(){}function x(e,t,o){r=r||n(882),e=e||{},"boolean"!=typeof o&&(o=t instanceof r),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if("function"!=typeof r)throw new f;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(process.nextTick(r,i),process.nextTick(L,e,t),e._writableState.errorEmitted=!0,_(e,i)):(r(i),e._writableState.errorEmitted=!0,_(e,i),L(e,t))}(e,n,i,t,r);else{var o=T(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||S(e,n),i?process.nextTick(M,e,n,o,r):M(e,n,o,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(e){var t=this instanceof(r=r||n(882));if(!t&&!c.call(C,this))return new C(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function E(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function M(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),L(e,t)}function S(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,E(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,d=n.encoding,u=n.callback;if(E(e,t,!1,t.objectMode?1:c.length,c,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),L(e,t)})}function L(e,t){var n=T(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(k,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(6854)(C,s),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===C&&(e&&e._writableState instanceof x)}})):c=function(e){return e instanceof this},C.prototype.pipe=function(){_(this,new g)},C.prototype.write=function(e,t,n){var i,r=this._writableState,o=!1,s=!r.objectMode&&(i=e,a.isBuffer(i)||i instanceof l);return s&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=w),r.ending?function(e,t){var n=new b;_(e,n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var r;return null===n?r=new y:"string"==typeof n||t.objectMode||(r=new p("chunk",["string","Buffer"],n)),!r||(_(e,r),process.nextTick(i,r),!1)}(this,r,e,n))&&(r.pendingcb++,o=function(e,t,n,i,r,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,i,r);i!==s&&(n=!0,r="buffer",i=s)}var l=t.objectMode?1:i.length;t.length+=l;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,l,i,r,o);return c}(this,r,s,e,t,n)),o},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||S(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new A(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new m("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,L(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(e,t){t(e)}},8948:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>m,Ay:()=>p,ox:()=>h});var i=n(4640),r=n(6763),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const s=new i.Pq0,a=new i.Pq0,l=new i.Pq0,c=new i.Pq0,d=new i.I9Y,u=new i.I9Y;var h;!function(e){e[e.TopRight=0]="TopRight",e[e.TopLeft=1]="TopLeft",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight"}(h||(h={}));class p extends i.B69{constructor(){super(),this.isHTMLSprite=!0,this.viewAngle=0,this.orientationAngle=0,this.orientationQuadrant=h.TopLeft,this._elements=new Map,this._visible=!0,this.frustumCulled=!1}getVisible(){return this._visible}setVisible(e){e!==this._visible&&this._elements&&(this._visible=e,this._elements.forEach(t=>{t&&t.setVisible(e)}))}dispose(){this._elements.forEach((e,t)=>{e&&t.removeChild(e)}),this._elements.clear()}disposeHTMLElement(e){const t=this._elements.get(e);t&&(this._elements.delete(e),e.removeChild(t))}update(){this._elements.forEach(e=>{e&&this.updateHTMLElement(e)})}renderHTMLElement(e,t,n,i,r){i=i||this,s.set(0,0,0),s.applyMatrix4(i.modelViewMatrix),r?a.copy(r):a.set(0,1,0),a.applyMatrix4(i.modelViewMatrix),l.copy(a).sub(s).normalize(),c.set(0,0,1),this.viewAngle=l.angleTo(c),s.applyMatrix4(n.projectionMatrix),a.applyMatrix4(n.projectionMatrix),u.set(a.x,a.y),d.set(s.x,s.y),u.sub(d);const o=.5*(a.x+1)*t.width,h=.5*(1-a.y)*t.height;e.setPosition(o,h);const p=this.orientationAngle=u.angle();this.orientationQuadrant=Math.floor(2*p/Math.PI)}getHTMLElement(e){let t=this._elements.get(e);return t||(t=this.createHTMLElement(),t&&(t.setVisible(this._visible),e.appendChild(t),this._elements.set(e,t))),t}createHTMLElement(){return null}updateHTMLElement(e){e.requestUpdate()}}let m=class extends r.Ay{setVisible(e){this.style.display=e?"block":"none"}setOpacity(e){this.style.opacity=e.toString(),this.style.pointerEvents=e>0?"auto":"none"}setPosition(e,t){this.style.left=e.toString()+"px",this.style.top=t.toString()+"px"}};m=o([(0,r.EM)("ff-sprite-element")],m)},8974:function(e,t,n){!function(e){"use strict";var t=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,n=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,i=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,r=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:t,monthsShortStrictRegex:n,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(3681))},9038:function(e,t){var n,i,r;i=[],void 0===(r="function"==typeof(n=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function n(t){var n,i=t.exec(e.substring(f));if(i)return n=i[0],f+=n.length,n}for(var i,r,o,s,a,l=e.length,c=/^[ \t\n\r\u000c]+/,d=/^[, \t\n\r\u000c]+/,u=/^[^ \t\n\r\u000c]+/,h=/[,]+$/,p=/^\d+$/,m=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,f=0,g=[];;){if(n(d),f>=l)return g;i=n(u),r=[],","===i.slice(-1)?(i=i.replace(h,""),y()):v()}function v(){for(n(c),o="",s="in descriptor";;){if(a=e.charAt(f),"in descriptor"===s)if(t(a))o&&(r.push(o),o="",s="after descriptor");else{if(","===a)return f+=1,o&&r.push(o),void y();if("("===a)o+=a,s="in parens";else{if(""===a)return o&&r.push(o),void y();o+=a}}else if("in parens"===s)if(")"===a)o+=a,s="in descriptor";else{if(""===a)return r.push(o),void y();o+=a}else if("after descriptor"===s)if(t(a));else{if(""===a)return void y();s="in descriptor",f-=1}f+=1}}function y(){var t,n,o,s,a,l,c,d,u,h=!1,f={};for(s=0;s<r.length;s++)l=(a=r[s])[a.length-1],c=a.substring(0,a.length-1),d=parseInt(c,10),u=parseFloat(c),p.test(c)&&"w"===l?((t||n)&&(h=!0),0===d?h=!0:t=d):m.test(c)&&"x"===l?((t||n||o)&&(h=!0),u<0?h=!0:n=u):p.test(c)&&"h"===l?((o||n)&&(h=!0),0===d?h=!0:o=d):h=!0;h?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(f.url=i,t&&(f.w=t),n&&(f.d=n),o&&(f.h=o),g.push(f))}}})?n.apply(t,i):n)||(e.exports=r)},9052:(e,t,n)=>{var i=n(1741),r=n(2143),o=n(1274),s=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):o(e)}},9085:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var i=n(3331),r=n(3627),o=n(5624),s=n(3423),a=n(1860),l=n(7350);class c extends i.A{constructor(e){super({knownEvents:!1}),this.nodes=new r.A(a.A),this.components=new r.A(s.Ay),this.registry=e||new o.A,this.graph=new l.A(this,null),this.graph.activate()}getComponent(e,t=!1){return this.components.get(e,t)}getComponents(e){return this.components.getArray(e)}getComponentsByTag(e){return this.components.getByTag(e)}hasComponents(e){return this.components.has(e)}getMainComponent(e,t=!1){return this.graph.components.get(e,t)}getMainComponents(e){return this.graph.components.getArray(e)}getMainComponentsByTag(e){return this.graph.components.getByTag(e)}hasMainComponents(e){return this.graph.components.has(e)}getNode(e,t=!1){return this.nodes.get(e,t)}getNodes(e){return this.nodes.getArray(e)}getNodesByTag(e){return this.nodes.getByTag(e)}hasNodes(e){return this.nodes.has(e)}getMainNode(e,t=!1){return this.graph.nodes.get(e,t)}getMainNodes(e){return this.graph.nodes.getArray(e)}getMainNodesByTag(e){return this.graph.nodes.getByTag(e)}hasMainNodes(e){return this.graph.nodes.has(e)}findNodeByName(e,t){const n=this.nodes.getArray(t);for(let t=0,i=n.length;t<i;++t)if(n[t].name===e)return n[t]}toJSON(){return this.graph.toJSON()}fromJSON(e){this.graph.clear(),this.graph.fromJSON(e)}toString(e=!1){const t=this.nodes.getArray(),n=this.components.count(),i=`System - ${t.length} nodes, ${n} components.`;return e?i+"\n"+t.map(e=>e.toString(!0)).join("\n"):i}_addNode(e){this.nodes.add(e)}_removeNode(e){this.nodes.remove(e)}_addNodeTag(e,t){this.nodes.addByTag(e,t)}_removeNodeTag(e,t){this.nodes.removeByTag(e,t)}_addComponent(e){if(e.isSystemSingleton&&this.components.has(e))throw new Error(`only one component of type '${e.typeName}' allowed per system`);this.components.add(e)}_removeComponent(e){this.components.remove(e)}_addComponentTag(e,t){this.components.addByTag(e,t)}_removeComponentTag(e,t){this.components.removeByTag(e,t)}}},9095:function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(3681))},9158:function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},9163:(e,t,n)=>{"use strict";n.d(t,{A:()=>f,d:()=>h});var i=n(4640),r=n(8337),o=n(8722);const s=new i.kn4,a=new i.NRn,l=new i.Pq0,c=new i.Pq0,d=new i.PTz,u=new i.O9p;var h,p,m;!function(e){e[e.Orbit=0]="Orbit",e[e.Fly=1]="Fly",e[e.Walk=2]="Walk"}(h||(h={})),function(e){e[e.Off=0]="Off",e[e.Pan=1]="Pan",e[e.Orbit=2]="Orbit",e[e.Dolly=3]="Dolly",e[e.Zoom=4]="Zoom",e[e.PanDolly=5]="PanDolly",e[e.Roll=6]="Roll"}(p||(p={})),function(e){e[e.Off=0]="Off",e[e.Active=1]="Active",e[e.Release=2]="Release"}(m||(m={}));class f{constructor(e){this.orbit=new i.Pq0(0,0,0),this.offset=new i.Pq0(0,0,50),this.minOrbit=new i.Pq0(-90,-1/0,-1/0),this.maxOrbit=new i.Pq0(90,1/0,1/0),this.minOffset=new i.Pq0(-1/0,-1/0,.1),this.maxOffset=new i.Pq0(1/0,1/0,1e3),this.boundsRadius=0,this.orientationEnabled=!0,this.offsetEnabled=!0,this.controllerMode=h.Orbit,this.mode=p.Off,this.phase=m.Off,this.prevPinchDist=0,this.prevOffset=new i.Pq0(0,0,0),this.prevOrbit=new i.Pq0(0,0,0),this.deltaX=0,this.deltaY=0,this.deltaPinch=0,this.deltaWheel=0,this.viewportWidth=100,this.viewportHeight=100,this.camera=e}onPointer(e){if(e.isPrimary)if("pointer-down"===e.type)this.phase=m.Active;else if("pointer-up"===e.type)return this.phase=m.Release,!0;"pointer-down"===e.type&&(this.mode=this.getModeFromEvent(e));if(this.deltaX+=1*e.movementX,this.deltaY+=1*e.movementY,2===e.pointerCount){const t=e.activePositions,n=t[1].clientX-t[0].clientX,i=t[1].clientY-t[0].clientY,r=Math.sqrt(n*n+i*i),o=this.prevPinchDist||r;this.deltaPinch*=o>0?r/o:1,this.prevPinchDist=r}else this.deltaPinch=1,this.prevPinchDist=0;return!0}onTrigger(e){return"wheel"===e.type&&(this.deltaWheel+=r.A.limit(e.wheel,-1,1),!0)}onKeypress(e){const t=this.controllerMode==h.Orbit;if("ArrowUp"===e.key||"ArrowDown"===e.key){const n="ArrowUp"===e.key?-1:1;return this.deltaY=n*(t?20:6),this.mode=e.shiftKey?p.Pan:t?e.ctrlKey?p.Dolly:p.Orbit:e.ctrlKey?p.Orbit:p.Dolly,!0}if("ArrowLeft"===e.key||"ArrowRight"===e.key){const n="ArrowLeft"===e.key?-1:1;return this.deltaX=n*(t?20:6),this.mode=e.shiftKey?p.Pan:p.Orbit,!0}return!1}setViewportSize(e,t){this.viewportWidth=e,this.viewportHeight=t}updateController(e,t){const n=this.camera;e=e||n;const i=this.orbit,r=this.offset;o.A.decomposeOrbitMatrix(e.matrix,i,r),this.orbit.multiplyScalar(o.A.RAD2DEG),t&&(this.minOffset.min(r),this.maxOffset.max(r))}zoomExtents(e){if(this.controllerMode!=h.Orbit)return;const t=this.camera,n=this.offset;if(!t)return void console.warn("CameraController.zoomExtents - camera not set");l.copy(this.orbit).multiplyScalar(r.A.DEG2RAD),c.setScalar(0),o.A.composeOrbitMatrix(l,c,s),a.copy(e).applyMatrix4(s.transpose()),a.getSize(l),a.getCenter(c),n.x=c.x,n.y=c.y;const i=Math.max(l.x/t.aspect,l.y);if(t.isOrthographicCamera)n.z=1.1*i;else{const e=1/(2*Math.tan(t.fov*r.A.DEG2RAD*.5));n.z=c.z+i*e+.25*l.z}n.z>this.maxOffset.z&&(this.maxOffset.z=2*n.length())}updateCamera(e,t){const n=this.camera;return e=e||n,!(!this.update()&&!t)&&(l.copy(this.orbit).multiplyScalar(r.A.DEG2RAD),c.copy(this.offset),n.isOrthographicCamera&&(c.z=this.maxOffset.z,n.size=this.offset.z,n.far=2*this.maxOffset.z,n.updateProjectionMatrix()),o.A.composeOrbitMatrix(l,c,e.matrix),e.matrixWorldNeedsUpdate=!0,!0)}update(){const e=this.controllerMode==h.Orbit;if(this.phase===m.Off&&0===this.deltaWheel&&0===this.deltaX&&0===this.deltaY)return!1;if(0!==this.deltaWheel)return this.updatePose(0,0,e?.07*this.deltaWheel+1:this.deltaWheel,0,0,0),this.deltaWheel=0,!0;if(this.phase===m.Active)return(0!==this.deltaX||0!==this.deltaY||1!==this.deltaPinch)&&(this.updateByMode(),this.deltaX=0,this.deltaY=0,this.deltaPinch=1,!0);if(this.phase===m.Release){this.deltaX*=.85,this.deltaY*=.85,this.deltaPinch=1,this.updateByMode();return Math.abs(this.deltaX)+Math.abs(this.deltaY)<.1&&(this.mode=p.Off,this.phase=m.Off),!0}return(0!==this.deltaX||0!==this.deltaY)&&(this.updateByMode(),this.deltaX=0,this.deltaY=0,this.mode=p.Off,!0)}updateByMode(){const e=this.controllerMode==h.Orbit,t=e?1:0;switch(this.mode){case p.Orbit:this.updatePose(0,0,t,this.deltaY,this.deltaX,0);break;case p.Pan:this.updatePose(this.deltaX,this.deltaY,t,0,0,0);break;case p.Roll:this.updatePose(0,0,t,0,0,this.deltaX);break;case p.Dolly:this.updatePose(0,0,e?.0075*this.deltaY+1:.175*this.deltaY,0,0,0);break;case p.PanDolly:const n=.42*(this.deltaPinch-1)+1;this.updatePose(.75*this.deltaX,.75*this.deltaY,e?1/n:-10*(this.deltaPinch-1),0,0,0)}}updatePose(e,t,n,i,o,s){const{orbit:a,minOrbit:p,maxOrbit:m,offset:f,minOffset:g,maxOffset:v,camera:y}=this;this.prevOffset.copy(f),this.prevOrbit.copy(a).multiplyScalar(r.A.DEG2RAD);let b=-1;if(this.orientationEnabled&&(a.x+=b*i*220/this.viewportHeight,a.y+=b*o*220/this.viewportHeight,a.z+=b*s*220/this.viewportHeight,a.x=r.A.limit(a.x,p.x,m.x),a.y=r.A.limit(a.y,p.y,m.y),a.z=r.A.limit(a.z,p.z,m.z)),this.offsetEnabled)if(this.controllerMode==h.Orbit){const i=f.z=n*f.z;f.x+=e*i*b/this.viewportHeight,f.y-=t*i*b/this.viewportHeight,f.x=r.A.limit(f.x,g.x,v.x),f.y=r.A.limit(f.y,g.y,v.y),f.z=r.A.limit(f.z,g.z,v.z)}else{const i=this.controllerMode===h.Walk,o=this.boundsRadius/25;c.set(20*e*o*b/this.viewportHeight,i?0:20*t*o*b/this.viewportHeight,n*o),i&&(u.set(this.prevOrbit.x,0,this.prevOrbit.z),c.applyEuler(u)),f.x+=c.x,f.y-=c.y,f.z+=c.z,l.copy(a).multiplyScalar(r.A.DEG2RAD),y.getWorldQuaternion(d),this.offset.applyQuaternion(d),this.offset.applyEuler(u.set(-l.x,-l.y,-l.z))}}getModeFromEvent(e){if("mouse"===e.source){const t=e.originalEvent.button;if(0===t)return e.ctrlKey?p.Pan:e.altKey?p.Dolly:p.Orbit;if(2===t)return e.altKey?p.Roll:p.Pan;if(1===t)return p.Dolly}else if("touch"===e.source){const t=e.pointerCount;return 1===t?p.Orbit:2===t?p.PanDolly:p.Pan}}}},9171:(e,t)=>{"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=function(e){var t,i;return!1!==n(e)&&(void 0===(t=e.constructor)||!1!==n(i=t.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf"))}},9185:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var s=o(n(3745)),a=n(9585),l=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),d=new Set(["thead","tbody"]),u=new Set(["dd","dt"]),h=new Set(["rt","rp"]),p=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",c],["h1",c],["h2",c],["h3",c],["h4",c],["h5",c],["h6",c],["select",l],["input",l],["output",l],["button",l],["datalist",l],["textarea",l],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",u],["dt",u],["address",c],["article",c],["aside",c],["blockquote",c],["details",c],["div",c],["dl",c],["fieldset",c],["figcaption",c],["figure",c],["footer",c],["form",c],["header",c],["hr",c],["main",c],["nav",c],["ol",c],["pre",c],["section",c],["table",c],["ul",c],["rt",h],["rp",h],["tbody",d],["tfoot",d]]),m=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),g=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),v=/\s|\//,y=function(){function e(e,t){var n,i,r,o,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:!t.xmlMode,this.lowerCaseAttributeNames=null!==(i=t.lowerCaseAttributeNames)&&void 0!==i?i:!t.xmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:s.default)(this.options,this),null===(a=(o=this.cbs).onparserinit)||void 0===a||a.call(o,this)}return e.prototype.ontext=function(e,t){var n,i,r=this.getSlice(e,t);this.endIndex=t-1,null===(i=(n=this.cbs).ontext)||void 0===i||i.call(n,r),this.startIndex=t},e.prototype.ontextentity=function(e){var t,n,i=this.tokenizer.getSectionStart();this.endIndex=i-1,null===(n=(t=this.cbs).ontext)||void 0===n||n.call(t,(0,a.fromCodePoint)(e)),this.startIndex=i},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&m.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},e.prototype.emitOpenTag=function(e){var t,n,i,r;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&p.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,s,!0)}this.isVoidElement(e)||(this.stack.push(e),f.has(e)?this.foreignContext.push(!0):g.has(e)&&this.foreignContext.push(!1)),null===(r=(i=this.cbs).onopentagname)||void 0===r||r.call(i,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var n,i,r,o,s,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(f.has(l)||g.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,"br"),null===(o=(r=this.cbs).onopentag)||void 0===o||o.call(r,"br",{},!0),null===(a=(s=this.cbs).onclosetag)||void 0===a||a.call(s,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var d=this.stack.length-c;d--;)this.cbs.onclosetag(this.stack.pop(),0!==d);else this.stack.length=c;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,n,i=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===i&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,i,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,a.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var n,i;this.endIndex=t,null===(i=(n=this.cbs).onattribute)||void 0===i||i.call(n,this.attribname,this.attribvalue,e===s.QuoteType.Double?'"':e===s.QuoteType.Single?"'":e===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(v),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(i),"!".concat(n))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var i=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(i),"?".concat(n))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,n){var i,r,o,s;this.endIndex=t,null===(r=(i=this.cbs).oncomment)||void 0===r||r.call(i,this.getSlice(e,t-n)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,n){var i,r,o,s,a,l,c,d,u,h;this.endIndex=t;var p=this.getSlice(e,t-n);this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(i=this.cbs).oncdatastart)||void 0===r||r.call(i),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(d=(c=this.cbs).oncomment)||void 0===d||d.call(c,"[CDATA[".concat(p,"]]")),null===(h=(u=this.cbs).oncommentend)||void 0===h||h.call(u)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=this.stack.length;n>0;this.cbs.onclosetag(this.stack[--n],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,i;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(i=(n=this.cbs).onparserinit)||void 0===i||i.call(n,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=y},9203:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var i=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=i.get(e))&&void 0!==t?t:e}t.fromCodePoint=null!==(n=String.fromCodePoint)&&void 0!==n?n:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},t.replaceCodePoint=r,t.default=function(e){return(0,t.fromCodePoint)(r(e))}},9244:function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(3681))},9261:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,iO:()=>r.iO,oo:()=>r.oo});var i=n(8446),r=n(7297);class o extends i.A{setModel(e){this.data.uri=e,this.data.type=r.iO.Model,this.data.mimeType=this.guessAssetMimeType()}setGeometry(e){this.data.uri=e,this.data.type=r.iO.Geometry,this.data.mimeType=this.guessAssetMimeType()}setTexture(e,t){this.data.uri=e,this.data.type=r.iO.Image,this.data.mimeType=this.guessAssetMimeType(),this.data.mapType=t}isValid(){return!!this.data.uri&&void 0!==this.data.type}toString(){const e=this.data;return`Asset - type: '${r.iO[e.type]}', uri: '${e.uri}', mime type: '${e.mimeType||"(not set)"}'`}init(){return{uri:"",mimeType:"",type:void 0,mapType:void 0,byteSize:0,numFaces:0,numVertices:0,imageSize:0}}deflate(e,t){t.uri=e.uri,t.type=r.iO[e.type],e.mimeType&&(t.mimeType=e.mimeType),void 0!==e.mapType&&(t.mapType=r.oo[e.mapType]),e.byteSize>0&&(t.byteSize=e.byteSize),e.type!==r.iO.Model&&e.type!==r.iO.Geometry||e.numFaces>0&&(t.numFaces=e.numFaces),e.type!==r.iO.Model&&e.type!==r.iO.Image&&e.type!==r.iO.Texture||e.imageSize>0&&(t.imageSize=e.imageSize)}inflate(e,t){t.uri=e.uri,t.mimeType=e.mimeType,t.type=r.iO[e.type],t.mapType=r.oo[e.mapType],t.byteSize=e.byteSize||0,t.numFaces=e.numFaces||0,t.imageSize=e.imageSize||0,void 0===t.type&&(t.type=this.guessAssetType(),void 0===t.type&&console.warn(`failed to determine asset type from asset: ${t.uri}`)),void 0===t.mimeType&&(t.mimeType=this.guessAssetMimeType())}guessAssetType(){const e=this.data;if(void 0!==e.type&&r.iO[e.type])return e.type;if(e.mimeType){if(e.mimeType===o.mimeType.gltfJson||e.mimeType===o.mimeType.gltfBinary)return r.iO.Model;if(e.mimeType===o.mimeType.imageJpeg||e.mimeType===o.mimeType.imagePng)return r.iO.Image}const t=e.uri.split(".").pop().toLowerCase();return"gltf"===t||"glb"===t?r.iO.Model:"obj"===t||"ply"===t?r.iO.Geometry:"jpg"===t||"png"===t?r.iO.Image:void 0}guessAssetMimeType(){const e=this.data;if(e.mimeType)return e.mimeType;const t=e.uri.split(".").pop().toLowerCase();return"gltf"===t?o.mimeType.gltfJson:"glb"===t?o.mimeType.gltfBinary:"jpg"===t?o.mimeType.imageJpeg:"png"===t?o.mimeType.imagePng:""}}o.mimeType={gltfJson:"model/gltf+json",gltfBinary:"model/gltf-binary",imageJpeg:"image/jpeg",imagePng:"image/png"}},9264:(e,t,n)=>{"use strict";var i=n(6763),r=n(4743);const o=new WeakMap,s=(0,r.u$)(e=>t=>{const n=o.get(t);if(void 0===e&&t instanceof r.ab){if(void 0!==n||!o.has(t)){const e=t.committer.name;t.committer.element.removeAttribute(e)}}else e!==n&&t.setValue(e);o.set(t,e)});var a=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let l=class extends i.Ay{constructor(){super(...arguments),this.name="",this.index=0,this.rows=0,this.text="",this.placeholder="",this.readonly=!1,this.align="left",this.maxLength=0,this.initialValue=""}get textArea(){return this.getElementsByTagName("textarea").item(0)}select(){const e=this.textArea;e&&e.select()}focus(){const e=this.textArea;e&&e.focus()}blur(){const e=this.textArea;e&&e.blur()}hasFocus(){const e=document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement;return this.textArea===e}firstConnected(){this.classList.add("ff-control","ff-text-edit")}shouldUpdate(e){return!this.hasFocus()&&super.shouldUpdate(e)}render(){var e;return i.qy`<textarea
            .value=${this.text} placeholder=${this.placeholder} rows=${this.rows} aria-labelledby=${null!==(e=this.getAttribute("aria-labelledby"))&&void 0!==e?e:""}
            @keydown=${this.onKeyDown} @change=${this.onChange} @input=${this.onInput}
            @focus=${this.onFocus} @blur=${this.onBlur} 
            style="text-align: ${this.align};" ?readonly=${this.readonly} maxlength=${s(this.maxLength>0?this.maxLength:void 0)}}></textarea>`}onKeyDown(e){const t=e.target;"Escape"===e.key&&(this.revert(t),t.blur())}onChange(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!1)}onInput(e){e.stopPropagation(),e.preventDefault(),this.text=e.target.value,this.dispatchChangeEvent(this.text,!0)}onFocus(e){this.initialValue=e.target.value}onBlur(e){this.commit(e.target),this.requestUpdate()}revert(e){e.value=this.initialValue,this.dispatchChangeEvent(e.value,!1)}commit(e){this.initialValue=e.value,this.dispatchChangeEvent(e.value,!1)}dispatchChangeEvent(e,t){this.dispatchEvent(new CustomEvent("change",{detail:{text:e,isEditing:t}}))}};a([(0,i.MZ)({type:String})],l.prototype,"name",void 0),a([(0,i.MZ)({type:Number})],l.prototype,"index",void 0),a([(0,i.MZ)({type:Number})],l.prototype,"rows",void 0),a([(0,i.MZ)({type:String})],l.prototype,"text",void 0),a([(0,i.MZ)({type:String})],l.prototype,"placeholder",void 0),a([(0,i.MZ)({type:Boolean})],l.prototype,"readonly",void 0),a([(0,i.MZ)({type:String})],l.prototype,"align",void 0),a([(0,i.MZ)({type:Number})],l.prototype,"maxLength",void 0),l=a([(0,i.EM)("ff-text-edit")],l)},9271:(e,t,n)=>{var i=n(5451),r=i.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=s),s.prototype=Object.create(r.prototype),o(r,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},9293:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});class i{constructor(e,t,n){this._type=e,this._callback=t,this._context=n,this._publishers=[]}on(...e){return e.forEach(e=>{this._publishers.push(e),e.on(this._type,this._callback,this._context)}),this}off(){return this._publishers.forEach(e=>e.off(this._type,this._callback,this._context)),this._publishers.length=0,this}}},9309:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var i=n(3423);class r extends i.Ay{constructor(e,t){super(e,t),this.outs=this.addOutputs(r.pulseOuts),this.addEvent("pulse"),this.onAnimationFrame=this.onAnimationFrame.bind(this),this.context={time:new Date,secondsElapsed:0,secondsDelta:0,frameNumber:0,tickUpdated:!1,tockUpdated:!1},this._secondsStarted=.001*Date.now(),this._secondsStopped=this._secondsStarted,this._animHandler=0,this._pulseEvent={type:"pulse",context:this.context,systemUpdated:!1}}start(){0===this._animHandler&&(this._secondsStopped>0&&(this._secondsStarted+=.001*Date.now()-this._secondsStopped,this._secondsStopped=0),this._animHandler=window.requestAnimationFrame(this.onAnimationFrame))}stop(){0!==this._animHandler&&(0===this._secondsStopped&&(this._secondsStopped=.001*Date.now()),window.cancelAnimationFrame(this._animHandler),this._animHandler=0)}pulse(e){const{outs:t,context:n,_pulseEvent:i}=this;n.time.setTime(e);const r=.001*e-this._secondsStarted;n.secondsDelta=r-n.secondsElapsed,n.secondsElapsed=r,n.frameNumber++,t.time.setValue(n.secondsElapsed),t.frame.setValue(n.frameNumber),n.tickUpdated=this.system.graph.tick(n),i.systemUpdated=n.tickUpdated||n.tockUpdated,this.emit(i),n.tockUpdated=this.system.graph.tock(n)}onAnimationFrame(){this.pulse(Date.now()),this._animHandler=window.requestAnimationFrame(this.onAnimationFrame)}}r.typeName="CPulse",r.isSystemSingleton=!0,r.pulseOuts={time:i.gK.Number("Pulse.Time"),frame:i.gK.Integer("Pulse.Frame")}},9337:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(3423),r=n(3675),o=n(3600),s=n(946);class a extends i.Ay{constructor(){super(...arguments),this._sceneSetupTranslations={},this._uiLanguageTranslations={},this._sceneLanguages={},this._activeSeneLanguageTranslations={},this.ins=this.addInputs(a.ins),this.outs=this.addOutputs(a.outs),this.updateLanguage=e=>{const{ins:t,outs:n}=this;t.activeLanguage.value===e&&(n.activeLanguage.setValue(e),this.emit({type:"tag-update"}))},this.updateUILanguage=e=>{const{ins:t,outs:n}=this;t.uiLanguage.value===e&&n.uiLanguage.setValue(e)}}get assetReader(){return this.getMainComponent(o.A)}get sceneLanguages(){return Object.values(this._sceneLanguages)}nameString(){return r.BX[r.aL[this.ins.activeLanguage.value]]}codeString(){return r.aL[this.ins.activeLanguage.value]}create(){super.create()}update(){const{ins:e,outs:t}=this;if(0==this.sceneLanguages.length&&e.activeLanguage.value==t.activeLanguage.value&&this.addLanguage(t.activeLanguage.value),e.activeLanguage.changed&&e.activeLanguage.value!=t.activeLanguage.value){const t=e.activeLanguage.value;this.addLanguage(t),this.assetReader.getSystemJSON("language/string.resources."+r.aL[this.ins.activeLanguage.value].toLowerCase()+".json").then(e=>{this._activeSeneLanguageTranslations=e,this.updateLanguage(t)})}return e.uiLanguage.changed&&this.assetReader.getSystemJSON("language/string.resources."+r.aL[this.ins.uiLanguage.value].toLowerCase()+".json").then(t=>{this._uiLanguageTranslations=t,this.updateUILanguage(e.uiLanguage.value)}),!0}fromData(e){var t,n;const{ins:i,outs:o}=this;e=e||{};const s=null!==(t=r.aL[e.language||"EN"])&&void 0!==t?t:r.aL[r.Nm];this.ins.primarySceneLanguage.setValue(null!==(n=r.aL[e.language||"EN"])&&void 0!==n?n:r.aL[r.Nm]),this.assetReader.getSystemJSON("language/string.resources."+r.aL[this.ins.primarySceneLanguage.value].toLowerCase()+".json").then(e=>{this._sceneSetupTranslations=e}),i.activeLanguage.setValue(s)}toData(){const e=this.ins;return{language:r.aL[e.activeLanguage.getValidatedValue()]}}addLanguage(e){var t,n,i;null!==(t=(n=this._sceneLanguages)[i=r.aL[e]])&&void 0!==t||(n[i]={id:e,name:r.BX[r.aL[e]]})}getLocalizedString(e){return this.getLocalizedStringIn(e,this._activeSeneLanguageTranslations,r.aL[this.outs.activeLanguage.value])}getUILocalizedString(e){return this.getLocalizedStringIn(e,this._uiLanguageTranslations,r.aL[this.outs.uiLanguage.value])}getSceneSetupLocalizedString(e){return this.getLocalizedStringIn(e,this._sceneSetupTranslations,this.ins.primarySceneLanguage.value.toString())}getLocalizedStringIn(e,t={},n){return void 0===t?e:t[e]||e}}a.typeName="CVLanguageManager",a.text="Language",a.icon="",a.isSystemSingleton=!0,a.ins={enabled:i.gK.Boolean("Language.Enabled",!1),uiLanguage:i.gK.Enum("Interface.Language",r.aL,{preset:r.aL[r.Nm],enum:r.aL,options:(0,s.e)(r.BX).map(e=>r.BX[e])}),primarySceneLanguage:i.gK.Enum("Interface.Language",r.aL,{preset:r.aL[r.Nm],enum:r.aL,options:(0,s.e)(r.BX).map(e=>r.BX[e])}),activeLanguage:i.gK.Enum("Interface.Language",r.aL,{preset:r.aL[r.Nm],enum:r.aL,options:(0,s.e)(r.BX).map(e=>r.BX[e])})},a.outs={activeLanguage:i.gK.Enum("Interface.Language",r.aL,r.aL.EN),uiLanguage:i.gK.Enum("Interface.Language",r.aL,r.aL.EN)}},9348:(e,t,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},9367:function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},9376:function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(3681))},9463:()=>{!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,i=(o=String).prototype,i.isPrototypeOf(n)||(null===(s=r.constructor)||void 0===s?void 0:s.name)===o.name)?"string":t;var n,i;var r,o,s})(t)===e,n=e=>t=>typeof t===e,i=e=>t=>e===t,r=t("string"),o=t("object"),s=t("array"),a=i(null),l=n("boolean"),c=i(void 0),d=e=>!(e=>null==e)(e),u=n("function"),h=n("number"),p=()=>{},m=e=>()=>e,f=e=>e,g=(e,t)=>e===t;function v(e,...t){return(...n)=>{const i=t.concat(n);return e.apply(null,i)}}const y=e=>t=>!e(t),b=e=>e(),A=m(!1),_=m(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const x=Array.prototype.slice,C=Array.prototype.indexOf,E=Array.prototype.push,M=(e,t)=>{return n=e,i=t,C.call(n,i)>-1;var n,i},S=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return!0}return!1},T=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},k=(e,t)=>{const n=e.length,i=new Array(n);for(let r=0;r<n;r++){const n=e[r];i[r]=t(n,r)}return i},L=(e,t)=>{for(let n=0,i=e.length;n<i;n++){t(e[n],n)}},D=(e,t)=>{const n=[],i=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];(t(o,r)?n:i).push(o)}return{pass:n,fail:i}},I=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},R=(e,t,n)=>(((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(e,(e,i)=>{n=t(n,e,i)}),n),O=(e,t,n)=>(L(e,(e,i)=>{n=t(n,e,i)}),n),P=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return w.some(r);if(n(r,i))break}return w.none()})(e,t,A),B=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return w.some(n)}return w.none()},N=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);E.apply(t,e[n])}return t},U=(e,t)=>N(k(e,t)),F=(e,t)=>{for(let n=0,i=e.length;n<i;++n){if(!0!==t(e[n],n))return!1}return!0},z=(e,t)=>{const n={};for(let i=0,r=e.length;i<r;i++){const r=e[i];n[String(r)]=t(r,i)}return n},H=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),j=e=>H(e,0),V=e=>H(e,e.length-1),Y=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i.isSome())return i}return w.none()},G=Object.keys,Q=Object.hasOwnProperty,$=(e,t)=>{const n=G(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}},q=(e,t)=>W(e,(e,n)=>({k:n,v:t(e,n)})),W=(e,t)=>{const n={};return $(e,(e,i)=>{const r=t(e,i);n[r.k]=r.v}),n},K=(e,t)=>{const n={};return((e,t,n,i)=>{$(e,(e,r)=>{(t(e,r)?n:i)(e,r)})})(e,t,(e=>(t,n)=>{e[n]=t})(n),p),n},Z=(e,t)=>{const n=[];return $(e,(e,i)=>{n.push(t(e,i))}),n},X=e=>Z(e,f),J=(e,t)=>Q.call(e,t),ee="undefined"!=typeof window?window:Function("return this;")(),te=(e,t)=>((e,t)=>{let n=null!=t?t:ee;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),ne=(e,t)=>{const n=((e,t)=>te(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},ie=Object.getPrototypeOf,re=e=>{const t=te("ownerDocument.defaultView",e);return o(e)&&((e=>ne("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ie(e).constructor.name))},oe=e=>e.dom.nodeName.toLowerCase(),se=e=>e.dom.nodeType,ae=e=>t=>se(t)===e,le=e=>8===se(e)||"#comment"===oe(e),ce=e=>de(e)&&re(e.dom),de=ae(1),ue=ae(3),he=ae(9),pe=ae(11),me=e=>t=>de(t)&&oe(t)===e,fe=(e,t,n)=>{if(!(r(n)||l(n)||h(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ge=(e,t,n)=>{fe(e.dom,t,n)},ve=(e,t)=>{const n=e.dom;$(t,(e,t)=>{fe(n,t,e)})},ye=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},be=(e,t)=>w.from(ye(e,t)),Ae=(e,t)=>{e.dom.removeAttribute(t)},_e=e=>O(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),we=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},xe={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return we(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return we(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return we(n)},fromDom:we,fromPoint:(e,t,n)=>w.from(e.dom.elementFromPoint(t,n)).map(we)},Ce=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ee=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Me=(e,t)=>{const n=void 0===t?document:t.dom;return Ee(n)?w.none():w.from(n.querySelector(e)).map(xe.fromDom)},Se=(e,t)=>e.dom===t.dom,Te=(e,t)=>{const n=e.dom,i=t.dom;return n!==i&&n.contains(i)},ke=Ce,Le=e=>xe.fromDom(e.dom.ownerDocument),De=e=>he(e)?e:Le(e),Ie=e=>w.from(e.dom.parentNode).map(xe.fromDom),Re=e=>w.from(e.dom.parentElement).map(xe.fromDom),Oe=(e,t)=>{const n=u(t)?t:A;let i=e.dom;const r=[];for(;null!==i.parentNode&&void 0!==i.parentNode;){const e=i.parentNode,t=xe.fromDom(e);if(r.push(t),!0===n(t))break;i=e}return r},Pe=e=>w.from(e.dom.previousSibling).map(xe.fromDom),Be=e=>w.from(e.dom.nextSibling).map(xe.fromDom),Ne=e=>k(e.dom.childNodes,xe.fromDom),Ue=(e,t)=>{const n=e.dom.childNodes;return w.from(n[t]).map(xe.fromDom)},Fe=(e,t)=>{Ie(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},ze=(e,t)=>{Be(e).fold(()=>{Ie(e).each(e=>{je(e,t)})},e=>{Fe(e,t)})},He=(e,t)=>{const n=(e=>Ue(e,0))(e);n.fold(()=>{je(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},je=(e,t)=>{e.dom.appendChild(t.dom)},Ve=(e,t)=>{Fe(e,t),je(t,e)},Ye=(e,t)=>{L(t,(n,i)=>{const r=0===i?e:t[i-1];ze(r,n)})},Ge=(e,t)=>{L(t,t=>{je(e,t)})},Qe=e=>{e.dom.textContent="",L(Ne(e),e=>{$e(e)})},$e=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},qe=e=>{const t=Ne(e);t.length>0&&Ye(e,t),$e(e)},We=(e,t)=>xe.fromDom(e.dom.cloneNode(t)),Ke=e=>We(e,!1),Ze=e=>We(e,!0),Xe=(e,t)=>{const n=xe.fromTag(t),i=_e(e);return ve(n,i),n},Je=["tfoot","thead","tbody","colgroup"],et=(e,t,n)=>({element:e,rowspan:t,colspan:n}),tt=(e,t,n)=>({element:e,cells:t,section:n}),nt=(e,t,n)=>({element:e,isNew:t,isLocked:n}),it=(e,t,n,i)=>({element:e,cells:t,section:n,isNew:i}),rt=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),ot=m(rt),st=rt?e=>xe.fromDom(e.dom.getRootNode()):De,at=e=>{const t=st(e);return pe(n=t)&&d(n.dom.host)?w.some(t):w.none();var n},lt=e=>xe.fromDom(e.dom.host),ct=e=>d(e.dom.shadowRoot),dt=e=>{const t=ue(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return at(xe.fromDom(t)).fold(()=>n.body.contains(t),(i=dt,r=lt,e=>i(r(e))));var i,r},ut=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return xe.fromDom(t)},ht=(e,t)=>{let n=[];return L(Ne(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(ht(e,t))}),n},pt=(e,t,n)=>((e,t,n)=>I(Oe(e,n),t))(e,e=>Ce(e,t),n),mt=(e,t)=>((e,t)=>I(Ne(e),t))(e,e=>Ce(e,t)),ft=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return Ee(n)?[]:k(n.querySelectorAll(e),xe.fromDom)})(t,e);var gt=(e,t,n,i,r)=>e(n,i)?w.some(n):u(r)&&r(n)?w.none():t(n,i,r);const vt=(e,t,n)=>{let i=e.dom;const r=u(n)?n:A;for(;i.parentNode;){i=i.parentNode;const e=xe.fromDom(i);if(t(e))return w.some(e);if(r(e))break}return w.none()},yt=(e,t,n)=>gt((e,t)=>t(e),vt,e,t,n),bt=(e,t,n)=>vt(e,e=>Ce(e,t),n),At=(e,t)=>((e,t)=>P(e.dom.childNodes,e=>t(xe.fromDom(e))).map(xe.fromDom))(e,e=>Ce(e,t)),_t=(e,t)=>Me(t,e),wt=(e,t,n)=>gt((e,t)=>Ce(e,t),bt,e,t,n),xt=(e,t,n=g)=>e.exists(e=>n(e,t)),Ct=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},Et=(e,t)=>e?w.some(t):w.none(),Mt=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,St=(e,t,n=0,i)=>{const r=e.indexOf(t,n);return-1!==r&&(!!c(i)||r+t.length<=i)},Tt=(e,t)=>Mt(e,t,0),kt=(e,t)=>Mt(e,t,e.length-t.length),Lt=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),Dt=e=>e.length>0,It=e=>void 0!==e.style&&u(e.style.getPropertyValue),Rt=(e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);It(e)&&e.style.setProperty(t,n)},Ot=(e,t,n)=>{const i=e.dom;Rt(i,t,n)},Pt=(e,t)=>{const n=e.dom;$(t,(e,t)=>{Rt(n,t,e)})},Bt=(e,t)=>{const n=e.dom,i=window.getComputedStyle(n).getPropertyValue(t);return""!==i||dt(e)?i:Nt(n,t)},Nt=(e,t)=>It(e)?e.style.getPropertyValue(t):"",Ut=(e,t)=>{const n=e.dom,i=Nt(n,t);return w.from(i).filter(e=>e.length>0)},Ft=(e,t)=>{((e,t)=>{It(e)&&e.style.removeProperty(t)})(e.dom,t),xt(be(e,"style").map(Lt),"")&&Ae(e,"style")},zt=(e,t,n=0)=>be(e,t).map(e=>parseInt(e,10)).getOr(n),Ht=(e,t)=>zt(e,t,1),jt=e=>me("col")(e)?zt(e,"span",1)>1:Ht(e,"colspan")>1,Vt=e=>Ht(e,"rowspan")>1,Yt=(e,t)=>parseInt(Bt(e,t),10),Gt=m(10),Qt=m(10),$t=(e,t)=>qt(e,t,_),qt=(e,t,n)=>U(Ne(e),e=>Ce(e,t)?n(e)?[e]:[]:qt(e,t,n)),Wt=(e,t)=>((e,t,n=A)=>n(t)?w.none():M(e,oe(t))?w.some(t):bt(t,e.join(","),e=>Ce(e,"table")||n(e)))(["td","th"],e,t),Kt=e=>$t(e,"th,td"),Zt=e=>Ce(e,"colgroup")?mt(e,"col"):U(en(e),e=>mt(e,"col")),Xt=(e,t)=>wt(e,"table",t),Jt=e=>$t(e,"tr"),en=e=>Xt(e).fold(m([]),e=>mt(e,"colgroup")),tn=(e,t)=>k(e,e=>{if("colgroup"===oe(e)){const t=k(Zt(e),e=>{const t=zt(e,"span",1);return et(e,1,t)});return tt(e,t,"colgroup")}{const n=k(Kt(e),e=>{const t=zt(e,"rowspan",1),n=zt(e,"colspan",1);return et(e,t,n)});return tt(e,n,t(e))}}),nn=e=>Ie(e).map(e=>{const t=oe(e);return(e=>M(Je,e))(t)?t:"tbody"}).getOr("tbody"),rn=e=>{const t=Jt(e),n=[...en(e),...t];return tn(n,nn)},on=e=>{let t,n=!1;return(...i)=>(n||(n=!0,t=e.apply(null,i)),t)},sn=()=>an(0,0),an=(e,t)=>({major:e,minor:t}),ln={nu:an,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?sn():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.test(t))return i}})(e,t);if(!n)return{major:0,minor:0};const i=e=>Number(t.replace(n,"$"+e));return an(i(1),i(2))})(e,n)},unknown:sn},cn=(e,t)=>{const n=String(t).toLowerCase();return P(e,e=>e.search(n))},dn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,un=e=>t=>St(t,e),hn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>St(e,"edge/")&&St(e,"chrome")&&St(e,"safari")&&St(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,dn],search:e=>St(e,"chrome")&&!St(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>St(e,"msie")||St(e,"trident")},{name:"Opera",versionRegexes:[dn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:un("firefox")},{name:"Safari",versionRegexes:[dn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(St(e,"safari")||St(e,"mobile/"))&&St(e,"applewebkit")}],pn=[{name:"Windows",search:un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>St(e,"iphone")||St(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:un("linux"),versionRegexes:[]},{name:"Solaris",search:un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],mn={browsers:m(hn),oses:m(pn)},fn="Edge",gn="Chromium",vn="Opera",yn="Firefox",bn="Safari",An=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isEdge:i(fn),isChromium:i(gn),isIE:i("IE"),isOpera:i(vn),isFirefox:i(yn),isSafari:i(bn)}},_n={unknown:()=>An({current:void 0,version:ln.unknown()}),nu:An,edge:m(fn),chromium:m(gn),ie:m("IE"),opera:m(vn),firefox:m(yn),safari:m(bn)},wn="Windows",xn="Android",Cn="Linux",En="macOS",Mn="Solaris",Sn="FreeBSD",Tn="ChromeOS",kn=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isWindows:i(wn),isiOS:i("iOS"),isAndroid:i(xn),isMacOS:i(En),isLinux:i(Cn),isSolaris:i(Mn),isFreeBSD:i(Sn),isChromeOS:i(Tn)}},Ln={unknown:()=>kn({current:void 0,version:ln.unknown()}),nu:kn,windows:m(wn),ios:m("iOS"),android:m(xn),linux:m(Cn),macos:m(En),solaris:m(Mn),freebsd:m(Sn),chromeos:m(Tn)},Dn=(e,t,n)=>{const i=mn.browsers(),r=mn.oses(),o=t.bind(e=>((e,t)=>Y(t.brands,t=>{const n=t.brand.toLowerCase();return P(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:ln.nu(parseInt(t.version,10),0)}))}))(i,e)).orThunk(()=>((e,t)=>cn(e,t).map(e=>{const n=ln.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(i,e)).fold(_n.unknown,_n.nu),s=((e,t)=>cn(e,t).map(e=>{const n=ln.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e).fold(Ln.unknown,Ln.nu),a=((e,t,n,i)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,s=e.isiOS()||e.isAndroid(),a=s||i("(pointer:coarse)"),l=r||!o&&s&&i("(min-device-width:768px)"),c=o||s&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:m(r),isiPhone:m(o),isTablet:m(l),isPhone:m(c),isTouch:m(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:m(d),isDesktop:m(u)}})(s,o,e,n);return{browser:o,os:s,deviceType:a}},In=e=>window.matchMedia(e).matches;let Rn=on(()=>Dn(navigator.userAgent,w.from(navigator.userAgentData),In));const On=()=>Rn(),Pn=(e,t)=>{const n=n=>{const i=t(n);if(i<=0||null===i){const t=Bt(n,e);return parseFloat(t)||0}return i},i=(e,t)=>O(t,(t,n)=>{const i=Bt(e,n),r=void 0===i?0:parseInt(i,10);return isNaN(r)?t:t+r},0);return{set:(t,n)=>{if(!h(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const i=t.dom;It(i)&&(i.style[e]=n+"px")},get:n,getOuter:n,aggregate:i,max:(e,t,n)=>{const r=i(e,n);return t>r?t-r:0}}},Bn=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?w.none():w.some(t)})(e).getOr(t),Nn=(e,t,n)=>Bn(Bt(e,t),n),Un=(e,t)=>{const n=e.dom,i=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?i:((e,t,n,i)=>t-Nn(e,`padding-${n}`,0)-Nn(e,`padding-${i}`,0)-Nn(e,`border-${n}-width`,0)-Nn(e,`border-${i}-width`,0))(e,i,"left","right")},Fn=Pn("width",e=>e.dom.offsetWidth),zn=e=>Fn.get(e),Hn=e=>Fn.getOuter(e),jn=e=>Un(e,"content-box"),Vn=e=>Nn(e,"width",e.dom.offsetWidth),Yn=(e,t,n)=>{const i=e.cells,r=i.slice(0,t),o=i.slice(t),s=r.concat(n).concat(o);return $n(e,s)},Gn=(e,t,n)=>Yn(e,t,[n]),Qn=(e,t,n)=>{e.cells[t]=n},$n=(e,t)=>it(e.element,t,e.section,e.isNew),qn=(e,t)=>e.cells[t],Wn=(e,t)=>qn(e,t).element,Kn=e=>e.cells.length,Zn=e=>{const t=D(e,e=>"colgroup"===e.section);return{rows:t.fail,cols:t.pass}},Xn=(e,t,n)=>{const i=k(e.cells,n);return it(t(e.element),i,e.section,!0)},Jn="data-snooker-locked-cols",ei=e=>be(e,Jn).bind(e=>w.from(e.match(/\d+/g))).map(e=>z(e,_)),ti=e=>{const t=O(Zn(e).rows,(e,t)=>(L(t.cells,(t,n)=>{t.isLocked&&(e[n]=!0)}),e),{}),n=Z(t,(e,t)=>parseInt(t,10));return((e,t)=>{const n=x.call(e,0);return n.sort(t),n})(n)},ni=(e,t)=>e+","+t,ii=(e,t)=>{const n=U(e.all,e=>e.cells);return I(n,t)},ri=e=>{const t={},n=[],i=j(e).map(e=>e.element).bind(Xt).bind(ei).getOr({});let r=0,o=0,s=0;const{pass:a,fail:l}=D(e,e=>"colgroup"===e.section);L(l,e=>{const a=[];L(e.cells,e=>{let n=0;for(;void 0!==t[ni(s,n)];)n++;const r=((e,t)=>J(e,t)&&void 0!==e[t]&&null!==e[t])(i,n.toString()),l=((e,t,n,i,r,o)=>({element:e,rowspan:t,colspan:n,row:i,column:r,isLocked:o}))(e.element,e.rowspan,e.colspan,s,n,r);for(let i=0;i<e.colspan;i++)for(let r=0;r<e.rowspan;r++){const e=n+i,a=ni(s+r,e);t[a]=l,o=Math.max(o,e+1)}a.push(l)}),r++,n.push(tt(e.element,a,e.section)),s++});const{columns:c,colgroups:d}=V(a).map(e=>{const t=(e=>{const t={};let n=0;return L(e.cells,e=>{const i=e.colspan;T(i,r=>{const o=n+r;t[o]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,i,o)}),n+=i}),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,X(t));return{colgroups:[n],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),u=((e,t)=>({rows:e,columns:t}))(r,o);return{grid:u,access:t,all:n,columns:c,colgroups:d}},oi={fromTable:e=>{const t=rn(e);return ri(t)},generate:ri,getAt:(e,t,n)=>w.from(e.access[ni(t,n)]),findItem:(e,t,n)=>{const i=ii(e,e=>n(t,e.element));return i.length>0?w.some(i[0]):w.none()},filterItems:ii,justCells:e=>U(e.all,e=>e.cells),justColumns:e=>X(e.columns),hasColumns:e=>G(e.columns).length>0,getColumnAt:(e,t)=>w.from(e.columns[t])},si=(e,t=_)=>{const n=e.grid,i=T(n.columns,f),r=T(n.rows,f);return k(i,n=>ai(()=>U(r,t=>oi.getAt(e,t,n).filter(e=>e.column===n).toArray()),e=>1===e.colspan&&t(e.element),()=>oi.getAt(e,0,n)))},ai=(e,t,n)=>{const i=e();return P(i,t).orThunk(()=>w.from(i[0]).orThunk(n)).map(e=>e.element)},li=e=>{const t=e.grid,n=T(t.rows,f),i=T(t.columns,f);return k(n,t=>ai(()=>U(i,n=>oi.getAt(e,t,n).filter(e=>e.row===t).fold(m([]),e=>[e])),e=>1===e.rowspan,()=>oi.getAt(e,t,0)))},ci=(e,t)=>{if(t<0||t>=e.length-1)return w.none();const n=e[t].fold(()=>{const n=(e=>{const t=x.call(e,0);return t.reverse(),t})(e.slice(0,t));return Y(n,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>w.some({value:e,delta:0})),i=e[t+1].fold(()=>{const n=e.slice(t+1);return Y(n,(e,t)=>e.map(e=>({value:e,delta:t+1})))},e=>w.some({value:e,delta:1}));return n.bind(e=>i.map(t=>{const n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))},di=(e,t)=>n=>"rtl"===ui(n)?t:e,ui=e=>"rtl"===Bt(e,"direction")?"rtl":"ltr",hi=Pn("height",e=>{const t=e.dom;return dt(e)?t.getBoundingClientRect().height:t.offsetHeight}),pi=e=>hi.get(e),mi=e=>hi.getOuter(e),fi=e=>Nn(e,"height",e.dom.offsetHeight),gi=(e,t)=>({left:e,top:t,translate:(n,i)=>gi(e+n,t+i)}),vi=gi,yi=(e,t)=>void 0!==e?e:void 0!==t?t:0,bi=e=>{const t=e.dom.ownerDocument,n=t.body,i=t.defaultView,r=t.documentElement;if(n===e.dom)return vi(n.offsetLeft,n.offsetTop);const o=yi(null==i?void 0:i.pageYOffset,r.scrollTop),s=yi(null==i?void 0:i.pageXOffset,r.scrollLeft),a=yi(r.clientTop,n.clientTop),l=yi(r.clientLeft,n.clientLeft);return Ai(e).translate(s-l,o-a)},Ai=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?vi(n.offsetLeft,n.offsetTop):dt(e)?(e=>{const t=e.getBoundingClientRect();return vi(t.left,t.top)})(t):vi(0,0)},_i=(e,t)=>({row:e,y:t}),wi=(e,t)=>({col:e,x:t}),xi=e=>bi(e).left+Hn(e),Ci=e=>bi(e).left,Ei=(e,t)=>wi(e,Ci(t)),Mi=(e,t)=>wi(e,xi(t)),Si=e=>bi(e).top,Ti=(e,t)=>_i(e,Si(t)),ki=(e,t)=>_i(e,Si(t)+mi(t)),Li=(e,t,n)=>{if(0===n.length)return[];const i=k(n.slice(1),(t,n)=>t.map(t=>e(n,t))),r=n[n.length-1].map(e=>t(n.length-1,e));return i.concat([r])},Di={delta:f,positions:e=>Li(Ti,ki,e),edge:Si},Ii=di({delta:f,edge:Ci,positions:e=>Li(Ei,Mi,e)},{delta:e=>-e,edge:xi,positions:e=>Li(Mi,Ei,e)}),Ri={delta:(e,t)=>Ii(t).delta(e,t),positions:(e,t)=>Ii(t).positions(e,t),edge:e=>Ii(e).edge(e)},Oi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Pi=(()=>{const e="[0-9]+",t="[eE]"+("[+-]?"+e),n=e=>`(?:${e})?`,i=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${i})`})(.*)$`)})(),Bi=(e,t)=>w.from(Pi.exec(e)).bind(e=>{const n=Number(e[1]),i=e[2];return((e,t)=>S(t,t=>S(Oi[t],t=>e===t)))(i,t)?w.some({value:n,unit:i}):w.none()}),Ni=/(\d+(\.\d+)?)%/,Ui=/(\d+(\.\d+)?)px|em/,Fi=me("col"),zi=(e,t,n)=>{const i=Re(e).getOrThunk(()=>ut(Le(e)));return t(e)/n(i)*100},Hi=(e,t)=>{Ot(e,"width",t+"px")},ji=(e,t)=>{Ot(e,"width",t+"%")},Vi=(e,t)=>{Ot(e,"height",t+"px")},Yi=(e,t,n,i)=>{const r=parseFloat(e);return kt(e,"%")&&"table"!==oe(t)?((e,t,n,i)=>{const r=Xt(e).map(e=>{const i=n(e);return Math.floor(t/100*i)}).getOr(t);return i(e,r),r})(t,r,n,i):r},Gi=e=>{const t=(e=>fi(e)+"px")(e);return t?Yi(t,e,pi,Vi):pi(e)},Qi=(e,t)=>Ut(e,t).orThunk(()=>be(e,t).map(e=>e+"px")),$i=e=>Qi(e,"width"),qi=e=>zi(e,zn,jn),Wi=e=>Fi(e)?zn(e):Vn(e),Ki=e=>((e,t,n)=>n(e)/Ht(e,t))(e,"rowspan",Gi),Zi=(e,t,n)=>{Ot(e,"width",t+n)},Xi=e=>zi(e,zn,jn)+"%",Ji=m(Ni),er=me("col"),tr=e=>$i(e).getOrThunk(()=>Wi(e)+"px"),nr=e=>{return(t=e,Qi(t,"height")).getOrThunk(()=>Ki(e)+"px");var t},ir=(e,t,n,i,r,o)=>e.filter(i).fold(()=>o(ci(n,t)),e=>r(e)),rr=(e,t,n,i)=>{const r=si(e),o=oi.hasColumns(e)?(e=>k(oi.justColumns(e),e=>w.from(e.element)))(e):r,s=[w.some(Ri.edge(t))].concat(k(Ri.positions(r,t),e=>e.map(e=>e.x))),a=y(jt);return k(o,(e,t)=>ir(e,t,s,a,e=>{if((e=>{const t=On().browser,n=t.isChromium()||t.isFirefox();return!er(e)||n})(e))return n(e);{const e=(o=r[t],l=f,null!=o?l(o):w.none());return ir(e,t,s,a,e=>i(w.some(zn(e))),i)}var o,l},i))},or=e=>e.map(e=>e+"px").getOr(""),sr=(e,t,n)=>rr(e,t,Wi,e=>e.getOrThunk(n.minCellWidth)),ar=(e,t,n,i,r)=>{const o=li(e),s=[w.some(n.edge(t))].concat(k(n.positions(o,t),e=>e.map(e=>e.y)));return k(o,(e,t)=>ir(e,t,s,y(Vt),i,r))},lr=(e,t)=>()=>dt(e)?t(e):parseFloat(Ut(e,"width").getOr("0")),cr=e=>{const t=lr(e,zn),n=m(0);return{width:t,pixelWidth:t,getWidths:(t,n)=>sr(t,e,n),getCellDelta:n,singleColumnWidth:m([0]),minCellWidth:n,setElementWidth:p,adjustTableWidth:p,isRelative:!0,label:"none"}},dr=e=>{const t=lr(e,e=>parseFloat(Xi(e))),n=lr(e,zn);return{width:t,pixelWidth:n,getWidths:(t,n)=>((e,t,n)=>rr(e,t,qi,e=>e.fold(()=>n.minCellWidth(),e=>e/n.pixelWidth()*100)))(t,e,n),getCellDelta:e=>e/n()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Gt()/n()*100,setElementWidth:ji,adjustTableWidth:n=>{const i=t();ji(e,i+n/100*i)},isRelative:!0,label:"percent"}},ur=e=>{const t=lr(e,zn);return{width:t,pixelWidth:t,getWidths:(t,n)=>sr(t,e,n),getCellDelta:f,singleColumnWidth:(e,t)=>[Math.max(Gt(),e+t)-e],minCellWidth:Gt,setElementWidth:Hi,adjustTableWidth:n=>{const i=t()+n;Hi(e,i)},isRelative:!1,label:"pixel"}},hr=e=>$i(e).fold(()=>cr(e),t=>((e,t)=>null!==Ji().exec(t)?dr(e):ur(e))(e,t)),pr=ur,mr=dr,fr=(e,t,n)=>{const i=e[n].element,r=xe.fromTag("td");je(r,xe.fromTag("br"));(t?je:He)(i,r)},gr=(e,t)=>{const n=e=>Ce(e.element,t),i=Ze(e),r=rn(i),o=hr(e),s=oi.generate(r),a=((e,t)=>{const n=e.grid.columns;let i=e.grid.rows,r=n,o=0,s=0;const a=[],l=[];return $(e.access,e=>{if(a.push(e),t(e)){l.push(e);const t=e.row,n=t+e.rowspan-1,a=e.column,c=a+e.colspan-1;t<i?i=t:n>o&&(o=n),a<r?r=a:c>s&&(s=c)}}),((e,t,n,i,r,o)=>({minRow:e,minCol:t,maxRow:n,maxCol:i,allCells:r,selectedCells:o}))(i,r,o,s,a,l)})(s,n),l="th:not("+t+"),td:not("+t+")",c=qt(i,"th,td",e=>Ce(e,l));L(c,$e),((e,t,n,i)=>{const r=I(e,e=>"colgroup"!==e.section),o=t.grid.columns,s=t.grid.rows;for(let e=0;e<s;e++){let s=!1;for(let a=0;a<o;a++)e<n.minRow||e>n.maxRow||a<n.minCol||a>n.maxCol||(oi.getAt(t,e,a).filter(i).isNone()?fr(r,s,e):s=!0)}})(r,s,a,n);const d=((e,t,n,i)=>{if(0===i.minCol&&t.grid.columns===i.maxCol+1)return 0;const r=sr(t,e,n),o=O(r,(e,t)=>e+t,0),s=O(r.slice(i.minCol,i.maxCol+1),(e,t)=>e+t,0),a=s/o*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(a)})(e,oi.fromTable(e),o,a);return((e,t,n,i)=>{$(n.columns,e=>{(e.column<t.minCol||e.column>t.maxCol)&&$e(e.element)});const r=I($t(e,"tr"),e=>0===e.dom.childElementCount);L(r,$e),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L($t(e,"th,td"),e=>{Ae(e,"rowspan"),Ae(e,"colspan")}),Ae(e,Jn),Ae(e,"data-snooker-col-series"),hr(e).adjustTableWidth(i)})(i,a,s,d),i},vr=((e,t)=>{const n=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:i=>{if(!e(i))throw new Error("Can only get "+t+" value of a "+t+" node");return n(i).getOr("")},getOption:n,set:(n,i)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=i}}})(ue,"text"),yr=e=>vr.get(e),br=e=>vr.getOption(e),Ar=(e,t)=>vr.set(e,t),_r=e=>"img"===oe(e)?1:br(e).fold(()=>Ne(e).length,e=>e.length),wr=["img","br"],xr=e=>br(e).filter(e=>0!==e.trim().length||e.indexOf(" ")>-1).isSome()||M(wr,oe(e))||(e=>ce(e)&&"false"===ye(e,"contenteditable"))(e),Cr=e=>((e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const r=xe.fromDom(e.childNodes[i]);if(t(r))return w.some(r);const o=n(e.childNodes[i]);if(o.isSome())return o}return w.none()};return n(e.dom)})(e,xr),Er=e=>Mr(e,xr),Mr=(e,t)=>{const n=e=>{const i=Ne(e);for(let e=i.length-1;e>=0;e--){const r=i[e];if(t(r))return w.some(r);const o=n(r);if(o.isSome())return o}return w.none()};return n(e)},Sr={scope:["row","col"]},Tr=e=>()=>{const t=xe.fromTag("td",e.dom);return je(t,xe.fromTag("br",e.dom)),t},kr=e=>()=>xe.fromTag("col",e.dom),Lr=e=>()=>xe.fromTag("colgroup",e.dom),Dr=e=>()=>xe.fromTag("tr",e.dom),Ir=(e,t,n)=>{const i=((e,t)=>{const n=Xe(e,t),i=Ne(Ze(e));return Ge(n,i),n})(e,t);return $(n,(e,t)=>{null===e?Ae(i,t):ge(i,t,e)}),i},Rr=e=>e,Or=(e,t,n)=>{const i=(e,t)=>{((e,t)=>{const n=e.dom,i=t.dom;It(n)&&It(i)&&(i.style.cssText=n.style.cssText)})(e.element,t),Ft(t,"height"),1!==e.colspan&&Ft(t,"width")};return{col:n=>{const r=xe.fromTag(oe(n.element),t.dom);return i(n,r),e(n.element,r),r},colgroup:Lr(t),row:Dr(t),cell:r=>{const o=xe.fromTag(oe(r.element),t.dom),s=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=s.length>0?((e,t,n)=>Cr(e).map(i=>{const r=n.join(","),o=pt(i,r,t=>Se(t,e));return R(o,(e,t)=>{const n=Ke(t);return je(e,n),n},t)}).getOr(t))(r.element,o,s):o;return je(a,xe.fromTag("br")),i(r,o),((e,t)=>{$(Sr,(n,i)=>be(e,i).filter(e=>M(n,e)).each(e=>ge(t,i,e)))})(r.element,o),e(r.element,o),o},replace:Ir,colGap:kr(t),gap:Tr(t)}},Pr=e=>({col:kr(e),colgroup:Lr(e),row:Dr(e),cell:Tr(e),replace:Rr,colGap:kr(e),gap:Tr(e)}),Br=e=>t=>t.options.get(e),Nr="100%",Ur=e=>{var t;const n=e.dom,i=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return jn(xe.fromDom(i))+"px"},Fr=e=>w.from(e.options.get("table_clone_elements")),zr=Br("table_header_type"),Hr=Br("table_column_resizing"),jr=e=>"preservetable"===Hr(e),Vr=e=>"resizetable"===Hr(e),Yr=Br("table_sizing_mode"),Gr=e=>"relative"===Yr(e),Qr=e=>"fixed"===Yr(e),$r=e=>"responsive"===Yr(e),qr=Br("table_resize_bars"),Wr=Br("table_style_by_css"),Kr=Br("table_merge_content_on_paste"),Zr=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>$r(e)||Wr(e)?t:Qr(e)?{...t,width:Ur(e)}:{...t,width:Nr})(e,n)},Xr=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>$r(e)||!Wr(e)?t:Qr(e)?{...t,width:Ur(e)}:{...t,width:Nr})(e,n)},Jr=Br("table_use_colgroups"),eo=e=>wt(e,"[contenteditable]"),to=(e,t=!1)=>dt(e)?e.dom.isContentEditable:eo(e).fold(m(t),e=>"true"===no(e)),no=e=>e.dom.contentEditable,io=e=>xe.fromDom(e.getBody()),ro=e=>t=>Se(t,io(e)),oo=e=>{Ae(e,"data-mce-style");const t=e=>Ae(e,"data-mce-style");L(Kt(e),t),L(Zt(e),t),L(Jt(e),t)},so=e=>xe.fromDom(e.selection.getStart()),ao=e=>e.getBoundingClientRect().width,lo=e=>e.getBoundingClientRect().height,co=e=>yt(e,me("table")).exists(to),uo=(e,t)=>{const n=t.column,i=t.column+t.colspan-1,r=t.row,o=t.row+t.rowspan-1;return n<=e.finishCol&&i>=e.startCol&&r<=e.finishRow&&o>=e.startRow},ho=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,po=(e,t,n)=>{const i=oi.findItem(e,t,Se),r=oi.findItem(e,n,Se);return i.bind(e=>r.map(t=>{return n=e,i=t,r=Math.min(n.row,i.row),o=Math.min(n.column,i.column),s=Math.max(n.row+n.rowspan-1,i.row+i.rowspan-1),a=Math.max(n.column+n.colspan-1,i.column+i.colspan-1),{startRow:r,startCol:o,finishRow:s,finishCol:a};var n,i,r,o,s,a}))},mo=(e,t,n)=>po(e,t,n).bind(t=>((e,t)=>{let n=!0;const i=v(ho,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let o=t.startCol;o<=t.finishCol;o++)n=n&&oi.getAt(e,r,o).exists(i);return n?w.some(t):w.none()})(e,t)),fo=(e,t,n)=>po(e,t,n).map(t=>{const n=oi.filterItems(e,v(uo,t));return k(n,e=>e.element)}),go=(e,t)=>oi.findItem(e,t,(e,t)=>Te(t,e)).map(e=>e.element),vo=(e,t,n)=>Xt(e).bind(i=>((e,t,n,i)=>oi.findItem(e,t,Se).bind(t=>{const r=n>0?t.row+t.rowspan-1:t.row,o=i>0?t.column+t.colspan-1:t.column;return oi.getAt(e,r+n,o+i).map(e=>e.element)}))(Ao(i),e,t,n)),yo=(e,t,n)=>{const i=Ao(e);return fo(i,t,n)},bo=(e,t,n,i,r)=>{const o=Ao(e),s=Se(e,n)?w.some(t):go(o,t),a=Se(e,r)?w.some(i):go(o,i);return s.bind(e=>a.bind(t=>fo(o,e,t)))},Ao=oi.fromTable;var _o=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],wo=()=>({up:m({selector:bt,closest:wt,predicate:vt,all:Oe}),down:m({selector:ft,predicate:ht}),styles:m({get:Bt,getRaw:Ut,set:Ot,remove:Ft}),attrs:m({get:ye,set:ge,remove:Ae,copyTo:(e,t)=>{const n=_e(e);ve(t,n)}}),insert:m({before:Fe,after:ze,afterAll:Ye,append:je,appendAll:Ge,prepend:He,wrap:Ve}),remove:m({unwrap:qe,remove:$e}),create:m({nu:xe.fromTag,clone:e=>xe.fromDom(e.dom.cloneNode(!1)),text:xe.fromText}),query:m({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Pe,nextSibling:Be}),property:m({children:Ne,name:oe,parent:Ie,document:e=>De(e).dom,isText:ue,isComment:le,isElement:de,isSpecial:e=>{const t=oe(e);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>de(e)?be(e,"lang"):w.none(),getText:yr,setText:Ar,isBoundary:e=>!!de(e)&&("body"===oe(e)||M(_o,oe(e))),isEmptyTag:e=>!!de(e)&&M(["br","img","hr","input"],oe(e)),isNonEditable:e=>de(e)&&"false"===ye(e,"contenteditable")}),eq:Se,is:ke});const xo=(e,t,n,i)=>{const r=t(e,n);return R(i,(n,i)=>{const r=t(e,i);return Co(e,n,r)},r)},Co=(e,t,n)=>t.bind(t=>n.filter(v(e.eq,t))),Eo=(e,t,n)=>n.length>0?((e,t,n,i)=>i(e,t,n[0],n.slice(1)))(e,t,n,xo):w.none(),Mo=(e,t,n,i=A)=>{const r=[t].concat(e.up().all(t)),o=[n].concat(e.up().all(n)),s=e=>B(e,i).fold(()=>e,t=>e.slice(0,t+1)),a=s(r),l=s(o),c=P(a,t=>S(l,((e,t)=>v(e.eq,t))(e,t)));return{firstpath:a,secondpath:l,shared:c}},So=wo(),To=(e,t)=>Eo(So,(t,n)=>e(n),t),ko=e=>bt(e,"table"),Lo=(e,t,n)=>{const i=e=>t=>void 0!==n&&n(t)||Se(t,e);return Se(e,t)?w.some({boxes:w.some([e]),start:e,finish:t}):ko(e).bind(r=>ko(t).bind(o=>{if(Se(r,o))return w.some({boxes:yo(r,e,t),start:e,finish:t});if(Te(r,o)){const n=pt(t,"td,th",i(r)),s=n.length>0?n[n.length-1]:t;return w.some({boxes:bo(r,e,r,t,o),start:e,finish:s})}if(Te(o,r)){const n=pt(e,"td,th",i(o)),s=n.length>0?n[n.length-1]:e;return w.some({boxes:bo(o,e,r,t,o),start:e,finish:s})}return((e,t,n)=>Mo(So,e,t,n))(e,t).shared.bind(s=>wt(s,"table",n).bind(n=>{const s=pt(t,"td,th",i(n)),a=s.length>0?s[s.length-1]:t,l=pt(e,"td,th",i(n)),c=l.length>0?l[l.length-1]:e;return w.some({boxes:bo(n,e,r,t,o),start:c,finish:a})}))}))},Do=(e,t)=>{const n=ft(e,t);return n.length>0?w.some(n):w.none()},Io=(e,t,n)=>_t(e,t).bind(t=>_t(e,n).bind(e=>To(ko,[t,e]).map(n=>({first:t,last:e,table:n})))),Ro=(e,t,n,i,r)=>((e,t)=>P(e,e=>Ce(e,t)))(e,r).bind(e=>vo(e,t,n).bind(e=>((e,t)=>bt(e,"table").bind(n=>_t(n,t).bind(t=>Lo(t,e).bind(e=>e.boxes.map(t=>({boxes:t,start:e.start,finish:e.finish}))))))(e,i))),Oo=(e,t)=>Do(e,t),Po=(e,t,n)=>Io(e,t,n).bind(t=>{const n=t=>Se(e,t),i="thead,tfoot,tbody,table",r=bt(t.first,i,n),o=bt(t.last,i,n);return r.bind(e=>o.bind(n=>Se(e,n)?((e,t,n)=>{const i=Ao(e);return mo(i,t,n)})(t.table,t.first,t.last):w.none()))}),Bo=f,No=e=>{const t=(e,t)=>be(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&F(e,e=>t(e,"rowspan")||t(e,"colspan"))?w.some(e):w.none()},Uo=(e,t,n)=>t.length<=1?w.none():Po(e,n.firstSelectedSelector,n.lastSelectedSelector).map(e=>({bounds:e,cells:t})),Fo="data-mce-selected",zo="td["+Fo+"],th["+Fo+"]",Ho="["+Fo+"]",jo="data-mce-first-selected",Vo="td["+jo+"],th["+jo+"]",Yo="data-mce-last-selected",Go="td["+Yo+"],th["+Yo+"]",Qo=Ho,$o={selected:Fo,selectedSelector:zo,firstSelected:jo,firstSelectedSelector:Vo,lastSelected:Yo,lastSelectedSelector:Go},qo=(e,t,n)=>({element:n,mergable:Uo(t,e,$o),unmergable:No(e),selection:Bo(e)}),Wo=e=>(t,n)=>{const i=oe(t),r="col"===i||"colgroup"===i?Xt(o=t).bind(e=>Oo(e,$o.firstSelectedSelector)).fold(m(o),e=>e[0]):t;var o;return wt(r,e,n)},Ko=Wo("th,td,caption"),Zo=Wo("th,td"),Xo=e=>{return t=e.model.table.getSelectedCells(),k(t,xe.fromDom);var t},Jo=(e,t)=>{e.on("BeforeGetContent",t=>{const n=n=>{t.preventDefault(),(e=>Xt(e[0]).map(e=>{const t=gr(e,Qo);return oo(t),[t]}))(n).each(n=>{t.content="text"===t.format?(e=>k(e,e=>e.dom.innerText).join(""))(n):((e,t)=>k(t,t=>e.selection.serializer.serialize(t.dom,{})).join(""))(e,n)})};if(!0===t.selection){const t=(e=>I(Xo(e),e=>Ce(e,$o.selectedSelector)))(e);t.length>=1&&n(t)}}),e.on("BeforeSetContent",n=>{if(!0===n.selection&&!0===n.paste){const i=Xo(e);j(i).each(i=>{Xt(i).each(r=>{const o=I(((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Ne(xe.fromDom(n))})(n.content),e=>"meta"!==oe(e)),s=me("table");if(Kr(e)&&1===o.length&&s(o[0])){n.preventDefault();const s=xe.fromDom(e.getDoc()),a=Pr(s),l=((e,t,n)=>({element:e,clipboard:t,generators:n}))(i,o[0],a);t.pasteCells(r,l).each(()=>{e.focus()})}})})}})},es=(e,t)=>({element:e,offset:t}),ts=(e,t,n)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind(t=>ts(e,t,n).orThunk(()=>w.some(t))):w.none(),ns=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;return e.property().children(t).length},is=(e,t)=>{const n=ts(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return es(n,ns(e,n));const i=e.property().children(n);return i.length>0?is(e,i[i.length-1]):es(n,ns(e,n))},rs=is,os=wo(),ss=(e,t)=>{if(!jt(e)){const n=(e=>$i(e).bind(e=>Bi(e,["fixed","relative","empty"])))(e);n.each(n=>{const i=n.value/2;Zi(e,i,n.unit),Zi(t,i,n.unit)})}},as=e=>k(e,m(0)),ls=(e,t,n,i,r)=>r(e.slice(0,t)).concat(i).concat(r(e.slice(n))),cs=e=>(t,n,i,r)=>{if(e(i)){const e=Math.max(r,t[n]-Math.abs(i)),o=Math.abs(e-t[n]);return i>=0?o:-o}return i},ds=cs(e=>e<0),us=cs(_),hs=()=>{const e=(e,t,n,i)=>{const r=(100+n)/100,o=Math.max(i,(e[t]+n)/r);return k(e,(e,n)=>(n===t?o:e/r)-e)},t=(t,n,i,r,o,s)=>s?e(t,n,r,o):((e,t,n,i,r)=>{const o=ds(e,t,i,r);return ls(e,t,n+1,[o,0],as)})(t,n,i,r,o);return{resizeTable:(e,t)=>e(t),clampTableDelta:ds,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,n,i,r,o,s,a)=>t(e,i,r,o,s,a),calcRightEdgeDeltas:(t,n,i,r,o,s)=>{if(s)return e(t,i,r,o);{const e=ds(t,i,r,o);return as(t.slice(0,i)).concat([e])}},calcRedestributedWidths:(e,t,n,i)=>{if(i){const i=(t+n)/t,r=k(e,e=>e/i);return{delta:100*i-100,newSizes:r}}return{delta:n,newSizes:e}}}},ps=()=>{const e=(e,t,n,i,r)=>{const o=us(e,i>=0?n:t,i,r);return ls(e,t,n+1,[o,-o],as)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,i,r)=>{if(r){if(n>=0)return n;{const t=O(e,(e,t)=>e+t-i,0);return Math.max(-t,n)}}return ds(e,t,n,i)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,i,r,o,s)=>e(t,i,r,o,s),calcRightEdgeDeltas:(e,t,n,i,r,o)=>{if(o)return as(e);{const t=i/e.length;return k(e,m(t))}},calcRedestributedWidths:(e,t,n,i)=>({delta:0,newSizes:e})}},ms=e=>oi.fromTable(e).grid,fs=me("th"),gs=e=>F(e,e=>fs(e.element)),vs=(e,t)=>e&&t?"sectionCells":e?"section":"cells",ys=e=>{const t="thead"===e.section,n=xt(bs(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:vs(t,n)}:{type:"body"}},bs=e=>{const t=I(e,e=>fs(e.element));return 0===t.length?w.some("td"):t.length===e.length?w.some("th"):w.none()},As=(e,t,n)=>nt(n(e.element,t),!0,e.isLocked),_s=(e,t)=>e.section!==t?it(e.element,e.cells,t,e.isNew):e,ws=()=>({transformRow:_s,transformCell:(e,t,n)=>{const i=n(e.element,t),r="td"!==oe(i)?((e,t)=>{const n=Xe(e,t);ze(e,n);const i=Ne(e);return Ge(n,i),$e(e),n})(i,"td"):i;return nt(r,e.isNew,e.isLocked)}}),xs=()=>({transformRow:_s,transformCell:As}),Cs=()=>({transformRow:(e,t)=>_s(e,"thead"===t?"tbody":t),transformCell:As}),Es=(e,t)=>{const n=(e=>Y(e.all,e=>{const t=ys(e);return"header"===t.type?w.from(t.subType):w.none()}))(oi.fromTable(e)).getOr(t);switch(n){case"section":return ws();case"sectionCells":return xs();case"cells":return Cs()}},Ms=ws,Ss=xs,Ts=Cs,ks=()=>({transformRow:f,transformCell:As}),Ls=(e,t,n,i)=>{n===i?Ae(e,t):ge(e,t,n)},Ds=(e,t,n)=>{V(mt(e,t)).fold(()=>He(e,n),e=>ze(e,n))},Is=(e,t)=>{const n=[],i=[],r=e=>k(e,e=>{e.isNew&&n.push(e.element);const t=e.element;return Qe(t),L(e.cells,e=>{e.isNew&&i.push(e.element),Ls(e.element,"colspan",e.colspan,1),Ls(e.element,"rowspan",e.rowspan,1),je(t,e.element)}),t}),o=e=>U(e,e=>k(e.cells,e=>(Ls(e.element,"span",e.colspan,1),e.element))),s=(t,n)=>{const i=((e,t)=>{const n=At(e,t).getOrThunk(()=>{const n=xe.fromTag(t,Le(e).dom);return"thead"===t?Ds(e,"caption,colgroup",n):"colgroup"===t?Ds(e,"caption",n):je(e,n),n});return Qe(n),n})(e,n),s=("colgroup"===n?o:r)(t);Ge(i,s)},a=(t,n)=>{t.length>0?s(t,n):(t=>{At(e,t).each($e)})(n)},l=[],c=[],d=[],u=[];return L(t,e=>{switch(e.section){case"thead":l.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}}),a(u,"colgroup"),a(l,"thead"),a(c,"tbody"),a(d,"tfoot"),{newRows:n,newCells:i}},Rs=(e,t)=>{if(0===e.length)return 0;const n=e[0];return B(e,e=>!t(n.element,e.element)).getOr(e.length)},Os=(e,t,n,i)=>{const r=((e,t)=>e[t])(e,t),o="colgroup"===r.section,s=Rs(r.cells.slice(n),i),a=o?1:Rs(((e,t)=>k(e,e=>qn(e,t)))(e.slice(t),n),i);return{colspan:s,rowspan:a}},Ps=(e,t)=>{const n=k(e,e=>k(e.cells,A));return k(e,(i,r)=>{const o=U(i.cells,(i,o)=>{if(!1===n[r][o]){const d=Os(e,r,o,t);return((e,t,i,r)=>{for(let o=e;o<e+i;o++)for(let e=t;e<t+r;e++)n[o][e]=!0})(r,o,d.rowspan,d.colspan),[(s=i.element,a=d.rowspan,l=d.colspan,c=i.isNew,{element:s,rowspan:a,colspan:l,isNew:c})]}return[];var s,a,l,c});return((e,t,n,i)=>({element:e,cells:t,section:n,isNew:i}))(i.element,o,i.section,i.isNew)})},Bs=(e,t,n)=>{const i=[];L(e.colgroups,r=>{const o=[];for(let i=0;i<e.grid.columns;i++){const r=oi.getColumnAt(e,i).map(e=>nt(e.element,n,!1)).getOrThunk(()=>nt(t.colGap(),!0,!1));o.push(r)}i.push(it(r.element,o,"colgroup",n))});for(let r=0;r<e.grid.rows;r++){const o=[];for(let i=0;i<e.grid.columns;i++){const s=oi.getAt(e,r,i).map(e=>nt(e.element,n,e.isLocked)).getOrThunk(()=>nt(t.gap(),!0,!1));o.push(s)}const s=e.all[r],a=it(s.element,o,s.section,n);i.push(a)}return i},Ns=e=>Ps(e,Se),Us=(e,t)=>Y(e.all,e=>P(e.cells,e=>Se(t,e.element))),Fs=(e,t,n)=>{const i=k(t.selection,t=>Wt(t).bind(t=>Us(e,t)).filter(n)),r=Ct(i);return Et(r.length>0,r)},zs=(e,t,n,i,r)=>(o,s,a,l)=>{const c=oi.fromTable(o),d=w.from(null==l?void 0:l.section).getOrThunk(ks);return t(c,s).map(t=>{const n=((e,t)=>Bs(e,t,!1))(c,a),i=e(n,t,Se,r(a),d),o=ti(i.grid);return{info:t,grid:Ns(i.grid),cursor:i.cursor,lockedColumns:o}}).bind(e=>{const t=Is(o,e.grid),r=w.from(null==l?void 0:l.sizing).getOrThunk(()=>hr(o)),s=w.from(null==l?void 0:l.resize).getOrThunk(ps);return n(o,e.grid,e.info,{sizing:r,resize:s,section:d}),i(o),Ae(o,Jn),e.lockedColumns.length>0&&ge(o,Jn,e.lockedColumns.join(",")),w.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})},Hs=(e,t)=>Fs(e,t,_).map(e=>({cells:e,generators:t.generators,clipboard:t.clipboard})),js=(e,t)=>Fs(e,t,_),Vs=(e,t)=>Fs(e,t,e=>!e.isLocked),Ys=(e,t)=>F(t,t=>((e,t)=>Us(e,t).exists(e=>!e.isLocked))(e,t)),Gs=(e,t,n,i)=>{const r=Zn(e).rows;let o=!0;for(let e=0;e<r.length;e++)for(let s=0;s<Kn(r[0]);s++){const a=r[e],l=qn(a,s),c=n(l.element,t);c&&!o?Qn(a,s,nt(i(),!0,l.isLocked)):c&&(o=!1)}return e},Qs=(e,t,n,i)=>{const r=Zn(e).rows;if(t>0&&t<r.length){const e=((e,t)=>O(e,(e,n)=>S(e,e=>t(e.element,n.element))?e:e.concat([n]),[]))(r[t-1].cells,n);L(e,e=>{let o=w.none();for(let s=t;s<r.length;s++)for(let t=0;t<Kn(r[0]);t++){const a=r[s],l=qn(a,t);n(l.element,e.element)&&(o.isNone()&&(o=w.some(i())),o.each(e=>{Qn(a,t,nt(e,!0,l.isLocked))}))}})}return e},$s=e=>{const t=t=>t(e),n=m(e),i=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:_,isError:A,map:t=>Ws.value(t(e)),mapError:i,bind:t,exists:t,forall:t,getOr:n,or:i,getOrThunk:n,orThunk:i,getOrDie:n,each:t=>{t(e)},toOptional:()=>w.some(e)};return r},qs=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:A,isError:_,map:t,mapError:t=>Ws.error(t(e)),bind:t,exists:A,forall:_,getOr:f,or:f,getOrThunk:b,orThunk:b,getOrDie:(i=String(e),()=>{throw new Error(i)}),each:p,toOptional:w.none};var i;return n},Ws={value:$s,error:qs,fromOption:(e,t)=>e.fold(()=>qs(t),$s)},Ks=(e,t)=>({rowDelta:0,colDelta:Kn(e[0])-Kn(t[0])}),Zs=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Xs=(e,t,n,i)=>{const r="colgroup"===t.section?n.col:n.cell;return T(e,e=>nt(r(),!0,i(e)))},Js=(e,t,n,i)=>{const r=e[e.length-1];return e.concat(T(t,()=>{const e="colgroup"===r.section?n.colgroup:n.row,t=Xn(r,e,f),o=Xs(t.cells.length,t,n,e=>J(i,e.toString()));return $n(t,o)}))},ea=(e,t,n,i)=>k(e,e=>{const r=Xs(t,e,n,A);return Yn(e,i,r)}),ta=(e,t,n)=>{const i=t.colDelta<0?ea:f,r=t.rowDelta<0?Js:f,o=ti(e),s=Kn(e[0]),a=S(o,e=>e===s-1),l=i(e,Math.abs(t.colDelta),n,a?s-1:s),c=ti(l);return r(l,Math.abs(t.rowDelta),n,z(c,_))},na=(e,t,n,i)=>{const r=v(i,qn(e[t],n).element),o=e[t];return e.length>1&&Kn(o)>1&&(n>0&&r(Wn(o,n-1))||n<o.cells.length-1&&r(Wn(o,n+1))||t>0&&r(Wn(e[t-1],n))||t<e.length-1&&r(Wn(e[t+1],n)))},ia=(e,t,n)=>I(n,n=>n>=e.column&&n<=Kn(t[0])+e.column),ra=(e,t,n,i,r)=>{const o=ti(t),s=((e,t,n)=>{const i=Kn(t[0]),r=Zn(t).cols.length+e.row,o=T(i-e.column,t=>t+e.column),s=P(o,e=>F(n,t=>t!==e)).getOr(i-1);return{row:r,column:s}})(e,t,o),a=Zn(n).rows,l=ia(s,a,o),c=((e,t,n)=>{if(e.row>=t.length||e.column>Kn(t[0]))return Ws.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const i=t.slice(e.row),r=i[0].cells.slice(e.column),o=Kn(n[0]),s=n.length;return Ws.value({rowDelta:i.length-s,colDelta:r.length-o})})(s,t,a);return c.map(e=>{const n={...e,colDelta:e.colDelta-l.length},o=ta(t,n,i),c=ti(o),d=ia(s,a,c);return((e,t,n,i,r,o)=>{const s=e.row,a=e.column,l=s+n.length,c=a+Kn(n[0])+o.length,d=z(o,_);for(let e=s;e<l;e++){let o=0;for(let l=a;l<c;l++){if(d[l]){o++;continue}na(t,e,l,r)&&Gs(t,Wn(t[e],l),r,i.cell);const c=l-a-o,u=qn(n[e-s],c),h=u.element,p=i.replace(h);Qn(t[e],l,nt(p,!0,u.isLocked))}}return t})(s,o,a,i,r,d)})},oa=(e,t,n,i,r)=>{((e,t,n,i)=>{t>0&&t<e[0].cells.length&&L(e,e=>{const r=e.cells[t-1];let o=0;const s=i();for(;e.cells.length>t+o&&n(r.element,e.cells[t+o].element);)Qn(e,t+o,nt(s,!0,e.cells[t+o].isLocked)),o++})})(t,e,r,i.cell);const o=Zs(n,t),s=ta(n,o,i),a=Zs(t,s),l=ta(t,a,i);return k(l,(t,n)=>Yn(t,e,s[n].cells))},sa=(e,t,n,i,r)=>{Qs(t,e,r,i.cell);const o=ti(t),s=Ks(t,n),a={...s,colDelta:s.colDelta-o.length},l=ta(t,a,i),{cols:c,rows:d}=Zn(l),u=ti(l),h=Ks(n,t),p={...h,colDelta:h.colDelta+u.length},m=((e,t,n)=>k(e,e=>O(n,(n,i)=>{const r=Xs(1,e,t,_)[0];return Gn(n,i,r)},e)))(n,i,u),f=ta(m,p,i);return[...c,...d.slice(0,e),...f,...d.slice(e,d.length)]},aa=(e,t,n,i,r)=>{const{rows:o,cols:s}=Zn(e),a=o.slice(0,t),l=o.slice(t),c=((e,t,n,i)=>Xn(e,e=>i(e,n),t))(o[n],(e,n)=>t>0&&t<o.length&&i(Wn(o[t-1],n),Wn(o[t],n))?qn(o[t],n):nt(r(e.element,i),!0,e.isLocked),i,r);return[...s,...a,c,...l]},la=(e,t,n,i,r)=>k(e,e=>{const o=t>0&&t<Kn(e)&&i(Wn(e,t-1),Wn(e,t)),s=((e,t,n,i,r,o,s)=>{if("colgroup"!==n&&i)return qn(e,t);{const t=qn(e,r);return nt(s(t.element,o),!0,!1)}})(e,t,e.section,o,n,i,r);return Gn(e,t,s)}),ca=(e,t,n,i)=>((e,t,n,i)=>void 0!==Wn(e[t],n)&&t>0&&i(Wn(e[t-1],n),Wn(e[t],n)))(e,t,n,i)||((e,t,n)=>t>0&&n(Wn(e,t-1),Wn(e,t)))(e[t],n,i),da=(e,t,n,i)=>{const r=e=>(e=>"row"===e?Vt(t):jt(t))(e)?`${e}group`:e;if(e)return fs(t)?r(n):null;if(i&&fs(t)){return r("row"===n?"col":"row")}return null},ua=(e,t,n)=>nt(n(e.element,t),!0,e.isLocked),ha=(e,t,n,i,r,o,s)=>k(e,(e,a)=>((e,t)=>{const n=e.cells,i=k(n,t);return it(e.element,i,e.section,e.isNew)})(e,(e,l)=>{if((e=>S(t,t=>n(e.element,t.element)))(e)){const t=s(e,a,l)?r(e,n,i):e;return o(t,a,l).each(e=>{var n,i;n=t.element,i={scope:w.from(e)},$(i,(e,t)=>{e.fold(()=>{Ae(n,t)},e=>{fe(n.dom,t,e)})})}),t}return e})),pa=(e,t,n)=>U(e,(i,r)=>ca(e,r,t,n)?[]:[qn(i,t)]),ma=(e,t,n,i,r)=>{const o=Zn(e).rows,s=U(t,e=>pa(o,e,i)),a=k(o,e=>gs(e.cells)),l=((e,t)=>F(t,f)&&gs(e)?_:(e,n,i)=>!("th"===oe(e.element)&&t[n]))(s,a),c=((e,t)=>(n,i)=>w.some(da(e,n.element,"row",t[i])))(n,a);return ha(e,s,i,r,ua,c,l)},fa=(e,t,n,i,r,o,s)=>{const{cols:a,rows:l}=Zn(e),c=l[t[0]],d=U(t,e=>((e,t,n)=>{const i=e[t];return U(i.cells,(i,r)=>ca(e,t,r,n)?[]:[i])})(l,e,r)),u=k(c.cells,(e,t)=>gs(pa(l,t,r))),h=[...l];L(t,e=>{h[e]=s.transformRow(l[e],n)});const p=[...a,...h],m=((e,t)=>F(t,f)&&gs(e.cells)?_:(e,n,i)=>!("th"===oe(e.element)&&t[i]))(c,u),g=((e,t)=>(n,i,r)=>w.some(da(e,n.element,"col",t[r])))(i,u);return ha(p,d,r,o,s.transformCell,g,m)},ga=(e,t,n,i)=>{const r=Zn(e).rows,o=k(t,e=>qn(r[e.row],e.column));return ha(e,o,n,i,ua,w.none,_)},va=e=>{if(!s(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return L(e,(i,r)=>{const o=G(i);if(1!==o.length)throw new Error("one and only one name per case");const a=o[0],l=i[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!s(l))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const i=n.length;if(i!==l.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+l.length+" ("+l+"), got "+i);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const i=G(e);if(t.length!==i.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+i.join(","));if(!F(t,e=>M(i,e)))throw new Error("Not all branches were specified when using match. Specified: "+i.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}}),n},ya={...va([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},ba=(e,t,n,i,r)=>{const o=e.slice(0),s=((e,t)=>0===e.length?ya.none():1===e.length?ya.only(0):0===t?ya.left(0,1):t===e.length-1?ya.right(t-1,t):t>0&&t<e.length-1?ya.middle(t-1,t,t+1):ya.none())(e,t),a=m(k(o,m(0)));return s.fold(a,e=>i.singleColumnWidth(o[e],n),(e,t)=>r.calcLeftEdgeDeltas(o,e,t,n,i.minCellWidth(),i.isRelative),(e,t,s)=>r.calcMiddleDeltas(o,e,t,s,n,i.minCellWidth(),i.isRelative),(e,t)=>r.calcRightEdgeDeltas(o,e,t,n,i.minCellWidth(),i.isRelative))},Aa=(e,t,n)=>{let i=0;for(let r=e;r<t;r++)i+=void 0!==n[r]?n[r]:0;return i},_a=(e,t)=>{const n=oi.justCells(e);return k(n,e=>{const n=Aa(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}})},wa=(e,t)=>oi.hasColumns(e)?((e,t)=>{const n=oi.justColumns(e);return k(n,(e,n)=>({element:e.element,width:t[n],colspan:e.colspan}))})(e,t):((e,t)=>{const n=oi.justCells(e);return k(n,e=>{const n=Aa(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}})})(e,t),xa=(e,t,n)=>{const i=wa(e,t);L(i,e=>{n.setElementWidth(e.element,e.width)})},Ca=(e,t,n,i,r)=>{const o=oi.fromTable(e),s=r.getCellDelta(t),a=r.getWidths(o,r),l=n===o.grid.columns-1,c=i.clampTableDelta(a,n,s,r.minCellWidth(),l),d=ba(a,n,c,r,i),u=k(d,(e,t)=>e+a[t]);xa(o,u,r),i.resizeTable(r.adjustTableWidth,c,l)},Ea=(e,t,n,i)=>{const r=oi.fromTable(e),o=((e,t,n)=>ar(e,t,n,Ki,e=>e.getOrThunk(Qt)))(r,e,i),s=k(o,(e,i)=>n===i?Math.max(t+e,Qt()):e),a=_a(r,s),l=((e,t)=>k(e.all,(e,n)=>({element:e.element,height:t[n]})))(r,s);L(l,e=>{Vi(e.element,e.height)}),L(a,e=>{Vi(e.element,e.height)});const c=R(s,(e,t)=>e+t,0);Vi(e,c)},Ma=e=>O(e,(e,t)=>S(e,e=>e.column===t.column)?e:e.concat([t]),[]).sort((e,t)=>e.column-t.column),Sa=me("col"),Ta=me("colgroup"),ka=e=>"tr"===oe(e)||Ta(e),La=e=>({element:e,colspan:zt(e,"colspan",1),rowspan:zt(e,"rowspan",1)}),Da=e=>be(e,"scope").map(e=>e.substr(0,3)),Ia=(e,t=La)=>{const n=n=>{if(ka(n))return Ta((r={element:n}).element)?e.colgroup(r):e.row(r);{const r=n,o=(t=>Sa(t.element)?e.col(t):e.cell(t))(t(r));return i=w.some({item:r,replacement:o}),o}var r};let i=w.none();return{getOrInit:(e,t)=>i.fold(()=>n(e),i=>t(e,i.item)?i.replacement:n(e))}},Ra=e=>t=>{const n=[],i=i=>{const r="td"===e?{scope:null}:{},o=t.replace(i,e,r);return n.push({item:i,sub:o}),o};return{replaceOrInit:(e,t)=>{if(ka(e)||Sa(e))return e;{const r=e;return((e,t)=>P(n,n=>t(n.item,e)))(r,t).fold(()=>i(r),n=>t(e,n.item)?n.sub:i(r))}}}},Oa=e=>({unmerge:t=>{const n=Da(t);return n.each(e=>ge(t,"scope",e)),()=>{const i=e.cell({element:t,colspan:1,rowspan:1});return Ft(i,"width"),Ft(t,"width"),n.each(e=>ge(i,"scope",e)),i}},merge:e=>(Ft(e[0],"width"),(()=>{const t=Ct(k(e,Da));if(0===t.length)return w.none();{const e=t[0],n=["row","col"];return S(t,t=>t!==e&&M(n,t))?w.none():w.from(e)}})().fold(()=>Ae(e[0],"scope"),t=>ge(e[0],"scope",t+"group")),m(e[0]))}),Pa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ba=wo(),Na=e=>((e,t)=>{const n=e.property().name(t);return M(Pa,n)})(Ba,e),Ua=e=>((e,t)=>{const n=e.property().name(t);return M(["ol","ul"],n)})(Ba,e),Fa=e=>((e,t)=>M(["br","img","hr","input"],e.property().name(t)))(Ba,e),za=e=>{const t=me("br"),n=e=>Er(e).bind(n=>{const i=Be(n).map(e=>!!Na(e)||!!Fa(e)&&"img"!==oe(e)).getOr(!1);return Ie(n).map(r=>!0===i||(e=>"li"===oe(e)||vt(e,Ua).isSome())(r)||t(n)||Na(r)&&!Se(e,r)?[]:[xe.fromTag("br")])}).getOr([]),i=(()=>{const i=U(e,e=>{const i=Ne(e);return(e=>F(e,e=>t(e)||ue(e)&&0===yr(e).trim().length))(i)?[]:i.concat(n(e))});return 0===i.length?[xe.fromTag("br")]:i})();Qe(e[0]),Ge(e[0],i)},Ha=e=>to(e,!0),ja=e=>{0===Kt(e).length&&$e(e)},Va=(e,t)=>({grid:e,cursor:t}),Ya=(e,t,n)=>{var i,r;const o=Zn(e).rows;return w.from(null===(r=null===(i=o[t])||void 0===i?void 0:i.cells[n])||void 0===r?void 0:r.element).filter(Ha).orThunk(()=>(e=>Y(e,e=>Y(e.cells,e=>{const t=e.element;return Et(Ha(t),t)})))(o))},Ga=(e,t,n)=>{const i=Ya(e,t,n);return Va(e,i)},Qa=e=>O(e,(e,t)=>S(e,e=>e.row===t.row)?e:e.concat([t]),[]).sort((e,t)=>e.row-t.row),$a=(e,t)=>(n,i,r,o,s)=>{const a=Qa(i),l=k(a,e=>e.row),c=fa(n,l,e,t,r,o.replaceOrInit,s);return Ga(c,i[0].row,i[0].column)},qa=$a("thead",!0),Wa=$a("tbody",!1),Ka=$a("tfoot",!1),Za=(e,t,n)=>{const i=((e,t)=>tn(e,()=>t))(e,n.section),r=oi.generate(i);return Bs(r,t,!0)},Xa=(e,t,n,i)=>((e,t,n,i)=>{const r=oi.generate(t),o=i.getWidths(r,i);xa(r,o,i)})(0,t,0,i.sizing),Ja=(e,t,n,i)=>((e,t,n,i,r)=>{const o=oi.generate(t),s=i.getWidths(o,i),a=i.pixelWidth(),{newSizes:l,delta:c}=r.calcRedestributedWidths(s,a,n.pixelDelta,i.isRelative);xa(o,l,i),i.adjustTableWidth(c)})(0,t,n,i.sizing,i.resize),el=(e,t)=>S(t,e=>0===e.column&&e.isLocked),tl=(e,t)=>S(t,t=>t.column+t.colspan>=e.grid.columns&&t.isLocked),nl=(e,t)=>{const n=si(e),i=Ma(t);return O(i,(e,t)=>e+n[t.column].map(Hn).getOr(0),0)},il=e=>(t,n)=>js(t,n).filter(n=>!(e?el:tl)(t,n)).map(e=>({details:e,pixelDelta:nl(t,e)})),rl=e=>(t,n)=>Hs(t,n).filter(n=>!(e?el:tl)(t,n.cells)),ol=Ra("th"),sl=Ra("td"),al=zs((e,t,n,i)=>{const r=t[0].row,o=Qa(t),s=R(o,(e,t)=>({grid:aa(e.grid,r,t.row+e.delta,n,i.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Ga(s,r,t[0].column)},js,p,p,Ia),ll=zs((e,t,n,i)=>{const r=Qa(t),o=r[r.length-1],s=o.row+o.rowspan,a=R(r,(e,t)=>aa(e,s,t.row,n,i.getOrInit),e);return Ga(a,s,t[0].column)},js,p,p,Ia),cl=zs((e,t,n,i)=>{const r=t.details,o=Ma(r),s=o[0].column,a=R(o,(e,t)=>({grid:la(e.grid,s,t.column+e.delta,n,i.getOrInit),delta:e.delta+1}),{grid:e,delta:0}).grid;return Ga(a,r[0].row,s)},il(!0),Ja,p,Ia),dl=zs((e,t,n,i)=>{const r=t.details,o=r[r.length-1],s=o.column+o.colspan,a=Ma(r),l=R(a,(e,t)=>la(e,s,t.column,n,i.getOrInit),e);return Ga(l,r[0].row,s)},il(!1),Ja,p,Ia),ul=zs((e,t,n,i)=>{const r=Ma(t.details),o=((e,t)=>U(e,e=>{const n=e.cells,i=R(t,(e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e,n);return i.length>0?[it(e.element,i,e.section,e.isNew)]:[]}))(e,k(r,e=>e.column)),s=o.length>0?o[0].cells.length-1:0;return Ga(o,r[0].row,Math.min(r[0].column,s))},(e,t)=>Vs(e,t).map(t=>({details:t,pixelDelta:-nl(e,t)})),Ja,ja,Ia),hl=zs((e,t,n,i)=>{const r=Qa(t),o=((e,t,n)=>{const{rows:i,cols:r}=Zn(e);return[...r,...i.slice(0,t),...i.slice(n+1)]})(e,r[0].row,r[r.length-1].row),s=o.length>0?o.length-1:0;return Ga(o,Math.min(t[0].row,s),t[0].column)},js,p,ja,Ia),pl=zs((e,t,n,i)=>{const r=Ma(t),o=k(r,e=>e.column),s=ma(e,o,!0,n,i.replaceOrInit);return Ga(s,t[0].row,t[0].column)},Vs,p,p,ol),ml=zs((e,t,n,i)=>{const r=Ma(t),o=k(r,e=>e.column),s=ma(e,o,!1,n,i.replaceOrInit);return Ga(s,t[0].row,t[0].column)},Vs,p,p,sl),fl=zs(qa,Vs,p,p,ol),gl=zs(Wa,Vs,p,p,sl),vl=zs(Ka,Vs,p,p,sl),yl=zs((e,t,n,i)=>{const r=ga(e,t,n,i.replaceOrInit);return Ga(r,t[0].row,t[0].column)},Vs,p,p,ol),bl=zs((e,t,n,i)=>{const r=ga(e,t,n,i.replaceOrInit);return Ga(r,t[0].row,t[0].column)},Vs,p,p,sl),Al=zs((e,t,n,i)=>{const r=t.cells;za(r);const o=((e,t,n,i)=>{const r=Zn(e).rows;if(0===r.length)return e;for(let e=t.startRow;e<=t.finishRow;e++)for(let n=t.startCol;n<=t.finishCol;n++){const t=r[e],o=qn(t,n).isLocked;Qn(t,n,nt(i(),!1,o))}return e})(e,t.bounds,0,i.merge(r));return Va(o,w.from(r[0]))},(e,t)=>((e,t)=>t.mergable)(0,t).filter(t=>Ys(e,t.cells)),Xa,p,Oa),_l=zs((e,t,n,i)=>{const r=R(t,(e,t)=>Gs(e,t,n,i.unmerge(t)),e);return Va(r,w.from(t[0]))},(e,t)=>((e,t)=>t.unmergable)(0,t).filter(t=>Ys(e,t)),Xa,p,Oa),wl=zs((e,t,n,i)=>{const r=((e,t)=>{const n=oi.fromTable(e);return Bs(n,t,!0)})(t.clipboard,t.generators),o=((e,t)=>({row:e,column:t}))(t.row,t.column);return ra(o,e,r,t.generators,n).fold(()=>Va(e,w.some(t.element)),e=>Ga(e,t.row,t.column))},(e,t)=>Wt(t.element).bind(n=>Us(e,n).map(e=>({...e,generators:t.generators,clipboard:t.clipboard}))),Xa,p,Ia),xl=zs((e,t,n,i)=>{const r=Zn(e).rows,o=t.cells[0].column,s=r[t.cells[0].row],a=Za(t.clipboard,t.generators,s),l=oa(o,e,a,t.generators,n);return Ga(l,t.cells[0].row,t.cells[0].column)},rl(!0),p,p,Ia),Cl=zs((e,t,n,i)=>{const r=Zn(e).rows,o=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,s=r[t.cells[0].row],a=Za(t.clipboard,t.generators,s),l=oa(o,e,a,t.generators,n);return Ga(l,t.cells[0].row,t.cells[0].column)},rl(!1),p,p,Ia),El=zs((e,t,n,i)=>{const r=Zn(e).rows,o=t.cells[0].row,s=r[o],a=Za(t.clipboard,t.generators,s),l=sa(o,e,a,t.generators,n);return Ga(l,t.cells[0].row,t.cells[0].column)},Hs,p,p,Ia),Ml=zs((e,t,n,i)=>{const r=Zn(e).rows,o=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,s=r[t.cells[0].row],a=Za(t.clipboard,t.generators,s),l=sa(o,e,a,t.generators,n);return Ga(l,t.cells[0].row,t.cells[0].column)},Hs,p,p,Ia),Sl=(e,t)=>{const n=oi.fromTable(e);return js(n,t).bind(e=>{const t=e[e.length-1],i=e[0].column,r=t.column+t.colspan,o=N(k(n.all,e=>I(e.cells,e=>e.column>=i&&e.column<r)));return bs(o)}).getOr("")},Tl=(e,t)=>{const n=oi.fromTable(e);return js(n,t).bind(bs).getOr("")},kl=(e,t)=>{const n=oi.fromTable(e);return js(n,t).bind(e=>{const t=e[e.length-1],i=e[0].row,r=t.row+t.rowspan;return(e=>{const t=k(e,e=>ys(e).type),n=M(t,"header"),i=M(t,"footer");if(n||i){const e=M(t,"body");return!n||e||i?n||e||!i?w.none():w.some("footer"):w.some("header")}return w.some("body")})(n.all.slice(i,r))}).getOr("")},Ll=(e,t)=>e.dispatch("NewRow",{node:t}),Dl=(e,t)=>e.dispatch("NewCell",{node:t}),Il=(e,t,n)=>{e.dispatch("TableModified",{...n,table:t})},Rl={structure:!1,style:!0},Ol={structure:!0,style:!1},Pl={structure:!0,style:!0},Bl=(e,t)=>Gr(e)?mr(t):Qr(e)?pr(t):hr(t),Nl=(e,t,n)=>{const i=e=>"table"===oe(io(e)),r=Fr(e),o=Vr(e)?p:ss,s=t=>{switch(zr(e)){case"section":return Ms();case"sectionCells":return Ss();case"cells":return Ts();default:return Es(t,"section")}},a=(t,i)=>i.cursor.fold(()=>{const i=Kt(t);return j(i).filter(dt).map(i=>{n.clearSelectedCells(t.dom);const r=e.dom.createRng();return r.selectNode(i.dom),e.selection.setRng(r),ge(i,"data-mce-selected","1"),r})},i=>{const r=rs(os,i);const o=e.dom.createRng();return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),e.selection.setRng(o),n.clearSelectedCells(t.dom),w.some(o)}),l=(n,i,o,l)=>(c,d,u=!1)=>{oo(c);const h=xe.fromDom(e.getDoc()),p=Or(o,h,r),m={sizing:Bl(e,c),resize:Vr(e)?hs():ps(),section:s(c)};return i(c)?n(c,d,p,m).bind(n=>{t.refresh(c.dom),L(n.newRows,t=>{Ll(e,t.dom)}),L(n.newCells,t=>{Dl(e,t.dom)});const i=a(c,n);return dt(c)&&(oo(c),u||Il(e,c.dom,l)),i.map(e=>({rng:e,effect:l}))}):w.none()},c=l(hl,t=>!i(e)||ms(t).rows>1,p,Ol),d=l(ul,t=>!i(e)||ms(t).columns>1,p,Ol);return{deleteRow:c,deleteColumn:d,insertRowsBefore:l(al,_,p,Ol),insertRowsAfter:l(ll,_,p,Ol),insertColumnsBefore:l(cl,_,o,Ol),insertColumnsAfter:l(dl,_,o,Ol),mergeCells:l(Al,_,p,Ol),unmergeCells:l(_l,_,p,Ol),pasteColsBefore:l(xl,_,p,Ol),pasteColsAfter:l(Cl,_,p,Ol),pasteRowsBefore:l(El,_,p,Ol),pasteRowsAfter:l(Ml,_,p,Ol),pasteCells:l(wl,_,p,Pl),makeCellsHeader:l(yl,_,p,Ol),unmakeCellsHeader:l(bl,_,p,Ol),makeColumnsHeader:l(pl,_,p,Ol),unmakeColumnsHeader:l(ml,_,p,Ol),makeRowsHeader:l(fl,_,p,Ol),makeRowsBody:l(gl,_,p,Ol),makeRowsFooter:l(vl,_,p,Ol),getTableRowType:kl,getTableCellType:Tl,getTableColType:Sl}},Ul=(e,t,n)=>{const i=zt(e,t,1);1===n||i<=1?Ae(e,t):ge(e,t,Math.min(n,i))},Fl=(e,t)=>n=>{const i=n.column+n.colspan-1,r=n.column;return i>=e&&r<t},zl=(e,t)=>{const n=oi.fromTable(e);return Vs(n,t).map(e=>{const t=e[e.length-1],i=e[0].column,r=t.column+t.colspan,o=((e,t,n)=>{if(oi.hasColumns(e)){const i=I(oi.justColumns(e),Fl(t,n)),r=k(i,e=>{const i=Ze(e.element);return Ul(i,"span",n-t),i}),o=xe.fromTag("colgroup");return Ge(o,r),[o]}return[]})(n,i,r),s=((e,t,n)=>k(e.all,e=>{const i=I(e.cells,Fl(t,n)),r=k(i,e=>{const i=Ze(e.element);return Ul(i,"colspan",n-t),i}),o=xe.fromTag("tr");return Ge(o,r),o}))(n,i,r);return[...o,...s]})},Hl=(e,t,n)=>{const i=oi.fromTable(e);return js(i,t).bind(e=>{const t=Bs(i,n,!1),r=Zn(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),o=U(r,e=>{const t=I(e.cells,e=>!e.isLocked);return t.length>0?[{...e,cells:t}]:[]}),s=Ns(o);return Et(s.length>0,s)}).map(e=>(e=>k(e,e=>{const t=Ke(e.element);return L(e.cells,e=>{const n=Ze(e.element);Ls(n,"colspan",e.colspan,1),Ls(n,"rowspan",e.rowspan,1),je(t,n)}),t}))(e))},jl=va([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Vl=(e,t,n)=>{const i=n.substring(0,n.length-e.length),r=parseFloat(i);return i===r.toString()?t(r):jl.invalid(n)},Yl={...jl,from:e=>kt(e,"%")?Vl("%",jl.percent,e):kt(e,"px")?Vl("px",jl.pixels,e):jl.invalid(e)},Gl=(e,t,n)=>e.fold(()=>t,e=>((e,t,n)=>{const i=n/t;return k(e,e=>Yl.from(e).fold(()=>e,e=>e*i+"px",e=>e/100*n+"px"))})(t,n,e),e=>((e,t)=>k(e,e=>Yl.from(e).fold(()=>e,e=>e/t*100+"%",e=>e+"%")))(t,n)),Ql=(e,t,n)=>{const i=Yl.from(n),r=F(e,e=>"0px"===e)?((e,t)=>{const n=e.fold(()=>m(""),e=>m(e/t+"px"),()=>m(100/t+"%"));return T(t,n)})(i,e.length):Gl(i,e,t);return Wl(r)},$l=(e,t)=>0===e.length?t:R(e,(e,t)=>Yl.from(t).fold(m(0),f,f)+e,0),ql=(e,t)=>Yl.from(e).fold(m(e),e=>e+t+"px",e=>e+t+"%"),Wl=e=>{if(0===e.length)return e;const t=R(e,(e,t)=>{const n=Yl.from(t).fold(()=>({value:t,remainder:0}),e=>((e,t)=>{const n=Math.floor(e);return{value:n+t,remainder:e-n}})(e,"px"),e=>({value:e+"%",remainder:0}));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}},{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([ql(n[n.length-1],Math.round(t.remainder))])},Kl=Yl.from,Zl=e=>Kl(e).fold(m("px"),m("px"),m("%")),Xl=(e,t,n)=>{const i=oi.fromTable(e),r=i.all,o=oi.justCells(i),s=oi.justColumns(i);t.each(t=>{const n=Zl(t),r=zn(e),a=((e,t)=>rr(e,t,tr,or))(i,e),l=Ql(a,r,t);oi.hasColumns(i)?((e,t,n)=>{L(t,(t,i)=>{const r=$l([e[i]],Gt());Ot(t.element,"width",r+n)})})(l,s,n):((e,t,n)=>{L(t,t=>{const i=e.slice(t.column,t.colspan+t.column),r=$l(i,Gt());Ot(t.element,"width",r+n)})})(l,o,n),Ot(e,"width",t)}),n.each(t=>{const n=Zl(t),s=pi(e),a=((e,t,n)=>ar(e,t,n,nr,or))(i,e,Di);((e,t,n,i)=>{L(n,t=>{const n=e.slice(t.row,t.rowspan+t.row),r=$l(n,Qt());Ot(t.element,"height",r+i)}),L(t,(t,n)=>{Ot(t.element,"height",e[n])})})(Ql(a,s,t),r,o,n),Ot(e,"height",t)})},Jl=e=>$i(e).exists(e=>Ni.test(e)),ec=e=>$i(e).exists(e=>Ui.test(e)),tc=e=>$i(e).isNone(),nc=e=>{Ae(e,"width")},ic=e=>{const t=Xi(e);Xl(e,w.some(t),w.none()),nc(e)},rc=e=>{const t=(e=>zn(e)+"px")(e);Xl(e,w.some(t),w.none()),nc(e)},oc=e=>{Ft(e,"width");const t=Zt(e),n=t.length>0?t:Kt(e);L(n,e=>{Ft(e,"width"),nc(e)}),nc(e)},sc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ac=()=>xe.fromTag("th"),lc=()=>xe.fromTag("td"),cc=e=>{const t=xe.fromTag("colgroup");return T(e,()=>je(t,xe.fromTag("col"))),t},dc=(e,t,n,i)=>T(e,e=>((e,t,n,i)=>{const r=xe.fromTag("tr");for(let o=0;o<e;o++){const e=i<t||o<n?ac():lc();o<n&&ge(e,"scope","row"),i<t&&ge(e,"scope","col"),je(e,xe.fromTag("br")),je(r,e)}return r})(t,n,i,e)),uc=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},hc=(e,t,n,i,o)=>{const s=Xr(e),a={styles:s,attributes:Zr(e),colGroups:Jr(e)};return e.undoManager.ignore(()=>{const r=((e,t,n,i,r,o=sc)=>{const s=xe.fromTag("table"),a="cells"!==r;Pt(s,o.styles),ve(s,o.attributes),o.colGroups&&je(s,cc(t));const l=Math.min(e,n);if(a&&n>0){const e=xe.fromTag("thead");je(s,e);const o=dc(n,t,"sectionCells"===r?l:0,i);Ge(e,o)}const c=xe.fromTag("tbody");je(s,c);const d=dc(a?e-l:e,t,a?0:n,i);return Ge(c,d),s})(n,t,o,i,zr(e),a);ge(r,"data-mce-id","__mce");const s=(e=>{const t=xe.fromTag("div"),n=xe.fromDom(e.dom.cloneNode(!0));return je(t,n),(e=>e.dom.innerHTML)(t)})(r);e.insertContent(s),e.addVisual()}),_t(io(e),'table[data-mce-id="__mce"]').map(t=>(Qr(e)?rc(t):$r(e)?oc(t):(Gr(e)||(e=>r(e)&&-1!==e.indexOf("%"))(s.width))&&ic(t),oo(t),Ae(t,"data-mce-id"),((e,t)=>{L(ft(t,"tr"),t=>{Ll(e,t.dom),L(ft(t,"th,td"),t=>{Dl(e,t.dom)})})})(e,t),((e,t)=>{_t(t,"td,th").each(v(uc,e))})(e,t),t.dom)).getOrNull()};var pc=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const mc="x-tinymce/dom-table-",fc=mc+"rows",gc=mc+"columns",vc=e=>{const t=pc.FakeClipboardItem(e);pc.write([t])},yc=e=>{var t;const n=null!==(t=pc.read())&&void 0!==t?t:[];return Y(n,t=>w.from(t.getType(e)))},bc=e=>{yc(e).isSome()&&pc.clear()},Ac=e=>{e.fold(wc,e=>vc({[fc]:e}))},_c=()=>yc(fc),wc=()=>bc(fc),xc=e=>{e.fold(Ec,e=>vc({[gc]:e}))},Cc=()=>yc(gc),Ec=()=>bc(gc),Mc=e=>Ko(so(e),ro(e)).filter(co),Sc=(e,t)=>{const n=ro(e),i=e=>Xt(e,n),s=t=>(e=>Zo(so(e),ro(e)).filter(co))(e).bind(e=>i(e).map(n=>t(n,e))),a=t=>{e.focus()},l=(t,n=!1)=>s((i,r)=>{const o=qo(Xo(e),i,r);t(i,o,n).each(a)}),c=()=>s((t,n)=>{const i=qo(Xo(e),t,n),r=Or(p,xe.fromDom(e.getDoc()),w.none());return Hl(t,i,r)}),d=()=>s((t,n)=>{const i=qo(Xo(e),t,n);return zl(t,i)}),u=(t,n)=>n().each(n=>{const i=k(n,e=>Ze(e));s((n,r)=>{const o=Pr(xe.fromDom(e.getDoc())),s=((e,t,n,i)=>({selection:Bo(e),clipboard:n,generators:i}))(Xo(e),0,i,o);t(n,s).each(a)})}),m=e=>(t,n)=>((e,t)=>J(e,t)?w.from(e[t]):w.none())(n,"type").each(t=>{l(e(t),n.no_events)});$({mceTableSplitCells:()=>l(t.unmergeCells),mceTableMergeCells:()=>l(t.mergeCells),mceTableInsertRowBefore:()=>l(t.insertRowsBefore),mceTableInsertRowAfter:()=>l(t.insertRowsAfter),mceTableInsertColBefore:()=>l(t.insertColumnsBefore),mceTableInsertColAfter:()=>l(t.insertColumnsAfter),mceTableDeleteCol:()=>l(t.deleteColumn),mceTableDeleteRow:()=>l(t.deleteRow),mceTableCutCol:()=>d().each(e=>{xc(e),l(t.deleteColumn)}),mceTableCutRow:()=>c().each(e=>{Ac(e),l(t.deleteRow)}),mceTableCopyCol:()=>d().each(e=>xc(e)),mceTableCopyRow:()=>c().each(e=>Ac(e)),mceTablePasteColBefore:()=>u(t.pasteColsBefore,Cc),mceTablePasteColAfter:()=>u(t.pasteColsAfter,Cc),mceTablePasteRowBefore:()=>u(t.pasteRowsBefore,_c),mceTablePasteRowAfter:()=>u(t.pasteRowsAfter,_c),mceTableDelete:()=>Mc(e).each(t=>{Xt(t,n).filter(y(n)).each(t=>{const n=xe.fromText("");if(ze(t,n),$e(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(n.dom,0),t.setEnd(n.dom,0),e.selection.setRng(t),e.nodeChanged()}})}),mceTableCellToggleClass:(t,n)=>{s(t=>{const i=Xo(e),r=F(i,t=>e.formatter.match("tablecellclass",{value:n},t.dom)),o=r?e.formatter.remove:e.formatter.apply;L(i,e=>o("tablecellclass",{value:n},e.dom)),Il(e,t.dom,Rl)})},mceTableToggleClass:(t,n)=>{s(t=>{e.formatter.toggle("tableclass",{value:n},t.dom),Il(e,t.dom,Rl)})},mceTableToggleCaption:()=>{Mc(e).each(t=>{Xt(t,n).each(n=>{At(n,"caption").fold(()=>{const t=xe.fromTag("caption");je(t,xe.fromText("Caption")),((e,t,n)=>{Ue(e,n).fold(()=>{je(e,t)},e=>{Fe(e,t)})})(n,t,0),e.selection.setCursorLocation(t.dom,0)},i=>{me("caption")(t)&&Me("td",n).each(t=>e.selection.setCursorLocation(t.dom,0)),$e(i)}),Il(e,n.dom,Ol)})})},mceTableSizingMode:(t,i)=>(t=>Mc(e).each(i=>{$r(e)||Qr(e)||Gr(e)||Xt(i,n).each(n=>{"relative"!==t||Jl(n)?"fixed"!==t||ec(n)?"responsive"!==t||tc(n)||oc(n):rc(n):ic(n),oo(n),Il(e,n.dom,Ol)})}))(i),mceTableCellType:m(e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader),mceTableColType:m(e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader),mceTableRowType:m(e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},(t,n)=>e.addCommand(n,t)),e.addCommand("mceInsertTable",(t,n)=>{((e,t,n,i={})=>{const r=e=>h(e)&&e>0;if(r(t)&&r(n)){const r=i.headerRows||0,o=i.headerColumns||0;return hc(e,n,t,o,r)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(e,n.rows,n.columns,n.options)}),e.addCommand("mceTableApplyCellStyle",(t,n)=>{const s=e=>"tablecell"+e.toLowerCase().replace("-","");if(!o(n))return;const a=I(Xo(e),co);if(0===a.length)return;const l=K(n,(t,n)=>e.formatter.has(s(n))&&r(t));(e=>{for(const t in e)if(Q.call(e,t))return!1;return!0})(l)||($(l,(t,n)=>{const i=s(n);L(a,n=>{""===t?e.formatter.remove(i,{value:null},n.dom,!0):e.formatter.apply(i,{value:t},n.dom)})}),i(a[0]).each(t=>Il(e,t.dom,Rl)))})},Tc=va([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),kc={before:Tc.before,on:Tc.on,after:Tc.after,cata:(e,t,n,i)=>e.fold(t,n,i),getStart:e=>e.fold(f,f,f)},Lc=(e,t)=>({selection:e,kill:t}),Dc=(e,t)=>{const n=e.document.createRange();return n.selectNode(t.dom),n},Ic=(e,t)=>{const n=e.document.createRange();return Rc(n,t),n},Rc=(e,t)=>e.selectNodeContents(t.dom),Oc=(e,t,n)=>{const i=e.document.createRange();var r;return r=i,t.fold(e=>{r.setStartBefore(e.dom)},(e,t)=>{r.setStart(e.dom,t)},e=>{r.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})})(i,n),i},Pc=(e,t,n,i,r)=>{const o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(i.dom,r),o},Bc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Nc=va([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Uc=(e,t,n)=>t(xe.fromDom(n.startContainer),n.startOffset,xe.fromDom(n.endContainer),n.endOffset),Fc=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:m(e),rtl:w.none}),relative:(t,n)=>({ltr:on(()=>Oc(e,t,n)),rtl:on(()=>w.some(Oc(e,n,t)))}),exact:(t,n,i,r)=>({ltr:on(()=>Pc(e,t,n,i,r)),rtl:on(()=>w.some(Pc(e,i,r,t,n)))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter(e=>!1===e.collapsed).map(e=>Nc.rtl(xe.fromDom(e.endContainer),e.endOffset,xe.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>Uc(0,Nc.ltr,n));return Uc(0,Nc.ltr,n)})(0,n)},zc=(e,t)=>Fc(e,t).match({ltr:(t,n,i,r)=>{const o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(i.dom,r),o},rtl:(t,n,i,r)=>{const o=e.document.createRange();return o.setStart(i.dom,r),o.setEnd(t.dom,n),o}});Nc.ltr,Nc.rtl;const Hc=(e,t,n,i)=>({start:e,soffset:t,finish:n,foffset:i}),jc=(e,t,n,i)=>({start:kc.on(e,t),finish:kc.on(n,i)}),Vc=(e,t)=>{const n=zc(e,t);return Hc(xe.fromDom(n.startContainer),n.startOffset,xe.fromDom(n.endContainer),n.endOffset)},Yc=jc,Gc=(e,t,n,i,r)=>Se(n,i)?w.none():Lo(n,i,t).bind(t=>{const i=t.boxes.getOr([]);return i.length>1?(r(e,i,t.start,t.finish),w.some(Lc(w.some(Yc(n,0,n,_r(n))),!0))):w.none()}),Qc=(e,t)=>({item:e,mode:t}),$c=(e,t,n,i=qc)=>e.property().parent(t).map(e=>Qc(e,i)),qc=(e,t,n,i=Wc)=>n.sibling(e,t).map(e=>Qc(e,i)),Wc=(e,t,n,i=Wc)=>{const r=e.property().children(t);return n.first(r).map(e=>Qc(e,i))},Kc=[{current:$c,next:qc,fallback:w.none()},{current:qc,next:Wc,fallback:w.some($c)},{current:Wc,next:Wc,fallback:w.some(qc)}],Zc=(e,t,n,i,r=Kc)=>P(r,e=>e.current===n).bind(n=>n.current(e,t,i,n.next).orThunk(()=>n.fallback.bind(n=>Zc(e,t,n,i)))),Xc=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?w.some(e[e.length-1]):w.none()}),Jc=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?w.some(e[0]):w.none()}),ed=(e,t,n,i,r,o)=>Zc(e,t,i,r).bind(t=>o(t.item)?w.none():n(t.item)?w.some(t.item):ed(e,t.item,n,t.mode,r,o)),td=e=>t=>0===e.property().children(t).length,nd=(e,t,n,i)=>ed(e,t,n,qc,Xc(),i),id=(e,t,n,i)=>ed(e,t,n,qc,Jc(),i),rd=wo(),od=(e,t)=>((e,t,n)=>nd(e,t,td(e),n))(rd,e,t),sd=(e,t)=>((e,t,n)=>id(e,t,td(e),n))(rd,e,t),ad=va([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),ld=e=>wt(e,"tr"),cd={...ad,verify:(e,t,n,i,r,o,s)=>wt(i,"td,th",s).bind(n=>wt(t,"td,th",s).map(t=>Se(n,t)?Se(i,n)&&_r(n)===r?o(t):ad.none("in same cell"):To(ld,[n,t]).fold(()=>((e,t,n)=>{const i=e.getRect(t),r=e.getRect(n);return r.right>i.left&&r.left<i.right})(e,t,n)?ad.success():o(t),e=>o(t)))).getOr(ad.none("default")),cata:(e,t,n,i,r)=>e.fold(t,n,i,r)},dd=(e,t)=>B(e,v(Se,t)),ud=me("br"),hd=(e,t,n)=>t(e,n).bind(e=>ue(e)&&0===yr(e).trim().length?hd(e,t,n):w.some(e)),pd=(e,t,n,i)=>((e,t)=>Ue(e,t).filter(ud).orThunk(()=>Ue(e,t-1).filter(ud)))(t,n).bind(t=>i.traverse(t).fold(()=>hd(t,i.gather,e).map(i.relative),e=>(e=>Ie(e).bind(t=>{const n=Ne(t);return dd(n,e).map(i=>((e,t,n,i)=>({parent:e,children:t,element:n,index:i}))(t,n,e,i))}))(e).map(e=>kc.on(e.parent,e.index)))),md=(e,t,n,i)=>{const r=ud(t)?((e,t,n)=>n.traverse(t).orThunk(()=>hd(t,n.gather,e)).map(n.relative))(e,t,i):pd(e,t,n,i);return r.map(e=>({start:e,finish:e}))},fd=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),gd=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),vd=(e,t,n)=>({left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}),yd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),bd=(e,t)=>w.some(e.getRect(t)),Ad=(e,t,n)=>de(t)?bd(e,t).map(yd):ue(t)?((e,t,n)=>n>=0&&n<_r(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):w.none())(e,t,n).map(yd):w.none(),_d=(e,t)=>de(t)?bd(e,t).map(yd):ue(t)?e.getRangedRect(t,0,t,_r(t)).map(yd):w.none(),wd=va([{none:[]},{retry:["caret"]}]),xd=(e,t,n)=>yt(t,Na).fold(A,t=>_d(e,t).exists(e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(n,e))),Cd={point:e=>e.bottom,adjuster:(e,t,n,i,r)=>{const o=fd(r,5);return Math.abs(n.bottom-i.bottom)<1||n.top>r.bottom?wd.retry(o):n.top===r.bottom?wd.retry(fd(r,1)):xd(e,t,r)?wd.retry(vd(o,5,0)):wd.none()},move:fd,gather:sd},Ed=(e,t,n,i,r)=>0===r?w.some(i):((e,t,n)=>e.elementFromPoint(t,n).filter(e=>"table"===oe(e)).isSome())(e,i.left,t.point(i))?((e,t,n,i,r)=>Ed(e,t,n,t.move(i,5),r))(e,t,n,i,r-1):e.situsFromPoint(i.left,t.point(i)).bind(o=>o.start.fold(w.none,o=>_d(e,o).bind(s=>t.adjuster(e,o,s,n,i).fold(w.none,i=>Ed(e,t,n,i,r-1))).orThunk(()=>w.some(i)),w.none)),Md=(e,t,n)=>{const i=e.move(n,5),r=Ed(t,e,n,i,100).getOr(i);return((e,t,n)=>e.point(t)>n.getInnerHeight()?w.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?w.some(-e.point(t)):w.none())(e,r,t).fold(()=>t.situsFromPoint(r.left,e.point(r)),n=>(t.scrollBy(0,n),t.situsFromPoint(r.left,e.point(r)-n)))},Sd={tryUp:v(Md,{point:e=>e.top,adjuster:(e,t,n,i,r)=>{const o=gd(r,5);return Math.abs(n.top-i.top)<1||n.bottom<r.top?wd.retry(o):n.bottom===r.top?wd.retry(gd(r,1)):xd(e,t,r)?wd.retry(vd(o,5,0)):wd.none()},move:gd,gather:od}),tryDown:v(Md,Cd),getJumpSize:m(5)},Td=(e,t,n)=>e.getSelection().bind(i=>md(t,i.finish,i.foffset,n).fold(()=>w.some(es(i.finish,i.foffset)),r=>{const o=e.fromSitus(r);return(e=>cd.cata(e,e=>w.none(),()=>w.none(),e=>w.some(es(e,0)),e=>w.some(es(e,_r(e)))))(cd.verify(e,i.finish,i.foffset,o.finish,o.foffset,n.failure,t))})),kd=(e,t,n,i,r,o)=>0===o?w.none():Id(e,t,n,i,r).bind(s=>{const a=e.fromSitus(s),l=cd.verify(e,n,i,a.finish,a.foffset,r.failure,t);return cd.cata(l,()=>w.none(),()=>w.some(s),s=>Se(n,s)&&0===i?Ld(e,n,i,gd,r):kd(e,t,s,0,r,o-1),s=>Se(n,s)&&i===_r(s)?Ld(e,n,i,fd,r):kd(e,t,s,_r(s),r,o-1))}),Ld=(e,t,n,i,r)=>Ad(e,t,n).bind(t=>Dd(e,r,i(t,Sd.getJumpSize()))),Dd=(e,t,n)=>{const i=On().browser;return i.isChromium()||i.isSafari()||i.isFirefox()?t.retry(e,n):w.none()},Id=(e,t,n,i,r)=>Ad(e,n,i).bind(t=>Dd(e,r,t)),Rd=(e,t)=>{return vt(e,e=>Ie(e).exists(e=>Se(e,t)),n).isSome();var n},Od=(e,t,n,i,r)=>wt(i,"td,th",t).bind(i=>wt(i,"table",t).bind(o=>Rd(r,o)?((e,t,n)=>Td(e,t,n).bind(i=>kd(e,t,i.element,i.offset,n,20).map(e.fromSitus)))(e,t,n).bind(e=>wt(e.finish,"td,th",t).map(t=>({start:i,finish:t,range:e}))):w.none())),Pd=(e,t,n,i,r,o)=>o(i,t).orThunk(()=>Od(e,t,n,i,r).map(e=>{const t=e.range;return Lc(w.some(Yc(t.start,t.soffset,t.finish,t.foffset)),!0)})),Bd=(e,t)=>wt(e,"tr",t).bind(e=>wt(e,"table",t).bind(n=>{const i=ft(n,"tr");return Se(e,i[0])?((e,t,n)=>nd(rd,e,t,n))(n,e=>Er(e).isSome(),t).map(e=>{const t=_r(e);return Lc(w.some(Yc(e,t,e,t)),!0)}):w.none()})),Nd=(e,t)=>wt(e,"tr",t).bind(e=>wt(e,"table",t).bind(n=>{const i=ft(n,"tr");return Se(e,i[i.length-1])?((e,t,n)=>id(rd,e,t,n))(n,e=>Cr(e).isSome(),t).map(e=>Lc(w.some(Yc(e,0,e,0)),!0)):w.none()})),Ud=(e,t,n,i,r,o,s)=>Od(e,n,i,r,o).bind(e=>Gc(t,n,e.start,e.finish,s)),Fd=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},zd=()=>{const e=(e=>{const t=Fd(w.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(w.some(e))}}})(p);return{...e,on:t=>e.get().each(t)}},Hd=(e,t)=>wt(e,"td,th",t),jd=e=>Re(e).exists(to),Vd={traverse:Be,gather:sd,relative:kc.before,retry:Sd.tryDown,failure:cd.failedDown},Yd={traverse:Pe,gather:od,relative:kc.before,retry:Sd.tryUp,failure:cd.failedUp},Gd=e=>t=>t===e,Qd=Gd(38),$d=Gd(40),qd=e=>e>=37&&e<=40,Wd={isBackward:Gd(37),isForward:Gd(39)},Kd={isBackward:Gd(39),isForward:Gd(37)},Zd=va([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Xd={domRange:Zd.domRange,relative:Zd.relative,exact:Zd.exact,exactFromRange:e=>Zd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>xe.fromDom(e.startContainer),relative:(e,t)=>kc.getStart(e),exact:(e,t,n,i)=>e}))(e);return n=t,xe.fromDom(De(n).dom.defaultView);var n},range:Hc},Jd=(e,t,n)=>{var i,r;return w.from(null===(r=(i=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(i,t,n)).bind(t=>{if(null===t.offsetNode)return w.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),w.some(n)})},eu=(e,t,n)=>{var i,r;return w.from(null===(r=(i=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(i,t,n))},tu=document.caretPositionFromPoint?Jd:document.caretRangeFromPoint?eu:w.none,nu=(e,t)=>{const n=oe(e);return"input"===n?kc.after(e):M(["br","img"],n)?0===t?kc.before(e):kc.after(e):kc.on(e,t)},iu=(e,t,n,i)=>{const r=((e,t,n,i)=>{const r=Le(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(n.dom,i),r})(e,t,n,i),o=Se(e,n)&&t===i;return r.collapsed&&!o},ru=e=>w.from(e.getSelection()),ou=(e,t)=>{ru(e).each(e=>{e.removeAllRanges(),e.addRange(t)})},su=(e,t,n,i,r)=>{const o=Pc(e,t,n,i,r);ou(e,o)},au=(e,t)=>Fc(e,t).match({ltr:(t,n,i,r)=>{su(e,t,n,i,r)},rtl:(t,n,i,r)=>{ru(e).each(o=>{if(o.setBaseAndExtent)o.setBaseAndExtent(t.dom,n,i.dom,r);else if(o.extend)try{((e,t,n,i,r,o)=>{t.collapse(n.dom,i),t.extend(r.dom,o)})(0,o,t,n,i,r)}catch(o){su(e,i,r,t,n)}else su(e,i,r,t,n)})}}),lu=(e,t,n,i,r)=>{const o=((e,t,n,i)=>{const r=nu(e,t),o=nu(n,i);return Xd.relative(r,o)})(t,n,i,r);au(e,o)},cu=(e,t,n)=>{const i=((e,t)=>{const n=e.fold(kc.before,nu,kc.after),i=t.fold(kc.before,nu,kc.after);return Xd.relative(n,i)})(t,n);au(e,i)},du=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return w.some(Hc(xe.fromDom(t.startContainer),t.startOffset,xe.fromDom(n.endContainer),n.endOffset))}return w.none()},uu=e=>{if(null===e.anchorNode||null===e.focusNode)return du(e);{const t=xe.fromDom(e.anchorNode),n=xe.fromDom(e.focusNode);return iu(t,e.anchorOffset,n,e.focusOffset)?w.some(Hc(t,e.anchorOffset,n,e.focusOffset)):du(e)}},hu=(e,t,n=!0)=>{const i=(n?Ic:Dc)(e,t);ou(e,i)},pu=e=>(e=>ru(e).filter(e=>e.rangeCount>0).bind(uu))(e).map(e=>Xd.exact(e.start,e.soffset,e.finish,e.foffset)),mu=(e,t)=>(e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?w.some(n).map(Bc):w.none()})(zc(e,t)),fu=(e,t,n)=>((e,t,n)=>{const i=xe.fromDom(e.document);return tu(i,t,n).map(e=>Hc(xe.fromDom(e.startContainer),e.startOffset,xe.fromDom(e.endContainer),e.endOffset))})(e,t,n),gu=e=>({elementFromPoint:(t,n)=>xe.fromPoint(xe.fromDom(e.document),t,n),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,n,i,r)=>{const o=Xd.exact(t,n,i,r);return mu(e,o)},getSelection:()=>pu(e).map(t=>Vc(e,t)),fromSitus:t=>{const n=Xd.relative(t.start,t.finish);return Vc(e,n)},situsFromPoint:(t,n)=>fu(e,t,n).map(e=>jc(e.start,e.soffset,e.finish,e.foffset)),clearSelection:()=>{(e=>{ru(e).each(e=>e.removeAllRanges())})(e)},collapseSelection:(t=!1)=>{pu(e).each(n=>n.fold(e=>e.collapse(t),(n,i)=>{const r=t?n:i;cu(e,r,r)},(n,i,r,o)=>{const s=t?n:r,a=t?i:o;lu(e,s,a,s,a)}))},setSelection:t=>{lu(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,n)=>{cu(e,t,n)},selectNode:t=>{hu(e,t,!1)},selectContents:t=>{hu(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,i=t.body.scrollTop||t.documentElement.scrollTop;return vi(n,i)})(xe.fromDom(e.document)).top,scrollBy:(t,n)=>{((e,t,n)=>{const i=(void 0!==n?n.dom:document).defaultView;i&&i.scrollBy(e,t)})(t,n,xe.fromDom(e.document))}}),vu=(e,t)=>({rows:e,cols:t}),yu=(e,t,n,i)=>{const r=((e,t,n,i)=>{const r=zd(),o=r.clear,s=o=>{r.on(r=>{i.clearBeforeUpdate(t),Hd(o.target,n).each(s=>{Lo(r,s,n).each(n=>{const r=n.boxes.getOr([]);if(1===r.length){const n=r[0],s="false"===no(n),a=xt(eo(o.target),n,Se);s&&a&&(i.selectRange(t,r,n,n),e.selectContents(n))}else r.length>1&&(i.selectRange(t,r,n.start,n.finish),e.selectContents(s))})})})};return{clearstate:o,mousedown:e=>{i.clear(t),Hd(e.target,n).filter(jd).each(r.set)},mouseover:e=>{s(e)},mouseup:e=>{s(e),o()}}})(gu(e),t,n,i);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}},bu=e=>yt(e,ce).exists(to),Au=(e,t)=>bu(e)||bu(t),_u=(e,t,n,i)=>{const r=gu(e),o=()=>(i.clear(t),w.none());return{keydown:(e,s,a,l,c,d)=>{const u=e.raw,h=u.which,p=!0===u.shiftKey,m=Do(t,i.selectedSelector).fold(()=>(qd(h)&&!p&&i.clearBeforeUpdate(t),qd(h)&&p&&!Au(s,l)?w.none:$d(h)&&p?v(Ud,r,t,n,Vd,l,s,i.selectRange):Qd(h)&&p?v(Ud,r,t,n,Yd,l,s,i.selectRange):$d(h)?v(Pd,r,n,Vd,l,s,Nd):Qd(h)?v(Pd,r,n,Yd,l,s,Bd):w.none),e=>{const n=n=>()=>{const o=Y(n,n=>((e,t,n,i,r)=>Ro(i,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map(e=>(r.clearBeforeUpdate(n),r.selectRange(n,e.boxes,e.start,e.finish),e.boxes)))(n.rows,n.cols,t,e,i));return o.fold(()=>Io(t,i.firstSelectedSelector,i.lastSelectedSelector).map(e=>{const n=$d(h)||d.isForward(h)?kc.after:kc.before;return r.setRelativeSelection(kc.on(e.first,0),n(e.table)),i.clear(t),Lc(w.none(),!0)}),e=>w.some(Lc(w.none(),!0)))};return qd(h)&&p&&!Au(s,l)?w.none:$d(h)&&p?n([vu(1,0)]):Qd(h)&&p?n([vu(-1,0)]):d.isBackward(h)&&p?n([vu(0,-1),vu(-1,0)]):d.isForward(h)&&p?n([vu(0,1),vu(1,0)]):qd(h)&&!p?o:w.none});return m()},keyup:(e,r,o,s,a)=>Do(t,i.selectedSelector).fold(()=>{const l=e.raw,c=l.which;return!0===l.shiftKey&&qd(c)&&Au(r,s)?((e,t,n,i,r,o,s)=>Se(n,r)&&i===o?w.none():wt(n,"td,th",t).bind(n=>wt(r,"td,th",t).bind(i=>Gc(e,t,n,i,s))))(t,n,r,o,s,a,i.selectRange):w.none()},w.none)}},wu=(e,t)=>{const n=ye(e,t);return void 0===n||""===n?[]:n.split(" ")},xu=e=>void 0!==e.dom.classList,Cu=(e,t)=>((e,t,n)=>{const i=wu(e,t).concat([n]);return ge(e,t,i.join(" ")),!0})(e,"class",t),Eu=(e,t)=>{xu(e)?e.dom.classList.add(t):Cu(e,t)},Mu=(e,t)=>xu(e)&&e.dom.classList.contains(t),Su=(e,t,n)=>{const i=t=>{Ae(t,e.selected),Ae(t,e.firstSelected),Ae(t,e.lastSelected)},r=t=>{ge(t,e.selected,"1")},o=e=>{s(e),n()},s=t=>{const n=ft(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(n,i)};return{clearBeforeUpdate:s,clear:o,selectRange:(n,i,s,a)=>{o(n),L(i,r),ge(s,e.firstSelected,"1"),ge(a,e.lastSelected,"1"),t(i,s,a)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Tu=()=>({tag:"none"}),ku=e=>({tag:"multiple",elements:e}),Lu=e=>({tag:"single",element:e}),Du=(e,t,n)=>{const i=oi.fromTable(e);return js(i,t).map(e=>{const t=Bs(i,n,!1),{rows:r}=Zn(t),o=((e,t)=>{const n=e.slice(0,t[t.length-1].row+1),i=Ns(n);return U(i,e=>{const n=e.cells.slice(0,t[t.length-1].column+1);return k(n,e=>e.element)})})(r,e),s=((e,t)=>{const n=e.slice(t[0].row+t[0].rowspan-1,e.length),i=Ns(n);return U(i,e=>{const n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return k(n,e=>e.element)})})(r,e);return{upOrLeftCells:o,downOrRightCells:s}})},Iu=e=>{const t=xe.fromDom((e=>{if(ot()&&d(e.target)){const t=xe.fromDom(e.target);if(de(t)&&ct(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return j(t)}}return w.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),i=()=>e.preventDefault(),r=(o=i,s=n,(...e)=>o(s.apply(null,e)));var o,s;return((e,t,n,i,r,o,s)=>({target:e,x:t,y:n,stop:i,prevent:r,kill:o,raw:s}))(t,e.clientX,e.clientY,n,i,r,e)},Ru=(e,t,n,i,r)=>{const o=((e,t)=>n=>{e(n)&&t(Iu(n))})(n,i);return e.dom.addEventListener(t,o,r),{unbind:v(Ou,e,t,o,r)}},Ou=(e,t,n,i)=>{e.dom.removeEventListener(t,n,i)},Pu=_,Bu=(e,t,n)=>((e,t,n,i)=>Ru(e,t,n,i,!1))(e,t,Pu,n),Nu=Iu,Uu=e=>!Mu(xe.fromDom(e.target),"ephox-snooker-resizer-bar"),Fu=(e,t)=>{const n=((e,t,n)=>({get:()=>Oo(e(),n).fold(()=>t().fold(Tu,Lu),ku)}))(()=>xe.fromDom(e.getBody()),()=>Zo(so(e),ro(e)),$o.selectedSelector),i=Su($o,(t,n,i)=>{Xt(n).each(r=>{const o=Fr(e),s=Or(p,xe.fromDom(e.getDoc()),o),a=Xo(e),l=Du(r,{selection:a},s);((e,t,n,i,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:n,finish:i,otherCells:r})})(e,t,n,i,l)})},()=>(e=>{e.dispatch("TableSelectionClear")})(e));e.on("init",n=>{const r=e.getWin(),o=io(e),s=ro(e),a=yu(r,o,s,i),l=_u(r,o,s,i),c=((e,t,n,i)=>{const r=gu(e);return(e,o)=>{i.clearBeforeUpdate(t),Lo(e,o,n).each(e=>{const n=e.boxes.getOr([]);i.selectRange(t,n,e.start,e.finish),r.selectContents(o),r.collapseSelection()})}})(r,o,s,i);e.on("TableSelectorChange",e=>c(e.start,e.finish));const d=(t,n)=>{(e=>!0===e.raw.shiftKey)(t)&&(n.kill&&t.kill(),n.selection.each(t=>{const n=Xd.relative(t.start,t.finish),i=zc(r,n);e.selection.setRng(i)}))},u=e=>0===e.button,h=(()=>{const e=Fd(xe.fromDom(o)),t=Fd(0);return{touchEnd:n=>{const i=xe.fromDom(n.target);if(me("td")(i)||me("th")(i)){const r=e.get(),o=t.get();Se(r,i)&&n.timeStamp-o<300&&(n.preventDefault(),c(i,i))}e.set(i),t.set(n.timeStamp)}}})();e.on("dragstart",e=>{a.clearstate()}),e.on("mousedown",e=>{u(e)&&Uu(e)&&a.mousedown(Nu(e))}),e.on("mouseover",e=>{var t;(void 0===(t=e).buttons||1&t.buttons)&&Uu(e)&&a.mouseover(Nu(e))}),e.on("mouseup",e=>{u(e)&&Uu(e)&&a.mouseup(Nu(e))}),e.on("touchend",h.touchEnd),e.on("keyup",t=>{const n=Nu(t);if(n.raw.shiftKey&&qd(n.raw.which)){const t=e.selection.getRng(),i=xe.fromDom(t.startContainer),r=xe.fromDom(t.endContainer);l.keyup(n,i,t.startOffset,r,t.endOffset).each(e=>{d(n,e)})}}),e.on("keydown",n=>{const i=Nu(n);t.hide();const r=e.selection.getRng(),o=xe.fromDom(r.startContainer),s=xe.fromDom(r.endContainer),a=di(Wd,Kd)(xe.fromDom(e.selection.getStart()));l.keydown(i,o,r.startOffset,s,r.endOffset,a).each(e=>{d(i,e)}),t.show()}),e.on("NodeChange",()=>{const t=e.selection,n=xe.fromDom(t.getStart()),r=xe.fromDom(t.getEnd());To(Xt,[n,r]).fold(()=>i.clear(o),p)})}),e.on("PreInit",()=>{e.serializer.addTempAttr($o.firstSelected),e.serializer.addTempAttr($o.lastSelected)});return{getSelectedCells:()=>((e,t,n,i)=>{switch(e.tag){case"none":return t();case"single":return i(e.element);case"multiple":return n(e.elements)}})(n.get(),m([]),e=>k(e,e=>e.dom),e=>[e.dom]),clearSelectedCells:e=>i.clear(xe.fromDom(e))}},zu=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=I(t,t=>t!==e)},trigger:(...n)=>{const i={};L(e,(e,t)=>{i[e]=n[t]}),L(t,e=>{e(i)})}}},Hu=e=>({registry:q(e,e=>({bind:e.bind,unbind:e.unbind})),trigger:q(e,e=>e.trigger)}),ju=e=>e.slice(0).sort(),Vu=(e,t,n)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((e,t)=>{if(!s(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");L(t,t=>{if(!r(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})})("required",t),(e=>{const t=ju(e);P(t,(e,n)=>n<t.length-1&&e===t[n+1]).each(e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})})(t),i=>{const r=G(i);F(t,e=>M(r,e))||((e,t)=>{throw new Error("All required keys ("+ju(e).join(", ")+") were not specified. Specified keys were: "+ju(t).join(", ")+".")})(t,r),e(t,r);const o=I(t,e=>!n.validate(i[e],e));return o.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+ju(e).join(", ")+") were not.")})(o,n.label),i}},Yu=(e,t)=>{const n=I(t,t=>!M(e,t));n.length>0&&(e=>{throw new Error("Unsupported keys for object: "+ju(e).join(", "))})(n)},Gu=e=>((e,t)=>Vu(e,t,{validate:u,label:"function"}))(Yu,e),Qu=Gu(["compare","extract","mutate","sink"]),$u=Gu(["element","start","stop","destroy"]),qu=Gu(["forceDrop","drop","move","delayDrop"]),Wu=()=>{let e=w.none();const t=Hu({move:zu(["info"])});return{onEvent:(n,i)=>{i.extract(n).each(n=>{const r=((t,n)=>{const i=e.map(e=>t.compare(e,n));return e=w.some(n),i})(i,n);r.each(e=>{t.trigger.move(e)})})},reset:()=>{e=w.none()},events:t.registry}},Ku=()=>{const e=(()=>{const e=Hu({move:zu(["info"])});return{onEvent:p,reset:p,events:e.registry}})(),t=Wu();let n=e;return{on:()=>{n.reset(),n=t},off:()=>{n.reset(),n=e},isOn:()=>n===t,onEvent:(e,t)=>{n.onEvent(e,t)},events:t.events}},Zu=(e,t,n)=>{let i=!1;const r=Hu({start:zu([]),stop:zu([])}),o=Ku(),s=()=>{d.stop(),o.isOn()&&(o.off(),r.trigger.stop())},l=((e,t)=>{let n=null;const i=()=>{a(n)||(clearTimeout(n),n=null)};return{cancel:i,throttle:(...r)=>{i(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}})(s,200);o.events.move.bind(n=>{t.mutate(e,n.info)});const c=e=>(...t)=>{i&&e.apply(null,t)},d=t.sink(qu({forceDrop:s,drop:c(s),move:c(e=>{l.cancel(),o.onEvent(e,t)}),delayDrop:c(l.throttle)}),n);return{element:d.element,go:e=>{d.start(e),o.on(),r.trigger.start()},on:()=>{i=!0},off:()=>{i=!1},isActive:()=>i,destroy:()=>{d.destroy()},events:r.registry}},Xu=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},Ju=Xu("ephox-dragster").resolve;var eh=Qu({compare:(e,t)=>vi(t.left-e.left,t.top-e.top),extract:e=>w.some(vi(e.x,e.y)),sink:(e,t)=>{const n=(e=>{const t={layerClass:Ju("blocker"),...e},n=xe.fromTag("div");return ge(n,"role","presentation"),Pt(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Eu(n,Ju("blocker")),Eu(n,t.layerClass),{element:m(n),destroy:()=>{$e(n)}}})(t),i=Bu(n.element(),"mousedown",e.forceDrop),r=Bu(n.element(),"mouseup",e.drop),o=Bu(n.element(),"mousemove",e.move),s=Bu(n.element(),"mouseout",e.delayDrop);return $u({element:n.element,start:e=>{je(e,n.element())},stop:()=>{$e(n.element())},destroy:()=>{n.destroy(),r.unbind(),o.unbind(),s.unbind(),i.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const th=Xu("ephox-snooker").resolve,nh=()=>{const e=Hu({drag:zu(["xDelta","yDelta","target"])});let t=w.none();const n=(()=>{const e=Hu({drag:zu(["xDelta","yDelta"])});return{mutate:(t,n)=>{e.trigger.drag(t,n)},events:e.registry}})();n.events.drag.bind(n=>{t.each(t=>{e.trigger.drag(n.xDelta,n.yDelta,t)})});return{assign:e=>{t=w.some(e)},get:()=>t,mutate:n.mutate,events:e.registry}},ih=th("resizer-bar"),rh=th("resizer-rows"),oh=th("resizer-cols"),sh=e=>{const t=ft(e.parent(),"."+ih);L(t,$e)},ah=(e,t,n)=>{const i=e.origin();L(t,t=>{t.each(t=>{const r=n(i,t);Eu(r,ih),je(e.parent(),r)})})},lh=(e,t,n,i)=>{ah(e,t,(e,t)=>{const r=((e,t,n,i,r)=>{const o=xe.fromTag("div");return Pt(o,{position:"absolute",left:t-i/2+"px",top:n+"px",height:r+"px",width:i+"px"}),ve(o,{"data-column":e,role:"presentation"}),o})(t.col,t.x-e.left,n.top-e.top,7,i);return Eu(r,oh),r})},ch=(e,t,n,i)=>{ah(e,t,(e,t)=>{const r=((e,t,n,i,r)=>{const o=xe.fromTag("div");return Pt(o,{position:"absolute",left:t+"px",top:n-r/2+"px",height:r+"px",width:i+"px"}),ve(o,{"data-row":e,role:"presentation"}),o})(t.row,n.left-e.left,t.y-e.top,i,7);return Eu(r,rh),r})},dh=(e,t,n,i,r)=>{const o=bi(n),s=t.isResizable,a=i.length>0?Di.positions(i,n):[],l=a.length>0?((e,t)=>U(e.all,(e,n)=>t(e.element)?[n]:[]))(e,s):[],c=I(a,(e,t)=>S(l,e=>t===e));ch(t,c,o,Hn(n));const d=r.length>0?Ri.positions(r,n):[],u=d.length>0?((e,t)=>{const n=[];return T(e.grid.columns,i=>{const r=oi.getColumnAt(e,i).map(e=>e.element);r.forall(t)&&n.push(i)}),I(n,n=>{const i=oi.filterItems(e,e=>e.column===n);return F(i,e=>t(e.element))})})(e,s):[],h=I(d,(e,t)=>S(u,e=>t===e));lh(t,h,o,mi(n))},uh=(e,t)=>{if(sh(e),e.isResizable(t)){const n=oi.fromTable(t),i=li(n),r=si(n);dh(n,e,t,i,r)}},hh=(e,t)=>{const n=ft(e.parent(),"."+ih);L(n,t)},ph=e=>{hh(e,e=>{Ot(e,"display","none")})},mh=e=>{hh(e,e=>{Ot(e,"display","block")})},fh=th("resizer-bar-dragging"),gh=e=>{const t=nh(),n=((e,t={})=>{var n;const i=null!==(n=t.mode)&&void 0!==n?n:eh;return Zu(e,i,t)})(t,{});let i=w.none();const r=(e,t)=>w.from(ye(e,t));t.events.drag.bind(e=>{r(e.target,"data-row").each(t=>{const n=Yt(e.target,"top");Ot(e.target,"top",n+e.yDelta+"px")}),r(e.target,"data-column").each(t=>{const n=Yt(e.target,"left");Ot(e.target,"left",n+e.xDelta+"px")})});const o=(e,t)=>Yt(e,t)-zt(e,"data-initial-"+t,0);n.events.stop.bind(()=>{t.get().each(t=>{i.each(n=>{r(t,"data-row").each(e=>{const i=o(t,"top");Ae(t,"data-initial-top"),d.trigger.adjustHeight(n,i,parseInt(e,10))}),r(t,"data-column").each(e=>{const i=o(t,"left");Ae(t,"data-initial-left"),d.trigger.adjustWidth(n,i,parseInt(e,10))}),uh(e,n)})})});const s=(i,r)=>{d.trigger.startAdjust(),t.assign(i),ge(i,"data-initial-"+r,Yt(i,r)),Eu(i,fh),Ot(i,"opacity","0.2"),n.go(e.parent())},a=Bu(e.parent(),"mousedown",e=>{var t;t=e.target,Mu(t,rh)&&s(e.target,"top"),(e=>Mu(e,oh))(e.target)&&s(e.target,"left")}),l=t=>Se(t,e.view()),c=Bu(e.view(),"mouseover",t=>{var r;(r=t.target,wt(r,"table",l).filter(to)).fold(()=>{dt(t.target)&&sh(e)},t=>{n.isActive()&&(i=w.some(t),uh(e,t))})}),d=Hu({adjustHeight:zu(["table","delta","row"]),adjustWidth:zu(["table","delta","column"]),startAdjust:zu([])});return{destroy:()=>{a.unbind(),c.unbind(),n.destroy(),sh(e)},refresh:t=>{uh(e,t)},on:n.on,off:n.off,hideBars:v(ph,e),showBars:v(mh,e),events:d.registry}},vh=(e,t,n)=>{const i=Di,r=Ri,o=gh(e),s=Hu({beforeResize:zu(["table","type"]),afterResize:zu(["table","type"]),startDrag:zu([])});return o.events.adjustHeight.bind(e=>{const t=e.table;s.trigger.beforeResize(t,"row");const n=i.delta(e.delta,t);Ea(t,n,e.row,i),s.trigger.afterResize(t,"row")}),o.events.startAdjust.bind(e=>{s.trigger.startDrag()}),o.events.adjustWidth.bind(e=>{const i=e.table;s.trigger.beforeResize(i,"col");const o=r.delta(e.delta,i),a=n(i);Ca(i,o,e.column,t,a),s.trigger.afterResize(i,"col")}),{on:o.on,off:o.off,refreshBars:o.refresh,hideBars:o.hideBars,showBars:o.showBars,destroy:o.destroy,events:s.registry}},yh=(e,t)=>{const n=he(e)?(e=>xe.fromDom(De(e).dom.documentElement))(e):e;return{parent:m(n),view:m(e),origin:m(vi(0,0)),isResizable:t}},bh=(e,t,n)=>({parent:m(t),view:m(e),origin:m(vi(0,0)),isResizable:n}),Ah=()=>{const e=xe.fromTag("div");return Pt(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),je(ut(xe.fromDom(document)),e),e},_h=e=>d(e)&&"TABLE"===e.nodeName,wh="bar-",xh=e=>"false"!==ye(e,"data-mce-resize"),Ch=e=>{const t=zd(),n=zd(),i=zd();let r,o;const s=t=>Bl(e,t),a=()=>jr(e)?ps():hs(),l=(t,n,i)=>{const l=kt(n,"e");if(""===o&&ic(t),i!==r&&""!==o){Ot(t,"width",o);const n=a(),c=s(t),d=jr(e)||l?(e=>ms(e).columns)(t)-1:0;Ca(t,i-r,d,n,c)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(o)){const e=parseFloat(o.replace("%",""));Ot(t,"width",i*e/r+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(o)&&(e=>{const t=oi.fromTable(e);oi.hasColumns(t)||L(Kt(e),e=>{const t=Bt(e,"width");Ot(e,"width",t),Ae(e,"width")})})(t)},c=()=>{n.on(e=>{e.destroy()}),i.on(t=>{((e,t)=>{e.inline&&$e(t.parent())})(e,t)})};e.on("init",()=>{const r=((e,t)=>e.inline?bh(xe.fromDom(e.getBody()),Ah(),t):yh(xe.fromDom(e.getDoc()),t))(e,xh);if(i.set(r),(e=>{const t=e.options.get("object_resizing");return M(t.split(","),"table")})(e)&&qr(e)){const i=a(),o=vh(r,i,s);o.on(),o.events.startDrag.bind(n=>{t.set(e.selection.getRng())}),o.events.beforeResize.bind(t=>{const n=t.table.dom;((e,t,n,i,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:i,origin:r})})(e,n,ao(n),lo(n),wh+t.type)}),o.events.afterResize.bind(n=>{const i=n.table,r=i.dom;oo(i),t.on(t=>{e.selection.setRng(t),e.focus()}),((e,t,n,i,r)=>{e.dispatch("ObjectResized",{target:t,width:n,height:i,origin:r})})(e,r,ao(r),lo(r),wh+n.type),e.undoManager.add()}),n.set(o)}}),e.on("ObjectResizeStart",t=>{const n=t.target;if(_h(n)){const i=xe.fromDom(n);L(e.dom.select(".mce-clonedresizable"),t=>{e.dom.addClass(t,"mce-"+Hr(e)+"-columns")}),!ec(i)&&Qr(e)?rc(i):!Jl(i)&&Gr(e)&&ic(i),tc(i)&&Tt(t.origin,wh)&&ic(i),r=t.width,o=$r(e)?"":((e,t)=>{const n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return w.from(n).filter(Dt)})(e,n).getOr("")}}),e.on("ObjectResized",t=>{const n=t.target;if(_h(n)){const i=xe.fromDom(n),r=t.origin;Tt(r,"corner-")&&l(i,r,t.width),oo(i),Il(e,i.dom,Rl)}}),e.on("SwitchMode",()=>{n.on(t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()})}),e.on("dragstart dragend",e=>{n.on(t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())})}),e.on("remove",()=>{c()});return{refresh:e=>{n.on(t=>t.refreshBars(xe.fromDom(e)))},hide:()=>{n.on(e=>e.hideBars())},show:()=>{n.on(e=>e.showBars())}}},Eh=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=M(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{const t=M(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);const t=Ch(e),n=Fu(e,t),i=Nl(e,t,n);return Sc(e,i),((e,t)=>{const n=ro(e),i=t=>Zo(so(e)).bind(i=>Xt(i,n).map(n=>{const r=qo(Xo(e),n,i);return t(n,r)})).getOr("");$({mceTableRowType:()=>i(t.getTableRowType),mceTableCellType:()=>i(t.getTableCellType),mceTableColType:()=>i(t.getTableColType)},(t,n)=>e.addQueryValueHandler(n,t))})(e,i),Jo(e,i),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},Mh=e=>({table:Eh(e)});e.add("dom",Mh)}()},9493:e=>{var t=String,n=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t,blackBright:t,redBright:t,greenBright:t,yellowBright:t,blueBright:t,magentaBright:t,cyanBright:t,whiteBright:t,bgBlackBright:t,bgRedBright:t,bgGreenBright:t,bgYellowBright:t,bgBlueBright:t,bgMagentaBright:t,bgCyanBright:t,bgWhiteBright:t}};e.exports=n(),e.exports.createColors=n},9498:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(2867);var i=n(6763),r=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let o=class extends i.Ay{constructor(){super(),this.name="",this.index=0,this.selectedIndex=-1,this.tabbingIndex=0,this.selected=!1,this.selectable=!1,this.disabled=!1,this.icon="",this.role="button",this.caret=!1,this.inline=!1,this.transparent=!1,this.addEventListener("click",e=>this.onClick(e)),this.addEventListener("keydown",e=>this.onKeyDown(e))}firstConnected(){this.tabIndex=this.tabbingIndex,this.setAttribute("role",this.role),this.classList.add("ff-button")}shouldUpdate(e){return(e.has("selectedIndex")||e.has("index"))&&this.selectedIndex>=0&&(this.selected=this.index===this.selectedIndex),e.has("disabled")&&this.setClass("ff-disabled",this.disabled),!0}update(e){this.classList.remove("ff-inline","ff-transparent","ff-control"),this.inline?this.classList.add("ff-inline"):this.transparent?this.classList.add("ff-transparent"):this.classList.add("ff-control"),super.update(e)}render(){return this.caret?i.qy`${this.renderIcon()}<div class="ff-caret-container">${this.renderText()}${this.renderCaret()}</div>`:i.qy`${this.renderIcon()}${this.renderText()}`}renderIcon(){return this.icon?i.qy`<ff-icon class="ff-off" name=${this.icon}></ff-icon>`:null}renderText(){return this.text?i.qy`<div class="ff-text ff-off">${this.text}</div>`:null}renderCaret(){return this.caret?i.qy`<div class="ff-caret-down ff-off"></div>`:null}onClick(e){this.selectable&&(this.selected=!this.selected)}onKeyDown(e){(document.activeElement.shadowRoot?document.activeElement.shadowRoot.activeElement:document.activeElement)!==this||"Space"!==e.code&&"Enter"!==e.code||(e.preventDefault(),this.dispatchEvent(new MouseEvent("click",{bubbles:!0})))}};r([(0,i.MZ)({type:String})],o.prototype,"name",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"index",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"selectedIndex",void 0),r([(0,i.MZ)({type:Number})],o.prototype,"tabbingIndex",void 0),r([(0,i.MZ)({type:Boolean,reflect:!0})],o.prototype,"selected",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"selectable",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"disabled",void 0),r([(0,i.MZ)()],o.prototype,"text",void 0),r([(0,i.MZ)()],o.prototype,"icon",void 0),r([(0,i.MZ)()],o.prototype,"role",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"caret",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"inline",void 0),r([(0,i.MZ)({type:Boolean})],o.prototype,"transparent",void 0),o=r([(0,i.EM)("ff-button")],o);const s=o},9519:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var i=n(3675);const r={mm:{mm:1,cm:.1,m:.001,km:1,in:.0393701,ft:.00328084,yd:.00109361,mi:1},cm:{mm:10,cm:1,m:.01,km:1,in:.393701,ft:.0328084,yd:.0109361,mi:1},m:{mm:1e3,cm:100,m:1,km:1,in:39.3701,ft:3.28084,yd:1.09361,mi:1},km:{mm:1e6,cm:1e5,m:1e3,km:1,in:39370.1,ft:3280.84,yd:1093.61,mi:1},in:{mm:25.4,cm:2.54,m:.0254,km:1,in:1,ft:.0833333,yd:.0277778,mi:1},ft:{mm:304.8,cm:30.48,m:.3048,km:1,in:12,ft:1,yd:.333334,mi:1},yd:{mm:914.4,cm:91.44,m:.9144,km:1,in:36,ft:3,yd:1,mi:1},mi:{mm:1609e3,cm:160900,m:1609,km:1,in:63346456.693,ft:5278871.391,yd:1759623.797,mi:1}};function o(e,t){const n=i.uj[e],o=i.uj[t];return r[n][o]||1}},9521:(e,t,n)=>{"use strict";n.d(t,{sf:()=>g,Ay:()=>f});var i,r=n(4640),o=n(8948),s=(n(7832),n(3818)),a=(n(9498),n(9264),n(3051)),l=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let c=i=class extends s.Ay{static show(e,t,n){const r=new i(e,t,n);return e.appendChild(r),new Promise((e,t)=>{r.on("close",()=>e())})}constructor(e,t,n){super(),this.content=null,this.sprite=null,this.resizeObserver=null,this.close=this.close.bind(this),this.onKeyDownMain=this.onKeyDownMain.bind(this),this.content=t,this.title="",this.sprite=n,this.position="center",this.portal=e,this.modal=!0}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-annotation-overlay","sv-annotation")}connected(){super.connected(),this.sprite.addEventListener("link",this.close),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>this.onResize())),this.resizeObserver.observe(this)}disconnected(){this.resizeObserver.disconnect(),this.sprite.removeEventListener("link",this.close),super.disconnected()}render(){return s.qy`
        <div class="sv-help-region" id="anno_container" role="region" @wheel=${e=>this.discardEvents(e)} @pointerdown=${e=>this.discardEvents(e)} aria-label="Annotation pop-up" aria-live="polite" aria-atomic="true" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-row">
                <div id="ovr_title" class="ff-flex-spacer ff-title"><b>${this.title}</b></div>
                <ff-button icon="close" transparent class="ff-close-button" title="Close" @click=${this.close}></ff-button>
            </div>
        </div>
        `}firstUpdated(e){super.firstUpdated(e),this.getElementsByClassName("ff-close-button")[0].focus();this.querySelector("#anno_container").append(this.content),setTimeout(()=>{this.title=this.sprite.annotation.title,this.requestUpdate()},100)}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(e.stopPropagation(),(0,a.i)((0,a.R)(this),e))}discardEvents(e){e.stopPropagation()}};c=i=l([(0,s.EM)("sv-annotation-overlay")],c);const d=c,u=new r.Pq0(0,1,0),h=new r.Pq0,p=new r.Pq0,m=new r.Pq0;class f extends o.Ay{get typeName(){return this.constructor.typeName}constructor(e,t){super(),this.isAdaptive=!0,this.isAnimating=!1,this.assetManager=null,this.audioManager=null,this.annotation=e,this.matrixAutoUpdate=!1}update(){super.update();const e=this.annotation.data;this.position.fromArray(e.position),h.fromArray(e.direction).normalize(),this.quaternion.setFromUnitVectors(u,h),this.updateMatrix()}emitClickEvent(){const e={type:"click",annotation:this.annotation,sprite:this};this.dispatchEvent(e)}emitLinkEvent(e){const t={type:"link",annotation:this.annotation,sprite:this,link:e};this.dispatchEvent(t)}isBehindCamera(e,t){let n=null;n=t instanceof r.nZQ&&t.cameras.length>0?t.cameras[0]:t;const i=n.matrixWorld.elements;return e.updateMatrixWorld(),p.setFromMatrixPosition(e.matrixWorld),m.setFromMatrixPosition(n.matrixWorld),h.set(-i[8],-i[9],-i[10]).normalize(),m.addScaledVector(h,n.near),m.sub(p),m.angleTo(h)<=Math.PI/2}}f.typeName="Annotation";class g extends o.AZ{get truncated(){return this.isTruncated}set truncated(e){this.isTruncated=e}get overlayed(){return this.isOverlayed}set overlayed(e){this.isOverlayed=e}constructor(e){super(),this.isTruncated=!1,this.isOverlayed=!1,this.sprite=e,this.discardEvent=this.discardEvent.bind(this),this.addEventListener("pointercancel",this.discardEvent),this.addEventListener("click",this.discardEvent),this.setAttribute("aria-label","annotation"),this.setAttribute("aria-live","polite"),this.setAttribute("role","button")}firstConnected(){super.firstConnected(),this.classList.add("sv-annotation")}discardEvent(e){e.stopPropagation()}showOverlay(e){this.requestUpdate().then(()=>{d.show(this.parentElement,e,this.sprite).then(()=>{this.overlayed=!1,this.append(e),this.querySelector('[tabindex="0"]').focus(),this.requestUpdate()})})}}},9540:function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(e){return function(i,r,o,s){var a=t(i),l=n[e][t(i)];return 2===a&&(l=l[r?0:1]),l.replace(/%d/i,i)}},r=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-dz",{months:r,monthsShort:r,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:0,doy:4}})}(n(3681))},9551:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5265),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return i.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`${n}.length ${o} ${r}`)}};t.default=r},9573:function(e,t,n){!function(e){"use strict";var t=["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],n=["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],i=["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],r=["Did","Dil","Dim","Dic","Dia","Dih","Dis"],o=["Dò","Lu","Mà","Ci","Ar","Ha","Sa"];e.defineLocale("gd",{months:t,monthsShort:n,monthsParseExact:!0,weekdays:i,weekdaysShort:r,weekdaysMin:o,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(3681))},9577:function(e,t,n){!function(e){"use strict";function t(e,t,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?r[n][0]:r[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},9585:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=s(n(7784));t.htmlDecodeTree=a.default;var l=s(n(1192));t.xmlDecodeTree=l.default;var c=o(n(9203));t.decodeCodePoint=c.default;var d,u=n(9203);Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return u.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return u.fromCodePoint}}),function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(d||(d={}));var h,p,m;function f(e){return e>=d.ZERO&&e<=d.NINE}function g(e){return e>=d.UPPER_A&&e<=d.UPPER_F||e>=d.LOWER_A&&e<=d.LOWER_F}function v(e){return e===d.EQUALS||function(e){return e>=d.UPPER_A&&e<=d.UPPER_Z||e>=d.LOWER_A&&e<=d.LOWER_Z||f(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(h=t.BinTrieFlags||(t.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(p||(p={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(m=t.DecodingMode||(t.DecodingMode={}));var y=function(){function e(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===d.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===d.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,n,i){if(t!==n){var r=n-t;this.result=this.result*Math.pow(i,r)+parseInt(e.substr(t,r),i),this.consumed+=r}},e.prototype.stateNumericHex=function(e,t){for(var n=t;t<e.length;){var i=e.charCodeAt(t);if(!f(i)&&!g(i))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(i,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var n=t;t<e.length;){var i=e.charCodeAt(t);if(!f(i))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2);t+=1}return this.addToNumericResult(e,n,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===d.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,c.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==d.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var n=this.decodeTree,i=n[this.treeIndex],r=(i&h.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=A(n,i,this.treeIndex+Math.max(1,r),o),this.treeIndex<0)return 0===this.result||this.decodeMode===m.Attribute&&(0===r||v(o))?0:this.emitNotTerminatedNamedEntity();if(0!==(r=((i=n[this.treeIndex])&h.VALUE_LENGTH)>>14)){if(o===d.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,n=(this.decodeTree[t]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,n){var i=this.decodeTree;return this.emitCodePoint(1===t?i[e]&~h.VALUE_LENGTH:i[e+1],n),3===t&&this.emitCodePoint(i[e+2],n),n},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===m.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function b(e){var t="",n=new y(e,function(e){return t+=(0,c.fromCodePoint)(e)});return function(e,i){for(var r=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(r,o),n.startEntity(i);var s=n.write(e,o+1);if(s<0){r=o+n.end();break}r=o+s,o=0===s?r+1:r}var a=t+e.slice(r);return t="",a}}function A(e,t,n,i){var r=(t&h.BRANCH_LENGTH)>>7,o=t&h.JUMP_TABLE;if(0===r)return 0!==o&&i===o?n:-1;if(o){var s=i-o;return s<0||s>=r?-1:e[n+s]-1}for(var a=n,l=a+r-1;a<=l;){var c=a+l>>>1,d=e[c];if(d<i)a=c+1;else{if(!(d>i))return e[c+r];l=c-1}}return-1}t.EntityDecoder=y,t.determineBranch=A;var _=b(a.default),w=b(l.default);t.decodeHTML=function(e,t){return void 0===t&&(t=m.Legacy),_(e,t)},t.decodeHTMLAttribute=function(e){return _(e,m.Attribute)},t.decodeHTMLStrict=function(e){return _(e,m.Strict)},t.decodeXML=function(e){return w(e,m.Strict)}},9594:function(e,t,n){!function(e){"use strict";var t={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,n){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[១២៣៤៥៦៧៨៩០]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}(n(3681))},9610:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var i=n(4640),r=n(3423),o=n(5676),s=n(3074),a=n(8337);const l=new i.Pq0,c=new i.Pq0,d=new i.O9p,u=new i.PTz;class h extends s.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(h.camIns),this.object3D=new o.Ay}get camera(){return this.object3D}update(){const{autoActivate:e,activate:t}=this.ins;if(t.changed||e.changed&&e.value){const e=this.scene;e&&(e.activeCameraComponent=this)}const n=this.camera,{position:i,rotation:r,projection:o,fov:s,size:a,zoom:l,near:c,far:d}=this.ins;if(i.changed||r.changed){n.position.fromArray(i.value);const e=[r.value[0],r.value[1],r.value[2]];n.rotation.fromArray(e),n.updateMatrix()}return o.changed&&n.setProjection(o.getValidatedValue()),n.fov=s.value,n.size=a.value,n.zoom=l.value,n.near=c.value,n.far=d.value,n.updateProjectionMatrix(),!0}dispose(){const e=this.scene;e&&e.activeCameraComponent===this&&(e.activeCameraComponent=null),super.dispose()}setPropertiesFromMatrix(e){const t=!e;e=e||this.object3D.matrix;const{position:n,rotation:i,order:r}=this.ins;e.decompose(l,u,c),l.toArray(n.value);const o=r.getOptionText();d.setFromQuaternion(u,o),l.setFromEuler(d),l.multiplyScalar(a.A.RAD2DEG).toArray(i.value),n.set(t),i.set(t)}}h.typeName="CCamera",h.camIns={autoActivate:r.gK.Boolean("Camera.AutoActivate",!0),activate:r.gK.Event("Camera.Activate"),position:r.gK.Vector3("Transform.Position"),rotation:r.gK.Vector3("Transform.Rotation"),order:r.gK.Enum("Transform.Order",s.I8,s.I8.ZYX),projection:r.gK.Enum("Projection.Type",o.$R,o.$R.Perspective),fov:r.gK.Number("Projection.FovY",52),size:r.gK.Number("Projection.Size",20),zoom:r.gK.Number("Projection.Zoom",1),near:r.gK.Number("Frustum.ZNear",.01),far:r.gK.Number("Frustum.ZFar",1e4)};class p extends h{get settingProperties(){return[this.ins.projection,this.ins.fov,this.ins.size,this.ins.near,this.ins.far,this.addIns.autoNearFar]}constructor(e,t){super(e,t),this.addIns=this.addInputs(p.cameraAddIns),this.object3D.layers.enable(1)}fromDocument(e,t){if(!isFinite(t.camera))throw new Error("camera property missing in node");const n=e.cameras[t.camera];return null!=n.autoNearFar&&this.addIns.autoNearFar.setValue(n.autoNearFar),"perspective"===n.type?this.ins.copyValues({projection:o.$R.Perspective,fov:n.perspective.yfov,near:n.perspective.znear,far:n.perspective.zfar}):this.ins.copyValues({projection:o.$R.Orthographic,size:n.orthographic.ymag,near:n.orthographic.znear,far:n.orthographic.zfar}),t.camera}toDocument(e,t){const n=this.ins,i={};n.projection.getValidatedValue()===o.$R.Perspective?(i.type="perspective",i.perspective={yfov:n.fov.value,znear:n.near.value,zfar:n.far.value}):(i.type="orthographic",i.orthographic={ymag:n.size.value,znear:n.near.value,zfar:n.far.value}),i.autoNearFar=this.addIns.autoNearFar.value,e.cameras=e.cameras||[];const r=e.cameras.length;return e.cameras.push(i),r}}p.typeName="CVCamera",p.text="Camera",p.icon="video",p.cameraAddIns={autoNearFar:s.gK.Boolean("Frustum.AutoNearFar",!0)}},9611:function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(3681))},9616:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var i=n(4640),r=n(6773),o=n(3423),s=n(3074),a=n(6351),l=n(2997),c=n(7297),d=n(9519),u=n(1572),h=n(9261);const p=[],m=[u.a9.Thumb,u.a9.AR,u.a9.Low,u.a9.Medium,u.a9.High,u.a9.Highest];class f{constructor(){this.derivatives={}}select(e,t){const n=u.UH[e],i=u.a9[t],r=m.indexOf(t);if(r<0)return console.warn(`derivative quality not supported: '${i}'`),null;const o=this.get(e,t);if(o)return o;for(let t=r+1;t<m.length;++t){const n=this.get(e,m[t]);if(n)return n}for(let t=r-1;t>=0;--t){const n=this.get(e,m[t]);if(n)return n}return console.warn(`no suitable derivative found for quality '${i}' and usage '${n}'`),null}getByUsage(e){const t=u.UH[e];return(this.derivatives[t]||p).sort((e,t)=>e.data.quality<t.data.quality?-1:e.data.quality>t.data.quality?1:0)}getByQuality(e){return this.getArray().filter(t=>t.data.quality===e)}getArray(){return Object.keys(this.derivatives).reduce((e,t)=>e.concat(this.derivatives[t]),[])}get(e,t){const n=u.UH[e],i=this.derivatives[n];if(i)for(let e=0,n=i.length;e<n;++e)if(i[e].data.quality===t)return i[e];return null}getOrCreate(e,t){const n=this.getOrCreateBin(e);for(let e=0,i=n.length;e<i;++e)if(n[e].data.quality===t)return n[e];const i=new u.Ay;return i.set("usage",e),i.set("quality",t),n.push(i),i}remove(e,t){const n=this.get(e,t);if(n){const t=this.getOrCreateBin(e),i=t.indexOf(n);i>-1&&t.splice(i,1)}}createModelAsset(e,t){t=null!=(t="string"==typeof t?u.a9[t]:t)?t:u.a9.Medium;const n=this.getOrCreate(u.UH.Web3D,t),i=new h.Ay;return i.setModel(e),n.addAsset(i),n}createMeshAsset(e,t,n,i,r){r=null!=(r="string"==typeof r?u.a9[r]:r)?r:u.a9.Medium;const o=this.getOrCreate(u.UH.Web3D,r),s=new h.Ay;if(s.setGeometry(e),o.addAsset(s),t){const e=new h.Ay;e.setTexture(t,h.oo.Color),o.addAsset(e)}if(n){const e=new h.Ay;e.setTexture(n,h.oo.Occlusion),o.addAsset(e)}if(i){const e=new h.Ay;e.setTexture(i,h.oo.Normal),o.addAsset(e)}return o}clear(){for(let e in this.derivatives)this.derivatives[e].forEach(e=>e.dispose());this.derivatives={}}toJSON(){const e=[];for(let t in this.derivatives)this.derivatives[t].forEach(t=>e.push(t.toJSON()));return e}fromJSON(e){this.clear(),e.forEach(e=>{this.getOrCreateBin(u.UH[e.usage]).push(new u.Ay(e))})}toString(e=!1){const t=this.derivatives,n=Object.keys(t);return e?`Derivatives (${n.length}) \n `+n.map(e=>t[e].map(e=>e.toString(!0)).join("\n ")).join("\n "):`Derivatives (${n.length}) `+n.map(e=>`${e} (${t[e].length})`).join(", ")}getOrCreateBin(e){const t=u.UH[e];return this.derivatives[t]||(this.derivatives[t]=[])}}var g=n(3350),v=n(161),y=n(3600),b=n(3889),A=n(1721);const _=new i.Pq0,w=new i.Pq0,x=new i.PTz,C=new i.PTz,E=new i.NRn,M=new i.kn4;class S extends s.Ay{get settingProperties(){return[this.ins.name,this.ins.visible,this.ins.quality,this.ins.localUnits,this.ins.tags,this.ins.renderOrder,this.ins.shadowSide,this.ins.shader,this.ins.variant,this.ins.overlayMap,this.ins.slicerEnabled,this.ins.override,this.ins.color,this.ins.opacity,this.ins.hiddenOpacity,this.ins.roughness,this.ins.metalness,this.ins.occlusion,this.ins.doubleSided]}constructor(e,t){super(e,t),this.ins=this.addInputs(S.ins),this.outs=this.addOutputs(S.outs),this._derivatives=new f,this._activeDerivative=null,this._loadingDerivative=null,this._visible=!0,this._boxFrame=null,this._localBoundingBox=new i.NRn,this._prevPosition=new i.Pq0(0,0,0),this._prevRotation=new i.Pq0(0,0,0),this._materialCache={},this._clayColor=new i.Q1f("#a67a6c").convertLinearToSRGB(),this._wireColor=new i.Q1f("#004966").convertLinearToSRGB(),this._wireEmissiveColor=new i.Q1f("#004966").convertLinearToSRGB(),this._overlays={},this._needsInit=!0,this.object3D=new i.YJl,this.object3D.name="Model"}get snapshotProperties(){return[this.ins.visible,this.ins.quality,this.ins.overlayMap,this.ins.override,this.ins.opacity,this.ins.variant,this.ins.roughness,this.ins.metalness,this.ins.color,this.ins.slicerEnabled]}get derivatives(){return this._derivatives}get activeDerivative(){return this._activeDerivative}get localBoundingBox(){return this._localBoundingBox}get assetManager(){return this.getMainComponent(v.A)}get assetReader(){return this.getMainComponent(y.A)}get renderer(){return this.getMainComponent(b.A)}getOriginalMaterial(e){return this._materialCache[e]}getOverlay(e){if(e in this._overlays)return this._overlays[e];{const t=this.ins.overlayMap;return t.schema.options.includes(e)||t.setOptions(t.schema.options.concat(e)),this._overlays[e]={texture:null,asset:null,fromFile:!1,isDirty:!1}}}getOverlays(){return Object.keys(this._overlays).filter(e=>this.activeDerivative.findAssets(c.iO.Image).some(t=>t.data.uri==e)).map(e=>this._overlays[e])}deleteOverlay(e){const t=this.ins.overlayMap,n=t.schema.options;n.splice(n.indexOf(e),1),t.setOptions(n),this._overlays[e].texture.dispose(),delete this._overlays[e]}create(){super.create();this.node.createComponent(g.A).ins.unitScale.linkFrom(this.outs.unitScale)}update(){const e=this.ins;if(e.name.changed&&(this.node.name=e.name.value),e.tags.changed||e.activeTags.changed||e.visible.changed){let t=e.visible.value;if(t){const n=e.tags.value.split(",").map(e=>e.trim()).filter(e=>e),i=e.activeTags.value.split(",").map(e=>e.trim()).filter(e=>e);t=!n.length,i.forEach(e=>{n.indexOf(e)>=0&&(t=!0)})}const n=this.ins.override.value;this._visible=t,t?(this.object3D.visible=!0,n&&this.updateMaterial()):e.visible.value&&n&&this.ins.hiddenOpacity.value>0?(this.object3D.visible=!0,this.updateMaterial()):this.object3D.visible=!1,this.outs.updated.set()}if(e.tags.changed&&this.emit({type:"tag-update"}),!this.activeDerivative&&e.autoLoad.changed&&e.autoLoad.value)this.autoLoad().then(()=>{if(!this.getGraphComponent(A.A).derivatives.ins.enabled.value){const e=this.derivatives.select(c.UH.Web3D,c.a9.High);this.ins.quality.setValue(e.data.quality)}});else if(e.quality.changed){const t=this.derivatives.select(c.UH.Web3D,e.quality.value);t&&this.loadDerivative(t).catch(e=>{console.warn("Model.update - failed to load derivative"),console.warn(e)})}return e.renderOrder.changed&&this.updateRenderOrder(this.object3D,e.renderOrder.value),(e.localUnits.changed||e.globalUnits.changed)&&this.updateUnitScale(),e.shader.changed&&this.updateShader(),e.overlayMap.changed&&this.updateOverlayMap(),e.variant.changed&&this.updateVariant(),e.shadowSide.changed&&this.updateShadowSide(),e.override.value&&e.shader.value===l.gw.Default&&(e.override.changed||e.color.changed||e.opacity.changed||e.doubleSided.changed||e.roughness.changed||e.metalness.changed||e.occlusion.changed)?this.updateMaterial():e.override.changed&&!e.override.value&&e.shader.value===l.gw.Default&&this.object3D.traverse(e=>{const t=e.material;if(t){const e=this._materialCache[t.uuid];e&&(t.aoMapIntensity=e.occlusion,t.color.fromArray(e.color),t.opacity=e.opacity,t.transparent=e.transparent,t.roughness=e.roughness,t.metalness=e.metalness,t.side=e.doubleSided?i.$EB:i.hB5,t.needsUpdate=!0)}}),e.center.changed&&this.center(),(e.position.changed||e.rotation.changed||e.scale.changed)&&this.updateMatrixFromProps(),e.dumpDerivatives.changed&&console.log(this.derivatives.toString(!0)),!0}dispose(){this.derivatives.clear(),this._activeDerivative=null;for(let e in this._overlays)this._overlays[e].texture&&this._overlays[e].texture.dispose();super.dispose()}center(){const e=this.object3D,t=this.ins.position;e.matrix.decompose(_,x,w),e.matrix.makeRotationFromQuaternion(x),E.makeEmpty(),a.g6(e,E,e.parent),E.getCenter(_),_.multiplyScalar(-1).toArray(t.value),t.set()}setFromMatrix(e){const t=this.ins;e.decompose(_,x,w),_.multiplyScalar(1/this.outs.unitScale.value).toArray(t.position.value),t.position.set(),a.Dl(x,S.rotationOrder,t.rotation.value),t.rotation.set(),t.scale.setValue(w.x/this.outs.unitScale.value)}fromDocument(e,t){const{ins:n,outs:r}=this;if(!isFinite(t.model))throw new Error("model property missing in node");const o=e.models[t.model];n.name.setValue(t.name);const s=c.uj[o.units||"cm"];n.localUnits.setValue(isFinite(s)?s:c.uj.cm),n.visible.setValue(void 0===o.visible||o.visible),n.tags.setValue(o.tags||""),n.renderOrder.setValue(void 0!==o.renderOrder?o.renderOrder:0);const l=c.Jb[o.shadowSide||"Back"];if(n.shadowSide.setValue(isFinite(l)?l:c.Jb.Back),n.position.reset(),n.rotation.reset(),o.translation&&(n.position.copyValue(o.translation),this._prevPosition.fromArray(o.translation),this._needsInit=!1),o.rotation&&(x.fromArray(o.rotation),a.Dl(x,S.rotationOrder,n.rotation.value),this._prevRotation.fromArray(n.rotation.value),n.rotation.set(),this._needsInit=!1),o.boundingBox){const e=this._localBoundingBox;e.min.fromArray(o.boundingBox.min),e.max.fromArray(o.boundingBox.max),this._boxFrame=new i.BND(e,"#009cde"),this.addObject3D(this._boxFrame),this._boxFrame.updateMatrixWorld(!0);const t=this.getGraphComponent(A.A,!0);t&&t.navigation.ins.autoZoom.value&&t.navigation.ins.zoomExtents.set(),r.updated.set(),this.updateUnitScale()}if(o.derivatives&&this.derivatives.fromJSON(o.derivatives),o.material){const e=o.material;n.copyValues({override:!0,color:e.color||n.color.schema.preset,opacity:void 0!==e.opacity?e.opacity:n.opacity.schema.preset,hiddenOpacity:void 0!==e.hiddenOpacity?e.hiddenOpacity:n.hiddenOpacity.schema.preset,roughness:void 0!==e.roughness?e.roughness:n.roughness.schema.preset,metalness:void 0!==e.metalness?e.metalness:n.metalness.schema.preset,occlusion:void 0!==e.occlusion?e.occlusion:n.occlusion.schema.preset,doubleSided:void 0!==e.doubleSided?e.doubleSided:n.doubleSided.schema.preset})}return o.overlayMap&&n.overlayMap.setValue(o.overlayMap),o.annotations&&this.getComponent(g.A).fromData(o.annotations),this.emit({type:"tag-update"}),this.ins.autoLoad.set(),this.assetManager.initialLoad=!0,t.model}toDocument(e,t){const n={units:c.uj[this.ins.localUnits.getValidatedValue()]},i=this.ins;i.visible.value||(n.visible=!1),i.tags.value&&(n.tags=i.tags.value),0!==i.renderOrder.value&&(n.renderOrder=i.renderOrder.value),i.shadowSide.value!=c.Jb.Back&&(n.shadowSide=c.Jb[this.ins.shadowSide.getValidatedValue()]);const r=i.position.value;0===r[0]&&0===r[1]&&0===r[2]||(n.translation=i.position.value);const o=i.rotation.value;0===o[0]&&0===o[1]&&0===o[2]||(a.DI(o,S.rotationOrder,x),n.rotation=x.toArray()),i.override.value&&(n.material={color:i.color.value,opacity:i.opacity.value,hiddenOpacity:i.hiddenOpacity.value,roughness:i.roughness.value,metalness:i.metalness.value,occlusion:i.occlusion.value,doubleSided:i.doubleSided.value}),0!==i.overlayMap.value&&(n.overlayMap=i.overlayMap.value),n.boundingBox={min:this._localBoundingBox.min.toArray(),max:this._localBoundingBox.max.toArray()},n.derivatives=this.derivatives.toJSON();const s=this.getComponent(g.A).toData();s&&s.length>0&&(n.annotations=s),e.models=e.models||[];const l=e.models.length;return e.models.push(n),l}updateShader(){const e=this.ins.shader.getValidatedValue(),t=[];this.object3D.traverse(n=>{const i=n.material;i&&i.defines&&!t.includes(i.uuid)&&(this.setShaderMode(e,i),t.push(i.uuid))})}updateShadowSide(){this.object3D.traverse(e=>{const t=e.material;t&&(this.ins.shadowSide.value==c.Jb.Front?t.shadowSide=i.hB5:t.shadowSide=i.hsX,t.needsUpdate=!0)})}updateOverlayMap(){const e=this.getGraphComponent(A.A,!0);if(e&&e.snapshots.outs.tweening.value)return void e.snapshots.outs.end.once("value",()=>{this.ins.overlayMap.set(),this.update()});const t=this.getOverlays(),n=this.ins.overlayMap.value-1;if(n>=0&&t.length>n){const e=this.getOverlays()[n].asset.data.uri,t=this.getOverlay(e).texture;t?this.updateOverlayMaterial(t,e):this.assetReader.getTexture(e).then(t=>{this.getOverlay(e).texture=t,this.updateOverlayMaterial(t,e)})}else this.updateOverlayMaterial(null,null)}updateVariant(){if(!this.activeDerivative)return;const e=this.ins.variant.getOptionText(),t=this.activeDerivative.model.userData.variants.findIndex(t=>t.name.includes(e));if(t<0)return;const n=this.activeDerivative.model.userData.parser;this.object3D.traverse(async e=>{var r=e;if(!r.isMesh||!r.userData.gltfExtensions)return;const o=r.userData.gltfExtensions.KHR_materials_variants;if(!o)return;r.userData.originalMaterial||(r.userData.originalMaterial=r.material);const s=o.mappings.find(e=>e.variants.includes(t));s?n.getDependency("material",s.material).then(e=>{const t=r.material.userData.shader;r.material.copy(e),r.material.userData.shader=t,this.activeDerivative.model.userData.variants.variantMaterials[e.uuid]=e;const n=r.material;this._materialCache[n.uuid]={color:n.color.toArray(),opacity:n.opacity,hiddenOpacity:this.ins.hiddenOpacity.schema.preset,roughness:n.roughness,metalness:n.metalness,occlusion:n.aoMapIntensity,doubleSided:n.side==i.$EB,transparent:n.transparent}}):r.material=r.userData.originalMaterial,this.ins.override.value&&this.updateMaterial(),this.outs.variant.setValue(this.ins.variant.value)}),this.outs.updated.set()}updateOverlayMaterial(e,t){this.object3D&&(this.object3D.traverse(n=>{const i=n.material;i&&i.defines&&(e&&(e.flipY=!1,i.defines.OVERLAY_ALPHA=t.endsWith(".jpg")),i.defines.USE_ZONEMAP=null!=e,i.userData.shader.uniforms.zoneMap.value=e,i.needsUpdate=!0)}),this.outs.overlayMap.setValue(this.ins.overlayMap.value))}updateMaterial(){const e=this.ins;this.object3D.traverse(t=>{const n=t.material;n&&n.defines&&(n.aoMapIntensity=e.occlusion.value,n.color.fromArray(e.color.value),n.opacity=this._visible?e.opacity.value:e.hiddenOpacity.value,n.transparent=n.opacity<1||this._materialCache[n.uuid].transparent,n.roughness=e.roughness.value,n.metalness=e.metalness.value,n.side=e.doubleSided.value?i.$EB:i.hB5,n.needsUpdate=!0)})}updateUnitScale(){const e=this.ins.localUnits.getValidatedValue(),t=this.ins.globalUnits.getValidatedValue();this.outs.unitScale.setValue((0,d.A)(e,t)),this.updateMatrixFromProps()}updateMatrixFromProps(){const e=this.ins,t=this.outs.unitScale.value,n=this.object3D;this._needsInit&&(this._prevPosition.copy(_.fromArray(e.position.value)),this._prevRotation.copy(_.fromArray(e.rotation.value)),this._needsInit=!1),_.fromArray(e.position.value).multiplyScalar(t),a.DI(e.rotation.value,S.rotationOrder,x),w.setScalar(e.scale.value).multiplyScalar(t),n.matrix.compose(_,x,w),n.matrixWorldNeedsUpdate=!0,a.DI([this._prevRotation.x,this._prevRotation.y,this._prevRotation.z],S.rotationOrder,C),C.invert(),w.setScalar(1),M.compose(_.fromArray(e.position.value),x,w);const i=this.getComponent(g.A);i.getAnnotations().forEach(e=>{_.fromArray(e.data.position),_.sub(this._prevPosition),_.applyQuaternion(C),_.applyMatrix4(M),e.data.position=_.toArray(),_.fromArray(e.data.direction),_.applyQuaternion(C),_.applyQuaternion(x),e.data.direction=_.toArray(),e.update(),i.updateAnnotation(e,!0)}),this._prevPosition.copy(_.fromArray(e.position.value)),this._prevRotation.copy(_.fromArray(e.rotation.value)),this.outs.updated.set()}updateRenderOrder(e,t){const n=t-e.renderOrder;e.renderOrder=t,e.children.forEach(e=>this.updateRenderOrder(e,n))}autoLoad(){const e=this.derivatives.select(c.UH.Web3D,this.ins.quality.value);return e?this.loadDerivative(e):(r.Ay.show(`No 3D derivatives available for '${this.displayName}'.`),Promise.resolve())}unload(){this._activeDerivative&&(this._activeDerivative.model&&this.removeObject3D(this._activeDerivative.model),this._activeDerivative.unload(),this._activeDerivative=null)}isLoading(){return!!this._loadingDerivative}async loadDerivative(e){if(this.node&&this.assetReader){if(this._loadingDerivative&&this._loadingDerivative!=e&&(this._loadingDerivative.unload(),this._loadingDerivative=null),this._activeDerivative!=e)return this._loadingDerivative==e?new Promise(e=>this._loadingDerivative.on("load",e)):(this._loadingDerivative=e,this.assetManager.initialLoad||this._activeDerivative||(this.assetManager.initialLoad=!0),e.load(this.assetReader).then(()=>{if(!e.model||!this.node||this._activeDerivative&&e.data.quality!=this.ins.quality.value)return void e.unload();if(this._activeDerivative&&this._activeDerivative==e)return;this.unload(),this._activeDerivative=e,this._loadingDerivative=null,this.addObject3D(e.model),this.renderer.activeSceneComponent.scene.updateMatrixWorld(!0),this._boxFrame&&(this.removeObject3D(this._boxFrame),this._boxFrame.dispose(),this._boxFrame=null),this._localBoundingBox.makeEmpty(),a.g6(e.model,this._localBoundingBox),this.outs.updated.set(),this._localBoundingBox.isEmpty()&&(_.setScalar(0),this._localBoundingBox.set(_,_)),this.outs.quality.setValue(e.data.quality),this.object3D.traverse(e=>{const t=e.material;t&&(this._materialCache[t.uuid]={color:t.color.toArray(),opacity:t.opacity,hiddenOpacity:this.ins.hiddenOpacity.schema.preset,roughness:t.roughness,metalness:t.metalness,occlusion:t.aoMapIntensity,doubleSided:t.side==i.$EB,transparent:t.transparent})}),this.ins.override.value&&this.updateMaterial(),this.ins.shadowSide.value!=c.Jb.Back&&this.updateShadowSide(),0!==this.ins.renderOrder.value&&this.updateRenderOrder(this.object3D,this.ins.renderOrder.value);const t=this.ins.overlayMap;t.setOptions(["None"]),e.findAssets(c.iO.Image).filter(e=>e.data.mapType===c.oo.Zone).forEach(e=>{t.setOptions(t.schema.options.concat(e.data.uri));const n=this.getOverlay(e.data.uri);n.asset=e,n.fromFile=!0});const n=e.model.userData.variants?e.model.userData.variants.map(e=>e.name):null;if(n){const e=new Set(this.ins.variant.schema.options);n.forEach(e.add,e),this.ins.variant.setOptions([...e]),this.ins.variant.setOption(n[0],!0,!0),this.updateVariant()}0!==this.ins.overlayMap.value&&this.ins.overlayMap.set(),this.emit({type:"model-load",quality:e.data.quality})}).catch(e=>{"AbortError"!=e.name&&"ABORT_ERR"!=e.name&&(console.error(e),r.Ay.show(`Failed to load model derivative: ${e.message}`))}))}else console.warn("Model load interrupted.")}addObject3D(e){this.object3D.add(e),this.object3D.traverse(e=>{"Mesh"===e.type&&this.registerPickableObject3D(e,!0)})}setShaderMode(e,t){const n=t;switch(Object.assign(n,n.userData.paramCopy),n.defines.MODE_NORMALS=!1,n.defines.MODE_XRAY=!1,n.defines.OBJECTSPACE_NORMALMAP=!(!n.normalMap||n.normalMapType!==i.vyJ),n.side=n.defines.CUT_PLANE?i.$EB:n.side,n.needsUpdate=!0,e){case l.gw.Clay:if(n.userData.paramCopy={color:n.color,map:n.map,roughness:n.roughness,metalness:n.metalness,aoMapIntensity:n.aoMapIntensity,blending:n.blending,transparent:n.transparent,depthWrite:n.depthWrite,envMap:n.envMap},"MeshPhysicalMaterial"==n.type){const e=n;n.userData.paramCopy.transmission=e.transmission,e.transmission=0}n.envMap=null,n.color=this._clayColor,n.map=null,n.roughness=1,n.metalness=0,n.aoMapIntensity*=1,n.blending=i.XIg,n.transparent=!1,n.depthWrite=!0;break;case l.gw.Normals:n.userData.paramCopy={blending:n.blending,transparent:n.transparent,depthWrite:n.depthWrite},n.defines.MODE_NORMALS=!0,n.blending=i.XIg,n.transparent=!1,n.depthWrite=!0;break;case l.gw.XRay:n.userData.paramCopy={side:n.side,blending:n.blending,transparent:n.transparent,depthWrite:n.depthWrite},n.defines.MODE_XRAY=!0,n.side=i.$EB,n.blending=i.EZo,n.transparent=!0,n.depthWrite=!1;break;case l.gw.Wireframe:n.userData.paramCopy={color:n.color,emissive:n.emissive,roughness:n.roughness,metalness:n.metalness,wireframe:n.wireframe,map:n.map,aoMap:n.aoMap,emissiveMap:n.emissiveMap,normalMap:n.normalMap},n.color=this._wireColor,n.emissive=this._wireEmissiveColor,n.roughness=.8,n.metalness=.1,n.wireframe=!0,n.map=null,n.aoMap=null,n.emissiveMap=null,n.normalMap=null,n.defines.OBJECTSPACE_NORMALMAP=!1}}}S.typeName="CVModel2",S.text="Model",S.icon="cube",S.rotationOrder="ZYX",S.ins={name:o.gK.String("Model.Name"),globalUnits:o.gK.Enum("Model.GlobalUnits",c.uj,c.uj.cm),localUnits:o.gK.Enum("Model.LocalUnits",c.uj,c.uj.cm),quality:o.gK.Enum("Model.Quality",c.a9,c.a9.Thumb),tags:o.gK.String("Model.Tags"),renderOrder:o.gK.Number("Model.RenderOrder",0),shadowSide:o.gK.Enum("Model.ShadowSide",c.Jb,c.Jb.Back),activeTags:o.gK.String("Model.ActiveTags"),autoLoad:o.gK.Boolean("Model.AutoLoad",!0),position:o.gK.Vector3("Model.Position"),rotation:o.gK.Vector3("Model.Rotation"),scale:o.gK.Number("Model.Scale",1),center:o.gK.Event("Model.Center"),shader:o.gK.Enum("Material.Shader",l.gw,l.gw.Default),variant:o.gK.Option("Material.Variant",[],0),overlayMap:o.gK.Option("Material.OverlayMap",["None"],0),slicerEnabled:o.gK.Boolean("Material.SlicerEnabled",!0),override:o.gK.Boolean("Material.Override",!1),color:o.gK.ColorRGB("Material.BaseColor"),opacity:o.gK.Percent("Material.Opacity",1),hiddenOpacity:o.gK.Percent("Material.HiddenOpacity",0),roughness:o.gK.Percent("Material.Roughness",.8),metalness:o.gK.Percent("Material.Metalness",.1),occlusion:o.gK.Percent("Material.Occlusion",{preset:.25,max:2}),doubleSided:o.gK.Boolean("Material.DoubleSided",!1),dumpDerivatives:o.gK.Event("Derivatives.Dump")},S.outs={unitScale:o.gK.Number("UnitScale",{preset:1,precision:5}),quality:o.gK.Enum("LoadedQuality",c.a9),updated:o.gK.Event("Updated"),overlayMap:o.gK.Option("Material.OverlayMap",["None"],0),variant:o.gK.Option("Material.Variant",[],0)}},9623:(e,t,n)=>{"use strict";let i=n(3172);class r extends i{constructor(e){super(e),this.type="comment"}}e.exports=r,r.default=r},9628:function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}(n(3681))},9633:(e,t,n)=>{"use strict";const i=n(5129),r=n(1157);e.exports=(e,t)=>(e=i.resolve(e),i.join(i.dirname(e),r(i.basename(e),t)))},9640:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var i=n(3423),r=n(4949),o=n(3074),s=(n(7832),n(3198));n(7891),n(8415),n(2642);class a extends o.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(a.ins),this._annotations={},this._viewports=new Set,this._sprites={},this.object3D=new r.A,this.object3D.setVisible(!1),this.object3D.name="StaticAnnotationView"}update(e){super.update(e);const t=this.ins,n=this.object3D;return t.unitScale.changed&&(n.scale.setScalar(t.unitScale.value),n.updateMatrix()),t.visible.changed&&n.setVisible(t.visible.value),!0}tock(){if(this.updated)return!0}postRender(e){const t=e.viewport;this._viewports.has(t)||(t.on("dispose",this.onViewportDispose,this),this._viewports.add(t));this.object3D.render(t.overlay,e.camera)}dispose(){this.object3D.dispose(),this._viewports.forEach(e=>e.off("dispose",this.onViewportDispose,this)),this._viewports.clear(),super.dispose()}addAnnotation(e){this._annotations[e.id]=e,this.createSprite(e),this.changed=!0}removeAnnotation(e){Object.keys(this._annotations);delete this._annotations[e.id],this.removeSprite(e),this.changed=!0}updateAnnotation(e,t){t&&this.updateSprite(e),this.changed=!0}onViewportDispose(e){this.object3D.disposeHTMLElements(e.viewport.overlay)}createSprite(e){this.removeSprite(e);const t=s.A.createInstance(e);this._sprites[e.id]=t,this.object3D.add(t)}removeSprite(e){const t=this._sprites[e.id];t&&(t.dispose(),this._sprites[e.id]=void 0,this.object3D.remove(t))}updateSprite(e){const t=this._sprites[e.id];t&&t.update()}}a.typeName="CVStaticAnnotationView",a.ins={unitScale:i.gK.Number("Transform.UnitScale",{preset:1,precision:5})}},9657:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},9658:()=>{!function(){"use strict";const e=Object.getPrototypeOf,t=(e,t,n)=>{var i;return!!n(e,t.prototype)||(null===(i=e.constructor)||void 0===i?void 0:i.name)===t.name},n=e=>n=>(e=>{const n=typeof e;return null===e?"null":"object"===n&&Array.isArray(e)?"array":"object"===n&&t(e,String,(e,t)=>t.isPrototypeOf(e))?"string":n})(n)===e,i=e=>t=>typeof t===e,r=e=>t=>e===t,o=n("string"),s=n("object"),a=n=>((n,i)=>s(n)&&t(n,i,(t,n)=>e(t)===n))(n,Object),l=n("array"),c=r(null),d=i("boolean"),u=r(void 0),h=e=>null==e,p=e=>!h(e),m=i("function"),f=i("number"),g=(e,t)=>{if(l(e)){for(let n=0,i=e.length;n<i;++n)if(!t(e[n]))return!1;return!0}return!1},v=()=>{},y=e=>()=>e(),b=(e,t)=>(...n)=>e(t.apply(null,n)),A=e=>()=>e,_=e=>e,w=(e,t)=>e===t;function x(e,...t){return(...n)=>{const i=t.concat(n);return e.apply(null,i)}}const C=e=>t=>!e(t),E=e=>()=>{throw new Error(e)},M=e=>e(),S=A(!1),T=A(!0);class k{constructor(e,t){this.tag=e,this.value=t}static some(e){return new k(!0,e)}static none(){return k.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?k.some(e(this.value)):k.none()}bind(e){return this.tag?e(this.value):k.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:k.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return p(e)?k.some(e):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const L=Array.prototype.slice,D=Array.prototype.indexOf,I=Array.prototype.push,R=(e,t)=>D.call(e,t),O=(e,t)=>{const n=R(e,t);return-1===n?k.none():k.some(n)},P=(e,t)=>R(e,t)>-1,B=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return!0}return!1},N=(e,t)=>{const n=[];for(let i=0;i<e;i++)n.push(t(i));return n},U=(e,t)=>{const n=[];for(let i=0;i<e.length;i+=t){const r=L.call(e,i,i+t);n.push(r)}return n},F=(e,t)=>{const n=e.length,i=new Array(n);for(let r=0;r<n;r++){const n=e[r];i[r]=t(n,r)}return i},z=(e,t)=>{for(let n=0,i=e.length;n<i;n++){t(e[n],n)}},H=(e,t)=>{const n=[],i=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];(t(o,r)?n:i).push(o)}return{pass:n,fail:i}},j=(e,t)=>{const n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t(r,i)&&n.push(r)}return n},V=(e,t,n)=>(((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(e,(e,i)=>{n=t(n,e,i)}),n),Y=(e,t,n)=>(z(e,(e,i)=>{n=t(n,e,i)}),n),G=(e,t)=>((e,t,n)=>{for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t(r,i))return k.some(r);if(n(r,i))break}return k.none()})(e,t,S),Q=(e,t)=>{for(let n=0,i=e.length;n<i;n++){if(t(e[n],n))return k.some(n)}return k.none()},$=e=>{const t=[];for(let n=0,i=e.length;n<i;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);I.apply(t,e[n])}return t},q=(e,t)=>$(F(e,t)),W=(e,t)=>{for(let n=0,i=e.length;n<i;++n){if(!0!==t(e[n],n))return!1}return!0},K=e=>{const t=L.call(e,0);return t.reverse(),t},Z=(e,t)=>j(e,e=>!P(t,e)),X=(e,t)=>{const n={};for(let i=0,r=e.length;i<r;i++){const r=e[i];n[String(r)]=t(r,i)}return n},J=e=>[e],ee=(e,t)=>{const n=L.call(e,0);return n.sort(t),n},te=(e,t)=>t>=0&&t<e.length?k.some(e[t]):k.none(),ne=e=>te(e,0),ie=e=>te(e,e.length-1),re=m(Array.from)?Array.from:e=>L.call(e),oe=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i.isSome())return i}return k.none()},se=Object.keys,ae=Object.hasOwnProperty,le=(e,t)=>{const n=se(e);for(let i=0,r=n.length;i<r;i++){const r=n[i];t(e[r],r)}},ce=(e,t)=>de(e,(e,n)=>({k:n,v:t(e,n)})),de=(e,t)=>{const n={};return le(e,(e,i)=>{const r=t(e,i);n[r.k]=r.v}),n},ue=e=>(t,n)=>{e[n]=t},he=(e,t,n,i)=>{le(e,(e,r)=>{(t(e,r)?n:i)(e,r)})},pe=(e,t)=>{const n={};return he(e,t,ue(n),v),n},me=(e,t)=>{const n=[];return le(e,(e,i)=>{n.push(t(e,i))}),n},fe=(e,t)=>{const n=se(e);for(let i=0,r=n.length;i<r;i++){const r=n[i],o=e[r];if(t(o,r,e))return k.some(o)}return k.none()},ge=e=>me(e,_),ve=(e,t)=>ye(e,t)?k.from(e[t]):k.none(),ye=(e,t)=>ae.call(e,t),be=(e,t)=>ye(e,t)&&void 0!==e[t]&&null!==e[t],Ae=(e,t,n=w)=>e.exists(e=>n(e,t)),_e=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},we=(e,t,n)=>e.isSome()&&t.isSome()?k.some(n(e.getOrDie(),t.getOrDie())):k.none(),xe=(e,t)=>null!=e?k.some(t(e)):k.none(),Ce=(e,t)=>e?k.some(t):k.none(),Ee=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Me=(e,t)=>Te(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Se=(e,t,n=0,i)=>{const r=e.indexOf(t,n);return-1!==r&&(!!u(i)||r+t.length<=i)},Te=(e,t)=>Ee(e,t,0),ke=(e,t)=>Ee(e,t,e.length-t.length),Le=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),De=e=>e.length>0,Ie=e=>!De(e),Re=e=>void 0!==e.style&&m(e.style.getPropertyValue),Oe=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Pe={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return Oe(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return Oe(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return Oe(n)},fromDom:Oe,fromPoint:(e,t,n)=>k.from(e.dom.elementFromPoint(t,n)).map(Oe)},Be="undefined"!=typeof window?window:Function("return this;")(),Ne=(e,t)=>((e,t)=>{let n=null!=t?t:Be;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),Ue=(e,t)=>{const n=((e,t)=>Ne(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},Fe=Object.getPrototypeOf,ze=e=>{const t=Ne("ownerDocument.defaultView",e);return s(e)&&((e=>Ue("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Fe(e).constructor.name))},He=e=>e.dom.nodeName.toLowerCase(),je=e=>t=>(e=>e.dom.nodeType)(t)===e,Ve=e=>Ye(e)&&ze(e.dom),Ye=je(1),Ge=je(3),Qe=je(9),$e=je(11),qe=e=>t=>Ye(t)&&He(t)===e,We=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Ke=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Ze=(e,t)=>e.dom===t.dom,Xe=(e,t)=>{const n=e.dom,i=t.dom;return n!==i&&n.contains(i)},Je=e=>Pe.fromDom(e.dom.ownerDocument),et=e=>Qe(e)?e:Je(e),tt=e=>Pe.fromDom(et(e).dom.documentElement),nt=e=>Pe.fromDom(et(e).dom.defaultView),it=e=>k.from(e.dom.parentNode).map(Pe.fromDom),rt=e=>k.from(e.dom.parentElement).map(Pe.fromDom),ot=e=>k.from(e.dom.offsetParent).map(Pe.fromDom),st=e=>F(e.dom.childNodes,Pe.fromDom),at=(e,t)=>{const n=e.dom.childNodes;return k.from(n[t]).map(Pe.fromDom)},lt=e=>at(e,0),ct=(e,t)=>({element:e,offset:t}),dt=(e,t)=>{const n=st(e);return n.length>0&&t<n.length?ct(n[t],0):ct(e,t)},ut=e=>$e(e)&&p(e.dom.host),ht=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),pt=A(ht),mt=ht?e=>Pe.fromDom(e.dom.getRootNode()):et,ft=e=>ut(e)?e:Pe.fromDom(et(e).dom.body),gt=e=>{const t=mt(e);return ut(t)?k.some(t):k.none()},vt=e=>Pe.fromDom(e.dom.host),yt=e=>p(e.dom.shadowRoot),bt=e=>{const t=Ge(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return gt(Pe.fromDom(t)).fold(()=>n.body.contains(t),(i=bt,r=vt,e=>i(r(e))));var i,r},At=()=>_t(Pe.fromDom(document)),_t=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Pe.fromDom(t)},wt=(e,t,n)=>{if(!(o(n)||d(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},xt=(e,t,n)=>{wt(e.dom,t,n)},Ct=(e,t)=>{const n=e.dom;le(t,(e,t)=>{wt(n,t,e)})},Et=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Mt=(e,t)=>k.from(Et(e,t)),St=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Tt=(e,t)=>{e.dom.removeAttribute(t)},kt=(e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Re(e)&&e.style.setProperty(t,n)},Lt=(e,t)=>{Re(e)&&e.style.removeProperty(t)},Dt=(e,t,n)=>{const i=e.dom;kt(i,t,n)},It=(e,t)=>{const n=e.dom;le(t,(e,t)=>{kt(n,t,e)})},Rt=(e,t)=>{const n=e.dom;le(t,(e,t)=>{e.fold(()=>{Lt(n,t)},e=>{kt(n,t,e)})})},Ot=(e,t)=>{const n=e.dom,i=window.getComputedStyle(n).getPropertyValue(t);return""!==i||bt(e)?i:Pt(n,t)},Pt=(e,t)=>Re(e)?e.style.getPropertyValue(t):"",Bt=(e,t)=>{const n=e.dom,i=Pt(n,t);return k.from(i).filter(e=>e.length>0)},Nt=e=>{const t={},n=e.dom;if(Re(n))for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t[i]=n.style[i]}return t},Ut=(e,t,n)=>{const i=Pe.fromTag(e);Dt(i,t,n);return Bt(i,t).isSome()},Ft=(e,t)=>{const n=e.dom;Lt(n,t),Ae(Mt(e,"style").map(Le),"")&&Tt(e,"style")},zt=e=>e.dom.offsetWidth,Ht=(e,t)=>{const n=n=>{const i=t(n);if(i<=0||null===i){const t=Ot(n,e);return parseFloat(t)||0}return i},i=(e,t)=>Y(t,(t,n)=>{const i=Ot(e,n),r=void 0===i?0:parseInt(i,10);return isNaN(r)?t:t+r},0);return{set:(t,n)=>{if(!f(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const i=t.dom;Re(i)&&(i.style[e]=n+"px")},get:n,getOuter:n,aggregate:i,max:(e,t,n)=>{const r=i(e,n);return t>r?t-r:0}}},jt=Ht("height",e=>{const t=e.dom;return bt(e)?t.getBoundingClientRect().height:t.offsetHeight}),Vt=e=>jt.get(e),Yt=e=>jt.getOuter(e),Gt=(e,t)=>({left:e,top:t,translate:(n,i)=>Gt(e+n,t+i)}),Qt=Gt,$t=(e,t)=>void 0!==e?e:void 0!==t?t:0,qt=e=>{const t=e.dom.ownerDocument,n=t.body,i=t.defaultView,r=t.documentElement;if(n===e.dom)return Qt(n.offsetLeft,n.offsetTop);const o=$t(null==i?void 0:i.pageYOffset,r.scrollTop),s=$t(null==i?void 0:i.pageXOffset,r.scrollLeft),a=$t(r.clientTop,n.clientTop),l=$t(r.clientLeft,n.clientLeft);return Wt(e).translate(s-l,o-a)},Wt=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Qt(n.offsetLeft,n.offsetTop):bt(e)?(e=>{const t=e.getBoundingClientRect();return Qt(t.left,t.top)})(t):Qt(0,0)},Kt=Ht("width",e=>e.dom.offsetWidth),Zt=e=>Kt.get(e),Xt=e=>Kt.getOuter(e),Jt=e=>{let t,n=!1;return(...i)=>(n||(n=!0,t=e.apply(null,i)),t)},en=()=>tn(0,0),tn=(e,t)=>({major:e,minor:t}),nn={nu:tn,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?en():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.test(t))return i}})(e,t);if(!n)return{major:0,minor:0};const i=e=>Number(t.replace(n,"$"+e));return tn(i(1),i(2))})(e,n)},unknown:en},rn=(e,t)=>{const n=String(t).toLowerCase();return G(e,e=>e.search(n))},on=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,sn=e=>t=>Se(t,e),an=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Se(e,"edge/")&&Se(e,"chrome")&&Se(e,"safari")&&Se(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,on],search:e=>Se(e,"chrome")&&!Se(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Se(e,"msie")||Se(e,"trident")},{name:"Opera",versionRegexes:[on,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:sn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:sn("firefox")},{name:"Safari",versionRegexes:[on,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Se(e,"safari")||Se(e,"mobile/"))&&Se(e,"applewebkit")}],ln=[{name:"Windows",search:sn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Se(e,"iphone")||Se(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:sn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:sn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:sn("linux"),versionRegexes:[]},{name:"Solaris",search:sn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:sn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:sn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],cn={browsers:A(an),oses:A(ln)},dn="Edge",un="Chromium",hn="Opera",pn="Firefox",mn="Safari",fn=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isEdge:i(dn),isChromium:i(un),isIE:i("IE"),isOpera:i(hn),isFirefox:i(pn),isSafari:i(mn)}},gn={unknown:()=>fn({current:void 0,version:nn.unknown()}),nu:fn,edge:A(dn),chromium:A(un),ie:A("IE"),opera:A(hn),firefox:A(pn),safari:A(mn)},vn="Windows",yn="Android",bn="Linux",An="macOS",_n="Solaris",wn="FreeBSD",xn="ChromeOS",Cn=e=>{const t=e.current,n=e.version,i=e=>()=>t===e;return{current:t,version:n,isWindows:i(vn),isiOS:i("iOS"),isAndroid:i(yn),isMacOS:i(An),isLinux:i(bn),isSolaris:i(_n),isFreeBSD:i(wn),isChromeOS:i(xn)}},En={unknown:()=>Cn({current:void 0,version:nn.unknown()}),nu:Cn,windows:A(vn),ios:A("iOS"),android:A(yn),linux:A(bn),macos:A(An),solaris:A(_n),freebsd:A(wn),chromeos:A(xn)},Mn=(e,t,n)=>{const i=cn.browsers(),r=cn.oses(),o=t.bind(e=>((e,t)=>oe(t.brands,t=>{const n=t.brand.toLowerCase();return G(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:nn.nu(parseInt(t.version,10),0)}))}))(i,e)).orThunk(()=>((e,t)=>rn(e,t).map(e=>{const n=nn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(i,e)).fold(gn.unknown,gn.nu),s=((e,t)=>rn(e,t).map(e=>{const n=nn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e).fold(En.unknown,En.nu),a=((e,t,n,i)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,s=e.isiOS()||e.isAndroid(),a=s||i("(pointer:coarse)"),l=r||!o&&s&&i("(min-device-width:768px)"),c=o||s&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!l&&!d;return{isiPad:A(r),isiPhone:A(o),isTablet:A(l),isPhone:A(c),isTouch:A(a),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:A(d),isDesktop:A(u)}})(s,o,e,n);return{browser:o,os:s,deviceType:a}},Sn=e=>window.matchMedia(e).matches;let Tn=Jt(()=>Mn(navigator.userAgent,k.from(navigator.userAgentData),Sn));const kn=()=>Tn(),Ln=e=>{const t=Pe.fromDom((e=>{if(pt()&&p(e.target)){const t=Pe.fromDom(e.target);if(Ye(t)&&yt(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return ne(t)}}return k.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),i=()=>e.preventDefault(),r=b(i,n);return((e,t,n,i,r,o,s)=>({target:e,x:t,y:n,stop:i,prevent:r,kill:o,raw:s}))(t,e.clientX,e.clientY,n,i,r,e)},Dn=(e,t,n,i,r)=>{const o=((e,t)=>n=>{e(n)&&t(Ln(n))})(n,i);return e.dom.addEventListener(t,o,r),{unbind:x(In,e,t,o,r)}},In=(e,t,n,i)=>{e.dom.removeEventListener(t,n,i)},Rn=(e,t)=>{it(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},On=(e,t)=>{const n=(e=>k.from(e.dom.nextSibling).map(Pe.fromDom))(e);n.fold(()=>{it(e).each(e=>{Bn(e,t)})},e=>{Rn(e,t)})},Pn=(e,t)=>{lt(e).fold(()=>{Bn(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Bn=(e,t)=>{e.dom.appendChild(t.dom)},Nn=(e,t)=>{z(t,t=>{Bn(e,t)})},Un=e=>{e.dom.textContent="",z(st(e),e=>{Fn(e)})},Fn=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},zn=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,i=t.body.scrollTop||t.documentElement.scrollTop;return Qt(n,i)},Hn=(e,t,n)=>{const i=(void 0!==n?n.dom:document).defaultView;i&&i.scrollTo(e,t)},jn=(e,t,n,i)=>({x:e,y:t,width:n,height:i,right:e+n,bottom:t+i}),Vn=e=>{const t=void 0===e?window:e,n=t.document,i=zn(Pe.fromDom(n));return(e=>{const t=void 0===e?window:e;return kn().browser.isFirefox()?k.none():k.from(t.visualViewport)})(t).fold(()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return jn(i.left,i.top,n,r)},e=>jn(Math.max(e.pageLeft,i.left),Math.max(e.pageTop,i.top),e.width,e.height))},Yn=()=>Pe.fromDom(document),Gn=(e,t)=>e.view(t).fold(A([]),t=>{const n=e.owner(t),i=Gn(e,n);return[t].concat(i)});var Qn=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?k.none():k.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(Pe.fromDom)},owner:e=>Je(e)});const $n=e=>{const t=Yn(),n=zn(t),i=((e,t)=>{const n=t.owner(e),i=Gn(t,n);return k.some(i)})(e,Qn);return i.fold(x(qt,e),t=>{const i=Wt(e),r=V(t,(e,t)=>{const n=Wt(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Qt(r.left+i.left+n.left,r.top+i.top+n.top)})},qn=(e,t,n,i)=>({x:e,y:t,width:n,height:i,right:e+n,bottom:t+i}),Wn=e=>{const t=qt(e),n=Xt(e),i=Yt(e);return qn(t.left,t.top,n,i)},Kn=e=>{const t=$n(e),n=Xt(e),i=Yt(e);return qn(t.left,t.top,n,i)},Zn=(e,t)=>{const n=Math.max(e.x,t.x),i=Math.max(e.y,t.y),r=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom);return qn(n,i,r-n,o-i)},Xn=()=>Vn(window);var Jn=tinymce.util.Tools.resolve("tinymce.ThemeManager");const ei=e=>{const t=t=>t(e),n=A(e),i=()=>r,r={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:T,isError:S,map:t=>ni.value(t(e)),mapError:i,bind:t,exists:t,forall:t,getOr:n,or:i,getOrThunk:n,orThunk:i,getOrDie:n,each:t=>{t(e)},toOptional:()=>k.some(e)};return r},ti=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:S,isError:T,map:t,mapError:t=>ni.error(t(e)),bind:t,exists:S,forall:T,getOr:_,or:_,getOrThunk:M,orThunk:M,getOrDie:E(String(e)),each:v,toOptional:k.none};return n},ni={value:ei,error:ti,fromOption:(e,t)=>e.fold(()=>ti(t),ei)};var ii;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(ii||(ii={}));const ri=(e,t,n)=>e.stype===ii.Error?t(e.serror):n(e.svalue),oi=e=>({stype:ii.Value,svalue:e}),si=e=>({stype:ii.Error,serror:e}),ai=e=>e.fold(si,oi),li=e=>ri(e,ni.error,ni.value),ci=oi,di=e=>{const t=[],n=[];return z(e,e=>{ri(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}},ui=si,hi=(e,t)=>e.stype===ii.Value?t(e.svalue):e,pi=(e,t)=>e.stype===ii.Error?t(e.serror):e,mi=(e,t)=>e.stype===ii.Value?{stype:ii.Value,svalue:t(e.svalue)}:e,fi=(e,t)=>e.stype===ii.Error?{stype:ii.Error,serror:t(e.serror)}:e,gi=ri,vi=(e,t,n,i)=>({tag:"field",key:e,newKey:t,presence:n,prop:i}),yi=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},bi=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let i=0;i<t.length;i++){const r=t[i];for(const t in r)ye(r,t)&&(n[t]=e(n[t],r[t]))}return n},Ai=bi((e,t)=>a(e)&&a(t)?Ai(e,t):t),_i=bi((e,t)=>t),wi=e=>({tag:"defaultedThunk",process:e}),xi=e=>wi(A(e)),Ci=e=>({tag:"mergeWithThunk",process:e}),Ei=e=>b(ui,$)(e),Mi=e=>{const t=di(e);return t.errors.length>0?Ei(t.errors):ci(t.values)},Si=e=>s(e)&&se(e).length>100?" removed due to size":JSON.stringify(e,null,2),Ti=(e,t)=>ui([{path:e,getErrorInfo:t}]),ki=e=>({extract:(t,n)=>pi(e(n),e=>((e,t)=>Ti(e,A(t)))(t,e)),toString:A("val")}),Li=ki(ci),Di=(e,t,n,i)=>ve(t,n).fold(()=>((e,t,n)=>Ti(e,()=>'Could not find valid *required* value for "'+t+'" in '+Si(n)))(e,n,t),i),Ii=(e,t,n,i)=>i(ve(e,t).getOrThunk(()=>n(e))),Ri=(e,t,n,i,r)=>{const o=e=>r.extract(t.concat([i]),e),s=e=>e.fold(()=>ci(k.none()),e=>{const n=r.extract(t.concat([i]),e);return mi(n,k.some)});switch(e.tag){case"required":return Di(t,n,i,o);case"defaultedThunk":return Ii(n,i,e.process,o);case"option":return((e,t,n)=>n(ve(e,t)))(n,i,s);case"defaultedOptionThunk":return((e,t,n,i)=>i(ve(e,t).map(t=>!0===t?n(e):t)))(n,i,e.process,s);case"mergeWithThunk":return Ii(n,i,A({}),t=>{const i=Ai(e.process(n),t);return o(i)})}},Oi=e=>({extract:(t,n)=>e().extract(t,n),toString:()=>e().toString()}),Pi=e=>se(pe(e,p)),Bi=e=>{const t=Ni(e),n=V(e,(e,t)=>yi(t,t=>Ai(e,{[t]:!0}),A(e)),{});return{extract:(e,i)=>{const r=d(i)?[]:Pi(i),o=j(r,e=>!be(n,e));return 0===o.length?t.extract(e,i):((e,t)=>Ti(e,()=>"There are unsupported fields: ["+t.join(", ")+"] specified"))(e,o)},toString:t.toString}},Ni=e=>({extract:(t,n)=>((e,t,n)=>{const i={},r=[];for(const o of n)yi(o,(n,o,s,a)=>{const l=Ri(s,e,t,n,a);gi(l,e=>{r.push(...e)},e=>{i[o]=e})},(e,n)=>{i[e]=n(t)});return r.length>0?ui(r):ci(i)})(t,n,e),toString:()=>{const t=F(e,e=>yi(e,(e,t,n,i)=>e+" -> "+i.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+t.join("\n")+"}"}}),Ui=e=>({extract:(t,n)=>{const i=F(n,(n,i)=>e.extract(t.concat(["["+i+"]"]),n));return Mi(i)},toString:()=>"array("+e.toString()+")"}),Fi=(e,t)=>{const n=void 0!==t?t:_;return{extract:(t,i)=>{const r=[];for(const o of e){const e=o.extract(t,i);if(e.stype===ii.Value)return{stype:ii.Value,svalue:n(e.svalue)};r.push(e)}return Mi(r)},toString:()=>"oneOf("+F(e,e=>e.toString()).join(", ")+")"}},zi=(e,t)=>({extract:(n,i)=>{const r=se(i),o=((t,n)=>Ui(ki(e)).extract(t,n))(n,r);return hi(o,e=>{const r=F(e,e=>vi(e,e,{tag:"required",process:{}},t));return Ni(r).extract(n,i)})},toString:()=>"setOf("+t.toString()+")"}),Hi=b(Ui,Ni),ji=A(Li),Vi=(e,t)=>ki(n=>{const i=typeof n;return e(n)?ci(n):ui(`Expected type: ${t} but got: ${i}`)}),Yi=Vi(f,"number"),Gi=Vi(o,"string"),Qi=Vi(d,"boolean"),$i=Vi(m,"function"),qi=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(t=>qi(e[t]));default:return!1}},Wi=ki(e=>qi(e)?ci(e):ui("Expected value to be acceptable for sending via postMessage")),Ki=(e,t,n,i)=>ve(n,i).fold(()=>((e,t,n)=>Ti(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Si(t)))(e,n,i),n=>n.extract(e.concat(["branch: "+i]),t)),Zi=(e,t)=>({extract:(n,i)=>ve(i,e).fold(()=>((e,t)=>Ti(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(n,e),e=>Ki(n,i,t,e)),toString:()=>"chooseOn("+e+"). Possible values: "+se(t)}),Xi=e=>ki(t=>e(t).fold(ui,ci)),Ji=(e,t)=>zi(t=>ai(e(t)),t),er=(e,t,n)=>li(((e,t,n)=>{const i=t.extract([e],n);return fi(i,e=>({input:n,errors:e}))})(e,t,n)),tr=e=>e.fold(e=>{throw new Error(ir(e))},_),nr=(e,t,n)=>tr(er(e,t,n)),ir=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:A("... (only showing first ten failures)")}]):e;return F(t,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+Si(e.input),rr=(e,t)=>Zi(e,ce(t,Ni)),or=(e,t)=>((e,t)=>{const n=Jt(t);return{extract:(e,t)=>n().extract(e,t),toString:()=>n().toString()}})(0,t),sr=vi,ar=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),lr=e=>Xi(t=>P(e,t)?ni.value(t):ni.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),cr=e=>sr(e,e,{tag:"required",process:{}},ji()),dr=(e,t)=>sr(e,e,{tag:"required",process:{}},t),ur=e=>dr(e,Yi),hr=e=>dr(e,Gi),pr=(e,t)=>sr(e,e,{tag:"required",process:{}},lr(t)),mr=e=>dr(e,$i),fr=(e,t)=>sr(e,e,{tag:"required",process:{}},Ni(t)),gr=(e,t)=>sr(e,e,{tag:"required",process:{}},Hi(t)),vr=(e,t)=>sr(e,e,{tag:"required",process:{}},Ui(t)),yr=e=>sr(e,e,{tag:"option",process:{}},ji()),br=(e,t)=>sr(e,e,{tag:"option",process:{}},t),Ar=e=>br(e,Yi),_r=e=>br(e,Gi),wr=(e,t)=>br(e,lr(t)),xr=e=>br(e,$i),Cr=(e,t)=>br(e,Ui(t)),Er=(e,t)=>br(e,Ni(t)),Mr=(e,t)=>sr(e,e,xi(t),ji()),Sr=(e,t,n)=>sr(e,e,xi(t),n),Tr=(e,t)=>Sr(e,t,Yi),kr=(e,t)=>Sr(e,t,Gi),Lr=(e,t,n)=>Sr(e,t,lr(n)),Dr=(e,t)=>Sr(e,t,Qi),Ir=(e,t)=>Sr(e,t,$i),Rr=(e,t,n)=>Sr(e,t,Ui(n)),Or=(e,t,n)=>Sr(e,t,Ni(n)),Pr=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Br=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return z(e,(i,r)=>{const o=se(i);if(1!==o.length)throw new Error("one and only one name per case");const s=o[0],a=i[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!l(a))throw new Error("case arguments must be an array");t.push(s),n[s]=(...n)=>{const i=n.length;if(i!==a.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+a.length+" ("+a+"), got "+i);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,n)},match:e=>{const i=se(e);if(t.length!==i.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+i.join(","));if(!W(t,e=>P(i,e)))throw new Error("Not all branches were specified when using match. Specified: "+i.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:s,params:n})}}}}),n};Br([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Nr=(e,t)=>((e,t)=>{const n={};return le(e,(e,i)=>{P(t,i)||(n[i]=e)}),n})(e,t),Ur=(e,t)=>((e,t)=>({[e]:t}))(e,t),Fr=e=>(e=>{const t={};return z(e,e=>{t[e.key]=e.value}),t})(e),zr=(e,t)=>{const n=(e=>{const t=[],n=[];return z(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}})(e);return n.errors.length>0?(i=n.errors,ni.error($(i))):((e,t)=>0===e.length?ni.value(t):ni.value(Ai(t,_i.apply(void 0,e))))(n.values,t);var i},Hr=e=>m(e)?e:S,jr=(e,t,n)=>{let i=e.dom;const r=Hr(n);for(;i.parentNode;){i=i.parentNode;const e=Pe.fromDom(i),n=t(e);if(n.isSome())return n;if(r(e))break}return k.none()},Vr=(e,t,n)=>{const i=t(e),r=Hr(n);return i.orThunk(()=>r(e)?k.none():jr(e,t,r))},Yr=(e,t)=>Ze(e.element,t.event.target),Gr={can:T,abort:S,run:v},Qr=e=>{if(!be(e,"can")&&!be(e,"abort")&&!be(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Gr,...e}},$r=e=>{const t=((e,t)=>(...n)=>Y(e,(e,i)=>e&&t(i).apply(void 0,n),!0))(e,e=>e.can),n=((e,t)=>(...n)=>Y(e,(e,i)=>e||t(i).apply(void 0,n),!1))(e,e=>e.abort);return{can:t,abort:n,run:(...t)=>{z(e,e=>{e.run.apply(void 0,t)})}}},qr=A,Wr=qr("touchstart"),Kr=qr("touchmove"),Zr=qr("touchend"),Xr=qr("touchcancel"),Jr=qr("mousedown"),eo=qr("mousemove"),to=qr("mouseout"),no=qr("mouseup"),io=qr("mouseover"),ro=qr("focusin"),oo=qr("focusout"),so=qr("keydown"),ao=qr("keyup"),lo=qr("input"),co=qr("change"),uo=qr("click"),ho=qr("transitioncancel"),po=qr("transitionend"),mo=qr("transitionstart"),fo=qr("selectstart"),go=e=>A("alloy."+e),vo={tap:go("tap")},yo=go("focus"),bo=go("blur.post"),Ao=go("paste.post"),_o=go("receive"),wo=go("execute"),xo=go("focus.item"),Co=vo.tap,Eo=go("longpress"),Mo=go("sandbox.close"),So=go("typeahead.cancel"),To=go("system.init"),ko=go("system.touchmove"),Lo=go("system.touchend"),Do=go("system.scroll"),Io=go("system.resize"),Ro=go("system.attached"),Oo=go("system.detached"),Po=go("system.dismissRequested"),Bo=go("system.repositionRequested"),No=go("focusmanager.shifted"),Uo=go("slotcontainer.visibility"),Fo=go("system.external.element.scroll"),zo=go("change.tab"),Ho=go("dismiss.tab"),jo=go("highlight"),Vo=go("dehighlight"),Yo=(e,t)=>{qo(e,e.element,t,{})},Go=(e,t,n)=>{qo(e,e.element,t,n)},Qo=e=>{Yo(e,wo())},$o=(e,t,n)=>{qo(e,t,n,{})},qo=(e,t,n,i)=>{const r={target:t,...i};e.getSystem().triggerEvent(n,t,r)},Wo=(e,t,n,i)=>{e.getSystem().triggerEvent(n,t,i.event)},Ko=e=>Fr(e),Zo=(e,t)=>({key:e,value:Qr({abort:t})}),Xo=e=>({key:e,value:Qr({run:(e,t)=>{t.event.prevent()}})}),Jo=(e,t)=>({key:e,value:Qr({run:t})}),es=(e,t,n)=>({key:e,value:Qr({run:(e,i)=>{t.apply(void 0,[e,i].concat(n))}})}),ts=e=>t=>({key:e,value:Qr({run:(e,n)=>{Yr(e,n)&&t(e,n)}})}),ns=(e,t,n)=>((e,t)=>Jo(e,(n,i)=>{n.getSystem().getByUid(t).each(t=>{Wo(t,t.element,e,i)})}))(e,t.partUids[n]),is=(e,t)=>Jo(e,(e,n)=>{const i=n.event,r=e.getSystem().getByDom(i.target).getOrThunk(()=>Vr(i.target,t=>e.getSystem().getByDom(t).toOptional(),S).getOr(e));t(e,r,n)}),rs=e=>Jo(e,(e,t)=>{t.cut()}),os=e=>Jo(e,(e,t)=>{t.stop()}),ss=(e,t)=>ts(e)(t),as=ts(Ro()),ls=ts(Oo()),cs=ts(To()),ds=(e=>t=>Jo(e,t))(wo()),us=e=>e.dom.innerHTML,hs=(e,t)=>{const n=Je(e).dom,i=Pe.fromDom(n.createDocumentFragment()),r=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,st(Pe.fromDom(n))})(t,n);Nn(i,r),Un(e),Bn(e,i)},ps=(e,t)=>Pe.fromDom(e.dom.cloneNode(t)),ms=e=>{if(ut(e))return"#shadow-root";{const t=(e=>ps(e,!1))(e);return(e=>{const t=Pe.fromTag("div"),n=Pe.fromDom(e.dom.cloneNode(!0));return Bn(t,n),us(t)})(t)}},fs=e=>ms(e),gs=Ko([((e,t)=>({key:e,value:Qr({can:t})}))(yo(),(e,t)=>{const n=t.event,i=n.originator,r=n.target;return!((e,t,n)=>Ze(t,e.element)&&!Ze(t,n))(e,i,r)||(console.warn(yo()+" did not get interpreted by the desired target. \nOriginator: "+fs(i)+"\nTarget: "+fs(r)+"\nCheck the "+yo()+" event handlers"),!1)})]);var vs=Object.freeze({__proto__:null,events:gs});let ys=0;const bs=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return ys++,e+"_"+n+ys+String(t)},As=A("alloy-id-"),_s=A("data-alloy-id"),ws=As(),xs=_s(),Cs=(e,t)=>{Object.defineProperty(e.dom,xs,{value:t,writable:!0})},Es=e=>{const t=Ye(e)?e.dom[xs]:null;return k.from(t)},Ms=e=>bs(e),Ss=_,Ts=e=>{const t=t=>`The component must be in a context to execute: ${t}`+(e?"\n"+fs(e().element)+" is not in context.":""),n=e=>()=>{throw new Error(t(e))},i=e=>()=>{console.warn(t(e))};return{debugInfo:A("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:S}},ks=Ts(),Ls=e=>F(e,e=>ke(e,"/*")?e.substring(0,e.length-2):e),Ds=(e,t)=>{const n=e.toString(),i=n.indexOf(")")+1,r=n.indexOf("("),o=n.substring(r+1,i-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ls(o)}),e},Is=bs("alloy-premade"),Rs=e=>(Object.defineProperty(e.element.dom,Is,{value:e.uid,writable:!0}),Ur(Is,e)),Os=e=>ve(e,Is),Ps=e=>((e,t)=>{const n=t.toString(),i=n.indexOf(")")+1,r=n.indexOf("("),o=n.substring(r+1,i-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ls(o.slice(1))}),e})((t,...n)=>e(t.getApis(),t,...n),e),Bs={init:()=>Ns({readState:A("No State required")})},Ns=e=>e,Us=(e,t)=>{const n={};return le(e,(e,i)=>{le(e,(e,r)=>{const o=ve(n,r).getOr([]);n[r]=o.concat([t(i,e)])})}),n},Fs=e=>({classes:u(e.classes)?[]:e.classes,attributes:u(e.attributes)?{}:e.attributes,styles:u(e.styles)?{}:e.styles}),zs=e=>e.cHandler,Hs=(e,t)=>({name:e,handler:t}),js=(e,t)=>{const n={};return z(e,e=>{n[e.name()]=e.handlers(t)}),n},Vs=(e,t,n,i)=>{const r=((e,t,n)=>{const i={...n,...js(t,e)};return Us(i,Hs)})(e,n,i);return Qs(r,t)},Ys=e=>{const t=(e=>m(e)?{can:T,abort:S,run:e}:e)(e);return(e,n,...i)=>{const r=[e,n].concat(i);t.abort.apply(void 0,r)?n.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},Gs=(e,t,n)=>{const i=t[n];return i?((e,t,n,i)=>{try{const r=ee(n,(n,r)=>{const o=n[t],s=r[t],a=i.indexOf(o),l=i.indexOf(s);if(-1===a)throw new Error("The ordering for "+e+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(i,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+s+".\nOrder specified: "+JSON.stringify(i,null,2));return a<l?-1:l<a?1:0});return ni.value(r)}catch(e){return ni.error([e])}})("Event: "+n,"name",e,i).map(e=>{const t=F(e,e=>e.handler);return $r(t)}):((e,t)=>ni.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(F(t,e=>e.name),null,2)]))(n,e)},Qs=(e,t)=>{const n=me(e,(e,n)=>(1===e.length?ni.value(e[0].handler):Gs(e,t,n)).map(i=>{const r=Ys(i),o=e.length>1?j(t[n],t=>B(e,e=>e.name===t)).join(" > "):e[0].name;return Ur(n,((e,t)=>({handler:e,purpose:t}))(r,o))}));return zr(n,{})},$s="alloy.base.behaviour",qs=Ni([sr("dom","dom",{tag:"required",process:{}},Ni([cr("tag"),Mr("styles",{}),Mr("classes",[]),Mr("attributes",{}),yr("value"),yr("innerHtml")])),cr("components"),cr("uid"),Mr("events",{}),Mr("apis",{}),sr("eventOrder","eventOrder",(e=>Ci(A(e)))({[wo()]:["disabling",$s,"toggling","typeaheadevents"],[yo()]:[$s,"focusing","keying"],[To()]:[$s,"disabling","toggling","representing"],[lo()]:[$s,"representing","streaming","invalidating"],[Oo()]:[$s,"representing","item-events","tooltipping"],[Jr()]:["focusing",$s,"item-type-events"],[Wr()]:["focusing",$s,"item-type-events"],[io()]:["item-type-events","tooltipping"],[_o()]:["receiving","reflecting","tooltipping"]}),ji()),yr("domModification")]),Ws=e=>e.events,Ks=(e,t)=>{const n=Et(e,t);return void 0===n||""===n?[]:n.split(" ")},Zs=e=>void 0!==e.dom.classList,Xs=e=>Ks(e,"class"),Js=(e,t)=>((e,t,n)=>{const i=Ks(e,t).concat([n]);return xt(e,t,i.join(" ")),!0})(e,"class",t),ea=(e,t)=>((e,t,n)=>{const i=j(Ks(e,t),e=>e!==n);return i.length>0?xt(e,t,i.join(" ")):Tt(e,t),!1})(e,"class",t),ta=(e,t)=>{Zs(e)?e.dom.classList.add(t):Js(e,t)},na=e=>{0===(Zs(e)?e.dom.classList:Xs(e)).length&&Tt(e,"class")},ia=(e,t)=>{if(Zs(e)){e.dom.classList.remove(t)}else ea(e,t);na(e)},ra=(e,t)=>{const n=Zs(e)?e.dom.classList.toggle(t):((e,t)=>P(Xs(e),t)?ea(e,t):Js(e,t))(e,t);return na(e),n},oa=(e,t)=>Zs(e)&&e.dom.classList.contains(t),sa=(e,t)=>{z(t,t=>{ta(e,t)})},aa=(e,t)=>{z(t,t=>{ia(e,t)})},la=e=>Zs(e)?(e=>{const t=e.dom.classList,n=new Array(t.length);for(let e=0;e<t.length;e++){const i=t.item(e);null!==i&&(n[e]=i)}return n})(e):Xs(e),ca=e=>e.dom.value,da=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},ua=(e,t,n)=>{n.fold(()=>Bn(e,t),e=>{Ze(e,t)||(Rn(e,t),Fn(e))})},ha=(e,t,n)=>{const i=F(t,n),r=st(e);return z(r.slice(i.length),Fn),i},pa=(e,t,n,i)=>{const r=at(e,t),o=i(n,r),s=((e,t,n)=>at(e,t).map(e=>{if(n.exists(t=>!Ze(t,e))){const t=n.map(He).getOr("span"),i=Pe.fromTag(t);return Rn(e,i),i}return e}))(e,t,r);return ua(e,o.element,s),o},ma=(e,t)=>{const n=se(e),i=se(t),r=Z(i,n),o=((e,t)=>{const n={},i={};return he(e,t,ue(n),ue(i)),{t:n,f:i}})(e,(e,n)=>!ye(t,n)||e!==t[n]).t;return{toRemove:r,toSet:o}},fa=(e,t)=>{const{class:n,style:i,...r}=(e=>Y(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}))(t),{toSet:o,toRemove:s}=ma(e.attributes,r),a=Nt(t),{toSet:l,toRemove:c}=ma(e.styles,a),d=la(t),u=Z(d,e.classes),h=Z(e.classes,d);return z(s,e=>Tt(t,e)),Ct(t,o),sa(t,h),aa(t,u),z(c,e=>Ft(t,e)),It(t,l),e.innerHtml.fold(()=>{const n=e.domChildren;((e,t)=>{ha(e,t,(t,n)=>{const i=at(e,n);return ua(e,t,i),t})})(t,n)},e=>{hs(t,e)}),(()=>{const n=t,i=e.value.getOrUndefined();i!==ca(n)&&da(n,null!=i?i:"")})(),t},ga=(e,t)=>{const n=t.filter(t=>He(t)===e.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(e)&&!(e=>ye(e.dom,Is))(t)).bind(t=>((e,t)=>{try{const n=fa(e,t);return k.some(n)}catch(e){return k.none()}})(e,t)).getOrThunk(()=>(e=>{const t=Pe.fromTag(e.tag);Ct(t,e.attributes),sa(t,e.classes),It(t,e.styles),e.innerHtml.each(e=>hs(t,e));const n=e.domChildren;return Nn(t,n),e.value.each(e=>{da(t,e)}),t})(e));return Cs(n,e.uid),n},va=(e,t)=>((e,t)=>{const n=F(t,e=>Er(e.name(),[cr("config"),Mr("state",Bs)])),i=er("component.behaviours",Ni(n),e.behaviours).fold(t=>{throw new Error(ir(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))},_);return{list:t,data:ce(i,e=>{const t=e.map(e=>({config:e.config,state:e.state.init(e.config)}));return A(t)})}})(e,t),ya=e=>{const t=(e=>{const t=ve(e,"behaviours").getOr({});return q(se(t),e=>{const n=t[e];return p(n)?[n.me]:[]})})(e);return va(e,t)},ba=(e,t,n)=>{const i={...(r=e).dom,uid:r.uid,domChildren:F(r.components,e=>e.element)};var r;const o=(e=>e.domModification.fold(()=>Fs({}),Fs))(e),s={"alloy.base.modification":o},a=t.length>0?((e,t,n,i)=>{const r={...t};z(n,t=>{r[t.name()]=t.exhibit(e,i)});const o=Us(r,(e,t)=>({name:e,modification:t})),s=e=>V(e,(e,t)=>({...t.modification,...e}),{}),a=V(o.classes,(e,t)=>t.modification.concat(e),[]),l=s(o.attributes),c=s(o.styles);return Fs({classes:a,attributes:l,styles:c})})(n,s,t,i):o;return l=i,c=a,{...l,attributes:{...l.attributes,...c.attributes},styles:{...l.styles,...c.styles},classes:l.classes.concat(c.classes)};var l,c},Aa=(e,t)=>{const n=()=>h,i=Pr(ks),r=tr((e=>er("custom.definition",qs,e))(e)),o=ya(e),s=(e=>e.list)(o),a=(e=>e.data)(o),l=ba(r,s,a),c=ga(l,t),d=((e,t,n)=>{const i={"alloy.base.behaviour":Ws(e)};return Vs(n,e.eventOrder,t,i).getOrDie()})(r,s,a),u=Pr(r.components),h={uid:e.uid,getSystem:i.get,config:t=>{const n=a;return(m(n[t.name()])?n[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:e=>m(a[e.name()]),spec:e,readState:e=>a[e]().map(e=>e.state.readState()).getOr("not enabled"),getApis:()=>r.apis,connect:e=>{i.set(e)},disconnect:()=>{i.set(Ts(n))},element:c,syncComponents:()=>{const e=st(c),t=q(e,e=>i.get().getByDom(e).fold(()=>[],J));u.set(t)},components:u.get,events:d};return h},_a=(e,t)=>{const{events:n,...i}=Ss(e),r=((e,t)=>{const n=ve(e,"components").getOr([]);return t.fold(()=>F(n,Ma),e=>F(n,(t,n)=>Ea(t,at(e,n))))})(i,t),o={...i,events:{...vs,...n},components:r};return ni.value(Aa(o,t))},wa=e=>{const t=Pe.fromText(e);return xa({element:t})},xa=e=>{const t=nr("external.component",Bi([cr("element"),yr("uid")]),e),n=Pr(Ts()),i=t.uid.getOrThunk(()=>Ms("external"));Cs(t.element,i);const r={uid:i,getSystem:n.get,config:k.none,hasConfigured:S,connect:e=>{n.set(e)},disconnect:()=>{n.set(Ts(()=>r))},getApis:()=>({}),element:t.element,spec:e,readState:A("No state"),syncComponents:v,components:A([]),events:{}};return Rs(r)},Ca=Ms,Ea=(e,t)=>Os(e).getOrThunk(()=>{const n=(e=>ye(e,"uid"))(e)?e:{uid:Ca(""),...e};return _a(n,t).getOrDie()}),Ma=e=>Ea(e,k.none()),Sa=Rs;var Ta=(e,t,n,i,r)=>e(n,i)?k.some(n):m(r)&&r(n)?k.none():t(n,i,r);const ka=(e,t,n)=>{let i=e.dom;const r=m(n)?n:S;for(;i.parentNode;){i=i.parentNode;const e=Pe.fromDom(i);if(t(e))return k.some(e);if(r(e))break}return k.none()},La=(e,t,n)=>Ta((e,t)=>t(e),ka,e,t,n),Da=(e,t,n)=>La(e,t,n).isSome(),Ia=(e,t,n)=>ka(e,e=>We(e,t),n),Ra=(e,t)=>((e,t)=>G(e.dom.childNodes,e=>t(Pe.fromDom(e))).map(Pe.fromDom))(e,e=>We(e,t)),Oa=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return Ke(n)?k.none():k.from(n.querySelector(e)).map(Pe.fromDom)})(t,e),Pa=(e,t,n)=>Ta((e,t)=>We(e,t),Ia,e,t,n),Ba="aria-controls",Na=()=>{const e=bs(Ba);return{id:e,link:t=>{xt(t,Ba,e)},unlink:e=>{Tt(e,Ba)}}},Ua=(e,t)=>(e=>La(e,e=>{if(!Ye(e))return!1;const t=Et(e,"id");return void 0!==t&&t.indexOf(Ba)>-1}).bind(e=>{const t=Et(e,"id"),n=mt(e);return Oa(n,`[${Ba}="${t}"]`)}))(t).exists(t=>Fa(e,t)),Fa=(e,t)=>Da(t,t=>Ze(t,e.element),S)||Ua(e,t),za="unknown";var Ha;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Ha||(Ha={}));const ja=Pr({}),Va=(e,t,n)=>{switch(ve(ja.get(),e).orThunk(()=>{const t=se(ja.get());return oe(t,t=>e.indexOf(t)>-1?k.some(ja.get()[t]):k.none())}).getOr(Ha.NORMAL)){case Ha.NORMAL:return n(Qa());case Ha.LOGGING:{const i=((e,t)=>{const n=[],i=(new Date).getTime();return{logEventCut:(e,t,i)=>{n.push({outcome:"cut",target:t,purpose:i})},logEventStopped:(e,t,i)=>{n.push({outcome:"stopped",target:t,purpose:i})},logNoParent:(e,t,i)=>{n.push({outcome:"no-parent",target:t,purpose:i})},logEventNoHandlers:(e,t)=>{n.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,i)=>{n.push({outcome:"response",purpose:i,target:t})},write:()=>{const r=(new Date).getTime();P(["mousemove","mouseover","mouseout",To()],e)||console.log(e,{event:e,time:r-i,target:t.dom,sequence:F(n,e=>P(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+fs(e.target)+")":e.outcome)})}}})(e,t),r=n(i);return i.write(),r}case Ha.STOP:return!0}},Ya=["alloy/data/Fields","alloy/debugging/Debugging"],Ga=(e,t,n)=>Va(e,t,n),Qa=A({logEventCut:v,logEventStopped:v,logNoParent:v,logEventNoHandlers:v,logEventResponse:v,write:v}),$a=A([cr("menu"),cr("selectedMenu")]),qa=A([cr("item"),cr("selectedItem")]);A(Ni(qa().concat($a())));const Wa=A(Ni(qa())),Ka=fr("initSize",[cr("numColumns"),cr("numRows")]),Za=()=>fr("markers",[cr("backgroundMenu")].concat($a()).concat(qa())),Xa=e=>fr("markers",F(e,cr)),Ja=(e,t,n)=>((()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");return G(t,e=>e.indexOf("alloy")>0&&!B(Ya,t=>e.indexOf(t)>-1)).getOr(za)}})(),sr(t,t,n,Xi(e=>ni.value((...t)=>e.apply(void 0,t))))),el=e=>Ja(0,e,xi(v)),tl=e=>Ja(0,e,xi(k.none)),nl=e=>Ja(0,e,{tag:"required",process:{}}),il=e=>Ja(0,e,{tag:"required",process:{}}),rl=(e,t)=>ar(e,A(t)),ol=e=>ar(e,_),sl=A(Ka),al=(e,t,n,i,r,o,s,a=!1)=>({x:e,y:t,bubble:n,direction:i,placement:r,restriction:o,label:`${s}-${r}`,alwaysFit:a}),ll=Br([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),cl=ll.southeast,dl=ll.southwest,ul=ll.northeast,hl=ll.northwest,pl=ll.south,ml=ll.north,fl=ll.east,gl=ll.west,vl=(e,t,n,i)=>{const r=e+t;return r>i?n:r<n?i:r},yl=(e,t,n)=>Math.min(Math.max(e,t),n),bl=(e,t)=>X(["left","right","top","bottom"],n=>ve(t,n).map(t=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,t))),Al="layout",_l=e=>e.x,wl=(e,t)=>e.x+e.width/2-t.width/2,xl=(e,t)=>e.x+e.width-t.width,Cl=(e,t)=>e.y-t.height,El=e=>e.y+e.height,Ml=(e,t)=>e.y+e.height/2-t.height/2,Sl=(e,t,n)=>al(_l(e),El(e),n.southeast(),cl(),"southeast",bl(e,{left:1,top:3}),Al),Tl=(e,t,n)=>al(xl(e,t),El(e),n.southwest(),dl(),"southwest",bl(e,{right:0,top:3}),Al),kl=(e,t,n)=>al(_l(e),Cl(e,t),n.northeast(),ul(),"northeast",bl(e,{left:1,bottom:2}),Al),Ll=(e,t,n)=>al(xl(e,t),Cl(e,t),n.northwest(),hl(),"northwest",bl(e,{right:0,bottom:2}),Al),Dl=(e,t,n)=>al(wl(e,t),Cl(e,t),n.north(),ml(),"north",bl(e,{bottom:2}),Al),Il=(e,t,n)=>al(wl(e,t),El(e),n.south(),pl(),"south",bl(e,{top:3}),Al),Rl=(e,t,n)=>al((e=>e.x+e.width)(e),Ml(e,t),n.east(),fl(),"east",bl(e,{left:0}),Al),Ol=(e,t,n)=>al(((e,t)=>e.x-t.width)(e,t),Ml(e,t),n.west(),gl(),"west",bl(e,{right:1}),Al),Pl=()=>[Sl,Tl,kl,Ll,Il,Dl,Rl,Ol],Bl=()=>[Tl,Sl,Ll,kl,Il,Dl,Rl,Ol],Nl=()=>[kl,Ll,Sl,Tl,Dl,Il],Ul=()=>[Ll,kl,Tl,Sl,Dl,Il],Fl=()=>[Sl,Tl,kl,Ll,Il,Dl],zl=()=>[Tl,Sl,Ll,kl,Il,Dl];var Hl=Object.freeze({__proto__:null,events:e=>Ko([Jo(_o(),(t,n)=>{const i=e.channels,r=se(i),o=n,s=((e,t)=>t.universal?e:j(e,e=>P(t.channels,e)))(r,o);z(s,e=>{const n=i[e],r=n.schema,s=nr("channel["+e+"] data\nReceiver: "+fs(t.element),r,o.data);n.onReceive(t,s)})})])}),jl=[dr("channels",Ji(ni.value,Bi([nl("onReceive"),Mr("schema",ji())])))];const Vl=(e,t,n)=>cs((i,r)=>{n(i,e,t)}),Yl=(e,t,n)=>((e,t,n)=>{const i=n.toString(),r=i.indexOf(")")+1,o=i.indexOf("("),s=i.substring(o+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:Ls(s.slice(0,1).concat(s.slice(3)))}),e})((i,...r)=>{const o=[i].concat(r);return i.config({name:A(e)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)},e=>{const n=Array.prototype.slice.call(o,1);return t.apply(void 0,[i,e.config,e.state].concat(n))})},n,t),Gl=e=>({key:e,value:void 0}),Ql=(e,t,n,i,r,o,s)=>{const a=e=>be(e,n)?e[n]():k.none(),l=ce(r,(e,t)=>Yl(n,e,t)),c={...ce(o,(e,t)=>Ds(e,t)),...l,revoke:x(Gl,n),config:t=>{const i=nr(n+"-config",e,t);return{key:n,value:{config:i,me:c,configAsRaw:Jt(()=>nr(n+"-config",e,t)),initialConfig:t,state:s}}},schema:A(t),exhibit:(e,t)=>we(a(e),ve(i,"exhibit"),(e,n)=>n(t,e.config,e.state)).getOrThunk(()=>Fs({})),name:A(n),handlers:e=>a(e).map(e=>ve(i,"events").getOr(()=>({}))(e.config,e.state)).getOr({})};return c},$l=e=>Fr(e),ql=Bi([cr("fields"),cr("name"),Mr("active",{}),Mr("apis",{}),Mr("state",Bs),Mr("extra",{})]),Wl=e=>{const t=nr("Creating behaviour: "+e.name,ql,e);return((e,t,n,i,r,o)=>{const s=Bi(e),a=Er(t,[(l="config",c=e,br(l,Bi(c)))]);var l,c;return Ql(s,a,t,n,i,r,o)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Kl=Bi([cr("branchKey"),cr("branches"),cr("name"),Mr("active",{}),Mr("apis",{}),Mr("state",Bs),Mr("extra",{})]),Zl=e=>{const t=nr("Creating behaviour: "+e.name,Kl,e);return((e,t,n,i,r,o)=>{const s=e,a=Er(t,[br("config",e)]);return Ql(s,a,t,n,i,r,o)})(rr(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Xl=A(void 0),Jl=Wl({fields:jl,name:"receiving",active:Hl});var ec=Object.freeze({__proto__:null,exhibit:(e,t)=>Fs({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const tc=(e,t=!1)=>e.dom.focus({preventScroll:t}),nc=e=>e.dom.blur(),ic=e=>{const t=mt(e).dom;return e.dom===t.activeElement},rc=(e=Yn())=>k.from(e.dom.activeElement).map(Pe.fromDom),oc=e=>rc(mt(e)).filter(t=>e.dom.contains(t.dom)),sc=(e,t)=>{const n=mt(t),i=rc(n).bind(e=>{const n=t=>Ze(e,t);return n(t)?k.some(t):((e,t)=>{const n=e=>{for(let i=0;i<e.childNodes.length;i++){const r=Pe.fromDom(e.childNodes[i]);if(t(r))return k.some(r);const o=n(e.childNodes[i]);if(o.isSome())return o}return k.none()};return n(e.dom)})(t,n)}),r=e(t);return i.each(e=>{rc(n).filter(t=>Ze(t,e)).fold(()=>{tc(e)},v)}),r},ac=(e,t,n,i,r)=>{const o=e=>e+"px";return{position:e,left:t.map(o),top:n.map(o),right:i.map(o),bottom:r.map(o)}},lc=(e,t)=>{Rt(e,(e=>({...e,position:k.some(e.position)}))(t))},cc=Br([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),dc=(e,t,n,i,r,o)=>{const s=t.rect,a=s.x-n,l=s.y-i,c=r-(a+s.width),d=o-(l+s.height),u=k.some(a),h=k.some(l),p=k.some(c),m=k.some(d),f=k.none();return((e,t,n,i,r,o,s,a,l)=>e.fold(t,n,i,r,o,s,a,l))(t.direction,()=>ac(e,u,h,f,f),()=>ac(e,f,h,p,f),()=>ac(e,u,f,f,m),()=>ac(e,f,f,p,m),()=>ac(e,u,h,f,f),()=>ac(e,u,f,f,m),()=>ac(e,u,h,f,f),()=>ac(e,f,h,p,f))},uc=(e,t)=>e.fold(()=>{const e=t.rect;return ac("absolute",k.some(e.x),k.some(e.y),k.none(),k.none())},(e,n,i,r)=>dc("absolute",t,e,n,i,r),(e,n,i,r)=>dc("fixed",t,e,n,i,r)),hc=(e,t)=>{const n=x($n,t),i=e.fold(n,n,()=>{const e=zn();return $n(t).translate(-e.left,-e.top)}),r=Xt(t),o=Yt(t);return qn(i.left,i.top,r,o)},pc=(e,t)=>t.fold(()=>e.fold(Xn,Xn,qn),t=>e.fold(A(t),A(t),()=>{const n=mc(e,t.x,t.y);return qn(n.left,n.top,t.width,t.height)})),mc=(e,t,n)=>{const i=Qt(t,n);return e.fold(A(i),A(i),()=>{const e=zn();return i.translate(-e.left,-e.top)})};cc.none;const fc=cc.relative,gc=cc.fixed,vc=(e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t),yc="data-alloy-placement",bc=e=>Mt(e,yc),Ac=Br([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),_c=(e,t,n,i)=>{const r=e.bubble,o=r.offset,s=((e,t,n)=>{const i=(i,r)=>t[i].map(t=>{const o="top"===i||"bottom"===i,s=o?n.top:n.left,a=("left"===i||"top"===i?Math.max:Math.min)(t,r)+s;return o?yl(a,e.y,e.bottom):yl(a,e.x,e.right)}).getOr(r),r=i("left",e.x),o=i("top",e.y),s=i("right",e.right),a=i("bottom",e.bottom);return qn(r,o,s-r,a-o)})(i,e.restriction,o),a=e.x+o.left,l=e.y+o.top,c=qn(a,l,t,n),{originInBounds:d,sizeInBounds:u,visibleW:h,visibleH:p}=((e,t)=>{const{x:n,y:i,right:r,bottom:o}=t,{x:s,y:a,right:l,bottom:c,width:d,height:u}=e;return{originInBounds:s>=n&&s<=r&&a>=i&&a<=o,sizeInBounds:l<=r&&l>=n&&c<=o&&c>=i,visibleW:Math.min(d,s>=n?r-s:l-n),visibleH:Math.min(u,a>=i?o-a:c-i)}})(c,s),m=d&&u,f=m?c:((e,t)=>{const{x:n,y:i,right:r,bottom:o}=t,{x:s,y:a,width:l,height:c}=e,d=Math.max(n,r-l),u=Math.max(i,o-c),h=yl(s,n,d),p=yl(a,i,u),m=Math.min(h+l,r)-h,f=Math.min(p+c,o)-p;return qn(h,p,m,f)})(c,s),g=f.width>0&&f.height>0,{maxWidth:v,maxHeight:y}=((e,t,n)=>{const i=A(t.bottom-n.y),r=A(n.bottom-t.y),o=((e,t,n,i)=>e.fold(t,t,i,i,t,i,n,n))(e,r,r,i),s=A(t.right-n.x),a=A(n.right-t.x),l=((e,t,n,i)=>e.fold(t,i,t,i,n,n,t,i))(e,a,a,s);return{maxWidth:l,maxHeight:o}})(e.direction,f,i),b={rect:f,maxHeight:y,maxWidth:v,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:l};return m||e.alwaysFit?Ac.fit(b):Ac.nofit(b,h,p,g)},wc=e=>{const t=Pr(k.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(k.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(k.some(e))}}},xc=()=>wc(e=>e.unbind()),Cc=()=>{const e=wc(v);return{...e,on:t=>e.get().each(t)}},Ec=T,Mc=(e,t,n)=>((e,t,n,i)=>Dn(e,t,n,i,!1))(e,t,Ec,n),Sc=(e,t,n)=>((e,t,n,i)=>Dn(e,t,n,i,!0))(e,t,Ec,n),Tc=Ln,kc=["top","bottom","right","left"],Lc="data-alloy-transition-timer",Dc=(e,t)=>((e,t)=>W(t,t=>oa(e,t)))(e,t.classes),Ic=(e,t)=>{const n=e=>parseFloat(e).toFixed(3);return fe(t,(t,i)=>!((e,t,n=w)=>we(e,t,n).getOr(e.isNone()&&t.isNone()))(e[i].map(n),t.map(n))).isSome()},Rc=(e,t)=>{const n=xc(),i=xc();let r;const s=t=>{var n;const i=null!==(n=t.raw.pseudoElement)&&void 0!==n?n:"";return Ze(t.target,e)&&Ie(i)&&P(kc,t.raw.propertyName)},a=o=>{if(h(o)||s(o)){n.clear(),i.clear();const s=null==o?void 0:o.raw.type;(h(s)||s===po())&&(clearTimeout(r),Tt(e,Lc),aa(e,t.classes))}},l=Mc(e,mo(),t=>{s(t)&&(l.unbind(),n.set(Mc(e,po(),a)),i.set(Mc(e,ho(),a)))}),c=(e=>{const t=t=>{const n=Ot(e,t).split(/\s*,\s*/);return j(n,De)},n=e=>{if(o(e)&&/^[\d.]+/.test(e)){const t=parseFloat(e);return ke(e,"ms")?t:1e3*t}return 0},i=t("transition-delay"),r=t("transition-duration");return Y(r,(e,t,r)=>{const o=n(i[r])+n(t);return Math.max(e,o)},0)})(e);requestAnimationFrame(()=>{r=setTimeout(a,c+17),xt(e,Lc,r)})},Oc=(e,t,n,i,r,o)=>{const s=((e,t,n)=>n.exists(n=>{const i=e.mode;return"all"===i||n[i]!==t[i]}))(i,r,o);if(s||Dc(e,i)){Dt(e,"position",n.position);const o=hc(t,e),a=uc(t,{...r,rect:o}),l=X(kc,e=>a[e]);Ic(n,l)&&(Rt(e,l),s&&((e,t)=>{sa(e,t.classes),Mt(e,Lc).each(t=>{clearTimeout(parseInt(t,10)),Tt(e,Lc)}),Rc(e,t)})(e,i),zt(e))}else aa(e,i.classes)},Pc=(e,t,n,i)=>{Ft(t,"max-height"),Ft(t,"max-width");const r={width:Xt(o=t),height:Yt(o)};var o;return((e,t,n,i,r,o)=>{const s=i.width,a=i.height,l=(t,l,c,d,u)=>{const h=t(n,i,r,e,o),p=_c(h,s,a,o);return p.fold(A(p),(e,t,n,i)=>(u===i?n>d||t>c:!u&&i)?p:Ac.nofit(l,c,d,u))},c=Y(t,(e,t)=>{const n=x(l,t);return e.fold(A(e),n)},Ac.nofit({rect:n,maxHeight:i.height,maxWidth:i.width,direction:cl(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return c.fold(_,_)})(t,i.preference,e,r,n,i.bounds)},Bc=(e,t)=>{((e,t)=>{xt(e,yc,t)})(e,t.placement)},Nc=(e,t)=>{((e,t)=>{const n=jt.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Dt(e,"max-height",n+"px")})(e,Math.floor(t))},Uc=A((e,t)=>{Nc(e,t),It(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Fc=A((e,t)=>{Nc(e,t)}),zc=(e,t,n)=>void 0===e[t]?n:e[t],Hc=(e,t,n,i)=>{const r=Pc(e,t,n,i);return((e,t,n)=>{const i=uc(n.origin,t);n.transition.each(r=>{Oc(e,n.origin,i,r,t,n.lastPlacement)}),lc(e,i)})(t,r,i),Bc(t,r),((e,t)=>{const n=t.classes;aa(e,n.off),sa(e,n.on)})(t,r),((e,t,n)=>{(0,n.maxHeightFunction)(e,t.maxHeight)})(t,r,i),((e,t,n)=>{(0,n.maxWidthFunction)(e,t.maxWidth)})(t,r,i),{layout:r.layout,placement:r.placement}},jc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Vc=(e,t,n,i=1)=>{const r=e*i,o=t*i,s=e=>ve(n,e).getOr([]),a=(e,t,n)=>{const i=Z(jc,n);return{offset:Qt(e,t),classesOn:q(n,s),classesOff:q(i,s)}};return{southeast:()=>a(-e,t,["top","alignLeft"]),southwest:()=>a(e,t,["top","alignRight"]),south:()=>a(-e/2,t,["top","alignCentre"]),northeast:()=>a(-e,-t,["bottom","alignLeft"]),northwest:()=>a(e,-t,["bottom","alignRight"]),north:()=>a(-e/2,-t,["bottom","alignCentre"]),east:()=>a(e,-t/2,["valignCentre","left"]),west:()=>a(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>a(r,o,["top","alignLeft","inset"]),insetNorthwest:()=>a(-r,o,["top","alignRight","inset"]),insetNorth:()=>a(-r/2,o,["top","alignCentre","inset"]),insetSoutheast:()=>a(r,-o,["bottom","alignLeft","inset"]),insetSouthwest:()=>a(-r,-o,["bottom","alignRight","inset"]),insetSouth:()=>a(-r/2,-o,["bottom","alignCentre","inset"]),insetEast:()=>a(-r,-o/2,["valignCentre","right","inset"]),insetWest:()=>a(r,-o/2,["valignCentre","left","inset"])}},Yc=()=>Vc(0,0,{}),Gc=_,Qc=(e,t)=>n=>"rtl"===$c(n)?t:e,$c=e=>"rtl"===Ot(e,"direction")?"rtl":"ltr";var qc;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(qc||(qc={}));const Wc="data-alloy-vertical-dir",Kc=e=>Da(e,e=>Ye(e)&&Et(e,"data-alloy-vertical-dir")===qc.BottomToTop),Zc=()=>Er("layouts",[cr("onLtr"),cr("onRtl"),yr("onBottomLtr"),yr("onBottomRtl")]),Xc=(e,t,n,i,r,o,s)=>{const a=s.map(Kc).getOr(!1),l=t.layouts.map(t=>t.onLtr(e)),c=t.layouts.map(t=>t.onRtl(e)),d=a?t.layouts.bind(t=>t.onBottomLtr.map(t=>t(e))).or(l).getOr(r):l.getOr(n),u=a?t.layouts.bind(t=>t.onBottomRtl.map(t=>t(e))).or(c).getOr(o):c.getOr(i);return Qc(d,u)(e)};var Jc=[cr("hotspot"),yr("bubble"),Mr("overrides",{}),Zc(),rl("placement",(e,t,n)=>{const i=t.hotspot,r=hc(n,i.element),o=Xc(e.element,t,Fl(),zl(),Nl(),Ul(),k.some(t.hotspot.element));return k.some(Gc({anchorBox:r,bubble:t.bubble.getOr(Yc()),overrides:t.overrides,layouts:o}))})];var ed=[cr("x"),cr("y"),Mr("height",0),Mr("width",0),Mr("bubble",Yc()),Mr("overrides",{}),Zc(),rl("placement",(e,t,n)=>{const i=mc(n,t.x,t.y),r=qn(i.left,i.top,t.width,t.height),o=Xc(e.element,t,Pl(),Bl(),Pl(),Bl(),k.none());return k.some(Gc({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:o}))})];const td=Br([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),nd=e=>e.fold(_,(e,t,n)=>e.translate(-t,-n)),id=e=>e.fold(_,_),rd=e=>Y(e,(e,t)=>e.translate(t.left,t.top),Qt(0,0)),od=e=>{const t=F(e,id);return rd(t)},sd=td.screen,ad=td.absolute,ld=(e,t,n)=>{const i=Je(e.element),r=zn(i),o=((e,t,n)=>{const i=nt(n.root).dom;return k.from(i.frameElement).map(Pe.fromDom).filter(t=>{const n=Je(t),i=Je(e.element);return Ze(n,i)}).map(qt)})(e,0,n).getOr(r);return ad(o,r.left,r.top)},cd=(e,t,n,i)=>{const r=sd(Qt(e,t));return k.some(((e,t,n)=>({point:e,width:t,height:n}))(r,n,i))},dd=(e,t,n,i,r)=>e.map(e=>{const o=[t,e.point],s=(a=()=>od(o),l=()=>od(o),c=()=>(e=>{const t=F(e,nd);return rd(t)})(o),i.fold(a,l,c));var a,l,c;const d=((e,t,n,i)=>({x:e,y:t,width:n,height:i}))(s.left,s.top,e.width,e.height),u=n.showAbove?Nl():Fl(),h=n.showAbove?Ul():zl(),p=Xc(r,n,u,h,u,h,k.none());return Gc({anchorBox:d,bubble:n.bubble.getOr(Yc()),overrides:n.overrides,layouts:p})});var ud=[cr("node"),cr("root"),yr("bubble"),Zc(),Mr("overrides",{}),Mr("showAbove",!1),rl("placement",(e,t,n)=>{const i=ld(e,0,t);return t.node.filter(bt).bind(r=>{const o=r.dom.getBoundingClientRect(),s=cd(o.left,o.top,o.width,o.height),a=t.node.getOr(e.element);return dd(s,i,t,n,a)})})];const hd=(e,t,n,i)=>({start:e,soffset:t,finish:n,foffset:i}),pd=Br([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),md=(pd.before,pd.on,pd.after,e=>e.fold(_,_,_)),fd=Br([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),gd={domRange:fd.domRange,relative:fd.relative,exact:fd.exact,exactFromRange:e=>fd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Pe.fromDom(e.startContainer),relative:(e,t)=>md(e),exact:(e,t,n,i)=>e}))(e);return nt(t)},range:hd},vd=(e,t,n)=>{const i=e.document.createRange();var r;return r=i,t.fold(e=>{r.setStartBefore(e.dom)},(e,t)=>{r.setStart(e.dom,t)},e=>{r.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})})(i,n),i},yd=(e,t,n,i,r)=>{const o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(i.dom,r),o},bd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Ad=Br([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),_d=(e,t,n)=>t(Pe.fromDom(n.startContainer),n.startOffset,Pe.fromDom(n.endContainer),n.endOffset),wd=(e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:A(e),rtl:k.none}),relative:(t,n)=>({ltr:Jt(()=>vd(e,t,n)),rtl:Jt(()=>k.some(vd(e,n,t)))}),exact:(t,n,i,r)=>({ltr:Jt(()=>yd(e,t,n,i,r)),rtl:Jt(()=>k.some(yd(e,i,r,t,n)))})}))(e,t);return((e,t)=>{const n=t.ltr();if(n.collapsed)return t.rtl().filter(e=>!1===e.collapsed).map(e=>Ad.rtl(Pe.fromDom(e.endContainer),e.endOffset,Pe.fromDom(e.startContainer),e.startOffset)).getOrThunk(()=>_d(0,Ad.ltr,n));return _d(0,Ad.ltr,n)})(0,n)},xd=(e,t)=>wd(e,t).match({ltr:(t,n,i,r)=>{const o=e.document.createRange();return o.setStart(t.dom,n),o.setEnd(i.dom,r),o},rtl:(t,n,i,r)=>{const o=e.document.createRange();return o.setStart(i.dom,r),o.setEnd(t.dom,n),o}});Ad.ltr,Ad.rtl;const Cd=(e,t,n)=>j(((e,t)=>{const n=m(t)?t:S;let i=e.dom;const r=[];for(;null!==i.parentNode&&void 0!==i.parentNode;){const e=i.parentNode,t=Pe.fromDom(e);if(r.push(t),!0===n(t))break;i=e}return r})(e,n),t),Ed=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return Ke(n)?[]:F(n.querySelectorAll(e),Pe.fromDom)})(t,e),Md=(e,t,n,i)=>{const r=((e,t,n,i)=>{const r=Je(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(n.dom,i),r})(e,t,n,i),o=Ze(e,n)&&t===i;return r.collapsed&&!o},Sd=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return k.some(hd(Pe.fromDom(t.startContainer),t.startOffset,Pe.fromDom(n.endContainer),n.endOffset))}return k.none()},Td=e=>{if(null===e.anchorNode||null===e.focusNode)return Sd(e);{const t=Pe.fromDom(e.anchorNode),n=Pe.fromDom(e.focusNode);return Md(t,e.anchorOffset,n,e.focusOffset)?k.some(hd(t,e.anchorOffset,n,e.focusOffset)):Sd(e)}},kd=e=>(e=>k.from(e.getSelection()))(e).filter(e=>e.rangeCount>0).bind(Td),Ld=(e,t)=>(e=>{const t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?k.some(n).map(bd):k.none()})(xd(e,t)),Dd=(e,t)=>(e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?k.some(t).map(bd):k.none()})(xd(e,t)),Id=((e,t)=>{const n=t=>e(t)?k.from(t.dom.nodeValue):k.none();return{get:i=>{if(!e(i))throw new Error("Can only get "+t+" value of a "+t+" node");return n(i).getOr("")},getOption:n,set:(n,i)=>{if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=i}}})(Ge,"text"),Rd=(e,t)=>({element:e,offset:t}),Od=(e,t)=>{const n=st(e);if(0===n.length)return Rd(e,t);if(t<n.length)return Rd(n[t],0);{const e=n[n.length-1],t=Ge(e)?(e=>Id.get(e))(e).length:st(e).length;return Rd(e,t)}},Pd=(e,t)=>Ge(e)?Rd(e,t):Od(e,t),Bd=e=>void 0!==e.foffset,Nd=(e,t)=>t.getSelection.getOrThunk(()=>()=>kd(e))().map(e=>{if(Bd(e)){const t=Pd(e.start,e.soffset),n=Pd(e.finish,e.foffset);return gd.range(t.element,t.offset,n.element,n.offset)}return e});var Ud=[yr("getSelection"),cr("root"),yr("bubble"),Zc(),Mr("overrides",{}),Mr("showAbove",!1),rl("placement",(e,t,n)=>{const i=nt(t.root).dom,r=ld(e,0,t),o=Nd(i,t).bind(e=>{if(Bd(e)){const t=Dd(i,gd.exactFromRange(e)).orThunk(()=>{const t=Pe.fromText("\ufeff");Rn(e.start,t);const n=Ld(i,gd.exact(t,0,t,1));return Fn(t),n});return t.bind(e=>cd(e.left,e.top,e.width,e.height))}{const t=ce(e,e=>e.dom.getBoundingClientRect()),n={left:Math.min(t.firstCell.left,t.lastCell.left),right:Math.max(t.firstCell.right,t.lastCell.right),top:Math.min(t.firstCell.top,t.lastCell.top),bottom:Math.max(t.firstCell.bottom,t.lastCell.bottom)};return cd(n.left,n.top,n.right-n.left,n.bottom-n.top)}}),s=Nd(i,t).bind(e=>Bd(e)?Ye(e.start)?k.some(e.start):rt(e.start):k.some(e.firstCell)).getOr(e.element);return dd(o,r,t,n,s)})];const Fd="link-layout",zd=e=>e.x+e.width,Hd=(e,t)=>e.x-t.width,jd=(e,t)=>e.y-t.height+e.height,Vd=e=>e.y,Yd=(e,t,n)=>al(zd(e),Vd(e),n.southeast(),cl(),"southeast",bl(e,{left:0,top:2}),Fd),Gd=(e,t,n)=>al(Hd(e,t),Vd(e),n.southwest(),dl(),"southwest",bl(e,{right:1,top:2}),Fd),Qd=(e,t,n)=>al(zd(e),jd(e,t),n.northeast(),ul(),"northeast",bl(e,{left:0,bottom:3}),Fd),$d=(e,t,n)=>al(Hd(e,t),jd(e,t),n.northwest(),hl(),"northwest",bl(e,{right:1,bottom:3}),Fd),qd=()=>[Yd,Gd,Qd,$d],Wd=()=>[Gd,Yd,$d,Qd];var Kd=[cr("item"),Zc(),Mr("overrides",{}),rl("placement",(e,t,n)=>{const i=hc(n,t.item.element),r=Xc(e.element,t,qd(),Wd(),qd(),Wd(),k.none());return k.some(Gc({anchorBox:i,bubble:Yc(),overrides:t.overrides,layouts:r}))})],Zd=rr("type",{selection:Ud,node:ud,hotspot:Jc,submenu:Kd,makeshift:ed});const Xd=[vr("classes",Gi),Lr("mode","all",["all","layout","placement"])],Jd=[Mr("useFixed",S),yr("getBounds")],eu=[dr("anchor",Zd),Er("transition",Xd)],tu=(e,t,n,i,r,o)=>((e,t,n,i,r,o,s,a)=>{const l=zc(s,"maxHeightFunction",Uc()),c=zc(s,"maxWidthFunction",v),d=e.anchorBox,u=e.origin,h={bounds:pc(u,o),origin:u,preference:i,maxHeightFunction:l,maxWidthFunction:c,lastPlacement:r,transition:a};return Hc(d,t,n,h)})(vc(t.anchorBox,e),i.element,t.bubble,t.layouts,r,n,t.overrides,o),nu=(e,t,n,i,r,o)=>{const s=nr("placement.info",Ni(eu),r),a=s.anchor,l=i.element,c=n.get(i.uid);sc(()=>{Dt(l,"position","fixed");const r=Bt(l,"visibility");Dt(l,"visibility","hidden");const d=t.useFixed()?(()=>{const e=document.documentElement;return gc(0,0,e.clientWidth,e.clientHeight)})():(e=>{const t=qt(e.element),n=e.element.dom.getBoundingClientRect();return fc(t.left,t.top,n.width,n.height)})(e);a.placement(e,a,d).each(e=>{const r=o.orThunk(()=>t.getBounds.map(M)),a=tu(d,e,r,i,c,s.transition);n.set(i.uid,a)}),r.fold(()=>{Ft(l,"visibility")},e=>{Dt(l,"visibility",e)}),Bt(l,"left").isNone()&&Bt(l,"top").isNone()&&Bt(l,"right").isNone()&&Bt(l,"bottom").isNone()&&Ae(Bt(l,"position"),"fixed")&&Ft(l,"position")},l)};var iu=Object.freeze({__proto__:null,position:(e,t,n,i,r)=>{const o=k.none();nu(e,t,n,i,r,o)},positionWithinBounds:nu,getMode:(e,t,n)=>t.useFixed()?"fixed":"absolute",reset:(e,t,n,i)=>{const r=i.element;z(["position","left","right","top","bottom"],e=>Ft(r,e)),(e=>{Tt(e,yc)})(r),n.clear(i.uid)}});const ru=Wl({fields:Jd,name:"positioning",active:ec,apis:iu,state:Object.freeze({__proto__:null,init:()=>{let e={};return Ns({readState:()=>e,clear:t=>{p(t)?delete e[t]:e={}},set:(t,n)=>{e[t]=n},get:t=>ve(e,t)})}})}),ou=e=>e.getSystem().isConnected(),su=e=>{Yo(e,Oo());const t=e.components();z(t,su)},au=e=>{const t=e.components();z(t,au),Yo(e,Ro())},lu=(e,t)=>{e.getSystem().addToWorld(t),bt(e.element)&&au(t)},cu=e=>{su(e),e.getSystem().removeFromWorld(e)},du=(e,t)=>{Bn(e.element,t.element)},uu=(e,t,n)=>{const i=e.components();(e=>{z(e.components(),e=>Fn(e.element)),Un(e.element),e.syncComponents()})(e);const r=n(t),o=Z(i,r);z(o,t=>{su(t),e.getSystem().removeFromWorld(t)}),z(r,t=>{ou(t)?du(e,t):(e.getSystem().addToWorld(t),du(e,t),bt(e.element)&&au(t))}),e.syncComponents()},hu=(e,t)=>{pu(e,t,Bn)},pu=(e,t,n)=>{e.getSystem().addToWorld(t),n(e.element,t.element),bt(e.element)&&au(t),e.syncComponents()},mu=e=>{su(e),Fn(e.element),e.getSystem().removeFromWorld(e)},fu=e=>{const t=it(e.element).bind(t=>e.getSystem().getByDom(t).toOptional());mu(e),t.each(e=>{e.syncComponents()})},gu=e=>{const t=e.components();z(t,mu),Un(e.element),e.syncComponents()},vu=(e,t)=>{bu(e,t,Bn)},yu=(e,t)=>{bu(e,t,On)},bu=(e,t,n)=>{n(e,t.element);const i=st(t.element);z(i,e=>{t.getByDom(e).each(au)})},Au=e=>{const t=st(e.element);z(t,t=>{e.getByDom(t).each(su)}),Fn(e.element)},_u=(e,t,n,i)=>{n.get().each(t=>{gu(e)});const r=t.getAttachPoint(e);hu(r,e);const o=e.getSystem().build(i);return hu(e,o),n.set(o),o},wu=(e,t,n,i)=>{const r=_u(e,t,n,i);return t.onOpen(e,r),r},xu=(e,t,n)=>{n.get().each(i=>{gu(e),fu(e),t.onClose(e,i),n.clear()})},Cu=(e,t,n)=>n.isOpen(),Eu=(e,t,n)=>{const i=t.getAttachPoint(e);Dt(e.element,"position",ru.getMode(i)),((e,t,n,i)=>{Bt(e.element,t).fold(()=>{Tt(e.element,n)},t=>{xt(e.element,n,t)}),Dt(e.element,t,i)})(e,"visibility",t.cloakVisibilityAttr,"hidden")},Mu=(e,t,n)=>{(e=>B(["top","left","right","bottom"],t=>Bt(e,t).isSome()))(e.element)||Ft(e.element,"position"),((e,t,n)=>{Mt(e.element,n).fold(()=>Ft(e.element,t),n=>Dt(e.element,t,n))})(e,"visibility",t.cloakVisibilityAttr)};var Su=Object.freeze({__proto__:null,cloak:Eu,decloak:Mu,open:wu,openWhileCloaked:(e,t,n,i,r)=>{Eu(e,t),wu(e,t,n,i),r(),Mu(e,t)},close:xu,isOpen:Cu,isPartOf:(e,t,n,i)=>Cu(0,0,n)&&n.get().exists(n=>t.isPartOf(e,n,i)),getState:(e,t,n)=>n.get(),setContent:(e,t,n,i)=>n.get().map(()=>_u(e,t,n,i))});var Tu=Object.freeze({__proto__:null,events:(e,t)=>Ko([Jo(Mo(),(n,i)=>{xu(n,e,t)})])}),ku=[el("onOpen"),el("onClose"),cr("isPartOf"),cr("getAttachPoint"),Mr("cloakVisibilityAttr","data-precloak-visibility")];var Lu=Object.freeze({__proto__:null,init:()=>{const e=Cc(),t=A("not-implemented");return Ns({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const Du=Wl({fields:ku,name:"sandboxing",active:Tu,apis:Su,state:Lu}),Iu=A("dismiss.popups"),Ru=A("reposition.popups"),Ou=A("mouse.released"),Pu=Bi([Mr("isExtraPart",S),Er("fireEventInstead",[Mr("event",Po())])]),Bu=e=>{const t=nr("Dismissal",Pu,e);return{[Iu()]:{schema:Bi([cr("target")]),onReceive:(e,n)=>{if(Du.isOpen(e)){Du.isPartOf(e,n.target)||t.isExtraPart(e,n.target)||t.fireEventInstead.fold(()=>Du.close(e),t=>Yo(e,t.event))}}}}},Nu=Bi([Er("fireEventInstead",[Mr("event",Bo())]),mr("doReposition")]),Uu=e=>{const t=nr("Reposition",Nu,e);return{[Ru()]:{onReceive:e=>{Du.isOpen(e)&&t.fireEventInstead.fold(()=>t.doReposition(e),t=>Yo(e,t.event))}}}},Fu=(e,t,n)=>{t.store.manager.onLoad(e,t,n)},zu=(e,t,n)=>{t.store.manager.onUnload(e,t,n)};var Hu=Object.freeze({__proto__:null,onLoad:Fu,onUnload:zu,setValue:(e,t,n,i)=>{t.store.manager.setValue(e,t,n,i)},getValue:(e,t,n)=>t.store.manager.getValue(e,t,n),getState:(e,t,n)=>n});var ju=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.resetOnDom?[as((n,i)=>{Fu(n,e,t)}),ls((n,i)=>{zu(n,e,t)})]:[Vl(e,t,Fu)];return Ko(n)}});const Vu=()=>{const e=Pr(null);return Ns({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},Yu=()=>{const e=Pr({}),t=Pr({});return Ns({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:n=>ve(e.get(),n).orThunk(()=>ve(t.get(),n)),update:n=>{const i=e.get(),r=t.get(),o={},s={};z(n,e=>{o[e.value]=e,ve(e,"meta").each(t=>{ve(t,"text").each(t=>{s[t]=e})})}),e.set({...i,...o}),t.set({...r,...s})},clear:()=>{e.set({}),t.set({})}})};var Gu=Object.freeze({__proto__:null,memory:Vu,dataset:Yu,manual:()=>Ns({readState:v}),init:e=>e.store.manager.state(e)});const Qu=(e,t,n,i)=>{const r=t.store;n.update([i]),r.setValue(e,i),t.onSetValue(e,i)};var $u=[yr("initialValue"),cr("getFallbackEntry"),cr("getDataKey"),cr("setValue"),rl("manager",{setValue:Qu,getValue:(e,t,n)=>{const i=t.store,r=i.getDataKey(e);return n.lookup(r).getOrThunk(()=>i.getFallbackEntry(r))},onLoad:(e,t,n)=>{t.store.initialValue.each(i=>{Qu(e,t,n,i)})},onUnload:(e,t,n)=>{n.clear()},state:Yu})];var qu=[cr("getValue"),Mr("setValue",v),yr("initialValue"),rl("manager",{setValue:(e,t,n,i)=>{t.store.setValue(e,i),t.onSetValue(e,i)},getValue:(e,t,n)=>t.store.getValue(e),onLoad:(e,t,n)=>{t.store.initialValue.each(n=>{t.store.setValue(e,n)})},onUnload:v,state:Bs.init})];var Wu=[yr("initialValue"),rl("manager",{setValue:(e,t,n,i)=>{n.set(i),t.onSetValue(e,i)},getValue:(e,t,n)=>n.get(),onLoad:(e,t,n)=>{t.store.initialValue.each(e=>{n.isNotSet()&&n.set(e)})},onUnload:(e,t,n)=>{n.clear()},state:Vu})],Ku=[Sr("store",{mode:"memory"},rr("mode",{memory:Wu,manual:qu,dataset:$u})),el("onSetValue"),Mr("resetOnDom",!1)];const Zu=Wl({fields:Ku,name:"representing",active:ju,apis:Hu,extra:{setValueFrom:(e,t)=>{const n=Zu.getValue(t);Zu.setValue(e,n)}},state:Gu}),Xu=(e,t)=>Or(e,{},F(t,t=>{return n=t.name(),i="Cannot configure "+t.name()+" for "+e,sr(n,n,{tag:"option",process:{}},ki(e=>ui("The field: "+n+" is forbidden. "+i)));var n,i}).concat([ar("dump",_)])),Ju=e=>e.dump,eh=(e,t)=>({...$l(t),...e.dump}),th=Xu,nh=eh,ih="placeholder",rh=Br([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),oh=e=>ye(e,"uiType"),sh=(e,t,n,i)=>oh(n)&&n.uiType===ih?((e,t,n,i)=>e.exists(e=>e!==n.owner)?rh.single(!0,A(n)):ve(i,n.name).fold(()=>{throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+se(i)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))},e=>e.replace()))(e,0,n,i):rh.single(!1,A(n)),ah=(e,t,n,i)=>sh(e,0,n,i).fold((r,o)=>{const s=oh(n)?o(t,n.config,n.validated):o(t),a=ve(s,"components").getOr([]),l=q(a,n=>ah(e,t,n,i));return[{...s,components:l}]},(e,i)=>{if(oh(n)){const e=i(t,n.config,n.validated);return n.validated.preprocess.getOr(_)(e)}return i(t)}),lh=(e,t,n,i)=>{const r=ce(i,(e,t)=>((e,t)=>{let n=!1;return{name:A(e),required:()=>t.fold((e,t)=>e,(e,t)=>e),used:()=>n,replace:()=>{if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}})(t,e)),o=((e,t,n,i)=>q(n,n=>ah(e,t,n,i)))(e,t,n,r);return le(r,n=>{if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))}),o},ch=rh.single,dh=rh.multiple,uh=A(ih),hh=Br([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ph=Mr("factory",{sketch:_}),mh=Mr("schema",[]),fh=cr("name"),gh=sr("pname","pname",wi(e=>"<alloy."+bs(e.name)+">"),ji()),vh=ar("schema",()=>[yr("preprocess")]),yh=Mr("defaults",A({})),bh=Mr("overrides",A({})),Ah=Ni([ph,mh,fh,gh,yh,bh]),_h=Ni([ph,mh,fh,yh,bh]),wh=Ni([ph,mh,fh,gh,yh,bh]),xh=Ni([ph,vh,fh,cr("unit"),gh,yh,bh]),Ch=e=>e.fold(k.some,k.none,k.some,k.some),Eh=e=>{const t=e=>e.name;return e.fold(t,t,t,t)},Mh=(e,t)=>n=>{const i=nr("Converting part type",t,n);return e(i)},Sh=Mh(hh.required,Ah),Th=Mh(hh.external,_h),kh=Mh(hh.optional,wh),Lh=Mh(hh.group,xh),Dh=A("entirety");var Ih=Object.freeze({__proto__:null,required:Sh,external:Th,optional:kh,group:Lh,asNamedPart:Ch,name:Eh,asCommon:e=>e.fold(_,_,_,_),original:Dh});const Rh=(e,t,n,i)=>Ai(t.defaults(e,n,i),n,{uid:e.partUids[t.name]},t.overrides(e,n,i)),Oh=(e,t)=>{const n={};return z(t,t=>{Ch(t).each(t=>{const i=Ph(e,t.pname);n[t.name]=n=>{const r=nr("Part: "+t.name+" in "+e,Ni(t.schema),n);return{...i,config:n,validated:r}}})}),n},Ph=(e,t)=>({uiType:uh(),owner:e,name:t}),Bh=(e,t,n)=>({uiType:uh(),owner:e,name:t,config:n,validated:{}}),Nh=e=>q(e,e=>e.fold(k.none,k.some,k.none,k.none).map(e=>fr(e.name,e.schema.concat([ol(Dh())]))).toArray()),Uh=e=>F(e,Eh),Fh=(e,t,n)=>((e,t,n)=>{const i={},r={};return z(n,e=>{e.fold(e=>{i[e.pname]=ch(!0,(t,n,i)=>e.factory.sketch(Rh(t,e,n,i)))},e=>{const n=t.parts[e.name];r[e.name]=A(e.factory.sketch(Rh(t,e,n[Dh()]),n))},e=>{i[e.pname]=ch(!1,(t,n,i)=>e.factory.sketch(Rh(t,e,n,i)))},e=>{i[e.pname]=dh(!0,(t,n,i)=>{const r=t[e.name];return F(r,n=>e.factory.sketch(Ai(e.defaults(t,n,i),n,e.overrides(t,n))))})})}),{internals:A(i),externals:A(r)}})(0,t,n),zh=(e,t,n)=>lh(k.some(e),t,t.components,n),Hh=(e,t,n)=>{const i=t.partUids[n];return e.getSystem().getByUid(i).toOptional()},jh=(e,t,n)=>Hh(e,t,n).getOrDie("Could not find part: "+n),Vh=(e,t,n)=>{const i={},r=t.partUids,o=e.getSystem();return z(n,e=>{i[e]=A(o.getByUid(r[e]))}),i},Yh=(e,t)=>{const n=e.getSystem();return ce(t.partUids,(e,t)=>A(n.getByUid(e)))},Gh=e=>se(e.partUids),Qh=(e,t,n)=>{const i={},r=t.partUids,o=e.getSystem();return z(n,e=>{i[e]=A(o.getByUid(r[e]).getOrDie())}),i},$h=(e,t)=>{const n=Uh(t);return Fr(F(n,t=>({key:t,value:e+"-"+t})))},qh=e=>sr("partUids","partUids",Ci(t=>$h(t.uid,e)),ji());var Wh=Object.freeze({__proto__:null,generate:Oh,generateOne:Bh,schemas:Nh,names:Uh,substitutes:Fh,components:zh,defaultUids:$h,defaultUidsSchema:qh,getAllParts:Yh,getAllPartNames:Gh,getPart:Hh,getPartOrDie:jh,getParts:Vh,getPartsOrDie:Qh});const Kh=(e,t,n,i,r)=>{const o=((e,t)=>(e.length>0?[fr("parts",e)]:[]).concat([cr("uid"),Mr("dom",{}),Mr("components",[]),ol("originalSpec"),Mr("debug.sketcher",{})]).concat(t))(i,r);return nr(e+" [SpecSchema]",Bi(o.concat(t)),n)},Zh=(e,t,n,i,r)=>{const o=Xh(r),s=Nh(n),a=qh(n),l=Kh(e,t,o,s,[a]),c=Fh(0,l,n);return i(l,zh(e,l,c.internals()),o,c.externals())},Xh=e=>(e=>ye(e,"uid"))(e)?e:{...e,uid:Ms("uid")},Jh=Bi([cr("name"),cr("factory"),cr("configFields"),Mr("apis",{}),Mr("extraApis",{})]),ep=Bi([cr("name"),cr("factory"),cr("configFields"),cr("partFields"),Mr("apis",{}),Mr("extraApis",{})]),tp=e=>{const t=nr("Sketcher for "+e.name,Jh,e),n=ce(t.apis,Ps),i=ce(t.extraApis,(e,t)=>Ds(e,t));return{name:t.name,configFields:t.configFields,sketch:e=>((e,t,n,i)=>{const r=Xh(i);return n(Kh(e,t,r,[],[]),r)})(t.name,t.configFields,t.factory,e),...n,...i}},np=e=>{const t=nr("Sketcher for "+e.name,ep,e),n=Oh(t.name,t.partFields),i=ce(t.apis,Ps),r=ce(t.extraApis,(e,t)=>Ds(e,t));return{name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>Zh(t.name,t.configFields,t.partFields,t.factory,e),parts:n,...i,...r}},ip=e=>qe("input")(e)&&"radio"!==Et(e,"type")||qe("textarea")(e);var rp=Object.freeze({__proto__:null,getCurrent:(e,t,n)=>t.find(e)});const op=[cr("find")],sp=Wl({fields:op,name:"composing",apis:rp}),ap=["input","button","textarea","select"],lp=(e,t,n)=>{(t.disabled()?mp:fp)(e,t)},cp=(e,t)=>!0===t.useNative&&P(ap,He(e.element)),dp=e=>{xt(e.element,"disabled","disabled")},up=e=>{Tt(e.element,"disabled")},hp=e=>{xt(e.element,"aria-disabled","true")},pp=e=>{xt(e.element,"aria-disabled","false")},mp=(e,t,n)=>{t.disableClass.each(t=>{ta(e.element,t)});(cp(e,t)?dp:hp)(e),t.onDisabled(e)},fp=(e,t,n)=>{t.disableClass.each(t=>{ia(e.element,t)});(cp(e,t)?up:pp)(e),t.onEnabled(e)},gp=(e,t)=>cp(e,t)?(e=>St(e.element,"disabled"))(e):(e=>"true"===Et(e.element,"aria-disabled"))(e);var vp=Object.freeze({__proto__:null,enable:fp,disable:mp,isDisabled:gp,onLoad:lp,set:(e,t,n,i)=>{(i?mp:fp)(e,t)}});var yp=Object.freeze({__proto__:null,exhibit:(e,t)=>Fs({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Ko([Zo(wo(),(t,n)=>gp(t,e)),Vl(e,t,lp)])}),bp=[Ir("disabled",S),Mr("useNative",!0),yr("disableClass"),el("onDisabled"),el("onEnabled")];const Ap=Wl({fields:bp,name:"disabling",active:yp,apis:vp}),_p=(e,t,n,i)=>{const r=Ed(e.element,"."+t.highlightClass);z(r,n=>{B(i,e=>Ze(e.element,n))||(ia(n,t.highlightClass),e.getSystem().getByDom(n).each(n=>{t.onDehighlight(e,n),Yo(n,Vo())}))})},wp=(e,t,n,i)=>{_p(e,t,0,[i]),xp(e,t,n,i)||(ta(i.element,t.highlightClass),t.onHighlight(e,i),Yo(i,jo()))},xp=(e,t,n,i)=>oa(i.element,t.highlightClass),Cp=(e,t,n,i)=>{const r=Ed(e.element,"."+t.itemClass);return k.from(r[i]).fold(()=>ni.error(new Error("No element found with index "+i)),e.getSystem().getByDom)},Ep=(e,t,n)=>Oa(e.element,"."+t.itemClass).bind(t=>e.getSystem().getByDom(t).toOptional()),Mp=(e,t,n)=>{const i=Ed(e.element,"."+t.itemClass);return(i.length>0?k.some(i[i.length-1]):k.none()).bind(t=>e.getSystem().getByDom(t).toOptional())},Sp=(e,t,n,i)=>{const r=Ed(e.element,"."+t.itemClass),o=Q(r,e=>oa(e,t.highlightClass));return o.bind(t=>{const n=vl(t,i,0,r.length-1);return e.getSystem().getByDom(r[n]).toOptional()})},Tp=(e,t,n)=>{const i=Ed(e.element,"."+t.itemClass);return _e(F(i,t=>e.getSystem().getByDom(t).toOptional()))};var kp=Object.freeze({__proto__:null,dehighlightAll:(e,t,n)=>_p(e,t,0,[]),dehighlight:(e,t,n,i)=>{xp(e,t,n,i)&&(ia(i.element,t.highlightClass),t.onDehighlight(e,i),Yo(i,Vo()))},highlight:wp,highlightFirst:(e,t,n)=>{Ep(e,t).each(i=>{wp(e,t,n,i)})},highlightLast:(e,t,n)=>{Mp(e,t).each(i=>{wp(e,t,n,i)})},highlightAt:(e,t,n,i)=>{Cp(e,t,n,i).fold(e=>{throw e},i=>{wp(e,t,n,i)})},highlightBy:(e,t,n,i)=>{const r=Tp(e,t);G(r,i).each(i=>{wp(e,t,n,i)})},isHighlighted:xp,getHighlighted:(e,t,n)=>Oa(e.element,"."+t.highlightClass).bind(t=>e.getSystem().getByDom(t).toOptional()),getFirst:Ep,getLast:Mp,getPrevious:(e,t,n)=>Sp(e,t,0,-1),getNext:(e,t,n)=>Sp(e,t,0,1),getCandidates:Tp}),Lp=[cr("highlightClass"),cr("itemClass"),el("onHighlight"),el("onDehighlight")];const Dp=Wl({fields:Lp,name:"highlighting",apis:kp}),Ip=[8],Rp=[9],Op=[13],Pp=[27],Bp=[32],Np=[37],Up=[38],Fp=[39],zp=[40],Hp=(e,t,n)=>{const i=K(e.slice(0,t)),r=K(e.slice(t+1));return G(i.concat(r),n)},jp=(e,t,n)=>{const i=K(e.slice(0,t));return G(i,n)},Vp=(e,t,n)=>{const i=e.slice(0,t),r=e.slice(t+1);return G(r.concat(i),n)},Yp=(e,t,n)=>{const i=e.slice(t+1);return G(i,n)},Gp=e=>t=>{const n=t.raw;return P(e,n.which)},Qp=e=>t=>W(e,e=>e(t)),$p=e=>!0===e.raw.shiftKey,qp=e=>!0===e.raw.ctrlKey,Wp=C($p),Kp=(e,t)=>({matches:e,classification:t}),Zp=(e,t,n)=>{t.exists(e=>n.exists(t=>Ze(t,e)))||Go(e,No(),{prevFocus:t,newFocus:n})},Xp=()=>{const e=e=>oc(e.element);return{get:e,set:(t,n)=>{const i=e(t);t.getSystem().triggerFocus(n,t.element);const r=e(t);Zp(t,i,r)}}},Jp=()=>{const e=e=>Dp.getHighlighted(e).map(e=>e.element);return{get:e,set:(t,n)=>{const i=e(t);t.getSystem().getByDom(n).fold(v,e=>{Dp.highlight(t,e)});const r=e(t);Zp(t,i,r)}}};var em;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(em||(em={}));const tm=(e,t,n,i,r)=>{const o=(e,t,n,i,r)=>((e,t)=>{const n=G(e,e=>e.matches(t));return n.map(e=>e.classification)})(n(e,t,i,r),t.event).bind(n=>n(e,t,i,r)),s={schema:()=>e.concat([Mr("focusManager",Xp()),Sr("focusInside","onFocus",Xi(e=>P(["onFocus","onEnterOrSpace","onApi"],e)?ni.value(e):ni.error("Invalid value for focusInside"))),rl("handler",s),rl("state",t),rl("sendFocusIn",r)]),processKey:o,toEvents:(e,t)=>{const s=e.focusInside!==em.OnFocusMode?k.none():r(e).map(n=>Jo(yo(),(i,r)=>{n(i,e,t),r.stop()})),a=[Jo(so(),(i,s)=>{o(i,s,n,e,t).fold(()=>{((n,i)=>{const o=Gp(Bp.concat(Op))(i.event);e.focusInside===em.OnEnterOrSpaceMode&&o&&Yr(n,i)&&r(e).each(r=>{r(n,e,t),i.stop()})})(i,s)},e=>{s.stop()})}),Jo(ao(),(n,r)=>{o(n,r,i,e,t).each(e=>{r.stop()})})];return Ko(s.toArray().concat(a))}};return s},nm=e=>{const t=[yr("onEscape"),yr("onEnter"),Mr("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Mr("firstTabstop",0),Mr("useTabstopAt",T),yr("visibilitySelector")].concat([e]),n=(e,t)=>{const n=e.visibilitySelector.bind(e=>Pa(t,e)).getOr(t);return Vt(n)>0},i=(e,t)=>t.focusManager.get(e).bind(e=>Pa(e,t.selector)),r=(e,t,i)=>{((e,t)=>{const i=Ed(e.element,t.selector),r=j(i,e=>n(t,e));return k.from(r[t.firstTabstop])})(e,t).each(n=>{t.focusManager.set(e,n)})},o=(e,t,i,r,o)=>o(t,i,e=>((e,t)=>n(e,t)&&e.useTabstopAt(t))(r,e)).fold(()=>r.cyclic?k.some(!0):k.none(),t=>(r.focusManager.set(e,t),k.some(!0))),s=(e,t,n,r)=>{const s=Ed(e.element,n.selector);return i(e,n).bind(t=>Q(s,x(Ze,t)).bind(t=>o(e,s,t,n,r)))},a=(e,t,n)=>{const i=n.cyclic?Hp:jp;return s(e,0,n,i)},l=(e,t,n)=>{const i=n.cyclic?Vp:Yp;return s(e,0,n,i)},c=e=>(e=>it(e))(e).bind(lt).exists(t=>Ze(t,e)),d=A([Kp(Qp([$p,Gp(Rp)]),a),Kp(Gp(Rp),l),Kp(Qp([Wp,Gp(Op)]),(e,t,n)=>n.onEnter.bind(n=>n(e,t)))]),u=A([Kp(Gp(Pp),(e,t,n)=>n.onEscape.bind(n=>n(e,t))),Kp(Gp(Rp),(e,t,n)=>i(e,n).filter(e=>!n.useTabstopAt(e)).bind(i=>(c(i)?a:l)(e,t,n)))]);return tm(t,Bs.init,d,u,()=>k.some(r))};var im=nm(ar("cyclic",S)),rm=nm(ar("cyclic",T));const om=(e,t,n)=>ip(n)&&Gp(Bp)(t.event)?k.none():((e,t,n)=>($o(e,n,wo()),k.some(!0)))(e,0,n),sm=(e,t)=>k.some(!0),am=[Mr("execute",om),Mr("useSpace",!1),Mr("useEnter",!0),Mr("useControlEnter",!1),Mr("useDown",!1)],lm=(e,t,n)=>n.execute(e,t,e.element);var cm=tm(am,Bs.init,(e,t,n,i)=>{const r=n.useSpace&&!ip(e.element)?Bp:[],o=n.useEnter?Op:[],s=n.useDown?zp:[],a=r.concat(o).concat(s);return[Kp(Gp(a),lm)].concat(n.useControlEnter?[Kp(Qp([qp,Gp(Op)]),lm)]:[])},(e,t,n,i)=>n.useSpace&&!ip(e.element)?[Kp(Gp(Bp),sm)]:[],()=>k.none());const dm=()=>{const e=Cc();return Ns({readState:()=>e.get().map(e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(t,n)=>{e.set({numRows:t,numColumns:n})},getNumRows:()=>e.get().map(e=>e.numRows),getNumColumns:()=>e.get().map(e=>e.numColumns)})};var um=Object.freeze({__proto__:null,flatgrid:dm,init:e=>e.state(e)});const hm=e=>(t,n,i,r)=>{const o=e(t.element);return gm(o,t,n,i,r)},pm=(e,t)=>{const n=Qc(e,t);return hm(n)},mm=(e,t)=>{const n=Qc(t,e);return hm(n)},fm=e=>(t,n,i,r)=>gm(e,t,n,i,r),gm=(e,t,n,i,r)=>i.focusManager.get(t).bind(n=>e(t.element,n,i,r)).map(e=>(i.focusManager.set(t,e),!0)),vm=fm,ym=fm,bm=fm,Am=e=>!(e=>e.offsetWidth<=0&&e.offsetHeight<=0)(e.dom),_m=(e,t,n)=>{const i=Ed(e,n);return((e,t)=>Q(e,t).map(t=>({index:t,candidates:e})))(j(i,Am),e=>Ze(e,t))},wm=(e,t)=>Q(e,e=>Ze(t,e)),xm=(e,t,n,i)=>i(Math.floor(t/n),t%n).bind(t=>{const i=t.row*n+t.column;return i>=0&&i<e.length?k.some(e[i]):k.none()}),Cm=(e,t,n,i,r)=>xm(e,t,i,(t,o)=>{const s=t===n-1?e.length-t*i:i,a=vl(o,r,0,s-1);return k.some({row:t,column:a})}),Em=(e,t,n,i,r)=>xm(e,t,i,(t,o)=>{const s=vl(t,r,0,n-1),a=s===n-1?e.length-s*i:i,l=yl(o,0,a-1);return k.some({row:s,column:l})}),Mm=[cr("selector"),Mr("execute",om),tl("onEscape"),Mr("captureTab",!1),sl()],Sm=(e,t,n)=>{Oa(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},Tm=e=>(t,n,i,r)=>_m(t,n,i.selector).bind(t=>e(t.candidates,t.index,r.getNumRows().getOr(i.initSize.numRows),r.getNumColumns().getOr(i.initSize.numColumns))),km=(e,t,n)=>n.captureTab?k.some(!0):k.none(),Lm=Tm((e,t,n,i)=>Cm(e,t,n,i,-1)),Dm=Tm((e,t,n,i)=>Cm(e,t,n,i,1)),Im=Tm((e,t,n,i)=>Em(e,t,n,i,-1)),Rm=Tm((e,t,n,i)=>Em(e,t,n,i,1)),Om=A([Kp(Gp(Np),pm(Lm,Dm)),Kp(Gp(Fp),mm(Lm,Dm)),Kp(Gp(Up),vm(Im)),Kp(Gp(zp),ym(Rm)),Kp(Qp([$p,Gp(Rp)]),km),Kp(Qp([Wp,Gp(Rp)]),km),Kp(Gp(Bp.concat(Op)),(e,t,n,i)=>((e,t)=>t.focusManager.get(e).bind(e=>Pa(e,t.selector)))(e,n).bind(i=>n.execute(e,t,i)))]),Pm=A([Kp(Gp(Pp),(e,t,n)=>n.onEscape(e,t)),Kp(Gp(Bp),sm)]);var Bm=tm(Mm,dm,Om,Pm,()=>k.some(Sm));const Nm=(e,t,n,i,r)=>{const o=(e,t,n)=>r(e,t,i,0,n.length-1,n[t],t=>{return i=n[t],"button"===He(i)&&"disabled"===Et(i,"disabled")?o(e,t,n):k.from(n[t]);var i});return _m(e,n,t).bind(e=>{const t=e.index,n=e.candidates;return o(t,t,n)})},Um=(e,t,n,i)=>Nm(e,t,n,i,(e,t,n,i,r,o,s)=>{const a=yl(t+n,i,r);return a===e?k.from(o):s(a)}),Fm=(e,t,n,i)=>Nm(e,t,n,i,(e,t,n,i,r,o,s)=>{const a=vl(t,n,i,r);return a===e?k.none():s(a)}),zm=[cr("selector"),Mr("getInitial",k.none),Mr("execute",om),tl("onEscape"),Mr("executeOnMove",!1),Mr("allowVertical",!0),Mr("allowHorizontal",!0),Mr("cycles",!0)],Hm=(e,t,n)=>((e,t)=>t.focusManager.get(e).bind(e=>Pa(e,t.selector)))(e,n).bind(i=>n.execute(e,t,i)),jm=(e,t,n)=>{t.getInitial(e).orThunk(()=>Oa(e.element,t.selector)).each(n=>{t.focusManager.set(e,n)})},Vm=(e,t,n)=>(n.cycles?Fm:Um)(e,n.selector,t,-1),Ym=(e,t,n)=>(n.cycles?Fm:Um)(e,n.selector,t,1),Gm=e=>(t,n,i,r)=>e(t,n,i,r).bind(()=>i.executeOnMove?Hm(t,n,i):k.some(!0)),Qm=A([Kp(Gp(Bp),sm),Kp(Gp(Pp),(e,t,n)=>n.onEscape(e,t))]);var $m=tm(zm,Bs.init,(e,t,n,i)=>{const r=[...n.allowHorizontal?Np:[]].concat(n.allowVertical?Up:[]),o=[...n.allowHorizontal?Fp:[]].concat(n.allowVertical?zp:[]);return[Kp(Gp(r),Gm(pm(Vm,Ym))),Kp(Gp(o),Gm(mm(Vm,Ym))),Kp(Gp(Op),Hm),Kp(Gp(Bp),Hm)]},Qm,()=>k.some(jm));const qm=(e,t,n)=>k.from(e[t]).bind(e=>k.from(e[n]).map(e=>({rowIndex:t,columnIndex:n,cell:e}))),Wm=(e,t,n,i)=>{const r=e[t].length,o=vl(n,i,0,r-1);return qm(e,t,o)},Km=(e,t,n,i)=>{const r=vl(n,i,0,e.length-1),o=e[r].length,s=yl(t,0,o-1);return qm(e,r,s)},Zm=(e,t,n,i)=>{const r=e[t].length,o=yl(n+i,0,r-1);return qm(e,t,o)},Xm=(e,t,n,i)=>{const r=yl(n+i,0,e.length-1),o=e[r].length,s=yl(t,0,o-1);return qm(e,r,s)},Jm=[fr("selectors",[cr("row"),cr("cell")]),Mr("cycles",!0),Mr("previousSelector",k.none),Mr("execute",om)],ef=(e,t,n)=>{t.previousSelector(e).orThunk(()=>{const n=t.selectors;return Oa(e.element,n.cell)}).each(n=>{t.focusManager.set(e,n)})},tf=(e,t)=>(n,i,r)=>{const o=r.cycles?e:t;return Pa(i,r.selectors.row).bind(e=>{const t=Ed(e,r.selectors.cell);return wm(t,i).bind(t=>{const i=Ed(n,r.selectors.row);return wm(i,e).bind(e=>{const n=((e,t)=>F(e,e=>Ed(e,t.selectors.cell)))(i,r);return o(n,e,t).map(e=>e.cell)})})})},nf=tf((e,t,n)=>Wm(e,t,n,-1),(e,t,n)=>Zm(e,t,n,-1)),rf=tf((e,t,n)=>Wm(e,t,n,1),(e,t,n)=>Zm(e,t,n,1)),of=tf((e,t,n)=>Km(e,n,t,-1),(e,t,n)=>Xm(e,n,t,-1)),sf=tf((e,t,n)=>Km(e,n,t,1),(e,t,n)=>Xm(e,n,t,1)),af=A([Kp(Gp(Np),pm(nf,rf)),Kp(Gp(Fp),mm(nf,rf)),Kp(Gp(Up),vm(of)),Kp(Gp(zp),ym(sf)),Kp(Gp(Bp.concat(Op)),(e,t,n)=>oc(e.element).bind(i=>n.execute(e,t,i)))]),lf=A([Kp(Gp(Bp),sm)]);var cf=tm(Jm,Bs.init,af,lf,()=>k.some(ef));const df=[cr("selector"),Mr("execute",om),Mr("moveOnTab",!1)],uf=(e,t,n)=>n.focusManager.get(e).bind(i=>n.execute(e,t,i)),hf=(e,t,n)=>{Oa(e.element,t.selector).each(n=>{t.focusManager.set(e,n)})},pf=(e,t,n)=>Fm(e,n.selector,t,-1),mf=(e,t,n)=>Fm(e,n.selector,t,1),ff=A([Kp(Gp(Up),bm(pf)),Kp(Gp(zp),bm(mf)),Kp(Qp([$p,Gp(Rp)]),(e,t,n,i)=>n.moveOnTab?bm(pf)(e,t,n,i):k.none()),Kp(Qp([Wp,Gp(Rp)]),(e,t,n,i)=>n.moveOnTab?bm(mf)(e,t,n,i):k.none()),Kp(Gp(Op),uf),Kp(Gp(Bp),uf)]),gf=A([Kp(Gp(Bp),sm)]);var vf=tm(df,Bs.init,ff,gf,()=>k.some(hf));const yf=[tl("onSpace"),tl("onEnter"),tl("onShiftEnter"),tl("onLeft"),tl("onRight"),tl("onTab"),tl("onShiftTab"),tl("onUp"),tl("onDown"),tl("onEscape"),Mr("stopSpaceKeyup",!1),yr("focusIn")];var bf=tm(yf,Bs.init,(e,t,n)=>[Kp(Gp(Bp),n.onSpace),Kp(Qp([Wp,Gp(Op)]),n.onEnter),Kp(Qp([$p,Gp(Op)]),n.onShiftEnter),Kp(Qp([$p,Gp(Rp)]),n.onShiftTab),Kp(Qp([Wp,Gp(Rp)]),n.onTab),Kp(Gp(Up),n.onUp),Kp(Gp(zp),n.onDown),Kp(Gp(Np),n.onLeft),Kp(Gp(Fp),n.onRight),Kp(Gp(Bp),n.onSpace)],(e,t,n)=>[...n.stopSpaceKeyup?[Kp(Gp(Bp),sm)]:[],Kp(Gp(Pp),n.onEscape)],e=>e.focusIn);const Af=im.schema(),_f=rm.schema(),wf=$m.schema(),xf=Bm.schema(),Cf=cf.schema(),Ef=cm.schema(),Mf=vf.schema(),Sf=bf.schema();const Tf=Zl({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:Af,cyclic:_f,flow:wf,flatgrid:xf,matrix:Cf,execution:Ef,menu:Mf,special:Sf}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,n)=>{t.sendFocusIn(t).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},i=>{i(e,t,n)})},setGridSize:(e,t,n,i,r)=>{(e=>be(e,"setGridSize"))(n)?n.setGridSize(i,r):console.error("Layout does not support setGridSize")}},state:um}),kf=(e,t)=>{sc(()=>{uu(e,t,()=>F(t,e.getSystem().build))},e.element)},Lf=(e,t)=>{sc(()=>{((e,t,n)=>{const i=e.components(),r=q(t,e=>Os(e).toArray());z(i,e=>{P(r,e)||cu(e)});const o=n(t),s=Z(i,o);z(s,e=>{ou(e)&&cu(e)}),z(o,t=>{ou(t)||lu(e,t)}),e.syncComponents()})(e,t,()=>((e,t,n)=>ha(e,t,(t,i)=>pa(e,i,t,n)))(e.element,t,e.getSystem().buildOrPatch))},e.element)},Df=(e,t,n,i)=>{cu(t);const r=pa(e.element,n,i,e.getSystem().buildOrPatch);lu(e,r),e.syncComponents()},If=(e,t,n)=>{const i=e.getSystem().build(n);pu(e,i,t)},Rf=(e,t,n,i)=>{fu(t),If(e,(e,t)=>((e,t,n)=>{at(e,n).fold(()=>{Bn(e,t)},e=>{Rn(e,t)})})(e,t,n),i)},Of=(e,t)=>e.components(),Pf=(e,t,n,i,r)=>{const o=Of(e);return k.from(o[i]).map(n=>(r.fold(()=>fu(n),r=>{(t.reuseDom?Df:Rf)(e,n,i,r)}),n))};var Bf=Object.freeze({__proto__:null,append:(e,t,n,i)=>{If(e,Bn,i)},prepend:(e,t,n,i)=>{If(e,Pn,i)},remove:(e,t,n,i)=>{const r=Of(e),o=G(r,e=>Ze(i.element,e.element));o.each(fu)},replaceAt:Pf,replaceBy:(e,t,n,i,r)=>{const o=Of(e);return Q(o,i).bind(n=>Pf(e,t,0,n,r))},set:(e,t,n,i)=>(t.reuseDom?Lf:kf)(e,i),contents:Of});const Nf=Wl({fields:[Dr("reuseDom",!0)],name:"replacing",apis:Bf}),Uf=(e,t)=>{const n=((e,t)=>{const n=Ko(t);return Wl({fields:[cr("enabled")],name:e,active:{events:A(n)}})})(e,t);return{key:e,value:{config:{},me:n,configAsRaw:A({}),initialConfig:{},state:Bs}}},Ff=(e,t)=>{t.ignore||(tc(e.element),t.onFocus(e))};var zf=Object.freeze({__proto__:null,focus:Ff,blur:(e,t)=>{t.ignore||nc(e.element)},isFocused:e=>ic(e.element)});var Hf=Object.freeze({__proto__:null,exhibit:(e,t)=>{const n=t.ignore?{}:{attributes:{tabindex:"-1"}};return Fs(n)},events:e=>Ko([Jo(yo(),(t,n)=>{Ff(t,e),n.stop()})].concat(e.stopMousedown?[Jo(Jr(),(e,t)=>{t.event.prevent()})]:[]))}),jf=[el("onFocus"),Mr("stopMousedown",!1),Mr("ignore",!1)];const Vf=Wl({fields:jf,name:"focusing",active:Hf,apis:zf}),Yf=(e,t,n,i)=>{const r=n.get();n.set(i),((e,t,n)=>{t.toggleClass.each(t=>{n.get()?ta(e.element,t):ia(e.element,t)})})(e,t,n),((e,t,n)=>{const i=t.aria;i.update(e,i,n.get())})(e,t,n),r!==i&&t.onToggled(e,i)},Gf=(e,t,n)=>{Yf(e,t,n,!n.get())},Qf=(e,t,n)=>{Yf(e,t,n,t.selected)};var $f=Object.freeze({__proto__:null,onLoad:Qf,toggle:Gf,isOn:(e,t,n)=>n.get(),on:(e,t,n)=>{Yf(e,t,n,!0)},off:(e,t,n)=>{Yf(e,t,n,!1)},set:Yf});var qf=Object.freeze({__proto__:null,exhibit:()=>Fs({}),events:(e,t)=>{const n=(i=e,r=t,o=Gf,ds(e=>{o(e,i,r)}));var i,r,o;const s=Vl(e,t,Qf);return Ko($([e.toggleOnExecute?[n]:[],[s]]))}});const Wf=(e,t,n)=>{xt(e.element,"aria-expanded",n)};var Kf=[Mr("selected",!1),yr("toggleClass"),Mr("toggleOnExecute",!0),el("onToggled"),Sr("aria",{mode:"none"},rr("mode",{pressed:[Mr("syncWithExpanded",!1),rl("update",(e,t,n)=>{xt(e.element,"aria-pressed",n),t.syncWithExpanded&&Wf(e,t,n)})],checked:[rl("update",(e,t,n)=>{xt(e.element,"aria-checked",n)})],expanded:[rl("update",Wf)],selected:[rl("update",(e,t,n)=>{xt(e.element,"aria-selected",n)})],none:[rl("update",v)]}))];const Zf=Wl({fields:Kf,name:"toggling",active:qf,apis:$f,state:(Xf=!1,{init:()=>{const e=Pr(Xf);return{get:()=>e.get(),set:t=>e.set(t),clear:()=>e.set(Xf),readState:()=>e.get()}}})});var Xf;const Jf=()=>{const e=(e,t)=>{t.stop(),Qo(e)};return[Jo(uo(),e),Jo(Co(),e),rs(Wr()),rs(Jr())]},eg=e=>Ko($([e.map(e=>ds((t,n)=>{e(t),n.stop()})).toArray(),Jf()])),tg="alloy.item-hover",ng="alloy.item-focus",ig="alloy.item-toggled",rg=e=>{(oc(e.element).isNone()||Vf.isFocused(e))&&(Vf.isFocused(e)||Vf.focus(e),Go(e,tg,{item:e}))},og=e=>{Go(e,ng,{item:e})},sg=A(tg),ag=A(ng),lg=A(ig),cg=e=>e.toggling.map(e=>e.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),dg=e=>({aria:{mode:"checked"},...pe(e,(e,t)=>"exclusive"!==t),onToggled:(t,n)=>{m(e.onToggled)&&e.onToggled(t,n),((e,t)=>{Go(e,ig,{item:e,state:t})})(t,n)}}),ug=[cr("data"),cr("components"),cr("dom"),Mr("hasSubmenu",!1),yr("toggling"),th("itemBehaviours",[Zf,Vf,Tf,Zu]),Mr("ignoreFocus",!1),Mr("domModification",{}),rl("builder",e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:cg(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:nh(e.itemBehaviours,[e.toggling.fold(Zf.revoke,e=>Zf.config(dg(e))),Vf.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{og(e)}}),Tf.config({mode:"execution"}),Zu.config({store:{mode:"memory",initialValue:e.data}}),Uf("item-type-events",[...Jf(),Jo(io(),rg),Jo(xo(),Vf.focus)])]),components:e.components,eventOrder:e.eventOrder})),Mr("eventOrder",{})],hg=[cr("dom"),cr("components"),rl("builder",e=>({dom:e.dom,components:e.components,events:Ko([os(xo())])}))],pg=A("item-widget"),mg=A([Sh({name:"widget",overrides:e=>({behaviours:$l([Zu.config({store:{mode:"manual",getValue:t=>e.data,setValue:v}})])})})]),fg=[cr("uid"),cr("data"),cr("components"),cr("dom"),Mr("autofocus",!1),Mr("ignoreFocus",!1),th("widgetBehaviours",[Zu,Vf,Tf]),Mr("domModification",{}),qh(mg()),rl("builder",e=>{const t=Fh(pg(),e,mg()),n=zh(pg(),e,t.internals()),i=t=>Hh(t,e,"widget").map(e=>(Tf.focusIn(e),e)),r=(t,n)=>ip(n.event.target)?k.none():e.autofocus?(n.setSource(t.element),k.none()):k.none();return{dom:e.dom,components:n,domModification:e.domModification,events:Ko([ds((e,t)=>{i(e).each(e=>{t.stop()})}),Jo(io(),rg),Jo(xo(),(t,n)=>{e.autofocus?i(t):Vf.focus(t)})]),behaviours:nh(e.widgetBehaviours,[Zu.config({store:{mode:"memory",initialValue:e.data}}),Vf.config({ignore:e.ignoreFocus,onFocus:e=>{og(e)}}),Tf.config({mode:"special",focusIn:e.autofocus?e=>{i(e)}:Xl(),onLeft:r,onRight:r,onEscape:(t,n)=>Vf.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),k.none()):k.none():(Vf.focus(t),k.some(!0))})])}})],gg=rr("type",{widget:fg,item:ug,separator:hg}),vg=A([Lh({factory:{sketch:e=>{const t=nr("menu.spec item",gg,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>ye(t,"uid")?t:{...t,uid:Ms("item")},overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),yg=A([cr("value"),cr("items"),cr("dom"),cr("components"),Mr("eventOrder",{}),Xu("menuBehaviours",[Dp,Zu,sp,Tf]),Sr("movement",{mode:"menu",moveOnTab:!0},rr("mode",{grid:[sl(),rl("config",(e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}))],matrix:[rl("config",(e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager})),cr("rowSelector"),Mr("previousSelector",k.none)],menu:[Mr("moveOnTab",!0),rl("config",(e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}))]})),dr("markers",Wa()),Mr("fakeFocus",!1),Mr("focusManager",Xp()),el("onHighlight"),el("onDehighlight")]),bg=A("alloy.menu-focus"),Ag=np({name:"Menu",configFields:yg(),partFields:vg(),factory:(e,t,n,i)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:eh(e.menuBehaviours,[Dp.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Zu.config({store:{mode:"memory",initialValue:e.value}}),sp.config({find:k.some}),Tf.config(e.movement.config(e,e.movement))]),events:Ko([Jo(ag(),(e,t)=>{const n=t.event;e.getSystem().getByDom(n.target).each(n=>{Dp.highlight(e,n),t.stop(),Go(e,bg(),{menu:e,item:n})})}),Jo(sg(),(e,t)=>{const n=t.event.item;Dp.highlight(e,n)}),Jo(lg(),(e,t)=>{const{item:n,state:i}=t.event;i&&"menuitemradio"===Et(n.element,"role")&&((e,t)=>{const n=Ed(e.element,'[role="menuitemradio"][aria-checked="true"]');z(n,n=>{Ze(n,t.element)||e.getSystem().getByDom(n).each(e=>{Zf.off(e)})})})(e,n)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),_g=(e,t,n,i)=>ve(n,i).bind(i=>ve(e,i).bind(i=>{const r=_g(e,t,n,i);return k.some([i].concat(r))})).getOr([]),wg=(e,t)=>{const n={};le(e,(e,t)=>{z(e,e=>{n[e]=t})});const i=t,r=de(t,(e,t)=>({k:e,v:t}));const o=ce(r,(e,t)=>[t].concat(_g(n,i,r,t)));return ce(n,e=>ve(o,e).getOr([e]))},xg=e=>"prepared"===e.type?k.some(e.menu):k.none(),Cg={init:()=>{const e=Pr({}),t=Pr({}),n=Pr({}),i=Cc(),r=Pr({}),o=(t,n,i)=>s(t).bind(r=>(t=>fe(e.get(),(e,n)=>e===t))(t).bind(e=>n(e).map(e=>({triggeredMenu:r,triggeringItem:e,triggeringPath:i})))),s=e=>a(e).bind(xg),a=e=>ve(t.get(),e),l=t=>ve(e.get(),t);return{setMenuBuilt:(e,n)=>{t.set({...t.get(),[e]:{type:"prepared",menu:n}})},setContents:(o,s,a,l)=>{i.set(o),e.set(a),t.set(s),r.set(l);const c=wg(l,a);n.set(c)},expand:t=>ve(e.get(),t).map(e=>{const i=ve(n.get(),t).getOr([]);return[e].concat(i)}),refresh:e=>ve(n.get(),e),collapse:e=>ve(n.get(),e).bind(e=>e.length>1?k.some(e.slice(1)):k.none()),lookupMenu:a,lookupItem:l,otherMenus:e=>{const t=r.get();return Z(se(t),e)},getPrimary:()=>i.get().bind(s),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),n.set({}),i.clear()},isClear:()=>i.get().isNone(),getTriggeringPath:(e,t)=>{const r=j(l(e).toArray(),e=>s(e).isSome());return ve(n.get(),e).bind(e=>{const n=K(r.concat(e));return(e=>{const t=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i.isSome())return k.none();t.push(i.getOrDie())}return k.some(t)})(q(n,(e,r)=>o(e,t,n.slice(0,r+1)).fold(()=>Ae(i.get(),e)?[]:[k.none()],e=>[k.some(e)])))})}}},extractPreparedMenu:xg},Eg=bs("tiered-menu-item-highlight"),Mg=bs("tiered-menu-item-dehighlight");var Sg;!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(Sg||(Sg={}));const Tg=A("collapse-item"),kg=tp({name:"TieredMenu",configFields:[il("onExecute"),il("onEscape"),nl("onOpenMenu"),nl("onOpenSubmenu"),el("onRepositionMenu"),el("onCollapseMenu"),Mr("highlightOnOpen",Sg.HighlightMenuAndItem),fr("data",[cr("primary"),cr("menus"),cr("expansions")]),Mr("fakeFocus",!1),el("onHighlightItem"),el("onDehighlightItem"),el("onHover"),Za(),cr("dom"),Mr("navigateOnHover",!0),Mr("stayInDom",!1),Xu("tmenuBehaviours",[Tf,Dp,sp,Nf]),Mr("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{const n=Cc(),i=Cg.init(),r=t=>{const n=((t,n,i)=>ce(i,(i,r)=>{const o=()=>Ag.sketch({...i,value:r,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(e,t)=>{Go(e,Eg,{menuComp:e,itemComp:t})},onDehighlight:(e,t)=>{Go(e,Mg,{menuComp:e,itemComp:t})},focusManager:e.fakeFocus?Jp():Xp()});return r===n?{type:"prepared",menu:t.getSystem().build(o())}:{type:"notbuilt",nbMenu:o}}))(t,e.data.primary,e.data.menus),r=s();return i.setContents(e.data.primary,n,e.data.expansions,r),i.getPrimary()},o=e=>Zu.getValue(e).value,s=t=>ce(e.data.menus,(e,t)=>q(e.items,e=>"separator"===e.type?[]:[e.data.value])),a=Dp.highlight,l=(t,n)=>{a(t,n),Dp.getHighlighted(n).orThunk(()=>Dp.getFirst(n)).each(i=>{e.fakeFocus?Dp.highlight(n,i):$o(t,i.element,xo())})},c=(e,t)=>_e(F(t,t=>e.lookupMenu(t).bind(e=>"prepared"===e.type?k.some(e.menu):k.none()))),d=(t,n,i)=>{const r=c(n,n.otherMenus(i));z(r,n=>{aa(n.element,[e.markers.backgroundMenu]),e.stayInDom||Nf.remove(t,n)})},u=(t,i)=>{const r=(t=>n.get().getOrThunk(()=>{const i={},r=Ed(t.element,`.${e.markers.item}`),s=j(r,e=>"true"===Et(e,"aria-haspopup"));return z(s,e=>{t.getSystem().getByDom(e).each(e=>{const t=o(e);i[t]=e})}),n.set(i),i}))(t);le(r,(e,t)=>{const n=P(i,t);xt(e.element,"aria-expanded",n)})},h=(t,n,i)=>k.from(i[0]).bind(r=>n.lookupMenu(r).bind(r=>{if("notbuilt"===r.type)return k.none();{const o=r.menu,s=c(n,i.slice(1));return z(s,t=>{ta(t.element,e.markers.backgroundMenu)}),bt(o.element)||Nf.append(t,Sa(o)),aa(o.element,[e.markers.backgroundMenu]),l(t,o),d(t,n,i),k.some(o)}}));let p;!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(p||(p={}));const m=(t,n,r=p.HighlightSubmenu)=>{if(n.hasConfigured(Ap)&&Ap.isDisabled(n))return k.some(n);{const s=o(n);return i.expand(s).bind(o=>(u(t,o),k.from(o[0]).bind(s=>i.lookupMenu(s).bind(a=>{const l=((e,t,n)=>{if("notbuilt"===n.type){const r=e.getSystem().build(n.nbMenu());return i.setMenuBuilt(t,r),r}return n.menu})(t,s,a);return bt(l.element)||Nf.append(t,Sa(l)),e.onOpenSubmenu(t,n,l,K(o)),r===p.HighlightSubmenu?(Dp.highlightFirst(l),h(t,i,o)):(Dp.dehighlightAll(l),k.some(n))}))))}},f=(t,n)=>{const r=o(n);return i.collapse(r).bind(r=>(u(t,r),h(t,i,r).map(i=>(e.onCollapseMenu(t,n,i),i))))},g=t=>(n,i)=>Pa(i.getSource(),`.${e.markers.item}`).bind(e=>n.getSystem().getByDom(e).toOptional().bind(e=>t(n,e).map(T))),y=Ko([Jo(bg(),(e,t)=>{const n=t.event.item;i.lookupItem(o(n)).each(()=>{const n=t.event.menu;Dp.highlight(e,n);const r=o(t.event.item);i.refresh(r).each(t=>d(e,i,t))})}),ds((t,n)=>{const i=n.event.target;t.getSystem().getByDom(i).each(n=>{0===o(n).indexOf("collapse-item")&&f(t,n),m(t,n,p.HighlightSubmenu).fold(()=>{e.onExecute(t,n)},v)})}),as((t,n)=>{r(t).each(n=>{Nf.append(t,Sa(n)),e.onOpenMenu(t,n),e.highlightOnOpen===Sg.HighlightMenuAndItem?l(t,n):e.highlightOnOpen===Sg.HighlightJustMenu&&a(t,n)})}),Jo(Eg,(t,n)=>{e.onHighlightItem(t,n.event.menuComp,n.event.itemComp)}),Jo(Mg,(t,n)=>{e.onDehighlightItem(t,n.event.menuComp,n.event.itemComp)}),...e.navigateOnHover?[Jo(sg(),(t,n)=>{const r=n.event.item;((e,t)=>{const n=o(t);i.refresh(n).bind(t=>(u(e,t),h(e,i,t)))})(t,r),m(t,r,p.HighlightParent),e.onHover(t,r)})]:[]]),b=e=>Dp.getHighlighted(e).bind(Dp.getHighlighted),A={collapseMenu:e=>{b(e).each(t=>{f(e,t)})},highlightPrimary:e=>{i.getPrimary().each(t=>{l(e,t)})},repositionMenus:t=>{const n=i.getPrimary().bind(e=>b(t).bind(e=>{const t=o(e),n=ge(i.getMenus()),r=_e(F(n,Cg.extractPreparedMenu));return i.getTriggeringPath(t,e=>((e,t,n)=>oe(t,e=>{if(!e.getSystem().isConnected())return k.none();const t=Dp.getCandidates(e);return G(t,e=>o(e)===n)}))(0,r,e))}).map(t=>({primary:e,triggeringPath:t})));n.fold(()=>{(e=>k.from(e.components()[0]).filter(e=>"menu"===Et(e.element,"role")))(t).each(n=>{e.onRepositionMenu(t,n,[])})},({primary:n,triggeringPath:i})=>{e.onRepositionMenu(t,n,i)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:eh(e.tmenuBehaviours,[Tf.config({mode:"special",onRight:g((e,t)=>ip(t.element)?k.none():m(e,t,p.HighlightSubmenu)),onLeft:g((e,t)=>ip(t.element)?k.none():f(e,t)),onEscape:g((t,n)=>f(t,n).orThunk(()=>e.onEscape(t,n).map(()=>t))),focusIn:(e,t)=>{i.getPrimary().each(t=>{$o(e,t.element,xo())})}}),Dp.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),sp.config({find:e=>Dp.getHighlighted(e)}),Nf.config({})]),eventOrder:e.eventOrder,apis:A,events:y}},extraApis:{tieredData:(e,t,n)=>({primary:e,menus:t,expansions:n}),singleData:(e,t)=>({primary:e,menus:Ur(e,t),expansions:{}}),collapseItem:e=>({value:bs(Tg()),meta:{text:e}})}}),Lg=tp({name:"InlineView",configFields:[cr("lazySink"),el("onShow"),el("onHide"),xr("onEscape"),Xu("inlineBehaviours",[Du,Zu,Jl]),Er("fireDismissalEventInstead",[Mr("event",Po())]),Er("fireRepositionEventInstead",[Mr("event",Bo())]),Mr("getRelated",k.none),Mr("isExtraPart",S),Mr("eventOrder",k.none)],factory:(e,t)=>{const n=(t,n,i,r)=>{const o=e.lazySink(t).getOrDie();Du.openWhileCloaked(t,n,()=>ru.positionWithinBounds(o,t,i,r())),Zu.setValue(t,k.some({mode:"position",config:i,getBounds:r}))},i=(t,n,i,r)=>{const o=((e,t,n,i,r)=>{const o=()=>e.lazySink(t),s="horizontal"===i.type?{layouts:{onLtr:()=>Fl(),onRtl:()=>zl()}}:{},a=e=>(e=>2===e.length)(e)?s:{};return kg.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(Du.close(t),e.onEscape.map(e=>e(t)),k.some(!0)),onExecute:()=>k.some(!0),onOpenMenu:(e,t)=>{ru.positionWithinBounds(o().getOrDie(),t,n,r())},onOpenSubmenu:(e,t,n,i)=>{const r=o().getOrDie();ru.position(r,n,{anchor:{type:"submenu",item:t,...a(i)}})},onRepositionMenu:(e,t,i)=>{const s=o().getOrDie();ru.positionWithinBounds(s,t,n,r()),z(i,e=>{const t=a(e.triggeringPath);ru.position(s,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem,...t}})})}})})(e,t,n,i,r);Du.open(t,o),Zu.setValue(t,k.some({mode:"menu",menu:o}))},r=t=>{Du.isOpen(t)&&Zu.getValue(t).each(n=>{switch(n.mode){case"menu":Du.getState(t).each(kg.repositionMenus);break;case"position":const i=e.lazySink(t).getOrDie();ru.positionWithinBounds(i,t,n.config,n.getBounds())}})},o={setContent:(e,t)=>{Du.setContent(e,t)},showAt:(e,t,i)=>{const r=k.none;n(e,t,i,r)},showWithinBounds:n,showMenuAt:(e,t,n)=>{i(e,t,n,k.none)},showMenuWithinBounds:i,hide:e=>{Du.isOpen(e)&&(Zu.setValue(e,k.none()),Du.close(e))},getContent:e=>Du.getState(e),reposition:r,isOpen:Du.isOpen};return{uid:e.uid,dom:e.dom,behaviours:eh(e.inlineBehaviours,[Du.config({isPartOf:(t,n,i)=>Fa(n,i)||((t,n)=>e.getRelated(t).exists(e=>Fa(e,n)))(t,i),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Zu.config({store:{mode:"memory",initialValue:k.none()}}),Jl.config({channels:{...Bu({isExtraPart:t.isExtraPart,...e.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...Uu({...e.fireRepositionEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({}),doReposition:r})}})]),eventOrder:e.eventOrder,apis:o}},apis:{showAt:(e,t,n,i)=>{e.showAt(t,n,i)},showWithinBounds:(e,t,n,i,r)=>{e.showWithinBounds(t,n,i,r)},showMenuAt:(e,t,n,i)=>{e.showMenuAt(t,n,i)},showMenuWithinBounds:(e,t,n,i,r)=>{e.showMenuWithinBounds(t,n,i,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,n)=>{e.setContent(t,n)},reposition:(e,t)=>{e.reposition(t)}}});var Dg=tinymce.util.Tools.resolve("tinymce.util.Delay");const Ig=tp({name:"Button",factory:e=>{const t=eg(e.action),n=e.dom.tag,i=t=>ve(e.dom,"attributes").bind(e=>ve(e,t));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:nh(e.buttonBehaviours,[Vf.config({}),Tf.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:(()=>{if("button"===n){return{type:i("type").getOr("button"),...i("role").map(e=>({role:e})).getOr({})}}return{role:e.role.getOr(i("role").getOr("button"))}})()},eventOrder:e.eventOrder}},configFields:[Mr("uid",void 0),cr("dom"),Mr("components",[]),th("buttonBehaviours",[Vf,Tf]),yr("action"),yr("role"),Mr("eventOrder",{})]}),Rg=e=>{const t=Pe.fromHtml(e),n=st(t),i=(e=>{const t=void 0!==e.dom.attributes?e.dom.attributes:[];return Y(t,(e,t)=>"class"===t.name?e:{...e,[t.name]:t.value},{})})(t),r=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),o=0===n.length?{}:{innerHtml:us(t)};return{tag:He(t),classes:r,attributes:i,...o}},Og=e=>{const t=(e=>void 0!==e.uid)(e)&&be(e,"uid")?e.uid:Ms("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>({...e,uid:t})}},{entries:Pg,setPrototypeOf:Bg,isFrozen:Ng,getPrototypeOf:Ug,getOwnPropertyDescriptor:Fg}=Object;let{freeze:zg,seal:Hg,create:jg}=Object,{apply:Vg,construct:Yg}="undefined"!=typeof Reflect&&Reflect;Vg||(Vg=function(e,t,n){return e.apply(t,n)}),zg||(zg=function(e){return e}),Hg||(Hg=function(e){return e}),Yg||(Yg=function(e,t){return new e(...t)});const Gg=iv(Array.prototype.forEach),Qg=iv(Array.prototype.pop),$g=iv(Array.prototype.push),qg=iv(String.prototype.toLowerCase),Wg=iv(String.prototype.toString),Kg=iv(String.prototype.match),Zg=iv(String.prototype.replace),Xg=iv(String.prototype.indexOf),Jg=iv(String.prototype.trim),ev=iv(RegExp.prototype.test),tv=(nv=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Yg(nv,t)});var nv;function iv(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Vg(e,t,i)}}function rv(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:qg,Bg&&Bg(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(Ng(t)||(t[r]=e),i=e)}e[i]=!0}return e}function ov(e){const t=jg(null);for(const[n,i]of Pg(e))t[n]=i;return t}function sv(e,t){for(;null!==e;){const n=Fg(e,t);if(n){if(n.get)return iv(n.get);if("function"==typeof n.value)return iv(n.value)}e=Ug(e)}return function(e){return console.warn("fallback value for",e),null}}const av=zg(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),lv=zg(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cv=zg(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dv=zg(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),uv=zg(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hv=zg(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pv=zg(["#text"]),mv=zg(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),fv=zg(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gv=zg(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vv=zg(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yv=Hg(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bv=Hg(/<%[\w\W]*|[\w\W]*%>/gm),Av=Hg(/\${[\w\W]*}/gm),_v=Hg(/^data-[\-\w.\u00B7-\uFFFF]/),wv=Hg(/^aria-[\-\w]+$/),xv=Hg(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Cv=Hg(/^(?:\w+script|data):/i),Ev=Hg(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mv=Hg(/^html$/i);var Sv=Object.freeze({__proto__:null,MUSTACHE_EXPR:yv,ERB_EXPR:bv,TMPLIT_EXPR:Av,DATA_ATTR:_v,ARIA_ATTR:wv,IS_ALLOWED_URI:xv,IS_SCRIPT_OR_DATA:Cv,ATTR_WHITESPACE:Ev,DOCTYPE_NAME:Mv});const Tv=()=>"undefined"==typeof window?null:window;var kv=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tv();const n=t=>e(t);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const i=t.document,r=i.currentScript;let{document:o}=t;const{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:m}=t,f=c.prototype,g=sv(f,"cloneNode"),v=sv(f,"nextSibling"),y=sv(f,"childNodes"),b=sv(f,"parentNode");if("function"==typeof a){const e=o.createElement("template");e.content&&e.content.ownerDocument&&(o=e.content.ownerDocument)}let A,_="";const{implementation:w,createNodeIterator:x,createDocumentFragment:C,getElementsByTagName:E}=o,{importNode:M}=i;let S={};n.isSupported="function"==typeof Pg&&"function"==typeof b&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:k,TMPLIT_EXPR:L,DATA_ATTR:D,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:O}=Sv;let{IS_ALLOWED_URI:P}=Sv,B=null;const N=rv({},[...av,...lv,...cv,...uv,...pv]);let U=null;const F=rv({},[...mv,...fv,...gv,...vv]);let z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,j=null,V=!0,Y=!0,G=!1,Q=!0,$=!1,q=!1,W=!1,K=!1,Z=!1,X=!1,J=!1,ee=!0,te=!1,ne=!0,ie=!1,re={},oe=null;const se=rv({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ae=null;const le=rv({},["audio","video","img","source","image","track"]);let ce=null;const de=rv({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml";let me=pe,fe=!1,ge=null;const ve=rv({},[ue,he,pe],Wg);let ye;const be=["application/xhtml+xml","text/html"];let Ae,_e=null;const we=o.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){if(!_e||_e!==e){if(e&&"object"==typeof e||(e={}),e=ov(e),ye=ye=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ae="application/xhtml+xml"===ye?Wg:qg,B="ALLOWED_TAGS"in e?rv({},e.ALLOWED_TAGS,Ae):N,U="ALLOWED_ATTR"in e?rv({},e.ALLOWED_ATTR,Ae):F,ge="ALLOWED_NAMESPACES"in e?rv({},e.ALLOWED_NAMESPACES,Wg):ve,ce="ADD_URI_SAFE_ATTR"in e?rv(ov(de),e.ADD_URI_SAFE_ATTR,Ae):de,ae="ADD_DATA_URI_TAGS"in e?rv(ov(le),e.ADD_DATA_URI_TAGS,Ae):le,oe="FORBID_CONTENTS"in e?rv({},e.FORBID_CONTENTS,Ae):se,H="FORBID_TAGS"in e?rv({},e.FORBID_TAGS,Ae):{},j="FORBID_ATTR"in e?rv({},e.FORBID_ATTR,Ae):{},re="USE_PROFILES"in e&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,$=e.SAFE_FOR_TEMPLATES||!1,q=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,J=e.RETURN_TRUSTED_TYPE||!1,K=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ne=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,P=e.ALLOWED_URI_REGEXP||xv,me=e.NAMESPACE||pe,z=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$&&(Y=!1),X&&(Z=!0),re&&(B=rv({},[...pv]),U=[],!0===re.html&&(rv(B,av),rv(U,mv)),!0===re.svg&&(rv(B,lv),rv(U,fv),rv(U,vv)),!0===re.svgFilters&&(rv(B,cv),rv(U,fv),rv(U,vv)),!0===re.mathMl&&(rv(B,uv),rv(U,gv),rv(U,vv))),e.ADD_TAGS&&(B===N&&(B=ov(B)),rv(B,e.ADD_TAGS,Ae)),e.ADD_ATTR&&(U===F&&(U=ov(U)),rv(U,e.ADD_ATTR,Ae)),e.ADD_URI_SAFE_ATTR&&rv(ce,e.ADD_URI_SAFE_ATTR,Ae),e.FORBID_CONTENTS&&(oe===se&&(oe=ov(oe)),rv(oe,e.FORBID_CONTENTS,Ae)),ne&&(B["#text"]=!0),q&&rv(B,["html","head","body"]),B.table&&(rv(B,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw tv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,_=A.createHTML("")}else void 0===A&&(A=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(m,r)),null!==A&&"string"==typeof _&&(_=A.createHTML(""));zg&&zg(e),_e=e}},Ee=rv({},["mi","mo","mn","ms","mtext"]),Me=rv({},["foreignobject","desc","title","annotation-xml"]),Se=rv({},["title","style","font","a","script"]),Te=rv({},lv);rv(Te,cv),rv(Te,dv);const ke=rv({},uv);rv(ke,hv);const Le=function(e){$g(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},De=function(e,t){try{$g(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){$g(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!U[e])if(Z||X)try{Le(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ie=function(e){let t,n;if(K)e="<remove></remove>"+e;else{const t=Kg(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ye&&me===pe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=A?A.createHTML(e):e;if(me===pe)try{t=(new p).parseFromString(i,ye)}catch(e){}if(!t||!t.documentElement){t=w.createDocument(me,"template",null);try{t.documentElement.innerHTML=fe?_:i}catch(e){}}const r=t.body||t.documentElement;return e&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),me===pe?E.call(t,q?"html":"body")[0]:q?t.documentElement:r},Re=function(e){return x.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Oe=function(e){return"object"==typeof l?e instanceof l:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Pe=function(e,t,i){S[e]&&Gg(S[e],e=>{e.call(n,t,i,_e)})},Be=function(e){let t;if(Pe("beforeSanitizeElements",e,null),(i=e)instanceof h&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof u)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return Le(e),!0;var i;const r=Ae(e.nodeName);if(Pe("uponSanitizeElement",e,{tagName:r,allowedTags:B}),e.hasChildNodes()&&!Oe(e.firstElementChild)&&(!Oe(e.content)||!Oe(e.content.firstElementChild))&&ev(/<[/\w]/g,e.innerHTML)&&ev(/<[/\w]/g,e.textContent))return Le(e),!0;if(!B[r]||H[r]){if(!H[r]&&Ue(r)){if(z.tagNameCheck instanceof RegExp&&ev(z.tagNameCheck,r))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(r))return!1}if(ne&&!oe[r]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i)t.insertBefore(g(n[i],!0),v(e))}}return Le(e),!0}return e instanceof c&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:me,tagName:"template"});const n=qg(e.tagName),i=qg(t.tagName);return!!ge[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===pe?"svg"===n:t.namespaceURI===ue?"svg"===n&&("annotation-xml"===i||Ee[i]):Boolean(Te[n]):e.namespaceURI===ue?t.namespaceURI===pe?"math"===n:t.namespaceURI===he?"math"===n&&Me[i]:Boolean(ke[n]):e.namespaceURI===pe?!(t.namespaceURI===he&&!Me[i])&&!(t.namespaceURI===ue&&!Ee[i])&&!ke[n]&&(Se[n]||!Te[n]):!("application/xhtml+xml"!==ye||!ge[e.namespaceURI]))}(e)?(Le(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!ev(/<\/no(script|embed|frames)/i,e.innerHTML)?($&&3===e.nodeType&&(t=e.textContent,t=Zg(t,T," "),t=Zg(t,k," "),t=Zg(t,L," "),e.textContent!==t&&($g(n.removed,{element:e.cloneNode()}),e.textContent=t)),Pe("afterSanitizeElements",e,null),!1):(Le(e),!0)},Ne=function(e,t,n){if(ee&&("id"===t||"name"===t)&&(n in o||n in we))return!1;if(Y&&!j[t]&&ev(D,t));else if(V&&ev(I,t));else if(!U[t]||j[t]){if(!(Ue(e)&&(z.tagNameCheck instanceof RegExp&&ev(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&ev(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&ev(z.tagNameCheck,n)||z.tagNameCheck instanceof Function&&z.tagNameCheck(n))))return!1}else if(ce[t]);else if(ev(P,Zg(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Xg(n,"data:")||!ae[e]){if(G&&!ev(R,Zg(n,O,"")));else if(n)return!1}else;return!0},Ue=function(e){return e.indexOf("-")>0},Fe=function(e){let t,n,i,r;Pe("beforeSanitizeAttributes",e,null);const{attributes:o}=e;if(!o)return;const s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(r=o.length;r--;){t=o[r];const{name:a,namespaceURI:l}=t;n="value"===a?t.value:Jg(t.value);const c=n;if(i=Ae(a),s.attrName=i,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,Pe("uponSanitizeAttribute",e,s),n=s.attrValue,s.forceKeepAttr)continue;if(!s.keepAttr){De(a,e);continue}if(!Q&&ev(/\/>/i,n)){De(a,e);continue}$&&(n=Zg(n,T," "),n=Zg(n,k," "),n=Zg(n,L," "));const d=Ae(e.nodeName);if(Ne(d,i,n)){if(!te||"id"!==i&&"name"!==i||(De(a,e),n="user-content-"+n),A&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(l);else switch(m.getAttributeType(d,i)){case"TrustedHTML":n=A.createHTML(n);break;case"TrustedScriptURL":n=A.createScriptURL(n)}if(n!==c)try{l?e.setAttributeNS(l,a,n):e.setAttribute(a,n)}catch(t){De(a,e)}}else De(a,e)}Pe("afterSanitizeAttributes",e,null)},ze=function e(t){let n;const i=Re(t);for(Pe("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Pe("uponSanitizeShadowNode",n,null),Be(n)||(n.content instanceof s&&e(n.content),Fe(n));Pe("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t,r,o,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(fe=!e,fe&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Oe(e)){if("function"!=typeof e.toString)throw tv("toString is not a function");if("string"!=typeof(e=e.toString()))throw tv("dirty is not a string, aborting")}if(!n.isSupported)return e;if(W||Ce(c),n.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=Ae(e.nodeName);if(!B[t]||H[t])throw tv("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)t=Ie("\x3c!----\x3e"),r=t.ownerDocument.importNode(e,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?t=r:t.appendChild(r);else{if(!Z&&!$&&!q&&-1===e.indexOf("<"))return A&&J?A.createHTML(e):e;if(t=Ie(e),!t)return Z?null:J?_:""}t&&K&&Le(t.firstChild);const d=Re(ie?e:t);for(;o=d.nextNode();)Be(o)||(o.content instanceof s&&ze(o.content),Fe(o));if(ie)return e;if(Z){if(X)for(a=C.call(t.ownerDocument);t.firstChild;)a.appendChild(t.firstChild);else a=t;return(U.shadowroot||U.shadowrootmode)&&(a=M.call(i,a,!0)),a}let u=q?t.outerHTML:t.innerHTML;return q&&B["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&ev(Mv,t.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+u),$&&(u=Zg(u,T," "),u=Zg(u,k," "),u=Zg(u,L," ")),A&&J?A.createHTML(u):u},n.setConfig=function(e){Ce(e),W=!0},n.clearConfig=function(){_e=null,W=!1},n.isValidAttribute=function(e,t,n){_e||Ce({});const i=Ae(e),r=Ae(t);return Ne(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&(S[e]=S[e]||[],$g(S[e],t))},n.removeHook=function(e){if(S[e])return Qg(S[e])},n.removeHooks=function(e){S[e]&&(S[e]=[])},n.removeAllHooks=function(){S={}},n}();const Lv=e=>kv().sanitize(e);var Dv=tinymce.util.Tools.resolve("tinymce.util.I18n");const Iv={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},Rv="temporary-placeholder",Ov=e=>()=>ve(e,Rv).getOr("!not found!"),Pv=(e,t)=>{const n=e.toLowerCase();if(Dv.isRtl()){const e=((e,t)=>ke(e,t)?e:((e,t)=>e+t)(e,t))(n,"-rtl");return ye(t,e)?e:n}return n},Bv=(e,t)=>ve(t,Pv(e,t)),Nv=(e,t)=>{const n=t();return Bv(e,n).getOrThunk(Ov(n))},Uv=()=>Uf("add-focusable",[as(e=>{Ra(e.element,"svg").each(e=>xt(e,"focusable","false"))})]),Fv=(e,t,n,i)=>{var r,o;const s=(e=>!!Dv.isRtl()&&ye(Iv,e))(t)?["tox-icon--flip"]:[],a=ve(n,Pv(t,n)).or(i).getOrThunk(Ov(n));return{dom:{tag:e.tag,attributes:null!==(r=e.attributes)&&void 0!==r?r:{},classes:e.classes.concat(s),innerHtml:a},behaviours:$l([...null!==(o=e.behaviours)&&void 0!==o?o:[],Uv()])}},zv=(e,t,n,i=k.none())=>Fv(t,e,n(),i),Hv={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},jv=tp({name:"Notification",factory:e=>{const t=Og({dom:Rg(`<p>${Lv(e.translationProvider(e.text))}</p>`),behaviours:$l([Nf.config({})])}),n=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${e}%`}}}),i=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${e}%`}}),r=Og({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},i(0)],behaviours:$l([Nf.config({})])}),o={updateProgress:(e,t)=>{e.getSystem().isConnected()&&r.getOpt(e).each(e=>{Nf.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},i(t)])})},updateText:(e,n)=>{if(e.getSystem().isConnected()){const i=t.get(e);Nf.set(i,[wa(n)])}}},s=$([e.icon.toArray(),e.level.toArray(),e.level.bind(e=>k.from(Hv[e])).toArray()]),a=Og(Ig.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[zv("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),l=((e,t,n)=>{const i=n(),r=G(e,e=>ye(i,Pv(e,i)));return Fv(t,r.getOr(Rv),i,k.none())})(s,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),c=[l,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:$l([Nf.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(e=>["tox-notification","tox-notification--in",`tox-notification--${e}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:$l([Vf.config({}),Uf("notification-events",[Jo(ro(),e=>{a.getOpt(e).each(Vf.focus)})])]),components:c.concat(e.progress?[r.asSpec()]:[]).concat(e.closeButton?[a.asSpec()]:[]),apis:o}},configFields:[yr("level"),cr("progress"),yr("icon"),cr("onAction"),cr("text"),cr("iconProvider"),cr("translationProvider"),Dr("closeButton",!0)],apis:{updateProgress:(e,t,n)=>{e.updateProgress(t,n)},updateText:(e,t,n)=>{e.updateText(t,n)}}});var Vv,Yv,Gv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qv=tinymce.util.Tools.resolve("tinymce.EditorManager"),$v=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(Vv||(Vv={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(Yv||(Yv={}));const qv=e=>t=>t.options.get(e),Wv=e=>t=>k.from(e(t)),Kv=e=>{const t=$v.deviceType.isPhone(),n=$v.deviceType.isTablet()||t,i=e.options.register,r=e=>o(e)||!1===e,s=e=>o(e)||f(e);i("skin",{processor:e=>o(e)||!1===e,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:s,default:Math.max(e.getElement().offsetHeight,400)}),i("width",{processor:s,default:Gv.DOM.getStyle(e.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:e=>o(e)||d(e),default:!t}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:e=>d(e)||o(e)||l(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),N(9,e=>{i("toolbar"+(e+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Yv.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:e.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:r,default:"#top"}),i("anchor_bottom",{processor:r,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:e=>"both"===e||d(e),default:!$v.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},Zv=qv("readonly"),Xv=qv("height"),Jv=qv("width"),ey=Wv(qv("min_width")),ty=Wv(qv("min_height")),ny=Wv(qv("max_width")),iy=Wv(qv("max_height")),ry=Wv(qv("style_formats")),oy=qv("style_formats_merge"),sy=qv("style_formats_autohide"),ay=qv("content_langs"),ly=qv("removed_menuitems"),cy=qv("toolbar_mode"),dy=qv("toolbar_groups"),uy=qv("toolbar_location"),hy=qv("fixed_toolbar_container"),py=qv("fixed_toolbar_container_target"),my=qv("toolbar_persist"),fy=qv("toolbar_sticky_offset"),gy=qv("menubar"),vy=qv("toolbar"),yy=qv("file_picker_callback"),by=qv("file_picker_validator_handler"),Ay=qv("font_size_input_default_unit"),_y=qv("file_picker_types"),wy=qv("typeahead_urls"),xy=qv("anchor_top"),Cy=qv("anchor_bottom"),Ey=qv("draggable_modal"),My=qv("statusbar"),Sy=qv("elementpath"),Ty=qv("branding"),ky=qv("resize"),Ly=qv("paste_as_text"),Dy=qv("sidebar_show"),Iy=qv("promotion"),Ry=qv("help_accessibility"),Oy=qv("default_font_stack"),Py=e=>!1===e.options.get("skin"),By=e=>!1!==e.options.get("menubar"),Ny=e=>{const t=e.options.get("skin_url");if(Py(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const t=e.options.get("skin");return Qv.baseURL+"/skins/ui/"+t}},Uy=e=>k.from(e.options.get("skin_url")),Fy=e=>e.options.get("line_height_formats").split(" "),zy=e=>{const t=vy(e),n=o(t),i=l(t)&&t.length>0;return!jy(e)&&(i||n||!0===t)},Hy=e=>{const t=N(9,t=>e.options.get("toolbar"+(t+1))),n=j(t,o);return Ce(n.length>0,n)},jy=e=>Hy(e).fold(()=>{const t=vy(e);return g(t,o)&&t.length>0},T),Vy=e=>uy(e)===Yv.bottom,Yy=e=>{var t;if(!e.inline)return k.none();const n=null!==(t=hy(e))&&void 0!==t?t:"";if(n.length>0)return Oa(At(),n);const i=py(e);return p(i)?k.some(Pe.fromDom(i)):k.none()},Gy=e=>e.inline&&Yy(e).isSome(),Qy=e=>Yy(e).getOrThunk(()=>ft(mt(Pe.fromDom(e.getElement())))),$y=e=>e.inline&&!By(e)&&!zy(e)&&!jy(e),qy=e=>(e.options.get("toolbar_sticky")||e.inline)&&!Gy(e)&&!$y(e),Wy=e=>!Gy(e)&&"split"===e.options.get("ui_mode"),Ky=e=>{const t=e.options.get("menu");return ce(t,e=>({...e,items:e.items}))};var Zy=Object.freeze({__proto__:null,get ToolbarMode(){return Vv},get ToolbarLocation(){return Yv},register:Kv,getSkinUrl:Ny,getSkinUrlOption:Uy,isReadOnly:Zv,isSkinDisabled:Py,getHeightOption:Xv,getWidthOption:Jv,getMinWidthOption:ey,getMinHeightOption:ty,getMaxWidthOption:ny,getMaxHeightOption:iy,getUserStyleFormats:ry,shouldMergeStyleFormats:oy,shouldAutoHideStyleFormats:sy,getLineHeightFormats:Fy,getContentLanguages:ay,getRemovedMenuItems:ly,isMenubarEnabled:By,isMultipleToolbars:jy,isToolbarEnabled:zy,isToolbarPersist:my,getMultipleToolbarsOption:Hy,getUiContainer:Qy,useFixedContainer:Gy,isSplitUiMode:Wy,getToolbarMode:cy,isDraggableModal:Ey,isDistractionFree:$y,isStickyToolbar:qy,getStickyToolbarOffset:fy,getToolbarLocation:uy,isToolbarLocationBottom:Vy,getToolbarGroups:dy,getMenus:Ky,getMenubar:gy,getToolbar:vy,getFilePickerCallback:yy,getFilePickerTypes:_y,useTypeaheadUrls:wy,getAnchorTop:xy,getAnchorBottom:Cy,getFilePickerValidatorHandler:by,getFontSizeInputDefaultUnit:Ay,useStatusBar:My,useElementPath:Sy,promotionEnabled:Iy,useBranding:Ty,getResize:ky,getPasteAsText:Ly,getSidebarShow:Dy,useHelpAccessibility:Ry,getDefaultFontStack:Oy});const Xy="[data-mce-autocompleter]",Jy=e=>Pa(e,Xy),eb=(e,t)=>{const n=(e,t)=>{Go(e,so(),{raw:t})},i=()=>e.getMenu().bind(Dp.getHighlighted);t.on("keydown",t=>{const r=t.which;e.isActive()&&(e.isMenuOpen()?13===r?(i().each(Qo),t.preventDefault()):40===r?(i().fold(()=>{e.getMenu().each(Dp.highlightFirst)},e=>{n(e,t)}),t.preventDefault(),t.stopImmediatePropagation()):37!==r&&38!==r&&39!==r||i().each(e=>{n(e,t),t.preventDefault(),t.stopImmediatePropagation()}):13!==r&&38!==r&&40!==r||e.cancelIfNecessary())}),t.on("NodeChange",t=>{e.isActive()&&!e.isProcessingAction()&&Jy(Pe.fromDom(t.element)).isNone()&&e.cancelIfNecessary()})};var tb;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(tb||(tb={}));var nb=tb;const ib="tox-menu-nav__js",rb="tox-collection__item",ob="tox-swatch",sb={normal:ib,color:ob},ab="tox-collection__item--enabled",lb="tox-collection__item-icon",cb="tox-collection__item-label",db="tox-collection__item-caret",ub="tox-collection__item--active",hb="tox-collection__item-container",pb="tox-collection__item-container--row",mb=e=>ve(sb,e).getOr(ib),fb=e=>"color"===e?"tox-swatches":"tox-menu",gb=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:fb(e),tieredMenu:"tox-tiered-menu"}),vb=e=>{const t=gb(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:mb(e)}},yb=(e,t,n)=>{const i=gb(n);return{tag:"div",classes:$([[i.menu,`tox-menu-${t}-column`],e?[i.hasIcons]:[]])}},bb=[Ag.parts.items({})],Ab=(e,t,n)=>{const i=gb(n);return{dom:{tag:"div",classes:$([[i.tieredMenu]])},markers:vb(n)}},_b=A([yr("data"),Mr("inputAttributes",{}),Mr("inputStyles",{}),Mr("tag","input"),Mr("inputClasses",[]),el("onSetValue"),Mr("styles",{}),Mr("eventOrder",{}),Xu("inputBehaviours",[Zu,Vf]),Mr("selectOnFocus",!0)]),wb=e=>$l([Vf.config({onFocus:e.selectOnFocus?e=>{const t=e.element,n=ca(t);t.dom.setSelectionRange(0,n.length)}:v})]),xb=e=>({...wb(e),...eh(e.inputBehaviours,[Zu.config({store:{mode:"manual",...e.data.map(e=>({initialValue:e})).getOr({}),getValue:e=>ca(e.element),setValue:(e,t)=>{ca(e.element)!==t&&da(e.element,t)}},onSetValue:e.onSetValue})])}),Cb=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),Eb=tp({name:"Input",configFields:_b(),factory:(e,t)=>({uid:e.uid,dom:Cb(e),components:[],behaviours:xb(e),eventOrder:e.eventOrder})}),Mb=bs("refetch-trigger-event"),Sb=bs("redirect-menu-item-interaction"),Tb="tox-menu__searcher",kb=e=>Oa(e.element,`.${Tb}`).bind(t=>e.getSystem().getByDom(t).toOptional()),Lb=kb,Db=e=>({fetchPattern:Zu.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),Ib=e=>{const t=(e,t)=>(t.cut(),k.none()),n=(e,t)=>{const n={interactionEvent:t.event,eventType:t.event.raw.type};return Go(e,Sb,n),k.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[rb]},components:[Eb.sketch({inputClasses:[Tb,"tox-textfield"],inputAttributes:{...e.placeholder.map(t=>({placeholder:e.i18n(t)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:$l([Uf(i,[Jo(lo(),e=>{Yo(e,Mb)}),Jo(so(),(e,t)=>{"Escape"===t.event.raw.key&&t.stop()})]),Tf.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:n,onEscape:n,onUp:n,onDown:n})]),eventOrder:{keydown:[i,Tf.name()]}})]}},Rb="tox-collection--results__js",Ob=e=>{var t;return e.dom?{...e,dom:{...e.dom,attributes:{...null!==(t=e.dom.attributes)&&void 0!==t?t:{},id:bs("aria-item-search-result-id"),"aria-selected":"false"}}}:e},Pb=(e,t)=>n=>{const i=U(n,t);return F(i,t=>({dom:e,components:t}))},Bb=(e,t)=>{const n=[];let i=[];return z(e,(e,r)=>{t(e,r)?(i.length>0&&n.push(i),i=[],(ye(e.dom,"innerHtml")||e.components&&e.components.length>0)&&i.push(e)):i.push(e)}),i.length>0&&n.push(i),F(n,e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e}))},Nb=(e,t,n)=>Ag.parts.items({preprocess:i=>{const r=F(i,n);return"auto"!==e&&e>1?Pb({tag:"div",classes:["tox-collection__group"]},e)(r):Bb(r,(e,n)=>"separator"===t[n].type)}}),Ub=(e,t,n=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Nb(e,t,_)]}),Fb=e=>B(e,e=>"icon"in e&&void 0!==e.icon),zb=e=>(console.error(ir(e)),console.log(e),k.none()),Hb=(e,t,n,i,r)=>{const o=(s=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Ag.parts.items({preprocess:e=>Bb(e,(e,t)=>"separator"===s[t].type)})]});var s;return{value:e,dom:o.dom,components:o.components,items:n}},jb=(e,t,n,i,r)=>{const o=()=>"searchable"!==r.menuType?Ub(i,n):"search-with-field"===r.searchMode.searchMode?((e,t,n)=>{const i=bs("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[Ib({i18n:Dv.translate,placeholder:n.placeholder}),{dom:{tag:"div",classes:[...1===e?["tox-collection--list"]:["tox-collection--grid"],Rb],attributes:{id:i}},components:[Nb(e,t,Ob)]}]}})(i,n,r.searchMode):((e,t)=>{const n=bs("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Rb].concat(1===e?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:n}},components:[Nb(e,t,Ob)]}})(i,n);if("color"===r.menuType){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Ag.parts.items({preprocess:"auto"!==e?Pb({tag:"div",classes:["tox-swatches__row"]},e):_})]}]}))(i);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r.menuType&&"auto"===i){const t=Ub(i,n);return{value:e,dom:t.dom,components:t.components,items:n}}if("normal"===r.menuType||"searchable"===r.menuType){const t=o();return{value:e,dom:t.dom,components:t.components,items:n}}if("listpreview"===r.menuType&&"auto"!==i){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Ag.parts.items({preprocess:Pb({tag:"div",classes:["tox-collection__group"]},e)})]}))(i);return{value:e,dom:t.dom,components:t.components,items:n}}return{value:e,dom:yb(t,i,r.menuType),components:bb,items:n}},Vb=hr("type"),Yb=hr("name"),Gb=hr("label"),Qb=hr("text"),$b=hr("title"),qb=hr("icon"),Wb=hr("value"),Kb=mr("fetch"),Zb=mr("getSubmenuItems"),Xb=mr("onAction"),Jb=mr("onItemAction"),eA=Ir("onSetup",()=>v),tA=_r("name"),nA=_r("text"),iA=_r("icon"),rA=_r("tooltip"),oA=_r("label"),sA=_r("shortcut"),aA=xr("select"),lA=Dr("active",!1),cA=Dr("borderless",!1),dA=Dr("enabled",!0),uA=Dr("primary",!1),hA=e=>Mr("columns",e),pA=Mr("meta",{}),mA=Ir("onAction",v),fA=e=>kr("type",e),gA=e=>sr("name","name",wi(()=>bs(`${e}-name`)),Gi),vA=Ni([Vb,nA]),yA=Ni([fA("autocompleteitem"),lA,dA,pA,Wb,nA,iA]),bA=[dA,rA,iA,nA,eA],AA=Ni([Vb,Xb].concat(bA)),_A=e=>er("toolbarbutton",AA,e),wA=[lA].concat(bA),xA=Ni(wA.concat([Vb,Xb])),CA=e=>er("ToggleButton",xA,e),EA=[Ir("predicate",S),Lr("scope","node",["node","editor"]),Lr("position","selection",["node","selection","line"])],MA=bA.concat([fA("contextformbutton"),uA,Xb,ar("original",_)]),SA=wA.concat([fA("contextformbutton"),uA,Xb,ar("original",_)]),TA=bA.concat([fA("contextformbutton")]),kA=wA.concat([fA("contextformtogglebutton")]),LA=rr("type",{contextformbutton:MA,contextformtogglebutton:SA}),DA=Ni([fA("contextform"),Ir("initValue",A("")),oA,vr("commands",LA),br("launch",rr("type",{contextformbutton:TA,contextformtogglebutton:kA}))].concat(EA)),IA=Ni([fA("contexttoolbar"),hr("items")].concat(EA)),RA=[Vb,hr("src"),_r("alt"),Rr("classes",[],Gi)],OA=Ni(RA),PA=[Vb,Qb,tA,Rr("classes",["tox-collection__item-label"],Gi)],BA=Ni(PA),NA=Oi(()=>Zi("type",{cardimage:OA,cardtext:BA,cardcontainer:UA})),UA=Ni([Vb,kr("direction","horizontal"),kr("align","left"),kr("valign","middle"),vr("items",NA)]),FA=[dA,nA,sA,(zA="menuitem",sr("value","value",wi(()=>bs(`${zA}-value`)),ji())),pA];var zA;const HA=Ni([Vb,oA,vr("items",NA),eA,mA].concat(FA)),jA=Ni([Vb,lA,iA].concat(FA)),VA=[Vb,hr("fancytype"),mA],YA=[Mr("initData",{})].concat(VA),GA=[xr("select"),Or("initData",{},[Dr("allowCustomColors",!0),kr("storageKey","default"),Cr("colors",ji())])].concat(VA),QA=rr("fancytype",{inserttable:YA,colorswatch:GA}),$A=Ni([Vb,eA,mA,iA].concat(FA)),qA=Ni([Vb,Zb,eA,iA].concat(FA)),WA=Ni([Vb,iA,lA,eA,Xb].concat(FA)),KA=(e,t,n)=>{const i=Ed(e.element,"."+n);if(i.length>0){const e=Q(i,e=>{const n=e.dom.getBoundingClientRect().top,r=i[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>t}).getOr(i.length);return k.some({numColumns:e,numRows:Math.ceil(i.length/e)})}return k.none()},ZA=(e,t)=>$l([Uf(e,t)]),XA=e=>ZA(bs("unnamed-events"),e),JA=bs("tooltip.exclusive"),e_=bs("tooltip.show"),t_=bs("tooltip.hide"),n_=(e,t,n)=>{e.getSystem().broadcastOn([JA],{})};var i_=Object.freeze({__proto__:null,hideAllExclusive:n_,setComponents:(e,t,n,i)=>{n.getTooltip().each(e=>{e.getSystem().isConnected()&&Nf.set(e,i)})}});var r_=Object.freeze({__proto__:null,events:(e,t)=>{const n=n=>{t.getTooltip().each(i=>{fu(i),e.onHide(n,i),t.clearTooltip()}),t.clearTimer()};return Ko($([[Jo(e_,n=>{t.resetTimer(()=>{(n=>{if(!t.isShowing()){n_(n);const i=e.lazySink(n).getOrDie(),r=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Ko("normal"===e.mode?[Jo(io(),e=>{Yo(n,e_)}),Jo(to(),e=>{Yo(n,t_)})]:[]),behaviours:$l([Nf.config({})])});t.setTooltip(r),hu(i,r),e.onShow(n,r),ru.position(i,r,{anchor:e.anchor(n)})}})(n)},e.delay)}),Jo(t_,i=>{t.resetTimer(()=>{n(i)},e.delay)}),Jo(_o(),(e,t)=>{const i=t;i.universal||P(i.channels,JA)&&n(e)}),ls(e=>{n(e)})],"normal"===e.mode?[Jo(ro(),e=>{Yo(e,e_)}),Jo(bo(),e=>{Yo(e,t_)}),Jo(io(),e=>{Yo(e,e_)}),Jo(to(),e=>{Yo(e,t_)})]:[Jo(jo(),(e,t)=>{Yo(e,e_)}),Jo(Vo(),e=>{Yo(e,t_)})]]))}}),o_=[cr("lazySink"),cr("tooltipDom"),Mr("exclusive",!0),Mr("tooltipComponents",[]),Mr("delay",300),Lr("mode","normal",["normal","follow-highlight"]),Mr("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:A([Il,Dl,Sl,kl,Tl,Ll]),onRtl:A([Il,Dl,Sl,kl,Tl,Ll])}})),el("onHide"),el("onShow")];var s_=Object.freeze({__proto__:null,init:()=>{const e=Cc(),t=Cc(),n=()=>{e.on(clearTimeout)},i=A("not-implemented");return Ns({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:(t,i)=>{n(),e.set(setTimeout(t,i))},readState:i})}});const a_=Wl({fields:o_,name:"tooltipping",active:r_,state:s_,apis:i_}),l_="silver.readonly",c_=Ni([(d_="readonly",dr(d_,Qi))]);var d_;const u_=(e,t)=>{const n=e.mainUi.outerContainer.element,i=[e.mainUi.mothership,...e.uiMotherships];t&&z(i,e=>{e.broadcastOn([Iu()],{target:n})}),z(i,e=>{e.broadcastOn([l_],{readonly:t})})},h_=(e,t)=>{e.on("init",()=>{e.mode.isReadOnly()&&u_(t,!0)}),e.on("SwitchMode",()=>u_(t,e.mode.isReadOnly())),Zv(e)&&e.mode.set("readonly")},p_=()=>Jl.config({channels:{[l_]:{schema:c_,onReceive:(e,t)=>{Ap.set(e,t.readonly)}}}}),m_=e=>Ap.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),f_=e=>Ap.config({disabled:e}),g_=e=>Ap.config({disabled:e,disableClass:"tox-tbtn--disabled"}),v_=e=>Ap.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),y_=(e,t)=>{const n=e.getApi(t);return e=>{e(n)}},b_=(e,t)=>as(n=>{y_(e,n)(n=>{const i=e.onSetup(n);m(i)&&t.set(i)})}),A_=(e,t)=>ls(n=>y_(e,n)(t.get())),__=(e,t)=>ds((n,i)=>{y_(e,n)(e.onAction),e.triggersSubmenu||t!==nb.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&Yo(n,Mo()),i.stop())}),w_={[wo()]:["disabling","alloy.base.behaviour","toggling","item-events"]},x_=_e,C_=(e,t,n,i)=>{const r=Pr(v);return{type:"item",dom:t.dom,components:x_(t.optComponents),data:e.data,eventOrder:w_,hasSubmenu:e.triggersSubmenu,itemBehaviours:$l([Uf("item-events",[__(e,n),b_(e,r),A_(e,r)]),m_(()=>!e.enabled||i.isDisabled()),p_(),Nf.config({})].concat(e.itemBehaviours))}},E_=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),M_=e=>{const t=$v.os.isMacOS()||$v.os.isiOS(),n=t?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},i=e.split("+"),r=F(i,e=>{const t=e.toLowerCase().trim();return ye(n,t)?n[t]:e});return t?r.join(""):r.join("+")},S_=(e,t,n=[lb])=>zv(e,{tag:"div",classes:n},t),T_=e=>({dom:{tag:"div",classes:[cb]},components:[wa(Dv.translate(e))]}),k_=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),L_=(e,t)=>({dom:{tag:"div",classes:[cb]},components:[{dom:{tag:e.tag,styles:e.styles},components:[wa(Dv.translate(t))]}]}),D_=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[wa(M_(e))]}),I_=e=>S_("checkmark",e,["tox-collection__item-checkmark"]),R_=(e,t,n)=>{const i=e.ariaLabel,r=e.value,o=e.iconContent.map(e=>((e,t,n)=>{const i=t();return Bv(e,i).or(n).getOrThunk(Ov(i))})(e,t.icons,n));return{dom:(()=>{const e=ob,n=o.getOr(""),s=i.map(e=>({title:t.translate(e)})).getOr({}),a={tag:"div",attributes:s,classes:[e]};return"custom"===r?{...a,tag:"button",classes:[...a.classes,"tox-swatches__picker-btn"],innerHtml:n}:"remove"===r?{...a,classes:[...a.classes,"tox-swatch--remove"],innerHtml:n}:p(r)?{...a,attributes:{...a.attributes,"data-mce-color":r},styles:{"background-color":r},innerHtml:n}:a})(),optComponents:[]}},O_=e=>{const t=e.map(e=>({attributes:{title:Dv.translate(e),id:bs("menu-item")}})).getOr({});return{tag:"div",classes:[ib,rb],...t}},P_=(e,t,n,i=k.none())=>"color"===e.presets?R_(e,t,i):((e,t,n,i)=>{const r={tag:"div",classes:[lb]},o=n?e.iconContent.map(e=>zv(e,r,t.icons,i)).orThunk(()=>k.some({dom:r})):k.none(),s=e.checkMark,a=k.from(e.meta).fold(()=>T_,e=>ye(e,"style")?x(L_,e.style):T_),l=e.htmlContent.fold(()=>e.textContent.map(a),e=>k.some(k_(e,[cb])));return{dom:O_(e.ariaLabel),optComponents:[o,l,e.shortcutContent.map(D_),s,e.caret]}})(e,t,n,i),B_=(e,t)=>ve(e,"tooltipWorker").map(e=>[a_.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:Fc}}),mode:"follow-highlight",onShow:(t,n)=>{e(e=>{a_.setComponents(t,[xa({element:Pe.fromDom(e)})])})}})]).getOr([]),N_=(e,t)=>{const n=(e=>Gv.DOM.encode(e))(Dv.translate(e));if(t.length>0){const e=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return n.replace(e,e=>`<span class="tox-autocompleter-highlight">${e}</span>`)}return n},U_=(e,t)=>F(e,e=>{switch(e.type){case"cardcontainer":return((e,t)=>{const n="vertical"===e.direction?"tox-collection__item-container--column":pb,i="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[hb,n,i,(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}})(e,U_(e.items,t));case"cardimage":return((e,t,n)=>({dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}))(e.src,e.classes,e.alt);case"cardtext":const n=e.name.exists(e=>P(t.cardText.highlightOn,e)),i=n?k.from(t.cardText.matchText).getOr(""):"";return k_(N_(e.text,i),e.classes)}}),F_=Oh(pg(),mg()),z_=e=>({value:Y_(e)}),H_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,j_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,V_=e=>H_.test(e)||j_.test(e),Y_=e=>Me(e,"#").toUpperCase(),G_=e=>{const t=(e=>{const t=e.value.replace(H_,(e,t,n,i)=>t+t+n+n+i+i);return{value:t}})(e),n=j_.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Q_=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},$_=e=>{const t=Q_(e.red)+Q_(e.green)+Q_(e.blue);return z_(t)},q_=Math.min,W_=Math.max,K_=Math.round,Z_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,X_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,J_=(e,t,n,i)=>({red:e,green:t,blue:n,alpha:i}),ew=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},tw=e=>{let t,n,i;const r=(e.hue||0)%360;let o=e.saturation/100,s=e.value/100;if(o=W_(0,q_(o,1)),s=W_(0,q_(s,1)),0===o)return t=n=i=K_(255*s),J_(t,n,i,1);const a=r/60,l=s*o,c=l*(1-Math.abs(a%2-1)),d=s-l;switch(Math.floor(a)){case 0:t=l,n=c,i=0;break;case 1:t=c,n=l,i=0;break;case 2:t=0,n=l,i=c;break;case 3:t=0,n=c,i=l;break;case 4:t=c,n=0,i=l;break;case 5:t=l,n=0,i=c;break;default:t=n=i=0}return t=K_(255*(t+d)),n=K_(255*(n+d)),i=K_(255*(i+d)),J_(t,n,i,1)},nw=e=>{const t=G_(e),n=parseInt(t[1],16),i=parseInt(t[2],16),r=parseInt(t[3],16);return J_(n,i,r,1)},iw=(e,t,n,i)=>{const r=parseInt(e,10),o=parseInt(t,10),s=parseInt(n,10),a=parseFloat(i);return J_(r,o,s,a)},rw=e=>{if("transparent"===e)return k.some(J_(0,0,0,0));const t=Z_.exec(e);if(null!==t)return k.some(iw(t[1],t[2],t[3],"1"));const n=X_.exec(e);return null!==n?k.some(iw(n[1],n[2],n[3],n[4])):k.none()},ow=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,sw=J_(255,0,0,1),aw=(e,t)=>{e.dispatch("ResizeContent",t)},lw=(e,t)=>{e.dispatch("TextColorChange",t)},cw=(e,t)=>e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),dw=(e,t)=>()=>{e(),t()},uw=e=>pw(e,"NodeChange",t=>{t.setEnabled(e.selection.isEditable())}),hw=(e,t)=>n=>{const i=uw(e)(n),r=((e,t)=>n=>{const i=xc(),r=()=>{n.setActive(e.formatter.match(t));const r=e.formatter.formatChanged(t,n.setActive);i.set(r)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),i.clear()}})(e,t)(n);return()=>{i(),r()}},pw=(e,t,n)=>i=>{const r=()=>n(i),o=()=>{n(i),e.on(t,r)};return e.initialized?o():e.once("init",o),()=>{e.off("init",o),e.off(t,r)}},mw=e=>t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})},fw=(e,t)=>()=>e.execCommand(t);var gw=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const vw={},yw=e=>ve(vw,e).getOrThunk(()=>{const t=`tinymce-custom-colors-${e}`,n=gw.getItem(t);if(h(n)){const e=gw.getItem("tinymce-custom-colors");gw.setItem(t,p(e)?e:"[]")}const i=((e,t=10)=>{const n=gw.getItem(e),i=o(n)?JSON.parse(n):[],r=t-(s=i).length<0?s.slice(0,t):s;var s;const a=e=>{r.splice(e,1)};return{add:n=>{O(r,n).each(a),r.unshift(n),r.length>t&&r.pop(),gw.setItem(e,JSON.stringify(r))},state:()=>r.slice(0)}})(t,10);return vw[e]=i,i}),bw=(e,t)=>{yw(e).add(t)},Aw=(e,t,n)=>({hue:e,saturation:t,value:n}),_w=e=>{let t=0,n=0,i=0;const r=e.red/255,o=e.green/255,s=e.blue/255,a=Math.min(r,Math.min(o,s)),l=Math.max(r,Math.max(o,s));if(a===l)return i=a,Aw(0,0,100*i);return t=r===a?3:s===a?1:5,t=60*(t-(r===a?o-s:s===a?r-o:s-r)/(l-a)),n=(l-a)/l,i=l,Aw(Math.round(t),Math.round(100*n),Math.round(100*i))},ww=e=>$_(tw(e)),xw=e=>{return(t=e,V_(t)?k.some({value:Y_(t)}):k.none()).orThunk(()=>rw(e).map($_)).getOrThunk(()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);const i=n.getImageData(0,0,1,1).data,r=i[0],o=i[1],s=i[2],a=i[3];return $_(J_(r,o,s,a))});var t},Cw="forecolor",Ew="hilitecolor",Mw=e=>{const t=[];for(let n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+xw(e[n]).value,icon:"checkmark",type:"choiceitem"});return t},Sw=e=>t=>t.options.get(e),Tw="#000000",kw=(e,t)=>t===Cw&&e.options.isSet("color_map_foreground")?Sw("color_map_foreground")(e):t===Ew&&e.options.isSet("color_map_background")?Sw("color_map_background")(e):Sw("color_map")(e),Lw=(e,t="default")=>Math.max(5,Math.ceil(Math.sqrt(kw(e,t).length))),Dw=(e,t)=>{const n=Sw("color_cols")(e),i=Lw(e,t);return n===Lw(e)?i:n},Iw=(e,t="default")=>Math.round(t===Cw?Sw("color_cols_foreground")(e):t===Ew?Sw("color_cols_background")(e):Sw("color_cols")(e)),Rw=Sw("custom_colors"),Ow=Sw("color_default_foreground"),Pw=Sw("color_default_background"),Bw=e=>Vr(e,e=>{if(Ye(e)){const t=Ot(e,"background-color");return Ce((e=>rw(e).exists(e=>0!==e.alpha))(t),t)}return k.none()}).getOr("rgba(0, 0, 0, 0)"),Nw=(e,t)=>{const n=Pe.fromDom(e.selection.getStart()),i="hilitecolor"===t?Bw(n):Ot(n,"color");return rw(i).map(e=>"#"+$_(e).value)},Uw=e=>{const t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},Fw=(e,t,n,i)=>{if("custom"===n){qw(e)(n=>{n.each(n=>{bw(t,n),e.execCommand("mceApplyTextcolor",t,n),i(n)})},Nw(e,t).getOr(Tw))}else"remove"===n?(i(""),e.execCommand("mceRemoveTextcolor",t)):(i(n),e.execCommand("mceApplyTextcolor",t,n))},zw=(e,t,n)=>e.concat((e=>F(yw(e).state(),e=>({type:"choiceitem",text:e,icon:"checkmark",value:e})))(t).concat(Uw(n))),Hw=(e,t,n)=>i=>{i(zw(e,t,n))},jw=(e,t,n)=>{const i="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(i,n)},Vw=(e,t)=>{e.setTooltip(t)},Yw=(e,t)=>n=>{const i=Nw(e,t);return Ae(i,n.toUpperCase())},Gw=(e,t,n)=>{if(Ie(n))return"forecolor"===t?"Text color":"Background color";const i="forecolor"===t?"Text color {0}":"Background color {0}",r=zw(kw(e,t),t,!1),o=G(r,e=>e.value===n).getOr({text:""}).text;return e.translate([i,e.translate(o)])},Qw=(e,t,n,i)=>{e.ui.registry.addSplitButton(t,{tooltip:Gw(e,n,i.get()),presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:Yw(e,n),columns:Iw(e,n),fetch:Hw(kw(e,n),n,Rw(e)),onAction:t=>{Fw(e,n,i.get(),v)},onItemAction:(r,o)=>{Fw(e,n,o,n=>{i.set(n),lw(e,{name:t,color:n})})},onSetup:r=>{jw(r,t,i.get());const o=i=>{i.name===t&&(jw(r,i.name,i.color),Vw(r,Gw(e,n,i.color)))};return e.on("TextColorChange",o),dw(uw(e)(r),()=>{e.off("TextColorChange",o)})}})},$w=(e,t,n,i,r)=>{e.ui.registry.addNestedMenuItem(t,{text:i,icon:"forecolor"===t?"text-color":"highlight-bg-color",onSetup:i=>(Vw(i,Gw(e,n,r.get())),jw(i,t,r.get()),uw(e)(i)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:Yw(e,n),initData:{storageKey:n},onAction:i=>{Fw(e,n,i.value,n=>{r.set(n),lw(e,{name:t,color:n})})}}]})},qw=e=>(t,n)=>{let i=!1;const r={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:(e,t)=>{"hex-valid"===t.name&&(i=t.value)},onSubmit:n=>{const r=n.getData().colorpicker;i?(t(k.from(r)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",r]))},onClose:v,onCancel:()=>{t(k.none())}})},Ww=(e,t,n,i,r,o,s,a)=>{const l=Fb(t),c=Kw(t,n,i,"color"!==r?"normal":"color",o,s,a);return jb(e,l,c,i,{menuType:r})},Kw=(e,t,n,i,r,o,s)=>_e(F(e,a=>{return"choiceitem"===a.type?(l=a,er("choicemenuitem",jA,l)).fold(zb,a=>k.some(((e,t,n,i,r,o,s,a=!0)=>{const l=P_({presets:n,textContent:t?e.text:k.none(),htmlContent:k.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:k.none(),checkMark:t?k.some(I_(s.icons)):k.none(),caret:k.none(),value:e.value},s,a);return Ai(C_({data:E_(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Zf.set(e,t)},isActive:()=>Zf.isOn(e),isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t)}),onAction:t=>i(e.value),onSetup:e=>(e.setActive(r),v),triggersSubmenu:!1,itemBehaviours:[]},l,o,s),{toggling:{toggleClass:ab,toggleOnExecute:!1,selected:e.active,exclusive:!0}})})(a,1===n,i,t,o(a.value),r,s,Fb(e)))):k.none();var l})),Zw=(e,t)=>{const n=vb(t);if(1===e)return{mode:"menu",moveOnTab:!0};if("auto"===e)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};return{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group"),previousSelector:e=>"color"===t?Oa(e.element,"[aria-checked=true]"):k.none()}},Xw=(e,t)=>{const n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(()=>zw(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,n),e=>e.concat(Uw(n)))},Jw=bs("cell-over"),ex=bs("cell-execute"),tx=(e,t,n)=>{const i=n=>Go(n,ex,{row:e,col:t}),r=(e,t)=>{t.stop(),i(e)};return Ma({dom:{tag:"div",attributes:{role:"button","aria-label":n}},behaviours:$l([Uf("insert-table-picker-cell",[Jo(io(),Vf.focus),Jo(wo(),i),Jo(uo(),r),Jo(Co(),r)]),Zf.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Vf.config({onFocus:n=>Go(n,Jw,{row:e,col:t})})])})},nx=e=>q(e,e=>F(e,Sa)),ix=(e,t)=>wa(`${t}x${e}`),rx={inserttable:(e,t)=>{const n=(e=>(t,n)=>e.shared.providers.translate(["{0} columns, {1} rows",n,t]))(t),i=((e,t,n)=>{const i=[];for(let r=0;r<t;r++){const t=[];for(let i=0;i<n;i++){const n=e(r+1,i+1);t.push(tx(r,i,n))}i.push(t)}return i})(n,10,10),r=ix(0,0),o=Og({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[r],behaviours:$l([Nf.config({})])});return{type:"widget",data:{value:bs("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[F_.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:nx(i).concat(o.asSpec()),behaviours:$l([Uf("insert-table-picker",[as(e=>{Nf.set(o.get(e),[r])}),is(Jw,(e,t,n)=>{const{row:r,col:s}=n.event;((e,t,n,i,r)=>{for(let o=0;o<i;o++)for(let i=0;i<r;i++)Zf.set(e[o][i],o<=t&&i<=n)})(i,r,s,10,10),Nf.set(o.get(e),[ix(r+1,s+1)])}),is(ex,(t,n,i)=>{const{row:r,col:o}=i.event;e.onAction({numRows:r+1,numColumns:o+1}),Yo(t,Mo())})]),Tf.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{const n=Xw(e,t),i=t.colorinput.getColorCols(e.initData.storageKey),r="color",o=Ww(bs("menu-value"),n,t=>{e.onAction({value:t})},i,r,nb.CLOSE_ON_EXECUTE,e.select.getOr(S),t.shared.providers),s={...o,markers:vb(r),movement:Zw(i,r)};return{type:"widget",data:{value:bs("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[F_.widget(Ag.sketch(s))]}}},ox=(e,t,n,i,r,o,s,a=!0)=>{const l=P_({presets:i,textContent:k.none(),htmlContent:n?e.text.map(e=>N_(e,t)):k.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:k.none(),checkMark:k.none(),caret:k.none(),value:e.value},s.providers,a,e.icon);return C_({data:E_(e),enabled:e.enabled,getApi:A({}),onAction:t=>r(e.value,e.meta),onSetup:A(v),triggersSubmenu:!1,itemBehaviours:B_(e.meta,s)},l,o,s.providers)},sx=e=>({type:"separator",dom:{tag:"div",classes:[rb,"tox-collection__group-heading"]},components:e.text.map(wa).toArray()}),ax=(e,t,n,i=!0)=>{const r=P_({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:k.none(),ariaLabel:e.text,caret:k.none(),checkMark:k.none(),shortcutContent:e.shortcut},n,i);return C_({data:E_(e),getApi:e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n)},lx=(e,t,n,i=!0,r=!1)=>{const o=r?(s=n.icons,S_("chevron-down",s,[db])):(e=>S_("chevron-right",e,[db]))(n.icons);var s;const a=P_({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:k.none(),ariaLabel:e.text,caret:k.some(o),checkMark:k.none(),shortcutContent:e.shortcut},n,i);return C_({data:E_(e),getApi:e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t),setIconFill:(t,n)=>{Oa(e.element,`svg path[class="${t}"], rect[class="${t}"]`).each(e=>{xt(e,"fill",n)})},setTooltip:t=>{const i=n.translate(t);Ct(e.element,{"aria-label":i,title:i})}}),enabled:e.enabled,onAction:v,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,t,n)},cx=(e,t,n,i=!0)=>{const r=P_({iconContent:e.icon,textContent:e.text,htmlContent:k.none(),ariaLabel:e.text,checkMark:k.some(I_(n.icons)),caret:k.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,i);return Ai(C_({data:E_(e),enabled:e.enabled,getApi:e=>({setActive:t=>{Zf.set(e,t)},isActive:()=>Zf.isOn(e),isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,n),{toggling:{toggleClass:ab,toggleOnExecute:!1,selected:e.active}})},dx=(e,t)=>ve(rx,e.fancytype).map(n=>n(e,t)),ux=(e,t,n,i)=>{const r={dom:O_(e.label),optComponents:[k.some({dom:{tag:"div",classes:[hb,pb]},components:U_(e.items,i)})]};return C_({data:E_({text:k.none(),...e}),enabled:e.enabled,getApi:e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>{Ap.set(e,!t),z(Ed(e.element,"*"),n=>{e.getSystem().getByDom(n).each(e=>{e.hasConfigured(Ap)&&Ap.set(e,!t)})})}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:k.from(i.itemBehaviours).getOr([])},r,t,n.providers)};var hx=Object.freeze({__proto__:null,getCoupled:(e,t,n,i)=>n.getOrCreate(e,t,i),getExistingCoupled:(e,t,n,i)=>n.getExisting(e,t,i)}),px=[dr("others",Ji(ni.value,ji()))];var mx=Object.freeze({__proto__:null,init:()=>{const e={},t=(t,n)=>{if(0===se(t.others).length)throw new Error("Cannot find any known coupled components");return ve(e,n)},n=A({});return Ns({readState:n,getExisting:(e,n,i)=>t(n,i).orThunk(()=>(ve(n.others,i).getOrDie("No information found for coupled component: "+i),k.none())),getOrCreate:(n,i,r)=>t(i,r).getOrThunk(()=>{const t=ve(i.others,r).getOrDie("No information found for coupled component: "+r)(n),o=n.getSystem().build(t);return e[r]=o,o})})}});const fx=Wl({fields:px,name:"coupling",apis:hx,state:mx}),gx=e=>{let t=k.none(),n=[];const i=e=>{r()?s(e):n.push(e)},r=()=>t.isSome(),o=e=>{z(e,s)},s=e=>{t.each(t=>{setTimeout(()=>{e(t)},0)})};return e(e=>{r()||(t=k.some(e),o(n),n=[])}),{get:i,map:e=>gx(t=>{i(n=>{t(e(n))})}),isReady:r}},vx={nu:gx,pure:e=>gx(t=>{t(e)})},yx=e=>{setTimeout(()=>{throw e},0)},bx=e=>{const t=t=>{e().then(t,yx)};return{map:t=>bx(()=>e().then(t)),bind:t=>bx(()=>e().then(e=>t(e).toPromise())),anonBind:t=>bx(()=>e().then(()=>t.toPromise())),toLazy:()=>vx.nu(t),toCached:()=>{let t=null;return bx(()=>(null===t&&(t=e()),t))},toPromise:e,get:t}},Ax=e=>bx(()=>new Promise(e)),_x=e=>bx(()=>Promise.resolve(e)),wx=A("sink"),xx=A(kh({name:wx(),overrides:A({dom:{tag:"div"},behaviours:$l([ru.config({useFixed:T})]),events:Ko([rs(so()),rs(Jr()),rs(uo())])})})),Cx=(e,t)=>{const n=e.getHotspot(t).getOr(t),i="hotspot",r=e.getAnchorOverrides();return e.layouts.fold(()=>({type:i,hotspot:n,overrides:r}),e=>({type:i,hotspot:n,overrides:r,layouts:e}))},Ex=(e,t,n,i,r,o,s)=>{const a=((e,t,n,i,r,o,s)=>{const a=((e,t,n)=>(0,e.fetch)(n).map(t))(e,t,i),l=kx(i,e);return a.map(e=>e.bind(e=>k.from(kg.sketch({...o.menu(),uid:Ms(""),data:e,highlightOnOpen:s,onOpenMenu:(e,t)=>{const i=l().getOrDie();ru.position(i,t,{anchor:n}),Du.decloak(r)},onOpenSubmenu:(e,t,n)=>{const i=l().getOrDie();ru.position(i,n,{anchor:{type:"submenu",item:t}}),Du.decloak(r)},onRepositionMenu:(e,t,i)=>{const r=l().getOrDie();ru.position(r,t,{anchor:n}),z(i,e=>{ru.position(r,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})})},onEscape:()=>(Vf.focus(i),Du.close(r),k.some(!0))}))))})(e,t,Cx(e,n),n,i,r,s);return a.map(e=>(e.fold(()=>{Du.isOpen(i)&&Du.close(i)},e=>{Du.cloak(i),Du.open(i,e),o(i)}),i))},Mx=(e,t,n,i,r,o,s)=>(Du.close(i),_x(i)),Sx=(e,t,n,i,r,o)=>{const s=fx.getCoupled(n,"sandbox");return(Du.isOpen(s)?Mx:Ex)(e,t,n,s,i,r,o)},Tx=(e,t,n)=>{const i=sp.getCurrent(t).getOr(t),r=Zt(e.element);n?Dt(i.element,"min-width",r+"px"):((e,t)=>{Kt.set(e,t)})(i.element,r)},kx=(e,t)=>e.getSystem().getByUid(t.uid+"-"+wx()).map(e=>()=>ni.value(e)).getOrThunk(()=>t.lazySink.fold(()=>()=>ni.error(new Error("No internal sink is specified, nor could an external sink be found")),t=>()=>t(e))),Lx=e=>{Du.getState(e).each(e=>{kg.repositionMenus(e)})},Dx=(e,t,n)=>{const i=Na(),r=kx(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:nh(e.sandboxBehaviours,[Zu.config({store:{mode:"memory",initialValue:t}}),Du.config({onOpen:(r,o)=>{const s=Cx(e,t);i.link(t.element),e.matchWidth&&Tx(s.hotspot,o,e.useMinWidth),e.onOpen(s,r,o),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,o)},onClose:(e,r)=>{i.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,r)},isPartOf:(e,n,i)=>Fa(n,i)||Fa(t,i),getAttachPoint:()=>r().getOrDie()}),sp.config({find:e=>Du.getState(e).bind(e=>sp.getCurrent(e))}),Jl.config({channels:{...Bu({isExtraPart:S}),...Uu({doReposition:Lx})}})])}},Ix=e=>{const t=fx.getCoupled(e,"sandbox");Lx(t)},Rx=()=>[Mr("sandboxClasses",[]),th("sandboxBehaviours",[sp,Jl,Du,Zu])],Ox=A([cr("dom"),cr("fetch"),el("onOpen"),tl("onExecute"),Mr("getHotspot",k.some),Mr("getAnchorOverrides",A({})),Zc(),Xu("dropdownBehaviours",[Zf,fx,Tf,Vf]),cr("toggleClass"),Mr("eventOrder",{}),yr("lazySink"),Mr("matchWidth",!1),Mr("useMinWidth",!1),yr("role")].concat(Rx())),Px=A([Th({schema:[Za(),Mr("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),xx()]),Bx=np({name:"Dropdown",configFields:Ox(),partFields:Px(),factory:(e,t,n,i)=>{const r=e=>{Du.getState(e).each(e=>{kg.highlightPrimary(e)})},o=(t,n,r)=>Sx(e,_,t,i,n,r),s={expand:e=>{Zf.isOn(e)||o(e,v,Sg.HighlightNone).get(v)},open:e=>{Zf.isOn(e)||o(e,v,Sg.HighlightMenuAndItem).get(v)},refetch:t=>fx.getExistingCoupled(t,"sandbox").fold(()=>o(t,v,Sg.HighlightMenuAndItem).map(v),n=>Ex(e,_,t,n,i,v,Sg.HighlightMenuAndItem).map(v)),isOpen:Zf.isOn,close:e=>{Zf.isOn(e)&&o(e,v,Sg.HighlightMenuAndItem).get(v)},repositionMenus:e=>{Zf.isOn(e)&&Ix(e)}},a=(e,t)=>(Qo(e),k.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.dropdownBehaviours,[Zf.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Dx(e,t,{onOpen:()=>Zf.on(t),onClose:()=>Zf.off(t)})}}),Tf.config({mode:"special",onSpace:a,onEnter:a,onDown:(e,t)=>{if(Bx.isOpen(e)){const t=fx.getCoupled(e,"sandbox");r(t)}else Bx.open(e);return k.some(!0)},onEscape:(e,t)=>Bx.isOpen(e)?(Bx.close(e),k.some(!0)):k.none()}),Vf.config({})]),events:eg(k.some(e=>{o(e,r,Sg.HighlightMenuAndItem).get(v)})),eventOrder:{...e.eventOrder,[wo()]:["disabling","toggling","alloy.base.behaviour"]},apis:s,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),e=>({role:e})),..."button"===e.dom.tag?{type:(l="type",ve(e.dom,"attributes").bind(e=>ve(e,l))).getOr("button")}:{}}}};var l},apis:{open:(e,t)=>e.open(t),refetch:(e,t)=>e.refetch(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}}),Nx=e=>{const t=Zu.getValue(e),n=kb(e).map(Db);Bx.refetch(t).get(()=>{const e=fx.getCoupled(t,"sandbox");n.each(t=>kb(e).each(e=>((e,t)=>{Zu.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd})(e,t)))})},Ux=e=>Du.getState(e).bind(Dp.getHighlighted).bind(Dp.getHighlighted),Fx=(e,t,n)=>{Lb(e).each(e=>{((e,t)=>{Mt(t.element,"id").each(t=>xt(e.element,"aria-activedescendant",t))})(e,n);var i;(oa((i=t).element,Rb)?k.some(i.element):Oa(i.element,"."+Rb)).each(t=>{Mt(t,"id").each(t=>xt(e.element,"aria-controls",t))})}),xt(n.element,"aria-selected","true")},zx=(e,t,n)=>{xt(n.element,"aria-selected","false")},Hx=e=>fx.getExistingCoupled(e,"sandbox").bind(kb).map(Db).map(e=>e.fetchPattern).getOr("");var jx;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(jx||(jx={}));const Vx=(e,t,n,i,r)=>{const o=n.shared.providers,s=e=>r?{...e,shortcut:k.none(),icon:e.text.isSome()?k.none():e.icon}:e;switch(e.type){case"menuitem":return(a=e,er("menuitem",$A,a)).fold(zb,e=>k.some(ax(s(e),t,o,i)));case"nestedmenuitem":return(e=>er("nestedmenuitem",qA,e))(e).fold(zb,e=>k.some(lx(s(e),t,o,i,r)));case"togglemenuitem":return(e=>er("togglemenuitem",WA,e))(e).fold(zb,e=>k.some(cx(s(e),t,o,i)));case"separator":return(e=>er("separatormenuitem",vA,e))(e).fold(zb,e=>k.some(sx(e)));case"fancymenuitem":return(e=>er("fancymenuitem",QA,e))(e).fold(zb,e=>dx(e,n));default:return console.error("Unknown item in general menu",e),k.none()}var a},Yx=(e,t,n,i,r,o,s)=>{const a=1===i,l=!a||Fb(e);return _e(F(e,e=>{switch(e.type){case"separator":return(i=e,er("Autocompleter.Separator",vA,i)).fold(zb,e=>k.some(sx(e)));case"cardmenuitem":return(e=>er("cardmenuitem",HA,e))(e).fold(zb,e=>k.some(ux({...e,onAction:t=>{e.onAction(t),n(e.value,e.meta)}},r,o,{itemBehaviours:B_(e.meta,o),cardText:{matchText:t,highlightOn:s}})));default:return(e=>er("Autocompleter.Item",yA,e))(e).fold(zb,e=>k.some(ox(e,t,a,"normal",n,r,o,l)))}var i}))},Gx=(e,t,n,i,r,o)=>{const s=Fb(t),a=_e(F(t,e=>{const t=e=>Vx(e,n,i,(e=>r?!ye(e,"text"):s)(e),r);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t({...e,enabled:!1}):t(e)})),l=(e=>"no-search"===e.searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:e})(o);return(r?Hb:jb)(e,s,a,1,l)},Qx=e=>kg.singleData(e.value,e),$x=(e,t)=>{const n=bs("autocompleter"),i=Pr(!1),r=Pr(!1),o=Ma(Lg.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:n}},components:[],fireDismissalEventInstead:{},inlineBehaviours:$l([Uf("dismissAutocompleter",[Jo(Po(),()=>d()),Jo(jo(),(t,n)=>{Mt(n.event.target,"id").each(t=>xt(Pe.fromDom(e.getBody()),"aria-activedescendant",t))})])]),lazySink:t.getSink})),s=()=>Lg.isOpen(o),a=r.get,l=()=>{if(s()){Lg.hide(o),e.dom.remove(n,!1);const t=Pe.fromDom(e.getBody());Mt(t,"aria-owns").filter(e=>e===n).each(()=>{Tt(t,"aria-owns"),Tt(t,"aria-activedescendant")})}},c=()=>Lg.getContent(o).bind(e=>te(e.components(),0)),d=()=>e.execCommand("mceAutocompleterClose"),u=n=>{const r=oe(n,e=>k.from(e.columns)).getOr(1);return q(n,n=>{const o=n.items;return Yx(o,n.matchText,(t,r)=>{const o=e.selection.getRng();((e,t)=>Jy(Pe.fromDom(t.startContainer)).map(t=>{const n=e.createRng();return n.selectNode(t.dom),n}))(e.dom,o).each(o=>{const s={hide:()=>d(),reload:t=>{l(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};i.set(!0),n.onAction(s,o,t,r),i.set(!1)})},r,nb.BUBBLE_TO_SANDBOX,t,n.highlightOn)})},h=(t,n)=>{var i;(i=Pe.fromDom(e.getBody()),Oa(i,Xy)).each(i=>{const r=oe(t,e=>k.from(e.columns)).getOr(1);Lg.showMenuAt(o,{anchor:{type:"node",root:Pe.fromDom(e.getBody()),node:k.from(i)}},((e,t,n,i)=>{const r=Zw(t,i),o=vb(i);return{data:Qx({...e,movement:r,menuBehaviours:XA("auto"!==t?[]:[as((e,t)=>{KA(e,4,o.item).each(({numColumns:t,numRows:n})=>{Tf.setGridSize(e,n,t)})})])}),menu:{markers:vb(i),fakeFocus:n===jx.ContentFocus}}})(jb("autocompleter-value",!0,n,r,{menuType:"normal"}),r,jx.ContentFocus,"normal"))}),c().each(Dp.highlightFirst)},p=t=>{const i=u(t);i.length>0?(h(t,i),xt(Pe.fromDom(e.getBody()),"aria-owns",n),e.inline||m()):l()},m=()=>{e.dom.get(n)&&e.dom.remove(n,!1);const t=e.getDoc().documentElement,i=e.selection.getNode(),r=(e=>ps(e,!0))(o.element);It(r,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${i.offsetTop}px`,left:`${i.offsetLeft}px`}),e.dom.add(t,r.dom),Oa(r,'[role="menu"]').each(e=>{Ft(e,"position"),Ft(e,"max-height")})};e.on("AutocompleterStart",({lookupData:e})=>{r.set(!0),i.set(!1),p(e)}),e.on("AutocompleterUpdate",({lookupData:e})=>p(e)),e.on("AutocompleterEnd",()=>{l(),r.set(!1),i.set(!1)});const f={cancelIfNecessary:d,isMenuOpen:s,isActive:a,isProcessingAction:i.get,getMenu:c};eb(f,e)},qx=["visible","hidden","clip"],Wx=e=>Le(e).length>0&&!P(qx,e),Kx=e=>{if(Ve(e)){const t=Ot(e,"overflow-x"),n=Ot(e,"overflow-y");return Wx(t)||Wx(n)}return!1},Zx=(e,t)=>Wy(e)?(e=>{const t=Cd(e,Kx),n=0===t.length?gt(e).map(vt).map(e=>Cd(e,Kx)).getOr([]):t;return ne(n).map(e=>({element:e,others:n.slice(1)}))})(t):k.none(),Xx=e=>{const t=[...F(e.others,Wn),Xn()];return((e,t)=>Y(t,(e,t)=>Zn(e,t),e))(Wn(e.element),t)},Jx=(e,t,n)=>Pa(e,t,n).isSome(),eC=(e,t)=>{let n=null;return{cancel:()=>{null!==n&&(clearTimeout(n),n=null)},schedule:(...i)=>{n=setTimeout(()=>{e.apply(null,i),n=null},t)}}},tC=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?k.none():k.some(t.touches[0])},nC=e=>{const t=Cc(),n=Pr(!1),i=eC(t=>{e.triggerEvent(Eo(),t),n.set(!0)},400),r=Fr([{key:Wr(),value:e=>(tC(e).each(r=>{i.cancel();const o={x:r.clientX,y:r.clientY,target:e.target};i.schedule(e),n.set(!1),t.set(o)}),k.none())},{key:Kr(),value:e=>(i.cancel(),tC(e).each(e=>{t.on(n=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),i=Math.abs(e.clientY-t.y);return n>5||i>5})(e,n)&&t.clear()})}),k.none())},{key:Zr(),value:r=>{i.cancel();return t.get().filter(e=>Ze(e.target,r.target)).map(t=>n.get()?(r.prevent(),!1):e.triggerEvent(Co(),r))}}]);return{fireIfReady:(e,t)=>ve(r,t).bind(t=>t(e))}},iC=(e,t)=>{const n={stopBackspace:!0,...t},i=nC(n),r=F(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),t=>Mc(e,t,e=>{i.fireIfReady(e,t).each(t=>{t&&e.kill()});n.triggerEvent(t,e)&&e.kill()})),o=Cc(),s=Mc(e,"paste",e=>{i.fireIfReady(e,"paste").each(t=>{t&&e.kill()});n.triggerEvent("paste",e)&&e.kill(),o.set(setTimeout(()=>{n.triggerEvent(Ao(),e)},0))}),a=Mc(e,"keydown",e=>{n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&(e=>e.raw.which===Ip[0]&&!P(["input","textarea"],He(e.target))&&!Jx(e.target,'[contenteditable="true"]'))(e)&&e.prevent()}),l=Mc(e,"focusin",e=>{n.triggerEvent("focusin",e)&&e.kill()}),c=Cc(),d=Mc(e,"focusout",e=>{n.triggerEvent("focusout",e)&&e.kill(),c.set(setTimeout(()=>{n.triggerEvent(bo(),e)},0))});return{unbind:()=>{z(r,e=>{e.unbind()}),a.unbind(),l.unbind(),d.unbind(),s.unbind(),o.on(clearTimeout),c.on(clearTimeout)}}},rC=(e,t)=>{const n=ve(e,"target").getOr(t);return Pr(n)},oC=Br([{stopped:[]},{resume:["element"]},{complete:[]}]),sC=(e,t,n,i,r,o)=>{const s=e(t,i),a=((e,t)=>{const n=Pr(!1),i=Pr(!1);return{stop:()=>{n.set(!0)},cut:()=>{i.set(!0)},isStopped:n.get,isCut:i.get,event:e,setSource:t.set,getSource:t.get}})(n,r);return s.fold(()=>(o.logEventNoHandlers(t,i),oC.complete()),e=>{const n=e.descHandler;return zs(n)(a),a.isStopped()?(o.logEventStopped(t,e.element,n.purpose),oC.stopped()):a.isCut()?(o.logEventCut(t,e.element,n.purpose),oC.complete()):it(e.element).fold(()=>(o.logNoParent(t,e.element,n.purpose),oC.complete()),i=>(o.logEventResponse(t,e.element,n.purpose),oC.resume(i)))})},aC=(e,t,n,i,r,o)=>sC(e,t,n,i,r,o).fold(T,i=>aC(e,t,n,i,r,o),S),lC=(e,t,n)=>{const i=(e=>{const t=Pr(!1);return{stop:()=>{t.set(!0)},cut:v,isStopped:t.get,isCut:S,event:e,setSource:E("Cannot set source of a broadcasted event"),getSource:E("Cannot get source of a broadcasted event")}})(t);return z(e,e=>{const t=e.descHandler;zs(t)(i)}),i.isStopped()},cC=(e,t,n,i,r)=>{const o=rC(n,i);return aC(e,t,n,i,o,r)},dC=()=>{const e={};return{registerId:(t,n,i)=>{le(i,(i,r)=>{const o=void 0!==e[r]?e[r]:{};o[n]=((e,t)=>{return n=x.apply(void 0,[e.handler].concat(t)),i=e.purpose,{cHandler:n,purpose:i};var n,i})(i,t),e[r]=o})},unregisterId:t=>{le(e,(e,n)=>{ye(e,t)&&delete e[t]})},filterByType:t=>ve(e,t).map(e=>me(e,(e,t)=>((e,t)=>({id:e,descHandler:t}))(t,e))).getOr([]),find:(t,n,i)=>ve(e,n).bind(e=>Vr(i,t=>((e,t)=>Es(t).bind(t=>ve(e,t)).map(e=>((e,t)=>({element:e,descHandler:t}))(t,e)))(e,t),t))}},uC=()=>{const e=dC(),t={},n=e=>{const t=e.element;return Es(t).getOrThunk(()=>((e,t)=>{const n=bs(ws+e);return Cs(t,n),n})("uid-",e.element))},i=n=>{Es(n.element).each(n=>{delete t[n],e.unregisterId(n)})};return{find:(t,n,i)=>e.find(t,n,i),filter:t=>e.filterByType(t),register:r=>{const o=n(r);be(t,o)&&((e,n)=>{const r=t[n];if(r!==e)throw new Error('The tagId "'+n+'" is already used by: '+fs(r.element)+"\nCannot use it for: "+fs(e.element)+"\nThe conflicting element is"+(bt(r.element)?" ":" not ")+"already in the DOM");i(e)})(r,o);const s=[r];e.registerId(s,o,r.events),t[o]=r},unregister:i,getById:e=>ve(t,e)}},hC=tp({name:"Container",factory:e=>{const{attributes:t,...n}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...t},...n},components:e.components,behaviours:Ju(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[Mr("components",[]),Xu("containerBehaviours",[]),Mr("events",{}),Mr("domModification",{}),Mr("eventOrder",{})]}),pC=e=>{const t=t=>it(e.element).fold(T,e=>Ze(t,e)),n=uC(),i=(e,i)=>n.find(t,e,i),r=iC(e.element,{triggerEvent:(e,t)=>Ga(e,t.target,n=>((e,t,n,i)=>cC(e,t,n,n.target,i))(i,e,t,n))}),o={debugInfo:A("real"),triggerEvent:(e,t,n)=>{Ga(e,t,r=>cC(i,e,n,t,r))},triggerFocus:(e,t)=>{Es(e).fold(()=>{tc(e)},n=>{Ga(yo(),e,n=>(((e,t,n,i,r)=>{const o=rC(n,i);sC(e,t,n,i,o,r)})(i,yo(),{originator:t,kill:v,prevent:v,target:e},e,n),!1))})},triggerEscape:(e,t)=>{o.triggerEvent("keydown",e.element,t.event)},getByUid:e=>m(e),getByDom:e=>f(e),build:Ma,buildOrPatch:Ea,addToGui:e=>{l(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{s(e)},removeFromWorld:e=>{a(e)},broadcast:e=>{u(e)},broadcastOn:(e,t)=>{h(e,t)},broadcastEvent:(e,t)=>{p(e,t)},isConnected:T},s=e=>{e.connect(o),Ge(e.element)||(n.register(e),z(e.components(),s),o.triggerEvent(To(),e.element,{target:e.element}))},a=e=>{Ge(e.element)||(z(e.components(),a),n.unregister(e)),e.disconnect()},l=t=>{hu(e,t)},c=e=>{fu(e)},d=e=>{const t=n.filter(_o());z(t,t=>{const n=t.descHandler;zs(n)(e)})},u=e=>{d({universal:!0,data:e})},h=(e,t)=>{d({universal:!1,channels:e,data:t})},p=(e,t)=>{const i=n.filter(e);return lC(i,t)},m=e=>n.getById(e).fold(()=>ni.error(new Error('Could not find component with uid: "'+e+'" in system.')),ni.value),f=e=>{const t=Es(e).getOr("not found");return m(t)};return s(e),{root:e,element:e.element,destroy:()=>{r.unbind(),Fn(e.element)},add:l,remove:c,getByUid:m,getByDom:f,addToWorld:s,removeFromWorld:a,broadcast:u,broadcastOn:h,broadcastEvent:p}},mC=A([Mr("prefix","form-field"),Xu("fieldBehaviours",[sp,Zu])]),fC=A([kh({schema:[cr("dom")],name:"label"}),kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[cr("text")],name:"aria-descriptor"}),Sh({factory:{sketch:e=>{const t=Nr(e,["factory"]);return e.factory.sketch(t)}},schema:[cr("factory")],name:"field"})]),gC=np({name:"FormField",configFields:mC(),partFields:fC(),factory:(e,t,n,i)=>{const r=eh(e.fieldBehaviours,[sp.config({find:t=>Hh(t,e,"field")}),Zu.config({store:{mode:"manual",getValue:e=>sp.getCurrent(e).bind(Zu.getValue),setValue:(e,t)=>{sp.getCurrent(e).each(e=>{Zu.setValue(e,t)})}}})]),o=Ko([as((t,n)=>{const i=Vh(t,e,["label","field","aria-descriptor"]);i.field().each(t=>{const n=bs(e.prefix);i.label().each(e=>{xt(e.element,"for",n),xt(t.element,"id",n)}),i["aria-descriptor"]().each(n=>{const i=bs(e.prefix);xt(n.element,"id",i),xt(t.element,"aria-describedby",i)})})})]),s={getField:t=>Hh(t,e,"field"),getLabel:t=>Hh(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:o,apis:s}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var vC=Object.freeze({__proto__:null,exhibit:(e,t)=>Fs({attributes:Fr([{key:t.tabAttr,value:"true"}])})}),yC=[Mr("tabAttr","data-alloy-tabstop")];const bC=Wl({fields:yC,name:"tabstopping",active:vC});var AC=tinymce.util.Tools.resolve("tinymce.html.Entities");const _C=(e,t,n,i)=>{const r=wC(e,t,n,i);return gC.sketch(r)},wC=(e,t,n,i)=>({dom:xC(n),components:e.toArray().concat([t]),fieldBehaviours:$l(i)}),xC=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),CC=(e,t)=>gC.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[wa(t.translate(e))]}),EC=bs("form-component-change"),MC=bs("form-close"),SC=bs("form-cancel"),TC=bs("form-action"),kC=bs("form-submit"),LC=bs("form-block"),DC=bs("form-unblock"),IC=bs("form-tabchange"),RC=bs("form-resize"),OC=(e,t,n)=>{const i=e.label.map(e=>CC(e,t)),r=t.icons(),o=e=>(t,n)=>{Pa(n.event.target,"[data-collection-item-value]").each(i=>{e(t,n,i,Et(i,"data-collection-item-value"))})},s=(n,i)=>{const o=F(i,n=>{const i=Dv.translate(n.text),o=1===e.columns?`<div class="tox-collection__item-label">${i}</div>`:"",s=`<div class="tox-collection__item-icon">${(e=>{var t;return null!==(t=r[e])&&void 0!==t?t:e})(n.icon)}</div>`,a={_:" "," - ":" ","-":" "},l=i.replace(/\_| \- |\-/g,e=>a[e]);return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${AC.encodeAllRaw(n.value)}" title="${l}" aria-label="${l}">${s}${o}</div>`}),s="auto"!==e.columns&&e.columns>1?U(o,e.columns):[o],a=F(s,e=>`<div class="tox-collection__group">${e.join("")}</div>`);hs(n.element,a.join(""))},a=o((n,i,r,o)=>{i.stop(),t.isDisabled()||Go(n,TC,{name:e.name,value:o})}),l=[Jo(io(),o((e,t,n)=>{tc(n)})),Jo(uo(),a),Jo(Co(),a),Jo(ro(),o((e,t,n)=>{Oa(e.element,"."+ub).each(e=>{ia(e,ub)}),ta(n,ub)})),Jo(oo(),o(e=>{Oa(e.element,"."+ub).each(e=>{ia(e,ub)})})),ds(o((t,n,i,r)=>{Go(t,TC,{name:e.name,value:r})}))],c=(e,t)=>F(Ed(e.element,".tox-collection__item"),t),d=gC.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:_},behaviours:$l([Ap.config({disabled:t.isDisabled,onDisabled:e=>{c(e,e=>{ta(e,"tox-collection__item--state-disabled"),xt(e,"aria-disabled",!0)})},onEnabled:e=>{c(e,e=>{ia(e,"tox-collection__item--state-disabled"),Tt(e,"aria-disabled")})}}),p_(),Nf.config({}),Zu.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:(t,n)=>{s(t,n),"auto"===e.columns&&KA(t,5,"tox-collection__item").each(({numRows:e,numColumns:n})=>{Tf.setGridSize(t,e,n)}),Yo(t,RC)}}),bC.config({}),Tf.config((u=e.columns,h="normal",1===u?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===u?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===h?".tox-swatches__row":".tox-collection__group",cell:"color"===h?`.${ob}`:`.${rb}`}})),Uf("collection-events",l)]),eventOrder:{[wo()]:["disabling","alloy.base.behaviour","collection-events"]}});var u,h;return _C(i,d,["tox-form__group--collection"],[])},PC=["input","textarea"],BC=e=>{const t=He(e);return P(PC,t)},NC=(e,t)=>{const n=t.getRoot(e).getOr(e.element);ia(n,t.invalidClass),t.notify.each(t=>{BC(e.element)&&xt(e.element,"aria-invalid",!1),t.getContainer(e).each(e=>{hs(e,t.validHtml)}),t.onValid(e)})},UC=(e,t,n,i)=>{const r=t.getRoot(e).getOr(e.element);ta(r,t.invalidClass),t.notify.each(t=>{BC(e.element)&&xt(e.element,"aria-invalid",!0),t.getContainer(e).each(e=>{hs(e,i)}),t.onInvalid(e,i)})},FC=(e,t,n)=>t.validator.fold(()=>_x(ni.value(!0)),t=>t.validate(e)),zC=(e,t,n)=>(t.notify.each(t=>{t.onValidate(e)}),FC(e,t).map(n=>e.getSystem().isConnected()?n.fold(n=>(UC(e,t,0,n),ni.error(n)),n=>(NC(e,t),ni.value(n))):ni.error("No longer in system")));var HC=Object.freeze({__proto__:null,markValid:NC,markInvalid:UC,query:FC,run:zC,isInvalid:(e,t)=>{const n=t.getRoot(e).getOr(e.element);return oa(n,t.invalidClass)}});var jC=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map(t=>Ko([Jo(t.onEvent,t=>{zC(t,e).get(_)})].concat(t.validateOnLoad?[as(t=>{zC(t,e).get(v)})]:[]))).getOr({})}),VC=[cr("invalidClass"),Mr("getRoot",k.none),Er("notify",[Mr("aria","alert"),Mr("getContainer",k.none),Mr("validHtml",""),el("onValid"),el("onInvalid"),el("onValidate")]),Er("validator",[cr("validate"),Mr("onEvent","input"),Mr("validateOnLoad",!0)])];const YC=Wl({fields:VC,name:"invalidating",active:jC,apis:HC,extra:{validation:e=>t=>{const n=Zu.getValue(t);return _x(e(n))}}});const GC=Wl({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Ko([Zo(fo(),T)]),exhibit:()=>Fs({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),QC=bs("color-input-change"),$C=bs("color-swatch-change"),qC=bs("color-picker-cancel"),WC=(e,t,n,i)=>{const r=gC.parts.field({factory:Eb,inputClasses:["tox-textfield"],data:i,onSetValue:e=>YC.run(e).get(v),inputBehaviours:$l([Ap.config({disabled:t.providers.isDisabled}),p_(),bC.config({}),YC.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>rt(e.element),notify:{onValid:e=>{const t=Zu.getValue(e);Go(e,QC,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{const t=Zu.getValue(e);if(0===t.length)return _x(ni.value(!0));{const e=Pe.fromTag("span");Dt(e,"background-color",t);const n=Bt(e,"background-color").fold(()=>ni.error("blah"),e=>ni.value(t));return _x(n)}}}})]),selectOnFocus:!1}),o=e.label.map(e=>CC(e,t.providers)),s=(e,t)=>{Go(e,$C,{value:t})},a=Og(((e,t)=>Bx.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:$l([f_(t.providers.isDisabled),p_(),GC.config({}),bC.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:n=>Ax(t=>e.fetch(t)).map(i=>k.from(Qx(Ai(Ww(bs("menu-value"),i,t=>{e.onItemAction(n,t)},e.columns,e.presets,nb.CLOSE_ON_EXECUTE,S,t.providers),{movement:Zw(e.columns,e.presets)})))),parts:{menu:Ab(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Tl,Sl,Il],onLtr:()=>[Sl,Tl,Il]},components:[],fetch:Hw(n.getColors(e.storageKey),e.storageKey,n.hasCustomColors()),columns:n.getColorCols(e.storageKey),presets:"color",onItemAction:(t,i)=>{a.getOpt(t).each(t=>{"custom"===i?n.colorPicker(n=>{n.fold(()=>Yo(t,qC),n=>{s(t,n),bw(e.storageKey,n)})},"#ffffff"):s(t,"remove"===i?"":i)})}},t));return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:o.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,a.asSpec()]}]),fieldBehaviours:$l([Uf("form-field-events",[Jo(QC,(t,n)=>{a.getOpt(t).each(e=>{Dt(e.element,"background-color",n.event.color)}),Go(t,EC,{name:e.name})}),Jo($C,(e,t)=>{gC.getField(e).each(n=>{Zu.setValue(n,t.event.value),sp.getCurrent(e).each(Vf.focus)})}),Jo(qC,(e,t)=>{gC.getField(e).each(t=>{sp.getCurrent(e).each(Vf.focus)})})])])})},KC=kh({schema:[cr("dom")],name:"label"}),ZC=e=>kh({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold(()=>({}),e=>({events:Ko([es(Wr(),(t,n,i)=>e(t,i),[t]),es(Jr(),(t,n,i)=>e(t,i),[t]),es(eo(),(t,n,i)=>{i.mouseIsDown.get()&&e(t,i)},[t])])}))}),XC=ZC("top-left"),JC=ZC("top"),eE=ZC("top-right"),tE=ZC("right"),nE=ZC("bottom-right"),iE=ZC("bottom"),rE=ZC("bottom-left"),oE=ZC("left"),sE=Sh({name:"thumb",defaults:A({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Ko([ns(Wr(),e,"spectrum"),ns(Kr(),e,"spectrum"),ns(Zr(),e,"spectrum"),ns(Jr(),e,"spectrum"),ns(eo(),e,"spectrum"),ns(no(),e,"spectrum")])})}),aE=e=>$p(e.event),lE=Sh({schema:[ar("mouseIsDown",()=>Pr(!1))],name:"spectrum",overrides:e=>{const t=e.model.manager,n=(n,i)=>t.getValueFromEvent(i).map(i=>t.setValueFrom(n,e,i));return{behaviours:$l([Tf.config({mode:"special",onLeft:(n,i)=>t.onLeft(n,e,aE(i)),onRight:(n,i)=>t.onRight(n,e,aE(i)),onUp:(n,i)=>t.onUp(n,e,aE(i)),onDown:(n,i)=>t.onDown(n,e,aE(i))}),bC.config({}),Vf.config({})]),events:Ko([Jo(Wr(),n),Jo(Kr(),n),Jo(Jr(),n),Jo(eo(),(t,i)=>{e.mouseIsDown.get()&&n(t,i)})])}}});var cE=[KC,oE,tE,JC,iE,XC,eE,rE,nE,sE,lE];const dE=A("slider.change.value"),uE=e=>{const t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){const e=t;return void 0!==e.touches&&1===e.touches.length?k.some(e.touches[0]).map(e=>Qt(e.clientX,e.clientY)):k.none()}{const e=t;return void 0!==e.clientX?k.some(e).map(e=>Qt(e.clientX,e.clientY)):k.none()}},hE=e=>e.model.minX,pE=e=>e.model.minY,mE=e=>e.model.minX-1,fE=e=>e.model.minY-1,gE=e=>e.model.maxX,vE=e=>e.model.maxY,yE=e=>e.model.maxX+1,bE=e=>e.model.maxY+1,AE=(e,t,n)=>t(e)-n(e),_E=e=>AE(e,gE,hE),wE=e=>AE(e,vE,pE),xE=e=>_E(e)/2,CE=e=>wE(e)/2,EE=(e,t)=>t?e.stepSize*e.speedMultiplier:e.stepSize,ME=e=>e.snapToGrid,SE=e=>e.snapStart,TE=e=>e.rounded,kE=(e,t)=>void 0!==e[t+"-edge"],LE=e=>kE(e,"left"),DE=e=>kE(e,"right"),IE=e=>kE(e,"top"),RE=e=>kE(e,"bottom"),OE=e=>e.model.value.get(),PE=(e,t)=>({x:e,y:t}),BE=(e,t)=>{Go(e,dE(),{value:t})},NE=(e,t,n,i)=>e<t?e:e>n?n:e===t?t-1:Math.max(t,e-i),UE=(e,t,n,i)=>e>n?e:e<t?t:e===n?n+1:Math.min(n,e+i),FE=(e,t,n)=>Math.max(t,Math.min(n,e)),zE=e=>{const{min:t,max:n,range:i,value:r,step:o,snap:s,snapStart:a,rounded:l,hasMinEdge:c,hasMaxEdge:d,minBound:u,maxBound:h,screenRange:p}=e,m=c?t-1:t,f=d?n+1:n;if(r<u)return m;if(r>h)return f;{const e=((e,t,n)=>Math.min(n,Math.max(e,t))-t)(r,u,h),c=FE(e/p*i+t,m,f);return s&&c>=t&&c<=n?((e,t,n,i,r)=>r.fold(()=>{const r=e-t,o=Math.round(r/i)*i;return FE(t+o,t-1,n+1)},t=>{const r=(e-t)%i,o=Math.round(r/i),s=Math.floor((e-t)/i),a=Math.floor((n-t)/i),l=t+Math.min(a,s+o)*i;return Math.max(t,l)}))(c,t,n,o,a):l?Math.round(c):c}},HE=e=>{const{min:t,max:n,range:i,value:r,hasMinEdge:o,hasMaxEdge:s,maxBound:a,maxOffset:l,centerMinEdge:c,centerMaxEdge:d}=e;return r<t?o?0:c:r>n?s?a:d:(r-t)/i*l},jE="top",VE="right",YE="bottom",GE="left",QE=e=>e.element.dom.getBoundingClientRect(),$E=(e,t)=>e[t],qE=e=>{const t=QE(e);return $E(t,GE)},WE=e=>{const t=QE(e);return $E(t,VE)},KE=e=>{const t=QE(e);return $E(t,jE)},ZE=e=>{const t=QE(e);return $E(t,YE)},XE=e=>{const t=QE(e);return $E(t,"width")},JE=e=>{const t=QE(e);return $E(t,"height")},eM=(e,t,n)=>(e+t)/2-n,tM=(e,t)=>{const n=QE(e),i=QE(t),r=$E(n,GE),o=$E(n,VE),s=$E(i,GE);return eM(r,o,s)},nM=(e,t)=>{const n=QE(e),i=QE(t),r=$E(n,jE),o=$E(n,YE),s=$E(i,jE);return eM(r,o,s)},iM=(e,t)=>{Go(e,dE(),{value:t})},rM=(e,t,n)=>{const i={min:hE(t),max:gE(t),range:_E(t),value:n,step:EE(t),snap:ME(t),snapStart:SE(t),rounded:TE(t),hasMinEdge:LE(t),hasMaxEdge:DE(t),minBound:qE(e),maxBound:WE(e),screenRange:XE(e)};return zE(i)},oM=e=>(t,n,i)=>((e,t,n,i)=>{const r=(e>0?UE:NE)(OE(n),hE(n),gE(n),EE(n,i));return iM(t,r),k.some(r)})(e,t,n,i).map(T),sM=(e,t,n,i,r,o)=>{const s=((e,t,n,i,r)=>{const o=XE(e),s=i.bind(t=>k.some(tM(t,e))).getOr(0),a=r.bind(t=>k.some(tM(t,e))).getOr(o),l={min:hE(t),max:gE(t),range:_E(t),value:n,hasMinEdge:LE(t),hasMaxEdge:DE(t),minBound:qE(e),minOffset:0,maxBound:WE(e),maxOffset:o,centerMinEdge:s,centerMaxEdge:a};return HE(l)})(t,o,n,i,r);return qE(t)-qE(e)+s},aM=oM(-1),lM=oM(1),cM=k.none,dM=k.none,uM={"top-left":k.none(),top:k.none(),"top-right":k.none(),right:k.some((e,t)=>{BE(e,yE(t))}),"bottom-right":k.none(),bottom:k.none(),"bottom-left":k.none(),left:k.some((e,t)=>{BE(e,mE(t))})};var hM=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const i=rM(e,t,n);return iM(e,i),i},setToMin:(e,t)=>{const n=hE(t);iM(e,n)},setToMax:(e,t)=>{const n=gE(t);iM(e,n)},findValueOfOffset:rM,getValueFromEvent:e=>uE(e).map(e=>e.left),findPositionOfValue:sM,setPositionFromValue:(e,t,n,i)=>{const r=OE(n),o=sM(e,i.getSpectrum(e),r,i.getLeftEdge(e),i.getRightEdge(e),n),s=Zt(t.element)/2;Dt(t.element,"left",o-s+"px")},onLeft:aM,onRight:lM,onUp:cM,onDown:dM,edgeActions:uM});const pM=(e,t)=>{Go(e,dE(),{value:t})},mM=(e,t,n)=>{const i={min:pE(t),max:vE(t),range:wE(t),value:n,step:EE(t),snap:ME(t),snapStart:SE(t),rounded:TE(t),hasMinEdge:IE(t),hasMaxEdge:RE(t),minBound:KE(e),maxBound:ZE(e),screenRange:JE(e)};return zE(i)},fM=e=>(t,n,i)=>((e,t,n,i)=>{const r=(e>0?UE:NE)(OE(n),pE(n),vE(n),EE(n,i));return pM(t,r),k.some(r)})(e,t,n,i).map(T),gM=(e,t,n,i,r,o)=>{const s=((e,t,n,i,r)=>{const o=JE(e),s=i.bind(t=>k.some(nM(t,e))).getOr(0),a=r.bind(t=>k.some(nM(t,e))).getOr(o),l={min:pE(t),max:vE(t),range:wE(t),value:n,hasMinEdge:IE(t),hasMaxEdge:RE(t),minBound:KE(e),minOffset:0,maxBound:ZE(e),maxOffset:o,centerMinEdge:s,centerMaxEdge:a};return HE(l)})(t,o,n,i,r);return KE(t)-KE(e)+s},vM=k.none,yM=k.none,bM=fM(-1),AM=fM(1),_M={"top-left":k.none(),top:k.some((e,t)=>{BE(e,fE(t))}),"top-right":k.none(),right:k.none(),"bottom-right":k.none(),bottom:k.some((e,t)=>{BE(e,bE(t))}),"bottom-left":k.none(),left:k.none()};var wM=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const i=mM(e,t,n);return pM(e,i),i},setToMin:(e,t)=>{const n=pE(t);pM(e,n)},setToMax:(e,t)=>{const n=vE(t);pM(e,n)},findValueOfOffset:mM,getValueFromEvent:e=>uE(e).map(e=>e.top),findPositionOfValue:gM,setPositionFromValue:(e,t,n,i)=>{const r=OE(n),o=gM(e,i.getSpectrum(e),r,i.getTopEdge(e),i.getBottomEdge(e),n),s=Vt(t.element)/2;Dt(t.element,"top",o-s+"px")},onLeft:vM,onRight:yM,onUp:bM,onDown:AM,edgeActions:_M});const xM=(e,t)=>{Go(e,dE(),{value:t})},CM=(e,t)=>({x:e,y:t}),EM=(e,t)=>(n,i,r)=>((e,t,n,i,r)=>{const o=e>0?UE:NE,s=t?OE(i).x:o(OE(i).x,hE(i),gE(i),EE(i,r)),a=t?o(OE(i).y,pE(i),vE(i),EE(i,r)):OE(i).y;return xM(n,CM(s,a)),k.some(s)})(e,t,n,i,r).map(T),MM=EM(-1,!1),SM=EM(1,!1),TM=EM(-1,!0),kM=EM(1,!0),LM={"top-left":k.some((e,t)=>{BE(e,PE(mE(t),fE(t)))}),top:k.some((e,t)=>{BE(e,PE(xE(t),fE(t)))}),"top-right":k.some((e,t)=>{BE(e,PE(yE(t),fE(t)))}),right:k.some((e,t)=>{BE(e,PE(yE(t),CE(t)))}),"bottom-right":k.some((e,t)=>{BE(e,PE(yE(t),bE(t)))}),bottom:k.some((e,t)=>{BE(e,PE(xE(t),bE(t)))}),"bottom-left":k.some((e,t)=>{BE(e,PE(mE(t),bE(t)))}),left:k.some((e,t)=>{BE(e,PE(mE(t),CE(t)))})};var DM=Object.freeze({__proto__:null,setValueFrom:(e,t,n)=>{const i=rM(e,t,n.left),r=mM(e,t,n.top),o=CM(i,r);return xM(e,o),o},setToMin:(e,t)=>{const n=hE(t),i=pE(t);xM(e,CM(n,i))},setToMax:(e,t)=>{const n=gE(t),i=vE(t);xM(e,CM(n,i))},getValueFromEvent:e=>uE(e),setPositionFromValue:(e,t,n,i)=>{const r=OE(n),o=sM(e,i.getSpectrum(e),r.x,i.getLeftEdge(e),i.getRightEdge(e),n),s=gM(e,i.getSpectrum(e),r.y,i.getTopEdge(e),i.getBottomEdge(e),n),a=Zt(t.element)/2,l=Vt(t.element)/2;Dt(t.element,"left",o-a+"px"),Dt(t.element,"top",s-l+"px")},onLeft:MM,onRight:SM,onUp:TM,onDown:kM,edgeActions:LM});const IM=np({name:"Slider",configFields:[Mr("stepSize",1),Mr("speedMultiplier",10),Mr("onChange",v),Mr("onChoose",v),Mr("onInit",v),Mr("onDragStart",v),Mr("onDragEnd",v),Mr("snapToGrid",!1),Mr("rounded",!0),yr("snapStart"),dr("model",rr("mode",{x:[Mr("minX",0),Mr("maxX",100),ar("value",e=>Pr(e.mode.minX)),cr("getInitialValue"),rl("manager",hM)],y:[Mr("minY",0),Mr("maxY",100),ar("value",e=>Pr(e.mode.minY)),cr("getInitialValue"),rl("manager",wM)],xy:[Mr("minX",0),Mr("maxX",100),Mr("minY",0),Mr("maxY",100),ar("value",e=>Pr({x:e.mode.minX,y:e.mode.minY})),cr("getInitialValue"),rl("manager",DM)]})),Xu("sliderBehaviours",[Tf,Zu]),ar("mouseIsDown",()=>Pr(!1))],partFields:cE,factory:(e,t,n,i)=>{const r=t=>jh(t,e,"thumb"),o=t=>jh(t,e,"spectrum"),s=t=>Hh(t,e,"left-edge"),a=t=>Hh(t,e,"right-edge"),l=t=>Hh(t,e,"top-edge"),c=t=>Hh(t,e,"bottom-edge"),d=e.model,u=d.manager,h=(t,n)=>{u.setPositionFromValue(t,n,e,{getLeftEdge:s,getRightEdge:a,getTopEdge:l,getBottomEdge:c,getSpectrum:o})},p=(e,t)=>{d.value.set(t);const n=r(e);h(e,n)},m=t=>{const n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&Hh(t,e,"thumb").each(n=>{const i=d.value.get();e.onChoose(t,n,i)})},f=(t,n)=>{n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,r(t))},g=(t,n)=>{n.stop(),e.onDragEnd(t,r(t)),m(t)},v=t=>{Hh(t,e,"spectrum").map(Tf.focusIn)};return{uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.sliderBehaviours,[Tf.config({mode:"special",focusIn:v}),Zu.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:p}}),Jl.config({channels:{[Ou()]:{onReceive:m}}})]),events:Ko([Jo(dE(),(t,n)=>{((t,n)=>{p(t,n);const i=r(t);e.onChange(t,i,n),k.some(!0)})(t,n.event.value)}),as((t,n)=>{const i=d.getInitialValue();d.value.set(i);const s=r(t);h(t,s);const a=o(t);e.onInit(t,s,a,d.value.get())}),Jo(Wr(),f),Jo(Zr(),g),Jo(Jr(),(e,t)=>{v(e),f(e,t)}),Jo(no(),g)]),apis:{resetToMin:t=>{u.setToMin(t,e)},resetToMax:t=>{u.setToMax(t,e)},setValue:p,refresh:h},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,n)=>{e.setValue(t,n)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),RM=bs("rgb-hex-update"),OM=bs("slider-update"),PM=bs("palette-update"),BM="form",NM=[Xu("formBehaviours",[Zu])],UM=e=>"<alloy.field."+e+">",FM=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.formBehaviours,[Zu.config({store:{mode:"manual",getValue:t=>{const n=Yh(t,e);return ce(n,(e,t)=>e().bind(e=>{const n=sp.getCurrent(e);return i=n,r=new Error(`Cannot find a current component to extract the value from for form part '${t}': `+fs(e.element)),i.fold(()=>ni.error(r),ni.value);var i,r}).map(Zu.getValue))},setValue:(t,n)=>{le(n,(n,i)=>{Hh(t,e,i).each(e=>{sp.getCurrent(e).each(e=>{Zu.setValue(e,n)})})})}}})]),apis:{getField:(t,n)=>Hh(t,e,n).bind(sp.getCurrent)}}),zM={getField:Ps((e,t,n)=>e.getField(t,n)),sketch:e=>{const t=(()=>{const e=[];return{field:(t,n)=>(e.push(t),Bh(BM,UM(t),n)),record:A(e)}})(),n=e(t),i=t.record(),r=F(i,e=>Sh({name:e,pname:UM(e)}));return Zh(BM,NM,r,FM,n)}},HM=bs("valid-input"),jM=bs("invalid-input"),VM=bs("validating-input"),YM="colorcustom.rgb.",GM=(e,t,n,i)=>{const r=(n,i)=>YC.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Go(e,VM,{type:n})},onValid:e=>{Go(e,HM,{type:n,value:Zu.getValue(e)})},onInvalid:e=>{Go(e,jM,{type:n,value:Zu.getValue(e)})}},validator:{validate:t=>{const n=Zu.getValue(t),r=i(n)?ni.value(!0):ni.error(e("aria.input.invalid"));return _x(r)},validateOnLoad:!1}}),o=(n,i,o,s,a)=>{const l=e(YM+"range"),c=gC.parts.label({dom:{tag:"label",attributes:{"aria-label":s}},components:[wa(o)]}),d=gC.parts.field({data:a,factory:Eb,inputAttributes:{type:"text",..."hex"===i?{"aria-live":"polite"}:{}},inputClasses:[t("textfield")],inputBehaviours:$l([r(i,n),bC.config({})]),onSetValue:e=>{if(YC.isInvalid(e)){YC.run(e).get(v)}}}),u=[c,d],h="hex"!==i?[gC.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:u.concat(h)}},s=(e,t)=>{const n=t.red,i=t.green,r=t.blue;Zu.setValue(e,{red:n,green:i,blue:r})},a=Og({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=(e,t)=>{a.getOpt(e).each(e=>{Dt(e.element,"background-color","#"+t.value)})},c=tp({factory:()=>{const r={red:Pr(k.some(255)),green:Pr(k.some(255)),blue:Pr(k.some(255)),hex:Pr(k.some("ffffff"))},c=e=>r[e].get(),d=(e,t)=>{r[e].set(t)},u=e=>{const t=e.red,n=e.green,i=e.blue;d("red",k.some(t)),d("green",k.some(n)),d("blue",k.some(i))},h=(e,t)=>{const n=t.event;"hex"!==n.type?d(n.type,k.none()):i(e)},p=(e,t,n)=>{const i=parseInt(n,10);d(t,k.some(i)),c("red").bind(e=>c("green").bind(t=>c("blue").map(n=>J_(e,t,n,1)))).each(t=>{const n=((e,t)=>{const n=$_(t);return zM.getField(e,"hex").each(t=>{Vf.isFocused(t)||Zu.setValue(e,{hex:n.value})}),n})(e,t);Go(e,RM,{hex:n}),l(e,n)})},m=(e,t)=>{const i=t.event;(e=>"hex"===e.type)(i)?((e,t)=>{n(e);const i=z_(t);d("hex",k.some(i.value));const r=nw(i);s(e,r),u(r),Go(e,RM,{hex:i}),l(e,i)})(e,i.value):p(e,i.type,i.value)},f=t=>({label:e(YM+t+".label"),description:e(YM+t+".description")}),g=f("red"),v=f("green"),y=f("blue"),b=f("hex");return Ai(zM.sketch(n=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",gC.sketch(o(ew,"red",g.label,g.description,255))),n.field("green",gC.sketch(o(ew,"green",v.label,v.description,255))),n.field("blue",gC.sketch(o(ew,"blue",y.label,y.description,255))),n.field("hex",gC.sketch(o(V_,"hex",b.label,b.description,"ffffff"))),a.asSpec()],formBehaviours:$l([YC.config({invalidClass:t("form-invalid")}),Uf("rgb-form-events",[Jo(HM,m),Jo(jM,h),Jo(VM,h)])])})),{apis:{updateHex:(e,t)=>{Zu.setValue(e,{hex:t.value}),((e,t)=>{const n=nw(t);s(e,n),u(n)})(e,t),l(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,n)=>{e.updateHex(t,n)}},extraApis:{}});return c},QM=(e,t)=>{const n=IM.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),i=IM.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(e,t)=>{const{width:n,height:i}=e,r=e.getContext("2d");if(null===r)return;r.fillStyle=t,r.fillRect(0,0,n,i);const o=r.createLinearGradient(0,0,n,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=o,r.fillRect(0,0,n,i);const s=r.createLinearGradient(0,0,0,i);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=s,r.fillRect(0,0,n,i)},o=tp({factory:o=>{const s=A({x:0,y:0}),a=$l([sp.config({find:k.some}),Vf.config({})]);return IM.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":e(["Saturation {0}%, Brightness {1}%",0,0])},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:s},rounded:!1,components:[n,i],onChange:(t,n,i)=>{f(i)||xt(t.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",Math.floor(i.x),Math.floor(100-i.y)])),Go(t,PM,{value:i})},onInit:(e,t,n,i)=>{r(n.element.dom,ow(sw))},sliderBehaviours:a})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,n)=>{((e,t)=>{const n=e.components()[0].element.dom,i=Aw(t,100,100),o=tw(i);r(n,ow(o))})(t,n)},setThumb:(t,n,i)=>{((t,n)=>{const i=_w(nw(n));IM.setValue(t,{x:i.saturation,y:100-i.value}),xt(t.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",i.saturation,i.value]))})(n,i)}},extraApis:{}});return o},$M=(e,t)=>{const n=tp({name:"ColourPicker",configFields:[cr("dom"),Mr("onValidHex",v),Mr("onInvalidHex",v)],factory:n=>{const i=GM(e,t,n.onValidHex,n.onInvalidHex),r=QM(e,t),o={paletteRgba:Pr(sw),paletteHue:Pr(0)},s=Og(((e,t)=>{const n=IM.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=IM.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return IM.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:A(0)},components:[n,i],sliderBehaviours:$l([Vf.config({})]),onChange:(e,t,n)=>{xt(e.element,"aria-valuenow",Math.floor(360-3.6*n)),Go(e,OM,{value:n})}})})(0,t)),a=Og(r.sketch({})),l=Og(i.sketch({})),c=(e,t,n)=>{a.getOpt(e).each(e=>{r.setHue(e,n)})},d=(e,t)=>{l.getOpt(e).each(e=>{i.updateHex(e,t)})},u=(e,t,n)=>{s.getOpt(e).each(e=>{IM.setValue(e,(e=>100-e/360*100)(n))})},h=(e,t)=>{a.getOpt(e).each(e=>{r.setThumb(e,t)})},p=(e,t,n,i)=>{((e,t)=>{const n=nw(e);o.paletteRgba.set(n),o.paletteHue.set(t)})(t,n),z(i,i=>{i(e,t,n)})};return{uid:n.uid,dom:n.dom,components:[a.asSpec(),s.asSpec(),l.asSpec()],behaviours:$l([Uf("colour-picker-events",[Jo(RM,(()=>{const e=[c,u,h];return(t,n)=>{const i=n.event.hex,r=(e=>_w(nw(e)))(i);p(t,i,r.hue,e)}})()),Jo(PM,(()=>{const e=[d];return(t,n)=>{const i=n.event.value,r=o.paletteHue.get(),s=Aw(r,i.x,100-i.y),a=ww(s);p(t,a,r,e)}})()),Jo(OM,(()=>{const e=[c,d];return(t,n)=>{const i=(e=>(100-e)/100*360)(n.event.value),r=o.paletteRgba.get(),s=_w(r),a=Aw(i,s.saturation,s.value),l=ww(a);p(t,l,i,e)}})())]),sp.config({find:e=>l.getOpt(e)}),Tf.config({mode:"acyclic"})])}}});return n},qM=()=>sp.config({find:k.some}),WM=e=>sp.config({find:e.getOpt}),KM=e=>sp.config({find:t=>at(t.element,e).bind(e=>t.getSystem().getByDom(e).toOptional())}),ZM=Ni([Mr("preprocess",_),Mr("postprocess",_)]),XM=(e,t)=>{const n=nr("RepresentingConfigs.memento processors",ZM,t);return Zu.config({store:{mode:"manual",getValue:t=>{const i=e.get(t),r=Zu.getValue(i);return n.postprocess(r)},setValue:(t,i)=>{const r=n.preprocess(i),o=e.get(t);Zu.setValue(o,r)}}})},JM=(e,t,n)=>Zu.config({store:{mode:"manual",...e.map(e=>({initialValue:e})).getOr({}),getValue:t,setValue:n}}),eS=(e,t,n)=>JM(e,e=>t(e.element),(e,t)=>n(e.element,t)),tS=e=>Zu.config({store:{mode:"memory",initialValue:e}}),nS={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},iS=(e,t,n)=>{const i=e=>"tox-"+e,r=$M((e=>t=>o(t)?e.translate(nS[t]):e.translate(t))(t),i),s=Og(r.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:e=>{Go(e,TC,{name:"hex-valid",value:!0})},onInvalidHex:e=>{Go(e,TC,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[s.asSpec()],behaviours:$l([JM(n,e=>{const t=s.get(e);return sp.getCurrent(t).bind(e=>Zu.getValue(e).hex).map(e=>"#"+Me(e,"#")).getOr("")},(e,t)=>{const n=k.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind(e=>te(e,1)),i=s.get(e);sp.getCurrent(i).fold(()=>{console.log("Can not find form")},e=>{Zu.setValue(e,{hex:n.getOr("")}),zM.getField(e,"hex").each(e=>{Yo(e,lo())})})}),qM()])}};var rS=tinymce.util.Tools.resolve("tinymce.Resource");var oS=tinymce.util.Tools.resolve("tinymce.util.Tools");const sS=(e,t,n)=>{const i=(e,t)=>{t.stop()},r=e=>(t,n)=>{z(e,e=>{e(t,n)})},o=(e,t)=>{var n;if(!Ap.isDisabled(e)){const i=t.event.raw;a(e,null===(n=i.dataTransfer)||void 0===n?void 0:n.files)}},s=(e,t)=>{const n=t.event.raw.target;a(e,n.files)},a=(n,i)=>{i&&(Zu.setValue(n,((e,t)=>{const n=oS.explode(t.getOption("images_file_types"));return j(re(e),e=>B(n,t=>ke(e.name.toLowerCase(),`.${t.toLowerCase()}`)))})(i,t)),Go(n,EC,{name:e.name}))},l=Og({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:$l([Uf("input-file-events",[rs(uo()),rs(Co())])])}),c=e.label.map(e=>CC(e,t)),d=gC.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:$l([tS(n.getOr([])),qM(),Ap.config({}),Zf.config({toggleClass:"dragenter",toggleOnExecute:!1}),Uf("dropzone-events",[Jo("dragenter",r([i,Zf.toggle])),Jo("dragleave",r([i,Zf.toggle])),Jo("dragover",i),Jo("drop",r([i,o])),Jo(co(),s)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[wa(t.translate("Drop an image here"))]},Ig.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[wa(t.translate("Browse for an image")),l.asSpec()],action:e=>{l.get(e).element.dom.click()},buttonBehaviours:$l([bC.config({}),f_(t.isDisabled),p_()])})]}]})}});return _C(c,d,["tox-form__group--stretched"],[])},aS=(e,t)=>{let n=null;const i=()=>{c(n)||(clearTimeout(n),n=null)};return{cancel:i,throttle:(...r)=>{i(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},lS=bs("alloy-fake-before-tabstop"),cS=bs("alloy-fake-after-tabstop"),dS=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:$l([Vf.config({ignore:!0}),bC.config({})])}),uS=(e,t)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[dS([lS]),t,dS([cS])],behaviours:$l([KM(1)])}),hS=(e,t)=>{Go(e,so(),{raw:{which:9,shiftKey:t}})},pS=(e,t)=>{const n=t.element;oa(n,lS)?hS(e,!0):oa(n,cS)&&hS(e,!1)},mS=e=>Jx(e,["."+lS,"."+cS].join(","),S),fS=bs("update-dialog"),gS=bs("update-title"),vS=bs("update-body"),yS=bs("update-footer"),bS=bs("body-send-message"),AS=bs("dialog-focus-shifted"),_S=kn().browser,wS=_S.isSafari(),xS=_S.isFirefox(),CS=wS||xS,ES=_S.isChromium(),MS=({scrollTop:e,scrollHeight:t,clientHeight:n})=>Math.ceil(e)+n>=t,SS=(e,t)=>e.scrollTo(0,"bottom"===t?99999999:t),TS=(e,t,n)=>{const i=e.dom;k.from(i.contentDocument).fold(n,e=>{let n=0;const r=((e,t)=>{const n=e.body;return k.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!ES&&!wS||p(n)&&(0!==n.scrollTop||Math.abs(n.scrollHeight-n.clientHeight)>1))?n:e.documentElement)})(e,t).map(e=>(n=e.scrollTop,e)).forall(MS),o=()=>{const e=i.contentWindow;p(e)&&(r?SS(e,"bottom"):!r&&CS&&0!==n&&SS(e,n))};wS&&i.addEventListener("load",o,{once:!0}),e.open(),e.write(t),e.close(),wS||o()})},kS=Ce(CS,wS?500:200).map(e=>((e,t)=>{let n=null,i=null;return{cancel:()=>{c(n)||(clearTimeout(n),n=null,i=null)},throttle:(...r)=>{i=r,c(n)&&(n=setTimeout(()=>{const t=i;n=null,i=null,e.apply(null,t)},t))}}})(TS,e)),LS=(e,t,n)=>{const i="tox-dialog__iframe",r=e.transparent?[]:[`${i}--opaque`],o=e.border?["tox-navobj-bordered"]:[],s={...e.label.map(e=>({title:e})).getOr({}),...n.map(e=>({srcdoc:e})).getOr({}),...e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},a=((e,t)=>{const n=Pr(e.getOr(""));return{getValue:e=>n.get(),setValue:(e,i)=>{if(n.get()!==i){const n=e.element,r=()=>xt(n,"srcdoc",i);t?kS.fold(A(TS),e=>e.throttle)(n,i,r):r()}n.set(i)}}})(n,e.streamContent),l=e.label.map(e=>CC(e,t)),c=gC.parts.field({factory:{sketch:e=>uS(k.from(o),{uid:e.uid,dom:{tag:"iframe",attributes:s,classes:[i,...r]},behaviours:$l([bC.config({}),Vf.config({}),JM(n,a.getValue,a.setValue),Jl.config({channels:{[AS]:{onReceive:(e,t)=>{t.newFocus.each(t=>{rt(e.element).each(n=>{(Ze(e.element,t)?ta:ia)(n,"tox-navobj-bordered-focus")})})}}}})])})}});return _C(l,c,["tox-form__group--stretched"],[])},DS=(e,t)=>{const n=Pr(t.getOr({url:""})),i=Og({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map(e=>({src:e.url})).getOr({})}}),r=Og({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),o={};e.height.each(e=>o.height=e);const s=t.map(e=>({url:e.url,zoom:k.from(e.zoom),cachedWidth:k.from(e.cachedWidth),cachedHeight:k.from(e.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:o,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:$l([qM(),JM(s,()=>n.get(),(e,t)=>{const o={url:t.url};t.zoom.each(e=>o.zoom=e),t.cachedWidth.each(e=>o.cachedWidth=e),t.cachedHeight.each(e=>o.cachedHeight=e),n.set(o);const s=()=>{const{cachedWidth:t,cachedHeight:n,zoom:i}=o;if(!u(t)&&!u(n)){if(u(i)){const i=((e,t,n)=>{const i=Zt(e),r=Vt(e);return Math.min(i/t,r/n,1)})(e.element,t,n);o.zoom=i}const s=((e,t,n,i,r)=>{const o=n*r,s=i*r,a=Math.max(0,e/2-o/2),l=Math.max(0,t/2-s/2);return{left:a.toString()+"px",top:l.toString()+"px",width:o.toString()+"px",height:s.toString()+"px"}})(Zt(e.element),Vt(e.element),t,n,o.zoom);r.getOpt(e).each(e=>{It(e.element,s)})}};i.getOpt(e).each(n=>{const i=n.element;t.url!==Et(i,"src")&&(xt(i,"src",t.url),ia(e.element,"tox-imagepreview__loaded")),s(),(e=>new Promise((t,n)=>{const i=()=>{o(),t(e)},r=[Mc(e,"load",i),Mc(e,"error",()=>{o(),n("Unable to load data from image: "+e.dom.src)})],o=()=>z(r,e=>e.unbind());e.dom.complete&&i()}))(i).then(t=>{e.getSystem().isConnected()&&(ta(e.element,"tox-imagepreview__loaded"),o.cachedWidth=t.dom.naturalWidth,o.cachedHeight=t.dom.naturalHeight,s())})})})])}},IS=bs("toolbar.button.execute"),RS=bs("common-button-display-events"),OS={[wo()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ro()]:["toolbar-button-events",RS],[Jr()]:["focusing","alloy.base.behaviour",RS]},PS=e=>Dt(e.element,"width",Ot(e.element,"width")),BS=(e,t,n)=>zv(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t),NS=(e,t)=>BS(e,t,[]),US=(e,t)=>BS(e,t,[Nf.config({})]),FS=(e,t,n)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[wa(n.translate(e))],behaviours:$l([Nf.config({})])}),zS=bs("update-menu-text"),HS=bs("update-menu-icon"),jS=(e,t,n)=>{const i=Pr(v),r=e.text.map(e=>Og(FS(e,t,n.providers))),o=e.icon.map(e=>Og(US(e,n.providers.icons))),s=(e,t)=>{const n=Zu.getValue(e);return Vf.focus(n),Go(n,"keydown",{raw:t.event.raw}),Bx.close(n),k.some(!0)},a=e.role.fold(()=>({}),e=>({role:e})),l=e.tooltip.fold(()=>({}),e=>{const t=n.providers.translate(e);return{title:t,"aria-label":t}}),c=zv("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},n.providers.icons),d=bs("common-button-display-events"),u=Og(Bx.sketch({...e.uid?{uid:e.uid}:{},...a,dom:{tag:"button",classes:[t,`${t}--select`].concat(F(e.classes,e=>`${t}--${e}`)),attributes:{...l}},components:x_([o.map(e=>e.asSpec()),r.map(e=>e.asSpec()),k.some(c)]),matchWidth:!0,useMinWidth:!0,onOpen:(t,n,i)=>{e.searchable&&(e=>{Lb(e).each(e=>Vf.focus(e))})(i)},dropdownBehaviours:$l([...e.dropdownBehaviours,f_(()=>e.disabled||n.providers.isDisabled()),p_(),GC.config({}),Nf.config({}),Uf("dropdown-events",[b_(e,i),A_(e,i)]),Uf(d,[as((e,t)=>PS(e))]),Uf("menubutton-update-display-text",[Jo(zS,(e,t)=>{r.bind(t=>t.getOpt(e)).each(e=>{Nf.set(e,[wa(n.providers.translate(t.event.text))])})}),Jo(HS,(e,t)=>{o.bind(t=>t.getOpt(e)).each(e=>{Nf.set(e,[US(t.event.icon,n.providers.icons)])})})])]),eventOrder:Ai(OS,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ro()]:["toolbar-button-events","dropdown-events",d]}),sandboxBehaviours:$l([Tf.config({mode:"special",onLeft:s,onRight:s}),Uf("dropdown-sandbox-events",[Jo(Mb,(e,t)=>{Nx(e),t.stop()}),Jo(Sb,(e,t)=>{((e,t)=>{Ux(e).each(n=>{((e,t,n,i)=>{const r={...i,target:t};e.getSystem().triggerEvent(n,t,r)})(e,n.element,t.event.eventType,t.event.interactionEvent)})})(e,t),t.stop()})])]),lazySink:n.getSink,toggleClass:`${t}--active`,parts:{menu:{...Ab(0,e.columns,e.presets),fakeFocus:e.searchable,onHighlightItem:Fx,onCollapseMenu:(e,t,n)=>{Dp.getHighlighted(n).each(t=>{Fx(e,n,t)})},onDehighlightItem:zx}},getAnchorOverrides:()=>({maxHeightFunction:(e,t)=>{Uc()(e,t-10)}}),fetch:t=>Ax(x(e.fetch,t))}));return u.asSpec()},VS=e=>"separator"===e.type,YS={type:"separator"},GS=(e,t)=>{const n=Y(e,(e,n)=>(e=>o(e))(n)?""===n?e:"|"===n?e.length>0&&!VS(e[e.length-1])?e.concat([YS]):e:ye(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n]),[]);return n.length>0&&VS(n[n.length-1])&&n.pop(),n},QS=(e,t)=>{const n=GS(o(e)?e.split(" "):e,t);return V(n,(e,n)=>{if((e=>ye(e,"getSubmenuItems"))(n)){const i=(e=>{const t=ve(e,"value").getOrThunk(()=>bs("generated-menu-item"));return Ai({value:t},e)})(n),r=((e,t)=>{const n=e.getSubmenuItems(),i=QS(n,t);return{item:e,menus:Ai(i.menus,{[e.value]:i.items}),expansions:Ai(i.expansions,{[e.value]:e.value})}})(i,t);return{menus:Ai(e.menus,r.menus),items:[r.item,...e.items],expansions:Ai(e.expansions,r.expansions)}}return{...e,items:[n,...e.items]}},{menus:{},expansions:{},items:[]})},$S=(e,t,n,i)=>{const r=bs("primary-menu"),o=QS(e,n.shared.providers.menuItems());if(0===o.items.length)return k.none();const s=(e=>e.search.fold(()=>({searchMode:"no-search"}),e=>({searchMode:"search-with-field",placeholder:e.placeholder})))(i),a=Gx(r,o.items,t,n,i.isHorizontalMenu,s),l=(e=>e.search.fold(()=>({searchMode:"no-search"}),e=>({searchMode:"search-with-results"})))(i),c=ce(o.menus,(e,i)=>Gx(i,e,t,n,!1,l)),d=Ai(c,Ur(r,a));return k.from(kg.tieredData(r,d,o.expansions))},qS=e=>!ye(e,"items"),WS="data-value",KS=(e,t,n,i)=>F(n,n=>qS(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===i,onAction:()=>{Zu.setValue(e,n.value),Go(e,EC,{name:t}),Vf.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:()=>KS(e,t,n.items,i)}),ZS=(e,t)=>oe(e,e=>qS(e)?Ce(e.value===t,e):ZS(e.items,t)),XS=tp({name:"HtmlSelect",configFields:[cr("options"),Xu("selectBehaviours",[Vf,Zu]),Mr("selectClasses",[]),Mr("selectAttributes",{}),yr("data")],factory:(e,t)=>{const n=F(e.options,e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}})),i=e.data.map(e=>Ur("initialValue",e)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:eh(e.selectBehaviours,[Vf.config({}),Zu.config({store:{mode:"manual",getValue:e=>ca(e.element),setValue:(t,n)=>{const i=ne(e.options);G(e.options,e=>e.value===n).isSome()?da(t.element,n):-1===t.element.dom.selectedIndex&&""===n&&i.each(e=>da(t.element,e.value))},...i}})])}}}),JS=A([Mr("field1Name","field1"),Mr("field2Name","field2"),nl("onLockedChange"),Xa(["lockClass"]),Mr("locked",!1),th("coupledFieldBehaviours",[sp,Zu])]),eT=(e,t)=>Sh({factory:gC,name:e,overrides:e=>({fieldBehaviours:$l([Uf("coupled-input-behaviour",[Jo(lo(),n=>{((e,t,n)=>Hh(e,t,n).bind(sp.getCurrent))(n,e,t).each(t=>{Hh(n,e,"lock").each(i=>{Zf.isOn(i)&&e.onLockedChange(n,t,i)})})})])])})}),tT=A([eT("field1","field2"),eT("field2","field1"),Sh({factory:Ig,schema:[cr("dom")],name:"lock",overrides:e=>({buttonBehaviours:$l([Zf.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),nT=np({name:"FormCoupledInputs",configFields:JS(),partFields:tT(),factory:(e,t,n,i)=>({uid:e.uid,dom:e.dom,components:t,behaviours:nh(e.coupledFieldBehaviours,[sp.config({find:k.some}),Zu.config({store:{mode:"manual",getValue:t=>{const n=Qh(t,e,["field1","field2"]);return{[e.field1Name]:Zu.getValue(n.field1()),[e.field2Name]:Zu.getValue(n.field2())}},setValue:(t,n)=>{const i=Qh(t,e,["field1","field2"]);be(n,e.field1Name)&&Zu.setValue(i.field1(),n[e.field1Name]),be(n,e.field2Name)&&Zu.setValue(i.field2(),n[e.field2Name])}}})]),apis:{getField1:t=>Hh(t,e,"field1"),getField2:t=>Hh(t,e,"field2"),getLock:t=>Hh(t,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),iT=e=>{const t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){const e=parseFloat(t[1]),n=t[2];return ni.value({value:e,unit:n})}return ni.error(e)},rT=(e,t)=>{const n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=e=>ye(n,e);return e.unit===t?k.some(e.value):i(e.unit)&&i(t)?n[e.unit]===n[t]?k.some(e.value):k.some(e.value/n[e.unit]*n[t]):k.none()},oT=e=>k.none(),sT=(e,t)=>{const n=iT(e).toOptional(),i=iT(t).toOptional();return we(n,i,(e,t)=>rT(e,t.unit).map(e=>t.value/e).map(e=>{return n=e,i=t.unit,e=>rT(e,i).map(e=>({value:e*n,unit:i}));var n,i}).getOr(oT)).getOr(oT)},aT=(e,t)=>{const n=e.label.map(e=>CC(e,t)),i=[Ap.config({disabled:()=>e.disabled||t.isDisabled()}),p_(),Tf.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(Yo(e,kC),k.some(!0))}),Uf("textfield-change",[Jo(lo(),(t,n)=>{Go(t,EC,{name:e.name})}),Jo(Ao(),(t,n)=>{Go(t,EC,{name:e.name})})]),bC.config({})],r=e.validation.map(e=>YC.config({getRoot:e=>rt(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{const n=Zu.getValue(t),i=e.validator(n);return _x(!0===i?ni.value(n):ni.error(i))},validateOnLoad:e.validateOnLoad}})).toArray(),o={...e.placeholder.fold(A({}),e=>({placeholder:t.translate(e)})),...e.inputMode.fold(A({}),e=>({inputmode:e}))},s=gC.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map(e=>({data:e})).getOr({}),inputAttributes:o,inputClasses:[e.classname],inputBehaviours:$l($([i,r])),selectOnFocus:!1,factory:Eb}),a=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[s]}:s,l=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),c=[Ap.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{gC.getField(e).each(Ap.disable)},onEnabled:e=>{gC.getField(e).each(Ap.enable)}}),p_()];return _C(n,a,l,c)},lT=(e,t)=>t.getAnimationRoot.fold(()=>e.element,t=>t(e)),cT=e=>e.dimension.property,dT=(e,t)=>e.dimension.getDimension(t),uT=(e,t)=>{const n=lT(e,t);aa(n,[t.shrinkingClass,t.growingClass])},hT=(e,t)=>{ia(e.element,t.openClass),ta(e.element,t.closedClass),Dt(e.element,cT(t),"0px"),zt(e.element)},pT=(e,t)=>{ia(e.element,t.closedClass),ta(e.element,t.openClass),Ft(e.element,cT(t))},mT=(e,t,n,i)=>{n.setCollapsed(),Dt(e.element,cT(t),dT(t,e.element)),uT(e,t),hT(e,t),t.onStartShrink(e),t.onShrunk(e)},fT=(e,t,n,i)=>{const r=i.getOrThunk(()=>dT(t,e.element));n.setCollapsed(),Dt(e.element,cT(t),r),zt(e.element);const o=lT(e,t);ia(o,t.growingClass),ta(o,t.shrinkingClass),hT(e,t),t.onStartShrink(e)},gT=(e,t,n)=>{const i=dT(t,e.element);("0px"===i?mT:fT)(e,t,n,k.some(i))},vT=(e,t,n)=>{const i=lT(e,t),r=oa(i,t.shrinkingClass),o=dT(t,e.element);pT(e,t);const s=dT(t,e.element);(r?()=>{Dt(e.element,cT(t),o),zt(e.element)}:()=>{hT(e,t)})(),ia(i,t.shrinkingClass),ta(i,t.growingClass),pT(e,t),Dt(e.element,cT(t),s),n.setExpanded(),t.onStartGrow(e)},yT=(e,t,n)=>{const i=lT(e,t);return!0===oa(i,t.growingClass)},bT=(e,t,n)=>{const i=lT(e,t);return!0===oa(i,t.shrinkingClass)};var AT=Object.freeze({__proto__:null,refresh:(e,t,n)=>{if(n.isExpanded()){Ft(e.element,cT(t));const n=dT(t,e.element);Dt(e.element,cT(t),n)}},grow:(e,t,n)=>{n.isExpanded()||vT(e,t,n)},shrink:(e,t,n)=>{n.isExpanded()&&gT(e,t,n)},immediateShrink:(e,t,n)=>{n.isExpanded()&&mT(e,t,n)},hasGrown:(e,t,n)=>n.isExpanded(),hasShrunk:(e,t,n)=>n.isCollapsed(),isGrowing:yT,isShrinking:bT,isTransitioning:(e,t,n)=>yT(e,t)||bT(e,t),toggleGrow:(e,t,n)=>{(n.isExpanded()?gT:vT)(e,t,n)},disableTransitions:uT,immediateGrow:(e,t,n)=>{n.isExpanded()||(pT(e,t),Dt(e.element,cT(t),dT(t,e.element)),uT(e,t),n.setExpanded(),t.onStartGrow(e),t.onGrown(e))}});var _T=Object.freeze({__proto__:null,exhibit:(e,t,n)=>{const i=t.expanded;return Fs(i?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Ur(t.dimension.property,"0px")})},events:(e,t)=>Ko([ss(po(),(n,i)=>{if(i.event.raw.propertyName===e.dimension.property){uT(n,e),t.isExpanded()&&Ft(n.element,e.dimension.property);(t.isExpanded()?e.onGrown:e.onShrunk)(n)}})])}),wT=[cr("closedClass"),cr("openClass"),cr("shrinkingClass"),cr("growingClass"),yr("getAnimationRoot"),el("onShrunk"),el("onStartShrink"),el("onGrown"),el("onStartGrow"),Mr("expanded",!1),dr("dimension",rr("property",{width:[rl("property","width"),rl("getDimension",e=>Zt(e)+"px")],height:[rl("property","height"),rl("getDimension",e=>Vt(e)+"px")]}))];const xT=Wl({fields:wT,name:"sliding",active:_T,apis:AT,state:Object.freeze({__proto__:null,init:e=>{const t=Pr(e.expanded);return Ns({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:x(t.set,!1),setExpanded:x(t.set,!0),readState:()=>"expanded: "+t.get()})}})}),CT=e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t),setActive:t=>{const n=e.element;t?(ta(n,"tox-tbtn--enabled"),xt(n,"aria-pressed",!0)):(ia(n,"tox-tbtn--enabled"),Tt(n,"aria-pressed"))},isActive:()=>oa(e.element,"tox-tbtn--enabled"),setText:t=>{Go(e,zS,{text:t})},setIcon:t=>Go(e,HS,{icon:t})}),ET=(e,t,n,i,r=!0)=>jS({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:i,fetch:(t,i)=>{const r={pattern:e.search.isSome()?Hx(t):""};e.fetch(t=>{i($S(t,nb.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:e.search}))},r,CT(t))},onSetup:e.onSetup,getApi:CT,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...r?[bC.config({})]:[]]},t,n.shared),MT=(e,t,n)=>{const i=e=>i=>{const r=!i.isActive();i.setActive(r),e.storage.set(r),n.shared.getSink().each(n=>{t().getOpt(n).each(t=>{tc(t.element),Go(t,TC,{name:e.name,value:e.storage.get()})})})},r=e=>t=>{t.setActive(e.storage.get())};return t=>{t(F(e,e=>{const t=e.text.fold(()=>({}),e=>({text:e}));return{type:e.type,active:!1,...t,onAction:i(e),onSetup:r(e)}}))}},ST=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[wa(e)]}),TT=bs("leaf-label-event-id"),kT=({leaf:e,onLeafAction:t,visible:n,treeId:i,selectedId:r,backstage:o})=>{const s=e.menu.map(e=>ET(e,"tox-mbtn",o,k.none(),n)),a=[ST(e.title)];return s.each(e=>a.push(e)),Ig.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(n?["tox-tree--leaf__label--visible"]:[])},components:a,role:"treeitem",action:n=>{t(e.id),n.getSystem().broadcastOn([`update-active-item-${i}`],{value:e.id})},eventOrder:{[so()]:[TT,"keying"]},buttonBehaviours:$l([...n?[bC.config({})]:[],Zf.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Jl.config({channels:{[`update-active-item-${i}`]:{onReceive:(t,n)=>{(n.value===e.id?Zf.on:Zf.off)(t)}}}}),Uf(TT,[as((t,n)=>{r.each(n=>{(n===e.id?Zf.on:Zf.off)(t)})}),Jo(so(),(e,t)=>{const n="ArrowLeft"===t.event.raw.code,i="ArrowRight"===t.event.raw.code;n?(Ia(e.element,".tox-tree--directory").each(t=>{e.getSystem().getByDom(t).each(e=>{Ra(t,".tox-tree--directory__label").each(t=>{e.getSystem().getByDom(t).each(Vf.focus)})})}),t.stop()):i&&t.stop()})])])})},LT=(e,t)=>((e,t,n)=>zv(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:n},t))(e,t,[]),DT=bs("directory-label-event-id"),IT=({directory:e,visible:t,noChildren:n,backstage:i})=>{const r=e.menu.map(e=>ET(e,"tox-mbtn",i,k.none())),o=[{dom:{tag:"div",classes:["tox-chevron"]},components:[LT("chevron-right",i.shared.providers.icons)]},ST(e.title)];r.each(e=>{o.push(e)});const s=t=>{Ia(t.element,".tox-tree--directory").each(n=>{t.getSystem().getByDom(n).each(n=>{const i=!Zf.isOn(n);Zf.toggle(n),Go(t,"expand-tree-node",{expanded:i,node:e.id})})})};return Ig.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(t?["tox-tree--directory__label--visible"]:[])},components:o,action:s,eventOrder:{[so()]:[DT,"keying"]},buttonBehaviours:$l([...t?[bC.config({})]:[],Uf(DT,[Jo(so(),(e,t)=>{const i="ArrowRight"===t.event.raw.code,r="ArrowLeft"===t.event.raw.code;i&&n&&t.stop(),(i||r)&&Ia(e.element,".tox-tree--directory").each(n=>{e.getSystem().getByDom(n).each(n=>{!Zf.isOn(n)&&i||Zf.isOn(n)&&r?(s(e),t.stop()):r&&!Zf.isOn(n)&&(Ia(n.element,".tox-tree--directory").each(e=>{Ra(e,".tox-tree--directory__label").each(e=>{n.getSystem().getByDom(e).each(Vf.focus)})}),t.stop())})})})])])})},RT=({children:e,onLeafAction:t,visible:n,treeId:i,expandedIds:r,selectedId:o,backstage:s})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(e=>"leaf"===e.type?kT({leaf:e,selectedId:o,onLeafAction:t,visible:n,treeId:i,backstage:s}):PT({directory:e,expandedIds:r,selectedId:o,onLeafAction:t,labelTabstopping:n,treeId:i,backstage:s})),behaviours:$l([xT.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:n}),Nf.config({})])}),OT=bs("directory-event-id"),PT=({directory:e,onLeafAction:t,labelTabstopping:n,treeId:i,backstage:r,expandedIds:o,selectedId:s})=>{const{children:a}=e,l=Pr(o),c=o.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[IT({directory:e,visible:n,noChildren:0===e.children.length,backstage:r}),RT({children:a,expandedIds:o,selectedId:s,onLeafAction:t,visible:c,treeId:i,backstage:r})],behaviours:$l([Uf(OT,[as((e,t)=>{Zf.set(e,c)}),Jo("expand-tree-node",(e,t)=>{const{expanded:n,node:i}=t.event;l.set(n?[...l.get(),i]:l.get().filter(e=>e!==i))})]),Zf.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(e,n)=>{const o=e.components()[1],c=(d=n,a.map(e=>"leaf"===e.type?kT({leaf:e,selectedId:s,onLeafAction:t,visible:d,treeId:i,backstage:r}):PT({directory:e,expandedIds:l.get(),selectedId:s,onLeafAction:t,labelTabstopping:d,treeId:i,backstage:r})));var d;n?xT.grow(o):xT.shrink(o),Nf.set(o,c)}})])}},BT=bs("tree-event-id");var NT=Object.freeze({__proto__:null,events:(e,t)=>{const n=e.stream.streams.setup(e,t);return Ko([Jo(e.event,n),ls(()=>t.cancel())].concat(e.cancelEvent.map(e=>[Jo(e,()=>t.cancel())]).getOr([])))}});const UT=e=>{const t=Pr(null);return Ns({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{const e=t.get();null!==e&&e.cancel()}})};var FT=Object.freeze({__proto__:null,throttle:UT,init:e=>e.stream.streams.state(e)});var zT=[dr("stream",rr("mode",{throttle:[cr("delay"),Mr("stopEvent",!0),rl("streams",{setup:(e,t)=>{const n=e.stream,i=aS(e.onStream,n.delay);return t.setTimer(i),(e,t)=>{i.throttle(e,t),n.stopEvent&&t.stop()}},state:UT})]})),Mr("event","input"),yr("cancelEvent"),nl("onStream")];const HT=Wl({fields:zT,name:"streaming",active:NT,state:FT}),jT=(e,t,n)=>{const i=Zu.getValue(n);Zu.setValue(t,i),YT(t)},VT=(e,t)=>{const n=e.element,i=ca(n),r=n.dom;"number"!==Et(n,"type")&&t(r,i)},YT=e=>{VT(e,(e,t)=>e.setSelectionRange(t.length,t.length))},GT=(e,t,n)=>{if(e.selectsOver){const i=Zu.getValue(t),r=e.getDisplayText(i),o=Zu.getValue(n);return 0===e.getDisplayText(o).indexOf(r)?k.some(()=>{jT(0,t,n),((e,t)=>{VT(e,(e,n)=>e.setSelectionRange(t,n.length))})(t,r.length)}):k.none()}return k.none()},QT=A("alloy.typeahead.itemexecute"),$T=A([yr("lazySink"),cr("fetch"),Mr("minChars",5),Mr("responseTime",1e3),el("onOpen"),Mr("getHotspot",k.some),Mr("getAnchorOverrides",A({})),Mr("layouts",k.none()),Mr("eventOrder",{}),Or("model",{},[Mr("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),Mr("selectsOver",!0),Mr("populateFromBrowse",!0)]),el("onSetValue"),tl("onExecute"),el("onItemExecute"),Mr("inputClasses",[]),Mr("inputAttributes",{}),Mr("inputStyles",{}),Mr("matchWidth",!0),Mr("useMinWidth",!1),Mr("dismissOnBlur",!0),Xa(["openClass"]),yr("initialData"),Xu("typeaheadBehaviours",[Vf,Zu,HT,Tf,Zf,fx]),ar("lazyTypeaheadComp",()=>Pr(k.none)),ar("previewing",()=>Pr(!0))].concat(_b()).concat(Rx())),qT=A([Th({schema:[Za()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(t,n,i)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(t=>{GT(e.model,t,i).fold(()=>{e.model.selectsOver?(Dp.dehighlight(n,i),e.previewing.set(!0)):e.previewing.set(!1)},t=>{t(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(t=>{e.model.populateFromBrowse&&jT(e.model,t,i),Mt(i.element,"id").each(e=>xt(t.element,"aria-activedescendant",e))})},onExecute:(t,n)=>e.lazyTypeaheadComp.get().map(e=>(Go(e,QT(),{item:n}),!0)),onHover:(t,n)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(t=>{e.model.populateFromBrowse&&jT(e.model,t,n)})}})})]),WT=np({name:"Typeahead",configFields:$T(),partFields:qT(),factory:(e,t,n,i)=>{const r=(t,n,r)=>{e.previewing.set(!1);const o=fx.getCoupled(t,"sandbox");if(Du.isOpen(o))sp.getCurrent(o).each(e=>{Dp.getHighlighted(e).fold(()=>{r(e)},()=>{Wo(o,e.element,"keydown",n)})});else{const n=e=>{sp.getCurrent(e).each(r)};Ex(e,s(t),t,o,i,n,Sg.HighlightMenuAndItem).get(v)}},o=wb(e),s=e=>t=>t.map(t=>{const n=ge(t.menus),i=q(n,e=>j(e.items,e=>"item"===e.type));return Zu.getState(e).update(F(i,e=>e.data)),t}),a=e=>sp.getCurrent(e),l="typeaheadevents",c=[Vf.config({}),Zu.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:e=>ca(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,n)=>{da(t.element,e.model.getDisplayText(n))},...e.initialData.map(e=>Ur("initialValue",e)).getOr({})}}),HT.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,n)=>{const r=fx.getCoupled(t,"sandbox");if(Vf.isFocused(t)&&ca(t.element).length>=e.minChars){const n=a(r).bind(e=>Dp.getHighlighted(e).map(Zu.getValue));e.previewing.set(!0);const o=t=>{a(r).each(t=>{n.fold(()=>{e.model.selectsOver&&Dp.highlightFirst(t)},e=>{Dp.highlightBy(t,t=>Zu.getValue(t).value===e.value),Dp.getHighlighted(t).orThunk(()=>(Dp.highlightFirst(t),k.none()))})})};Ex(e,s(t),t,r,i,o,Sg.HighlightJustMenu).get(v)}},cancelEvent:So()}),Tf.config({mode:"special",onDown:(e,t)=>(r(e,t,Dp.highlightFirst),k.some(!0)),onEscape:e=>{const t=fx.getCoupled(e,"sandbox");return Du.isOpen(t)?(Du.close(t),k.some(!0)):k.none()},onUp:(e,t)=>(r(e,t,Dp.highlightLast),k.some(!0)),onEnter:t=>{const n=fx.getCoupled(t,"sandbox"),i=Du.isOpen(n);if(i&&!e.previewing.get())return a(n).bind(e=>Dp.getHighlighted(e)).map(e=>(Go(t,QT(),{item:e}),!0));{const r=Zu.getValue(t);return Yo(t,So()),e.onExecute(n,t,r),i&&Du.close(n),k.some(!0)}}}),Zf.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),fx.config({others:{sandbox:t=>Dx(e,t,{onOpen:()=>Zf.on(t),onClose:()=>{e.lazyTypeaheadComp.get().each(e=>Tt(e.element,"aria-activedescendant")),Zf.off(t)}})}}),Uf(l,[as(t=>{e.lazyTypeaheadComp.set(k.some(t))}),ls(t=>{e.lazyTypeaheadComp.set(k.none())}),ds(t=>{const n=v;Sx(e,s(t),t,i,n,Sg.HighlightMenuAndItem).get(v)}),Jo(QT(),(t,n)=>{const i=fx.getCoupled(t,"sandbox");jT(e.model,t,n.event.item),Yo(t,So()),e.onItemExecute(t,i,n.event.item,Zu.getValue(t)),Du.close(i),YT(t)})].concat(e.dismissOnBlur?[Jo(bo(),e=>{const t=fx.getCoupled(e,"sandbox");oc(t.element).isNone()&&Du.close(t)})]:[]))],d={[Oo()]:[Zu.name(),HT.name(),l],...e.eventOrder};return{uid:e.uid,dom:Cb(Ai(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...o,...eh(e.typeaheadBehaviours,c)},eventOrder:d}}}),KT=e=>({...e,toCached:()=>KT(e.toCached()),bindFuture:t=>KT(e.bind(e=>e.fold(e=>_x(ni.error(e)),e=>t(e)))),bindResult:t=>KT(e.map(e=>e.bind(t))),mapResult:t=>KT(e.map(e=>e.map(t))),mapError:t=>KT(e.map(e=>e.mapError(t))),foldResult:(t,n)=>e.map(e=>e.fold(t,n)),withTimeout:(t,n)=>KT(Ax(i=>{let r=!1;const o=setTimeout(()=>{r=!0,i(ni.error(n()))},t);e.get(e=>{r||(clearTimeout(o),i(e))})}))}),ZT=e=>KT(Ax(e)),XT=ZT,JT=(e,t,n=[],i,r,o)=>{const s=t.fold(()=>({}),e=>({action:e})),a={buttonBehaviours:$l([f_(()=>!e.enabled||o.isDisabled()),p_(),bC.config({}),Uf("button press",[Xo("click"),Xo("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...s},l=Ai(a,{dom:i});return Ai(l,{components:r})},ek=(e,t,n,i=[])=>{const r={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(e=>({"aria-label":n.translate(e),title:n.translate(e)})).getOr({})},o=e.icon.map(e=>NS(e,n.icons)),s=x_([o]);return JT(e,t,i,r,s,n)},tk=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},nk=(e,t,n,i=[],r=[])=>{const o=n.translate(e.text),s=e.icon.map(e=>NS(e,n.icons)),a=[s.getOrThunk(()=>wa(o))],l=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),c=[...tk(l),...s.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r];return JT(e,t,i,{tag:"button",classes:c,attributes:{title:o}},a,n)},ik=(e,t,n,i=[],r=[])=>{const o=nk(e,k.some(t),n,i,r);return Ig.sketch(o)},rk=(e,t)=>n=>{"custom"===t?Go(n,TC,{name:e,value:{}}):"submit"===t?Yo(n,kC):"cancel"===t?Yo(n,SC):console.error("Unknown button type: ",t)},ok=(e,t,n)=>{if(((e,t)=>"menu"===t)(0,t)){const t=()=>o,i=e,r={...e,type:"menubutton",search:k.none(),onSetup:t=>(t.setEnabled(e.enabled),v),fetch:MT(i.items,t,n)},o=Og(ET(r,"tox-tbtn",n,k.none()));return o.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){const i=rk(e.name,t),r={...e,borderless:!1};return ik(r,i,n.shared.providers,[])}if(((e,t)=>"togglebutton"===t)(0,t))return((e,t)=>{var n,i;const r=e.icon.map(e=>US(e,t.icons)).map(Og),o=e.buttonType.getOr(e.primary?"primary":"secondary"),s={...e,name:null!==(n=e.name)&&void 0!==n?n:"",primary:"primary"===o,tooltip:k.from(e.tooltip),enabled:null!==(i=e.enabled)&&void 0!==i&&i,borderless:!1},a=s.tooltip.map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),l=tk(null!=o?o:"secondary"),c=e.icon.isSome()&&e.text.isSome(),d={tag:"button",classes:[...l.concat(e.icon.isSome()?["tox-button--icon"]:[]),...e.active?["tox-button--enabled"]:[],...c?["tox-button--icon-and-text"]:[]],attributes:a},u=t.translate(e.text.getOr("")),h=wa(u),p=[...x_([r.map(e=>e.asSpec())]),...e.text.isSome()?[h]:[]],m=JT(s,k.some(n=>{Go(n,TC,{name:e.name,value:{setIcon:e=>{r.map(i=>i.getOpt(n).each(n=>{Nf.set(n,[US(e,t.icons)])}))}}})}),[],d,p,t);return Ig.sketch(m)})(e,n.shared.providers);throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")},sk=(e,t)=>{const n=rk(e.name,"custom");return i=k.none(),r=gC.parts.field({factory:Ig,...nk(e,k.some(n),t,[tS(""),qM()])}),_C(i,r,[],[]);var i,r},ak={type:"separator"},lk=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:v}),ck=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:v}),dk=(e,t)=>(e=>F(e,lk))(((e,t)=>j(t,t=>t.type===e))(e,t)),uk=e=>dk("header",e.targets),hk=e=>dk("anchor",e.targets),pk=e=>k.from(e.anchorTop).map(e=>ck("<top>",e)).toArray(),mk=e=>k.from(e.anchorBottom).map(e=>ck("<bottom>",e)).toArray(),fk=(e,t)=>{const n=e.toLowerCase();return j(t,e=>{var t;const i=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text,r=null!==(t=e.value)&&void 0!==t?t:"";return Se(i.toLowerCase(),n)||Se(r.toLowerCase(),n)})},gk=(e,t,n)=>{var i,r;const o=Zu.getValue(t),s=null!==(r=null===(i=null==o?void 0:o.meta)||void 0===i?void 0:i.text)&&void 0!==r?r:o.value;return n.getLinkInformation().fold(()=>[],t=>{const i=fk(s,(e=>F(e,e=>ck(e,e)))(n.getHistory(e)));return"file"===e?(r=[i,fk(s,uk(t)),fk(s,$([pk(t),hk(t),mk(t)]))],Y(r,(e,t)=>0===e.length||0===t.length?e.concat(t):e.concat(ak,t),[])):i;var r})},vk=bs("aria-invalid"),yk=(e,t)=>{e.dom.checked=t},bk=e=>e.dom.checked,Ak=e=>(t,n,i,r)=>ve(n,"name").fold(()=>e(n,r,k.none()),o=>t.field(o,e(n,r,ve(i,o)))),_k={bar:Ak((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:F(e.items,t.interpreter)}))(e,t.shared)),collection:Ak((e,t,n)=>OC(e,t.shared.providers,n)),alertbanner:Ak((e,t)=>((e,t)=>{const n=Nv(e.icon,t.icons);return hC.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:n},components:e.url?[Ig.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:n,attributes:{title:t.translate(e.iconTooltip)}},action:t=>Go(t,TC,{name:"alert-banner",value:e.url}),buttonBehaviours:$l([Uv()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})})(e,t.shared.providers)),input:Ak((e,t,n)=>((e,t,n)=>aT({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:k.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n)),textarea:Ak((e,t,n)=>((e,t,n)=>aT({name:e.name,multiline:!0,label:e.label,inputMode:k.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:k.none(),maximized:e.maximized,data:n},t))(e,t.shared.providers,n)),label:Ak((e,t)=>((e,t)=>{const n="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[n,..."center"===e.align?[`${n}--center`]:[],..."end"===e.align?[`${n}--end`]:[]]},components:[wa(t.providers.translate(e.label))]},...F(e.items,t.interpreter)],behaviours:$l([qM(),Nf.config({}),(i=k.none(),eS(i,us,hs)),Tf.config({mode:"acyclic"})])};var i})(e,t.shared)),iframe:(e=>(t,n,i,r)=>{const o=Ai(n,{source:"dynamic"});return Ak(e)(t,o,i,r)})((e,t,n)=>LS(e,t.shared.providers,n)),button:Ak((e,t)=>sk(e,t.shared.providers)),checkbox:Ak((e,t,n)=>((e,t,n)=>{const i=e=>(e.element.dom.click(),k.some(!0)),r=gC.parts.field({factory:{sketch:_},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:$l([qM(),Ap.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{rt(e.element).each(e=>ta(e,"tox-checkbox--disabled"))},onEnabled:e=>{rt(e.element).each(e=>ia(e,"tox-checkbox--disabled"))}}),bC.config({}),Vf.config({}),eS(n,bk,yk),Tf.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Uf("checkbox-events",[Jo(co(),(t,n)=>{Go(t,EC,{name:e.name})})])])}),o=gC.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[wa(t.translate(e.label))],behaviours:$l([GC.config({})])}),s=e=>zv("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons),a=Og({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[s("checked"),s("unchecked")]});return gC.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,a.asSpec(),o],fieldBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled()}),p_()])})})(e,t.shared.providers,n)),colorinput:Ak((e,t,n)=>WC(e,t.shared,t.colorinput,n)),colorpicker:Ak((e,t,n)=>iS(0,t.shared.providers,n)),dropzone:Ak((e,t,n)=>sS(e,t.shared.providers,n)),grid:Ak((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:F(e.items,t.interpreter)}))(e,t.shared)),listbox:Ak((e,t,n)=>((e,t,n)=>{const i=t.shared.providers,r=n.bind(t=>ZS(e.items,t)).orThunk(()=>ne(e.items).filter(qS)),o=e.label.map(e=>CC(e,i)),s=gC.parts.field({dom:{},factory:{sketch:n=>jS({uid:n.uid,text:r.map(e=>e.text),icon:k.none(),tooltip:e.label,role:k.none(),fetch:(n,i)=>{const r=KS(n,e.name,e.items,Zu.getValue(n));i($S(r,nb.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:k.none()}))},onSetup:A(v),getApi:A({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[bC.config({}),JM(r.map(e=>e.value),e=>Et(e.element,WS),(t,n)=>{ZS(e.items,n).each(e=>{xt(t.element,WS,e.value),Go(t,zS,{text:e.text})})})]},"tox-listbox",t.shared)}}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[s]};return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:$([o.toArray(),[a]]),fieldBehaviours:$l([Ap.config({disabled:A(!e.enabled),onDisabled:e=>{gC.getField(e).each(Ap.disable)},onEnabled:e=>{gC.getField(e).each(Ap.enable)}})])})})(e,t,n)),selectbox:Ak((e,t,n)=>((e,t,n)=>{const i=F(e.items,e=>({text:t.translate(e.text),value:e.value})),r=e.label.map(e=>CC(e,t)),o=gC.parts.field({dom:{},...n.map(e=>({data:e})).getOr({}),selectAttributes:{size:e.size},options:i,factory:XS,selectBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled()}),bC.config({}),Uf("selectbox-change",[Jo(co(),(t,n)=>{Go(t,EC,{name:e.name})})])])}),s=e.size>1?k.none():k.some(zv("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),a={dom:{tag:"div",classes:["tox-selectfield"]},components:$([[o],s.toArray()])};return gC.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:$([r.toArray(),[a]]),fieldBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{gC.getField(e).each(Ap.disable)},onEnabled:e=>{gC.getField(e).each(Ap.enable)}}),p_()])})})(e,t.shared.providers,n)),sizeinput:Ak((e,t)=>((e,t)=>{let n=oT;const i=bs("ratio-event"),r=e=>zv(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),o=nT.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled()}),p_(),bC.config({})])}),s=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),a=n=>gC.parts.field({factory:Eb,inputClasses:["tox-textfield"],inputBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled()}),p_(),bC.config({}),Uf("size-input-events",[Jo(ro(),(e,t)=>{Go(e,i,{isField1:n})}),Jo(co(),(t,n)=>{Go(t,EC,{name:e.name})})])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[wa(t.translate(e))]}),c=nT.parts.field1(s([gC.parts.label(l("Width")),a(!0)])),d=nT.parts.field2(s([gC.parts.label(l("Height")),a(!1)]));return nT.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,d,s([l(" "),o])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,i)=>{iT(Zu.getValue(e)).each(e=>{n(e).each(e=>{Zu.setValue(t,(e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let n=e.value.toFixed((i=e.unit)in t?t[i]:1);var i;return-1!==n.indexOf(".")&&(n=n.replace(/\.?0*$/,"")),n+e.unit})(e))})})},coupledFieldBehaviours:$l([Ap.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{nT.getField1(e).bind(gC.getField).each(Ap.disable),nT.getField2(e).bind(gC.getField).each(Ap.disable),nT.getLock(e).each(Ap.disable)},onEnabled:e=>{nT.getField1(e).bind(gC.getField).each(Ap.enable),nT.getField2(e).bind(gC.getField).each(Ap.enable),nT.getLock(e).each(Ap.enable)}}),p_(),Uf("size-input-events2",[Jo(i,(e,t)=>{const i=t.event.isField1,r=i?nT.getField1(e):nT.getField2(e),o=i?nT.getField2(e):nT.getField1(e),s=r.map(Zu.getValue).getOr(""),a=o.map(Zu.getValue).getOr("");n=sT(s,a)})])])})})(e,t.shared.providers)),slider:Ak((e,t,n)=>((e,t,n)=>{const i=IM.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[wa(t.translate(e.label))]}),r=IM.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),o=IM.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return IM.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:A(n.getOrThunk(()=>(Math.abs(e.max)-Math.abs(e.min))/2))},components:[i,r,o],sliderBehaviours:$l([qM(),Vf.config({})]),onChoose:(t,n,i)=>{Go(t,EC,{name:e.name,value:i})}})})(e,t.shared.providers,n)),urlinput:Ak((e,t,n)=>((e,t,n,i)=>{const r=t.shared.providers,o=t=>{const i=Zu.getValue(t);n.addToHistory(i.value,e.filetype)},s={...i.map(e=>({initialData:e})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":vk,type:"url"},minChars:0,responseTime:0,fetch:i=>{const r=gk(e.filetype,i,n),o=$S(r,nb.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:k.none()});return _x(o)},getHotspot:e=>p.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(YC)&&YC.run(e).get(v)},typeaheadBehaviours:$l([...n.getValidationHandler().map(t=>YC.config({getRoot:e=>rt(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{c.getOpt(e).each(e=>{xt(e.element,"title",r.translate(t))})}},validator:{validate:n=>{const i=Zu.getValue(n);return XT(n=>{t({type:e.filetype,url:i.value},e=>{if("invalid"===e.status){const t=ni.error(e.message);n(t)}else{const t=ni.value(e.message);n(t)}})})},validateOnLoad:!1}})).toArray(),Ap.config({disabled:()=>!e.enabled||r.isDisabled()}),bC.config({}),Uf("urlinput-events",[Jo(lo(),t=>{const n=ca(t.element),i=n.trim();i!==n&&da(t.element,i),"file"===e.filetype&&Go(t,EC,{name:e.name})}),Jo(co(),t=>{Go(t,EC,{name:e.name}),o(t)}),Jo(Ao(),t=>{Go(t,EC,{name:e.name}),o(t)})])]),eventOrder:{[lo()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Ab(0,0,"normal")},onExecute:(e,t,n)=>{Go(t,kC,{})},onItemExecute:(t,n,i,r)=>{o(t),Go(t,EC,{name:e.name})}},a=gC.parts.field({...s,factory:WT}),l=e.label.map(e=>CC(e,r)),c=Og(((e,t,n=e,i=e)=>zv(n,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:{title:r.translate(i),"aria-live":"polite",...t.fold(()=>({}),e=>({id:e}))}},r.icons))("invalid",k.some(vk),"warning")),d=Og({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[c.asSpec()]}),u=n.getUrlPicker(e.filetype),h=bs("browser.url.event"),p=Og({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,d.asSpec()],behaviours:$l([Ap.config({disabled:()=>!e.enabled||r.isDisabled()})])}),m=Og(ik({name:e.name,icon:k.some("browse"),text:e.picker_text.or(e.label).getOr(""),enabled:e.enabled,primary:!1,buttonType:k.none(),borderless:!0},e=>Yo(e,h),r,[],["tox-browse-url"]));return gC.sketch({dom:xC([]),components:l.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:$([[p.asSpec()],u.map(()=>m.asSpec()).toArray()])}]),fieldBehaviours:$l([Ap.config({disabled:()=>!e.enabled||r.isDisabled(),onDisabled:e=>{gC.getField(e).each(Ap.disable),m.getOpt(e).each(Ap.disable)},onEnabled:e=>{gC.getField(e).each(Ap.enable),m.getOpt(e).each(Ap.enable)}}),p_(),Uf("url-input-events",[Jo(h,t=>{sp.getCurrent(t).each(n=>{const i=Zu.getValue(n),r={fieldname:e.name,...i};u.each(i=>{i(r).get(i=>{Zu.setValue(n,i),Go(t,EC,{name:e.name})})})})})])])})})(e,t,t.urlinput,n)),customeditor:Ak(e=>{const t=Cc(),n=Og({dom:{tag:e.tag}}),i=Cc();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:$l([Uf("custom-editor-events",[as(r=>{n.getOpt(r).each(n=>{((e=>ye(e,"init"))(e)?e.init(n.element.dom):rS.load(e.scriptId,e.scriptUrl).then(t=>t(n.element.dom,e.settings))).then(e=>{i.on(t=>{e.setValue(t)}),i.clear(),t.set(e)})})})]),JM(k.none(),()=>t.get().fold(()=>i.get().getOr(""),e=>e.getValue()),(e,n)=>{t.get().fold(()=>i.set(n),e=>e.setValue(n))}),qM()]),components:[n.asSpec()]}}),htmlpanel:Ak(e=>"presentation"===e.presets?hC.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):hC.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:$l([bC.config({}),Vf.config({})])})),imagepreview:Ak((e,t,n)=>DS(e,n)),table:Ak((e,t)=>((e,t)=>{const n=e=>({dom:{tag:"th",innerHtml:t.translate(e)}}),i=e=>({dom:{tag:"td",innerHtml:t.translate(e)}}),r=e=>({dom:{tag:"tr"},components:F(e,i)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(s=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:F(s,n)}]}),(o=e.cells,{dom:{tag:"tbody"},components:F(o,r)})],behaviours:$l([bC.config({}),Vf.config({})])};var o,s})(e,t.shared.providers)),tree:Ak((e,t)=>((e,t)=>{const n=e.onLeafAction.getOr(v),i=e.onToggleExpand.getOr(v),r=e.defaultExpandedIds,o=Pr(r),s=Pr(e.defaultSelectedId),a=bs("tree-id"),l=(i,r)=>e.items.map(e=>"leaf"===e.type?kT({leaf:e,selectedId:i,onLeafAction:n,visible:!0,treeId:a,backstage:t}):PT({directory:e,selectedId:i,onLeafAction:n,expandedIds:r,labelTabstopping:!0,treeId:a,backstage:t}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:l(s.get(),o.get()),behaviours:$l([Tf.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Uf(BT,[Jo("expand-tree-node",(e,t)=>{const{expanded:n,node:r}=t.event;o.set(n?[...o.get(),r]:o.get().filter(e=>e!==r)),i(o.get(),{expanded:n,node:r})})]),Jl.config({channels:{[`update-active-item-${a}`]:{onReceive:(e,t)=>{s.set(k.some(t.value)),Nf.set(e,l(k.some(t.value),o.get()))}}}}),Nf.config({})])}})(e,t)),panel:Ak((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:F(e.items,t.shared.interpreter)}))(e,t))},wk={field:(e,t)=>t,record:A([])},xk=(e,t,n,i)=>{const r=Ai(i,{shared:{interpreter:t=>Ck(e,t,n,r)}});return Ck(e,t,n,r)},Ck=(e,t,n,i)=>ve(_k,t.type).fold(()=>(console.error(`Unknown factory type "${t.type}", defaulting to container: `,t),t),r=>r(e,t,n,i)),Ek=(e,t,n)=>Ck(wk,e,t,n),Mk="layout-inset",Sk=e=>e.x,Tk=(e,t)=>e.x+e.width/2-t.width/2,kk=(e,t)=>e.x+e.width-t.width,Lk=e=>e.y,Dk=(e,t)=>e.y+e.height-t.height,Ik=(e,t)=>e.y+e.height/2-t.height/2,Rk=(e,t,n)=>al(kk(e,t),Dk(e,t),n.insetSouthwest(),hl(),"southwest",bl(e,{right:0,bottom:3}),Mk),Ok=(e,t,n)=>al(Sk(e),Dk(e,t),n.insetSoutheast(),ul(),"southeast",bl(e,{left:1,bottom:3}),Mk),Pk=(e,t,n)=>al(kk(e,t),Lk(e),n.insetNorthwest(),dl(),"northwest",bl(e,{right:0,top:2}),Mk),Bk=(e,t,n)=>al(Sk(e),Lk(e),n.insetNortheast(),cl(),"northeast",bl(e,{left:1,top:2}),Mk),Nk=(e,t,n)=>al(Tk(e,t),Lk(e),n.insetNorth(),pl(),"north",bl(e,{top:2}),Mk),Uk=(e,t,n)=>al(Tk(e,t),Dk(e,t),n.insetSouth(),ml(),"south",bl(e,{bottom:3}),Mk),Fk=(e,t,n)=>al(kk(e,t),Ik(e,t),n.insetEast(),gl(),"east",bl(e,{right:0}),Mk),zk=(e,t,n)=>al(Sk(e),Ik(e,t),n.insetWest(),fl(),"west",bl(e,{left:1}),Mk),Hk=e=>{switch(e){case"north":return Nk;case"northeast":return Bk;case"northwest":return Pk;case"south":return Uk;case"southeast":return Ok;case"southwest":return Rk;case"east":return Fk;case"west":return zk}},jk=(e,t,n,i,r)=>bc(i).map(Hk).getOr(Nk)(e,t,n,i,r),Vk=e=>{switch(e){case"north":return Uk;case"northeast":return Ok;case"northwest":return Rk;case"south":return Nk;case"southeast":return Bk;case"southwest":return Pk;case"east":return zk;case"west":return Fk}},Yk=(e,t,n,i,r)=>bc(i).map(Vk).getOr(Nk)(e,t,n,i,r),Gk={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},Qk=(e,t,n)=>{const i={maxHeightFunction:Fc()};return()=>n()?{type:"node",root:ft(mt(e())),node:k.from(e()),bubble:Vc(12,12,Gk),layouts:{onRtl:()=>[Bk],onLtr:()=>[Pk]},overrides:i}:{type:"hotspot",hotspot:t(),bubble:Vc(-12,12,Gk),layouts:{onRtl:()=>[Sl,Tl,Il],onLtr:()=>[Tl,Sl,Il]},overrides:i}},$k=(e,t,n,i)=>{const r={maxHeightFunction:Fc()};return()=>i()?{type:"node",root:ft(mt(t())),node:k.from(t()),bubble:Vc(12,12,Gk),layouts:{onRtl:()=>[Nk],onLtr:()=>[Nk]},overrides:r}:e?{type:"node",root:ft(mt(t())),node:k.from(t()),bubble:Vc(0,-Yt(t()),Gk),layouts:{onRtl:()=>[Dl],onLtr:()=>[Dl]},overrides:r}:{type:"hotspot",hotspot:n(),bubble:Vc(0,0,Gk),layouts:{onRtl:()=>[Dl],onLtr:()=>[Dl]},overrides:r}},qk=(e,t,n)=>()=>n()?{type:"node",root:ft(mt(e())),node:k.from(e()),layouts:{onRtl:()=>[Nk],onLtr:()=>[Nk]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[Il],onLtr:()=>[Il]}},Wk=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const t=e.selection.getRng(),n=e.model.table.getSelectedCells();if(n.length>1){const e=n[0],t=n[n.length-1],i={firstCell:Pe.fromDom(e),lastCell:Pe.fromDom(t)};return k.some(i)}return k.some(gd.range(Pe.fromDom(t.startContainer),t.startOffset,Pe.fromDom(t.endContainer),t.endOffset))}}),Kk=e=>t=>({type:"node",root:e(),node:t}),Zk=(e,t,n,i)=>{const r=Gy(e),o=()=>Pe.fromDom(e.getBody()),s=()=>Pe.fromDom(e.getContentAreaContainer()),a=()=>r||!i();return{inlineDialog:Qk(s,t,a),inlineBottomDialog:$k(e.inline,s,n,a),banner:qk(s,t,a),cursor:Wk(e,o),node:Kk(o)}},Xk=e=>(t,n)=>{qw(e)(t,n)},Jk=e=>()=>Rw(e),eL=e=>t=>kw(e,t),tL=e=>t=>Iw(e,t),nL=e=>()=>Ey(e),iL=e=>be(e,"items"),rL=e=>be(e,"format"),oL=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],sL=e=>Y(e,(e,t)=>{if(ye(t,"items")){const n=sL(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if((e=>ye(e,"inline"))(t)||(e=>ye(e,"block"))(t)||(e=>ye(e,"selector"))(t)){const n=`custom-${o(t.name)?t.name:t.title.toLowerCase()}`;return{customFormats:e.customFormats.concat([{name:n,format:t}]),formats:e.formats.concat([{title:t.title,format:n,icon:t.icon}])}}return{...e,formats:e.formats.concat(t)}},{customFormats:[],formats:[]}),aL=e=>ry(e).map(t=>{const n=((e,t)=>{const n=sL(t),i=t=>{z(t,t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})};return e.formatter?i(n.customFormats):e.on("init",()=>{i(n.customFormats)}),n.formats})(e,t);return oy(e)?oL.concat(n):n}).getOr(oL),lL=(e,t,n)=>({...e,type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)}),cL=(e,t,n,i)=>{const r=t=>F(t,t=>iL(t)?(e=>{const t=r(e.items);return{...e,type:"submenu",getStyleItems:A(t)}})(t):rL(t)?(e=>lL(e,n,i))(t):(e=>{const t=se(e);return 1===t.length&&P(t,"title")})(t)?{...t,type:"separator"}:(t=>{const r=o(t.name)?t.name:bs(t.title),s=`custom-${r}`,a={...t,type:"formatter",format:s,isSelected:n(s),getStylePreview:i(s)};return e.formatter.register(r,a),a})(t));return r(t)},dL=oS.trim,uL=e=>t=>{if((e=>p(e)&&1===e.nodeType)(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},hL=uL("true"),pL=uL("false"),mL=(e,t,n,i,r)=>({type:e,title:t,url:n,level:i,attach:r}),fL=e=>e.innerText||e.textContent,gL=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&yL(e),vL=e=>e&&/^(H[1-6])$/.test(e.nodeName),yL=e=>(e=>{let t=e;for(;t=t.parentNode;){const e=t.contentEditable;if(e&&"inherit"!==e)return hL(t)}return!1})(e)&&!pL(e),bL=e=>vL(e)&&yL(e),AL=e=>{var t;const n=(e=>e.id?e.id:bs("h"))(e);return mL("header",null!==(t=fL(e))&&void 0!==t?t:"","#"+n,(e=>vL(e)?parseInt(e.nodeName.substr(1),10):0)(e),()=>{e.id=n})},_L=e=>{const t=e.id||e.name,n=fL(e);return mL("anchor",n||"#"+t,"#"+t,0,v)},wL=e=>{const t=(n="h1,h2,h3,h4,h5,h6,a:not([href])",i=e,F(Ed(Pe.fromDom(i),n),e=>e.dom));var n,i;return t},xL=e=>dL(e.title).length>0,CL=e=>{const t=wL(e);return j((e=>F(j(e,bL),AL))(t).concat((e=>F(j(e,gL),_L))(t)),xL)},EL="tinymce-url-history",ML=e=>o(e)&&/^https?/.test(e),SL=e=>s(e)&&fe(e,e=>{return!(l(t=e)&&t.length<=5&&W(t,ML));var t}).isNone(),TL=()=>{const e=gw.getItem(EL);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+EL+" was not valid JSON",e),{};throw e}return SL(t)?t:(console.log("Local storage "+EL+" was not valid format",t),{})},kL=e=>{const t=TL();return ve(t,e).getOr([])},LL=(e,t)=>{if(!ML(e))return;const n=TL(),i=ve(n,t).getOr([]),r=j(i,t=>t!==e);n[t]=[e].concat(r).slice(0,5),(e=>{if(!SL(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));gw.setItem(EL,JSON.stringify(e))})(n)},DL=e=>!!e,IL=e=>ce(oS.makeMap(e,/[, ]/),DL),RL=e=>k.from(yy(e)),OL=(e,t)=>{const n=(e=>{const t=k.from(_y(e)).filter(DL).map(IL);return RL(e).fold(S,e=>t.fold(T,e=>se(e).length>0&&e))})(e);return d(n)?n?RL(e):k.none():n[t]?RL(e):k.none()},PL=e=>k.from(e).filter(o).getOrUndefined(),BL=e=>({getHistory:kL,addToHistory:LL,getLinkInformation:()=>(e=>wy(e)?k.some({targets:CL(e.getBody()),anchorTop:PL(xy(e)),anchorBottom:PL(Cy(e))}):k.none())(e),getValidationHandler:()=>(e=>k.from(by(e)))(e),getUrlPicker:t=>((e,t)=>OL(e,t).map(n=>i=>Ax(r=>{const a={filetype:t,fieldname:i.fieldname,...k.from(i.meta).getOr({})};n.call(e,(e,t)=>{if(!o(e))throw new Error("Expected value to be string");if(void 0!==t&&!s(t))throw new Error("Expected meta to be a object");r({value:e,meta:t})},i.value,a)})))(e,t)}),NL=(e,t,n,i)=>{const r=Pr(!1),o=(e=>{const t=Pr(Vy(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),s={icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:Dv.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},a=BL(t),l=(e=>{const t=t=>()=>e.formatter.match(t),n=t=>()=>{const n=e.formatter.get(t);return void 0!==n?k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):k.none()},i=Pr([]),r=Pr([]),o=Pr(!1);return e.on("PreInit",r=>{const o=aL(e),s=cL(e,o,t,n);i.set(s)}),e.on("addStyleModifications",i=>{const s=cL(e,i.items,t,n);r.set(s),o.set(i.replace)}),{getData:()=>{const e=o.get()?[]:i.get(),t=r.get();return e.concat(t)}}})(t),c=(e=>({colorPicker:Xk(e),hasCustomColors:Jk(e),getColors:eL(e),getColorCols:tL(e)}))(t),d=(e=>({isDraggableModal:nL(e)}))(t),u={shared:{providers:s,anchors:Zk(t,n,i,o.isPositionedAtTop),header:o},urlinput:a,styles:l,colorinput:c,dialog:d,isContextMenuOpen:()=>r.get(),setContextMenuState:e=>r.set(e)},h={...u,shared:{...u.shared,interpreter:e=>Ek(e,{},h),getSink:e.popup}},p={...u,shared:{...u.shared,interpreter:e=>Ek(e,{},p),getSink:e.dialog}};return{popup:h,dialog:p}},UL=Wh,FL=Ih,zL=A([Mr("shell",!1),cr("makeItem"),Mr("setupItem",v),th("listBehaviours",[Nf])]),HL=kh({name:"items",overrides:()=>({behaviours:$l([Nf.config({})])})}),jL=A([HL]),VL=np({name:A("CustomList")(),configFields:zL(),partFields:jL(),factory:(e,t,n,i)=>{const r=e.shell?{behaviours:[Nf.config({})],components:[]}:{behaviours:[],components:t},o=t=>e.shell?k.some(t):Hh(t,e,"items");return{uid:e.uid,dom:e.dom,components:r.components,behaviours:eh(e.listBehaviours,r.behaviours),apis:{setItems:(t,n)=>{o(t).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},i=>{const r=Nf.contents(i),o=n.length,s=o-r.length,a=s>0?N(s,()=>e.makeItem()):[],l=r.slice(o);z(l,e=>Nf.remove(i,e)),z(a,e=>Nf.append(i,e));const c=Nf.contents(i);z(c,(i,r)=>{e.setupItem(t,i,n[r],r)})})}}}},apis:{setItems:(e,t,n)=>{e.setItems(t,n)}}}),YL=A([cr("dom"),Mr("shell",!0),Xu("toolbarBehaviours",[Nf])]),GL=A([kh({name:"groups",overrides:()=>({behaviours:$l([Nf.config({})])})})]),QL=np({name:"Toolbar",configFields:YL(),partFields:GL(),factory:(e,t,n,i)=>{const r=t=>e.shell?k.some(t):Hh(t,e,"groups"),o=e.shell?{behaviours:[Nf.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:o.components,behaviours:eh(e.toolbarBehaviours,o.behaviours),apis:{setGroups:(e,t)=>{r(e).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},e=>{Nf.set(e,t)})},refresh:v},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)}}}),$L=v,qL=S,WL=A([]);var KL=Object.freeze({__proto__:null,setup:$L,isDocked:qL,getBehaviours:WL});const ZL=e=>(Ae(Bt(e,"position"),"fixed")?k.none():ot(e)).orThunk(()=>{const t=Pe.fromTag("span");return it(e).bind(e=>{Bn(e,t);const n=ot(t);return Fn(t),n})}),XL=e=>ZL(e).map(qt).getOrThunk(()=>Qt(0,0)),JL=(e,t)=>{const n=e.element;ta(n,t.transitionClass),ia(n,t.fadeOutClass),ta(n,t.fadeInClass),t.onShow(e)},eD=(e,t)=>{const n=e.element;ta(n,t.transitionClass),ia(n,t.fadeInClass),ta(n,t.fadeOutClass),t.onHide(e)},tD=(e,t)=>e.y>=t.y,nD=(e,t)=>e.bottom<=t.bottom,iD=(e,t,n)=>({location:"top",leftX:t,topY:n.bounds.y-e.y}),rD=(e,t,n)=>({location:"bottom",leftX:t,bottomY:e.bottom-n.bounds.bottom}),oD=e=>e.box.x-e.win.x,sD=(e,t,n)=>n.getInitialPos().map(n=>{const i=((e,t)=>{const n=t.optScrollEnv.fold(A(e.bounds.y),t=>t.scrollElmTop+(e.bounds.y-t.currentScrollTop));return Qt(e.bounds.x,n)})(n,t);return{box:qn(i.left,i.top,Zt(e),Vt(e)),location:n.location}}),aD=(e,t,n,i,r)=>{const o=((e,t)=>{const n=t.optScrollEnv.fold(A(e.y),t=>e.y+t.currentScrollTop-t.scrollElmTop);return Qt(e.x,n)})(t,n),s=qn(o.left,o.top,t.width,t.height);i.setInitialPos({style:Nt(e),position:Ot(e,"position")||"static",bounds:s,location:r.location})},lD=(e,t,n)=>n.getInitialPos().bind(i=>{var r;switch(n.clearInitialPos(),i.position){case"static":return k.some({morph:"static"});case"absolute":const n=ZL(e).getOr(At()),o=Wn(n),s=null!==(r=n.dom.scrollTop)&&void 0!==r?r:0;return k.some({morph:"absolute",positionCss:ac("absolute",ve(i.style,"left").map(e=>t.x-o.x),ve(i.style,"top").map(e=>t.y-o.y+s),ve(i.style,"right").map(e=>o.right-t.right),ve(i.style,"bottom").map(e=>o.bottom-t.bottom))});default:return k.none()}}),cD=(e,t,n)=>sD(e,t,n).filter(({box:e})=>((e,t,n)=>W(e,e=>{switch(e){case"bottom":return nD(t,n.bounds);case"top":return tD(t,n.bounds)}}))(n.getModes(),e,t)).bind(({box:t})=>lD(e,t,n)),dD=e=>{switch(e.location){case"top":return k.some({morph:"fixed",positionCss:ac("fixed",k.some(e.leftX),k.some(e.topY),k.none(),k.none())});case"bottom":return k.some({morph:"fixed",positionCss:ac("fixed",k.some(e.leftX),k.none(),k.none(),k.some(e.bottomY))});default:return k.none()}},uD=(e,t,n)=>{const i=Wn(e),r=Xn(),o=((e,t,n)=>{const i=t.win,r=t.box,o=oD(t);return oe(e,e=>{switch(e){case"bottom":return nD(r,n.bounds)?k.none():k.some(rD(i,o,n));case"top":return tD(r,n.bounds)?k.none():k.some(iD(i,o,n));default:return k.none()}}).getOr({location:"no-dock"})})(n.getModes(),{win:r,box:i},t);return"top"===o.location||"bottom"===o.location?(aD(e,i,t,n,o),dD(o)):k.none()},hD=(e,t,n)=>{const i=e.element;return Ae(Bt(i,"position"),"fixed")?((e,t,n)=>cD(e,t,n).orThunk(()=>t.optScrollEnv.bind(i=>sD(e,t,n)).bind(({box:e,location:n})=>{const i=Xn(),r=oD({win:i,box:e}),o="top"===n?iD(i,r,t):rD(i,r,t);return dD(o)})))(i,t,n):uD(i,t,n)},pD=(e,t,n,i)=>{const r=Wn(e),o=Xn(),s=i(o,oD({win:o,box:r}),t);return"bottom"===s.location||"top"===s.location?(((e,t,n,i,r)=>{i.getInitialPos().fold(()=>aD(e,t,n,i,r),()=>v)})(e,r,t,n,s),dD(s)):k.none()},mD=(e,t,n)=>{n.setDocked(!1),z(["left","right","top","bottom","position"],t=>Ft(e.element,t)),t.onUndocked(e)},fD=(e,t,n,i)=>{const r="fixed"===i.position;n.setDocked(r),lc(e.element,i);(r?t.onDocked:t.onUndocked)(e)},gD=(e,t,n,i,r=!1)=>{t.contextual.each(t=>{t.lazyContext(e).each(o=>{const s=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(o,i.bounds);if(s!==n.isVisible())if(n.setVisible(s),r&&!s)sa(e.element,[t.fadeOutClass]),t.onHide(e);else{(s?JL:eD)(e,t)}})})},vD=(e,t,n,i,r)=>{gD(e,t,n,i,!0),fD(e,t,n,r.positionCss)},yD=(e,t,n)=>{const i=t.lazyViewport(e);gD(e,t,n,i),hD(e,i,n).each(r=>{((e,t,n,i,r)=>{switch(r.morph){case"static":return mD(e,t,n);case"absolute":return fD(e,t,n,r.positionCss);case"fixed":vD(e,t,n,i,r)}})(e,t,n,i,r)})},bD=(e,t,n)=>{const i=e.element;n.setDocked(!1);const r=t.lazyViewport(e);((e,t,n)=>{const i=e.element;return sD(i,t,n).bind(({box:e})=>lD(i,e,n))})(e,r,n).each(i=>{switch(i.morph){case"static":mD(e,t,n);break;case"absolute":fD(e,t,n,i.positionCss)}}),n.setVisible(!0),t.contextual.each(t=>{aa(i,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)}),AD(e,t,n)},AD=(e,t,n)=>{e.getSystem().isConnected()&&yD(e,t,n)},_D=(e,t,n)=>{n.isDocked()&&bD(e,t,n)},wD=e=>(t,n,i)=>{const r=n.lazyViewport(t);pD(t.element,r,i,e).each(e=>{vD(t,n,i,r,e)})},xD=wD(iD),CD=wD(rD);var ED=Object.freeze({__proto__:null,refresh:AD,reset:_D,isDocked:(e,t,n)=>n.isDocked(),getModes:(e,t,n)=>n.getModes(),setModes:(e,t,n,i)=>n.setModes(i),forceDockToTop:xD,forceDockToBottom:CD});var MD=Object.freeze({__proto__:null,events:(e,t)=>Ko([ss(po(),(n,i)=>{e.contextual.each(e=>{if(oa(n.element,e.transitionClass)){aa(n.element,[e.transitionClass,e.fadeInClass]);(t.isVisible()?e.onShown:e.onHidden)(n)}i.stop()})}),Jo(Do(),(n,i)=>{AD(n,e,t)}),Jo(Fo(),(n,i)=>{AD(n,e,t)}),Jo(Io(),(n,i)=>{_D(n,e,t)})])}),SD=[Er("contextual",[hr("fadeInClass"),hr("fadeOutClass"),hr("transitionClass"),mr("lazyContext"),el("onShow"),el("onShown"),el("onHide"),el("onHidden")]),Ir("lazyViewport",()=>({bounds:Xn(),optScrollEnv:k.none()})),Rr("modes",["top","bottom"],Gi),el("onDocked"),el("onUndocked")];const TD=Wl({fields:SD,name:"docking",active:MD,apis:ED,state:Object.freeze({__proto__:null,init:e=>{const t=Pr(!1),n=Pr(!0),i=Cc(),r=Pr(e.modes);return Ns({isDocked:t.get,setDocked:t.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:()=>`docked:  ${t.get()}, visible: ${n.get()}, modes: ${r.get().join(",")}`})}})}),kD=A(bs("toolbar-height-change")),LD={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},DD="tox-tinymce--toolbar-sticky-on",ID="tox-tinymce--toolbar-sticky-off",RD=(e,t)=>P(TD.getModes(e),t),OD=e=>{const t=e.element;rt(t).each(n=>{const i="padding-"+TD.getModes(e)[0];if(TD.isDocked(e)){const e=Zt(n);Dt(t,"width",e+"px"),Dt(n,i,(e=>Yt(e)+(parseInt(Ot(e,"margin-top"),10)||0)+(parseInt(Ot(e,"margin-bottom"),10)||0))(t)+"px")}else Ft(t,"width"),Ft(n,i)})},PD=(e,t)=>{t?(ia(e,LD.fadeOutClass),sa(e,[LD.transitionClass,LD.fadeInClass])):(ia(e,LD.fadeInClass),sa(e,[LD.fadeOutClass,LD.transitionClass]))},BD=(e,t)=>{const n=Pe.fromDom(e.getContainer());t?(ta(n,DD),ia(n,ID)):(ta(n,ID),ia(n,DD))},ND=(e,t)=>{const n=Cc(),i=t.getSink,r=e=>{i().each(t=>e(t.element))},o=t=>{e.inline||OD(t),BD(e,TD.isDocked(t)),t.getSystem().broadcastOn([Ru()],{}),i().each(e=>e.getSystem().broadcastOn([Ru()],{}))},s=e.inline?[]:[Jl.config({channels:{[kD()]:{onReceive:OD}}})];return[Vf.config({}),TD.config({contextual:{lazyContext:t=>{const n=Yt(t.element),i=e.inline?e.getContentAreaContainer():e.getContainer();return k.from(i).map(i=>{const r=Wn(Pe.fromDom(i));return Zx(e,t.element).fold(()=>{const e=r.height-n,i=r.y+(RD(t,"top")?0:n);return qn(r.x,i,r.width,e)},e=>{const i=Zn(r,Xx(e)),o=RD(t,"top")?i.y:i.y+n;return qn(i.x,o,i.width,i.height-n)})})},onShow:()=>{r(e=>PD(e,!0))},onShown:e=>{r(e=>aa(e,[LD.transitionClass,LD.fadeInClass])),n.get().each(t=>{((e,t)=>{const n=Je(t);rc(n).filter(e=>!Ze(t,e)).filter(t=>Ze(t,Pe.fromDom(n.dom.body))||Xe(e,t)).each(()=>tc(t))})(e.element,t),n.clear()})},onHide:e=>{((e,t)=>oc(e).orThunk(()=>t().toOptional().bind(e=>oc(e.element))))(e.element,i).fold(n.clear,n.set),r(e=>PD(e,!1))},onHidden:()=>{r(e=>aa(e,[LD.transitionClass]))},...LD},lazyViewport:t=>Zx(e,t.element).fold(()=>{const n=Xn(),i=fy(e),r=n.y+(RD(t,"top")?i:0),o=n.height-(RD(t,"bottom")?i:0);return{bounds:qn(n.x,r,n.width,o),optScrollEnv:k.none()}},e=>({bounds:Xx(e),optScrollEnv:k.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:qt(e.element).top})})),modes:[t.header.getDockingMode()],onDocked:o,onUndocked:o}),...s]};var UD=Object.freeze({__proto__:null,setup:(e,t,n)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{n().each(TD.reset)}),e.on("ResizeWindow ResizeEditor",()=>{n().each(OD)}),e.on("SkinLoaded",()=>{n().each(e=>{TD.isDocked(e)?TD.reset(e):TD.refresh(e)})}),e.on("FullscreenStateChanged",()=>{n().each(TD.reset)})),e.on("AfterScrollIntoView",e=>{n().each(t=>{TD.refresh(t);const n=t.element;Am(n)&&((e,t)=>{const n=Je(t),i=nt(t).dom.innerHeight,r=zn(n),o=Pe.fromDom(e.elm),s=Kn(o),a=Vt(o),l=s.y,c=l+a,d=qt(t),u=Vt(t),h=d.top,p=h+u,m=Math.abs(h-r.top)<2,f=Math.abs(p-(r.top+i))<2;if(m&&l<p)Hn(r.left,l-u,n);else if(f&&c>h){const e=l-i+a+u;Hn(r.left,e,n)}})(e,n)})}),e.on("PostRender",()=>{BD(e,!1)})},isDocked:e=>e().map(TD.isDocked).getOr(!1),getBehaviours:ND});const FD=Ni([Vb,dr("items",Fi([Hi([Yb,vr("items",Gi)]),Gi]))].concat(bA)),zD=[_r("text"),_r("tooltip"),_r("icon"),Sr("search",!1,Fi([Qi,Ni([_r("placeholder")])],e=>d(e)?e?k.some({placeholder:k.none()}):k.none():k.some(e))),mr("fetch"),Ir("onSetup",()=>v)],HD=Ni([Vb,...zD]),jD=e=>er("menubutton",HD,e),VD=Ni([Vb,rA,iA,nA,aA,Kb,eA,Lr("presets","normal",["normal","color","listpreview"]),hA(1),Xb,Jb]);var YD=tp({factory:(e,t)=>{const n={focus:Tf.focusIn,setMenus:(e,n)=>{const i=F(n,e=>{const n={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},i=jD(n).mapError(e=>ir(e)).getOrDie();return ET(i,"tox-mbtn",t.backstage,k.some("menuitem"))});Nf.set(e,i)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:$l([Nf.config({}),Uf("menubar-events",[as(t=>{e.onSetup(t)}),Jo(io(),(e,t)=>{Oa(e.element,".tox-mbtn--active").each(n=>{Pa(t.event.target,".tox-mbtn").each(t=>{Ze(n,t)||e.getSystem().getByDom(n).each(n=>{e.getSystem().getByDom(t).each(e=>{Bx.expand(e),Bx.close(n),Vf.focus(e)})})})})}),Jo(No(),(e,t)=>{t.event.prevFocus.bind(t=>e.getSystem().getByDom(t).toOptional()).each(n=>{t.event.newFocus.bind(t=>e.getSystem().getByDom(t).toOptional()).each(e=>{Bx.isOpen(n)&&(Bx.expand(e),Bx.close(n))})})})]),Tf.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),k.some(!0))}),bC.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[cr("dom"),cr("uid"),cr("onEscape"),cr("backstage"),Mr("onSetup",v)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,n)=>{e.setMenus(t,n)}}});const GD="container",QD=[Xu("slotBehaviours",[])],$D=e=>"<alloy.field."+e+">",qD=(e,t)=>{const n=t=>Gh(e),i=(t,n)=>(i,r)=>Hh(i,e,r).map(e=>t(e,r)).getOr(n),r=(e,t)=>"true"!==Et(e.element,"aria-hidden"),o=i(r,!1),s=i((e,t)=>{if(r(e)){const n=e.element;Dt(n,"display","none"),xt(n,"aria-hidden","true"),Go(e,Uo(),{name:t,visible:!1})}}),a=(e=>(t,n)=>{z(n,n=>e(t,n))})(s),l=i((e,t)=>{if(!r(e)){const n=e.element;Ft(n,"display"),Tt(n,"aria-hidden"),Go(e,Uo(),{name:t,visible:!0})}}),c={getSlotNames:n,getSlot:(t,n)=>Hh(t,e,n),isShowing:o,hideSlot:s,hideAllSlots:e=>a(e,n()),showSlot:l};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ju(e.slotBehaviours),apis:c}},WD=ce({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,n)=>e.getSlot(t,n),isShowing:(e,t,n)=>e.isShowing(t,n),hideSlot:(e,t,n)=>e.hideSlot(t,n),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,n)=>e.showSlot(t,n)},e=>Ps(e)),KD={...WD,sketch:e=>{const t=(()=>{const e=[];return{slot:(t,n)=>(e.push(t),Bh(GD,$D(t),n)),record:A(e)}})(),n=e(t),i=t.record(),r=F(i,e=>Sh({name:e,pname:$D(e)}));return Zh(GD,QD,r,qD,n)}},ZD=Ni([iA,rA,Ir("onShow",v),Ir("onHide",v),eA]),XD=e=>({element:()=>e.element.dom}),JD=(e,t)=>{const n=F(se(t),e=>{const n=t[e],i=tr((e=>er("sidebar",ZD,e))(n));return{name:e,getApi:XD,onSetup:i.onSetup,onShow:i.onShow,onHide:i.onHide}});return F(n,t=>{const i=Pr(v);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:XA([b_(t,i),A_(t,i),Jo(Uo(),(e,t)=>{const i=t.event,r=G(n,e=>e.name===i.name);r.each(t=>{(i.visible?t.onShow:t.onHide)(t.getApi(e))})})])})})},eI=e=>KD.sketch(t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:JD(t,e),slotBehaviours:XA([as(e=>KD.hideAllSlots(e))])})),tI=(e,t)=>{xt(e,"role",t)},nI=e=>sp.getCurrent(e).bind(e=>{if(xT.isGrowing(e)||xT.hasGrown(e)){return sp.getCurrent(e).bind(e=>G(KD.getSlotNames(e),t=>KD.isShowing(e,t)))}return k.none()}),iI=bs("FixSizeEvent"),rI=bs("AutoSizeEvent");var oI=Object.freeze({__proto__:null,block:(e,t,n,i)=>{xt(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),o=$l([Tf.config({mode:"special",onTab:()=>k.some(!0),onShiftTab:()=>k.some(!0)}),Vf.config({})]),s=i(r,o),a=r.getSystem().build(s);Nf.append(r,Sa(a)),a.hasConfigured(Tf)&&t.focus&&Tf.focusIn(a),n.isBlocked()||t.onBlock(e),n.blockWith(()=>Nf.remove(r,a))},unblock:(e,t,n)=>{Tt(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()},isBlocked:(e,t,n)=>n.isBlocked()}),sI=[Ir("getRoot",k.none),Dr("focus",!0),el("onBlock"),el("onUnblock")];const aI=Wl({fields:sI,name:"blocking",apis:oI,state:Object.freeze({__proto__:null,init:()=>{const e=wc(e=>e.destroy());return Ns({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),lI=e=>sp.getCurrent(e).each(e=>tc(e.element,!0)),cI=(e,t,n,i)=>{const r=t.element;if(((e,t)=>{const n="tabindex",i=`data-mce-${n}`;k.from(e.iframeElement).map(Pe.fromDom).each(e=>{t?(Mt(e,n).each(t=>xt(e,i,t)),xt(e,n,-1)):(Tt(e,n),Mt(e,i).each(t=>{xt(e,n,t),Tt(e,i)}))})})(e,n),n)aI.block(t,(e=>(t,n)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Rg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(i)),Ft(r,"display"),Tt(r,"aria-hidden"),e.hasFocus()&&lI(t);else{const n=sp.getCurrent(t).exists(e=>ic(e.element));aI.unblock(t),Dt(r,"display","none"),xt(r,"aria-hidden","true"),n&&e.focus()}},dI=(e,t,n)=>{const i=Pr(!1),r=Cc(),o=n=>{i.get()&&!(e=>{if((e=>"focusin"===e.type)(e))return(e.composed?ne(e.composedPath()):k.from(e.target)).map(Pe.fromDom).filter(Ye).exists(e=>oa(e,"mce-pastebin"));return!1})(n)&&(n.preventDefault(),lI(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",o),e.on("BeforeExecCommand",e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&o(e)})});const s=r=>{r!==i.get()&&(i.set(r),cI(e,t(),r,n.providers),((e,t)=>{e.dispatch("AfterProgressState",{state:t})})(e,r))};e.on("ProgressState",t=>{if(r.on(clearTimeout),f(t.time)){const n=Dg.setEditorTimeout(e,()=>s(t.state),t.time);r.set(n)}else s(t.state),r.clear()})},uI=(e,t,n)=>({within:e,extra:t,withinWidth:n}),hI=(e,t,n)=>{const i=((e,t)=>{const n=Y(e,(e,n)=>t(n,e.len).fold(A(e),t=>({len:t.finish,list:e.list.concat([t])})),{len:0,list:[]});return n.list})(e,(e,t)=>{const i=n(e);return k.some({element:e,start:t,finish:t+i,width:i})}),r=j(i,e=>e.finish<=t),o=V(r,(e,t)=>e+t.width,0);return{within:r,extra:i.slice(r.length),withinWidth:o}},pI=e=>F(e,e=>e.element),mI=(e,t,n,i)=>{const r=((e,t,n)=>{const i=hI(t,e,n);return 0===i.extra.length?k.some(i):k.none()})(e,t,n).getOrThunk(()=>hI(t,e-n(i),n)),o=r.within,s=r.extra,a=r.withinWidth;return 1===s.length&&s[0].width<=n(i)?((e,t,n)=>{const i=pI(e.concat(t));return uI(i,[],n)})(o,s,a):s.length>=1?((e,t,n,i)=>{const r=pI(e).concat([n]);return uI(r,pI(t),i)})(o,s,i,a):((e,t,n)=>uI(pI(e),[],n))(o,0,a)},fI=(e,t)=>{const n=F(t,e=>Sa(e));QL.setGroups(e,n)},gI=(e,t,n)=>{const i=t.builtGroups.get();if(0===i.length)return;const r=jh(e,t,"primary"),o=fx.getCoupled(e,"overflowGroup");Dt(r.element,"visibility","hidden");const s=i.concat([o]),a=oe(s,e=>oc(e.element).bind(t=>e.getSystem().getByDom(t).toOptional()));n([]),fI(r,s);const l=Zt(r.element),c=mI(l,t.builtGroups.get(),e=>Zt(e.element),o);0===c.extra.length?(Nf.remove(r,o),n([])):(fI(r,c.within),n(c.extra)),Ft(r.element,"visibility"),zt(r.element),a.each(Vf.focus)},vI=A([Xu("splitToolbarBehaviours",[fx]),ar("builtGroups",()=>Pr([]))]),yI=A([Xa(["overflowToggledClass"]),xr("getOverflowBounds"),cr("lazySink"),ar("overflowGroups",()=>Pr([])),el("onOpened"),el("onClosed")].concat(vI())),bI=A([Sh({factory:QL,schema:YL(),name:"primary"}),Th({schema:YL(),name:"overflow"}),Th({name:"overflow-button"}),Th({name:"overflow-group"})]),AI=A((e,t)=>{((e,t)=>{const n=Kt.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Dt(e,"max-width",n+"px")})(e,Math.floor(t))}),_I=A([Xa(["toggledClass"]),cr("lazySink"),mr("fetch"),xr("getBounds"),Er("fireDismissalEventInstead",[Mr("event",Po())]),Zc(),el("onToggled")]),wI=A([Th({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:$l([Zf.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),Th({factory:QL,schema:YL(),name:"toolbar",overrides:e=>({toolbarBehaviours:$l([Tf.config({mode:"cyclic",onEscape:t=>(Hh(t,e,"button").each(Vf.focus),k.none())})])})})]),xI=Cc(),CI=(e,t)=>{const n=fx.getCoupled(e,"toolbarSandbox");Du.isOpen(n)?Du.close(n):Du.open(n,t.toolbar())},EI=(e,t,n,i)=>{const r=n.getBounds.map(e=>e()),o=n.lazySink(e).getOrDie();ru.positionWithinBounds(o,t,{anchor:{type:"hotspot",hotspot:e,layouts:i,overrides:{maxWidthFunction:AI()}}},r)},MI=(e,t,n,i,r)=>{QL.setGroups(t,r),EI(e,t,n,i),Zf.on(e)},SI=np({name:"FloatingToolbarButton",factory:(e,t,n,i)=>({...Ig.sketch({...i.button(),action:e=>{CI(e,i)},buttonBehaviours:nh({dump:i.button().buttonBehaviours},[fx.config({others:{toolbarSandbox:t=>((e,t,n)=>{const i=Na();return{dom:{tag:"div",attributes:{id:i.id}},behaviours:$l([Tf.config({mode:"special",onEscape:e=>(Du.close(e),k.some(!0))}),Du.config({onOpen:(r,o)=>{const s=xI.get().getOr(!1);n.fetch().get(r=>{MI(e,o,n,t.layouts,r),i.link(e.element),s||Tf.focusIn(o)})},onClose:()=>{Zf.off(e),xI.get().getOr(!1)||Vf.focus(e),i.unlink(e.element)},isPartOf:(t,n,i)=>Fa(n,i)||Fa(e,i),getAttachPoint:()=>n.lazySink(e).getOrDie()}),Jl.config({channels:{...Bu({isExtraPart:S,...n.fireDismissalEventInstead.map(e=>({fireEventInstead:{event:e.event}})).getOr({})}),...Uu({doReposition:()=>{Du.getState(fx.getCoupled(e,"toolbarSandbox")).each(i=>{EI(e,i,n,t.layouts)})}})}})])}})(t,n,e)}})])}),apis:{setGroups:(t,i)=>{Du.getState(fx.getCoupled(t,"toolbarSandbox")).each(r=>{MI(t,r,e,n.layouts,i)})},reposition:t=>{Du.getState(fx.getCoupled(t,"toolbarSandbox")).each(i=>{EI(t,i,e,n.layouts)})},toggle:e=>{CI(e,i)},toggleWithoutFocusing:e=>{((e,t)=>{xI.set(!0),CI(e,t),xI.clear()})(e,i)},getToolbar:e=>Du.getState(fx.getCoupled(e,"toolbarSandbox")),isOpen:e=>Du.isOpen(fx.getCoupled(e,"toolbarSandbox"))}}),configFields:_I(),partFields:wI(),apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggleWithoutFocusing(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),TI=A([cr("items"),Xa(["itemSelector"]),Xu("tgroupBehaviours",[Tf])]),kI=A([Lh({name:"items",unit:"item"})]),LI=np({name:"ToolbarGroup",configFields:TI(),partFields:kI(),factory:(e,t,n,i)=>({uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.tgroupBehaviours,[Tf.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),DI=e=>F(e,e=>Sa(e)),II=(e,t,n)=>{gI(e,n,i=>{n.overflowGroups.set(i),t.getOpt(e).each(e=>{SI.setGroups(e,DI(i))})})},RI=np({name:"SplitFloatingToolbar",configFields:yI(),partFields:bI(),factory:(e,t,n,i)=>{const r=Og(SI.sketch({fetch:()=>Ax(t=>{t(DI(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Tl,Sl],onRtl:()=>[Sl,Tl],onBottomLtr:()=>[Ll,kl],onBottomRtl:()=>[kl,Ll]},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(t,n)=>e[n?"onOpened":"onClosed"](t)}));return{uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:()=>LI.sketch({...i["overflow-group"](),items:[r.asSpec()]})}})]),apis:{setGroups:(t,n)=>{e.builtGroups.set(F(n,t.getSystem().build)),II(t,r,e)},refresh:t=>II(t,r,e),toggle:e=>{r.getOpt(e).each(e=>{SI.toggle(e)})},toggleWithoutFocusing:e=>{r.getOpt(e).each(SI.toggleWithoutFocusing)},isOpen:e=>r.getOpt(e).map(SI.isOpen).getOr(!1),reposition:e=>{r.getOpt(e).each(e=>{SI.reposition(e)})},getOverflow:e=>r.getOpt(e).bind(SI.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},toggleWithoutFocusing:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),OI=A([Xa(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),el("onOpened"),el("onClosed")].concat(vI())),PI=A([Sh({factory:QL,schema:YL(),name:"primary"}),Sh({factory:QL,schema:YL(),name:"overflow",overrides:e=>({toolbarBehaviours:$l([xT.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{Hh(t,e,"overflow-button").each(e=>{Zf.off(e),Vf.focus(e)}),e.onClosed(t)},onGrown:t=>{Tf.focusIn(t),e.onOpened(t)},onStartGrow:t=>{Hh(t,e,"overflow-button").each(Zf.on)}}),Tf.config({mode:"acyclic",onEscape:t=>(Hh(t,e,"overflow-button").each(Vf.focus),k.some(!0))})])})}),Th({name:"overflow-button",overrides:e=>({buttonBehaviours:$l([Zf.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Th({name:"overflow-group"})]),BI=(e,t)=>{Hh(e,t,"overflow-button").bind(()=>Hh(e,t,"overflow")).each(n=>{NI(e,t),xT.toggleGrow(n)})},NI=(e,t)=>{Hh(e,t,"overflow").each(n=>{gI(e,t,e=>{const t=F(e,e=>Sa(e));QL.setGroups(n,t)}),Hh(e,t,"overflow-button").each(e=>{xT.hasGrown(n)&&Zf.on(e)}),xT.refresh(n)})},UI=np({name:"SplitSlidingToolbar",configFields:OI(),partFields:PI(),factory:(e,t,n,i)=>{const r="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:eh(e.splitToolbarBehaviours,[fx.config({others:{overflowGroup:e=>LI.sketch({...i["overflow-group"](),items:[Ig.sketch({...i["overflow-button"](),action:t=>{Yo(e,r)}})]})}}),Uf("toolbar-toggle-events",[Jo(r,t=>{BI(t,e)})])]),apis:{setGroups:(t,n)=>{((t,n)=>{const i=F(n,t.getSystem().build);e.builtGroups.set(i)})(t,n),NI(t,e)},refresh:t=>NI(t,e),toggle:t=>BI(t,e),isOpen:t=>((e,t)=>Hh(e,t,"overflow").map(xT.hasGrown).getOr(!1))(t,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,n)=>{e.setGroups(t,n)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),FI=e=>{const t=e.title.fold(()=>({}),e=>({attributes:{title:e}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...t},components:[LI.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:$l([bC.config({}),Vf.config({})])}},zI=e=>LI.sketch(FI(e)),HI=(e,t)=>{const n=as(t=>{const n=F(e.initGroups,zI);QL.setGroups(t,n)});return $l([v_(e.providers.isDisabled),p_(),Tf.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),Uf("toolbar-events",[n])])},jI=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":FI({title:k.none(),items:[]}),"overflow-button":ek({name:"more",icon:k.some("more-drawer"),enabled:!0,tooltip:k.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:k.none(),borderless:!1},k.none(),e.providers)},splitToolbarBehaviours:HI(e,t)}},VI=e=>{const t=jI(e),n=RI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return RI.sketch({...t,lazySink:e.getSink,getOverflowBounds:()=>{const t=e.moreDrawerData.lazyHeader().element,n=Kn(t),i=tt(t),r=Kn(i),o=Math.max(i.dom.scrollHeight,r.height);return qn(n.x+4,r.y,n.width-8,o)},parts:{...t.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>e.onToggled(t,!0),onClosed:t=>e.onToggled(t,!1)})},YI=e=>{const t=UI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=UI.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=jI(e);return UI.sketch({...i,components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:t=>{t.getSystem().broadcastOn([kD()],{type:"opened"}),e.onToggled(t,!0)},onClosed:t=>{t.getSystem().broadcastOn([kD()],{type:"closed"}),e.onToggled(t,!1)}})},GI=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return QL.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Vv.scrolling?["tox-toolbar--scrolling"]:[])},components:[QL.parts.groups({})],toolbarBehaviours:HI(e,t)})},QI=[nA,iA,_r("tooltip"),Lr("buttonType","secondary",["primary","secondary"]),Dr("borderless",!1),mr("onAction")],$I={button:[...QI,Qb,pr("type",["button"])],togglebutton:[...QI,Dr("active",!1),pr("type",["togglebutton"])]},qI=[pr("type",["group"]),Rr("buttons",[],rr("type",$I))],WI=rr("type",{...$I,group:qI}),KI=Ni([Rr("buttons",[],WI),mr("onShow"),mr("onHide")]),ZI=(e,t)=>((e,t)=>{var n,i;const r="togglebutton"===e.type,o=e.icon.map(e=>US(e,t.icons)).map(Og),s=n=>{const i=e=>{o.map(i=>i.getOpt(n).each(n=>{Nf.set(n,[US(e,t.icons)])}))},s=e=>{const t=n.element;e?(ta(t,"tox-button--enabled"),xt(t,"aria-pressed",!0)):(ia(t,"tox-button--enabled"),Tt(t,"aria-pressed"))},a=()=>oa(n.element,"tox-button--enabled");return r?e.onAction({setIcon:i,setActive:s,isActive:a}):"button"===e.type?e.onAction({setIcon:i}):void 0},a={...e,name:r?e.text.getOr(e.icon.getOr("")):null!==(n=e.text)&&void 0!==n?n:e.icon.getOr(""),primary:"primary"===e.buttonType,buttonType:k.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless},l=tk(null!==(i=e.buttonType)&&void 0!==i?i:"secondary"),c=r?e.text.map(t.translate):k.some(t.translate(e.text)),d=c.map(wa),u=a.tooltip.or(c).map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),h=o.map(e=>e.asSpec()),p=x_([h,d]),m=e.icon.isSome()&&d.isSome(),f={tag:"button",classes:l.concat(...e.icon.isSome()&&!m?["tox-button--icon"]:[]).concat(...m?["tox-button--icon-and-text"]:[]).concat(...e.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===e.type&&e.active?["tox-button--enabled"]:[]),attributes:u},g=JT(a,k.some(s),[],f,p,t);return Ig.sketch(g)})(e,t),XI=kn().deviceType,JI=XI.isPhone(),eR=XI.isTablet();var tR=np({name:"silver.View",configFields:[cr("viewConfig")],partFields:[kh({factory:{sketch:e=>{let t=!1;const n=F(e.buttons,n=>"group"===n.type?(t=!0,((e,t)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:F(e.buttons,e=>ZI(e,t))}))(n,e.providers)):ZI(n,e.providers));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header",...JI||eR?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:$l([Vf.config({}),Tf.config({mode:"flow",selector:"button, .tox-button",focusInside:em.OnEnterOrSpaceMode})]),components:t?n:[hC.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),hC.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:n})]}}},schema:[cr("buttons"),cr("providers")],name:"header"}),kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,t,n,i)=>{const r={getPane:t=>UL.getPart(t,e,"pane"),getOnShow:t=>e.viewConfig.onShow,getOnHide:t=>e.viewConfig.onHide};return{uid:e.uid,dom:e.dom,components:t,apis:r}},apis:{getPane:(e,t)=>e.getPane(t),getOnShow:(e,t)=>e.getOnShow(t),getOnHide:(e,t)=>e.getOnHide(t)}});const nR=(e,t,n)=>me(t,(t,i)=>{const r=tr(er("view",KI,t));return e.slot(i,tR.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:r,components:[...r.buttons.length>0?[tR.parts.header({buttons:r.buttons,providers:n})]:[],tR.parts.pane({})]}))}),iR=(e,t)=>KD.sketch(n=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:nR(n,e,t),slotBehaviours:XA([as(e=>KD.hideAllSlots(e))])})),rR=e=>G(KD.getSlotNames(e),t=>KD.isShowing(e,t)),oR=(e,t,n)=>{KD.getSlot(e,t).each(e=>{tR.getPane(e).each(t=>{var i;n(e)((i=t.element.dom,{getContainer:A(i)}))})})};var sR=tp({factory:(e,t)=>{const n={setViews:(e,n)=>{Nf.set(e,[iR(n,t.backstage.shared.providers)])},whichView:e=>sp.getCurrent(e).bind(rR),toggleView:(e,t,n,i)=>sp.getCurrent(e).exists(r=>{const o=rR(r),s=o.exists(e=>i===e),a=KD.getSlot(r,i).isSome();return a&&(KD.hideAllSlots(r),s?((e=>{const t=e.element;Dt(t,"display","none"),xt(t,"aria-hidden","true")})(e),t()):(n(),(e=>{const t=e.element;Ft(t,"display"),Tt(t,"aria-hidden")})(e),KD.showSlot(r,i),((e,t)=>{oR(e,t,tR.getOnShow)})(r,i)),o.each(e=>((e,t)=>oR(e,t,tR.getOnHide))(r,e))),a})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:$l([Nf.config({}),sp.config({find:e=>{const t=Nf.contents(e);return ne(t)}})]),apis:n}},name:"silver.ViewWrapper",configFields:[cr("backstage")],apis:{setViews:(e,t,n)=>e.setViews(t,n),toggleView:(e,t,n,i,r)=>e.toggleView(t,n,i,r),whichView:(e,t)=>e.whichView(t)}});const aR=FL.optional({factory:YD,name:"menubar",schema:[cr("backstage")]}),lR=FL.optional({factory:{sketch:e=>VL.sketch({uid:e.uid,dom:e.dom,listBehaviours:$l([Tf.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>GI({type:e.type,uid:bs("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),k.some(!0))}),setupItem:(e,t,n,i)=>{QL.setGroups(t,n)},shell:!0})},name:"multiple-toolbar",schema:[cr("dom"),cr("onEscape")]}),cR=FL.optional({factory:{sketch:e=>{const t=(e=>e.type===Vv.sliding?YI:e.type===Vv.floating?VI:GI)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),k.some(!0)),onToggled:(t,n)=>e.onToolbarToggled(n),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[cr("dom"),cr("onEscape"),cr("getSink")]}),dR=FL.optional({factory:{sketch:e=>{const t=e.editor,n=e.sticky?ND:WL;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:$l(n(t,e.sharedBackstage))}}},name:"header",schema:[cr("dom")]}),uR=FL.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"⚡️Upgrade"}}]})},name:"promotion",schema:[cr("dom")]}),hR=FL.optional({name:"socket",schema:[cr("dom")]}),pR=FL.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:$l([bC.config({}),Vf.config({}),xT.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{sp.getCurrent(e).each(KD.hideAllSlots),Yo(e,rI)},onGrown:e=>{Yo(e,rI)},onStartGrow:e=>{Go(e,iI,{width:Bt(e.element,"width").getOr("")})},onStartShrink:e=>{Go(e,iI,{width:Zt(e.element)+"px"})}}),Nf.config({}),sp.config({find:e=>{const t=Nf.contents(e);return ne(t)}})])}],behaviours:$l([KM(0),Uf("sidebar-sliding-events",[Jo(iI,(e,t)=>{Dt(e.element,"width",t.event.width)}),Jo(rI,(e,t)=>{Ft(e.element,"width")})])])})},name:"sidebar",schema:[cr("dom")]}),mR=FL.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:$l([Nf.config({}),aI.config({focus:!1}),sp.config({find:e=>ne(e.components())})]),components:[]})},name:"throbber",schema:[cr("dom")]}),fR=FL.optional({factory:sR,name:"viewWrapper",schema:[cr("backstage")]}),gR=FL.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]});var vR=np({name:"OuterContainer",factory:(e,t,n)=>{let i=!1;const r={getSocket:t=>UL.getPart(t,e,"socket"),setSidebar:(t,n,i)=>{UL.getPart(t,e,"sidebar").each(e=>((e,t,n)=>{sp.getCurrent(e).each(i=>{Nf.set(i,[eI(t)]);const r=null==n?void 0:n.toLowerCase();o(r)&&ye(t,r)&&sp.getCurrent(i).each(t=>{KD.showSlot(t,r),xT.immediateGrow(i),Ft(i.element,"width"),tI(e.element,"region")})})})(e,n,i))},toggleSidebar:(t,n)=>{UL.getPart(t,e,"sidebar").each(e=>((e,t)=>{sp.getCurrent(e).each(n=>{sp.getCurrent(n).each(i=>{xT.hasGrown(n)?KD.isShowing(i,t)?(xT.shrink(n),tI(e.element,"presentation")):(KD.hideAllSlots(i),KD.showSlot(i,t),tI(e.element,"region")):(KD.hideAllSlots(i),KD.showSlot(i,t),xT.grow(n),tI(e.element,"region"))})})})(e,n))},whichSidebar:t=>UL.getPart(t,e,"sidebar").bind(nI).getOrNull(),getHeader:t=>UL.getPart(t,e,"header"),getToolbar:t=>UL.getPart(t,e,"toolbar"),setToolbar:(t,n)=>{UL.getPart(t,e,"toolbar").each(e=>{const t=F(n,zI);e.getApis().setGroups(e,t)})},setToolbars:(t,n)=>{UL.getPart(t,e,"multiple-toolbar").each(e=>{const t=F(n,e=>F(e,zI));VL.setItems(e,t)})},refreshToolbar:t=>{UL.getPart(t,e,"toolbar").each(e=>e.getApis().refresh(e))},toggleToolbarDrawer:t=>{UL.getPart(t,e,"toolbar").each(e=>{xe(e.getApis().toggle,t=>t(e))})},toggleToolbarDrawerWithoutFocusing:t=>{UL.getPart(t,e,"toolbar").each(e=>{xe(e.getApis().toggleWithoutFocusing,t=>t(e))})},isToolbarDrawerToggled:t=>UL.getPart(t,e,"toolbar").bind(e=>k.from(e.getApis().isOpen).map(t=>t(e))).getOr(!1),getThrobber:t=>UL.getPart(t,e,"throbber"),focusToolbar:t=>{UL.getPart(t,e,"toolbar").orThunk(()=>UL.getPart(t,e,"multiple-toolbar")).each(e=>{Tf.focusIn(e)})},setMenubar:(t,n)=>{UL.getPart(t,e,"menubar").each(e=>{YD.setMenus(e,n)})},focusMenubar:t=>{UL.getPart(t,e,"menubar").each(e=>{YD.focus(e)})},setViews:(t,n)=>{UL.getPart(t,e,"viewWrapper").each(e=>{sR.setViews(e,n)})},toggleView:(t,n)=>UL.getPart(t,e,"viewWrapper").exists(e=>sR.toggleView(e,()=>r.showMainView(t),()=>r.hideMainView(t),n)),whichView:t=>UL.getPart(t,e,"viewWrapper").bind(sR.whichView).getOrNull(),hideMainView:t=>{i=r.isToolbarDrawerToggled(t),i&&r.toggleToolbarDrawer(t),UL.getPart(t,e,"editorContainer").each(e=>{const t=e.element;Dt(t,"display","none"),xt(t,"aria-hidden","true")})},showMainView:t=>{i&&r.toggleToolbarDrawer(t),UL.getPart(t,e,"editorContainer").each(e=>{const t=e.element;Ft(t,"display"),Tt(t,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:t,apis:r,behaviours:e.behaviours}},configFields:[cr("dom"),cr("behaviours")],partFields:[dR,aR,cR,lR,hR,pR,uR,mR,fR,gR],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,n,i)=>{e.setSidebar(t,n,i)},toggleSidebar:(e,t,n)=>{e.toggleSidebar(t,n)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,n)=>{e.setToolbar(t,n)},setToolbars:(e,t,n)=>{e.setToolbars(t,n)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:(e,t)=>{e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,n)=>{e.setMenubar(t,n)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)},setViews:(e,t,n)=>{e.setViews(t,n)},toggleView:(e,t,n)=>e.toggleView(t,n),whichView:(e,t)=>e.whichView(t)}});const yR={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},bR=e=>e.split(" "),AR=(e,t)=>{const n={...yR,...t.menus},i=se(t.menus).length>0,r=void 0===t.menubar||!0===t.menubar?bR("file edit view insert format tools table help"):bR(!1===t.menubar?"":t.menubar),s=j(r,e=>{const n=ye(yR,e);return i?n||ve(t.menus,e).exists(e=>ye(e,"items")):n}),a=F(s,i=>{const r=n[i];return((e,t,n)=>{const i=ly(n).split(/[ ,]/);return{text:e.title,getItems:()=>q(e.items,e=>{const n=e.toLowerCase();return 0===n.trim().length||B(i,e=>e===n)?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]})}})({title:r.title,items:bR(r.items)},t,e)});return j(a,e=>e.getItems().length>0&&B(e.getItems(),e=>o(e)||"separator"!==e.type))},_R=(e,t,n)=>(e.on("remove",()=>n.unload(t)),n.load(t)),wR=(e,t,n,i)=>(e.on("remove",()=>i.unloadRawCss(t)),i.loadRawCss(t,n)),xR=async(e,t)=>{const n="ui/"+Uy(e).getOr("default")+"/skin.css",i=tinymce.Resource.get(n);if(o(i))return Promise.resolve(wR(e,n,i,e.ui.styleSheetLoader));return _R(e,t+"/skin.min.css",e.ui.styleSheetLoader)},CR=async(e,t)=>{var n;if(n=Pe.fromDom(e.getElement()),gt(n).isSome()){const n="ui/"+Uy(e).getOr("default")+"/skin.shadowdom.css",i=tinymce.Resource.get(n);if(o(i))return wR(e,n,i,Gv.DOM.styleSheetLoader),Promise.resolve();return _R(e,t+"/skin.shadowdom.min.css",Gv.DOM.styleSheetLoader)}},ER=(e,t)=>(async(e,t)=>{Uy(t).fold(()=>{const n=Ny(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css")},n=>{const i="ui/"+n+(e?"/content.inline":"/content")+".css",r=tinymce.Resource.get(i);if(o(r))wR(t,i,r,t.ui.styleSheetLoader);else{const n=Ny(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css")}});const n=Ny(t);if(!Py(t)&&o(n))return Promise.all([xR(t,n),CR(t,n)]).then()})(e,t).then((e=>{const t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}})(t),((e,t)=>()=>((e,t)=>{e.dispatch("SkinLoadError",t)})(e,{message:t}))(t,"Skin could not be loaded")),MR=x(ER,!1),SR=x(ER,!0),TR=(e,t,n)=>e.translate([t,e.translate(n)]),kR=(e,t)=>{const n=(n,r,o,s)=>{const a=e.shared.providers.translate(n.title);if("separator"===n.type)return k.some({type:"separator",text:a});if("submenu"===n.type){const e=q(n.getStyleItems(),e=>i(e,r,s));return 0===r&&e.length<=0?k.none():k.some({type:"nestedmenuitem",text:a,enabled:e.length>0,getSubmenuItems:()=>q(n.getStyleItems(),e=>i(e,r,s))})}return k.some({type:"togglemenuitem",text:a,icon:n.icon,active:n.isSelected(s),enabled:!o,onAction:t.onAction(n),...n.getStylePreview().fold(()=>({}),e=>({meta:{style:e}}))})},i=(e,i,r)=>{const o="formatter"===e.type&&t.isInvalid(e);return 0===i?o?[]:n(e,i,!1,r).toArray():n(e,i,o,r).toArray()},r=e=>{const n=t.getCurrentValue(),r=t.shouldHide?0:1;return q(e,e=>i(e,r,n))};return{validateItems:r,getFetch:(e,t)=>(n,i)=>{const o=t(),s=r(o);i($S(s,nb.CLOSE_ON_EXECUTE,e,{isHorizontalMenu:!1,search:k.none()}))}}},LR=(e,t,n)=>{const i=n.dataset,r="basic"===i.type?()=>F(i.data,e=>lL(e,n.isSelectedFor,n.getPreviewFor)):i.getData;return{items:kR(t,n),getStyleItems:r}},DR=(e,t,n,i,r)=>{const{items:o,getStyleItems:s}=LR(0,t,n);return jS({text:n.icon.isSome()?k.none():n.text,icon:n.icon,tooltip:k.from(n.tooltip),role:k.none(),fetch:o.getFetch(t,s),onSetup:t=>{const o=n=>t.setTooltip(TR(e,i,n.value));return e.on(r,o),dw(pw(e,"NodeChange",t=>{const i=t.getComponent();n.updateText(i),Ap.set(t.getComponent(),!e.selection.isEditable())})(t),()=>e.off(r,o))},getApi:e=>({getComponent:A(e),setTooltip:n=>{const i=t.shared.providers.translate(n);Ct(e.element,{"aria-label":i,title:i})}}),columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};var IR;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(IR||(IR={}));const RR=(e,t,n)=>{const i=(e=>F(e,e=>{let t=e,n=e;const i=e.split("=");return i.length>1&&(t=i[0],n=i[1]),{title:t,format:n}}))(((e,t)=>t===IR.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),n));return{type:"basic",data:i}},OR="Alignment {0}",PR="left",BR=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],NR=e=>{const t={type:"basic",data:BR};return{tooltip:TR(e,OR,PR),text:k.none(),icon:k.some("align-left"),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:k.none,getPreviewFor:e=>k.none,onAction:t=>()=>G(BR,e=>e.format===t.format).each(t=>e.execCommand(t.command)),updateText:t=>{const n=G(BR,t=>e.formatter.match(t.format)),i=n.fold(A(PR),e=>e.title.toLowerCase());Go(t,HS,{icon:`align-${i}`}),((e,t)=>{e.dispatch("AlignTextUpdate",t)})(e,{value:i})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},UR=(e,t)=>{const n=t(),i=F(n,e=>e.format);return k.from(e.formatter.closest(i)).bind(e=>G(n,t=>t.format===e)).orThunk(()=>Ce(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},FR="Block {0}",zR="Paragraph",HR=e=>{const t=RR(e,"block_formats",IR.SemiColon);return{tooltip:TR(e,FR,zR),text:k.some(zR),icon:k.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:k.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return n?k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):k.none()},onAction:mw(e),updateText:n=>{const i=UR(e,()=>t.data).fold(A(zR),e=>e.title);Go(n,zS,{text:i}),((e,t)=>{e.dispatch("BlocksTextUpdate",t)})(e,{value:i})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},jR="Font {0}",VR="System Font",YR=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],GR=e=>{const t=e.split(/\s*,\s*/);return F(t,e=>e.replace(/^['"]+|['"]+$/g,""))},QR=(e,t)=>t.length>0&&W(t,t=>e.indexOf(t.toLowerCase())>-1),$R=e=>{const t=()=>{const t=e=>e?GR(e)[0]:"",i=e.queryCommandValue("FontName"),r=n.data,o=i?i.toLowerCase():"",s=Oy(e),a=G(r,e=>{const n=e.format;return n.toLowerCase()===o||t(n).toLowerCase()===t(o).toLowerCase()}).orThunk(()=>Ce(((e,t)=>{if(0===e.indexOf("-apple-system")||t.length>0){const n=GR(e.toLowerCase());return QR(n,YR)||QR(n,t)}return!1})(o,s),{title:VR,format:o}));return{matchOpt:a,font:i}},n=RR(e,"font_family_formats",IR.SemiColon);return{tooltip:TR(e,jR,VR),text:k.some(VR),icon:k.none(),isSelectedFor:e=>t=>t.exists(t=>t.format===e),getCurrentValue:()=>{const{matchOpt:e}=t();return e},getPreviewFor:e=>()=>k.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,t.format)})},updateText:n=>{const{matchOpt:i,font:r}=t(),o=i.fold(A(r),e=>e.title);Go(n,zS,{text:o}),((e,t)=>{e.dispatch("FontFamilyTextUpdate",t)})(e,{value:o})},dataset:n,shouldHide:!1,isInvalid:S}},qR={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},WR=(()=>{const e="[0-9]+",t="[eE]"+("[+-]?"+e),n=e=>`(?:${e})?`,i=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|");return new RegExp(`^(${`[+-]?(?:${i})`})(.*)$`)})(),KR=(e,t)=>k.from(WR.exec(e)).bind(e=>{const n=Number(e[1]),i=e[2];return((e,t)=>B(t,t=>B(qR[t],t=>e===t)))(i,t)?k.some({value:n,unit:i}):k.none()}),ZR={tab:A(9),escape:A(27),enter:A(13),backspace:A(8),delete:A(46),left:A(37),up:A(38),right:A(39),down:A(40),space:A(32),home:A(36),end:A(35),pageUp:A(33),pageDown:A(34)},XR=(e,t,n)=>{let i=k.none();const r=pw(e,"NodeChange SwitchMode",t=>{const r=t.getComponent();i=k.some(r),n.updateInputValue(r),Ap.set(r,!e.selection.isEditable())}),o=e=>({getComponent:A(e)}),s=Pr(v),a=bs("custom-number-input-events"),l=(e,t,r)=>{const o=i.map(e=>Zu.getValue(e)).getOr("");const s=n.getNewValue(o,e),a=o.length-`${s}`.length,l=i.map(e=>e.element.dom.selectionStart-a),c=i.map(e=>e.element.dom.selectionEnd-a);n.onAction(s,r),i.each(e=>{Zu.setValue(e,s),t&&(l.each(t=>e.element.dom.selectionStart=t),c.each(t=>e.element.dom.selectionEnd=t))})},c=(e,t)=>l((e,t)=>e-t,e,t),d=(e,t)=>l((e,t)=>e+t,e,t),u=e=>rt(e.element).fold(k.none,e=>(tc(e),k.some(!0))),h=e=>ic(e.element)?(lt(e.element).each(e=>tc(e)),k.some(!0)):k.none(),p=(n,i,r,s)=>{const a=Pr(v),l=t.shared.providers.translate(r),c=bs("altExecuting"),d=pw(e,"NodeChange SwitchMode",t=>{Ap.set(t.getComponent(),!e.selection.isEditable())}),u=e=>{Ap.isDisabled(e)||n(!0)};return Ig.sketch({dom:{tag:"button",attributes:{title:l,"aria-label":l},classes:s.concat(i)},components:[NS(i,t.shared.providers.icons)],buttonBehaviours:$l([Ap.config({}),Uf(c,[b_({onSetup:d,getApi:o},a),A_({getApi:o},a),Jo(so(),(e,t)=>{t.event.raw.keyCode!==ZR.space()&&t.event.raw.keyCode!==ZR.enter()||Ap.isDisabled(e)||n(!1)}),Jo(uo(),u),Jo(Zr(),u)])]),eventOrder:{[so()]:[c,"keying"],[uo()]:[c,"alloy.base.behaviour"],[Zr()]:[c,"alloy.base.behaviour"]}})},m=Og(p(e=>c(!1,e),"minus","Decrease font size",[])),f=Og(p(e=>d(!1,e),"plus","Increase font size",[])),g=Og({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Eb.sketch({inputBehaviours:$l([Ap.config({}),Uf(a,[b_({onSetup:r,getApi:o},s),A_({getApi:o},s)]),Uf("input-update-display-text",[Jo(zS,(e,t)=>{Zu.setValue(e,t.event.text)}),Jo(oo(),e=>{n.onAction(Zu.getValue(e))}),Jo(co(),e=>{n.onAction(Zu.getValue(e))})]),Tf.config({mode:"special",onEnter:e=>(l(_,!0,!0),k.some(!0)),onEscape:u,onUp:e=>(d(!0,!1),k.some(!0)),onDown:e=>(c(!0,!1),k.some(!0)),onLeft:(e,t)=>(t.cut(),k.none()),onRight:(e,t)=>(t.cut(),k.none())})])})],behaviours:$l([Vf.config({}),Tf.config({mode:"special",onEnter:h,onSpace:h,onEscape:u}),Uf("input-wrapper-events",[Jo(io(),e=>{z([m,f],t=>{const n=Pe.fromDom(t.get(e).element.dom);ic(n)&&nc(n)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[m.asSpec(),g.asSpec(),f.asSpec()],behaviours:$l([Vf.config({}),Tf.config({mode:"flow",focusInside:em.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:e=>ic(e.element)?k.none():(tc(e.element),k.some(!0))})])}},JR="Font size {0}",eO="12pt",tO={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},nO={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},iO=(e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{const n=Math.pow(10,t);return Math.round(e*n)/n})(72*parseInt(e,10)/96,t||0)+"pt":ve(nO,e).getOr(e),rO=e=>ve(tO,e).getOr(""),oO=e=>{const t=()=>{let t=k.none();const n=i.data,r=e.queryCommandValue("FontSize");if(r)for(let e=3;t.isNone()&&e>=0;e--){const i=iO(r,e),o=rO(i);t=G(n,e=>e.format===r||e.format===i||e.format===o)}return{matchOpt:t,size:r}},n=A(k.none),i=RR(e,"font_size_formats",IR.Space);return{tooltip:TR(e,JR,eO),text:k.some(eO),icon:k.none(),isSelectedFor:e=>t=>t.exists(t=>t.format===e),getPreviewFor:n,getCurrentValue:()=>{const{matchOpt:e}=t();return e},onAction:t=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,t.format)})},updateText:n=>{const{matchOpt:i,size:r}=t(),o=i.fold(A(r),e=>e.title);Go(n,zS,{text:o}),((e,t)=>{e.dispatch("FontSizeTextUpdate",t)})(e,{value:o})},dataset:i,shouldHide:!1,isInvalid:S}},sO="Format {0}",aO=(e,t)=>{const n="Paragraph";return{tooltip:TR(e,sO,n),text:k.some(n),icon:k.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:k.none,getPreviewFor:t=>()=>{const n=e.formatter.get(t);return void 0!==n?k.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):k.none()},onAction:mw(e),updateText:t=>{const i=e=>iL(e)?q(e.items,i):rL(e)?[{title:e.title,format:e.format}]:[],r=q(aL(e),i),o=UR(e,A(r)).fold(A(n),e=>e.title);Go(t,zS,{text:o}),((e,t)=>{e.dispatch("StylesTextUpdate",t)})(e,{value:o})},shouldHide:sy(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}},lO=A([cr("toggleClass"),cr("fetch"),nl("onExecute"),Mr("getHotspot",k.some),Mr("getAnchorOverrides",A({})),Zc(),nl("onItemExecute"),yr("lazySink"),cr("dom"),el("onOpen"),Xu("splitDropdownBehaviours",[fx,Tf,Vf]),Mr("matchWidth",!1),Mr("useMinWidth",!1),Mr("eventOrder",{}),yr("role")].concat(Rx())),cO=Sh({factory:Ig,schema:[cr("dom")],name:"arrow",defaults:()=>({buttonBehaviours:$l([Vf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Qo)},buttonBehaviours:$l([Zf.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),dO=Sh({factory:Ig,schema:[cr("dom")],name:"button",defaults:()=>({buttonBehaviours:$l([Vf.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(n=>{e.onExecute(n,t)})}})}),uO=A([cO,dO,kh({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[cr("text")],name:"aria-descriptor"}),Th({schema:[Za()],name:"menu",defaults:e=>({onExecute:(t,n)=>{t.getSystem().getByUid(e.uid).each(i=>{e.onItemExecute(i,t,n)})}})}),xx()]),hO=np({name:"SplitDropdown",configFields:lO(),partFields:uO(),factory:(e,t,n,i)=>{const r=e=>{sp.getCurrent(e).each(e=>{Dp.highlightFirst(e),Tf.focusIn(e)})},o=t=>{Sx(e,_,t,i,r,Sg.HighlightMenuAndItem).get(v)},s=t=>{const n=jh(t,e,"button");return Qo(n),k.some(!0)},a={...Ko([as((t,n)=>{Hh(t,e,"aria-descriptor").each(e=>{const n=bs("aria");xt(e.element,"id",n),xt(t.element,"aria-describedby",n)})})]),...eg(k.some(o))},l={repositionMenus:e=>{Zf.isOn(e)&&Ix(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:l,eventOrder:{...e.eventOrder,[wo()]:["disabling","toggling","alloy.base.behaviour"]},events:a,behaviours:eh(e.splitDropdownBehaviours,[fx.config({others:{sandbox:t=>{const n=jh(t,e,"arrow");return Dx(e,t,{onOpen:()=>{Zf.on(n),Zf.on(t)},onClose:()=>{Zf.off(n),Zf.off(t)}})}}}),Tf.config({mode:"special",onSpace:s,onEnter:s,onDown:e=>(o(e),k.some(!0))}),Vf.config({}),Zf.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),pO=e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t),setText:t=>Go(e,zS,{text:t}),setIcon:t=>Go(e,HS,{icon:t})}),mO=e=>({setActive:t=>{Zf.set(e,t)},isActive:()=>Zf.isOn(e),isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t),setText:t=>Go(e,zS,{text:t}),setIcon:t=>Go(e,HS,{icon:t})}),fO=(e,t)=>e.map(e=>({"aria-label":t.translate(e),title:t.translate(e)})).getOr({}),gO=bs("focus-button"),vO=(e,t,n,i,r)=>{const o=t.map(e=>Og(FS(e,"tox-tbtn",r))),s=e.map(e=>Og(US(e,r.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:fO(n,r)},components:x_([s.map(e=>e.asSpec()),o.map(e=>e.asSpec())]),eventOrder:{[Jr()]:["focusing","alloy.base.behaviour",RS],[Ro()]:[RS,"toolbar-group-button-events"]},buttonBehaviours:$l([v_(r.isDisabled),p_(),Uf(RS,[as((e,t)=>PS(e)),Jo(zS,(e,t)=>{o.bind(t=>t.getOpt(e)).each(e=>{Nf.set(e,[wa(r.translate(t.event.text))])})}),Jo(HS,(e,t)=>{s.bind(t=>t.getOpt(e)).each(e=>{Nf.set(e,[US(t.event.icon,r.icons)])})}),Jo(Jr(),(e,t)=>{t.event.prevent(),Yo(e,gO)})])].concat(i.getOr([])))}},yO=(e,t,n)=>{var i;const r=Pr(v),o=vO(e.icon,e.text,e.tooltip,k.none(),n);return Ig.sketch({dom:o.dom,components:o.components,eventOrder:OS,buttonBehaviours:{...$l([Uf("toolbar-button-events",[(s={onAction:e.onAction,getApi:t.getApi},ds((e,t)=>{y_(s,e)(t=>{Go(e,IS,{buttonApi:t}),s.onAction(t)})})),b_(t,r),A_(t,r)]),v_(()=>!e.enabled||n.isDisabled()),p_()].concat(t.toolbarButtonBehaviours)),[RS]:null===(i=o.buttonBehaviours)||void 0===i?void 0:i[RS]}});var s},bO=(e,t,n)=>yO(e,{toolbarButtonBehaviours:n.length>0?[Uf("toolbarButtonWith",n)]:[],getApi:pO,onSetup:e.onSetup},t),AO=(e,t,n)=>yO(e,{toolbarButtonBehaviours:[Nf.config({}),Zf.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[Uf("toolbarToggleButtonWith",n)]:[]),getApi:mO,onSetup:e.onSetup},t),_O=(e,t,n)=>i=>Ax(e=>t.fetch(e)).map(r=>k.from(Qx(Ai(Ww(bs("menu-value"),r,n=>{t.onItemAction(e(i),n)},t.columns,t.presets,nb.CLOSE_ON_EXECUTE,t.select.getOr(S),n),{movement:Zw(t.columns,t.presets),menuBehaviours:XA("auto"!==t.columns?[]:[as((e,n)=>{KA(e,4,mb(t.presets)).each(({numRows:t,numColumns:n})=>{Tf.setGridSize(e,t,n)})})])})))),wO=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],xO=(e,t)=>(n,i,r)=>{const o=e(n).mapError(e=>ir(e)).getOrDie();return t(o,i,r)},CO={button:xO(_A,(e,t)=>{return n=e,i=t.shared.providers,bO(n,i,[]);var n,i}),togglebutton:xO(CA,(e,t)=>{return n=e,i=t.shared.providers,AO(n,i,[]);var n,i}),menubutton:xO(jD,(e,t)=>ET(e,"tox-tbtn",t,k.none(),!1)),splitbutton:xO(e=>er("SplitButton",VD,e),(e,t)=>((e,t)=>{const n=e=>({isEnabled:()=>!Ap.isDisabled(e),setEnabled:t=>Ap.set(e,!t),setIconFill:(t,n)=>{Oa(e.element,`svg path[class="${t}"], rect[class="${t}"]`).each(e=>{xt(e,"fill",n)})},setActive:t=>{xt(e.element,"aria-pressed",t),Oa(e.element,"span").each(n=>{e.getSystem().getByDom(n).each(e=>Zf.set(e,t))})},isActive:()=>Oa(e.element,"span").exists(t=>e.getSystem().getByDom(t).exists(Zf.isOn)),setText:t=>Oa(e.element,"span").each(n=>e.getSystem().getByDom(n).each(e=>Go(e,zS,{text:t}))),setIcon:t=>Oa(e.element,"span").each(n=>e.getSystem().getByDom(n).each(e=>Go(e,HS,{icon:t}))),setTooltip:n=>{const i=t.providers.translate(n);Ct(e.element,{"aria-label":i,title:i})}}),i=Pr(v),r={getApi:n,onSetup:e.onSetup};return hO.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...fO(e.tooltip,t.providers)}},onExecute:t=>{const i=n(t);i.isEnabled()&&e.onAction(i)},onItemExecute:(e,t,n)=>{},splitDropdownBehaviours:$l([g_(t.providers.isDisabled),p_(),Uf("split-dropdown-events",[as((e,t)=>PS(e)),Jo(gO,Vf.focus),b_(r,i),A_(r,i)]),GC.config({})]),eventOrder:{[Ro()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:_O(n,e,t.providers),parts:{menu:Ab(0,e.columns,e.presets)},components:[hO.parts.button(vO(e.icon,e.text,k.none(),k.some([Zf.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),hO.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Nv("chevron-down",t.providers.icons)},buttonBehaviours:$l([g_(t.providers.isDisabled),p_(),Uv()])}),hO.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.shared)),grouptoolbarbutton:xO(e=>er("GroupToolbarButton",FD,e),(e,t,n)=>{const i=n.ui.registry.getAll().buttons,r=e=>TO(n,{buttons:i,toolbar:e,allowToolbarGroups:!1},t,k.none()),o={[Wc]:t.shared.header.isPositionedAtTop()?qc.TopToBottom:qc.BottomToTop};if(cy(n)===Vv.floating)return((e,t,n,i)=>{const r=t.shared,o=Pr(v),s={toolbarButtonBehaviours:[],getApi:pO,onSetup:e.onSetup},a=[Uf("toolbar-group-button-events",[b_(s,o),A_(s,o)])];return SI.sketch({lazySink:r.getSink,fetch:()=>Ax(t=>{t(F(n(e.items),zI))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:vO(e.icon,e.text,e.tooltip,k.some(a),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})})(e,t,r,o);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},EO={styles:(e,t)=>{const n={type:"advanced",...t.styles};return DR(e,t,aO(e,n),sO,"StylesTextUpdate")},fontsize:(e,t)=>DR(e,t,oO(e),JR,"FontSizeTextUpdate"),fontsizeinput:(e,t)=>XR(e,t,(e=>{const t=()=>e.queryCommandValue("FontSize");return{updateInputValue:e=>Go(e,zS,{text:t()}),onAction:(t,n)=>e.execCommand("FontSize",!1,t,{skip_focus:!n}),getNewValue:(n,i)=>{KR(n,["unsupportedLength","empty"]);const r=t(),o=KR(n,["unsupportedLength","empty"]).or(KR(r,["unsupportedLength","empty"])),s=o.map(e=>e.value).getOr(16),a=Ay(e),l=o.map(e=>e.unit).filter(e=>""!==e).getOr(a),c=i(s,(e=>{var t;return null!==(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])&&void 0!==t?t:{step:1}})(l).step),d=`${(e=>e>=0)(c)?c:s}${l}`;return d!==r&&((e,t)=>{e.dispatch("FontSizeInputTextUpdate",t)})(e,{value:d}),d}}})(e)),fontfamily:(e,t)=>DR(e,t,$R(e),jR,"FontFamilyTextUpdate"),blocks:(e,t)=>DR(e,t,HR(e),FR,"BlocksTextUpdate"),align:(e,t)=>DR(e,t,NR(e),OR,"AlignTextUpdate")},MO=e=>{const t=e.toolbar,n=e.buttons;return!1===t?[]:void 0===t||!0===t?(e=>{const t=F(wO,t=>{const n=j(t.items,t=>ye(e,t)||ye(EO,t));return{name:t.name,items:n}});return j(t,e=>e.items.length>0)})(n):o(t)?(e=>{const t=e.split("|");return F(t,e=>({items:e.trim().split(" ")}))})(t):(e=>g(e,e=>ye(e,"name")&&ye(e,"items")))(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},SO=(e,t,n,i,r,o)=>ve(t,n.toLowerCase()).orThunk(()=>o.bind(e=>oe(e,e=>ve(t,e+n.toLowerCase())))).fold(()=>ve(EO,n.toLowerCase()).map(t=>t(e,r)),t=>"grouptoolbarbutton"!==t.type||i?((e,t,n)=>ve(CO,e.type).fold(()=>(console.error("skipping button defined by",e),k.none()),i=>k.some(i(e,t,n))))(t,r,e):(console.warn(`Ignoring the '${n}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),k.none())),TO=(e,t,n,i)=>{const r=MO(t),o=F(r,r=>{const o=q(r.items,r=>0===r.trim().length?[]:SO(e,t.buttons,r,t.allowToolbarGroups,n,i).toArray());return{title:k.from(e.translate(r.name)),items:o}});return j(o,e=>e.items.length>0)},kO=(e,t,n,i)=>{const r=t.mainUi.outerContainer,s=n.toolbar,a=n.buttons;if(g(s,o)){const t=s.map(t=>{const r={toolbar:t,buttons:a,allowToolbarGroups:n.allowToolbarGroups};return TO(e,r,i,k.none())});vR.setToolbars(r,t)}else vR.setToolbar(r,TO(e,n,i,k.none()))},LO=kn(),DO=LO.os.isiOS()&&LO.os.version.major<=12;var IO=Object.freeze({__proto__:null,render:(e,t,n,i,r)=>{const{mainUi:o,uiMotherships:s}=t,a=Pr(0),l=o.outerContainer;MR(e);const d=Pe.fromDom(r.targetNode),u=ft(mt(d));yu(d,o.mothership),((e,t,n)=>{Wy(e)&&yu(n.mainUi.mothership.element,n.popupUi.mothership),vu(t,n.dialogUi.mothership)})(e,u,t),e.on("SkinLoaded",()=>{vR.setSidebar(l,n.sidebar,Dy(e)),kO(e,t,n,i),a.set(e.getWin().innerWidth),vR.setMenubar(l,AR(e,n)),vR.setViews(l,n.views),((e,t)=>{const{uiMotherships:n}=t,i=e.dom;let r=e.getWin();const o=e.getDoc().documentElement,s=Pr(Qt(r.innerWidth,r.innerHeight)),a=Pr(Qt(o.offsetWidth,o.offsetHeight)),l=()=>{const t=s.get();t.left===r.innerWidth&&t.top===r.innerHeight||(s.set(Qt(r.innerWidth,r.innerHeight)),aw(e))},c=()=>{const t=e.getDoc().documentElement,n=a.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(a.set(Qt(t.offsetWidth,t.offsetHeight)),aw(e))},d=t=>{((e,t)=>{e.dispatch("ScrollContent",t)})(e,t)};i.bind(r,"resize",l),i.bind(r,"scroll",d);const u=Sc(Pe.fromDom(e.getBody()),"load",c);e.on("hide",()=>{z(n,e=>{Dt(e.element,"display","none")})}),e.on("show",()=>{z(n,e=>{Ft(e.element,"display")})}),e.on("NodeChange",c),e.on("remove",()=>{u.unbind(),i.unbind(r,"resize",l),i.unbind(r,"scroll",d),r=null})})(e,t)});const h=vR.getSocket(l).getOrDie("Could not find expected socket element");if(DO){It(h.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const t=((e,t)=>{let n=null;return{cancel:()=>{c(n)||(clearTimeout(n),n=null)},throttle:(...i)=>{c(n)&&(n=setTimeout(()=>{n=null,e.apply(null,i)},t))}}})(()=>{e.dispatch("ScrollContent")},20),n=Mc(h.element,"scroll",t.throttle);e.on("remove",n.unbind)}h_(e,t),e.addCommand("ToggleSidebar",(t,n)=>{vR.toggleSidebar(l,n),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var e;return null!==(e=vR.whichSidebar(l))&&void 0!==e?e:""}),e.addCommand("ToggleView",(t,n)=>{if(vR.toggleView(l,n)){const t=l.element;o.mothership.broadcastOn([Iu()],{target:t}),z(s,e=>{e.broadcastOn([Iu()],{target:t})}),c(vR.whichView(l))&&(e.focus(),e.nodeChanged(),vR.refreshToolbar(l))}}),e.addQueryValueHandler("ToggleView",()=>{var e;return null!==(e=vR.whichView(l))&&void 0!==e?e:""});const p=cy(e);p!==Vv.sliding&&p!==Vv.floating||e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const n=e.getWin().innerWidth;n!==a.get()&&(vR.refreshToolbar(t.mainUi.outerContainer),a.set(n))});const m={setEnabled:e=>{u_(t,!e)},isEnabled:()=>!Ap.isDisabled(l)};return{iframeContainer:h.element.dom,editorContainer:l.element.dom,api:m}}});const RO=e=>/^[0-9\.]+(|px)$/i.test(""+e)?k.some(parseInt(""+e,10)):k.none(),OO=e=>f(e)?e+"px":e,PO=(e,t,n)=>{const i=t.filter(t=>e<t),r=n.filter(t=>e>t);return i.or(r).getOr(e)},BO=e=>{const t=(e=>{const t=Xv(e),n=ty(e),i=iy(e);return RO(t).map(e=>PO(e,n,i))})(e);return t.getOr(Xv(e))},NO=e=>{const t=Jv(e),n=ey(e),i=ny(e);return RO(t).map(e=>PO(e,n,i))},{ToolbarLocation:UO,ToolbarMode:FO}=Zy,zO=(e,t,n,i,r)=>{const{mainUi:o,uiMotherships:s}=n,a=Gv.DOM,l=Gy(e),c=qy(e),d=ny(e).or(NO(e)),u=i.shared.header,h=u.isPositionedAtTop,p=cy(e),m=p===FO.sliding||p===FO.floating,f=Pr(!1),g=()=>f.get()&&!e.removed,v=e=>m?e.fold(A(0),e=>e.components().length>1?Vt(e.components()[1].element):0):0,y=(e,t)=>Wy(e)?ZL(t):k.none(),b=()=>{z(s,e=>{e.broadcastOn([Ru()],{})})},_=n=>{if(!g())return;l||r.on(e=>{const n=d.getOrThunk(()=>{const e=RO(Ot(At(),"margin-left")).getOr(0);return Zt(At())-qt(t).left+e});Dt(e.element,"max-width",n+"px")});const i=l?k.none():(()=>{if(l)return k.none();if(qt(o.outerContainer.element).left+Xt(o.outerContainer.element)>=window.innerWidth-40||Bt(o.outerContainer.element,"width").isSome()){Dt(o.outerContainer.element,"position","absolute"),Dt(o.outerContainer.element,"left","0px"),Ft(o.outerContainer.element,"width");const e=Xt(o.outerContainer.element);return k.some(e)}return k.none()})();m&&vR.refreshToolbar(o.outerContainer),l||(n=>{r.on(i=>{const r=vR.getToolbar(o.outerContainer),s=v(r),a=Wn(t),{top:l,left:c}=y(e,o.outerContainer.element).fold(()=>({top:h()?Math.max(a.y-Vt(i.element)+s,0):a.bottom,left:a.x}),e=>{var t;const n=Wn(e),r=null!==(t=e.dom.scrollTop)&&void 0!==t?t:0,o=Ze(e,At()),l=o?Math.max(a.y-Vt(i.element)+s,0):a.y-n.y+r-Vt(i.element)+s;return{top:h()?l:a.bottom,left:o?a.x:a.x-n.x}}),d={position:"absolute",left:Math.round(c)+"px",top:Math.round(l)+"px"},u=n.map(e=>{const t=zn(),n=window.innerWidth-(c-t.left);return{width:Math.max(Math.min(e,n),150)+"px"}}).getOr({});It(o.outerContainer.element,{...d,...u})})})(i),c&&r.on(n),b()},w=()=>!(l||!c||!g())&&r.get().exists(n=>{const i=u.getDockingMode(),s=(n=>{switch(uy(e)){case UO.auto:const e=vR.getToolbar(o.outerContainer),i=v(e),r=Vt(n.element)-i,s=Wn(t);if(s.y>r)return"top";{const e=tt(t),n=Math.max(e.dom.scrollHeight,Vt(e));return s.bottom<n-r||Xn().bottom<s.bottom-r?"bottom":"top"}case UO.bottom:return"bottom";case UO.top:default:return"top"}})(n);return s!==i&&(a=s,r.on(e=>{TD.setModes(e,[a]),u.setDockingMode(a);const t=h()?qc.TopToBottom:qc.BottomToTop;xt(e.element,Wc,t)}),!0);var a});return{isVisible:g,isPositionedAtTop:h,show:()=>{f.set(!0),Dt(o.outerContainer.element,"display","flex"),a.addClass(e.getBody(),"mce-edit-focus"),z(s,e=>{Ft(e.element,"display")}),w(),Wy(e)?_(e=>TD.isDocked(e)?TD.reset(e):TD.refresh(e)):_(TD.refresh)},hide:()=>{f.set(!1),Dt(o.outerContainer.element,"display","none"),a.removeClass(e.getBody(),"mce-edit-focus"),z(s,e=>{Dt(e.element,"display","none")})},update:_,updateMode:()=>{w()&&_(TD.reset)},repositionPopups:b}},HO=(e,t)=>{const n=Wn(e);return{pos:t?n.y:n.bottom,bounds:n}};var jO=Object.freeze({__proto__:null,render:(e,t,n,i,r)=>{const{mainUi:o}=t,s=Cc(),a=Pe.fromDom(r.targetNode),l=zO(e,a,t,i,s),c=my(e);SR(e);const d=()=>{if(s.isSet())return void l.show();s.set(vR.getHeader(o.outerContainer).getOrDie());const r=Qy(e);Wy(e)?(yu(a,o.mothership),yu(a,t.popupUi.mothership)):vu(r,o.mothership),vu(r,t.dialogUi.mothership),kO(e,t,n,i),vR.setMenubar(o.outerContainer,AR(e,n)),l.show(),((e,t,n,i)=>{const r=Pr(HO(t,n.isPositionedAtTop())),o=i=>{const{pos:o,bounds:s}=HO(t,n.isPositionedAtTop()),{pos:a,bounds:l}=r.get(),c=s.height!==l.height||s.width!==l.width;r.set({pos:o,bounds:s}),c&&aw(e,i),n.isVisible()&&(a!==o?n.update(TD.reset):c&&(n.updateMode(),n.repositionPopups()))};i||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",()=>n.update(TD.reset)),e.on("NodeChange keydown",e=>{requestAnimationFrame(()=>o(e))});let s=0;const a=aS(()=>n.update(TD.refresh),33);e.on("ScrollWindow",()=>{const e=zn().left;e!==s&&(s=e,a.throttle()),n.updateMode()}),Wy(e)&&e.on("ElementScroll",e=>{n.update(TD.refresh)});const l=xc();l.set(Sc(Pe.fromDom(e.getBody()),"load",e=>o(e.raw))),e.on("remove",()=>{l.clear()})})(e,a,l,c),e.nodeChanged()};e.on("show",d),e.on("hide",l.hide),c||(e.on("focus",d),e.on("blur",l.hide)),e.on("init",()=>{(e.hasFocus()||c)&&d()}),h_(e,t);const u={show:d,hide:l.hide,setEnabled:e=>{u_(t,!e)},isEnabled:()=>!Ap.isDisabled(o.outerContainer)};return{editorContainer:o.outerContainer.element.dom,api:u}}});const VO="contexttoolbar-hide",YO=(e,t)=>Jo(IS,(n,i)=>{const r=(e=>({hide:()=>Yo(e,Mo()),getValue:()=>Zu.getValue(e)}))(e.get(n));t.onAction(r,i.event.buttonApi)}),GO=(e,t,n)=>(e=>"contextformtogglebutton"===e.type)(t)?((e,t,n)=>{const{primary:i,...r}=t.original,o=tr(CA({...r,type:"togglebutton",onAction:v}));return AO(o,n,[YO(e,t)])})(e,t,n):((e,t,n)=>{const{primary:i,...r}=t.original,o=tr(_A({...r,type:"button",onAction:v}));return bO(o,n,[YO(e,t)])})(e,t,n),QO=(e,t)=>{const n=e.label.fold(()=>({}),e=>({"aria-label":e})),i=Og(Eb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:$l([Tf.config({mode:"special",onEnter:e=>r.findPrimary(e).map(e=>(Qo(e),!0)),onLeft:(e,t)=>(t.cut(),k.none()),onRight:(e,t)=>(t.cut(),k.none())})])})),r=((e,t,n)=>{const i=F(t,t=>Og(GO(e,t,n)));return{asSpecs:()=>F(i,e=>e.asSpec()),findPrimary:e=>oe(t,(t,n)=>t.primary?k.from(i[n]).bind(t=>t.getOpt(e)).filter(C(Ap.isDisabled)):k.none())}})(i,e.commands,t);return[{title:k.none(),items:[i.asSpec()]},{title:k.none(),items:r.asSpecs()}]},$O=QO,qO=(e,t,n)=>t.bottom-e.y>=n&&e.bottom-t.y>=n,WO=e=>{const t=(e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const n=dt(Pe.fromDom(e.startContainer),e.startOffset).element;return(Ge(n)?it(n):k.some(n)).filter(Ye).map(e=>e.dom.getBoundingClientRect()).getOr(t)}return t})(e.selection.getRng());if(e.inline){const e=zn();return qn(e.left+t.left,e.top+t.top,t.width,t.height)}{const n=Kn(Pe.fromDom(e.getBody()));return qn(n.x+t.left,n.y+t.top,t.width,t.height)}},KO=(e,t,n,i=0)=>{const r=Vn(window),o=Wn(Pe.fromDom(e.getContentAreaContainer())),s=By(e)||zy(e)||jy(e),{x:a,width:l}=((e,t,n)=>{const i=Math.max(e.x+n,t.x);return{x:i,width:Math.min(e.right-n,t.right)-i}})(o,r,i);if(e.inline&&!s)return qn(a,r.y,l,r.height);{const s=t.header.isPositionedAtTop(),{y:c,bottom:d}=((e,t,n,i,r,o)=>{const s=Pe.fromDom(e.getContainer()),a=Oa(s,".tox-editor-header").getOr(s),l=Wn(a),c=l.y>=t.bottom,d=i&&!c;if(e.inline&&d)return{y:Math.max(l.bottom+o,n.y),bottom:n.bottom};if(e.inline&&!d)return{y:n.y,bottom:Math.min(l.y-o,n.bottom)};const u="line"===r?Wn(s):t;return d?{y:Math.max(l.bottom+o,n.y),bottom:Math.min(u.bottom-o,n.bottom)}:{y:Math.max(u.y+o,n.y),bottom:Math.min(l.y-o,n.bottom)}})(e,o,r,s,n,i);return qn(a,c,l,d-c)}},ZO={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},XO={maxHeightFunction:Fc(),maxWidthFunction:AI()},JO=e=>"node"===e,eP=(e,t,n,i,r)=>{const o=WO(e),s=i.lastElement().exists(e=>Ze(n,e));if(((e,t)=>{const n=e.selection.getRng(),i=dt(Pe.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&Ze(i.element,t)})(e,n))return s?jk:Nk;if(s)return((e,t,n)=>{const i=Bt(e,"position");Dt(e,"position",t);const r=n(e);return i.each(t=>Dt(e,"position",t)),r})(t,i.getMode(),()=>qO(o,Wn(t),-20)&&!i.isReposition()?Yk:jk);return("fixed"===i.getMode()?r.y+zn().top:r.y)+(Vt(t)+12)<=o.y?Nk:Uk},tP=(e,t,n,i)=>{const r=t=>(i,r,o,s,a)=>({...eP(e,s,t,n,a)({...i,y:a.y,height:a.height},r,o,s,a),alwaysFit:!0}),o=e=>JO(i)?[r(e)]:[];return t?{onLtr:e=>[Il,Sl,Tl,kl,Ll,Dl].concat(o(e)),onRtl:e=>[Il,Tl,Sl,Ll,kl,Dl].concat(o(e))}:{onLtr:e=>[Dl,Il,kl,Sl,Ll,Tl].concat(o(e)),onRtl:e=>[Dl,Il,Ll,Tl,kl,Sl].concat(o(e))}},nP=(e,t)=>{const n=j(t,t=>t.predicate(e.dom)),{pass:i,fail:r}=H(n,e=>"contexttoolbar"===e.type);return{contextToolbars:i,contextForms:r}},iP=(e,t,n)=>{const i=nP(e,t);if(i.contextForms.length>0)return k.some({elem:e,toolbars:[i.contextForms[0]]});{const t=nP(e,n);if(t.contextForms.length>0)return k.some({elem:e,toolbars:[t.contextForms[0]]});if(i.contextToolbars.length>0||t.contextToolbars.length>0){const n=(e=>{if(e.length<=1)return e;{const t=t=>B(e,e=>e.position===t),n=t=>j(e,e=>e.position===t),i=t("selection"),r=t("node");if(i||r){if(r&&i){const e=n("node"),t=F(n("selection"),e=>({...e,position:"node"}));return e.concat(t)}return n(i?"selection":"node")}return n("line")}})(i.contextToolbars.concat(t.contextToolbars));return k.some({elem:e,toolbars:n})}return k.none()}},rP=(e,t,n)=>e(t)?k.none():jr(t,e=>{if(Ye(e)){const{contextToolbars:t,contextForms:i}=nP(e,n.inNodeScope),r=i.length>0?i:(e=>{if(e.length<=1)return e;{const t=t=>G(e,e=>e.position===t),n=t("selection").orThunk(()=>t("node")).orThunk(()=>t("line")).map(e=>e.position);return n.fold(()=>[],t=>j(e,e=>e.position===t))}})(t);return r.length>0?k.some({elem:e,toolbars:r}):k.none()}return k.none()},e),oP=(e,t)=>{const n={},i=[],r=[],o={},s={},a=(e,a)=>{const l=tr(er("ContextForm",DA,a));n[e]=l,l.launch.map(n=>{o["form:"+e]={...a.launch,type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:()=>{t(l)}}}),"editor"===l.scope?r.push(l):i.push(l),s[e]=l},l=(e,t)=>{var n;(n=t,er("ContextToolbar",IA,n)).each(n=>{"editor"===t.scope?r.push(n):i.push(n),s[e]=n})},c=se(e);return z(c,t=>{const n=e[t];"contextform"===n.type?a(t,n):"contexttoolbar"===n.type&&l(t,n)}),{forms:n,inNodeScope:i,inEditorScope:r,lookupTable:s,formNavigators:o}},sP=bs("forward-slide"),aP=bs("backward-slide"),lP=bs("change-slide-event"),cP="tox-pop--resizing",dP="tox-pop--transition",uP=(e,t,n,i)=>{const r=i.backstage,o=r.shared,s=kn().deviceType.isTouch,a=Cc(),l=Cc(),c=Cc(),d=Ma((e=>{const t=Pr([]);return Lg.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{t.set([]),Lg.getContent(e).each(e=>{Ft(e.element,"visibility")}),ia(e.element,cP),Ft(e.element,"width")},inlineBehaviours:$l([Uf("context-toolbar-events",[ss(po(),(e,t)=>{"width"===t.event.raw.propertyName&&(ia(e.element,cP),Ft(e.element,"width"))}),Jo(lP,(e,t)=>{const n=e.element;Ft(n,"width");const i=Zt(n);Lg.setContent(e,t.event.contents),ta(n,cP);const r=Zt(n);Dt(n,"width",i+"px"),Lg.getContent(e).each(e=>{t.event.focus.bind(e=>(tc(e),oc(n))).orThunk(()=>(Tf.focusIn(e),rc(mt(n))))}),setTimeout(()=>{Dt(e.element,"width",r+"px")},0)}),Jo(sP,(e,n)=>{Lg.getContent(e).each(n=>{t.set(t.get().concat([{bar:n,focus:rc(mt(e.element))}]))}),Go(e,lP,{contents:n.event.forwardContents,focus:k.none()})}),Jo(aP,(e,n)=>{ie(t.get()).each(n=>{t.set(t.get().slice(0,t.get().length-1)),Go(e,lP,{contents:Sa(n.bar),focus:n.focus})})})]),Tf.config({mode:"special",onEscape:n=>ie(t.get()).fold(()=>e.onEscape(),e=>(Yo(n,aP),k.some(!0)))})]),lazySink:()=>ni.value(e.sink)})})({sink:n,onEscape:()=>(e.focus(),k.some(!0))})),u=()=>{const t=c.get().getOr("node"),n=JO(t)?1:0;return KO(e,o,t,n)},h=()=>!(e.removed||s()&&r.isContextMenuOpen()),p=()=>{if(h()){const t=u(),n=Ae(c.get(),"node")?((e,t)=>t.filter(e=>bt(e)&&Ve(e)).map(Kn).getOrThunk(()=>WO(e)))(e,a.get()):WO(e);return t.height<=0||!qO(n,t,.01)}return!0},m=()=>{a.clear(),l.clear(),c.clear(),Lg.hide(d)},f=()=>{if(Lg.isOpen(d)){const e=d.element;Ft(e,"display"),p()?Dt(e,"display","none"):(l.set(0),Lg.reposition(d))}},g=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:$l([Tf.config({mode:"acyclic"}),Uf("pop-dialog-wrap-events",[as(t=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>Tf.focusIn(t))}),ls(t=>{e.shortcuts.remove("ctrl+F9")})])])}),y=Jt(()=>oP(t,e=>{const t=b([e]);Go(d,sP,{forwardContents:g(t)})})),b=t=>{const{buttons:n}=e.ui.registry.getAll(),r={...n,...y().formNavigators},s=cy(e)===Vv.scrolling?Vv.scrolling:Vv.default,a=$(F(t,t=>"contexttoolbar"===t.type?((t,n)=>TO(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},i.backstage,k.some(["form:"])))(r,t):((e,t)=>$O(e,t))(t,o.providers)));return GI({type:s,uid:bs("context-toolbar"),initGroups:a,onEscape:k.none,cyclicKeying:!0,providers:o.providers})},A=(t,i)=>{const r="node"===t?o.anchors.node(i):o.anchors.cursor(),c=((e,t,n,i)=>"line"===t?{bubble:Vc(12,0,ZO),layouts:{onLtr:()=>[Rl],onRtl:()=>[Ol]},overrides:XO}:{bubble:Vc(0,12,ZO,1/12),layouts:tP(e,n,i,t),overrides:XO})(e,t,s(),{lastElement:a.get,isReposition:()=>Ae(l.get(),0),getMode:()=>ru.getMode(n)});return Ai(r,c)},_=(e,t)=>{if(x.cancel(),!h())return;const i=b(e),r=e[0].position,o=A(r,t);c.set(r),l.set(1);const s=d.element;Ft(s,"display"),(e=>Ae(we(e,a.get(),Ze),!0))(t)||(ia(s,dP),ru.reset(n,d)),Lg.showWithinBounds(d,g(i),{anchor:o,transition:{classes:[dP],mode:"placement"}},()=>k.some(u())),t.fold(a.clear,a.set),p()&&Dt(s,"display","none")};let w=!1;const x=aS(()=>{if(e.hasFocus()&&!e.removed&&!w)if(oa(d.element,dP))x.throttle();else{((e,t)=>{const n=Pe.fromDom(t.getBody()),i=e=>Ze(e,n),r=Pe.fromDom(t.selection.getNode());return(e=>!i(e)&&!Xe(n,e))(r)?k.none():iP(r,e.inNodeScope,e.inEditorScope).orThunk(()=>rP(i,r,e))})(y(),e).fold(m,e=>{_(e.toolbars,k.some(e.elem))})}},17);e.on("init",()=>{e.on("remove",m),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",f),e.on("click keyup focus SetContent",x.throttle),e.on(VO,m),e.on("contexttoolbar-show",t=>{const n=y();ve(n.lookupTable,t.toolbarKey).each(n=>{_([n],Ce(t.target!==e,t.target)),Lg.getContent(d).each(Tf.focusIn)})}),e.on("focusout",t=>{Dg.setEditorTimeout(e,()=>{oc(n.element).isNone()&&oc(d.element).isNone()&&m()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&m()}),e.on("AfterProgressState",t=>{t.state?m():e.hasFocus()&&x.throttle()}),e.on("dragstart",()=>{w=!0}),e.on("dragend drop",()=>{w=!1}),e.on("NodeChange",e=>{oc(d.element).fold(x.throttle,v)})})},hP=(e,t)=>{const n=()=>{const n=t.getOptions(e),i=t.getCurrent(e).map(t.hash),r=Cc();return F(n,n=>({type:"togglemenuitem",text:t.display(n),onSetup:o=>{const s=e=>{e&&(r.on(e=>e.setActive(!1)),r.set(o)),o.setActive(e)};s(Ae(i,t.hash(n)));const a=t.watcher(e,n,s);return()=>{r.clear(),a()}},onAction:()=>t.setCurrent(e,n)}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(n()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},pP=e=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:Fy,hash:e=>((e,t)=>KR(e,t).map(({value:e,unit:t})=>e+t))(e,["fixed","relative","empty"]).getOr(e),display:_,watcher:(e,t,n)=>e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind,getCurrent:e=>k.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t),onToolbarSetup:uw(e),onMenuSetup:uw(e)}),mP=e=>{hP(e,pP(e)),(e=>k.from(ay(e)).map(t=>({name:"language",text:"Language",icon:"language",getOptions:A(t),hash:e=>u(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,n)=>{var i;return e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:null!==(i=t.customCode)&&void 0!==i?i:null}).unbind},getCurrent:e=>{const t=Pe.fromDom(e.selection.getNode());return Vr(t,e=>k.some(e).filter(Ye).bind(e=>Mt(e,"lang").map(t=>({code:t,customCode:Mt(e,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{const n=xc();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),dw(n.clear,uw(e)(t))},onMenuSetup:uw(e)})))(e).each(t=>hP(e,t))},fP=(e,t)=>{((e,t)=>{const n=LR(0,t,NR(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),onSetup:uw(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=LR(0,t,$R(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),onSetup:uw(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n={type:"advanced",...t.styles},i=LR(0,t,aO(e,n));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:uw(e),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})})(e,t),((e,t)=>{const n=LR(0,t,HR(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:uw(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const n=LR(0,t,oO(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:uw(e),getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t)},gP=e=>pw(e,"NodeChange",t=>{t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),vP=e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:gP(e),onAction:fw(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:uw(e),onAction:fw(e,"indent")})})(e)},yP=(e,t)=>n=>{n.setActive(t.get());const i=e=>{t.set(e.state),n.setActive(e.state)};return e.on("PastePlainTextToggle",i),dw(()=>e.off("PastePlainTextToggle",i),uw(e)(n))},bP=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},AP=e=>{(e=>{oS.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(t,n)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:hw(e,t.name),onAction:bP(e,t.name)})});for(let t=1;t<=6;t++){const n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:hw(e,n),onAction:bP(e,n)})}})(e),(e=>{oS.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fw(e,t.action)})}),oS.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:uw(e),onAction:fw(e,t.action)})})})(e),(e=>{oS.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fw(e,t.action),onSetup:hw(e,t.name)})})})(e)},_P=e=>{AP(e),(e=>{oS.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:fw(e,t.action)})}),oS.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:uw(e),onAction:fw(e,t.action)})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:uw(e),onAction:bP(e,"code")})})(e)},wP=(e,t)=>pw(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",n=>{n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}),xP=e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:wP(e,"hasUndo"),onAction:fw(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:wP(e,"hasRedo"),onAction:fw(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:wP(e,"hasUndo"),onAction:fw(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:wP(e,"hasRedo"),onAction:fw(e,"redo")})})(e)},CP=e=>pw(e,"VisualAid",t=>{t.setActive(e.hasVisual)}),EP=e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:fw(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:CP(e),onAction:fw(e,"mceToggleVisualAid")})})(e)},MP=(e,t)=>{(e=>{z([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:fw(e,t.cmd),onSetup:hw(e,t.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:uw(e),onAction:fw(e,"JustifyNone")})})(e),_P(e),fP(e,t),xP(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",(t,n)=>{((e,t,n)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})})(e,t,n)}),e.addCommand("mceRemoveTextcolor",t=>{((e,t)=>{e.undoManager.transact(()=>{e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()})})(e,t)})})(e);const t=Ow(e),n=Pw(e),i=Pr(t),r=Pr(n);Qw(e,"forecolor","forecolor",i),Qw(e,"backcolor","hilitecolor",r),$w(e,"forecolor","forecolor","Text color",i),$w(e,"backcolor","hilitecolor","Background color",r)})(e),EP(e),vP(e),mP(e),(e=>{const t=Pr(Ly(e)),n=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:yP(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:yP(e,t)})})(e)},SP=e=>o(e)?e.split(/[ ,]/):e,TP=e=>t=>t.options.get(e),kP=TP("contextmenu_never_use_native"),LP=TP("contextmenu_avoid_overlap"),DP=e=>{const t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:j(n,e=>ye(t,e))},IP=(e,t)=>({type:"makeshift",x:e,y:t}),RP=e=>"longpress"===e.type||0===e.type.indexOf("touch"),OP=(e,t)=>{const n=Gv.DOM.getPos(e);return((e,t,n)=>IP(e.x+t,e.y+n))(t,n.x,n.y)},PP=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(RP(e)){const t=e.touches[0];return IP(t.pageX,t.pageY)}return IP(e.pageX,e.pageY)})(t):OP(e.getContentAreaContainer(),(e=>{if(RP(e)){const t=e.touches[0];return IP(t.clientX,t.clientY)}return IP(e.clientX,e.clientY)})(t)):BP(e),BP=e=>({type:"selection",root:Pe.fromDom(e.selection.getNode())}),NP=(e,t,n)=>{switch(n){case"node":return(e=>({type:"node",node:k.some(Pe.fromDom(e.selection.getNode())),root:Pe.fromDom(e.getBody())}))(e);case"point":return PP(e,t);case"selection":return BP(e)}},UP=(e,t,n,i,r,o)=>{const s=n(),a=NP(e,t,o);$S(s,nb.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:k.none()}).map(e=>{t.preventDefault(),Lg.showMenuAt(r,{anchor:a},{menu:{markers:vb("normal")},data:e})})},FP={onLtr:()=>[Il,Sl,Tl,kl,Ll,Dl,Nk,Uk,Bk,Ok,Pk,Rk],onRtl:()=>[Il,Tl,Sl,Ll,kl,Dl,Nk,Uk,Pk,Rk,Bk,Ok]},zP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},HP=(e,t,n,i,r,o,s)=>{const a=((e,t,n)=>{const i=NP(e,t,n);return{bubble:Vc(0,"point"===n?12:0,zP),layouts:FP,overrides:{maxWidthFunction:AI(),maxHeightFunction:Fc()},...i}})(e,t,o);$S(n,nb.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:k.none()}).map(n=>{t.preventDefault();const l=s?Sg.HighlightMenuAndItem:Sg.HighlightNone;Lg.showMenuWithinBounds(r,{anchor:a},{menu:{markers:vb("normal"),highlightOnOpen:l},data:n,type:"horizontal"},()=>k.some(KO(e,i.shared,"node"===o?"node":"selection"))),e.dispatch(VO)})},jP=(e,t,n,i,r,o)=>{const s=kn(),a=s.os.isiOS(),l=s.os.isMacOS(),c=s.os.isAndroid(),d=s.deviceType.isTouch(),u=()=>{const s=n();HP(e,t,s,i,r,o,!(c||a||l&&d))};if((l||a)&&"node"!==o){const n=()=>{(e=>{const t=e.selection.getRng(),n=()=>{Dg.setEditorTimeout(e,()=>{e.selection.setRng(t)},10),o()};e.once("touchend",n);const i=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",i,!0);const r=()=>o();e.once("longpresscancel",r);const o=()=>{e.off("touchend",n),e.off("longpresscancel",r),e.off("mousedown",i)}})(e),u()};((e,t)=>{const n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;{const i=t.touches[0],r=n.getRng();return Ld(e.getWin(),gd.domRange(r)).exists(e=>e.left<=i.clientX&&e.right>=i.clientX&&e.top<=i.clientY&&e.bottom>=i.clientY)}})(e,t)?n():(e.once("selectionchange",n),e.once("touchend",()=>e.off("selectionchange",n)))}else u()},VP=e=>o(e)?"|"===e:"separator"===e.type,YP={type:"separator"},GP=e=>{const t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(o(e))return e;switch(e.type){case"separator":return YP;case"submenu":return{type:"nestedmenuitem",...t(e),getSubmenuItems:()=>{const t=e.getSubmenuItems();return o(t)?t:F(t,GP)}};default:const n=e;return{type:"menuitem",...t(n),onAction:y(n.onAction)}}},QP=(e,t)=>{if(0===t.length)return e;const n=ie(e).filter(e=>!VP(e)),i=n.fold(()=>[],e=>[YP]);return e.concat(i).concat(t).concat([YP])},$P=(e,t)=>!(e=>"longpress"===e.type||ye(e,"touches"))(t)&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),qP=(e,t)=>$P(e,t)?e.selection.getStart(!0):t.target,WP=(e,t,n)=>{const i=kn().deviceType.isTouch,r=Ma(Lg.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>n.setContextMenuState(!0),onHide:()=>n.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:$l([Uf("dismissContextMenu",[Jo(Po(),(t,n)=>{Du.close(t),e.focus()})])])})),s=()=>Lg.hide(r),a=t=>{if(kP(e)&&t.preventDefault(),((e,t)=>t.ctrlKey&&!kP(e))(e,t)||(e=>0===DP(e).length)(e))return;const s=((e,t)=>{const n=LP(e),i=$P(e,t)?"selection":"point";if(De(n)){const r=qP(e,t);return Jx(Pe.fromDom(r),n)?"node":i}return i})(e,t);(i()?jP:UP)(e,t,()=>{const n=qP(e,t),i=e.ui.registry.getAll(),r=DP(e);return((e,t,n)=>{const i=Y(t,(t,i)=>ve(e,i.toLowerCase()).map(e=>{const i=e.update(n);if(o(i)&&De(Le(i)))return QP(t,i.split(" "));if(l(i)&&i.length>0){const e=F(i,GP);return QP(t,e)}return t}).getOrThunk(()=>t.concat([i])),[]);return i.length>0&&VP(i[i.length-1])&&i.pop(),i})(i.contextMenus,r,n)},n,r,s)};e.on("init",()=>{const t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");e.on(t,s),e.on("longpress contextmenu",a)})},KP=Br([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ZP=e=>t=>t.translate(-e.left,-e.top),XP=e=>t=>t.translate(e.left,e.top),JP=e=>(t,n)=>Y(e,(e,t)=>t(e),Qt(t,n)),eB=(e,t,n)=>e.fold(JP([XP(n),ZP(t)]),JP([ZP(t)]),JP([])),tB=(e,t,n)=>e.fold(JP([XP(n)]),JP([]),JP([XP(t)])),nB=(e,t,n)=>e.fold(JP([]),JP([ZP(n)]),JP([XP(t),ZP(n)])),iB=(e,t,n)=>{const i=e.fold((e,t)=>({position:k.some("absolute"),left:k.some(e+"px"),top:k.some(t+"px")}),(e,t)=>({position:k.some("absolute"),left:k.some(e-n.left+"px"),top:k.some(t-n.top+"px")}),(e,t)=>({position:k.some("fixed"),left:k.some(e+"px"),top:k.some(t+"px")}));return{right:k.none(),bottom:k.none(),...i}},rB=(e,t,n,i)=>{const r=(e,r)=>(o,s)=>{const a=e(t,n,i);return r(o.getOr(a.left),s.getOr(a.top))};return e.fold(r(nB,oB),r(tB,sB),r(eB,aB))},oB=KP.offset,sB=KP.absolute,aB=KP.fixed,lB=(e,t)=>{const n=Et(e,t);return u(n)?NaN:parseInt(n,10)},cB=(e,t,n,i)=>((e,t)=>{const n=e.element,i=lB(n,t.leftAttr),r=lB(n,t.topAttr);return isNaN(i)||isNaN(r)?k.none():k.some(Qt(i,r))})(e,t).fold(()=>n,e=>aB(e.left+i.left,e.top+i.top)),dB=(e,t,n,i,r,o)=>{const s=cB(e,t,n,i),a=t.mustSnap?pB(e,t,s,r,o):mB(e,t,s,r,o),l=eB(s,r,o);return((e,t,n)=>{const i=e.element;xt(i,t.leftAttr,n.left+"px"),xt(i,t.topAttr,n.top+"px")})(e,t,l),a.fold(()=>({coord:aB(l.left,l.top),extra:k.none()}),e=>({coord:e.output,extra:e.extra}))},uB=(e,t)=>{((e,t)=>{const n=e.element;Tt(n,t.leftAttr),Tt(n,t.topAttr)})(e,t)},hB=(e,t,n,i)=>oe(e,e=>{const r=e.sensor,o=((e,t,n,i,r,o)=>{const s=tB(e,r,o),a=tB(t,r,o);return Math.abs(s.left-a.left)<=n&&Math.abs(s.top-a.top)<=i})(t,r,e.range.left,e.range.top,n,i);return o?k.some({output:rB(e.output,t,n,i),extra:e.extra}):k.none()}),pB=(e,t,n,i,r)=>{const o=t.getSnapPoints(e);return hB(o,n,i,r).orThunk(()=>{const e=Y(o,(e,t)=>{const o=t.sensor,s=((e,t,n,i,r,o)=>{const s=tB(e,r,o),a=tB(t,r,o),l=Math.abs(s.left-a.left),c=Math.abs(s.top-a.top);return Qt(l,c)})(n,o,t.range.left,t.range.top,i,r);return e.deltas.fold(()=>({deltas:k.some(s),snap:k.some(t)}),n=>(s.left+s.top)/2<=(n.left+n.top)/2?{deltas:k.some(s),snap:k.some(t)}:e)},{deltas:k.none(),snap:k.none()});return e.snap.map(e=>({output:rB(e.output,n,i,r),extra:e.extra}))})},mB=(e,t,n,i,r)=>{const o=t.getSnapPoints(e);return hB(o,n,i,r)};var fB=Object.freeze({__proto__:null,snapTo:(e,t,n,i)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const t=Je(e.element),n=zn(t),o=XL(r),s=((e,t,n)=>({coord:rB(e.output,e.output,t,n),extra:e.extra}))(i,n,o),a=iB(s.coord,0,o);Rt(r,a)}}});const gB="data-initial-z-index",vB=(e,t)=>{e.getSystem().addToGui(t),(e=>{it(e.element).filter(Ye).each(t=>{Bt(t,"z-index").each(e=>{xt(t,gB,e)}),Dt(t,"z-index",Ot(e.element,"z-index"))})})(t)},yB=e=>{(e=>{it(e.element).filter(Ye).each(e=>{Mt(e,gB).fold(()=>Ft(e,"z-index"),t=>Dt(e,"z-index",t)),Tt(e,gB)})})(e),e.getSystem().removeFromGui(e)},bB=(e,t,n)=>e.getSystem().build(hC.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}));var AB=Er("snaps",[cr("getSnapPoints"),el("onSensor"),cr("leftAttr"),cr("topAttr"),Mr("lazyViewport",Xn),Mr("mustSnap",!1)]);const _B=[Mr("useFixed",S),cr("blockerClass"),Mr("getTarget",_),Mr("onDrag",v),Mr("repositionTarget",!0),Mr("onDrop",v),Ir("getBounds",Xn),AB],wB=e=>((e,t,n,i)=>e.isSome()&&t.isSome()&&n.isSome()?k.some(i(e.getOrDie(),t.getOrDie(),n.getOrDie())):k.none())(Bt(e,"left"),Bt(e,"top"),Bt(e,"position"),(e,t,n)=>("fixed"===n?aB:oB)(parseInt(e,10),parseInt(t,10))).getOrThunk(()=>{const t=qt(e);return sB(t.left,t.top)}),xB=(e,t,n,i,r,o,s)=>((e,t,n,i,r)=>{const o=r.bounds,s=tB(t,n,i),a=yl(s.left,o.x,o.x+o.width-r.width),l=yl(s.top,o.y,o.y+o.height-r.height),c=sB(a,l);return t.fold(()=>{const e=nB(c,n,i);return oB(e.left,e.top)},A(c),()=>{const e=eB(c,n,i);return aB(e.left,e.top)})})(0,t.fold(()=>{const e=(t=n,s=o.left,a=o.top,t.fold((e,t)=>oB(e+s,t+a),(e,t)=>sB(e+s,t+a),(e,t)=>aB(e+s,t+a)));var t,s,a;const l=eB(e,i,r);return aB(l.left,l.top)},t=>{const s=dB(e,t,n,o,i,r);return s.extra.each(n=>{t.onSensor(e,n)}),s.coord}),i,r,s),CB=(e,t)=>({bounds:e.getBounds(),height:Yt(t.element),width:Xt(t.element)}),EB=(e,t,n,i,r)=>{const o=n.update(i,r),s=n.getStartData().getOrThunk(()=>CB(t,e));o.each(n=>{((e,t,n,i)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const o=Je(e.element),s=zn(o),a=XL(r),l=wB(r),c=xB(e,t.snaps,l,s,a,i,n),d=iB(c,0,a);Rt(r,d)}t.onDrag(e,r,i)})(e,t,s,n)})},MB=(e,t,n,i)=>{t.each(yB),n.snaps.each(t=>{uB(e,t)});const r=n.getTarget(e.element);i.reset(),n.onDrop(e,r)},SB=e=>(t,n)=>{const i=e=>{n.setStartData(CB(t,e))};return Ko([Jo(Do(),e=>{n.getStartData().each(()=>i(e))}),...e(t,n,i)])};var TB=Object.freeze({__proto__:null,getData:e=>k.from(Qt(e.x,e.y)),getDelta:(e,t)=>Qt(t.left-e.left,t.top-e.top)});const kB=(e,t,n)=>[Jo(Jr(),(i,r)=>{if(0!==r.event.raw.button)return;r.stop();const o=()=>MB(i,k.some(l),e,t),s=eC(o,200),a={drop:o,delayDrop:s.schedule,forceDrop:o,move:n=>{s.cancel(),EB(i,e,t,TB,n)}},l=bB(i,e.blockerClass,(e=>Ko([Jo(Jr(),e.forceDrop),Jo(no(),e.drop),Jo(eo(),(t,n)=>{e.move(n.event)}),Jo(to(),e.delayDrop)]))(a));n(i),vB(i,l)})],LB=[..._B,rl("dragger",{handlers:SB(kB)})];var DB=Object.freeze({__proto__:null,getData:e=>{const t=e.raw.touches;return 1===t.length?(e=>{const t=e[0];return k.some(Qt(t.clientX,t.clientY))})(t):k.none()},getDelta:(e,t)=>Qt(t.left-e.left,t.top-e.top)});const IB=(e,t,n)=>{const i=Cc(),r=n=>{MB(n,i.get(),e,t),i.clear()};return[Jo(Wr(),(o,s)=>{s.stop();const a=()=>r(o),l={drop:a,delayDrop:v,forceDrop:a,move:n=>{EB(o,e,t,DB,n)}},c=bB(o,e.blockerClass,(e=>Ko([Jo(Wr(),e.forceDrop),Jo(Zr(),e.drop),Jo(Xr(),e.drop),Jo(Kr(),(t,n)=>{e.move(n.event)})]))(l));i.set(c);n(o),vB(o,c)}),Jo(Kr(),(n,i)=>{i.stop(),EB(n,e,t,DB,i.event)}),Jo(Zr(),(e,t)=>{t.stop(),r(e)}),Jo(Xr(),r)]},RB=LB,OB=[..._B,rl("dragger",{handlers:SB(IB)})],PB=[..._B,rl("dragger",{handlers:SB((e,t,n)=>[...kB(e,t,n),...IB(e,t,n)])})];var BB=Object.freeze({__proto__:null,mouse:RB,touch:OB,mouseOrTouch:PB});var NB=Object.freeze({__proto__:null,init:()=>{let e=k.none(),t=k.none();const n=A({});return Ns({readState:n,reset:()=>{e=k.none(),t=k.none()},update:(t,n)=>t.getData(n).bind(n=>((t,n)=>{const i=e.map(e=>t.getDelta(e,n));return e=k.some(n),i})(t,n)),getStartData:()=>t,setStartData:e=>{t=k.some(e)}})}});const UB=Zl({branchKey:"mode",branches:BB,name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:k.from(e.extra)})},state:NB,apis:fB}),FB=(e,t,n,i,r,o)=>e.fold(()=>UB.snap({sensor:sB(n-20,i-20),range:Qt(r,o),output:sB(k.some(n),k.some(i)),extra:{td:t}}),e=>{const r=n-20,o=i-20,s=e.element.dom.getBoundingClientRect();return UB.snap({sensor:sB(r,o),range:Qt(40,40),output:sB(k.some(n-s.width/2),k.some(i-s.height/2)),extra:{td:t}})}),zB=(e,t,n)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,i)=>{const r=i.td;((e,t)=>e.exists(e=>Ze(e,t)))(t.get(),r)||(t.set(r),n(r))},mustSnap:!0}),HB=e=>Og(Ig.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:$l([UB.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),GC.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),jB=(e,t)=>{const n=Pr([]),i=Pr([]),r=Pr(!1),o=Cc(),s=Cc(),a=e=>{const n=Kn(e);return FB(u.getOpt(t),e,n.x,n.y,n.width,n.height)},l=e=>{const n=Kn(e);return FB(h.getOpt(t),e,n.right,n.bottom,n.width,n.height)},c=zB(()=>F(n.get(),e=>a(e)),o,t=>{s.get().each(n=>{e.dispatch("TableSelectorChange",{start:t,finish:n})})}),d=zB(()=>F(i.get(),e=>l(e)),s,t=>{o.get().each(n=>{e.dispatch("TableSelectorChange",{start:n,finish:t})})}),u=HB(c),h=HB(d),p=Ma(u.asSpec()),m=Ma(h.asSpec()),f=(t,n,i,r)=>{const o=i(n);UB.snapTo(t,o);((t,n,i,r)=>{const o=n.dom.getBoundingClientRect();Ft(t.element,"display");const s=nt(Pe.fromDom(e.getBody())).dom.innerHeight,a=i(o),l=r(o,s);(a||l)&&Dt(t.element,"display","none")})(t,n,e=>e[r]<0,(e,t)=>e[r]>t)},g=e=>f(p,e,a,"top"),v=e=>f(m,e,l,"bottom");kn().deviceType.isTouch()&&(e.on("TableSelectionChange",e=>{r.get()||(hu(t,p),hu(t,m),r.set(!0)),o.set(e.start),s.set(e.finish),e.otherCells.each(t=>{n.set(t.upOrLeftCells),i.set(t.downOrRightCells),g(e.start),v(e.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{o.get().each(g),s.get().each(v)}),e.on("TableSelectionClear",()=>{r.get()&&(fu(p),fu(m),r.set(!1)),o.clear(),s.clear()}))};const VB=e=>"BR"===e.nodeName||!!e.getAttribute("data-mce-bogus")||"bookmark"===e.getAttribute("data-mce-type"),YB=(e,t,n)=>{var i;const r=null!==(i=t.delimiter)&&void 0!==i?i:"›",o=t=>Y(t,(t,i,o)=>{const s=((t,i,r)=>Ig.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":r,"aria-level":r+1}},components:[wa(t)],action:t=>{e.focus(),e.selection.select(i),e.nodeChanged()},buttonBehaviours:$l([f_(n.isDisabled),p_()])}))(i.name,i.element,o);return 0===o?t.concat([s]):t.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[wa(` ${r} `)]},s])},[]);return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:$l([Tf.config({mode:"flow",selector:"div[role=button]"}),Ap.config({disabled:n.isDisabled}),p_(),bC.config({}),Nf.config({}),Uf("elementPathEvents",[as((t,n)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Tf.focusIn(t)),e.on("NodeChange",n=>{const i=(t=>{const n=[];let i=t.length;for(;i-- >0;){const r=t[i];if(1===r.nodeType&&!VB(r)){const t=cw(e,r);if(t.isDefaultPrevented()||n.push({name:t.name,element:r}),t.isPropagationStopped())break}}return n})(n.parents),r=i.length>0?o(i):[];Nf.set(t,r)})})])]),components:[]}};var GB;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(GB||(GB={}));const QB=(e,t,n)=>{const i=Pe.fromDom(e.getContainer()),r=((e,t,n,i,r)=>{const o={height:PO(i+t.top,ty(e),iy(e))};return n===GB.Both&&(o.width=PO(r+t.left,ey(e),ny(e))),o})(e,t,n,Vt(i),Zt(i));le(r,(e,t)=>{f(e)&&Dt(i,t,OO(e))}),(e=>{e.dispatch("ResizeEditor")})(e)},$B=(e,t,n,i)=>{const r=Qt(20*n,20*i);return QB(e,r,t),k.some(!0)},qB=(e,t)=>{const n=(e=>{const t=ky(e);return!1===t?GB.None:"both"===t?GB.Both:GB.Vertical})(e);if(n===GB.None)return k.none();const i=n===GB.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return k.some(zv("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-label":t.translate(i)},behaviours:[UB.config({mode:"mouse",repositionTarget:!1,onDrag:(t,i,r)=>QB(e,r,n),blockerClass:"tox-blocker"}),Tf.config({mode:"special",onLeft:()=>$B(e,n,-1,0),onRight:()=>$B(e,n,1,0),onUp:()=>$B(e,n,0,-1),onDown:()=>$B(e,n,0,1)}),bC.config({}),Vf.config({})]},t.icons))},WB=(e,t)=>{const n=()=>{const n=[];return e.hasPlugin("wordcount")&&n.push(((e,t)=>{const n=(e,n,i)=>Nf.set(e,[wa(t.translate(["{0} "+i,n[i]]))]);return Ig.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:$l([f_(t.isDisabled),p_(),bC.config({}),Nf.config({}),Zu.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Uf("wordcount-events",[ds(e=>{const t=Zu.getValue(e),i="words"===t.mode?"characters":"words";Zu.setValue(e,{mode:i,count:t.count}),n(e,t.count,i)}),as(t=>{e.on("wordCountUpdate",e=>{const{mode:i}=Zu.getValue(t);Zu.setValue(t,{mode:i,count:e.wordCount}),n(t,e.wordCount,i)})})])]),eventOrder:{[wo()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),Ty(e)&&n.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Dv.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:$l([Vf.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:n}},i=()=>{const i=[],r=Ry(e),o=Sy(e),s=Ty(e)||e.hasPlugin("wordcount"),a=()=>{const e="tox-statusbar__text-container--flex-start",t="tox-statusbar__text-container--flex-end";if(r){const n="tox-statusbar__text-container-3-cols";return s||o?s&&!o?[n,t]:[n,e]:[n,"tox-statusbar__text-container--space-around"]}return[s&&!o?t:e]};return o&&i.push(YB(e,{},t)),r&&i.push((()=>{const e=M_("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[wa(Dv.translate(["Press {0} for help",e]))]}})()),s&&i.push(n()),i.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...a()]},components:i}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const n=i(),r=qB(e,t);return n.concat(r.toArray())})()}},KB=(e,t)=>t.get().getOrDie(`UI for ${e} has not been rendered`),ZB=(e,t)=>{const n=e.inline,i=n?jO:IO,r=qy(e)?UD:KL,o=(()=>{const e=Cc(),t=Cc(),n=Cc();return{dialogUi:e,popupUi:t,mainUi:n,getUiMotherships:()=>{const n=e.get().map(e=>e.mothership),i=t.get().map(e=>e.mothership);return n.fold(()=>i.toArray(),e=>i.fold(()=>[e],t=>Ze(e.element,t.element)?[e]:[e,t]))},lazyGetInOuterOrDie:(e,t)=>()=>n.get().bind(e=>t(e.outerContainer)).getOrDie(`Could not find ${e} element in OuterContainer`)}})(),s=Cc(),a=Cc(),l=Cc(),c=kn().deviceType.isTouch()?["tox-platform-touch"]:[],d=Vy(e),u=cy(e),h=Og({dom:{tag:"div",classes:["tox-anchorbar"]}}),p=Og({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),m=()=>o.mainUi.get().map(e=>e.outerContainer).bind(vR.getHeader),f=o.lazyGetInOuterOrDie("anchor bar",h.getOpt),g=o.lazyGetInOuterOrDie("bottom anchor bar",p.getOpt),v=o.lazyGetInOuterOrDie("toolbar",vR.getToolbar),y=o.lazyGetInOuterOrDie("throbber",vR.getThrobber),b=NL({popup:()=>ni.fromOption(o.popupUi.get().map(e=>e.sink),"(popup) UI has not been rendered"),dialog:()=>ni.fromOption(o.dialogUi.get().map(e=>e.sink),"UI has not been rendered")},e,f,g),A=()=>vR.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),_=()=>{const t=(()=>{const t={attributes:{[Wc]:d?qc.BottomToTop:qc.TopToBottom}},n=vR.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:b.popup,onEscape:()=>{e.focus()}}),i=vR.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:b.popup.shared.getSink,providers:b.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:t=>{((e,t)=>{e.dispatch("ToggleToolbarDrawer",{state:t})})(e,t)},type:u,lazyToolbar:v,lazyHeader:()=>m().getOrDie("Could not find header element"),...t}),r=vR.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:b.popup.shared.providers,onEscape:()=>{e.focus()},type:u}),o=jy(e),s=zy(e),a=By(e),l=Iy(e),c=A(),p=o||s||a,f=l?[c,n]:[n];return vR.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(p?[]:["tox-editor-header--empty"]),...t},components:$([a?f:[],o?[r]:s?[i]:[],Gy(e)?[]:[h.asSpec()]]),sticky:qy(e),editor:e,sharedBackstage:b.popup.shared})})(),i={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[vR.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),vR.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},r=vR.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:b.popup}),o=vR.parts.viewWrapper({backstage:b.popup}),a=My(e)&&!n?k.some(WB(e,b.popup.shared.providers)):k.none(),l=$([d?[]:[t],n?[]:[i],d?[t]:[]]),f=vR.parts.editorContainer({components:$([l,n?[]:[p.asSpec(),...a.toArray()]])}),g=$y(e),y={role:"application",...Dv.isRtl()?{dir:"rtl"}:{},...g?{"aria-hidden":"true"}:{}},_=Ma(vR.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(d?["tox-tinymce--toolbar-bottom"]:[]).concat(c),styles:{visibility:"hidden",...g?{opacity:"0",border:"0"}:{}},attributes:y},components:[f,...n?[]:[o],r],behaviours:$l([p_(),Ap.config({disableClass:"tox-tinymce--disabled"}),Tf.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),w=pC(_);return s.set(w),{mothership:w,outerContainer:_}},w=t=>{const n=OO(BO(e)),i=OO((e=>NO(e).getOr(Jv(e)))(e));return e.inline||(Ut("div","width",i)&&Dt(t.element,"width",i),Ut("div","height",n)?Dt(t.element,"height",n):Dt(t.element,"height","400px")),n},x=t=>{const{mainUi:n,popupUi:o,uiMotherships:s}=t;ce(dy(e),(t,n)=>{e.ui.registry.addGroupToolbarButton(n,t)});const{buttons:a,menuItems:l,contextToolbars:c,sidebars:d,views:h}=e.ui.registry.getAll(),p=Hy(e),f={menuItems:l,menus:Ky(e),menubar:gy(e),toolbar:p.getOrThunk(()=>vy(e)),allowToolbarGroups:u===Vv.floating,buttons:a,sidebar:d,views:h};var g;g=n.outerContainer,e.addShortcut("alt+F9","focus menubar",()=>{vR.focusMenubar(g)}),e.addShortcut("alt+F10","focus toolbar",()=>{vR.focusToolbar(g)}),e.addCommand("ToggleToolbarDrawer",(e,t)=>{(null==t?void 0:t.skipFocus)?vR.toggleToolbarDrawerWithoutFocusing(g):vR.toggleToolbarDrawer(g)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>vR.isToolbarDrawerToggled(g)),((e,t,n)=>{const i=(e,i)=>{z([t,...n],t=>{t.broadcastEvent(e,i)})},r=(e,i)=>{z([t,...n],t=>{t.broadcastOn([e],i)})},o=e=>r(Iu(),{target:e.target}),s=Yn(),a=Mc(s,"touchstart",o),l=Mc(s,"touchmove",e=>i(ko(),e)),c=Mc(s,"touchend",e=>i(Lo(),e)),d=Mc(s,"mousedown",o),u=Mc(s,"mouseup",e=>{0===e.raw.button&&r(Ou(),{target:e.target})}),h=e=>r(Iu(),{target:Pe.fromDom(e.target)}),p=e=>{0===e.button&&r(Ou(),{target:Pe.fromDom(e.target)})},m=()=>{z(e.editorManager.get(),t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})})},f=e=>i(Do(),Tc(e)),g=e=>{r(Ru(),{}),i(Io(),Tc(e))},v=mt(Pe.fromDom(e.getElement())),y=Sc(v,"scroll",n=>{requestAnimationFrame(()=>{if(null!=e.getContainer()){const r=Zx(e,t.element).map(e=>[e.element,...e.others]).getOr([]);B(r,e=>Ze(e,n.target))&&(e.dispatch("ElementScroll",{target:n.target.dom}),i(Fo(),n))}})}),b=()=>r(Ru(),{}),A=t=>{t.state&&r(Iu(),{target:Pe.fromDom(e.getContainer())})},_=e=>{r(Iu(),{target:Pe.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",()=>{e.on("click",h),e.on("tap",h),e.on("mouseup",p),e.on("mousedown",m),e.on("ScrollWindow",f),e.on("ResizeWindow",g),e.on("ResizeEditor",b),e.on("AfterProgressState",A),e.on("DismissPopups",_)}),e.on("remove",()=>{e.off("click",h),e.off("tap",h),e.off("mouseup",p),e.off("mousedown",m),e.off("ScrollWindow",f),e.off("ResizeWindow",g),e.off("ResizeEditor",b),e.off("AfterProgressState",A),e.off("DismissPopups",_),d.unbind(),a.unbind(),l.unbind(),c.unbind(),u.unbind(),y.unbind()}),e.on("detach",()=>{z([t,...n],Au),z([t,...n],e=>e.destroy())})})(e,n.mothership,s),r.setup(e,b.popup.shared,m),MP(e,b.popup),WP(e,b.popup.shared.getSink,b.popup),(e=>{const{sidebars:t}=e.ui.registry.getAll();z(se(t),n=>{const i=t[n],r=()=>Ae(k.from(e.queryCommandValue("ToggleSidebar")),n);e.ui.registry.addToggleButton(n,{icon:i.icon,tooltip:i.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,n),t.setActive(r())},onSetup:t=>{t.setActive(r());const n=()=>t.setActive(r());return e.on("ToggleSidebar",n),()=>{e.off("ToggleSidebar",n)}}})})})(e),dI(e,y,b.popup.shared),uP(e,c,o.sink,{backstage:b.popup}),jB(e,o.sink);const v={targetNode:e.getElement(),height:w(n.outerContainer)};return i.render(e,t,f,b.popup,v)};return{popups:{backstage:b.popup,getMothership:()=>KB("popups",l)},dialogs:{backstage:b.dialog,getMothership:()=>KB("dialogs",a)},renderUI:()=>{const n=_(),i=(()=>{const t=Qy(e),n=Ze(At(),t)&&"grid"===Ot(t,"display"),i={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(c),attributes:{...Dv.isRtl()?{dir:"rtl"}:{}}},behaviours:$l([ru.config({useFixed:()=>r.isDocked(m)})])},o={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ko([Jo(Io(),e=>{Dt(e.element,"width",document.body.clientWidth+"px")})])},s=Ma(Ai(i,n?o:{})),l=pC(s);return a.set(l),{sink:s,mothership:l}})(),s=Wy(e)?(()=>{const e={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(c),attributes:{...Dv.isRtl()?{dir:"rtl"}:{}}},behaviours:$l([ru.config({useFixed:()=>r.isDocked(m),getBounds:()=>t.getPopupSinkBounds()})])},n=Ma(e),i=pC(n);return l.set(i),{sink:n,mothership:i}})():(e=>(l.set(e.mothership),e))(i);o.dialogUi.set(i),o.popupUi.set(s),o.mainUi.set(n);const d={popupUi:s,dialogUi:i,mainUi:n,uiMotherships:o.getUiMotherships()};return x(d)}}},XB=A([cr("lazySink"),yr("dragBlockClass"),Ir("getBounds",Xn),Mr("useTabstopAt",T),Mr("firstTabstop",0),Mr("eventOrder",{}),Xu("modalBehaviours",[Tf]),tl("onExecute"),il("onEscape")]),JB={sketch:_},eN=A([kh({name:"draghandle",overrides:(e,t)=>({behaviours:$l([UB.config({mode:"mouse",getTarget:e=>Ia(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),Sh({schema:[cr("dom")],name:"title"}),Sh({factory:JB,schema:[cr("dom")],name:"close"}),Sh({factory:JB,schema:[cr("dom")],name:"body"}),kh({factory:JB,schema:[cr("dom")],name:"footer"}),Th({factory:{sketch:(e,t)=>({...e,dom:t.dom,components:t.components})},schema:[Mr("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Mr("components",[])],name:"blocker"})]),tN=np({name:"ModalDialog",configFields:XB(),partFields:eN(),factory:(e,t,n,i)=>{const r=Cc(),o=bs("modal-events"),s={...e.eventOrder,[Ro()]:[o].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:t,apis:{show:t=>{r.set(t);const n=e.lazySink(t).getOrDie(),o=i.blocker(),s=n.getSystem().build({...o,components:o.components.concat([Sa(t)]),behaviours:$l([Vf.config({}),Uf("dialog-blocker-events",[ss(ro(),()=>{aI.isBlocked(t)||Tf.focusIn(t)})])])});hu(n,s),Tf.focusIn(t)},hide:e=>{r.clear(),it(e.element).each(t=>{e.getSystem().getByDom(t).each(e=>{fu(e)})})},getBody:t=>jh(t,e,"body"),getFooter:t=>Hh(t,e,"footer"),setIdle:e=>{aI.unblock(e)},setBusy:(e,t)=>{aI.block(e,t)}},eventOrder:s,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:eh(e.modalBehaviours,[Nf.config({}),Tf.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),aI.config({getRoot:r.get}),Uf(o,[as(t=>{((e,t)=>{const n=Mt(e,"id").fold(()=>{const e=bs("dialog-label");return xt(t,"id",e),e},_);xt(e,"aria-labelledby",n)})(t.element,jh(t,e,"title").element)})])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,n)=>{e.setBusy(t,n)},setIdle:(e,t)=>{e.setIdle(t)}}}),nN=Ni([Vb,Yb].concat(FA)),iN=Qi,rN=[gA("button"),iA,Lr("align","end",["start","end"]),uA,dA,wr("buttonType",["primary","secondary"])],oN=[...rN,Qb],sN=[pr("type",["submit","cancel","custom"]),...oN],aN=[pr("type",["menu"]),nA,rA,iA,vr("items",nN),...rN],lN=[...rN,pr("type",["togglebutton"]),hr("tooltip"),iA,nA,Dr("active",!1)],cN=rr("type",{submit:sN,cancel:sN,custom:sN,menu:aN,togglebutton:lN}),dN=[Vb,Qb,pr("level",["info","warn","error","success"]),qb,Mr("url","")],uN=Ni(dN),hN=[Vb,Qb,dA,gA("button"),iA,cA,wr("buttonType",["primary","secondary","toolbar"]),uA],pN=Ni(hN),mN=[Vb,Yb],fN=mN.concat([oA]),gN=mN.concat([Gb,dA]),vN=Ni(gN),yN=Qi,bN=fN.concat([hA("auto")]),AN=Ni(bN),_N=Hi([Wb,Qb,qb]),wN=fN.concat([kr("storageKey","default")]),xN=Ni(wN),CN=Gi,EN=Ni(fN),MN=Gi,SN=mN.concat([kr("tag","textarea"),hr("scriptId"),hr("scriptUrl"),((e,t)=>Sr(e,t,Wi))("settings",void 0)]),TN=mN.concat([kr("tag","textarea"),mr("init")]),kN=Xi(e=>er("customeditor.old",Bi(TN),e).orThunk(()=>er("customeditor.new",Bi(SN),e))),LN=Gi,DN=Ni(fN),IN=Ui(Li),RN=e=>[Vb,ur("columns"),e],ON=[Vb,hr("html"),Lr("presets","presentation",["presentation","document"])],PN=Ni(ON),BN=fN.concat([Dr("border",!1),Dr("sandboxed",!0),Dr("streamContent",!1),Dr("transparent",!0)]),NN=Ni(BN),UN=Gi,FN=Ni(mN.concat([_r("height")])),zN=Ni([hr("url"),Ar("zoom"),Ar("cachedWidth"),Ar("cachedHeight")]),HN=fN.concat([_r("inputMode"),_r("placeholder"),Dr("maximized",!1),dA]),jN=Ni(HN),VN=Gi,YN=e=>[Vb,Gb,e,Lr("align","start",["start","center","end"])],GN=[Qb,Wb],QN=[Qb,vr("items",or(0,()=>$N))],$N=Fi([Ni(GN),Ni(QN)]),qN=fN.concat([vr("items",$N),dA]),WN=Ni(qN),KN=Gi,ZN=fN.concat([gr("items",[Qb,Wb]),Tr("size",1),dA]),XN=Ni(ZN),JN=Gi,eU=fN.concat([Dr("constrain",!0),dA]),tU=Ni(eU),nU=Ni([hr("width"),hr("height")]),iU=mN.concat([Gb,Tr("min",0),Tr("max",0)]),rU=Ni(iU),oU=Yi,sU=[Vb,vr("header",Gi),vr("cells",Ui(Gi))],aU=Ni(sU),lU=fN.concat([_r("placeholder"),Dr("maximized",!1),dA]),cU=Ni(lU),dU=Gi,uU=[pr("type",["directory","leaf"]),$b,hr("id"),br("menu",HD)],hU=Ni(uU),pU=uU.concat([vr("children",or(0,()=>Zi("type",{directory:mU,leaf:hU})))]),mU=Ni(pU),fU=Zi("type",{directory:mU,leaf:hU}),gU=[Vb,vr("items",fU),xr("onLeafAction"),xr("onToggleExpand"),Rr("defaultExpandedIds",[],Gi),_r("defaultSelectedId")],vU=Ni(gU),yU=fN.concat([Lr("filetype","file",["image","media","file"]),dA,_r("picker_text")]),bU=Ni(yU),AU=Ni([Wb,pA]),_U=e=>sr("items","items",{tag:"required",process:{}},Ui(Xi(t=>er(`Checking item of ${e}`,wU,t).fold(e=>ni.error(ir(e)),e=>ni.value(e))))),wU=Oi(()=>{return Zi("type",{alertbanner:uN,bar:Ni((e=_U("bar"),[Vb,e])),button:pN,checkbox:vN,colorinput:xN,colorpicker:EN,dropzone:DN,grid:Ni(RN(_U("grid"))),iframe:NN,input:jN,listbox:WN,selectbox:XN,sizeinput:tU,slider:rU,textarea:cU,urlinput:bU,customeditor:kN,htmlpanel:PN,imagepreview:FN,collection:AN,label:Ni(YN(_U("label"))),table:aU,tree:vU,panel:CU});var e}),xU=[Vb,Mr("classes",[]),vr("items",wU)],CU=Ni(xU),EU=[gA("tab"),$b,vr("items",wU)],MU=[Vb,gr("tabs",EU)],SU=Ni(MU),TU=oN,kU=cN,LU=Ni([hr("title"),dr("body",Zi("type",{panel:CU,tabpanel:SU})),kr("size","normal"),Rr("buttons",[],kU),Mr("initialData",{}),Ir("onAction",v),Ir("onChange",v),Ir("onSubmit",v),Ir("onClose",v),Ir("onCancel",v),Ir("onTabChange",v)]),DU=Ni([pr("type",["cancel","custom"]),...TU]),IU=Ni([hr("title"),hr("url"),Ar("height"),Ar("width"),Cr("buttons",DU),Ir("onAction",v),Ir("onCancel",v),Ir("onClose",v),Ir("onMessage",v)]),RU=e=>s(e)?[e].concat(q(ge(e),RU)):l(e)?q(e,RU):[],OU=e=>o(e.type)&&o(e.name),PU={checkbox:yN,colorinput:CN,colorpicker:MN,dropzone:IN,input:VN,iframe:UN,imagepreview:zN,selectbox:JN,sizeinput:nU,slider:oU,listbox:KN,size:nU,textarea:dU,urlinput:AU,customeditor:LN,collection:_N,togglemenuitem:iN},BU=e=>{const t=(e=>j(RU(e),OU))(e),n=q(t,e=>(e=>k.from(PU[e.type]))(e).fold(()=>[],t=>[dr(e.name,t)]));return Ni(n)},NU=e=>{var t;return{internalDialog:tr(er("dialog",LU,e)),dataValidator:BU(e),initialData:null!==(t=e.initialData)&&void 0!==t?t:{}}},UU={open:(e,t)=>{const n=NU(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:(e,t)=>e(tr(er("dialog",IU,t))),redial:e=>NU(e)};var FU=Object.freeze({__proto__:null,events:(e,t)=>{const n=(n,i)=>{e.updateState.each(e=>{const r=e(n,i);t.set(r)}),e.renderComponents.each(r=>{const o=r(i,t.get());(e.reuseDom?Lf:kf)(n,o)})};return Ko([Jo(_o(),(t,i)=>{const r=i;if(!r.universal){const i=e.channel;P(r.channels,i)&&n(t,r.data)}}),as((t,i)=>{e.initialData.each(e=>{n(t,e)})})])}});var zU=Object.freeze({__proto__:null,getState:(e,t,n)=>n}),HU=[cr("channel"),yr("renderComponents"),yr("updateState"),yr("initialData"),Dr("reuseDom",!0)];const jU=Wl({fields:HU,name:"reflecting",active:FU,apis:zU,state:Object.freeze({__proto__:null,init:()=>{const e=Pr(k.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(k.none())}}})}),VU=e=>{const t=[],n={};return le(e,(e,i)=>{e.fold(()=>{t.push(i)},e=>{n[i]=e})}),t.length>0?ni.error(t):ni.value(n)},YU=(e,t,n)=>{const i=Og(zM.sketch(i=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:F(e.items,e=>xk(i,e,t,n))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:$l([Tf.config({mode:"acyclic",useTabstopAt:C(mS)}),WM(i),XM(i,{postprocess:e=>VU(e).fold(e=>(console.error(e),{}),_)}),Uf("dialog-body-panel",[Jo(ro(),(e,t)=>{e.getSystem().broadcastOn([AS],{newFocus:k.some(t.event.target)})})])])}},GU=tp({name:"TabButton",configFields:[Mr("uid",void 0),cr("value"),sr("dom","dom",Ci(()=>({attributes:{role:"tab",id:bs("aria"),"aria-selected":"false"}})),ji()),yr("action"),Mr("domModification",{}),Xu("tabButtonBehaviours",[Vf,Tf,Zu]),cr("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:eg(e.action),behaviours:eh(e.tabButtonBehaviours,[Vf.config({}),Tf.config({mode:"execution",useSpace:!0,useEnter:!0}),Zu.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),QU=A([cr("tabs"),cr("dom"),Mr("clickToDismiss",!1),Xu("tabbarBehaviours",[Dp,Tf]),Xa(["tabClass","selectedClass"])]),$U=Lh({factory:GU,name:"tabs",unit:"tab",overrides:e=>{const t=(e,t)=>{Dp.dehighlight(e,t),Go(e,Ho(),{tabbar:e,button:t})},n=(e,t)=>{Dp.highlight(e,t),Go(e,zo(),{tabbar:e,button:t})};return{action:i=>{const r=i.getSystem().getByUid(e.uid).getOrDie(),o=Dp.isHighlighted(r,i);(o&&e.clickToDismiss?t:o?v:n)(r,i)},domModification:{classes:[e.markers.tabClass]}}}}),qU=A([$U]),WU=np({name:"Tabbar",configFields:QU(),partFields:qU(),factory:(e,t,n,i)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:eh(e.tabbarBehaviours,[Dp.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{xt(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{xt(t.element,"aria-selected","false")}}),Tf.config({mode:"flow",getInitial:e=>Dp.getHighlighted(e).map(e=>e.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),KU=tp({name:"Tabview",configFields:[Xu("tabviewBehaviours",[Nf])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:eh(e.tabviewBehaviours,[Nf.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),ZU=A([Mr("selectFirst",!0),el("onChangeTab"),el("onDismissTab"),Mr("tabs",[]),Xu("tabSectionBehaviours",[])]),XU=Sh({factory:WU,schema:[cr("dom"),fr("markers",[cr("tabClass"),cr("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),JU=Sh({factory:KU,name:"tabview"}),eF=A([XU,JU]),tF=np({name:"TabSection",configFields:ZU(),partFields:eF(),factory:(e,t,n,i)=>{const r=(t,n)=>{Hh(t,e,"tabbar").each(e=>{n(e).each(Qo)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ju(e.tabSectionBehaviours),events:Ko($([e.selectFirst?[as((e,t)=>{r(e,Dp.getFirst)})]:[],[Jo(zo(),(t,n)=>{(t=>{const n=Zu.getValue(t);Hh(t,e,"tabview").each(i=>{const r=G(e.tabs,e=>e.value===n);r.each(n=>{const r=n.view();Mt(t.element,"id").each(e=>{xt(i.element,"aria-labelledby",e)}),Nf.set(i,r),e.onChangeTab(i,t,r)})})})(n.event.button)}),Jo(Ho(),(t,n)=>{const i=n.event.button;e.onDismissTab(t,i)})]])),apis:{getViewItems:t=>Hh(t,e,"tabview").map(e=>Nf.contents(e)).getOr([]),showTab:(e,t)=>{r(e,e=>{const n=Dp.getCandidates(e);return G(n,e=>Zu.getValue(e)===t).filter(t=>!Dp.isHighlighted(e,t))})}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,n)=>{e.showTab(t,n)}}}),nF=(e,t)=>{Dt(e,"height",t+"px"),Dt(e,"flex-basis",t+"px")},iF=(e,t,n)=>{Ia(e,'[role="dialog"]').each(e=>{Oa(e,'[role="tablist"]').each(i=>{n.get().map(n=>(Dt(t,"height","0"),Dt(t,"flex-basis","0"),Math.min(n,((e,t,n)=>{const i=tt(e).dom,r=Ia(e,".tox-dialog-wrap").getOr(e);let o;o="fixed"===Ot(r,"position")?Math.max(i.clientHeight,window.innerHeight):Math.max(i.offsetHeight,i.scrollHeight);const s=Vt(t),a=t.dom.offsetLeft>=n.dom.offsetLeft+Zt(n)?Math.max(Vt(n),s):s,l=parseInt(Ot(e,"margin-top"),10)||0,c=parseInt(Ot(e,"margin-bottom"),10)||0;return o-(Vt(e)+l+c-a)})(e,t,i)))).each(e=>{nF(t,e)})})})},rF=e=>Oa(e,'[role="tabpanel"]'),oF=e=>{const t=Cc(),n=[as(n=>{const i=n.element;rF(i).each(r=>{Dt(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each(n=>{const i=((e,t,n)=>F(e,(i,r)=>{Nf.set(n,e[r].view());const o=t.dom.getBoundingClientRect();return Nf.set(n,[]),o.height}))(e,r,n),o=(e=>ne(ee(e,(e,t)=>e>t?-1:e<t?1:0)))(i);o.fold(t.clear,t.set)}),iF(i,r,t),Ft(r,"visibility"),((e,t)=>{ne(e).each(e=>tF.showTab(t,e.value))})(e,n),requestAnimationFrame(()=>{iF(i,r,t)})})}),Jo(Io(),e=>{const n=e.element;rF(n).each(e=>{iF(n,e,t)})}),Jo(RC,(e,n)=>{const i=e.element;rF(i).each(e=>{const n=rc(mt(e));Dt(e,"visibility","hidden");const r=Bt(e,"height").map(e=>parseInt(e,10));Ft(e,"height"),Ft(e,"flex-basis");const o=e.dom.getBoundingClientRect().height;r.forall(e=>o>e)?(t.set(o),iF(i,e,t)):r.each(t=>{nF(e,t)}),Ft(e,"visibility"),n.each(tc)})})];return{extraEvents:n,selectFirst:!1}},sF="send-data-to-section",aF="send-data-to-view",lF=(e,t,n)=>{const i=Pr({}),r=e=>{const t=Zu.getValue(e),n=VU(t).getOr({}),r=i.get(),o=Ai(r,n);i.set(o)},o=e=>{const t=i.get();Zu.setValue(e,t)},s=Pr(null),a=F(e.tabs,e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[wa(n.shared.providers.translate(e.title))],view:()=>[zM.sketch(i=>({dom:{tag:"div",classes:["tox-form"]},components:F(e.items,e=>xk(i,e,t,n)),formBehaviours:$l([Tf.config({mode:"acyclic",useTabstopAt:C(mS)}),Uf("TabView.form.events",[as(o),ls(r)]),Jl.config({channels:Fr([{key:sF,value:{onReceive:r}},{key:aF,value:{onReceive:o}}])})])}))]})),l=oF(a);return tF.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,n)=>{const i=Zu.getValue(t);Go(e,IC,{name:i,oldName:s.get()}),s.set(i)},tabs:a,components:[tF.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[WU.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:$l([bC.config({})])}),tF.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:$l([Uf("tabpanel",l.extraEvents),Tf.config({mode:"acyclic"}),sp.config({find:e=>ne(tF.getViewItems(e))}),JM(k.none(),e=>(e.getSystem().broadcastOn([sF],{}),i.get()),(e,t)=>{i.set(t),e.getSystem().broadcastOn([aF],{})})])})},cF=(e,t,n,i,r)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...n.map(e=>({id:e})).getOr({}),...r?{"aria-live":"polite"}:{}}},components:[],behaviours:$l([KM(0),jU.config({channel:`${vS}-${t}`,updateState:(e,t)=>k.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{const t=e.body;return"tabpanel"===t.type?[lF(t,e.initialData,i)]:[YU(t,e.initialData,i)]},initialData:e})])}),dF=$v.deviceType.isTouch(),uF=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),hF=(e,t)=>tN.parts.close(Ig.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:$l([bC.config({})])})),pF=()=>tN.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),mF=(e,t)=>tN.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Rg(`<p>${Lv(t.translate(e))}</p>`)}]}]}),fF=e=>tN.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),gF=(e,t)=>[hC.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),hC.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],vF=e=>{const t="tox-dialog",n=t+"-wrap",i=n+"__backdrop",r=t+"__disable-scroll";return tN.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),k.some(!0)),useTabstopAt:e=>!mS(e),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:Rg(`<div class="${n}"></div>`),components:[{dom:{tag:"div",classes:dF?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:n,modalBehaviours:$l([Vf.config({}),Uf("dialog-events",e.dialogEvents.concat([ss(ro(),(e,t)=>{aI.isBlocked(e)||Tf.focusIn(e)}),Jo(No(),(e,t)=>{e.getSystem().broadcastOn([AS],{newFocus:t.event.newFocus})})])),Uf("scroll-lock",[as(()=>{ta(At(),r)}),ls(()=>{ia(At(),r)})]),...e.extraBehaviours]),eventOrder:{[wo()]:["dialog-events"],[Ro()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Oo()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},yF=e=>Ig.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:$l([bC.config({})]),components:[zv("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:e=>{Yo(e,SC)}}),bF=(e,t,n,i)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...n.map(e=>({id:e})).getOr({})}},components:[],behaviours:$l([jU.config({channel:`${gS}-${t}`,initialData:e,renderComponents:e=>[wa(i.translate(e.title))]})])}),AF=()=>({dom:Rg('<div class="tox-dialog__draghandle"></div>')}),_F=(e,t,n)=>((e,t,n)=>{const i=tN.parts.title(bF(e,t,k.none(),n)),r=tN.parts.draghandle(AF()),o=tN.parts.close(yF(n)),s=[i].concat(e.draggable?[r]:[]).concat([o]);return hC.sketch({dom:Rg('<div class="tox-dialog__header"></div>'),components:s})})({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers),wF=(e,t,n,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:t,components:[{dom:Rg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),xF=(e,t,n)=>({onClose:()=>n.closeWindow(),onBlock:n=>{const i=Oa(e().element,".tox-dialog__header").map(e=>Vt(e));tN.setBusy(e(),(e,r)=>wF(n.message,r,t,i))},onUnblock:()=>{tN.setIdle(e())}}),CF="tox-dialog--fullscreen",EF="tox-dialog--width-lg",MF="tox-dialog--width-md",SF=e=>{switch(e){case"large":return k.some(EF);case"medium":return k.some(MF);default:return k.none()}},TF=(e,t)=>{const n=Pe.fromDom(t.element.dom);oa(n,CF)||(aa(n,[EF,MF]),SF(e).each(e=>ta(n,e)))},kF=(e,t)=>{const n=Pe.fromDom(e.element.dom),i=la(n),r=G(i,e=>e===EF||e===MF).or(SF(t));((e,t)=>{z(t,t=>{ra(e,t)})})(n,[CF,...r.toArray()])},LF=(e,t,n)=>Ma(vF({...e,firstTabstop:1,lazySink:n.shared.getSink,extraBehaviours:[tS({}),...e.extraBehaviours],onEscape:e=>{Yo(e,SC)},dialogEvents:t,eventOrder:{[_o()]:[jU.name(),Jl.name()],[Ro()]:["scroll-lock",jU.name(),"messages","dialog-events","alloy.base.behaviour"],[Oo()]:["alloy.base.behaviour","dialog-events","messages",jU.name(),"scroll-lock"]}})),DF=(e,t={})=>F(e,e=>"menu"===e.type?(e=>{const n=F(e.items,e=>{const n=ve(t,e.name).getOr(Pr(!1));return{...e,storage:n}});return{...e,items:n}})(e):e),IF=e=>Y(e,(e,t)=>{if("menu"===t.type){return Y(t.items,(e,t)=>(e[t.name]=t.storage,e),e)}return e},{}),RF=(e,t)=>[is(ro(),pS),e(MC,(e,n,i,r)=>{rc(mt(r.element)).fold(v,nc),t.onClose(),n.onClose()}),e(SC,(e,t,n,i)=>{t.onCancel(e),Yo(i,MC)}),Jo(DC,(e,n)=>t.onUnblock()),Jo(LC,(e,n)=>t.onBlock(n.event))],OF=(e,t,n)=>{const i=(t,n)=>Jo(t,(t,i)=>{r(t,(r,o)=>{n(e(),r,i.event,t)})}),r=(e,t)=>{jU.getState(e).get().each(n=>{t(n.internalDialog,e)})};return[...RF(i,t),i(kC,(e,t)=>t.onSubmit(e)),i(EC,(e,t,n)=>{t.onChange(e,{name:n.name})}),i(TC,(e,t,i,r)=>{const o=()=>r.getSystem().isConnected()?Tf.focusIn(r):void 0,s=e=>St(e,"disabled")||Mt(e,"aria-disabled").exists(e=>"true"===e),a=mt(r.element),l=rc(a);t.onAction(e,{name:i.name,value:i.value}),rc(a).fold(o,e=>{s(e)||l.exists(t=>Xe(e,t)&&s(t))?o():n().toOptional().filter(t=>!Xe(t.element,e)).each(o)})}),i(IC,(e,t,n)=>{t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})}),ls(t=>{const n=e();Zu.setValue(t,n.getData())})]},PF=(e,t)=>{const n=t.map(e=>e.footerButtons).getOr([]),i=H(n,e=>"start"===e.align),r=(e,t)=>hC.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${e}`]},components:F(t,e=>e.memento.asSpec())});return[r("start",i.pass),r("end",i.fail)]},BF=(e,t,n)=>({dom:Rg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:$l([jU.config({channel:`${yS}-${t}`,initialData:e,updateState:(e,t)=>{const i=F(t.buttons,e=>{const t=Og(((e,t)=>ok(e,e.type,t))(e,n));return{name:e.name,align:e.align,memento:t}});return k.some({lookupByName:t=>((e,t,n)=>G(t,e=>e.name===n).bind(t=>t.memento.getOpt(e)))(e,i,t),footerButtons:i})},renderComponents:PF})])}),NF=(e,t,n)=>tN.parts.footer(BF(e,t,n)),UF=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const n=sp.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return zM.getField(n,t).orThunk(()=>{const n=e.getFooter().bind(e=>jU.getState(e).get());return n.bind(e=>e.lookupByName(t))})}return k.none()},FF=(e,t,n)=>{const i=t=>{const n=e.getRoot();n.getSystem().isConnected()&&t(n)},r={getData:()=>{const t=e.getRoot(),i=t.getSystem().isConnected()?e.getFormWrapper():t;return{...Zu.getValue(i),...ce(n,e=>e.get())}},setData:t=>{i(i=>{const o=r.getData(),s=Ai(o,t),a=((e,t)=>{const n=e.getRoot();return jU.getState(n).get().map(e=>tr(er("data",e.dataValidator,t))).getOr(t)})(e,s),l=e.getFormWrapper();Zu.setValue(l,a),le(n,(e,t)=>{ye(s,t)&&e.set(s[t])})})},setEnabled:(t,n)=>{UF(e,t).each(n?Ap.enable:Ap.disable)},focus:t=>{UF(e,t).each(Vf.focus)},block:e=>{if(!o(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(t=>{Go(t,LC,{message:e})})},unblock:()=>{i(e=>{Yo(e,DC)})},showTab:t=>{i(n=>{const i=e.getBody();jU.getState(i).get().exists(e=>e.isTabPanel())&&sp.getCurrent(i).each(e=>{tF.showTab(e,t)})})},redial:o=>{i(i=>{const s=e.getId(),a=t(o),l=DF(a.internalDialog.buttons,n);i.getSystem().broadcastOn([`${fS}-${s}`],a),i.getSystem().broadcastOn([`${gS}-${s}`],a.internalDialog),i.getSystem().broadcastOn([`${vS}-${s}`],a.internalDialog),i.getSystem().broadcastOn([`${yS}-${s}`],{...a.internalDialog,buttons:l}),r.setData(a.initialData)})},close:()=>{i(e=>{Yo(e,MC)})},toggleFullscreen:e.toggleFullscreen};return r},zF=(e,t,n)=>{const i=bs("dialog"),r=e.internalDialog,o=_F(r.title,i,n),s=Pr(r.size),a=SF(s.get()).toArray(),l=((e,t,n)=>{const i=cF(e,t,k.none(),n,!1);return tN.parts.body(i)})({body:r.body,initialData:r.initialData},i,n),c=DF(r.buttons),d=IF(c),u=Ce(0!==c.length,NF({buttons:c},i,n)),h=OF(()=>g,xF(()=>m,n.shared.providers,t),n.shared.getSink),p={id:i,header:o,body:l,footer:u,extraClasses:a,extraBehaviours:[jU.config({channel:`${fS}-${i}`,updateState:(e,t)=>(s.set(t.internalDialog.size),TF(t.internalDialog.size,e),k.some(t)),initialData:e})],extraStyles:{}},m=LF(p,h,n),f={getId:A(i),getRoot:A(m),getBody:()=>tN.getBody(m),getFooter:()=>tN.getFooter(m),getFormWrapper:()=>{const e=tN.getBody(m);return sp.getCurrent(e).getOr(e)},toggleFullscreen:()=>{kF(m,s.get())}},g=FF(f,t.redial,d);return{dialog:m,instanceApi:g}},HF=(e,t,n,i=!1,r)=>{const o=bs("dialog"),s=bs("dialog-label"),a=bs("dialog-content"),l=e.internalDialog,c=Pr(l.size),d=SF(c.get()).toArray(),u=Og(((e,t,n,i)=>hC.sketch({dom:Rg('<div class="tox-dialog__header"></div>'),components:[bF(e,t,k.some(n),i),AF(),yF(i)],containerBehaviours:$l([UB.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>Pa(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:l.title,draggable:!0},o,s,n.shared.providers)),h=Og(((e,t,n,i,r)=>cF(e,t,k.some(n),i,r))({body:l.body,initialData:l.initialData},o,a,n,i)),p=DF(l.buttons),m=IF(p),f=Ce(0!==p.length,Og(((e,t,n)=>BF(e,t,n))({buttons:p},o,n))),g=OF(()=>y,{onBlock:e=>{aI.block(v,(t,i)=>{const r=u.getOpt(v).map(e=>Vt(e.element));return wF(e.message,i,n.shared.providers,r)})},onUnblock:()=>{aI.unblock(v)},onClose:()=>t.closeWindow()},n.shared.getSink),v=Ma({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...d],attributes:{role:"dialog","aria-labelledby":s}},eventOrder:{[_o()]:[jU.name(),Jl.name()],[wo()]:["execute-on-form"],[Ro()]:["reflecting","execute-on-form"]},behaviours:$l([Tf.config({mode:"cyclic",onEscape:e=>(Yo(e,MC),k.some(!0)),useTabstopAt:e=>!mS(e)&&("button"!==He(e)||"disabled"!==Et(e,"disabled")),firstTabstop:1}),jU.config({channel:`${fS}-${o}`,updateState:(e,t)=>(c.set(t.internalDialog.size),TF(t.internalDialog.size,e),r(),k.some(t)),initialData:e}),Vf.config({}),Uf("execute-on-form",g.concat([ss(ro(),(e,t)=>{Tf.focusIn(e)}),Jo(No(),(e,t)=>{e.getSystem().broadcastOn([AS],{newFocus:t.event.newFocus})})])),aI.config({getRoot:()=>k.some(v)}),Nf.config({}),tS({})]),components:[u.asSpec(),h.asSpec(),...f.map(e=>e.asSpec()).toArray()]}),y=FF({getId:A(o),getRoot:A(v),getFooter:()=>f.map(e=>e.get(v)),getBody:()=>h.get(v),getFormWrapper:()=>{const e=h.get(v);return sp.getCurrent(e).getOr(e)},toggleFullscreen:()=>{kF(v,c.get())}},t.redial,m);return{dialog:v,instanceApi:y}};var jF=tinymce.util.Tools.resolve("tinymce.util.URI");const VF=["insertContent","setContent","execCommand","close","block","unblock"],YF=e=>s(e)&&-1!==VF.indexOf(e.mceAction),GF=(e,t,n,i)=>{const r=bs("dialog"),a=_F(e.title,r,i),l=(e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[uS(k.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:$l([bC.config({}),Vf.config({})])})]}],behaviours:$l([Tf.config({mode:"acyclic",useTabstopAt:C(mS)})])};return tN.parts.body(t)})(e),c=e.buttons.bind(e=>0===e.length?k.none():k.some(NF({buttons:e},r,i))),u=((e,t)=>{const n=(t,n)=>Jo(t,(t,r)=>{i(t,(i,o)=>{n(e(),i,r.event,t)})}),i=(e,t)=>{jU.getState(e).get().each(n=>{t(n,e)})};return[...RF(n,t),n(TC,(e,t,n)=>{t.onAction(e,{name:n.name})})]})(()=>A,xF(()=>b,i.shared.providers,t)),h={...e.height.fold(()=>({}),e=>({height:e+"px","max-height":e+"px"})),...e.width.fold(()=>({}),e=>({width:e+"px","max-width":e+"px"}))},m=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],f=new jF(e.url,{base_uri:new jF(window.location.href)}),g=`${f.protocol}://${f.host}${f.port?":"+f.port:""}`,v=xc(),y=[jU.config({channel:`${fS}-${r}`,updateState:(e,t)=>k.some(t),initialData:e}),Uf("messages",[as(()=>{const t=Mc(Pe.fromDom(window),"message",t=>{if(f.isSameOrigin(new jF(t.raw.origin))){const i=t.raw.data;YF(i)?((e,t,n)=>{switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":const i=!!d(n.ui)&&n.ui;e.execCommand(n.cmd,i,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}})(n,A,i):(e=>!YF(e)&&s(e)&&ye(e,"mceAction"))(i)&&e.onMessage(A,i)}});v.set(t)}),ls(v.clear)]),Jl.config({channels:{[bS]:{onReceive:(e,t)=>{Oa(e.element,"iframe").each(e=>{const n=e.dom.contentWindow;p(n)&&n.postMessage(t,g)})}}}})],b=LF({id:r,header:a,body:l,footer:c,extraClasses:m,extraBehaviours:y,extraStyles:h},u,i),A=(e=>{const t=t=>{e.getSystem().isConnected()&&t(e)};return{block:e=>{if(!o(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(t=>{Go(t,LC,{message:e})})},unblock:()=>{t(e=>{Yo(e,DC)})},close:()=>{t(e=>{Yo(e,MC)})},sendMessage:e=>{t(t=>{t.getSystem().broadcastOn([bS],e)})}}})(b);return{dialog:b,instanceApi:A}},QF=(e,t)=>tr(er("data",t,e)),$F=e=>Jx(e,".tox-alert-dialog")||Jx(e,".tox-confirm-dialog"),qF=(e,t,n)=>t&&n?[]:[TD.config({contextual:{lazyContext:()=>k.some(Wn(Pe.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:t=>Zx(e,t.element).map(e=>({bounds:Xx(e),optScrollEnv:k.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:qt(e.element).top})})).getOrThunk(()=>({bounds:Xn(),optScrollEnv:k.none()}))})],WF=e=>{const t=e.editor,n=qy(t),i=(e=>{const t=e.shared;return{open:(n,i)=>{const r=()=>{tN.hide(l),i()},o=Og(ok({name:"close-alert",text:"OK",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"cancel",e)),s=pF(),a=hF(r,t.providers),l=Ma(vF({lazySink:()=>t.getSink(),header:uF(s,a),body:mF(n,t.providers),footer:k.some(fF(gF([],[o.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Jo(SC,r)],eventOrder:{}}));tN.show(l);const c=o.get(l);Vf.focus(c)}}})(e.backstages.dialog),r=(e=>{const t=e.shared;return{open:(n,i)=>{const r=e=>{tN.hide(c),i(e)},o=Og(ok({name:"yes",text:"Yes",primary:!0,buttonType:k.some("primary"),align:"end",enabled:!0,icon:k.none()},"submit",e)),s=ok({name:"no",text:"No",primary:!1,buttonType:k.some("secondary"),align:"end",enabled:!0,icon:k.none()},"cancel",e),a=pF(),l=hF(()=>r(!1),t.providers),c=Ma(vF({lazySink:()=>t.getSink(),header:uF(a,l),body:mF(n,t.providers),footer:k.some(fF(gF([],[s,o.asSpec()]))),onEscape:()=>r(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Jo(SC,()=>r(!1)),Jo(kC,()=>r(!0))],eventOrder:{}}));tN.show(c);const d=o.get(c);Vf.focus(d)}}})(e.backstages.dialog),o=(n,i)=>UU.openUrl(n=>{const r=GF(n,{closeWindow:()=>{tN.hide(r.dialog),i(r.instanceApi)}},t,e.backstages.dialog);return tN.show(r.dialog),r.instanceApi},n),s=(t,n)=>UU.open((t,i,r)=>{const o=i,s=zF({dataValidator:r,initialData:o,internalDialog:t},{redial:UU.redial,closeWindow:()=>{tN.hide(s.dialog),n(s.instanceApi)}},e.backstages.dialog);return tN.show(s.dialog),s.instanceApi.setData(o),s.instanceApi},t),a=(i,r,o,s)=>UU.open((i,a,l)=>{const c=QF(a,l),d=Cc(),u=e.backstages.popup.shared.header.isPositionedAtTop(),h=()=>d.on(e=>{Lg.reposition(e),n&&u||TD.refresh(e)}),p=HF({dataValidator:l,initialData:c,internalDialog:i},{redial:UU.redial,closeWindow:()=>{d.on(Lg.hide),t.off("ResizeEditor",h),d.clear(),o(p.instanceApi)}},e.backstages.popup,s.ariaAttrs,h),m=Ma(Lg.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:s.persistent?{event:"doNotDismissYet"}:{},...u?{}:{fireRepositionEventInstead:{}},inlineBehaviours:$l([Uf("window-manager-inline-events",[Jo(Po(),(e,t)=>{Yo(p.dialog,SC)})]),...qF(t,n,u)]),isExtraPart:(e,t)=>$F(t)}));d.set(m);return Lg.showWithinBounds(m,Sa(p.dialog),{anchor:r},()=>{const e=t.inline?At():Pe.fromDom(t.getContainer()),n=Wn(e);return k.some(n)}),n&&u||(TD.refresh(m),t.on("ResizeEditor",h)),p.instanceApi.setData(c),Tf.focusIn(p.dialog),p.instanceApi},i),l=(n,i,r,o)=>UU.open((n,s,a)=>{const l=QF(s,a),c=Cc(),d=e.backstages.popup.shared.header.isPositionedAtTop(),u=()=>c.on(e=>{Lg.reposition(e),TD.refresh(e)}),h=HF({dataValidator:a,initialData:l,internalDialog:n},{redial:UU.redial,closeWindow:()=>{c.on(Lg.hide),t.off("ResizeEditor ScrollWindow ElementScroll",u),c.clear(),r(h.instanceApi)}},e.backstages.popup,o.ariaAttrs,u),p=Ma(Lg.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:o.persistent?{event:"doNotDismissYet"}:{},...d?{}:{fireRepositionEventInstead:{}},inlineBehaviours:$l([Uf("window-manager-inline-events",[Jo(Po(),(e,t)=>{Yo(h.dialog,SC)})]),TD.config({contextual:{lazyContext:()=>k.some(Wn(Pe.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:e=>Zx(t,e.element).map(e=>({bounds:Xx(e),optScrollEnv:k.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:qt(e.element).top})})).getOrThunk(()=>({bounds:Xn(),optScrollEnv:k.none()}))})]),isExtraPart:(e,t)=>$F(t)}));c.set(p);return Lg.showWithinBounds(p,Sa(h.dialog),{anchor:i},()=>e.backstages.popup.shared.getSink().toOptional().bind(e=>{const n=Zx(t,e.element).map(e=>Xx(e)).getOr(Xn()),i=Wn(Pe.fromDom(t.getContentAreaContainer())),r=Zn(i,n);return k.some(qn(r.x,r.y,r.width,r.height-15))})),TD.refresh(p),t.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",u),h.instanceApi.setData(l),Tf.focusIn(h.dialog),h.instanceApi},n);return{open:(t,n,i)=>{if(!u(n)){if("toolbar"===n.inline)return a(t,e.backstages.popup.shared.anchors.inlineDialog(),i,n);if("bottom"===n.inline)return l(t,e.backstages.popup.shared.anchors.inlineBottomDialog(),i,n);if("cursor"===n.inline)return a(t,e.backstages.popup.shared.anchors.cursor(),i,n)}return s(t,i)},openUrl:(e,t)=>o(e,t),alert:(e,t)=>{i.open(e,t)},close:e=>{e.close()},confirm:(e,t)=>{r.open(e,t)}}},KF=e=>{Kv(e),(e=>{const t=e.options.register,n=e=>g(e,o)?{value:Mw(e),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=e=>f(e)&&e>0?{value:e,valid:!0}:{valid:!1,message:"Must be a positive number."};t("color_map",{processor:n,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:n}),t("color_map_foreground",{processor:n}),t("color_cols",{processor:i,default:Lw(e)}),t("color_cols_foreground",{processor:i,default:Dw(e,Cw)}),t("color_cols_background",{processor:i,default:Dw(e,Ew)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:Tw}),t("color_default_background",{processor:"string",default:Tw})})(e),(e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>!1===e?{value:[],valid:!0}:o(e)||g(e,o)?{value:SP(e),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)};Jn.add("silver",e=>{KF(e);let t=()=>Xn();const{dialogs:n,popups:i,renderUI:r}=ZB(e,{getPopupSinkBounds:()=>t()});$x(e,i.backstage.shared);const o=WF({editor:e,backstages:{popup:i.backstage,dialog:n.backstage}});return{renderUI:()=>{const n=r();return Zx(e,i.getMothership().element).each(e=>{t=()=>Xx(e)}),n},getWindowManagerImpl:A(o),getNotificationManagerImpl:()=>((e,t,n)=>{const i=t.backstage.shared,r=()=>{const t=Wn(Pe.fromDom(e.getContentAreaContainer())),n=Xn(),i=yl(n.x,t.x,t.right),r=yl(n.y,t.y,t.bottom),o=Math.max(t.right,n.right),s=Math.max(t.bottom,n.bottom);return k.some(qn(i,r,o-i,s-r))};return{open:(t,o)=>{const s=()=>{o(),Lg.hide(l)},a=Ma(jv.sketch({text:t.text,level:P(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:t.icon,closeButton:t.closeButton,onAction:s,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),l=Ma(Lg.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));n.add(l),f(t.timeout)&&t.timeout>0&&Dg.setEditorTimeout(e,()=>{s()},t.timeout);const c={close:s,reposition:()=>{const t=Sa(a),n={maxHeightFunction:Fc()},o=e.notificationManager.getNotifications();if(o[0]===c){const e={...i.anchors.banner(),overrides:n};Lg.showWithinBounds(l,t,{anchor:e},r)}else O(o,c).each(e=>{const i=o[e-1].getEl(),s={type:"node",root:At(),node:k.some(Pe.fromDom(i)),overrides:n,layouts:{onRtl:()=>[Il],onLtr:()=>[Il]}};Lg.showWithinBounds(l,t,{anchor:s},r)})},text:e=>{jv.updateText(a,e)},settings:t,getEl:()=>a.element.dom,progressBar:{value:e=>{jv.updateProgress(a,e)}}};return c},close:e=>{e.close()},getArgs:e=>e.settings}})(e,{backstage:i.backstage},i.getMothership())}})}()},9660:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,A:()=>c});var i,r=n(3074),o=n(4640);!function(e){e[e.Solid=0]="Solid",e[e.LinearGradient=1]="LinearGradient",e[e.RadialGradient=2]="RadialGradient"}(i||(i={}));class s extends o.eaF{constructor(){super(new a,new l),this.frustumCulled=!1,this.renderOrder=-1/0,this.matrixAutoUpdate=!1}dispose(){this.geometry.dispose(),this.material.dispose()}updateMatrixWorld(e){}}class a extends o.LoY{constructor(){super();const e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),t=new o.eB$(e,5);this.setIndex([0,1,2,0,2,3]),this.setAttribute("position",new o.eHs(t,3,0,!1)),this.setAttribute("uv",new o.eHs(t,2,3,!1))}}class l extends o.D$Q{constructor(){super(...arguments),this.depthTest=!1,this.depthWrite=!1,this.transparent=!1,this.uniforms={style:{value:i.LinearGradient},color0:{value:new o.Pq0(.15,.2,.25)},color1:{value:new o.Pq0(0,0,0)},noise:{value:.02}},this.vertexShader=["precision highp float;","attribute vec3 position;","attribute vec2 uv;","varying vec2 ndc;","void main() {","  ndc = position.xy;","  gl_Position = vec4(position, 1.0);","}"].join("\n"),this.fragmentShader=["precision highp float;","uniform vec3 color0;","uniform vec3 color1;","uniform float noise;","uniform int style;","varying vec2 ndc;","float rand(vec2 co) {","float dt = dot(co.xy ,vec2(12.9898, 78.233));","float sn = mod(dt, 3.14);","return fract(sin(sn) * 43758.5453);","}","void main() {","  float f = style == 0 ? 0.0 : (style == 1 ? ndc.y * 0.5 + 0.5 : length(ndc) * 0.707);","  gl_FragColor = vec4(mix(color0, color1, f) + noise * rand(ndc), 1.0);","}"].join("\n")}set style(e){this.uniforms.style.value=e}get style(){return this.uniforms.style.value}set color0(e){if(e instanceof o.Q1f){const t=this.uniforms.color0.value;t.x=e.r,t.y=e.g,t.z=e.b}else this.uniforms.color0.value.copy(e)}get color0(){return this.uniforms.color0.value}set color1(e){if(e instanceof o.Q1f){const t=this.uniforms.color1.value;t.x=e.r,t.y=e.g,t.z=e.b}else this.uniforms.color1.value.copy(e)}get color1(){return this.uniforms.color1.value}set noise(e){this.uniforms.noise.value=e}get noise(){return this.uniforms.noise.value}}class c extends r.Ay{constructor(e,t){super(e,t),this.ins=this.addInputs(c.backgroundIns),this.object3D=new s}get background(){return this.object3D}update(e){super.update(e);const t=this.ins,n=this.background.material;return t.style.changed&&(n.style=t.style.getValidatedValue()),t.color0.changed&&n.color0.fromArray(t.color0.value),t.color1.changed&&n.color1.fromArray(t.color1.value),t.noise.changed&&(n.noise=t.noise.value),!0}dispose(){this.background.dispose(),super.dispose()}}c.typeName="CBackground",c.backgroundIns={style:r.gK.Enum("Background.Style",i,i.RadialGradient),color0:r.gK.ColorRGB("Background.Color0",[.2,.25,.3]),color1:r.gK.ColorRGB("Background.Color1",[.01,.03,.05]),noise:r.gK.Number("Background.Noise",{min:0,max:1,bar:!0,preset:.02})}},9683:(e,t,n)=>{"use strict";n.d(t,{A:()=>qe});var i=n(319),r=n(2791),o=n(2652),s=n(6763),a=n(2867),l=n(6773),c=n(920),d=n(9293),u=n(2997),h=n(8604),p=n(161);class m{constructor(e){this.next=null,this.activePositions=[],this.activeType="",this.centerX=0,this.centerY=0,this.startX=0,this.startY=0,this.isDragging=!1,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUpOrCancel=this.onPointerUpOrCancel.bind(this),this.onDoubleClick=this.onDoubleClick.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onWheel=this.onWheel.bind(this),this.onKeyDown=this.onKeyDown.bind(this),e&&(e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUpOrCancel),e.addEventListener("pointercancel",this.onPointerUpOrCancel),e.addEventListener("contextmenu",this.onContextMenu),e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown))}onPointerDown(e){if(this.activeType&&e.pointerType!==this.activeType)return;0===this.activePositions.length&&(this.startX=e.clientX,this.startY=e.clientY,this.isDragging=!1),this.activeType=e.pointerType,this.activePositions.push({id:e.pointerId,clientX:e.clientX,clientY:e.clientY});const t=this.createManipPointerEvent(e,"pointer-down");this.sendPointerEvent(t)&&e.stopPropagation()}onPointerMove(e){const t=this.activePositions;for(let n=0,i=t.length;n<i;++n){const i=t[n];e.pointerId===i.id&&(i.clientX=e.clientX,i.clientY=e.clientY)}if(t.length>0&&!this.isDragging){Math.abs(e.clientX-this.startX)+Math.abs(e.clientY-this.startY)>4&&(this.isDragging=!0)}const n=t.length?"pointer-move":"pointer-hover",i=this.createManipPointerEvent(e,n);this.sendPointerEvent(i)&&e.stopPropagation()}onPointerUpOrCancel(e){const t=this.activePositions;let n=!1;for(let i=0,r=t.length;i<r;++i)if(e.pointerId===t[i].id){t.splice(i,1),n=!0;break}if(!n)return;const i=this.createManipPointerEvent(e,"pointer-up");0===t.length&&(this.activeType=""),this.sendPointerEvent(i)&&e.stopPropagation(),e.preventDefault()}onDoubleClick(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"double-click"))&&e.preventDefault()}onContextMenu(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"context-menu")),e.preventDefault()}onWheel(e){this.sendTriggerEvent(this.createManipTriggerEvent(e,"wheel"))&&e.preventDefault()}onKeyDown(e){this.sendKeyboardEvent(this.createManipKeyboardEvent(e))}createManipPointerEvent(e,t){let n=0,i=0,r=0,o=0,s=0,a=0;const l=this.activePositions,c=l.length;if(c>0){for(let e=0;e<c;++e)n+=l[e].clientX,i+=l[e].clientY;n/=c,i/=c,"pointer-move"!==t&&"pointer-hover"!==t||(s=n-this.centerX,a=i-this.centerY),this.centerX=n,this.centerY=i}else n=this.centerX,i=this.centerY;const d=e.currentTarget;if(d instanceof Element){const t=d.getBoundingClientRect();r=e.clientX-t.left,o=e.clientY-t.top}return{originalEvent:e,type:t,source:e.pointerType,isPrimary:e.isPrimary,isDragging:this.isDragging,activePositions:l,pointerCount:c,centerX:n,centerY:i,localX:r,localY:o,movementX:s,movementY:a,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}createManipTriggerEvent(e,t){let n=0;"wheel"===t&&(n=e.deltaY);let i=0,r=0;const o=e.currentTarget;if(o instanceof Element){const t=o.getBoundingClientRect();i=e.clientX-t.left,r=e.clientY-t.top}return{originalEvent:e,type:t,wheel:n,centerX:e.clientX,centerY:e.clientY,localX:i,localY:r,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}createManipKeyboardEvent(e){return{originalEvent:e,type:"keydown",key:e.code,centerX:0,centerY:0,localX:0,localY:0,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}}sendPointerEvent(e){return this.next&&this.next.onPointer(e)}sendTriggerEvent(e){return this.next&&this.next.onTrigger(e)}sendKeyboardEvent(e){return this.next&&this.next.onKeypress(e)}}var f,g=n(4482),v=n(5933),y=(n(2709),function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s});!function(e){e[e.Single=0]="Single",e[e.HorizontalSplit=1]="HorizontalSplit",e[e.VerticalSplit=2]="VerticalSplit",e[e.Quad=3]="Quad"}(f||(f={}));let b=class extends s.Ay{constructor(){super(...arguments),this.layout=f.Single,this.horizontalPosition=.5,this.verticalPosition=.5}firstConnected(){this.classList.add("ff-quad-splitter")}render(){const e=this.layout;if(e===f.Single)return s.qy``;const t=[];return e!==f.HorizontalSplit&&e!==f.Quad||t.push(s.qy`
                <div class="ff-horizontal" style="position:absolute; top:0; bottom:0; left:0; right:0; display:flex;">
                    <div class="ff-left" style="flex:1 1;"></div>
                    <ff-splitter direction="horizontal" position=${this.horizontalPosition} @ff-splitter-change=${this.onSplitterChange}></ff-splitter>
                    <div style="flex:1 1;"></div>
                </div>
            `),e!==f.VerticalSplit&&e!==f.Quad||t.push(s.qy`
                <div class="ff-vertical" style="position:absolute; top:0; bottom:0; left:0; right:0; display:flex; flex-direction: column">
                    <div class="ff-top" style="flex:1 1;"></div>
                    <ff-splitter direction="vertical" position=${this.verticalPosition} @ff-splitter-change=${this.onSplitterChange}></ff-splitter>
                    <div style="flex:1 1;"></div>
                </div>
            `),s.qy`${t}`}onSplitterChange(e){"horizontal"===e.detail.direction?this.horizontalPosition=e.detail.position:this.verticalPosition=e.detail.position,this.onChange&&this.onChange({layout:this.layout,horizontalSplit:this.horizontalPosition,verticalSplit:this.verticalPosition,isDragging:e.detail.isDragging})}};y([(0,s.MZ)({attribute:!1})],b.prototype,"layout",void 0),y([(0,s.MZ)({attribute:!1})],b.prototype,"horizontalPosition",void 0),y([(0,s.MZ)({attribute:!1})],b.prototype,"verticalPosition",void 0),b=y([(0,s.EM)("ff-quad-splitter")],b);const A=b;var _=n(2902),w=n(2654),x=n(1721),C=n(3051),E=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let M=class extends v.Ay{getView(){return this.view}constructor(e){super(e),this.view=null,this.canvas=null,this.overlay=null,this.srAnnouncement=null,this.splitter=null,this.resizeObserver=null,this.pointerEventsEnabled=!1,this.measuring=!1,this.onPointerUpOrCancel=this.onPointerUpOrCancel.bind(this),this.onKeyDownOverlay=this.onKeyDownOverlay.bind(this),this.manipTarget=new m,this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointermove",this.manipTarget.onPointerMove),this.addEventListener("pointerup",this.onPointerUpOrCancel),this.addEventListener("pointercancel",this.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.addEventListener("pointerup",this.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointercancel",this.onPointerUpOrCancel),this.addEventListener("wheel",this.manipTarget.onWheel),this.addEventListener("contextmenu",this.manipTarget.onContextMenu),this.addEventListener("keydown",this.manipTarget.onKeyDown),this.pointerEventsEnabled=!0}firstConnected(){if(this.classList.add("sv-scene-view"),this.style.touchAction="none",this.setAttribute("touch-action","none"),this.tabIndex=0,this.id="sv-scene",this.ariaLabel="Interactive 3D Model. Use mouse, touch, or arrow keys to rotate. Escape key to exit annotations.",this.setAttribute("role","application"),this.srAnnouncement=this.appendElement("div"),this.srAnnouncement.classList.add("sr-only"),this.srAnnouncement.setAttribute("aria-live","polite"),this.srAnnouncement.setAttribute("id","sceneview-sr"),this.canvas=this.appendElement("canvas",{display:"block",width:"100%",height:"100%"}),this.overlay=this.appendElement("div",{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",overflow:"hidden"}),this.overlay.classList.add("sv-content-overlay"),this.overlay.addEventListener("keydown",this.onKeyDownOverlay),!this.canvas.getContext("webgl2"))throw this.overlay.innerHTML="<div class='error-msg'>WebGL2 is required and unavailable in your browser.<br>Please see <a href='https://get.webgl.org/webgl2/' target='_blank' rel='noopener noreferrer'>this WebGL2 test page</a> for more information.</div>",new Error("WebGL2 unavailable. Try updating drivers and/or browser.");this.splitter=this.appendElement(A,{position:"absolute",top:"0",bottom:"0",left:"0",right:"0",overflow:"hidden"}),this.splitter.onChange=e=>{this.view.horizontalSplit=e.horizontalSplit,this.view.verticalSplit=e.verticalSplit},this.view=new g.A(this.system,this.canvas,this.overlay),this.view.on("layout",e=>{this.splitter.layout=e.layout,this.dispatchEvent(new CustomEvent("layout"))}),this.view.layout=f.Single,this.splitter.layout=f.Single,this.manipTarget.next=this.view}connected(){this.view.attach(),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>this.view.resize())),this.resizeObserver.observe(this.view.renderer.domElement),this.system.getMainComponent(_.A).activeComponent.setup.navigation.ins.pointerEnabled.on("value",this.enablePointerEvents,this),this.system.getComponent(w.Ay).ins.keyNavActive.on("value",this.onKeyboardNavigation,this),this.system.getComponent(x.A).tape.ins.enabled.on("value",this.onMeasure,this)}disconnected(){this.resizeObserver.disconnect(),this.system.getComponent(x.A).tape.ins.enabled.off("value",this.onMeasure,this),this.system.getComponent(w.Ay).ins.keyNavActive.off("value",this.onKeyboardNavigation,this),this.system.getMainComponent(_.A).activeComponent.setup.navigation.ins.pointerEnabled.off("value",this.enablePointerEvents,this),this.view.detach()}enablePointerEvents(){const e=this.system.getMainComponent(_.A).activeComponent.setup.navigation.ins.pointerEnabled.value;e&&!this.pointerEventsEnabled?(this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointermove",this.manipTarget.onPointerMove),this.addEventListener("pointerup",this.onPointerUpOrCancel),this.addEventListener("pointercancel",this.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.addEventListener("pointerup",this.onPointerUpOrCancel),this.ownerDocument.addEventListener("pointercancel",this.onPointerUpOrCancel),this.addEventListener("wheel",this.manipTarget.onWheel),this.addEventListener("contextmenu",this.manipTarget.onContextMenu),this.addEventListener("keydown",this.manipTarget.onKeyDown),this.style.touchAction="none",this.setAttribute("touch-action","none"),this.pointerEventsEnabled=!0):!e&&this.pointerEventsEnabled&&(this.removeEventListener("pointerdown",this.onPointerDown),this.removeEventListener("pointermove",this.manipTarget.onPointerMove),this.removeEventListener("pointerup",this.onPointerUpOrCancel),this.removeEventListener("pointercancel",this.onPointerUpOrCancel),this.ownerDocument.removeEventListener("pointermove",this.manipTarget.onPointerMove),this.ownerDocument.removeEventListener("pointerup",this.onPointerUpOrCancel),this.ownerDocument.removeEventListener("pointercancel",this.onPointerUpOrCancel),this.removeEventListener("wheel",this.manipTarget.onWheel),this.removeEventListener("contextmenu",this.manipTarget.onContextMenu),this.removeEventListener("keydown",this.manipTarget.onKeyDown),this.style.touchAction="auto",this.setAttribute("touch-action","auto"),this.pointerEventsEnabled=!1,this.style.cursor="default")}onPointerDown(e){this.pointerEventsEnabled&&(this.style.cursor="default"==this.style.cursor?"default":"grabbing",this.manipTarget.onPointerDown(e))}onPointerUpOrCancel(e){this.pointerEventsEnabled&&(this.style.cursor="default"==this.style.cursor?"default":"grab",this.manipTarget.onPointerUpOrCancel(e))}onKeyboardNavigation(){const e=this.system.getComponent(w.Ay).ins;switch(e.keyNavActive.value){case w.P.Orbit:this.srAnnouncement.textContent="Orbit "+e.orbit.value[0].toFixed(0)+", "+e.orbit.value[1].toFixed(0)+", "+e.orbit.value[2].toFixed(0);break;case w.P.Pan:case w.P.Zoom:this.srAnnouncement.textContent="Offset "+e.offset.value[0].toFixed(0)+", "+e.offset.value[1].toFixed(0)+", "+e.offset.value[2].toFixed(0)}}onMeasure(){this.measuring=this.system.getComponent(x.A).tape.ins.enabled.value,this.style.cursor=this.measuring?"default":"grab"}onKeyDownOverlay(e){const t=this.system.getComponent(x.A).viewer;if("Escape"===e.code)if(e.preventDefault(),t.outs.tagCloud.value.length>0){const e=t.rootElement.shadowRoot.querySelector(".sv-tag-buttons").getElementsByClassName("ff-button")[0];e&&e.focus()}else this.system.getComponent(x.A).viewer.ins.annotationExit.set();else"Tab"===e.code&&(0,C.i)((0,C.R)(this.overlay),e,!0)}};M=E([(0,v.EM)("sv-scene-view")],M);const S=M;var T,k=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let L=T=class extends s.Ay{constructor(){super(...arguments),this.visible=!1,this.assetPath=""}firstConnected(){super.firstConnected(),this.classList.add("sv-spinner")}render(){const e=s.qy`<div class="sv-spinner-wheel"><object data="${this.assetPath}images/spinner.svg" type="image/svg+xml" alt="Spinner">
            ${T.template}
        </object></div>`;return this.style.visibility=this.visible?"visible":"hidden",e}};L.template=s.qy`<div class="sv-spinner-wheel"><svg viewBox="0 0 101.64261 101.4383" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g transform="translate(-67.120928,-102.35083)"><circle style="fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#bfbfbf;stroke-width:3;stroke-miterlimit:4;stroke-dasharray:12, 12;stroke-dashoffset:0;stroke-opacity:1" id="path77" cx="117.94224" cy="152.9675" r="49.321297" /></g></svg></div>`,k([(0,s.MZ)({type:Boolean})],L.prototype,"visible",void 0),k([(0,s.MZ)({type:String})],L.prototype,"assetPath",void 0),L=T=k([(0,s.EM)("sv-spinner")],L);var D,I=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let R=D=class extends s.Ay{firstConnected(){super.firstConnected(),this.classList.add("sv-action-prompt")}render(){return s.qy`<div class="sv-prompt"><div id="prompt" class="sv-action-prompt">${D.icon}</div></div>`}};R.icon=s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M144 0C108.7 0 80 28.7 80 64V252.8c-5.2 3.6-10.2 7.6-14.9 11.9L44.8 283.2C26.5 299.9 16 323.5 16 348.3v10.2c0 54.1 28.7 104.1 75.4 131.3l2.6 1.5c23.2 13.6 49.7 20.7 76.6 20.7H296c66.3 0 120-53.7 120-120v-8V288c0-35.3-28.7-64-64-64c-2.8 0-5.6 .2-8.3 .5c-11-19.4-31.8-32.5-55.7-32.5c-5.3 0-10.5 .7-15.5 1.9c-10.8-20.2-32-33.9-56.5-33.9c-2.7 0-5.4 .2-8 .5V64c0-35.3-28.7-64-64-64zM128 64c0-8.8 7.2-16 16-16s16 7.2 16 16V200c0 10.3 6.6 19.5 16.4 22.8s20.6-.1 26.8-8.3c3-3.9 7.6-6.4 12.8-6.4c8.8 0 16 7.2 16 16v8c0 10.3 6.6 19.5 16.4 22.8s20.6-.1 26.8-8.3c3-3.9 7.6-6.4 12.8-6.4c8.8 0 16 7.2 16 16c0 9.1 5.1 17.4 13.3 21.5s17.9 3.2 25.1-2.3c2.7-2 6-3.2 9.6-3.2c8.8 0 16 7.2 16 16v96 8c0 39.8-32.2 72-72 72H170.6c-18.4 0-36.5-4.9-52.4-14.2l-11.7 20 11.7-20-2.6-1.5C83.6 429.7 64 395.5 64 358.5V348.3c0-11.3 4.8-22 13.1-29.6L96 301.5V344c0 8.8 7.2 16 16 16s16-7.2 16-16V266v-2V64z"/></svg>`,R=D=I([(0,s.EM)("sv-action-prompt")],R);var O=n(9498),P=n(8177),B=n(3534),N=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let U=class extends P.Ay{constructor(){super(...arguments),this.reader=null,this.tours=null,this.language=null,this.firstRender=!0}firstConnected(){super.firstConnected(),this.classList.add("sv-reader-view")}renderMenuEntry(e,t){const n=e.article;return P.qy`<div role="option" title="article" tabindex=${0===t?"0":"-1"} @keydown=${e=>this.onKeyDown(e,n.id)} class="sv-entry" @click=${e=>this.onClickArticle(e,n.id)}>      
            <div class="sv-titlebar">              
                <h1>${(0,B._)(n.title)}</h1>
                <ff-icon class="ff-off" name="triangle-right">
            </div>
            <p>${n.lead}</p>
        </div>`}render(){const e=this.reader,t=this.language;this.tours;if(!e)return P.qy`<div class="ff-placeholder">Please select a document to display its articles.</div>`;const n=this.tours.ins.enabled.value?null:P.qy`<ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Article Menu")} icon="bars" @click=${this.onClickMenu}></ff-button>`;if(!e.activeArticle){const n=e.articles;return P.qy`<div class="sv-left"></div><div role="listbox" aria-label="articles" class="sv-article">
                <!--ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Close Article Reader")} icon="close" @click=${this.onClickClose}></ff-button-->
                ${n.map((e,t)=>this.renderMenuEntry(e,t))}
            </div><div class="sv-right"></div>`}return P.qy`<div class="sv-left"></div><div class="sv-article" @keydown=${t=>this.onKeyDown(t,e.activeArticle.id)} >
                <ff-button class="sv-nav-button" inline title=${t.getLocalizedString("Close Article Reader")} icon="close" @click=${this.onClickClose}></ff-button>
                ${n}
                <div role="region" aria-live="polite" aria-atomic="true" title="article" class="sv-container"></div>
            </div><div class="sv-right"></div>`}onClickMenu(e){e.stopPropagation(),this.reader.ins.articleId.setValue(""),this.reader.ins.focus.setValue(!0)}onClickClose(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("close"))}onClickArticle(e,t){this.reader.ins.articleId.setValue(t)}updated(e){super.updated(e);const t=this.reader;if(t){if(t.activeArticle){const e=this.getElementsByClassName("sv-container").item(0);e.innerHTML=t.outs.content.value,this.firstRender&&(setTimeout(()=>{e.insertAdjacentHTML("beforeend","<div class='sr-only'>-end of article-</div>")},200),this.firstRender=!1)}t.ins.focus.value&&(this.setFocus(),t.ins.focus.setValue(!1,!0))}}onActiveDocument(e,t){e&&(e.setup.language.outs.activeLanguage.off("value",this.onUpdate,this),this.reader.outs.content.off("value",this.onUpdate,this),this.reader.outs.article.off("value",this.onUpdate,this),this.tours=null,this.language=null,this.reader=null),t&&(this.reader=t.setup.reader,this.language=t.setup.language,this.tours=t.setup.tours,this.reader.outs.content.on("value",this.onUpdate,this),this.reader.outs.article.on("value",this.onUpdate,this),t.setup.language.outs.activeLanguage.on("value",this.onUpdate,this))}onKeyDown(e,t){const n=this.reader;if("Space"!==e.code&&"Enter"!==e.code||!n||n.activeArticle){if("Escape"===e.code)e.preventDefault(),n.activeArticle?(n.ins.articleId.setValue(""),n.ins.focus.setValue(!0)):this.dispatchEvent(new CustomEvent("close"));else if("Tab"===e.code)(0,C.i)((0,C.R)(this),e);else if(("ArrowUp"===e.code||"ArrowDown"===e.code)&&n&&!n.activeArticle){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}}else e.preventDefault(),this.reader.ins.articleId.setValue(t),this.reader.ins.focus.setValue(!0)}setFocus(){(this.reader.activeArticle?this.getElementsByClassName("sv-nav-button").item(1):this.getElementsByClassName("sv-entry").item(0)).focus()}};U=N([(0,P.EM)("sv-reader-view")],U);var F=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let z=class extends P.Ay{constructor(){super(...arguments),this.audioManager=null,this.documentProps=new d.A("value",this.onUpdate,this)}firstConnected(){super.firstConnected(),this.classList.add("sv-caption-view")}render(){const e=this.audioManager,t=e.ins.activeCaption.value,n=e.ins.captionsEnabled.value;return t.length>0&&n?P.qy`<div class="sv-caption-box" >${t}</div>`:null}onActiveDocument(e,t){if(e&&this.documentProps.off(),t){const e=t.setup;this.audioManager=t.setup.audio,this.documentProps.on(e.audio.ins.captionsEnabled,e.audio.ins.activeCaption)}this.requestUpdate()}};z=F([(0,P.EM)("sv-caption-view")],z);const H=z;var j=n(3889),V=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Y=class extends P.Ay{get arManager(){return this.system.getMainComponent(r.A)}firstConnected(){super.firstConnected()}render(){const e=this.arManager,t=e.outs,n=!0===e.ins.wallMount.value?"a wall":"the floor";return!t.isPlaced.value&&t.isPresenting.value?P.qy`<div class="sv-ar-prompt">
                <div class="sv-content">
                    <div><ff-icon class="ff-off ff-icon sv-ar-icon" name="device-move"}></ff-icon></div>
                    Point your device at ${n} and move it around to place your Smithsonian object!<br><br>**BETA**
                </div>
            </div>`:null}onActiveDocument(e,t){e&&(this.arManager.outs.isPlaced.off("value",this.onUpdate,this),this.arManager.outs.isPresenting.off("value",this.onUpdate,this)),t&&(this.arManager.outs.isPlaced.on("value",this.onUpdate,this),this.arManager.outs.isPresenting.on("value",this.onUpdate,this)),this.requestUpdate()}};Y=V([(0,P.EM)("sv-ar-prompt-container")],Y);const G=Y;var Q=n(3350),$=n(8172),q=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let W=class extends P.Ay{constructor(){super(...arguments),this.documentProps=new d.A("value",this.onUpdate,this),this.shareButtonSelected=!1}get analytics(){return this.system.getMainComponent(h.A)}get arManager(){return this.system.getMainComponent(r.A)}get sceneNode(){return this.system.getComponent($.A)}firstConnected(){super.firstConnected(),this.classList.add("sv-ar-menu-container")}connected(){super.connected()}disconnected(){super.disconnected()}render(){const e=this.activeDocument;if(!e)return P.qy``;const t=this.arManager.outs,n=e.setup,i=this.sceneNode.getGraphComponents(Q.A).some(e=>e.hasAnnotations),r=n.viewer.ins.annotationsVisible.value,o=n.audio.outs.narrationEnabled.value,s=n.audio.outs.narrationPlaying.value;return t.isPlaced.value&&t.isPresenting.value?P.qy`<div class="sv-ar-menu">
        ${i?P.qy`<ff-button icon="comment" title="Show/Hide Annotations"
            ?selected=${r} @click=${this.onToggleAnnotations}></ff-button>`:null}
        ${o?P.qy`<ff-button icon="audio" title=${"Play Audio Narration"}
            ?selected=${s} @click=${this.onToggleNarration}></ff-button>`:null}
        </div>`:null}onToggleReader(){const e=this.activeDocument.setup.reader.ins;e.enabled.setValue(!e.enabled.value),this.analytics.sendProperty("Reader_Enabled",e.enabled.value)}onToggleNarration(){const e=this.activeDocument.setup.audio;e.setupAudio(),e.ins.playNarration.set()}onToggleAnnotations(){const e=this.activeDocument.setup.viewer.ins;e.annotationsVisible.setValue(!e.annotationsVisible.value),this.analytics.sendProperty("Annotations_Visible",e.annotationsVisible.value)}onActiveDocument(e,t){if(e&&(this.documentProps.off(),this.arManager.outs.isPlaced.off("value",this.onUpdate,this),this.arManager.outs.isPresenting.off("value",this.onUpdate,this)),t){const e=t.setup;this.documentProps.on(e.viewer.ins.annotationsVisible,e.audio.outs.narrationPlaying),this.arManager.outs.isPlaced.on("value",this.onUpdate,this),this.arManager.outs.isPresenting.on("value",this.onUpdate,this)}this.requestUpdate()}};W=q([(0,P.EM)("sv-ar-menu")],W);const K=W;var Z=n(3600),X=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let J=class extends P.Ay{constructor(){super(...arguments),this.sceneView=null,this.captionView=null,this.documentProps=new d.A("value",this.onUpdate,this),this.isMobile=null,this.assetPath=""}get analytics(){return this.system.getMainComponent(h.A)}get assetManager(){return this.system.getMainComponent(p.A)}get reader(){return this.activeDocument?this.activeDocument.setup.reader:null}get tours(){return this.activeDocument?this.activeDocument.setup.tours:null}get navigation(){return this.activeDocument?this.activeDocument.setup.navigation:null}get renderer(){return this.system.getMainComponent(j.A)}get arManager(){return this.system.getMainComponent(r.A)}get assetReader(){return this.system.getMainComponent(Z.A)}firstConnected(){this.classList.add("sv-content-view"),this.sceneView=new S(this.system),this.captionView=new H(this.system),this.isMobile=this.mobileCheck()}connected(){super.connected(),this.assetManager.outs.busy.on("value",this.onUpdate,this),this.sceneView.on("layout",()=>this.onUpdate()),this.assetPath=this.assetReader.getSystemAssetUrl("")}disconnected(){this.sceneView.off("layout",()=>this.onUpdate()),this.assetManager.outs.busy.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.system,t=this.assetManager.outs.busy.value,n=this.assetManager.initialLoad;let i=!1,r=u.Yf.Overlay,o=!1,s=!1;const a=this.reader,l=this.tours,c=this.navigation,d=this.arManager.shadowRoot.querySelector("ff-viewport-overlay");if(d&&(null===this.arManager.shadowRoot.querySelector("sv-ar-prompt-container")&&d.append(new G(this.system)),null===this.arManager.shadowRoot.querySelector("sv-ar-menu")&&d.append(new K(this.system))),l&&(o=l.ins.enabled.value&&-1===l.outs.tourIndex.value),a&&(i=!o&&a.ins.enabled.value&&a.ins.visible.value,r=a.ins.position.getValidatedValue(),!0===this.isMobile&&(r=u.Yf.Overlay)),c){const e=c.ins.pointerEnabled.value,r=c.ins.promptEnabled.value;if(e&&r){const e=c.ins.isInUse.value;s=!t&&n&&!e&&!i,c.ins.promptActive.setValue(s)}}const h=this.sceneView,p=this.captionView;if((i&&r===u.Yf.Overlay||o)&&this.sceneView.getView().layout==g.y.Single?h.classList.contains("sv-blur")||setTimeout(()=>{h.classList.add("sv-blur"),this.renderer.views[0].render()},1):h.classList.remove("sv-blur"),!t&&n&&(this.analytics.sendProperty("Loading_Time",this.analytics.getTimerTime()/1e3),this.analytics.resetTimer(),this.assetManager.initialLoad=!1),i){if(r===u.Yf.Right)return P.qy`<div class="ff-fullsize sv-content-split">
                    <div class="ff-splitter-section" style="flex-basis: 60%">
                        ${h}
                    </div>
                    <ff-splitter direction="horizontal"></ff-splitter>
                        <div class="ff-splitter-section" style="flex-basis: 40%; max-width: 500px;">
                            <div class="sv-reader-container">
                                <sv-reader-view .system=${e} @close=${this.onReaderClose} ></sv-reader-view>
                            </div>
                        </div>
                    </div>
                    <sv-spinner ?visible=${t} .assetPath=${this.assetPath}></sv-spinner>
                    ${p}`;if(r===u.Yf.Overlay)return P.qy`<div class="ff-fullsize sv-content-stack">${h}
                    <div class="sv-reader-container">
                        <sv-reader-view .system=${e} @close=${this.onReaderClose}></sv-reader-view>
                    </div>
                    <sv-spinner ?visible=${t} .assetPath=${this.assetPath}></sv-spinner>
                    ${p}
                    </div>`}return P.qy`<div class="ff-fullsize sv-content-only">${h}</div>
            <sv-spinner ?visible=${t&&n} .assetPath=${this.assetPath}></sv-spinner>
            ${p}
            ${s?P.qy`<sv-action-prompt></sv-action-prompt>`:null}`}onReaderClose(){this.reader.ins.enabled.setValue(!1),this.reader.ins.closed.set()}onActiveDocument(e,t){e&&this.documentProps.off(),t&&this.documentProps.on(t.setup.reader.ins.position,t.setup.reader.ins.enabled,t.setup.tours.outs.tourIndex,t.setup.navigation.ins.isInUse),this.requestUpdate()}mobileCheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}};J=X([(0,P.EM)("sv-content-view")],J);const ee=J;var te=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ne=class extends s.Ay{constructor(){super(),this.mode="radio",this.selectionIndex=-1,this.observer=new MutationObserver(this.onObserver),this.selectedButton=null,this.addEventListener("click",e=>this.onClick(e))}firstConnected(){this.classList.add("ff-button-group"),this.parseChildren()}connected(){this.observer.observe(this,{childList:!0})}disconnected(){this.observer.disconnect()}onObserver(e){e.forEach(e=>{"childList"===e.type&&this.parseChildren()})}onClick(e){let t=e.target;for(;t&&t!==this&&!(t instanceof O.A);)t=t.parentElement;t instanceof O.A&&(t.selected?"exclusive"===this.mode&&(t.selected=!1,this.selectedButton=null,this.selectionIndex=-1):(this.selectedButton&&(this.selectedButton.selected=!1),this.selectedButton=t,this.selectedButton.selected=!0,this.selectionIndex=this.getButtons().indexOf(t)))}parseChildren(){const e=this.getButtons();this.selectedButton&&(this.selectionIndex=e.indexOf(this.selectedButton),this.selectionIndex<0&&(this.selectedButton.selected=!1,this.selectedButton=null)),(this.selectionIndex<0||this.selectionIndex>=e.length)&&(this.selectionIndex="radio"===this.mode?0:-1),this.selectionIndex>=0&&(this.selectedButton=e[this.selectionIndex],this.selectedButton.selected=!0)}getButtons(){return this.getChildrenArray().filter(e=>e instanceof O.A)}};te([(0,s.MZ)({type:String})],ne.prototype,"mode",void 0),te([(0,s.MZ)({type:Number})],ne.prototype,"selectionIndex",void 0),ne=te([(0,s.EM)("ff-button-group")],ne);var ie,re=n(6233),oe=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let se=ie=class extends s.Ay{constructor(){super(...arguments),this.assetPath=""}firstConnected(){super.firstConnected(),this.classList.add("sv-logo")}render(){const e=s.qy`<div class="sv-logo-sm"><object tabIndex="-1" data="${this.assetPath}images/logo-sm.svg" type="image/svg+xml" alt="Logo"></div>
            ${ie.defaultSmall}
        </object></div>`,t=s.qy`<div class="sv-logo-full"><object tabIndex="-1" style="height: 100%; width:100%" data="${this.assetPath}images/logo-full.svg" type="image/svg+xml" alt="Logo">
            ${ie.defaultFull}
        </object></div>`;return s.qy`<div class="sv-short">${e}</div><div class="sv-full">${t}</div>`}};se.defaultSmall=s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 83.1 83.1"><defs><style>.cls-1{fill:#bfbfbf;}</style></defs><title>voyager-75grey</title><path class="cls-1" d="M72.18,13.48,67.1,18.57c.5,3.19,1.23,12.48-4.76,23L42.66,21.89c10.21-5.84,19.21-5.31,22.68-4.8l5.25-5.25a41.5,41.5,0,1,0,1.59,1.64ZM7.48,52.91s-2.35-12.84,9-24.14c6.6-6.6,14.83-1.45,14.83-1.45A98.12,98.12,0,0,0,17.51,48.47C10.19,49.11,7.48,52.91,7.48,52.91Zm13.83,15.5V65.7l-6,3.07,2.81-6.24-3.53,1.18,2.53-6,9.31,9.31Zm34.17-.59c-11.3,11.3-24.14,9-24.14,9s3.8-2.71,4.43-10A97.8,97.8,0,0,0,56.93,53S62.08,61.22,55.48,67.82ZM54.7,51.5c-5.88,5.88-24.82,15.88-24.82,15.88l-13-13s9.9-18.86,15.86-24.82a48.27,48.27,0,0,1,8-6.47L61.16,43.48A47.53,47.53,0,0,1,54.7,51.5Z"/><path class="cls-1" d="M39.34,44.88a5.88,5.88,0,1,0,0-8.32A5.9,5.9,0,0,0,39.34,44.88Z"/></svg>`,se.defaultFull=s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 380.54 83.1"><defs><style>.cls-1{fill:#bfbfbf;}</style></defs><title>voyager-75grey</title><path class="cls-1" d="M72.18,13.48,67.1,18.57c.5,3.19,1.23,12.48-4.76,23L42.66,21.89c10.21-5.84,19.21-5.31,22.68-4.8l5.25-5.25a41.5,41.5,0,1,0,1.59,1.64ZM7.48,52.91s-2.35-12.84,9-24.14c6.6-6.6,14.83-1.45,14.83-1.45A98.12,98.12,0,0,0,17.51,48.47C10.19,49.11,7.48,52.91,7.48,52.91Zm13.83,15.5V65.7l-6,3.07,2.81-6.24-3.53,1.18,2.53-6,9.31,9.31Zm34.17-.59c-11.3,11.3-24.14,9-24.14,9s3.8-2.71,4.43-10A97.8,97.8,0,0,0,56.93,53S62.08,61.22,55.48,67.82ZM54.7,51.5c-5.88,5.88-24.82,15.88-24.82,15.88l-13-13s9.9-18.86,15.86-24.82a48.27,48.27,0,0,1,8-6.47L61.16,43.48A47.53,47.53,0,0,1,54.7,51.5Z"/><path class="cls-1" d="M39.34,44.88a5.88,5.88,0,1,0,0-8.32A5.9,5.9,0,0,0,39.34,44.88Z"/><path class="cls-1" d="M131.52,23l-10.26,43.7h-13.4L97.6,23H92V16.42h21.64V23h-5.51l6.42,34.9,7.68-41.46h14.94V23Z"/><path class="cls-1" d="M154.82,67.38c-7.53,0-17.45-2.24-17.45-25.83s10.54-25.83,17.45-25.83,17.46,2.37,17.46,25.83C172.28,65.35,162.15,67.38,154.82,67.38Zm0-44.68c-4.88,0-7.68,3.91-7.68,18.85,0,15.15,3.57,18.85,7.68,18.85,4.26,0,7.68-3.49,7.68-18.85C162.5,26.89,159.57,22.7,154.82,22.7Z"/><path class="cls-1" d="M209.72,23,198.9,48.11v12h7.68v6.56H181.45V60.12h7.68v-12L178.31,23h-5.59V16.42h21V23h-4.81L194,37.92l7.4-21.5h14V23Z"/><path class="cls-1" d="M243.67,66.68,241,54.39H228.6l-1.26,5.73h5.51v6.56H211.63V60.12h5.59L228,16.42h13.68l10.75,43.7h5.65v6.56ZM234.81,24l-4.68,22.83h9.36Z"/><path class="cls-1" d="M278.63,67.38c-9.56,0-19.68-3.21-19.68-25.13s11.31-26.53,21-26.53a32,32,0,0,1,13.89,3.21V30.1h-6.56V24.66A28.73,28.73,0,0,0,280,23.61c-5,0-11.24,3.35-11.24,17.94,0,15.43,5.37,18,9.77,18a27.39,27.39,0,0,0,5.59-.63V44.13h-6.63V36.66h16.4v28.9A88.21,88.21,0,0,1,278.63,67.38Z"/><path class="cls-1" d="M298.93,66.68V60.12h6.28V23h-6.28V16.42h33.51V30.1h-6.56V24.73H315V36.66h14.66V44.2H315V58.37h10.89V52.3h6.56V66.68Z"/><path class="cls-1" d="M366.78,66.68l-8.3-21.78h-5.1V60.12H359v6.56H337.33V60.12h6.28V23h-6.28V16.42h20.38c10.47,0,17.31,2.65,17.31,13.47,0,5.66-1.6,10.19-7.61,12.85L375,60.12h5.59v6.56Zm-9.56-42.51h-3.84V38.06c8.31,0,11.87-1.89,11.87-7.47C365.25,26.47,363.43,24.17,357.22,24.17Z"/></svg>`,oe([(0,s.MZ)({type:String})],se.prototype,"assetPath",void 0),se=ie=oe([(0,s.EM)("sv-logo")],se);var ae,le=n(9616),ce=n(7297),de=n(3818),ue=(n(9264),function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s});let he=ae=class extends de.Ay{static show(e,t){const n=new ae(e,t);return e.appendChild(n),new Promise((e,t)=>{n.on("close",()=>e())})}constructor(e,t){super(),this.language=null,this.needsFocus=!1,this.language=t,this.position="center",this.portal=e,this.modal=!0,this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-share-menu"),this.needsFocus=!0}render(){const e=encodeURIComponent(this.url),t=encodeURI("Check out this interactive 3D model with Smithsonian Voyager:"),n=this.language,i=`http://twitter.com/share?text=${t}&url=${e}`,r=`https://www.facebook.com/sharer/sharer.php?u=${e}`,o=`https://www.linkedin.com/shareArticle?url=${e}&mini=true&title=${t}`,s=`<iframe name="Smithsonian Voyager" src="${this.url}" width="800" height="450" allow="xr; xr-spatial-tracking; fullscreen"></iframe>`,a=`mailto:?subject=${t}&body=${e}`,l=n.getLocalizedString("Share Experience");return de.qy`
        <div role="region" aria-label=${l} @keydown=${e=>this.onKeyDown(e)}>
            <div class="ff-flex-row">
                <div id="shareTitle" class="ff-flex-spacer ff-title">${l}</div>
                <ff-button icon="close" transparent class="ff-close-button" title=${n.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="ff-flex-row sv-share-buttons">
                <a href=${i} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-twitter" icon="twitter" title="Twitter"></ff-button></a>
                <a href=${r} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-facebook" icon="facebook" title="Facebook"></ff-button></a>
                <a href=${o} tabindex="-1" target="_blank" rel="noopener noreferrer"><ff-button class="sv-share-button-linkedin" icon="linkedin" title="LinkedIn"></ff-button></a>
                <a href=${a} tabindex="-1" target="_blank"><ff-button class="sv-share-button-email" icon="email" title=${n.getLocalizedString("Email")}></ff-button></a>
            </div>
            <div class="ff-title" id="embedTitle">${n.getLocalizedString("Embed Link")}</div>
            <div class="ff-flex-row sv-embed-link">
                <ff-text-edit readonly aria-labelledby="embedTitle" text=${s}></ff-text-edit>
                <ff-button icon="copy" title=${n.getLocalizedString("Copy link to Clipboard")} @click=${this.onClickCopy}></ff-button>
            </div>
        </div>
        `}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-share-button-twitter").item(0).focus(),this.needsFocus=!1}}onClickCopy(){this.getElementsByTagName("ff-text-edit").item(0).select(),document.execCommand("copy")}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.close()):"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}};he=ae=ue([(0,de.EM)("sv-share-menu")],he);const pe=he;var me,fe=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ge=me=class extends de.Ay{static show(e,t,n){const i=new me(e,t,n);return e.appendChild(i),new Promise((e,t)=>{i.on("close",()=>e())})}constructor(e,t,n){super(),this.language=null,this.imageUri=null,this.needsFocus=!1,this.language=t,this.imageUri=n,this.position="center",this.portal=e,this.modal=!0,this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-ar-code"),this.needsFocus=!0}render(){const e=this.language,t=e.getLocalizedString("AR Experience");return de.qy`
        <div role="region" aria-label=${t} @keydown=${e=>this.onKeyDown(e)}>
            <div class="ff-flex-row">
                <div id="arCodeTitle" class="ff-flex-spacer ff-title">${t}</div>
                <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="ff-title" id="embedTitle">${e.getLocalizedString("1. Scan the code with your mobile device to return here.")}</div>
            <div class="ff-flex-row">
                <img src=${this.imageUri}></img>
            </div>
            <div class="ff-title">${e.getLocalizedString("2. Tap ")}<ff-icon name="ar"></ff-icon>${e.getLocalizedString(" to launch an AR experience! ")}</div>
        </div>
        `}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("ff-close-button").item(0).focus(),this.needsFocus=!1}}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.close()):"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}};ge=me=fe([(0,de.EM)("sv-ar-code")],ge);const ve=ge;var ye=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let be=class extends P.Ay{constructor(){super(...arguments),this.documentProps=new d.A("value",this.onUpdate,this),this.shareButtonSelected=!1,this.resizeObserver=null,this.isClipped=!1}get fullscreen(){return this.system.getMainComponent(i.A)}get toolProvider(){return this.system.getMainComponent(re.A)}get analytics(){return this.system.getMainComponent(h.A)}get arManager(){return this.system.getMainComponent(r.A)}get sceneNode(){return this.system.getComponent($.A)}firstConnected(){super.firstConnected(),this.classList.add("sv-main-menu")}connected(){super.connected(),this.fullscreen.outs.fullscreenActive.on("value",this.onUpdate,this),this.toolProvider.ins.visible.on("value",this.onUpdate,this),this.activeDocument.setup.language.outs.activeLanguage.on("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationEnabled.on("value",this.onUpdate,this),this.activeDocument.setup.tours.ins.closed.on("value",this.setTourFocus,this),this.activeDocument.setup.reader.ins.closed.on("value",this.setReaderFocus,this),this.activeDocument.setup.viewer.ins.annotationExit.on("value",this.setAnnotationFocus,this),this.toolProvider.ins.closed.on("value",this.setToolsFocus,this),this.resizeObserver||(this.resizeObserver=new ResizeObserver(()=>this.onResize())),this.resizeObserver.observe(this)}disconnected(){this.resizeObserver.disconnect(),this.toolProvider.ins.closed.off("value",this.setToolsFocus,this),this.activeDocument.setup.viewer.ins.annotationExit.off("value",this.setAnnotationFocus,this),this.activeDocument.setup.reader.ins.closed.off("value",this.setReaderFocus,this),this.activeDocument.setup.tours.ins.closed.off("value",this.setTourFocus,this),this.activeDocument.setup.audio.outs.narrationEnabled.off("value",this.onUpdate,this),this.activeDocument.setup.language.outs.activeLanguage.off("value",this.onUpdate,this),this.toolProvider.ins.visible.off("value",this.onUpdate,this),this.fullscreen.outs.fullscreenActive.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.activeDocument;if(!e)return P.qy``;const t=!!this.system.getComponent("CVStoryApplication",!0),n=e.setup,i=this.sceneNode,r=n.tours.outs.count.value>0,o=n.tours.ins.enabled.value,s=o&&!t,a=n.reader.articles.length>0,l=n.reader.ins.enabled.value,c=i.getGraphComponents(Q.A).some(e=>e.hasAnnotations),d=n.viewer.ins.annotationsVisible.value,u=this.fullscreen,h=u.outs.fullscreenAvailable.value,p=u.outs.fullscreenActive.value,m=n.interface.ins.tools.value,f=this.toolProvider.ins.visible.value,g=n.audio.outs.narrationEnabled.value,v=n.audio.outs.narrationPlaying.value,y=n.language,b=i.getGraphComponents(le.A);let A=!1;b.forEach(e=>{A=e.derivatives.getByQuality(ce.a9.AR).length>0||A});const _=(this.arManager.outs.available.value||this.arManager.arCodeImage)&&A&&b.length>=1;return P.qy`
            ${_?P.qy`<ff-button icon="ar" id="ar-btn" title=${y.getLocalizedString("Enter AR View")}
                @click=${this.onEnterAR}></ff-button>`:null}
            ${g?P.qy`<ff-button icon="audio" id="audio-btn" title=${y.getLocalizedString("Play Audio Narration")}
                ?selected=${v} @click=${this.onToggleNarration}></ff-button>`:null}
            ${r?P.qy`<ff-button id="tour-btn" icon="globe" title=${y.getLocalizedString("Interactive Tours")}
                ?selected=${o} @click=${this.onToggleTours}></ff-button>`:null}
            ${a?P.qy`<ff-button id="reader-btn" icon="article" title=${y.getLocalizedString("Read Articles")}
                ?selected=${l} ?disabled=${s} @click=${this.onToggleReader}></ff-button>`:null}
            ${c?P.qy`<ff-button aria-pressed=${d} id="anno-btn" icon="comment" title=${y.getLocalizedString("Show/Hide Annotations")}
                ?selected=${d} ?disabled=${s} @click=${this.onToggleAnnotations}></ff-button>`:null}
            <ff-button icon="share" id="share-btn" title=${y.getLocalizedString("Share Experience")}
                ?selected=${this.shareButtonSelected} @click=${this.onToggleShare}></ff-button>    
            ${h?P.qy`<ff-button id="fullscreen-btn" aria-pressed=${p} icon="expand" title=${y.getLocalizedString("Fullscreen")}
                ?selected=${p} @click=${this.onToggleFullscreen}></ff-button>`:null}
            ${m?P.qy`<ff-button id="tools-btn" icon="tools" title=${y.getLocalizedString("Tools and Settings")}
                ?selected=${f} ?disabled=${s} @click=${this.onToggleTools}></ff-button>`:null}`}onToggleReader(){const e=this.activeDocument.setup.reader,t=e.ins;t.enabled.setValue(!t.enabled.value),t.focus.setValue(t.enabled.value),t.enabled.value&&t.articleId.setValue(1===e.articles.length?e.articles[0].article.id:""),this.analytics.sendProperty("Reader_Enabled",t.enabled.value)}onToggleTours(){const e=this.activeDocument.setup.tours.ins,t=this.activeDocument.setup.reader.ins;e.enabled.value?e.enabled.setValue(!1):(t.enabled.value&&t.enabled.setValue(!1),e.enabled.setValue(!0),e.tourIndex.setValue(-1)),this.analytics.sendProperty("Tours_Enabled",e.enabled.value)}onToggleAnnotations(){const e=this.toolProvider.ins,t=this.activeDocument.setup.viewer.ins;e.visible.value&&e.visible.setValue(!1),t.annotationsVisible.setValue(!t.annotationsVisible.value),t.annotationFocus.setValue(!0),this.analytics.sendProperty("Annotations_Visible",t.annotationsVisible.value)}onToggleShare(){if(!this.shareButtonSelected){this.shareButtonSelected=!0,this.requestUpdate();const e=this.closest("sv-chrome-view");pe.show(e,this.activeDocument.setup.language).then(()=>{this.shareButtonSelected=!1,this.requestUpdate(),this.setElementFocus("share-btn")}),this.analytics.sendProperty("Menu_Share")}}onToggleFullscreen(){this.fullscreen.toggle(),this.analytics.sendProperty("Menu_Fullscreen")}onToggleTools(){const e=this.toolProvider.ins,t=this.activeDocument.setup.viewer.ins;t.annotationsVisible.value&&t.annotationsVisible.setValue(!1),e.visible.setValue(!e.visible.value),this.analytics.sendProperty("Tools_Visible",e.visible.value)}onEnterAR(){const e=this.arManager,t=e.ins;if(e.outs.available.value)t.enabled.setValue(!0);else{const t=this.closest("sv-chrome-view");ve.show(t,this.activeDocument.setup.language,e.arCodeImage).then(()=>{this.setElementFocus("ar-btn")})}}onToggleNarration(){const e=this.activeDocument.setup.audio;e.setupAudio(),e.ins.playNarration.set()}setTourFocus(){this.setElementFocus("tour-btn")}setReaderFocus(){this.setElementFocus("reader-btn")}setToolsFocus(){this.setElementFocus("tools-btn")}setAnnotationFocus(){this.setElementFocus("anno-btn")}setElementFocus(e){const t=this.getElementsByTagName("ff-button"),n=Array.from(t).find(t=>t.id===e);void 0!==n?n.focus():console.warn("Can't focus. Element ["+e+"] not found.")}onActiveDocument(e,t){if(e&&this.documentProps.off(),t){const e=t.setup;this.documentProps.on(e.interface.ins.tools,e.reader.ins.enabled,e.reader.outs.count,e.tours.ins.enabled,e.tours.outs.count,e.viewer.ins.annotationsVisible,e.audio.outs.narrationPlaying,this.toolProvider.ins.visible)}this.requestUpdate()}onResize(){const e=this.scrollHeight>this.clientHeight;this.isClipped!==e&&(e&&this.scrollTo({top:this.scrollTop+this.scrollHeight,behavior:"smooth"}),this.isClipped=e)}};be=ye([(0,P.EM)("sv-main-menu")],be);var Ae=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let _e=class extends v.Ay{constructor(){super(...arguments),this.needsFocus=!1}get toolProvider(){return this.system.getMainComponent(re.A)}get setup(){return this.system.getComponent(x.A)}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tool-bar"),this.needsFocus=!0}connected(){super.connected(),this.toolProvider.on("active-component",this.onUpdate,this),this.setup.language.outs.activeLanguage.on("value",this.onUpdate,this),this.setup.navigation.ins.mode.on("value",this.onUpdate,this)}disconnected(){this.setup.navigation.ins.mode.off("value",this.onUpdate,this),this.setup.language.outs.activeLanguage.off("value",this.onUpdate,this),this.toolProvider.off("active-component",this.onUpdate,this),super.disconnected()}render(){const e=this.toolProvider.scopedComponents,t=this.toolProvider.activeComponent,n=this.setup.language,i=(t&&v.qy`<div>`,e.map(e=>e.enabled?v.qy`<ff-button class="sv-tool-button" transparent text=${n.getLocalizedString(e.text)} icon=${e.icon}
                ?selected=${e===t} @click=${t=>this.onSelectTool(e)}></ff-button>`:null));return v.qy`<div class="sv-blue-bar"><div id="toolmenu" role="region" aria-label=${t?t.text:null} @close=${this.closeTool} @keydown=${e=>this.onKeyDownTool(e)}>${t?t.createView():null}</div>
            <div id="mainmenu" role="region" @keydown=${e=>this.onKeyDownMain(e)} aria-label="Tools and settings" class="sv-section">
                <ff-button class="sv-section-lead" transparent icon="close" title=${n.getLocalizedString("Close Tools")} @click=${this.onClose}></ff-button>
                <div class="sv-tool-buttons">${i}</div>
                <sv-tool-menu-view .system=${this.system}></sv-tool-menu-view>
            </div></div>`}onSelectTool(e){this.toolProvider.activeComponent=e}onClose(e){this.dispatchEvent(new CustomEvent("close")),e.stopPropagation()}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-tool-button").item(0).focus(),this.needsFocus=!1}}onKeyDownMain(e){if("Escape"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("close"));else if("Tab"===e.code){const t=Array.from(this.getElementsByTagName("div")).find(e=>"mainmenu"===e.id);(0,C.i)((0,C.R)(t),e)}}onKeyDownTool(e){if("Escape"===e.code)e.preventDefault(),this.closeTool();else if("Tab"===e.code){const t=Array.from(this.getElementsByTagName("div")).find(e=>"toolmenu"===e.id);(0,C.i)((0,C.R)(t),e)}}closeTool(){const e=this.getElementsByTagName("ff-button");Array.from(e).find(e=>e.getAttribute("text")===this.setup.language.getLocalizedString(this.toolProvider.activeComponent.text)).focus(),this.toolProvider.activeComponent=null}};_e=Ae([(0,v.EM)("sv-tool-bar")],_e);var we=n(5007),xe=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Ce=class extends P.Ay{constructor(){super(...arguments),this.needsFocus=!1,this.firstRender=!0,this.stepTitle=""}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tour-navigator"),this.needsFocus=!0}render(){const e=this.tours,t=this.language,n=this.interface,i=e.activeTour;let r,o;if(e&&i){const n=e.outs.stepIndex.value+1,i=e.outs.stepCount.value;r=i>0?e.stepTitle:e.title,o=i>0?`${t.getLocalizedString("Step")} ${n} ${t.getLocalizedString("of")} ${i}`:t.getLocalizedString("No tour steps defined")}else r=t.getLocalizedString("No tour selected"),o="---";this.stepTitle=r,this.firstRender&&(r="");const s=n.isShowing(we.T.tour_exit)?P.qy`<ff-button class="sv-section-lead" transparent icon="close" title=${t.getLocalizedString("Exit Tour")} ?disabled=${!i} @click=${this.onClickExit}></ff-button>`:null;return P.qy`<div class="sv-blue-bar" role=region title="Tour Navigation" @keydown=${e=>this.onKeyDown(e)}><div class="sv-section">
            ${s}
            <div class="ff-ellipsis sv-content" id="title-area" aria-live="polite" aria-atomic="true" aria-relevant="additions text" @click=${this.onClickTitle}>
                <div class="ff-ellipsis" id="title-text"><div class="ff-ellipsis sv-title" id="title-inner">${r}</div></div>
                <div class="ff-ellipsis sv-text">${o}</div>
            </div>
            <ff-button class="sv-section-trail" transparent icon="bars" title=${t.getLocalizedString("Show Tour Menu")} @click=${this.onClickMenu}></ff-button>
            <ff-button class="sv-section-trail" transparent icon="triangle-left" title=${t.getLocalizedString("Go Backward")} ?disabled=${!i} @click=${this.onClickPrevious}></ff-button>
            <ff-button class="sv-section-trail" transparent icon="triangle-right" title=${t.getLocalizedString("Go Forward")} ?disabled=${!i} @click=${this.onClickNext}></ff-button>
        </div></div>`}updated(e){if(super.updated(e),this.needsFocus){this.getElementsByClassName("sv-section-trail").item(2).focus(),this.needsFocus=!1}const t=this.getElementsByClassName("sv-title").item(0);t&&(this.firstRender?(setTimeout(()=>{t.innerText=this.stepTitle},100),this.firstRender=!1):t.innerText=this.stepTitle)}onClickExit(){this.tours.ins.enabled.setValue(!1),this.tours.ins.closed.set()}onClickMenu(){this.tours.ins.tourIndex.setValue(-1)}onClickPrevious(){this.tours.ins.previous.set();this.querySelector("#title-inner").classList.remove("sv-text-scroll")}onClickNext(){this.tours.ins.next.set();this.querySelector("#title-inner").classList.remove("sv-text-scroll")}onClickTitle(){this.textHelper()}onActiveDocument(e,t){e&&(this.tours.outs.tourIndex.off("value",this.onUpdate,this),this.tours.outs.stepIndex.off("value",this.onUpdate,this),this.language.outs.activeLanguage.off("value",this.onUpdate,this)),t&&(this.tours=t.setup.tours,this.language=t.setup.language,this.interface=t.setup.interface,this.tours.outs.tourIndex.on("value",this.onUpdate,this),this.tours.outs.stepIndex.on("value",this.onUpdate,this),this.language.outs.activeLanguage.on("value",this.onUpdate,this)),this.requestUpdate()}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.tours.ins.tourIndex.setValue(-1)):"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}textHelper(){const e=this.querySelector("#title-inner"),t=e.scrollWidth-e.offsetWidth+12;if(t>12){const n=this.querySelector("#title-area"),i=t/30;e.classList.remove("ff-ellipsis"),e.style.setProperty("animation-duration",i.toString()+"s"),e.style.setProperty("--x-offset","-"+t+"px"),n.style.setProperty("pointer-events","none"),e.classList.add("sv-text-scroll"),e.addEventListener("animationend",()=>{e.classList.remove("sv-text-scroll"),e.classList.add("ff-ellipsis"),n.style.setProperty("pointer-events","auto")}),e.addEventListener("animationcancel",()=>{e.classList.remove("sv-text-scroll"),e.classList.add("ff-ellipsis"),n.style.setProperty("pointer-events","auto")})}}};Ce=xe([(0,P.EM)("sv-tour-navigator")],Ce);var Ee=n(3675),Me=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Se=class extends s.Ay{constructor(){super(...arguments),this.needsFocus=!1,this.focusableElements=[]}firstConnected(){super.firstConnected(),this.classList.add("sv-document-overlay","sv-article","sv-tour-menu"),this.needsFocus=!0}renderEntry(e,t){return s.qy`<div role="option" title="tour entry" tabindex=${0===t?"0":"-1"} @keydown=${e=>this.onKeyDown(e,t)} class="sv-entry" @click=${e=>this.onClickTour(e,t)}>
            <div class="sv-titlebar">              
                <h1>${(0,B._)(Object.keys(e.titles).length>0?e.titles[Ee.aL[this.activeLanguage]]||"Missing content":e.title)}</h1>
                <ff-icon class="ff-off" name="triangle-right">
            </div>
            <p>${(0,B._)(Object.keys(e.leads).length>0&&Object.values(e.leads).find(e=>e)?e.leads[Ee.aL[this.activeLanguage]]||"Missing content":e.lead)}</p>
        </div>`}render(){const e=this.tours;return 0===e.length?s.qy`<div class="sv-entry">
                <h1>No tours available.</h1>
            </div>`:s.qy`<div role="listbox" aria-label="interactive tour menu" class="ff-scroll-y">
            ${e.map((e,t)=>this.renderEntry(e,t))}
        </div>`}update(e){if(super.update(e),this.needsFocus){this.getElementsByClassName("sv-entry").item(0).focus(),this.needsFocus=!1}}onClickTour(e,t){e.stopPropagation(),this.dispatchEvent(new CustomEvent("select",{detail:{index:t}}))}onKeyDown(e,t){if("Space"===e.code||"Enter"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("select",{detail:{index:t}}));else if("Escape"===e.code)e.preventDefault(),this.dispatchEvent(new CustomEvent("close",{detail:{index:t}}));else if("Tab"===e.code)0===this.focusableElements.length&&(this.focusableElements=(0,C.R)(this)),(0,C.i)(this.focusableElements,e);else if("ArrowUp"===e.code||"ArrowDown"===e.code){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}}};Me([(0,s.MZ)({attribute:!1})],Se.prototype,"tours",void 0),Me([(0,s.MZ)({attribute:!1})],Se.prototype,"activeLanguage",void 0),Se=Me([(0,s.EM)("sv-tour-menu")],Se);var Te,ke=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Le=Te=class extends de.Ay{static show(e,t){const n=new Te(e,t);return e.appendChild(n),new Promise((e,t)=>{n.on("close",()=>e())})}constructor(e,t){super(),this.language=null,this.language=t,this.position="center",this.modal=!0,this.portal=e,this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-language-menu","sv-option-menu")}renderEntry(e,t){const n=e.name===this.language.nameString();return de.qy`<div class="sv-entry" role="option" tabindex=${n?"0":"-1"} @click=${e=>this.onClickLanguage(e,t)} @keydown=${e=>this.onKeyDownEntry(e,t)} ?selected=${n}>
            ${e.name}
        </div>`}render(){const e=this.language;return de.qy`
        <div role="region" aria-label="Language Menu" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-row">
                <div class="ff-flex-spacer ff-title">${e.getLocalizedString("Set Language")}</div>
                <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="ff-flex-row">
                <div class="ff-scroll-y sv-scroll-offset" role="listbox">
                    ${e.sceneLanguages.map((e,t)=>this.renderEntry(e,t))}
                </div>
            </div>
        </div>
        `}firstUpdated(e){super.firstUpdated(e),Array.from(this.getElementsByClassName("sv-entry")).find(e=>"0"===e.getAttribute("tabIndex")).focus()}onClickLanguage(e,t){const n=this.language;e.stopPropagation(),n.ins.activeLanguage.setValue(n.sceneLanguages[t].id),this.close()}onKeyDownEntry(e,t){const n=this.language;if("Space"===e.code||"Enter"===e.code)e.preventDefault(),e.stopPropagation(),n.ins.activeLanguage.setValue(n.sceneLanguages[t].id),this.close();else if("ArrowUp"===e.code||"ArrowDown"===e.code){const t=e.target instanceof Element?e.target:null;if(t){const n="ArrowUp"===e.code?t.previousElementSibling:t.nextElementSibling;n&&(t.setAttribute("tabIndex","-1"),n.setAttribute("tabIndex","0"),n.focus())}}else"Tab"===e.code&&this.addEventListener("blur",this.tabReset,{once:!0,capture:!0})}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}tabReset(e){const t=e.target instanceof Element?e.target:null;if(t){const e=Array.from(t.parentElement.children).find(e=>e.hasAttribute("selected"));e!==t&&(t.setAttribute("tabIndex","-1"),e.setAttribute("tabIndex","0"))}}};Le=Te=ke([(0,de.EM)("sv-language-menu")],Le);const De=Le;var Ie=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Re=class extends P.Ay{get activeTags(){return this.viewer?this.viewer.ins.activeTags.value.split(",").map(e=>e.trim()).filter(e=>!!e):[]}get tagCloud(){return this.viewer?this.viewer.outs.tagCloud.value.split(",").map(e=>e.trim()).filter(e=>!!e):[]}firstConnected(){super.firstConnected(),this.classList.add("sv-bottom-bar-container","sv-tag-cloud","sv-transition"),setTimeout(()=>this.classList.remove("sv-transition"),1)}render(){const e=this.activeTags,t=this.tagCloud.map(t=>P.qy`<ff-button class="sv-tag-button" transparent text=${t}
                ?selected=${e.indexOf(t)>=0}
                @click=${e=>this.onSelectTag(t)}></ff-button>`);return P.qy`<div class="sv-blue-bar" @keydown=${this.onKeyDown} role="region" aria-label="Tag Cloud Menu"><div class="sv-section">
                <ff-button class="sv-section-lead" transparent icon="close" title="Close Tag Menu" @click=${this.onClickClose}></ff-button>
                <div class="sv-tag-buttons">${t}</div>
        </div></div>`}onClickClose(){this.viewer.ins.annotationsVisible.setValue(!1),this.viewer.ins.annotationExit.set()}onSelectTag(e){let t=this.activeTags;const n=this.viewer.ins.radioTags.value,i=t.indexOf(e);i>=0&&!n?t.splice(i,1):i<0&&(n?t=[e]:t.push(e)),this.viewer.ins.annotationFocus.setValue(!0),this.viewer.ins.activeTags.setValue(t.join(", "))}onActiveDocument(e,t){e&&(this.viewer.ins.activeTags.off("value",this.onUpdate,this),this.viewer.outs.tagCloud.off("value",this.onUpdate,this)),t&&(this.viewer=t.setup.viewer,this.viewer.ins.activeTags.on("value",this.onUpdate,this),this.viewer.outs.tagCloud.on("value",this.onUpdate,this))}onKeyDown(e){"Escape"===e.code?(e.preventDefault(),this.onClickClose()):"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}};Re=Ie([(0,P.EM)("sv-tag-cloud")],Re);var Oe,Pe,Be=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};!function(e){e[e.Nav=0]="Nav",e[e.Menu=1]="Menu"}(Pe||(Pe={}));let Ne=Oe=class extends de.Ay{static show(e,t,n){const i=new Oe(e,t,n);return e.appendChild(i),new Promise((e,t)=>{i.on("close",()=>e())})}constructor(e,t,n){super(),this.language=null,this.navMode=u.Kd.Orbit,this.helpView=Pe.Nav,this.language=t,this.navMode=n,this.position="center",this.modal=!0,this.portal=e,this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.classList.add("sv-main-help")}render(){const e=this.language,t=this.navMode===u.Kd.Orbit,n=this.helpView,i=!!this.parentElement.querySelector("#ar-btn"),r=!!this.parentElement.querySelector("#audio-btn"),o=!!this.parentElement.querySelector("#tour-btn"),s=!!this.parentElement.querySelector("#reader-btn"),a=!!this.parentElement.querySelector("#anno-btn"),l=!!this.parentElement.querySelector("#fullscreen-btn"),c=!!this.parentElement.querySelector("#tools-btn"),d=de.qy`<div class="sv-help-text">Ctrl + ${Oe.arrowKeysUD}Arrow keys</div>`,h=de.qy`<div class="sv-help-row" aria-live="polite" aria-atomic="true">
                                    <div class="sv-help-section">
                                        <ff-icon class="ff-off" name="rotate"></ff-icon>
                                        <div class="sv-help-text"><b>${t?"Orbit":"Look Around"}</b></div>
                                        <div class="sv-help-text">${Oe.leftClick}Left-click and drag</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">${Oe.oneFinger}One-finger drag</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">${t?Oe.arrowKeys:Oe.arrowKeysLR}Arrow keys</div>
                                        ${t?null:d}
                                    </div>
                                    <div class="sv-help-section">
                                        <ff-icon class="ff-off" name="move"></ff-icon>
                                        <div class="sv-help-text"><b>Pan</b></div>
                                        <div class="sv-help-text">${Oe.rightClick}Right-click and drag</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">${Oe.twoFinger}Two-finger drag</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">Shift + ${Oe.arrowKeys}Arrow keys</div>
                                    </div>
                                    <div class="sv-help-section">
                                        <ff-icon class="ff-off" name="zoom"></ff-icon>
                                        <div class="sv-help-text"><b>${t?"Zoom":"Forward/Backward"}</b></div>
                                        <div class="sv-help-text">${Oe.mouseWheel}Mouse wheel</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">${Oe.pinch}Two-finger pinch</div>
                                        <div class="sr-only"> Or.</div>
                                        <div class="sv-help-text">${t?"Ctrl + ":""}${t?Oe.arrowKeys:Oe.arrowKeysUD}Arrow keys</div>
                                    </div>
                                    <div id="sr-trigger" class="sr-only"></div>
                                </div>`,p=de.qy`<div class="sv-help-text">The tools below can be accessed by clicking the corresponding icons on the menu bar to the left of the screen.</div>
                                <div class="sv-help-row">
                                    ${i?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="AR." class="ff-off" name="ar"></ff-icon>
                                        <div class="sv-help-text">Launch an augmented<br>reality experience.</div>
                                    </div>`:""}
                                    ${r?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Play Narration." class="ff-off" name="audio"></ff-icon>
                                        <div class="sv-help-text">Hear an audio<br>narration of the scene.</div>
                                    </div>`:""}
                                    ${o?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Tours." class="ff-off" name="globe"></ff-icon>
                                        <div class="sv-help-text">Take a curated guided<br>tour of the scene.</div>
                                    </div>`:""}                       
                                    ${s?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Articles." class="ff-off" name="article"></ff-icon>
                                        <div class="sv-help-text">Read articles about<br>the scene content.</div>
                                    </div>`:""}
                                    ${a?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Annotations." class="ff-off" name="comment"></ff-icon>
                                        <div class="sv-help-text">Show annotations<br>highlighting key points.</div>
                                    </div>`:""}
                                    <div class="sv-help-section sv-help-short">
                                        <ff-icon title="Share." class="ff-off" name="share"></ff-icon>
                                        <div class="sv-help-text">Share the experience<br>with a friend!</div>
                                    </div>
                                    ${l?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Fullscreen." class="ff-off" name="expand"></ff-icon>
                                        <div class="sv-help-text">View the experience<br>in fullscreen mode.</div>
                                    </div>`:""}
                                    ${c?de.qy`<div class="sv-help-section sv-help-short">
                                        <ff-icon title="Advanced Tools." class="ff-off" name="tools"></ff-icon>
                                        <div class="sv-help-text">Open the advanced<br>tool menu.</div>
                                    </div>`:""}
                                </div>`;return de.qy`
        <div class="sv-help-region" role="region" aria-label="Introduction to Voyager" aria-live="polite" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-row">
                <div class="ff-flex-spacer ff-title"><b>${e.getLocalizedString("Introduction to Voyager")}</b></div>
                <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div class="sv-commands">
                <ff-button text="Navigation" index=${Pe.Nav} selectedIndex=${n} @click=${e=>this.onClickSection(e,Pe.Nav)}></ff-button>
                <ff-button text="Menu Icons" index=${Pe.Menu} selectedIndex=${n} @click=${e=>this.onClickSection(e,Pe.Menu)}></ff-button>
            </div>
            ${n===Pe.Nav?h:p}
        </div>
        `}firstUpdated(e){super.firstUpdated(e),Array.from(this.getElementsByClassName("ff-button")).find(e=>"Navigation"===e.getAttribute("text")).focus(),setTimeout(()=>{this.querySelector("#sr-trigger").textContent="section end"},100)}onClickSection(e,t){this.helpView=t,this.requestUpdate()}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}tabReset(e){const t=e.target instanceof Element?e.target:null;if(t){const e=Array.from(t.parentElement.children).find(e=>e.hasAttribute("selected"));e!==t&&(t.setAttribute("tabIndex","-1"),e.setAttribute("tabIndex","0"))}}};Ne.leftClick=de.qy`<svg class="ff-icon" viewBox="150 150 900 900" xmlns="http://www.w3.org/2000/svg"><path d="m600 930.62c-121.73 0-220.41-98.684-220.41-220.41v-220.42c0-121.73 98.684-220.42 220.41-220.42 121.73 0 220.42 98.684 220.42 220.42v220.42c0 121.73-98.684 220.41-220.42 220.41zm-188.93-346.37h377.86v125.95c0 104.34-84.594 188.93-188.93 188.93s-188.93-84.59-188.93-188.93zm159.28-85.285c4.2188 2.8008 8.9414 4.7539 13.902 5.7617v48.035h-106.02zm-17.586-62.66v29.863c0 2.125 0.17188 4.2383 0.50391 6.3008l-137.46 80.293h-4.7383v-33.691zm62.977-71.668v-63.133c96.969 7.9961 173.18 89.234 173.18 188.28v62.977h-173.18v-48.035c7.5078-1.5273 14.469-5.2266 19.965-10.723 7.3828-7.3828 11.523-17.395 11.523-27.836v-62.977c0-10.438-4.1406-20.449-11.523-27.832-5.4961-5.4961-12.457-9.1953-19.965-10.723zm-31.488-19.664v19.664c-7.5117 1.5273-14.469 5.2266-19.965 10.723-6.5625 6.5625-10.562 15.207-11.367 24.387l-141.71 82.766c0.51953-13.695 2.4883-27.031 5.7773-39.832zm31.488 121.2v-62.977c0-2.0938-0.83594-4.0898-2.3008-5.5703-1.4766-1.4648-3.4766-2.3008-5.5703-2.3008h-15.746c-2.0938 0-4.0938 0.83594-5.5742 2.3008-1.4609 1.4805-2.2969 3.4766-2.2969 5.5703v62.977c0 2.0938 0.83594 4.0938 2.2969 5.5742 1.4805 1.4648 3.4805 2.3008 5.5742 2.3008h15.746c2.0938 0 4.0938-0.83594 5.5703-2.3008 1.4648-1.4805 2.3008-3.4805 2.3008-5.5742zm-31.488-157.66-147.54 86.184c30.262-51.859 84.516-87.992 147.54-93.188z" fill-rule="evenodd"/></svg>`,Ne.rightClick=de.qy`<svg class="ff-icon" viewBox="150 150 900 900" xmlns="http://www.w3.org/2000/svg"><path d="m600 930.62c121.73 0 220.42-98.684 220.42-220.41v-220.42c0-121.73-98.684-220.42-220.42-220.42-121.73 0-220.41 98.684-220.41 220.42v220.42c0 121.73 98.684 220.41 220.41 220.41zm188.93-346.37h-377.86v125.95c0 104.34 84.59 188.93 188.93 188.93s188.93-84.59 188.93-188.93zm-159.28-85.285c-4.2188 2.8008-8.9414 4.7539-13.902 5.7617v48.035h106.02zm17.586-62.66v29.863c0 2.125-0.17188 4.2383-0.50391 6.3008l137.46 80.293h4.7383v-33.691zm-62.977-71.668v-63.133c-96.969 7.9961-173.18 89.234-173.18 188.28v62.977h173.18v-48.035c-7.5117-1.5273-14.469-5.2266-19.965-10.723-7.3828-7.3828-11.523-17.395-11.523-27.836v-62.977c0-10.438 4.1406-20.449 11.523-27.832 5.4961-5.4961 12.453-9.1953 19.965-10.723zm31.488-19.664v19.664c7.5078 1.5273 14.469 5.2266 19.965 10.723 6.5625 6.5625 10.562 15.207 11.367 24.387l141.71 82.766c-0.51953-13.695-2.4883-27.031-5.7773-39.832zm-31.488 121.2v-62.977c0-2.0938 0.83594-4.0898 2.2969-5.5703 1.4805-1.4648 3.4805-2.3008 5.5742-2.3008h15.746c2.0938 0 4.0938 0.83594 5.5703 2.3008 1.4648 1.4805 2.3008 3.4766 2.3008 5.5703v62.977c0 2.0938-0.83594 4.0938-2.3008 5.5742-1.4766 1.4648-3.4766 2.3008-5.5703 2.3008h-15.746c-2.0938 0-4.0938-0.83594-5.5742-2.3008-1.4609-1.4805-2.2969-3.4805-2.2969-5.5742zm31.488-157.66 147.54 86.184c-30.258-51.859-84.512-87.992-147.54-93.188z" fill-rule="evenodd"/></svg>`,Ne.mouseWheel=de.qy`<svg class="ff-icon" viewBox="150 -100 1200 1400" xmlns="http://www.w3.org/2000/svg"><path d="m576.05 422.12v-220.24l-55.078 55.078c-9.3711 9.3711-24.551 9.3711-33.938 0-9.3828-9.3711-9.3828-24.562 0-33.938l96-96c9.3711-9.3711 24.562-9.3711 33.938 0l96 96c9.3711 9.3711 9.3711 24.562 0 33.938-4.6914 4.6953-10.824 7.0352-16.969 7.0352s-12.277-2.3398-16.969-7.0312l-55.152-55.152v220.36l55.152-55.141c9.3711-9.3828 24.562-9.3828 33.938 0 9.3711 9.3711 9.3711 24.551 0 33.938l-96 96c-4.6914 4.6914-10.824 7.0312-16.969 7.0312s-12.277-2.3398-16.969-7.0312l-96-96c-9.3828-9.3711-9.3828-24.562 0-33.938 9.3711-9.3828 24.551-9.3828 33.938 0zm455.95 9.875v336c0 238.2-193.79 432-431.98 432-238.2 0-431.98-193.8-431.98-432v-167.77c0-0.082031-0.046875-0.15625-0.046875-0.22656s0.046875-0.14453 0.046875-0.22656v-167.77c0-238.21 193.78-432 431.98-432 238.19 0 431.98 193.79 431.98 432zm-815.95 0v144h767.95v-144c0-211.74-172.25-384-383.98-384-211.73 0-383.98 172.26-383.98 384zm767.95 336v-144h-767.95v144c0 211.74 172.25 384 383.98 384 211.73 0 383.98-172.26 383.98-384z"/></svg>`,Ne.pinch=de.qy`<svg class="ff-icon" viewBox="150 150 1100 900" xmlns="http://www.w3.org/2000/svg"><g>
        <path d="m250.61 558.14c-5.8594-5.8594-15.352-5.8594-21.211 0l-60 60c-4.2891 4.2812-5.5781 8.8711-3.25 14.469 2.332 5.6016 7.793 7.3906 13.852 7.3906h40v103.75c0 10 10 20 20 20s20-10 20-20v-103.75h40c6.0586 0 11.531-1.7812 13.859-7.3789 2.3281-5.6016 1.0391-11.129-3.25-15.41z"/>
        <path d="m300 400h-40v-96.25c0-10-10-20-20-20s-20 10-20 20v96.25h-40c-6.0586 0-11.531 5.5312-13.859 11.129-2.3281 5.6016-1.0391 12.988 3.25 17.281l60 60.469c5.8594 5.8594 15.352 6.0898 21.211 0.23047l60-59.879c4.2891-4.2891 5.5781-12.551 3.25-18.16-2.332-5.6094-7.793-11.07-13.852-11.07z"/>
        <path d="m951.12 426.6c-8.4414-23.172-31.691-38.738-57.859-38.738-7.3789 0-14.578 1.25-21.398 3.7383-6.3398 2.3008-13.488 6.6406-19.93 11.719-11.34-24.57-36.191-40.699-63.559-40.699-8.1602 0-16.219 1.4297-23.941 4.2383-15.371 5.6016-28.039 16.129-36.262 30.031-13.07-15.41-32.52-24.828-53.441-24.828-8.1602 0-16.211 1.4297-23.941 4.2383-18.199 6.6289-34.172 19.539-43.809 35.422-3.0586 5.0391-5.4492 10.32-7.1602 15.75-15.309-23.609-32.859-47.961-49.23-64.328-29.879-29.879-73.711-65.5-112.82-65.5-6.8906 0-13.461 1.1211-19.512 3.3203-18.988 6.9102-33.469 21.809-39.719 40.859-6.5312 19.941-3.2695 41.891 8.9609 60.238 9.3086 13.961 21.672 22.238 34.762 31.012 19.578 13.109 41.762 27.961 64.699 68.109 27.121 47.449 59.98 133.01 77.52 180.85l-75.461-37.262c-11.012-5.1406-22.68-7.7383-34.691-7.7383-31.52 0-60.551 18.551-73.941 47.281-19.16 41.09-1.4609 90.051 38.73 108.77 0.67969 0.35937 69.57 37.191 164.98 81.68l15.602 7.3008c61.121 28.699 118.85 55.82 185.77 55.82h0.011719c31.871 0 63.789-5.9805 97.559-18.27 118.67-43.191 136.7-117.21 145-189.31 8-69.348-73.438-294.17-76.918-303.71zm47.129 300.28c-7.8086 67.891-22.641 127.12-125.45 164.55-30.441 11.07-58.988 16.461-87.301 16.461h-0.011719c-60.219 0-112.5-24.551-173.02-52.98l-15.672-7.3281c-94.602-44.121-162.81-80.59-164.24-81.309-25.941-12.102-37.129-43.18-24.961-69.281 8.6094-18.48 26.52-29.949 46.75-29.949 7.5898 0 14.988 1.6484 21.699 4.7812l108.46 53.551c5.4609 2.7109 11.988 1.8398 16.551-2.1914 4.5703-4.0195 6.25-10.398 4.2695-16.148-2.1094-6.0898-52.059-150.32-92.289-220.73-26.449-46.27-53.961-64.699-74.051-78.148-11.461-7.6719-20.5-13.73-26.488-22.719-7.0898-10.641-9.0703-23.121-5.4219-34.262 3.3594-10.25 11.191-18.281 21.461-22.02 20.762-7.6016 59.32 13.648 100.87 55.199 37.922 37.922 85.922 128.33 86.398 129.24 3.6797 6.9609 12.121 9.8984 19.352 6.6992 7.2109-3.1992 10.711-11.43 8.0117-18.84l-13.68-37.59c-4.7305-13-3.6602-25.32 3.1797-36.602 6.1484-10.148 16.512-18.461 28.41-22.789 4.4297-1.6094 9.0312-2.4297 13.68-2.4297 16.762 0 31.871 10.59 37.602 26.328l18.809 51.68c2.8281 7.7812 11.449 11.801 19.219 8.9609 7.7812-2.8281 11.801-11.441 8.9609-19.219l-8.5391-23.5c-3.6484-10.039-3.1719-20.898 1.3398-30.59 4.5117-9.6914 12.531-17.031 22.578-20.68 4.4102-1.6094 9.0195-2.4297 13.672-2.4297 16.75 0 31.859 10.59 37.59 26.34l22.238 61.078c2.8398 7.7891 11.469 11.789 19.219 8.9609 7.7891-2.8398 11.809-11.449 8.9609-19.23l-13.18-36.238c4.0586-4.4492 12.559-11.422 18.941-13.738 3.5195-1.2812 7.2695-1.9297 11.129-1.9297 13.398 0 25.602 7.8086 29.68 19 22.93 63.145 81.23 238.27 75.27 290.04z"/></g></svg>`,Ne.oneFinger=de.qy`<svg class="ff-icon" viewBox="150 80 1200 1100" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd">
        <path d="m840 440c-16.465 0-31.77 4.9766-44.492 13.504-10.934-31.16-40.613-53.504-75.508-53.504-14.57 0-28.234 3.8945-40 10.703v-170.7c0-44.184-35.816-80-80-80s-80 35.816-80 80v390.36l-40.387-69.953c-22.09-38.262-71.02-51.371-109.28-29.281-38.262 22.094-51.375 71.02-29.281 109.28 5.0859 8.8164 24.68 42.715 28.75 49.801 31.137 54.199 41.914 146.04 73.188 200.31 43.637 75.727 116.69 175.49 120.79 181.18 6.457 8.9609 18.957 10.992 27.918 4.5352 8.9609-6.457 10.992-18.957 4.5352-27.918-4.0273-5.5859-82.762-115.18-118.68-177.9-24.391-42.598-38.934-141.56-73.109-200.2-4.1055-7.0508-23.664-40.984-28.75-49.801-11.047-19.129-4.4922-43.594 14.641-54.641 19.133-11.043 43.594-4.4883 54.641 14.641l74.84 129.63c7.0039 14.672 40.188 13.93 40.188-10.035v-460c0-22.09 17.91-40 40-40s40 17.91 40 40v340c0 11.047 8.9531 20 20 20s20-8.9531 20-20v-100c0-22.09 17.91-40 40-40s40 17.91 40 40v100c0 11.047 8.9531 20 20 20s20-8.9531 20-20v-60c0-22.09 17.91-40 40-40s40 17.91 40 40v100c0 11.047 8.9531 20 20 20s20-8.9531 20-20v-60c0-22.09 17.91-40 40-40s40 17.91 40 40v140c0 130.99-80 255.81-80 360 0 11.047 8.9531 20 20 20s20-8.9531 20-20c0-89.777 80-228.5 80-360v-140c0-44.184-35.816-80-80-80-16.465 0-31.77 4.9766-44.492 13.504-10.934-31.16-40.613-53.504-75.508-53.504z"/>
        <path d="m234.14 245.86c7.8125 7.8086 7.8125 20.473 0 28.281-7.8086 7.8125-20.473 7.8125-28.281 0l-80-80c-7.8125-7.8086-7.8125-20.473 0-28.281l80-80c7.8086-7.8125 20.473-7.8125 28.281 0 7.8125 7.8086 7.8125 20.473 0 28.281l-45.855 45.859h271.71c11.047 0 20 8.9531 20 20s-8.9531 20-20 20h-271.83z"/>
        <path d="m965.86 245.86c-7.8125 7.8086-7.8125 20.473 0 28.281 7.8086 7.8125 20.473 7.8125 28.281 0l80-80c7.8125-7.8086 7.8125-20.473 0-28.281l-80-80c-7.8086-7.8125-20.473-7.8125-28.281 0-7.8125 7.8086-7.8125 20.473 0 28.281l45.855 45.859h-271.71c-11.047 0-20 8.9531-20 20s8.9531 20 20 20h271.83z"/></g></svg>`,Ne.twoFinger=de.qy`<svg class="ff-icon" viewBox="40 80 1300 1100" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd">
        <path d="m154.14 245.86c7.8125 7.8086 7.8125 20.473 0 28.281-7.8086 7.8125-20.473 7.8125-28.281 0l-80-80c-7.8125-7.8086-7.8125-20.473 0-28.281l80-80c7.8086-7.8125 20.473-7.8125 28.281 0 7.8125 7.8086 7.8125 20.473 0 28.281l-45.855 45.859h271.71c11.047 0 20 8.9531 20 20s-8.9531 20-20 20h-271.83z"/>
        <path d="m1005.9 245.86c-7.8125 7.8086-7.8125 20.473 0 28.281 7.8086 7.8125 20.473 7.8125 28.281 0l80-80c7.8125-7.8086 7.8125-20.473 0-28.281l-80-80c-7.8086-7.8125-20.473-7.8125-28.281 0-7.8125 7.8086-7.8125 20.473 0 28.281l45.855 45.859h-271.71c-11.047 0-20 8.9531-20 20s8.9531 20 20 20h271.83z"/>
        <path d="m760 560c34.895 0 64.574 22.344 75.508 53.504 12.723-8.5273 28.027-13.504 44.492-13.504 44.184 0 80 35.816 80 80v140c0 131.5-80 270.22-80 360 0 11.047-8.9531 20-20 20s-20-8.9531-20-20c0-104.19 80-229.01 80-360v-140c0-22.09-17.91-40-40-40s-40 17.91-40 40v60c0 11.047-8.9531 20-20 20s-20-8.9531-20-20v-100c0-22.09-17.91-40-40-40s-40 17.91-40 40v60c0 11.047-8.9531 20-20 20s-20-8.9531-20-20v-420c0-22.09-17.91-40-40-40s-40 17.91-40 40v420c0 11.047-8.9531 20-20 20s-20-8.9531-20-20v-340c0-22.09-17.91-40-40-40s-40 17.91-40 40v460c0 23.965-33.184 24.707-40.188 10.035l-74.84-129.63c-11.047-19.129-35.508-25.684-54.641-14.641-19.133 11.047-25.688 35.512-14.641 54.641 5.0859 8.8164 24.645 42.75 28.75 49.801 34.176 58.645 48.719 157.61 73.109 200.2 35.914 62.723 114.65 172.31 118.68 177.9 6.457 8.9609 4.4258 21.461-4.5352 27.918-8.9609 6.457-21.461 4.4258-27.918-4.5352-4.0977-5.6875-77.148-105.45-120.79-181.18-31.273-54.27-42.051-146.11-73.188-200.31-4.0703-7.0859-23.664-40.984-28.75-49.801-22.094-38.262-8.9805-87.188 29.281-109.28 38.262-22.09 87.191-8.9805 109.28 29.281l40.387 69.953v-390.36c0-44.184 35.816-80 80-80 14.57 0 28.234 3.8945 40 10.703v-10.703c0-44.184 35.816-80 80-80s80 35.816 80 80v290.7c11.766-6.8086 25.43-10.703 40-10.703z"/></g></svg>`,Ne.arrowKeys=de.qy`<svg class="ff-icon" viewBox="0 200 1300 800" xmlns="http://www.w3.org/2000/svg"><g>
        <path d="m479.04 936.24h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.003906-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.559 0-40.922 18.359-40.922 40.922v238.92c0.003906 22.555 18.363 40.914 40.922 40.914zm85.562-148.56h24.84v-86.039c0-4.9219 4.0781-9 9-9s9 4.0781 9 9v86.039h24.84c4.9219 0 7.9219 5.2812 5.5195 9.4805l-33.84 58.68c-2.3984 4.1992-8.5195 4.1992-11.039 0l-33.84-58.68c-2.4023-4.1992 0.71875-9.4805 5.5195-9.4805z"/>
        <path d="m717.96 263.76h-238.92c-22.559 0-40.922 18.359-40.922 40.922l0.003906 238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.007813-238.92c0-22.559-18.359-40.918-40.918-40.918zm-85.562 148.56h-24.84v86.039c0 4.9219-4.0781 9-9 9s-9-4.0781-9-9v-86.039h-24.84c-4.9219 0-7.9219-5.2812-5.5195-9.4805l33.84-58.68c2.3984-4.1992 8.5195-4.1992 11.039 0l33.84 58.68c2.4023 4.1992-0.59766 9.4805-5.5195 9.4805z"/>
        <path d="m1116 895.32v-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.559 0-40.922 18.359-40.922 40.922v238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.68-0.007813 40.918-18.367 40.918-40.926zm-148.44-85.559v-24.961h-86.039c-4.9219 0-9-4.0781-9-9s4.0781-9 9-9h86.039v-24.84c0-4.9219 5.2812-7.9219 9.4805-5.5195l58.68 33.84c4.1992 2.3984 4.1992 8.5195 0 11.039l-58.68 33.84c-4.1992 2.5195-9.4805-0.60156-9.4805-5.3984z"/>
        <path d="m84 656.4v238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.003906-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.684 0-40.922 18.359-40.922 40.918zm148.44 85.562v24.84h86.039c4.9219 0 9 4.0781 9 9s-4.0781 9-9 9h-86.039v24.84c0 4.9219-5.2812 7.9219-9.4805 5.5195l-58.68-33.84c-4.1992-2.3984-4.1992-8.5195 0-11.039l58.68-33.84c4.1992-2.4023 9.4805 0.59766 9.4805 5.5195z"/></g></svg>`,Ne.arrowKeysUD=de.qy`<svg class="ff-icon" viewBox="350 200 500 800" xmlns="http://www.w3.org/2000/svg"><g>
        <path d="m479.04 936.24h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.003906-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.559 0-40.922 18.359-40.922 40.922v238.92c0.003906 22.555 18.363 40.914 40.922 40.914zm85.562-148.56h24.84v-86.039c0-4.9219 4.0781-9 9-9s9 4.0781 9 9v86.039h24.84c4.9219 0 7.9219 5.2812 5.5195 9.4805l-33.84 58.68c-2.3984 4.1992-8.5195 4.1992-11.039 0l-33.84-58.68c-2.4023-4.1992 0.71875-9.4805 5.5195-9.4805z"/>
        <path d="m717.96 263.76h-238.92c-22.559 0-40.922 18.359-40.922 40.922l0.003906 238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.007813-238.92c0-22.559-18.359-40.918-40.918-40.918zm-85.562 148.56h-24.84v86.039c0 4.9219-4.0781 9-9 9s-9-4.0781-9-9v-86.039h-24.84c-4.9219 0-7.9219-5.2812-5.5195-9.4805l33.84-58.68c2.3984-4.1992 8.5195-4.1992 11.039 0l33.84 58.68c2.4023 4.1992-0.59766 9.4805-5.5195 9.4805z"/>
        </g></svg>`,Ne.arrowKeysLR=de.qy`<svg class="ff-icon" viewBox="350 350 950 800" xmlns="http://www.w3.org/2000/svg"><g>
        <path d="m1116 895.32v-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.559 0-40.922 18.359-40.922 40.922v238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.68-0.007813 40.918-18.367 40.918-40.926zm-148.44-85.559v-24.961h-86.039c-4.9219 0-9-4.0781-9-9s4.0781-9 9-9h86.039v-24.84c0-4.9219 5.2812-7.9219 9.4805-5.5195l58.68 33.84c4.1992 2.3984 4.1992 8.5195 0 11.039l-58.68 33.84c-4.1992 2.5195-9.4805-0.60156-9.4805-5.3984z"/>
        <g transform="translate(350 0)"><path d="m84 656.4v238.92c0 22.559 18.359 40.922 40.922 40.922h238.92c22.559 0 40.922-18.359 40.922-40.922l-0.003906-238.92c0-22.559-18.359-40.922-40.922-40.922l-238.92 0.003907c-22.684 0-40.922 18.359-40.922 40.918zm148.44 85.562v24.84h86.039c4.9219 0 9 4.0781 9 9s-4.0781 9-9 9h-86.039v24.84c0 4.9219-5.2812 7.9219-9.4805 5.5195l-58.68-33.84c-4.1992-2.3984-4.1992-8.5195 0-11.039l58.68-33.84c4.1992-2.4023 9.4805 0.59766 9.4805 5.5195z"/></g></g></svg>`,Ne=Oe=Be([(0,de.EM)("sv-main-help")],Ne);const Ue=Ne;var Fe,ze=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let He=Fe=class extends de.Ay{static show(e,t,n){const i=new Fe(e,t,n);return e.appendChild(i),new Promise((e,t)=>{i.on("close",()=>e())})}constructor(e,t,n){super(),this.language=null,this.content="",this.language=t,this.content=n,this.position="center",this.portal=e,this.modal=!0,this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}firstConnected(){super.firstConnected(),this.contentElement=this.createElement("div",null),this.classList.add("sv-splash")}render(){const e=this.language,t=this.contentElement;return t.innerHTML=this.content,de.qy`
        <div id="main" tabIndex="-1" role="region" aria-label="Introduction to Voyager" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-row">
                <div class="ff-flex-spacer ff-title"><b>${e.getLocalizedString("Welcome to Voyager")}</b></div>
                <ff-button icon="close" transparent class="ff-close-button" title=${e.getLocalizedString("Close")} @click=${this.close}></ff-button>
            </div>
            <div>
                ${t}
            </div>
        </div>
        `}firstUpdated(e){super.firstUpdated(e),this.querySelector("#main").focus()}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(0,C.i)((0,C.R)(this),e)}};He=Fe=ze([(0,de.EM)("sv-splash")],He);const je=He;var Ve=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Ye=class extends P.Ay{constructor(){super(...arguments),this.documentProps=new d.A("value",this.onUpdate,this),this.assetPath="",this.needsSplash=!0}get toolProvider(){return this.system.getMainComponent(re.A)}get assetReader(){return this.system.getMainComponent(Z.A)}firstConnected(){this.style.pointerEvents="none",this.setAttribute("pointer-events","none"),this.classList.add("sv-chrome-view")}connected(){super.connected(),this.toolProvider.ins.visible.on("value",this.onUpdate,this),this.activeDocument.setup.language.outs.activeLanguage.on("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.isPlaying.on("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationPlaying.on("value",this.onUpdate,this),this.activeDocument.setup.audio.ins.captionsEnabled.on("value",this.onUpdate,this),this.titleElement=this.createElement("div",null),this.titleElement.classList.add("ff-ellipsis"),this.assetPath=this.assetReader.getSystemAssetUrl("")}disconnected(){this.activeDocument.setup.audio.ins.captionsEnabled.off("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationPlaying.off("value",this.onUpdate,this),this.activeDocument.setup.audio.outs.isPlaying.off("value",this.onUpdate,this),this.activeDocument.setup.language.outs.activeLanguage.off("value",this.onUpdate,this),this.toolProvider.ins.visible.off("value",this.onUpdate,this),super.disconnected()}render(){const e=this.activeDocument,t=this.titleElement;if(!e)return P.qy``;const n=e.setup,i=n.interface.ins.visible.value,r=n.interface.ins.logo.value&&n.interface.isShowing(we.T.logo),o=n.interface.ins.menu.value&&n.interface.isShowing(we.T.menu),s=n.interface.ins.visibleElements.value&&n.interface.isShowing(we.T.title),a=n.interface.ins.visibleElements.value&&n.interface.isShowing(we.T.help),l=n.reader.ins.enabled.value,c=n.tours.tours,d=n.tours.ins.enabled.value,u=n.tours.outs.tourIndex.value>=0,h=n.language,p=h.sceneLanguages,m=h.outs.activeLanguage.value,f=p.length>1&&n.interface.isShowing(we.T.language),g=n.audio.outs.isPlaying.value&&n.audio.getClipCaptionUri(n.audio.activeId),v=n.audio.ins.captionsEnabled.value,y=n.audio.outs.narrationPlaying.value,b=!!this.system.getComponent("CVStoryApplication",!0)||!d,A=n.viewer.ins.annotationsVisible.value&&n.viewer.outs.tagCloud.value,_=!l&&this.toolProvider.ins.visible.value,w=this.activeDocument.setup.tours.outs.ending.value;this.activeDocument.setup.tours.outs.ending.setValue(!1);const x=this.activeDocument.outs.intro.value;if(x&&(this.needsSplash&&x.length>0&&je.show(this,this.activeDocument.setup.language,x).then(()=>{this.getRootNode().getElementById("sv-scene").focus()}),this.needsSplash=!1),!i)return P.qy``;let C;return C=d?u?h.getLocalizedString("Tour")+": "+n.tours.outs.tourTitle.value:h.getLocalizedString("Interactive Tours"):e.outs.title.value||"Missing Title",t.innerHTML=C,P.qy`${w?P.qy`<div class="sr-only" role="alert" id="screen-reader-msg">Tour Ending...</div>`:null}
            ${y?P.qy`<div class="sv-narrate-player">${n.audio.getPlayerById(n.audio.narrationId)}</div>`:null}
            <div class="sv-chrome-header">
                <div class="sv-main-menu-wrapper">
                    ${o?P.qy`<sv-main-menu role="region" aria-label="Main toolbar" .system=${this.system}></sv-main-menu>`:null}
                </div>
                <div class="sv-top-bar">
                    ${s?P.qy`<div role="heading" class="ff-ellipsis sv-main-title">${t}<span class="ff-ellipsis"> </span></div>`:null}
                    ${r?P.qy`<sv-logo .assetPath=${this.assetPath}></sv-logo>`:null}
                </div>
            </div>
            <div class="ff-flex-spacer"></div>
            ${d&&u?P.qy`<sv-tour-navigator @close=${this.closeTours} .system=${this.system}></sv-tour-navigator>`:null}
            ${d&&!u?P.qy`<sv-tour-menu .tours=${c} .activeLanguage=${m} @close=${this.closeTours} @select=${this.onSelectTour}></sv-tour-menu>`:null}
            ${A&&b?P.qy`<sv-tag-cloud .system=${this.system}></sv-tag-cloud>`:null}
            ${_&&b?P.qy`<div class="sv-tool-bar-container"><sv-tool-bar .system=${this.system} @close=${this.closeTools}></sv-tool-bar></div>`:null}
            <div class="sv-chrome-footer">
                <div class="sv-bottom-bar">
                    ${i?P.qy`<ff-button icon="undo" id="main-reset" title=${h.getLocalizedString("Reset")} ?selected=${!1} @click=${this.resetViewer} class="sv-text-icon"></ff-button>`:""}
                    ${g?P.qy`<ff-button icon="caption" id="main-caption" title=${h.getLocalizedString("Captions")} ?selected=${v} @click=${this.updateCaptions} class="sv-text-icon"></ff-button>`:""}
                    ${f?P.qy`<ff-button id="language" style=${n.language.codeString().length>2?"font-size:0.9em":""} text=${n.language.codeString()} title=${h.getLocalizedString("Set Language")} @click=${this.openLanguageMenu} class="sv-text-icon"></ff-button>`:null}
                    ${a?P.qy`<ff-button icon="help" id="main-help" title=${h.getLocalizedString("Help")} ?selected=${!1} @click=${this.openHelp} class="sv-text-icon"></ff-button>`:""}
                </div>
            </div>`}onSelectTour(e){this.activeDocument.setup.tours.ins.tourIndex.setValue(e.detail.index)}closeTours(){const e=this.activeDocument.setup.tours;e.ins.enabled.setValue(!1),e.ins.closed.set()}updateCaptions(){const e=this.activeDocument.setup.audio.ins;e.captionsEnabled.setValue(!e.captionsEnabled.value)}openLanguageMenu(){const e=this.activeDocument.setup.language;e.ins.enabled.value||(e.ins.enabled.setValue(!0),De.show(this,this.activeDocument.setup.language).then(()=>{e.ins.enabled.setValue(!1),this.querySelector("#language").focus()}))}openHelp(){const e=this.activeDocument.setup.language,t=this.activeDocument.setup.navigation.ins.mode.value;Ue.show(this,e,t).then(()=>{this.querySelector("#main-help").focus()})}resetViewer(){this.activeDocument.setup.resetViewer()}closeTools(){const e=this.toolProvider.ins;e.visible.setValue(!1),e.closed.set()}onActiveDocument(e,t){if(e&&this.documentProps.off(),t){const e=t.setup;this.documentProps.on(t.outs.title,t.outs.assetPath,e.interface.ins.visible,e.interface.ins.logo,e.interface.ins.menu,e.viewer.ins.annotationsVisible,e.reader.ins.enabled,e.tours.ins.enabled,e.tours.outs.tourIndex)}this.requestUpdate()}};Ye=Ve([(0,P.EM)("sv-chrome-view")],Ye);const Ge=Ye;var Qe=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};a.A.add("globe",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"/></svg>`),a.A.add("cog",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"/></svg>`),a.A.add("eye",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M569.354 231.631C512.969 135.949 407.81 72 288 72 168.14 72 63.004 135.994 6.646 231.631a47.999 47.999 0 0 0 0 48.739C63.031 376.051 168.19 440 288 440c119.86 0 224.996-63.994 281.354-159.631a47.997 47.997 0 0 0 0-48.738zM288 392c-75.162 0-136-60.827-136-136 0-75.162 60.826-136 136-136 75.162 0 136 60.826 136 136 0 75.162-60.826 136-136 136zm104-136c0 57.438-46.562 104-104 104s-104-46.562-104-104c0-17.708 4.431-34.379 12.236-48.973l-.001.032c0 23.651 19.173 42.823 42.824 42.823s42.824-19.173 42.824-42.823c0-23.651-19.173-42.824-42.824-42.824l-.032.001C253.621 156.431 270.292 152 288 152c57.438 0 104 46.562 104 104z"/></svg>`),a.A.add("palette",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M128 224c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.4-32-32-32zM418.6 58.1C359.2 9.3 281.3-10 204.6 5 104.9 24.4 24.7 104.2 5.1 203.7c-16.7 84.2 8.1 168.3 67.8 230.6 47.3 49.4 109.7 77.8 167.9 77.8 8.8 0 17.5-.6 26.1-2 24.2-3.7 44.6-18.7 56.1-41.1 12.3-24 12.3-52.7.2-76.6-6.1-12-5.5-26.2 1.8-38 7-11.8 18.7-18.4 32-18.4h72.2c46.4 0 82.8-35.7 82.8-81.3-.2-76.4-34.3-148.1-93.4-196.6zM429.2 288H357c-29.9 0-57.2 15.4-73 41.3-16 26.1-17.3 57.8-3.6 84.9 5.1 10.1 5.1 22.7-.2 32.9-2.6 5-8.7 13.7-20.6 15.6-49.3 7.7-108.9-16.6-152-61.6-48.8-50.9-69-119.4-55.4-188 15.9-80.6 80.8-145.3 161.6-161 62.6-12.3 126.1 3.5 174.3 43.1 48.1 39.5 75.7 97.6 75.9 159.6 0 18.6-15.3 33.2-34.8 33.2zM160 128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.4-32-32-32zm96-32.1c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32c0-17.6-14.3-32-32-32zm96 32.1c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"/></svg>`),a.A.add("comment",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"/></svg>`),a.A.add("article",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/></svg>`),a.A.add("document",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg>`),a.A.add("share",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg>`),a.A.add("expand",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M241,29V141.53a14,14,0,0,1-14,14h-18.7a14,14,0,0,1-14-14V61.74H114.45a14,14,0,0,1-14-14L100.3,29a14,14,0,0,1,14-14H226.89A14,14,0,0,1,241,29Z"/><path d="M15,226.67V114.11a14,14,0,0,1,14-14h18.7a14,14,0,0,1,14,14V193.9h79.79a14,14,0,0,1,14,14l.12,18.74a14,14,0,0,1-14,14H29.07A14,14,0,0,1,15,226.67Z"/></svg>`),a.A.add("zoom",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"/></svg>`),a.A.add("tools",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"/></svg>`),a.A.add("environment",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M219.81,14.75H36.19A21.19,21.19,0,0,0,15,35.94V220.06a21.19,21.19,0,0,0,21.19,21.19H219.81A21.19,21.19,0,0,0,241,220.06V35.94A21.19,21.19,0,0,0,219.81,14.75Zm-2.65,205.31H38.84a2.64,2.64,0,0,1-2.65-2.65V38.59a2.64,2.64,0,0,1,2.65-2.65H217.16a2.64,2.64,0,0,1,2.65,2.65V217.41A2.64,2.64,0,0,1,217.16,220.06ZM72.16,71.59A18.32,18.32,0,1,0,90.47,89.91,18.32,18.32,0,0,0,72.16,71.59ZM57.51,198.15H204V141.53l-40.06-40.06a5.49,5.49,0,0,0-7.77,0l-54.72,54.71L83.36,138.09a5.47,5.47,0,0,0-7.76,0L57.51,156.18Z"/></svg>`),a.A.add("bulb",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M44.73 323.21c-7.65 4.42-10.28 14.2-5.86 21.86l8 13.86c4.42 7.65 14.21 10.28 21.86 5.86l93.26-53.84a207.865 207.865 0 0 1-26.83-39.93l-90.43 52.19zM112.46 168H16c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h100.21a210.423 210.423 0 0 1-3.75-48zm127.6 291.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H240.02l.04 43.18zM44.73 60.78l78.98 45.6c5.37-15.29 12.97-29.48 21.64-42.93L68.73 19.21c-7.65-4.42-17.44-1.8-21.86 5.86l-8 13.86c-4.42 7.65-1.79 17.44 5.86 21.85zm550.54 0c7.65-4.42 10.28-14.2 5.86-21.86l-8-13.86c-4.42-7.65-14.21-10.28-21.86-5.86l-76.61 44.23c8.68 13.41 15.76 27.9 21.2 43.19l79.41-45.84zm0 262.43l-90.97-52.52c-7.33 14.23-15.8 27.88-26.36 40.21l93.33 53.88c7.65 4.42 17.44 1.8 21.86-5.86l8-13.86c4.42-7.64 1.79-17.43-5.86-21.85zM624 168h-96.41c.1 2.68.41 5.3.41 8 0 13.54-1.55 26.89-4.12 40H624c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16zM320 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zm0-80C217.72 0 144 82.97 144 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.53-23.43-31.52-53.14-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C479.55 260.85 496 220.37 496 176 496 78.8 417.2 0 320 0z"/></svg>`),a.A.add("spot",s.qy`<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M301.87 108.727c0 52.94 43.06 96 96 96 8.84 0 16-7.16 16-16s-7.16-16-16-16c-35.3 0-64-28.72-64-64 0-8.84-7.16-16-16-16s-16 7.16-16 16zM478.636 144.265a15.898 15.898 0 0 0 4.356-8.146l8.718-43.38a16.008 16.008 0 0 0-4.37-14.468l-55.755-55.755a15.982 15.982 0 0 0-14.467-4.37l-43.381 8.718a16.084 16.084 0 0 0-8.146 4.356l-30.568 30.498L448.13 174.826zM30.3 216.774c-7.856 4.045-10.956 13.686-6.912 21.55l7.32 14.232c4.044 7.855 13.695 10.956 21.55 6.911l207.354-102.82c-5.12-15.272-4.739-35.452-3.706-49.874zM257.42 455.585c-3.858 7.948-.554 17.522 7.4 21.388l14.393 6.994c7.949 3.858 17.53.549 21.388-7.4l108.397-220.653c-14.872 2.094-34.317 1.858-49.625-2.162zM119.554 363.004c-6.162 6.331-6.037 16.458.298 22.63l11.464 11.165c6.331 6.162 16.468 6.034 22.63-.297L309.885 230.5c-11.419-7.558-22.03-17.993-30.532-31.249z"/></svg>`),a.A.add("area",s.qy`<svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><path style="stroke-linecap:round;-inkscape-stroke:none" d="M351.053 207.98a25 25 0 0 0-12.014 4.811l-7.65 5.729a25 25 0 0 0-5.028 34.996 25 25 0 0 0 34.996 5.027l7.65-5.729a25 25 0 0 0 5.028-34.996 25 25 0 0 0-22.982-9.838zm-58.348 43.956a25 25 0 0 0-11.848 5.203L45.99 445.346a25 25 0 0 0-3.877 35.14 25 25 0 0 0 35.143 3.877l234.867-188.207a25 25 0 0 0 3.875-35.142 25 25 0 0 0-23.293-9.078zM131.023 68.966c-7.535 0-12.006 1.996-17.07 6.53-5.064 4.535-11.212 17.475-6.45 28.72a25.003 25.003 0 0 0 .017.036l114 267.99a25.003 25.003 0 0 0 .048.115c.146.338.588 2.384 3.852 6.344 3.264 3.96 12.068 9.254 19.603 9.254h335.891c7.51 0 12.01-1.991 17.082-6.539 5.073-4.548 11.19-17.488 6.438-28.709a25.003 25.003 0 0 0-.014-.037l-114-267.99a25.003 25.003 0 0 0-.018-.04c-.155-.363-.602-2.438-3.883-6.42-3.28-3.98-12.096-9.253-19.605-9.253H131.025zM444.428 104.3l.677 1.59c-.513-.992-.653-1.531-.677-1.59zm-276.313 14.668h282.553l93.154 218.988H261.27zm98.705 232.037c.48.923.597 1.378.623 1.467z"/></svg>`),a.A.add("sun",s.qy`<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path style="stroke:none" d="m10.824 3.745 1.711-1.705c.425-.416 1.82 1.005 1.408 1.42l-1.707 1.702zm2.18 3.247 2.416.004c.595.006.576 1.997-.008 2l-2.41-.004zm-.765 3.833 1.704 1.711c.416.425-1.005 1.82-1.42 1.408l-1.701-1.708zM8.997 13l-.004 2.416c-.006.594-1.997.576-2-.01l.004-2.41zm-3.825-.758-1.72 1.697c-.426.414-1.814-1.013-1.4-1.427l1.715-1.693zM2.992 8.99.578 8.986c-.594-.006-.576-1.997.009-2l2.41.004zm.76-3.818L2.045 3.46c-.416-.424 1.005-1.819 1.42-1.408L5.168 3.76zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM7 3V.584C7.005-.01 8.996.004 9 .59V3z"/></svg>`),a.A.add("half-sun",s.qy`<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path style=";stroke-width:50;stroke-linecap:round;stroke-linejoin:round" d="M.588 9.16h14.84c.212 0 .384.172.384.385v1.124a.384.384 0 0 1-.385.385H.588a.384.384 0 0 1-.384-.385V9.545c0-.213.171-.385.384-.385zM8 .145c-.499-.003-.998.142-1 .439V3h2V.59C8.998.297 8.499.147 8 .145zm4.734 1.82a.274.274 0 0 0-.199.074l-1.71 1.707 1.411 1.416 1.707-1.701c.36-.364-.663-1.497-1.209-1.496zm-9.464.012C2.725 1.974 1.68 3.09 2.045 3.46l1.707 1.71L5.168 3.76 3.467 2.053a.272.272 0 0 0-.197-.076zM8 5a2.997 2.997 0 0 0-2.988 2.785h5.976A2.997 2.997 0 0 0 8 5zM.586 6.986c-.253.002-.4.375-.438.8h2.846l.002-.796zm12.418.006v.793h2.848c-.034-.419-.177-.786-.432-.789z"/></svg>`),a.A.add("tape",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M624 432H362.3c52.1-41 85.7-104.5 85.7-176 0-123.7-100.3-224-224-224S0 132.3 0 256s100.3 224 224 224h400c8.8 0 16-7.2 16-16v-16c0-8.8-7.2-16-16-16zm-400 0c-97 0-176-79-176-176S127 80 224 80s176 79 176 176-79 176-176 176zm0-272c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"/></svg>`),a.A.add("knife",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M566.28 88.57c12.96-12.5 12.96-32.76 0-45.25L531.07 9.37c-12.96-12.5-33.98-12.5-46.94 0L319.99 160 4.76 464.14c-8.25 7.96-5.38 22.16 5.53 25.69C53.72 503.86 102.37 512 150.51 512c75.83 0 150.42-20.19 201.49-69.35l104.4-100.04c12.95-12.41 13.17-33.05.49-45.73L448 288v-80L566.28 88.57zM496 64c8.84 0 16 7.16 16 16s-7.16 16-16 16-16-7.16-16-16 7.16-16 16-16zM318.71 408.07C281.24 444.14 221.5 464 150.51 464c-23.16 0-46.79-2.1-70.07-6.17L319.4 227.28l91.99 91.99-92.68 88.8zM432 160c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.17 16-16 16z"/></svg>`),a.A.add("bars",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>`),a.A.add("triangle-left",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M191.33,31.38V224.62a15,15,0,0,1-25.64,10.62L69.07,138.62a15,15,0,0,1,0-21.24l96.62-96.62A15,15,0,0,1,191.33,31.38Z"/></svg>`),a.A.add("triangle-right",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M64.67,224.62V31.38A15,15,0,0,1,90.31,20.76l96.62,96.62a15,15,0,0,1,0,21.24L90.31,235.24A15,15,0,0,1,64.67,224.62Z"/></svg>`),a.A.add("twitter",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>`),a.A.add("facebook",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 264 512"><path d="M76.7 512V283H0v-91h76.7v-71.7C76.7 42.4 124.3 0 193.8 0c33.3 0 61.9 2.5 70.2 3.6V85h-48.2c-37.8 0-45.1 18-45.1 44.3V192H256l-11.7 91h-73.6v229"/></svg>`),a.A.add("instagram",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>`),a.A.add("linkedin",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448.1 512"><path d="M100.3 448H7.4V148.9h92.9V448zM53.8 108.1C24.1 108.1 0 83.5 0 53.8S24.1 0 53.8 0s53.8 24.1 53.8 53.8-24.1 54.3-53.8 54.3zM448 448h-92.7V302.4c0-34.7-.7-79.2-48.3-79.2-48.3 0-55.7 37.7-55.7 76.7V448h-92.8V148.9h89.1v40.8h1.3c12.4-23.5 42.7-48.3 87.9-48.3 94 0 111.3 61.9 111.3 142.3V448h-.1z"/></svg>`),a.A.add("email",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>`),a.A.add("copy",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"/></svg>`),a.A.add("ar",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.844874 7.2009368"><path d="M 4.1805699,5.4542117 H 2.4801904 L 2.2118585,6.5168507 H 1.1187593 L 2.6807334,0.68408928 h 1.296469 L 5.5391781,6.5168507 H 4.4460774 Z M 2.7513476,4.3720517 H 3.9065883 L 3.3303802,2.0514503 Z"/><path d="m 7.5355365,3.2703464 q 0.3417706,0 0.4886463,-0.1758024 0.1497018,-0.1758024 0.1497018,-0.5781942 0,-0.3984876 -0.1497018,-0.5703858 Q 7.8773071,1.7740658 7.5355365,1.7740658 H 7.0779585 V 3.2703464 Z M 7.0779585,4.309544 V 6.5168507 H 5.9905084 V 0.68408928 h 1.6608338 q 0.8332429,0 1.220205,0.38676692 0.3897887,0.3867669 0.3897887,1.2228084 0,0.5781942 -0.2033672,0.9493362 -0.200543,0.371142 -0.607278,0.5469444 0.2231388,0.070308 0.3982608,0.320355 0.1779472,0.2461266 0.358719,0.7500924 L 9.7980008,6.5168507 H 8.6399351 L 8.1258661,5.0674448 Q 7.970517,4.6298909 7.8095182,4.4697134 7.6513422,4.309544 7.3858347,4.309544 Z"/></svg>`),a.A.add("device-move",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 119.4 57.7"><path d="M47.4,20.7h-34c-0.2,0-0.4-0.1-0.5-0.3l-0.1-0.2l0.1-0.3l9-19.5C21.9,0.2,22.1,0,22.3,0h24.5v1H22.6L14,19.7h33.4V20.7z"/><path d="M103,20.7H71v-1h31.6L95,1H46.8V0h48.3c0.3,0,0.6,0.2,0.7,0.5l7.8,19.2c0.1,0.2,0.1,0.5-0.1,0.7C103.5,20.6,103.2,20.7,103,20.7z M94.9,0.9L94.9,0.9z"/><path d="M49,2.9c-1.1,0-2,0.9-2,2v40c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2v-40c0-1.1-0.9-2-2-2L49,2.9z M49,3.9h3.6l0,0h0l0,0l0,0l0,0l0,0l0,0v0l0,0l0,0l0,0l0,0v0.5c0,0.6,0.4,1,1,1H64c0.6,0,1-0.4,1-1v0l0,0V4.3c0,0,0,0,0-0.1l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0h4c0.6,0,1,0.4,1,1v40c0,0.6-0.4,1-1,1H49c-0.6,0-1-0.4-1-1l0-40.2c0.1-0.5,0-0.8,0.4-1.1C48.5,4,48.8,3.9,49,3.9z"/><path d="M53.3,43.9h11.5c0.3,0,0.6,0.2,0.6,0.5c0,0.3-0.3,0.5-0.6,0.5H53.3c-0.3,0-0.6-0.2-0.6-0.5C52.7,44.1,53,43.8,53.3,43.9z"/><path d="M76,37.8c-0.7,0-1.3,0-2-0.1l0.1-1c1.6,0.2,10,0.7,15.7-5.5c1.8-2,3.1-4.4,3.8-7l1,0.3c-0.7,2.8-2.1,5.3-4,7.5C85.8,37,79.3,37.8,76,37.8z"/><polygon points="96.9,28.6 96,29 93.8,24.6 89.5,27.1 89,26.2 94.3,23.2"/><path d="M42.1,37.4c-3.4,0-9.9-0.8-14.5-6c-1.9-2.1-3.3-4.7-4-7.5l1-0.3c0.7,2.6,1.9,5,3.7,7.1c5.6,6.3,14,5.7,15.7,5.5l0.1,1C43.4,37.4,42.8,37.4,42.1,37.4z"/><polygon points="29,25.8 28.5,26.6 24.3,24.2 22.1,28.6 21.2,28.2 23.8,22.8"/></svg>`),a.A.add("audio",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="50 85 300 275"><path d="M144.800 88.415 C 105.869 89.675,75.661 108.730,58.580 142.800 C 42.479 174.915,49.153 218.126,74.086 243.200 C 82.194 251.354,81.622 247.747,81.571 290.400 C 81.526 327.954,81.532 328.075,83.579 331.303 C 85.932 335.013,81.918 334.725,133.200 334.853 L 178.200 334.965 180.317 334.026 C 184.940 331.975,186.179 329.159,187.004 318.834 C 187.966 306.788,188.179 306.609,201.600 306.579 C 223.132 306.529,231.384 304.069,239.712 295.216 C 246.448 288.055,247.778 282.132,247.527 260.400 C 247.353 245.306,247.496 245.061,256.908 244.337 C 272.369 243.147,279.383 238.170,279.366 228.400 C 279.356 222.955,278.475 220.120,267.737 191.000 C 266.520 187.700,263.126 177.980,260.196 169.400 C 249.024 136.687,242.930 126.187,227.400 112.880 C 209.769 97.774,189.461 89.600,166.600 88.407 C 158.610 87.991,157.887 87.991,144.800 88.415 M205.416 171.240 C 218.099 175.986,216.908 195.403,203.667 199.781 C 192.504 203.472,180.685 190.157,185.674 179.509 C 189.403 171.550,197.349 168.222,205.416 171.240 M311.000 220.715 C 304.366 224.871,305.398 229.213,315.511 239.699 C 325.906 250.478,330.441 259.997,334.191 278.909 C 338.184 299.050,330.538 322.088,313.936 339.938 C 307.475 346.885,307.028 347.548,307.030 350.184 C 307.038 359.089,317.896 358.672,326.406 349.440 C 353.041 320.544,357.609 275.463,337.176 243.154 C 326.661 226.527,316.131 217.500,311.000 220.715 M291.392 243.932 C 286.465 247.613,286.911 251.389,293.068 258.095 C 310.600 277.194,310.622 300.169,293.125 319.139 C 287.742 324.975,286.682 328.672,289.377 332.205 C 294.000 338.266,301.447 335.014,309.224 323.540 C 324.531 300.956,324.654 275.911,309.565 254.525 C 302.386 244.350,295.897 240.567,291.392 243.932 M272.664 267.012 C 268.192 270.357,268.344 272.961,273.453 280.549 C 278.010 287.318,277.882 290.657,272.777 298.232 C 267.556 305.977,269.217 312.622,276.361 312.571 C 288.218 312.486,295.338 289.895,288.227 274.922 C 284.588 267.259,277.292 263.551,272.664 267.012 " fill-rule="evenodd"></path></svg>`),a.A.add("help",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 14"><text x=3 y=13>?</text></svg>`),a.A.add("move",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M360.549 412.216l-96.064 96.269c-4.686 4.686-12.284 4.686-16.971 0l-96.064-96.269c-4.686-4.686-4.686-12.284 0-16.971l19.626-19.626c4.753-4.753 12.484-4.675 17.14.173L230 420.78h2V280H91.22v2l44.986 41.783c4.849 4.656 4.927 12.387.173 17.14l-19.626 19.626c-4.686 4.686-12.284 4.686-16.971 0L3.515 264.485c-4.686-4.686-4.686-12.284 0-16.971l96.269-96.064c4.686-4.686 12.284-4.686 16.97 0l19.626 19.626c4.753 4.753 4.675 12.484-.173 17.14L91.22 230v2H232V91.22h-2l-41.783 44.986c-4.656 4.849-12.387 4.927-17.14.173l-19.626-19.626c-4.686-4.686-4.686-12.284 0-16.971l96.064-96.269c4.686-4.686 12.284-4.686 16.971 0l96.064 96.269c4.686 4.686 4.686 12.284 0 16.971l-19.626 19.626c-4.753 4.753-12.484 4.675-17.14-.173L282 91.22h-2V232h140.78v-2l-44.986-41.783c-4.849-4.656-4.927-12.387-.173-17.14l19.626-19.626c4.686-4.686 12.284-4.686 16.971 0l96.269 96.064c4.686 4.686 4.686 12.284 0 16.971l-96.269 96.064c-4.686 4.686-12.284 4.686-16.971 0l-19.626-19.626c-4.753-4.753-4.675-12.484.173-17.14L420.78 282v-2H280v140.78h2l41.783-44.986c4.656-4.849 12.387-4.927 17.14-.173l19.626 19.626c4.687 4.685 4.687 12.283 0 16.969z"/></svg>`),a.A.add("rotate",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"/></svg>`),a.A.add("pause",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="m21.84 10.035h22.551v79.93h-22.551zm33.766 0h22.551v79.93h-22.551z" fill-rule="evenodd"/></svg>`),a.A.add("caption",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="m16.668 29.168v41.664h66.664v-41.664zm-6.25-8.3359c-1.1523 0-2.0859 0.93359-2.0859 2.0859v54.164c0 1.1523 0.93359 2.0859 2.0859 2.0859h79.164c1.1523 0 2.0859-0.93359 2.0859-2.0859v-54.164c0-1.1523-0.93359-2.0859-2.0859-2.0859zm25 22.918c-3.4531 0-6.25 2.7969-6.25 6.25s2.7969 6.25 6.25 6.25c1.1172 0 2.168-0.29297 3.0781-0.80859 1-0.57031 2.3086-0.69141 3.1719 0.070313l3.125 2.7578c0.85938 0.76172 0.95312 2.0898 0.074219 2.8359-2.543 2.1641-5.8438 3.4766-9.4492 3.4766-8.0547 0-14.586-6.5273-14.586-14.582s6.5312-14.582 14.586-14.582c4.3555 0 8.2695 1.9141 10.934 4.9336l-4.6836 4.1367c-0.86328 0.76172-2.1719 0.64062-3.1719 0.070313-0.91016-0.51562-1.9609-0.80859-3.0781-0.80859zm27.082 6.25c0-3.4531 2.7969-6.25 6.25-6.25 1.1211 0 2.1719 0.29297 3.0781 0.80859 1 0.57031 2.3086 0.69141 3.1719-0.070313l3.125-2.7578c0.86328-0.76172 0.95312-2.0898 0.078125-2.8359-2.543-2.1641-5.8477-3.4766-9.4531-3.4766-8.0547 0-14.582 6.5273-14.582 14.582s6.5273 14.582 14.582 14.582c3.6055 0 6.9102-1.3125 9.4531-3.4766 0.875-0.74609 0.78516-2.0742-0.078125-2.8359l-3.125-2.7578c-0.86328-0.76172-2.1719-0.64062-3.1719-0.070313-0.90625 0.51562-1.957 0.80859-3.0781 0.80859-3.4531 0-6.25-2.7969-6.25-6.25z" fill-rule="evenodd"/></svg>`),a.A.add("undo",s.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"/></svg>`);let $e=class extends s.Ay{static get observedAttributes(){return["root","document"]}constructor(e){super(),this.application=null,e&&(this.application=e),this.addEventListener("focus",this.onFocus)}get fullscreen(){return this.application.system.getMainComponent(i.A)}get arManager(){return this.application.system.getMainComponent(r.A)}get viewer(){return this.application.system.getComponent(o.A)}firstConnected(){if(super.firstConnected(),!this.application){const e={root:this.getAttribute("root"),dracoRoot:this.getAttribute("dracoRoot"),resourceRoot:this.getAttribute("resourceRoot"),document:this.getAttribute("document"),model:this.getAttribute("model"),geometry:this.getAttribute("geometry"),texture:this.getAttribute("texture"),quality:this.getAttribute("quality"),uiMode:this.getAttribute("uiMode"),bgColor:this.getAttribute("bgColor"),bgStyle:this.getAttribute("bgStyle"),controls:this.getAttribute("controls"),prompt:this.getAttribute("prompt"),reader:this.getAttribute("reader"),lang:this.getAttribute("lang")};this.application=new c.A(null,e)}this.attachShadow({mode:"open"});const e=this.shadowRoot;var t=document.createElement("style");t.innerText='/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:normal;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}.ff-fullsize{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box}.ff-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden}.ff-caret-down{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-bottom:5px solid #a0a0a0;transform:rotate(180deg);transition:transform .05s}.ff-caret-up{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-bottom:5px solid #a0a0a0;transform:rotate(0deg);transition:transform .05s}.ff-caret-right{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-bottom:5px solid #a0a0a0;transform:rotate(90deg);transition:transform .05s}.ff-caret-left{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-bottom:5px solid #a0a0a0;transform:rotate(270deg);transition:transform .05s}html{color:#c8c8c8}button,input{display:block;padding:0;margin:0;border:none;background-color:inherit;color:inherit;font-size:inherit;cursor:inherit}*:focus{outline:1px solid #0089bf;outline-offset:0}*:focus:not(:focus-visible){outline:0}*:focus-visible{outline:1px solid #0089bf;outline-offset:0}.ff-fullscreen{position:fixed;left:0;right:0;top:0;bottom:0}.ff-noselect{user-select:none;-moz-user-select:none;-webkit-user-select:none}.ff-off{user-select:none;-moz-user-select:none;-webkit-user-select:none;pointer-events:none}.ff-on{user-select:auto;-webkit-user-select:none;pointer-events:auto}.ff-focusable{tab-index:0}.ff-flex-row{display:flex}.ff-flex-column{display:flex;flex-direction:column}.ff-flex-wrap{flex-wrap:wrap}.ff-flex-centered{align-items:center}.ff-flex-item-fixed{flex:0 0 auto;position:relative}.ff-flex-item-stretch,.ff-flex-spacer{flex:1 1 auto;position:relative}.ff-scroll-y{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow-y:auto}.ff-scroll-x{overflow-x:auto}.ff-position-above{position:absolute;bottom:0}.ff-position-below{position:absolute;top:100%}.ff-position-left{position:absolute;right:0}.ff-position-right{position:absolute;left:100%}.ff-position-above.ff-align-left,.ff-position-below.ff-align-left{left:0}.ff-position-above.ff-align-right,.ff-position-below.ff-align-right{right:0}.ff-position-left.ff-align-top,.ff-position-right.ff-align-top{top:0}.ff-position-left.ff-align-bottom,.ff-position-right.ff-align-bottom{bottom:0}.ff-ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ff-placeholder{flex:1 1 auto;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.ff-splitter-section{flex:1 1 auto;position:relative;box-sizing:border-box;overflow:hidden}.ff-splitter[direction=vertical]+.ff-splitter-section{border-top:2px solid rgb(26.5,26.5,26.5)}.ff-splitter:not([direction=vertical])+.ff-splitter-section{border-left:2px solid rgb(26.5,26.5,26.5)}.ff-frame{padding:4px}.ff-frame .ff-control{margin:4px}.ff-icon{display:inline-block;position:relative;height:1rem;fill:#a0a0a0}.ff-icon svg{width:inherit;height:inherit}.ff-button{cursor:pointer}.ff-button[vertical]{flex-direction:column}.ff-button.ff-inline .ff-icon+.ff-text{padding-left:.5em}.ff-button.ff-inline .ff-icon{display:inline}.ff-button.ff-inline .ff-text{display:inline}.ff-button.ff-transparent{position:relative;display:flex;justify-content:center;align-items:center;flex:0 1 auto;flex-wrap:wrap;padding:5px;background:rgba(0,0,0,0);fill:#a0a0a0;transition:fill .2s}.ff-button.ff-transparent:hover,.ff-button.ff-transparent:focus{fill:#c8c8c8}.ff-button.ff-transparent[selected]{fill:#c8c8c8}.ff-button.ff-transparent>.ff-text{margin:3px;white-space:nowrap}.ff-button.ff-transparent>.ff-icon{margin:3px;height:1.3em}.ff-button.ff-transparent>.ff-caret-down{margin:3px}.ff-button.ff-transparent.ff-disabled{color:gray;fill:#606060;user-select:none;pointer-events:none}.ff-button.ff-control{position:relative;display:flex;justify-content:center;align-items:center;flex:1 1 auto;flex-wrap:wrap;padding:5px;background:rgb(77.5,77.5,77.5);transition:background-color .2s}.ff-button.ff-control:hover,.ff-button.ff-control:focus{background-color:#676767}.ff-button.ff-control[selected]{background-color:#0089bf}.ff-button.ff-control[selected]:hover,.ff-button.ff-control[selected]:focus{background-color:rgb(0,166.264921466,231.8)}.ff-button.ff-control .ff-text{margin:3px;white-space:nowrap;display:inline-block}.ff-button.ff-control>.ff-icon{margin:3px;height:1.3em}.ff-button.ff-control .ff-caret-container{white-space:nowrap}.ff-button.ff-control .ff-caret-down{margin:3px;display:inline-block}.ff-button.ff-control.ff-disabled{color:gray;fill:#606060;user-select:none;pointer-events:none}.ff-button.ff-control.ff-disabled>.ff-icon{fill:#606060}.ff-menu{background-color:rgb(77.5,77.5,77.5);z-index:100;display:flex;flex-direction:column}.ff-menu .ff-divider{height:1px;padding:0;background:#a0a0a0}.ff-menu .ff-button{justify-content:flex-start;margin:0;padding:4px 4px}.ff-menu .ff-button.ff-control{flex-wrap:nowrap}.ff-menu .ff-button .ff-icon{height:1.2em;width:2.2em;margin-right:4px}.ff-dropdown .ff-menu{min-width:100%;margin-top:3px}.ff-modal-plane{position:fixed;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.6);opacity:0;transition:opacity .3s;z-index:990;pointer-events:auto}.ff-modal-plane.ff-transition{opacity:1}ff-dialog{box-sizing:border-box;background:#343434;border:1px solid rgb(77.5,77.5,77.5);box-shadow:3px 3px 24px rgba(0,0,0,.4)}ff-title-bar{background:rgb(26.5,26.5,26.5);padding:2px}ff-title-bar .ff-text{flex:1 1 auto;padding-right:8px}ff-title-bar .ff-icon{padding:2px}ff-popup-button .ff-content{transition:opacity .15s}.ff-line-edit{display:block;overflow:hidden;background-color:rgb(26.5,26.5,26.5);min-height:1.6em}.ff-line-edit input{padding:2px}.ff-text-edit{box-sizing:border-box;flex:1 1 auto;display:flex;background-color:rgb(26.5,26.5,26.5)}.ff-text-edit textarea{display:block;box-sizing:border-box;width:100%;padding:2px;resize:none;background:rgba(0,0,0,0);color:inherit;border:none}.ff-color-edit{font-size:.8rem}.ff-color-edit .ff-control{margin:0}.ff-color-edit .ff-slider-controls{align-items:stretch;flex:1 1 auto}.ff-color-edit .ff-numeric-controls{flex:0 0 auto;align-items:center;margin-top:6px}.ff-color-edit .ff-text{color:#a0a0a0;margin:0 3px}.ff-color-edit .ff-line-edit{flex:4 5 auto}.ff-color-edit .ff-line-edit.ff-wide{flex:5 4 auto}.ff-color-edit .ff-knob{margin:-2px 0 0 -2px;border:2px solid #fff;box-shadow:0 0 5px rgba(0,0,0,.5)}.ff-color-edit .ff-vector-slider{flex:1 0 auto;padding:0 10px 10px 0;background-image:linear-gradient(to bottom, transparent, black),linear-gradient(to right, white, red)}.ff-color-edit .ff-vector-slider .ff-knob{width:10px;height:10px}.ff-color-edit .ff-linear-slider{flex:0 0 24px;margin-left:6px;padding-bottom:10px}.ff-color-edit .ff-linear-slider .ff-knob{width:100%;height:10px}.ff-color-edit .ff-hue-slider{background:linear-gradient(to bottom, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00)}.ff-color-edit .ff-alpha-slider{color:rgb(77.5,77.5,77.5)}.ff-quad-splitter .ff-left{box-sizing:border-box;border-right:1px solid #343434}.ff-quad-splitter .ff-top{box-sizing:border-box;border-bottom:1px solid #343434}#ff-notification-stack{position:fixed;z-index:100;bottom:0;right:0;width:30%;min-width:250px;max-width:500px}.ff-notification{position:relative;left:0;display:flex;margin:8px;padding:4px;background:rgb(77.5,77.5,77.5);box-shadow:0 0 20px rgba(0,0,0,.35)}.ff-notification.ff-info>.ff-icon{fill:#73adff}.ff-notification.ff-success>.ff-icon{fill:#8ae65c}.ff-notification.ff-warning>.ff-icon{fill:#e6a345}.ff-notification.ff-error>.ff-icon{fill:#e64545}.ff-notification>.ff-icon{height:2em;padding:8px}.ff-notification.ff-out{transition:left .5s ease-in;left:100%}.ff-notification .ff-text{flex:1;padding:8px;text-overflow:ellipsis;overflow:hidden}.ff-notification .ff-button{flex:0;padding:8px}.ff-message-box{position:relative;min-width:350px;max-width:450px;width:90%;padding:16px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,.35);opacity:0;transition:opacity .15s}.ff-message-box.ff-transition{opacity:1}.ff-message-box .ff-title{align-items:flex-start}.ff-message-box .ff-title .ff-type-icon{margin:0 16px 0 0;height:2.5em}.ff-message-box .ff-title .ff-type-icon[name=prompt]{fill:#e6cf5c}.ff-message-box .ff-title .ff-type-icon[name=info]{fill:#73adff}.ff-message-box .ff-title .ff-type-icon[name=warning]{fill:#e6a345}.ff-message-box .ff-title .ff-type-icon[name=error]{fill:#e64545}.ff-message-box .ff-title .ff-content{flex:1 1 auto;margin:0 0 2em 0}.ff-message-box .ff-title .ff-caption{font-size:1.5em}.ff-message-box .ff-title .ff-text{margin:2em 0 1em 0}.ff-message-box .ff-title .ff-line-edit{margin:0 0 1em 0}.ff-message-box .ff-title .ff-line-edit input{padding:4px}.ff-message-box .ff-title .ff-close-button{margin:0 0 0 16px;padding:0}.ff-message-box .ff-button+.ff-button{margin-left:8px}.ff-popup-options{box-sizing:border-box;background:#343434;border:1px solid rgb(77.5,77.5,77.5);box-shadow:3px 3px 24px rgba(0,0,0,.4);min-width:6rem}.ff-popup-options button{padding:4px 8px;text-align:start;user-select:none}.ff-popup-options button+button{margin-top:1px}.ff-popup-options button:hover{background-color:rgb(77.5,77.5,77.5)}.ff-popup-options button:focus{outline:none;background-color:#0089bf}.ff-list{flex:1 1 auto;background-color:rgb(39.25,39.25,39.25)}.ff-list .ff-list-item{cursor:pointer;user-select:none;padding:2px}.ff-list .ff-list-item:hover{background-color:#343434}.ff-list .ff-list-item[selected]{background-color:#0089bf}.ff-list .ff-list-item+.ff-list-item{border-top:1px solid #343434}.ff-table{position:relative;box-sizing:border-box;width:100%}.ff-table table{box-sizing:border-box;width:100%;table-layout:fixed;border-collapse:collapse;border-spacing:0}.ff-table tr[selected]{background-color:#0089bf}.ff-table th,.ff-table td{padding:4px}.ff-table th{background-color:rgb(26.5,26.5,26.5);color:#a0a0a0;text-align:start}.ff-table .ff-table-sort-icon{height:.8em;margin-left:4px;color:#a0a0a0}.ff-tree{position:relative;overflow-y:auto}.ff-tree .ff-tree-node-container{margin-left:-501px;border-top:1px solid rgb(62.2,62.2,62.2);border-bottom:1px solid rgb(62.2,62.2,62.2);margin-bottom:-1px}.ff-tree .ff-tree-node{margin-left:500px}.ff-tree .ff-tree-node.ff-inner{background-color:rgb(46.9,46.9,46.9)}.ff-tree .ff-tree-node.ff-leaf{background-color:rgb(59.65,59.65,59.65)}.ff-tree .ff-tree-node.ff-root{background-color:rgb(39.25,39.25,39.25)}.ff-tree .ff-tree-node[selected]{background-color:#0089bf}.ff-tree .ff-tree-node .ff-header{position:relative;cursor:pointer;padding-left:14px}.ff-tree .ff-tree-node .ff-header .ff-text{user-select:none}.ff-tree .ff-tree-node.ff-drop-target>.ff-header{outline:1px dashed #0089bf}.ff-tree .ff-tree-node.ff-inner[expanded]>.ff-header:before{content:"";position:absolute;top:.6em;left:3px;width:0;height:0;border-left:4px solid rgba(0,0,0,0);border-right:4px solid rgba(0,0,0,0);border-bottom:4px solid #a0a0a0;transform:rotate(180deg);transition:transform .05s}.ff-tree .ff-tree-node.ff-inner:not([expanded])>.ff-header:before{content:"";position:absolute;top:.6em;left:3px;width:0;height:0;border-left:4px solid rgba(0,0,0,0);border-right:4px solid rgba(0,0,0,0);border-bottom:4px solid #a0a0a0;transform:rotate(90deg);transition:transform .05s}.ff-tree .ff-tree-node.ff-leaf .ff-header{cursor:default}.ff-tree .ff-tree-node .ff-content{margin-left:10px}.ff-tree .ff-tree-node:not([expanded])>.ff-content{display:none}ff-tab-container{background:#343434}ff-tab-container,ff-dock-stack{background:rgb(39.25,39.25,39.25);border:1px solid rgb(26.5,26.5,26.5)}ff-tab-container header,ff-dock-stack header{background:rgb(26.5,26.5,26.5)}ff-tab-header,ff-dock-panel-header{background:rgb(26.5,26.5,26.5);color:#c8c8c8;padding:1px 3px 2px 2px}ff-tab-header[active],ff-dock-panel-header[active]{background:linear-gradient(rgb(97.9, 97.9, 97.9), #343434);color:#c8c8c8}ff-tab-header label,ff-dock-panel-header label{pointer-events:none}ff-tab-header .ff-text,ff-dock-panel-header .ff-text{padding:0 1px}ff-tab-header .ff-icon,ff-dock-panel-header .ff-icon{top:1px;height:.8rem;padding:0 1px}.ff-dock-drop-marker{box-sizing:border-box;background:rgba(0,137,191,.3);border:1px solid #0089bf}.ff-viewport-overlay{padding:6px;font-size:.75rem}.ff-viewport-overlay .ff-row{display:flex;justify-content:space-between}.ff-viewport-overlay .ff-labels{display:flex;flex-direction:column}.ff-viewport-overlay .ff-top-left,.ff-viewport-overlay .ff-bottom-left{align-items:flex-start}.ff-viewport-overlay .ff-top-center,.ff-viewport-overlay .ff-bottom-center{align-items:center}.ff-viewport-overlay .ff-top-right,.ff-viewport-overlay .ff-bottom-right{align-items:flex-end}.ff-viewport-overlay .ff-label-box{box-sizing:border-box;padding:1px 8px 2px 8px;background:rgba(0,0,0,.5);border-radius:2em}.sv-article h1{margin:.3em 0;font-family:"Amiri",serif;font-size:2.3em;font-weight:normal;color:#e8e8e8}.sv-article h1:before{content:"";position:absolute;top:0;left:0;width:75px;height:5px;background-color:#0089bf}.sv-article p,.sv-article h2,.sv-article h3,.sv-article h4,.sv-article h5,.sv-article h6,.sv-article ul,.sv-article ol,.sv-article li{font-family:"Hind Siliguri",sans-serif;color:#c8c8c8}.sv-article p,.sv-article ul,.sv-article ol{font-size:1.15em;margin:.8em 0}.sv-article p{line-height:1.55em}.sv-article ul{padding-inline-start:2.5em;list-style:disc outside}.sv-article ol{padding-inline-start:2.5em;list-style:decimal outside}.sv-article a:link,.sv-article a:visited,.sv-article a:hover,.sv-article a:active{color:#0089bf}.sv-article iframe,.sv-article video{max-width:100%}.sv-article img{max-width:100%;height:auto}.sv-article figure{display:table;margin:1rem auto;font-family:"Hind Siliguri",sans-serif;font-size:1.15em}.sv-article figure.align-left{float:left}.sv-article figure.align-right{float:right}.sv-article figure.align-center{text-align:center}.sv-article figure.image figcaption{color:#999;display:block;margin-top:.25rem;text-align:center;-webkit-user-modify:read-only}.sv-content-view{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:.85em;line-height:1.35;color:#c8c8c8;background-color:#343434;position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-logo{flex:0 50 180px;min-width:40px;display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-end;overflow:hidden;height:40px;user-select:none}.sv-logo .sv-short{flex-grow:1;width:0;max-width:40px}.sv-logo .sv-full{flex:1 0 180px;display:flex;height:100%}.sv-logo .sv-full .sv-logo-full{flex:auto;height:100%}.ff-flex-spacer{user-select:none;-moz-user-select:none;-webkit-user-select:none}.sr-only{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}@keyframes spin{100%{transform:rotate(360deg)}}.sv-prompt,.sv-spinner{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;display:flex;justify-content:center;align-items:center;pointer-events:none}.sv-spinner-wheel{height:120px;width:120px;animation:spin 5s linear infinite}*{scrollbar-color:#676767 rgb(26.5,26.5,26.5);scrollbar-width:thin}* ::-webkit-scrollbar{width:8px;height:8px}* ::-webkit-scrollbar-track{background-color:rgb(26.5,26.5,26.5)}* ::-webkit-scrollbar-thumb{background-color:#676767;border-radius:8px}voyager-explorer{font-size:16px}.sv-content-only .sv-scene-view,.sv-content-stack .sv-scene-view{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;cursor:grab}.sv-content-only .sv-scene-view:focus,.sv-content-stack .sv-scene-view:focus{border:2px solid rgb(191,236.9057591623,255)}.sv-content-only .sv-scene-view:focus:not(:focus-visible),.sv-content-stack .sv-scene-view:focus:not(:focus-visible){border:none;outline:0}.sv-content-only .sv-scene-view:focus-visible,.sv-content-stack .sv-scene-view:focus-visible{border:2px solid rgb(191,236.9057591623,255)}.sv-reader-container{overflow-y:auto}.sv-content-stack .sv-reader-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;margin-top:52px}.sv-content-stack .sv-reader-view{pointer-events:auto;display:flex;justify-content:center}.sv-content-stack .sv-reader-view .sv-left{flex:0 0 52px}.sv-content-stack .sv-reader-view .sv-article{flex:0 2 720px;background-color:rgba(27,34,38,.5);padding-bottom:35px}.sv-content-stack .sv-reader-view .sv-right{flex:0 3 16px;background-color:rgba(27,34,38,.5)}.sv-content-split{display:flex}.sv-content-split .sv-reader-container{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;margin-top:52px}.sv-content-split .sv-scene-view{flex:1 1 60%}.sv-content-split .sv-reader-view{pointer-events:auto;flex:1 1 40%;padding:0 20px}.sv-content-split .sv-reader-view .sv-left{flex:0 0 52px}.sv-content-split .sv-reader-view .sv-article{flex:0 2 720px;background-color:rgba(27,34,38,.5);padding-bottom:35px;padding-right:16px}.sv-content-split .sv-reader-view .sv-right{flex:0 3 16px;background-color:rgba(27,34,38,.5)}.sv-article{position:relative;padding:5px 8px 0 16px;user-select:text;-moz-user-select:text;-webkit-user-select:text}.sv-content-overlay .error-msg{position:absolute;text-align:center;top:50%;left:50%;transform:translate(-50%, -50%);color:red;background-color:silver;padding:8px}.ff-viewport-overlay{font-size:1em}.sv-scene-view{position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden}.sv-scene-view.sv-blur{filter:brightness(60%) blur(5px);transition:filter .5s}.sv-annotation{box-sizing:border-box;position:absolute;z-index:1;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-annotation a:link,.sv-annotation a:visited,.sv-annotation a:hover,.sv-annotation a:active{color:#0089bf}.sv-annotation img{max-height:120px;max-width:100%}.sv-annotation .sv-img-credit{font-size:x-small}.sv-annotation:has(:focus-visible){opacity:1 !important}.sv-annotation-img{max-width:100%}.sv-circle-annotation{display:flex}.sv-circle-annotation.sv-expanded{z-index:2;width:16%;min-width:180px;max-width:280px}.sv-circle-annotation .sv-marker{background-color:rgba(0,0,0,.65);border-radius:50%;text-align:center;height:18px;aspect-ratio:1/1;border-style:solid;border-width:1px;cursor:pointer;font-size:.9em;color:#fff;-webkit-tap-highlight-color:rgba(0,0,0,0)}.sv-circle-annotation .sv-marker:focus-visible{outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-circle-annotation .sv-annotation-body{padding:4px 8px;background-color:rgba(0,0,0,.7);border-radius:4px;margin:0px 1px;width:100%}.sv-circle-annotation .sv-annotation-body:has(:focus-visible){outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-circle-annotation .sv-annotation-body .sv-title{padding:0 0 2px 0;font-weight:bold}.sv-circle-annotation .sv-annotation-body p{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:.88em;line-height:1.35;color:#c8c8c8;margin:.5em 0}.sv-circle-annotation .sv-annotation-body .ff-button{background:rgba(0,0,0,.01)}.sv-circle-annotation .sv-annotation-body .ff-button:hover{text-decoration:underline}.sv-circle-annotation .sv-annotation-body .sv-content{overflow:hidden;overflow-wrap:break-word}.sv-pin-annotation{padding:0 4px;background-color:rgba(0,0,0,.5);color:#c8c8c8;transform:translate(-50%, -100%)}.sv-scale-annotation{opacity:0;transition:opacity .3s ease-in;position:absolute;color:#000;background-color:#fff;font-weight:bold;border-radius:20px;padding-left:4px;padding-right:4px}.sv-scale-annotation.sv-show{opacity:1}.sv-standard-annotation,.sv-extended-annotation{max-width:20%;min-width:min-content;padding:0 4px;background-color:rgba(0,0,0,.5);color:#c8c8c8;pointer-events:auto;overflow-wrap:normal}.sv-standard-annotation:has(:focus-visible),.sv-extended-annotation:has(:focus-visible){outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-standard-annotation.sv-expanded,.sv-extended-annotation.sv-expanded{width:20%;min-width:180px;background-color:rgba(0,0,0,.8);z-index:2}.sv-standard-annotation.sv-short,.sv-extended-annotation.sv-short{width:unset;min-width:min-content}.sv-standard-annotation.sv-q0,.sv-extended-annotation.sv-q0{transform:translate(0, -100%);border-bottom-style:solid;border-bottom-width:1px;text-align:left}.sv-standard-annotation.sv-q1,.sv-extended-annotation.sv-q1{transform:translate(-100%, -100%);border-bottom-style:solid;border-bottom-width:1px;text-align:right}.sv-standard-annotation.sv-q2,.sv-extended-annotation.sv-q2{transform:translate(-100%, 0);border-top-style:solid;border-top-width:1px;text-align:right}.sv-standard-annotation.sv-q3,.sv-extended-annotation.sv-q3{transform:translate(0, 0);border-top-style:solid;border-top-width:1px;text-align:left}.sv-standard-annotation.sv-static-width,.sv-extended-annotation.sv-static-width{width:fit-content}.sv-standard-annotation .sv-title,.sv-extended-annotation .sv-title{padding:1px 0 2px 0;font-weight:bold;-webkit-tap-highlight-color:rgba(0,0,0,0)}.sv-standard-annotation .sv-title:focus-visible,.sv-extended-annotation .sv-title:focus-visible{outline:none}.sv-standard-annotation .sv-content,.sv-extended-annotation .sv-content{padding:2px 0;height:0;overflow:hidden;overflow-wrap:break-word;transition:height .2s}.sv-standard-annotation p,.sv-extended-annotation p{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:.88em;line-height:1.35;color:#c8c8c8;margin:.5em 0}.sv-standard-annotation .ff-button,.sv-extended-annotation .ff-button{background:rgba(0,0,0,.01)}.sv-standard-annotation .ff-button .ff-icon,.sv-extended-annotation .ff-button .ff-icon{fill:#a0a0a0}.sv-standard-annotation .ff-button:hover,.sv-extended-annotation .ff-button:hover{text-decoration:underline}.sv-extended-annotation .sv-title{cursor:pointer}.sv-standard-annotation{pointer-events:none}.sv-standard-annotation.sv-enable-events{pointer-events:auto;cursor:pointer}.sv-annotation-overlay{padding:7px;pointer-events:auto;background-color:rgba(54,61,64,.6);max-width:min(80%, 800px);min-width:50%;max-height:90%;overflow-y:auto;cursor:auto}.sv-annotation-overlay .sv-annotation-body .ff-button{background:rgba(0,0,0,.01)}.sv-annotation-overlay .sv-annotation-body .ff-button:hover{text-decoration:underline}.sv-ar-prompt{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;text-align:center;border-radius:20px;margin:30% 0 0 0;overflow:hidden;background-color:rgba(54,61,64,.6)}.sv-ar-prompt .sv-content{flex:1;width:100%;margin:10px 10px;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}.sv-ar-prompt .sv-content .sv-ar-icon{height:10em}.sv-ar-menu{display:flex;position:absolute;bottom:0px;flex-direction:row;margin:0 0 6px 6px}.sv-ar-menu>.ff-button{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);width:38px;height:38px;margin:0 6px 2px 0;background-color:rgba(74,82,87,.5);border-radius:20px;font-size:17px;transition:all .15s;pointer-events:auto}.sv-ar-menu>.ff-button:hover,.sv-ar-menu>.ff-button:focus{outline:none;background-color:rgba(74,82,87,.5);fill:#c8c8c8}.sv-ar-menu>.ff-button[selected]{background-color:#0089bf;color:#f0f0f0}.sv-ar-menu>.ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px rgb(0, 100.4188481675, 140));fill:#c8c8c8}.sv-ar-menu>.ff-button[selected]:hover,.sv-ar-menu>.ff-button[selected]:focus{background-color:rgb(0,166.264921466,231.8)}.sv-ar-code{position:relative;width:420px;max-width:85%;max-height:90%;padding:8px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,.35);pointer-events:auto}.sv-ar-code .ff-title{margin:.5em 0 1em 0}.sv-ar-code .ff-title .ff-icon{height:2em;width:2em;padding:2px;border-radius:20px;background-color:rgba(74,82,87,.5)}.sv-ar-code img{height:250px;margin:auto}.sv-chrome-view{font-family:"Segoe UI","HelveticaNeue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:.85em;line-height:1.35;color:#c8c8c8;position:absolute;left:0;right:0;top:0;bottom:0;box-sizing:border-box;overflow:hidden;display:flex;flex-direction:column;background:linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.15) 10%, transparent 25%);z-index:3}.sv-chrome-view .ff-button{flex:0 1 auto;box-sizing:border-box}.sv-chrome-view .ff-button:focus{outline:none;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-chrome-view .ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-chrome-view .ff-button:focus-visible{outline:none;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-chrome-view .ff-button:hover{outline:none}.sv-chrome-view .ff-button:hover>.ff-icon{fill:#c8c8c8}.sv-chrome-view .ff-button[selected]{background-color:#0089bf}.sv-chrome-view .ff-button[selected][disabled]{background-color:rgb(77.5,77.5,77.5)}.sv-chrome-view .ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px rgb(0, 100.4188481675, 140));fill:#c8c8c8}.sv-chrome-header{display:flex;align-items:flex-start;height:100%;position:relative}.sv-chrome-header .sv-top-bar{flex:1 1 auto;display:flex;align-items:flex-start;height:40px;margin:9px 9px 0 0;overflow:hidden}.sv-chrome-header .sv-main-title{flex:1 1 auto;margin:6px 8px;font-family:"Hind Siliguri",sans-serif;font-weight:normal;font-size:1.412em;white-space:pre;color:#e8e8e8;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-chrome-header .sv-main-title span{color:rgba(0,0,0,0)}.sv-chrome-footer{display:block;position:absolute;bottom:0;right:0}.sv-chrome-footer .sv-bottom-bar{flex:1 1 auto;display:flex;align-items:flex-end;text-align:right;overflow:hidden}.sv-chrome-footer .sv-bottom-bar>.ff-button{margin:6px 6px 6px 5px;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);width:38px;height:38px;background-color:rgba(31,36,38,.8);border-radius:20px;font-size:17px;transition:all .15s;pointer-events:auto}.sv-chrome-footer .sv-bottom-bar>.ff-button .ff-text{color:#a0a0a0}.sv-chrome-footer .sv-bottom-bar>.ff-button:focus{outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-chrome-footer .sv-bottom-bar>.ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-chrome-footer .sv-bottom-bar>.ff-button:focus-visible{outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-chrome-footer .sv-bottom-bar>.ff-button:hover{background-color:rgba(74,82,87,.5);fill:#c8c8c8}.sv-chrome-footer .sv-bottom-bar>.ff-button:hover>.ff-text{color:#c8c8c8}.sv-chrome-footer .sv-bottom-bar>.ff-button[selected]{background-color:#0089bf;color:#f0f0f0}.sv-chrome-footer .sv-bottom-bar>.ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px rgb(0, 100.4188481675, 140));fill:#c8c8c8}.sv-chrome-footer .sv-bottom-bar>.ff-button[selected]:hover,.sv-chrome-footer .sv-bottom-bar>.ff-button[selected]:focus{background-color:rgb(0,166.264921466,231.8)}.sv-chrome-footer .sv-text-icon{font-family:"Hind Siliguri",sans-serif;font-weight:bold;line-height:25px}.sv-main-menu-wrapper{position:relative;height:100%;min-width:50px}.sv-main-menu{display:flex;flex-direction:column;padding:6px 9px 6px 6px;height:100%;overflow-y:auto;overflow-x:hidden;pointer-events:auto;position:absolute;box-sizing:border-box;overscroll-behavior-y:contain}.sv-main-menu>.ff-button{margin:2px 0;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);width:38px;height:38px;background-color:rgba(31,36,38,.8);border-radius:20px;font-size:17px;transition:all .15s;pointer-events:auto}.sv-main-menu>.ff-button .ff-text{color:#a0a0a0}.sv-main-menu>.ff-button:focus{outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-main-menu>.ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-main-menu>.ff-button:focus-visible{outline:none;background-color:rgba(31,36,38,.8);box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-main-menu>.ff-button:hover{background-color:rgba(74,82,87,.5);fill:#c8c8c8}.sv-main-menu>.ff-button:hover>.ff-text{color:#c8c8c8}.sv-main-menu>.ff-button[selected]{background-color:#0089bf;color:#f0f0f0}.sv-main-menu>.ff-button[selected]>.ff-icon{filter:drop-shadow(1px 1px 6px rgb(0, 100.4188481675, 140));fill:#c8c8c8}.sv-main-menu>.ff-button[selected]:hover,.sv-main-menu>.ff-button[selected]:focus{background-color:rgb(0,166.264921466,231.8)}.sv-share-menu{position:relative;width:450px;max-width:85%;padding:8px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,.35);pointer-events:auto}.sv-share-menu .ff-title{margin:.5em 0 1em 0}.sv-share-menu .ff-button{flex:0 0 auto}.sv-share-menu .ff-text-edit{height:6.5em}.sv-share-menu .sv-share-buttons .ff-button{width:48px;height:48px;border-radius:48px;margin:0 1em 1em 0;padding:0}.sv-share-menu .sv-share-buttons .ff-button .ff-icon{height:30px;fill:#f0f0f0}.sv-share-menu .sv-share-button-twitter{background-color:#00aced}.sv-share-menu .sv-share-button-twitter:focus{outline:none;background-color:#00aced;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-twitter:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-twitter:focus-visible{outline:none;background:#00aced;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-twitter:hover{background-color:rgb(33,194.1139240506,255)}.sv-share-menu .sv-share-button-facebook{background-color:#3c5a99}.sv-share-menu .sv-share-button-facebook:focus{outline:none;background-color:#3c5a99;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-facebook:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-facebook:focus-visible{outline:none;background:#3c5a99;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-facebook:hover{background-color:rgb(78.2957746479,112.9436619718,185.7042253521)}.sv-share-menu .sv-share-button-linkedin{background-color:#0077b5}.sv-share-menu .sv-share-button-linkedin:focus{outline:none;background-color:#0077b5;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-linkedin:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-linkedin:focus-visible{outline:none;background:#0077b5;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-linkedin:hover{background-color:rgb(0,152.5303867403,232)}.sv-share-menu .sv-share-button-email{background-color:#d28842}.sv-share-menu .sv-share-button-email:focus{outline:none;background-color:#d28842;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-email:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-share-menu .sv-share-button-email:focus-visible{outline:none;background:#d28842;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-share-menu .sv-share-button-email:hover{background-color:hsl(29.1666666667,61.5384615385%,64.1176470588%)}.sv-document-overlay{position:absolute;left:52px;top:52px;right:6px;bottom:0;pointer-events:auto}.sv-tour-menu .sv-article,.sv-reader-view .sv-article{position:relative}.sv-tour-menu .sv-article .sv-nav-button,.sv-reader-view .sv-article .sv-nav-button{float:right;margin:1em .5em;padding:2px}.sv-tour-menu .sv-article .sv-nav-button .ff-icon,.sv-reader-view .sv-article .sv-nav-button .ff-icon{height:1.5em}.sv-tour-menu .sv-entry,.sv-reader-view .sv-entry{position:relative;cursor:pointer;padding:5px 0 5px 15px;margin:2px 2px 16px 2px;max-width:960px;background-color:rgba(27,34,38,.5)}.sv-tour-menu .sv-entry:hover,.sv-reader-view .sv-entry:hover{background-color:rgba(51,59,64,.5)}.sv-tour-menu .sv-entry .sv-titlebar,.sv-reader-view .sv-entry .sv-titlebar{display:flex}.sv-tour-menu .sv-entry .ff-icon,.sv-reader-view .sv-entry .ff-icon{margin:auto 10px auto auto;height:1.5em;border-radius:60px;border-style:solid;box-shadow:0 0 2px #a0a0a0;padding:.6em .6em}.sv-option-menu{position:relative;width:225px;max-width:85%;height:200px;max-height:85%;padding:8px;background:#343434;box-shadow:0 0 20px rgba(0,0,0,.35);pointer-events:auto}.sv-option-menu .ff-title{padding:.3em 0 .3em .3em}.sv-option-menu .ff-header{padding:.3em 0 .3em .3em;background:rgba(31,36,38,.8)}.sv-option-menu .ff-button{flex:0 0 auto}.sv-option-menu .sv-scroll-offset{top:50px}.sv-option-menu .sv-centered{justify-content:center;padding:.3em 0 .3em .3em}.sv-option-menu .sv-entry{position:relative;cursor:pointer;padding:5px 0 5px 15px;margin-bottom:2px;max-width:960px;background-color:rgba(27,34,38,.5);user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-option-menu .sv-entry:focus{outline:2px solid rgb(191,236.9057591623,255);outline-offset:-2px;background-color:rgba(27,34,38,.5)}.sv-option-menu .sv-entry:focus:not(:focus-visible){outline:0}.sv-option-menu .sv-entry:focus-visible{outline:2px solid rgb(191,236.9057591623,255);outline-offset:-2px;background-color:rgba(27,34,38,.5)}.sv-option-menu .sv-entry:hover{background-color:rgba(51,59,64,.5);fill:#c8c8c8}.sv-option-menu .sv-entry[selected]{background-color:#0089bf;color:#f0f0f0}.sv-option-menu .sv-entry[selected]:hover,.sv-option-menu .sv-entry[selected]:focus{background-color:rgb(0,166.264921466,231.8)}.sv-main-help{position:relative;width:90%;height:90%;padding:8px;background:#343434;pointer-events:auto}.sv-main-help .sv-help-section{display:flex;text-align:center;width:33%;min-width:180px;max-height:90%;flex-direction:column;justify-content:center;margin-top:20px;margin-bottom:20px}.sv-main-help .sv-help-short{min-width:100px}.sv-main-help .sv-help-row{display:flex;flex-wrap:wrap;height:90%;justify-content:center;overflow:auto}.sv-main-help .sv-help-text{padding:5px 5px 0px 5px;display:flex;align-items:center;justify-content:center}.sv-main-help .sv-help-region{height:100%;display:flex;flex-direction:column}.sv-main-help .ff-icon{height:2rem}.sv-main-help .sv-commands{flex:0 0 auto;display:flex;flex-wrap:wrap;padding:2px}.sv-main-help .sv-commands .ff-button{width:50%;min-width:100px}.sv-bottom-bar-container{position:relative;display:flex;justify-content:center;transition:transform .3s ease-out,opacity .15s ease-out;z-index:1}.sv-bottom-bar-container.sv-transition{transform:translateY(40px);opacity:0}.sv-bottom-bar-container .ff-button{transition:all .15s}.sv-blue-bar{flex:0 1 960px;display:flex;flex-direction:column;background-color:rgba(5,7,8,.85);border-left:1px solid rgba(0,137,191,.5);border-right:1px solid rgba(0,137,191,.5);margin:0 -1px 0 -1px;min-width:0px;pointer-events:auto;user-select:none;-moz-user-select:none;-webkit-user-select:none}.sv-blue-bar .sv-group{display:flex;flex-direction:column}.sv-blue-bar .sv-section{position:relative;display:flex;flex-direction:row;border-top:1px solid rgba(0,137,191,.5)}.sv-blue-bar .sv-section-lead,.sv-blue-bar .sv-section-trail{flex:0 0 auto;padding:6px;width:38px}.sv-blue-bar .sv-section-lead:hover,.sv-blue-bar .sv-section-trail:hover{background-color:rgba(74,82,87,.5)}.sv-blue-bar .sv-section-lead{border-right:1px solid rgba(0,137,191,.5)}.sv-blue-bar .sv-section-trail{border-left:1px solid rgba(0,137,191,.5)}.sv-blue-bar .sv-transparent-button{flex:0 1 auto;padding:6px;border-radius:2px}.sv-blue-bar .sv-transparent-button .ff-text{margin:1px 2px}.sv-blue-bar .sv-transparent-button .ff-icon{height:22px;margin:1px 2px}.sv-blue-bar .sv-centered{justify-content:center;padding:.3em 0 .3em .3em}.sv-tour-navigator{color:#c8c8c8}.sv-tour-navigator .sv-content{flex:1;margin:2px 8px;text-align:center}.sv-tour-navigator .sv-title{font-size:1.1em}@keyframes ticker{100%{transform:translateX(var(--x-offset))}}.sv-tour-navigator .sv-text{font-size:.9em}.sv-text-scroll{animation:ticker 1s linear 1;text-overflow:clip}.sv-target-navigator .sv-content{flex:1;margin:2px 8px;text-align:center}.sv-target-navigator .sv-title{font-size:1.1em}.sv-tag-cloud .sv-tag-buttons{flex:1 1 auto;display:flex;flex-wrap:wrap;justify-content:center;margin:4px}.sv-tag-cloud .sv-tag-button{flex:0 1 auto;margin:3px 3px;padding:2px 4px;background-color:rgba(31,36,38,.8);border-radius:3px;font-size:.88em}.sv-tag-cloud .sv-tag-button:hover{background-color:rgba(74,82,87,.5)}.sv-tag-cloud .sv-tag-button[selected]{background-color:#0089bf}.sv-tag-cloud .sv-tag-button .ff-text{margin:1px 2px}.sv-tag-cloud .sv-tag-button .ff-icon{height:22px;margin:1px 2px}.sv-property[disabled],.sv-property[aria-disabled=true]{filter:brightness(0.6)}.sv-property .ff-input{min-width:auto;width:0;margin:0;padding:2px}.sv-property .ff-input,.sv-property select{text-align:right;background-image:none;appearance:auto}.sv-property .ff-input:focus,.sv-property select:focus{text-align:left}.sv-property.sv-property-color{position:relative;display:block}.sv-property.sv-property-color>.sv-property-field{display:flex}.sv-property.sv-property-color>.sv-property-field .ff-button{min-width:23px;border-radius:2px;margin:2px}.sv-property.sv-property-color .ff-color-edit{position:absolute;width:200px;height:180px;right:0px;top:-188px;background:rgb(39.25,39.25,39.25);padding:8px;border-radius:2px}.sv-property.sv-property-number .sv-property-field{position:relative;touch-action:none;display:inline-flex}.sv-property.sv-property-number .sv-property-field .ff-bar{background:rgb(39.25,39.25,39.25);position:absolute;inset:0;margin:0;width:0;box-sizing:border-box;border:2px solid rgb(26.5,26.5,26.5)}.sv-property.sv-property-number .sv-property-field .ff-input,.sv-property.sv-property-number .sv-property-field .ff-unit{position:relative;touch-action:none}.sv-property.sv-property-number .sv-property-field .ff-bar,.sv-property.sv-property-number .sv-property-field .ff-unit{pointer-events:none;user-select:none}.sv-property.sv-property-slider{flex:0 2 180px}.sv-property.sv-property-slider .ff-linear-slider{height:6px;margin:12px 2px;padding-right:16px;border-radius:2px;background-color:rgb(77.5,77.5,77.5)}.sv-property.sv-property-slider .ff-linear-slider .ff-knob{width:16px;height:26px;margin:-10px 0 0 0;border-radius:2px;background-color:#0089bf;box-shadow:0 0 6px #000}.sv-property.sv-property-options .sv-options-buttons{display:flex;flex-wrap:wrap;justify-content:center;padding:2px 0;gap:2px}.sv-property.sv-property-options .sv-options-buttons .ff-button.ff-control{flex:0 1 auto}.sv-tool-bar{color:#c8c8c8;pointer-events:auto}.sv-tool-bar .sv-tool-buttons{flex:1 1 auto;display:flex;margin:4px;overflow-x:auto}.sv-tool-bar .sv-tool-buttons .sv-tool-button:first-child{margin-left:auto}.sv-tool-bar .sv-tool-buttons .sv-tool-button:last-child{margin-right:auto}.sv-tool-bar .sv-tool-button{flex:0 1 auto;margin:2px;padding:1px 2px;border-radius:3px;font-size:.882em}.sv-tool-bar .sv-tool-button .ff-text{margin:1px 2px}.sv-tool-bar .sv-tool-button .ff-icon{height:22px;margin:1px 2px}.sv-tool-bar-container{position:relative;bottom:0px;width:100%}.sv-tool-controls{flex:1 1 auto;display:flex;justify-content:center;align-items:center;font-size:.882em}.sv-tool-controls .sv-property{flex:0 1 auto;align-self:start;display:flex;flex-direction:column;margin:4px}.sv-tool-controls .sv-property label{height:1.25em}.sv-tool-controls .sv-property.sv-nogap{margin:4px 0 !important}.sv-tool-controls .sv-property.sv-property-slider{flex:0 2 180px}.sv-tool-controls .sv-options{display:flex}.sv-tool-controls .ff-label{margin:2px}.sv-tool-controls .ff-string{flex:0 1 auto;height:26px;margin:2px;font-size:1.34em}.sv-tool-controls .ff-button{height:26px;margin:2px;padding:0 4px;background:#343434;border-radius:2px}.sv-tool-controls .ff-button:focus{outline:none;background:#343434;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-tool-controls .ff-button:focus:not(:focus-visible){outline:0;box-shadow:0 0}.sv-tool-controls .ff-button:focus-visible{outline:none;background:#343434;box-shadow:0 0 3pt 2pt rgb(191,236.9057591623,255)}.sv-tool-controls .ff-button:hover{background-color:#676767;fill:#c8c8c8}.sv-view-tool-view .sv-options,.sv-render-tool-view .sv-options,.sv-light-tool-view .sv-options{flex-wrap:wrap}.sv-tape-tool-view .sv-tool-controls,.sv-slice-tool-view .sv-tool-controls,.sv-environment-tool-view .sv-tool-controls{flex-wrap:wrap}.sv-action-prompt{height:30px;width:30px;fill:#fff}.sv-caption-view{position:absolute;bottom:10%;z-index:2;font-size:1.5rem;justify-content:center;display:flex;width:100%}.sv-caption-box{position:relative;text-align:center;background-color:rgba(0,0,0,.85);max-width:85%}.sv-splash{padding:7px;pointer-events:auto;background-color:rgba(54,61,64,.6);max-width:min(80%, 800px);min-width:50%;max-height:90%;overflow-y:auto}.sv-splash>:focus-visible{outline:none;box-shadow:0 0}.sv-audio-view{display:flex;align-items:center;flex:1 1 auto;max-width:100%;min-width:110px;height:30px;background-color:#f0f0f0;border-radius:15px;color:#000;cursor:auto}.sv-audio-view>.ff-button{width:30px;height:30px;border-radius:15px;flex:0 1 auto;padding:0px;margin-right:3px;background-color:#f0f0f0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.sv-audio-view>.ff-button .ff-icon{height:1.5em;margin:5px;fill:#000}.sv-audio-view>.ff-button:focus{background-color:#f0f0f0}.sv-audio-view>.ff-button:hover{background-color:rgb(163.5,163.5,163.5)}.sv-audio-view>.ff-button:hover>.ff-icon{fill:#000}.sv-audio-view .sv-timer{font-size:small;display:flex}.sv-audio-view input{width:100%;margin-left:3px;margin-right:3px}.sv-narrate-player{position:absolute;pointer-events:auto;width:200px;max-width:75%;margin:auto auto;left:0;right:0;z-index:4;padding-top:6px}',e.appendChild(t);const n=this.application.system;e.appendChild(new ee(n)),e.appendChild(new Ge(n));const i=document.createElement("div");i.setAttribute("id",l.Ay.stackId),e.appendChild(i),l.Ay.shadowRootNode=e;const r=document.createElement("div");r.classList.add("sr-only"),r.setAttribute("id","sr-intro"),r.setAttribute("aria-live","polite"),e.appendChild(r)}connected(){this.fullscreen.fullscreenElement=this,this.viewer.rootElement=this,this.arManager.shadowRoot=this.shadowRoot}disconnected(){super.disconnected(),this.fullscreen.fullscreenElement=null,this.viewer.rootElement=null,window.VoyagerStory||(this.application.dispose(),this.application=null)}attributeChangedCallback(e,t,n){const i=this.application;if(super.attributeChangedCallback(e,t,n),i&&"root"===e){const e=this.getAttribute("root");e.length>0&&(i.props.root=e,i.reloadDocument(),this.connected())}else!i||"document"!==e&&"iiif-content"!==e?i&&"controls"===e&&i.enableNavigation(n):(i.props.document=this.getAttribute(e),i.reloadDocument(),this.connected())}onFocus(){this.shadowRoot.getElementById("sr-intro").innerText="The Voyager web application allows you to view and interact with a 3D model from the Smithsonian collection. Use the tab key to move through interactive elements, enter or spacebar keys to activate, and the escape key to exit menus."}toggleAnnotations(){this.application&&this.application.toggleAnnotations()}toggleReader(){this.application&&this.application.toggleReader()}toggleTours(){this.application&&this.application.toggleTours()}toggleTools(){this.application&&this.application.toggleTools()}toggleMeasurement(){this.application&&this.application.toggleMeasurement()}enableAR(){this.application&&this.application.enableAR()}getArticles(){if(this.application){return this.application.getArticles()}}getAnnotations(){if(this.application){return this.application.getAnnotations()}}getCameraOrbit(e){if(this.application){return this.application.getCameraOrbit(e||null)}}setCameraOrbit(e,t){this.application&&this.application.setCameraOrbit(e,t)}getCameraOffset(e){if(this.application){return this.application.getCameraOffset(e||null)}}setCameraOffset(e,t,n){this.application&&this.application.setCameraOffset(e,t,n)}setBackgroundColor(e,t){this.application&&this.application.setBackgroundColor(e,t||null)}setBackgroundStyle(e){this.application&&this.application.setBackgroundStyle(e)}setActiveAnnotation(e){this.application&&this.viewer.ins.activeAnnotation.setValue(e)}setActiveArticle(e){this.application&&this.application.setActiveArticle(e)}setTourStep(e,t,n){this.application&&this.application.setTourStep(e,t,void 0===n||n)}getTours(){if(this.application)return this.application.getTours()}setLanguage(e){this.application&&this.application.setLanguage(e)}getLanguages(){if(this.application)return this.application.getLanguages()}getActiveLanguage(){if(this.application)return this.application.getActiveLanguage()}resetViewer(){this.application&&this.application.resetViewer()}getTags(){if(this.application){return this.viewer.outs.tagCloud.value}}setActiveTags(e){if(this.application){this.viewer.ins.activeTags.setValue(e)}}};$e=Qe([(0,s.EM)("voyager-explorer")],$e);const qe=$e},9687:function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(3681))},9733:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,gK:()=>h.gK});var i=n(3331);const r=[function(e){return e},function(e,t){for(let n=0,i=t.length;n<i;++n)t[n]=e[n];return t}],o=[function(e){return!!e},function(e,t){for(let n=0,i=t.length;n<i;++n)t[n]=!!e[n];return t}],s=[function(e){return String(e)},function(e,t){for(let n=0,i=t.length;n<i;++n)t[n]=String(e[n]);return t}],a=[function(e,t){throw new Error(`illegal value conversion from ${typeof e} to ${typeof t}`)},function(e,t,n){throw new Error(`illegal array conversion from ${typeof e[0]} to ${typeof t[0]}`)}],l={number:{number:r,boolean:o,string:s,object:a},boolean:{number:[function(e){return e?1:0},function(e,t){for(let n=0,i=t.length;n<i;++n)t[n]=e[n]?1:0;return t}],boolean:r,string:s,object:a},string:{number:[function(e){return parseFloat(e)||0},function(e,t){for(let n=0,i=t.length;n<i;++n)t[n]=parseFloat(e[n])||0;return t}],boolean:o,string:r,object:a},object:{number:a,boolean:o,string:s,object:r}},c={number:{number:!0,boolean:!0,string:!0,object:!1},boolean:{number:!0,boolean:!0,string:!0,object:!1},string:{number:!0,boolean:!0,string:!0,object:!1},object:{number:!1,boolean:!0,string:!0,object:!0}},d=[[function(e,t,n){return n(e,t)},function(e,t,n){return t[0]=n(e),t},function(e,t,n){return t[1]=n(e),t},function(e,t,n){return t[2]=n(e),t},function(e,t,n){return t[3]=n(e),t}],[function(e,t,n){return n(e[0])},function(e,t,n){return t[0]=n(e[0]),t},function(e,t,n){return t[1]=n(e[0]),t},function(e,t,n){return t[2]=n(e[0]),t},function(e,t,n){return t[3]=n(e[0]),t}],[function(e,t,n){return n(e[1])},function(e,t,n){return t[0]=n(e[1]),t},function(e,t,n){return t[1]=n(e[1]),t},function(e,t,n){return t[2]=n(e[1]),t},function(e,t,n){return t[3]=n(e[1]),t}],[function(e,t,n){return n(e[2])},function(e,t,n){return t[0]=n(e[2]),t},function(e,t,n){return t[1]=n(e[2]),t},function(e,t,n){return t[2]=n(e[2]),t},function(e,t,n){return t[3]=n(e[2]),t}],[function(e,t,n){return n(e[3])},function(e,t,n){return t[0]=n(e[3]),t},function(e,t,n){return t[1]=n(e[3]),t},function(e,t,n){return t[2]=n(e[3]),t},function(e,t,n){return t[3]=n(e[3]),t}]];class u{constructor(e,t,n,i){if(1===e.elementCount&&n>=0)throw new Error("non-array source property; can't link to element");if(1===t.elementCount&&i>=0)throw new Error("non-array destination property; can't link to element");this.source=e,this.destination=t,this.sourceIndex=n,this.destinationIndex=i;const r=void 0===n?-1:n,o=void 0===i?-1:i,s=e.elementCount>1&&r<0&&o<0;this.fnConvert=function(e,t,n){const i=n?1:0;return l[e][t][i]}(e.type,t.type,s);const a=function(e,t,n){return-1===e&&-1===t?n:e<=3&&t<=3?d[e+1][t+1]:function(n,i,r){return i[t]=r(n[e]),i}}(r,o,this.fnConvert);var c,u,h;this.fnCopy=(c=e.isMulti(),u=t.isMulti(),h=a,!1===c?!1===u?h:function(e,t,n){for(let n=0,i=t.length;n<i;++n)t[n]=h(e,t[n]);return t}:!1===u?function(e,t,n){return e.length>0&&(t=h(e[0],t)),t}:function(e,t,n){for(let n=0,i=e.length,r=t.length;n<r;++n)t[n]=h(e[n%i],t[n]);return t})}push(){this.destination.setValue(this.fnCopy(this.source.value,this.destination.value,this.fnConvert))}}var h=n(0);class p extends i.A{constructor(e,t,n){if(super(),this.addEvents("value","link","change","dispose"),!t||void 0===t.preset)throw new Error("missing schema/preset");const i=t.preset,r=Array.isArray(i);this.type=typeof(r?i[0]:i),this.schema=t,this.custom=n||!1,this.elementCount=r?i.length:1,this.inLinks=[],this.outLinks=[],this._group=null,this._key="",this._path=e,this.value=null,this.reset(),this.changed=!t.event}get group(){return this._group}get key(){return this._key}get path(){return this._path}set path(e){this._path=e,this.emit({type:"change",what:"path",property:this})}get name(){return this._path.split(".").pop()}dispose(){this.unlink(),this._group&&this._group.removeProperty(this),this.emit({type:"dispose",property:this})}setValue(e,t,n){this.value=e,t||(this.changed=!0,this.isInput()&&(this._group.linkable.changed=!0)),n||this.emit("value",e);const i=this.outLinks;for(let e=0,t=i.length;e<t;++e)i[e].push()}setOption(e,t,n){if(!this.schema.options)throw new Error("not an 'option' type");const i=this.schema.options.indexOf(e);i>=0&&this.setValue(i,t,n)}copyValue(e,t){Array.isArray(e)&&(e=e.slice()),this.setValue(e,t)}set(e){e||(this.changed=!0,this.isInput()&&(this._group.linkable.changed=!0)),this.emit("value",this.value);const t=this.outLinks;for(let e=0,n=t.length;e<n;++e)t[e].push()}cloneValue(){const e=this.value;return Array.isArray(e)?e.slice():e}getValidatedValue(e){const t=this.value;if(this.isArray()){e=e||[];for(let n=0,i=t.length;n<i;++n)e[n]=this.validateValue(t[n]);return e}return this.validateValue(t)}linkTo(e,t,n){e.linkFrom(this,t,n)}linkFrom(e,t,n){if(!this.canLinkFrom(e,t,n))throw new Error(`can't link from '${e.path}' to '${this.path}'`);const i=new u(e,this,t,n);e.addOutLink(i),this.addInLink(i)}unlinkTo(e,t,n){e.unlinkFrom(this,t,n)}unlinkFrom(e,t,n){const i=this.inLinks.find(i=>i.source===e&&i.sourceIndex===t&&i.destinationIndex===n);return!!i&&(e.removeOutLink(i),this.removeInLink(i),!0)}unlink(){this.inLinks.slice().forEach(e=>{e.source.removeOutLink(e),this.removeInLink(e)});if(this.outLinks.slice().forEach(e=>{this.removeOutLink(e),e.destination.removeInLink(e)}),0!==this.inLinks.length||0!==this.outLinks.length)throw new Error("fatal: leftover links")}addInLink(e){if(e.destination!==this)throw new Error("input link's destination must equal this");this.inLinks.push(e),this.requestSort(),this.emit({type:"link",add:!0,remove:!1,link:e})}addOutLink(e){if(e.source!==this)throw new Error("output link's source must equal this");this.outLinks.push(e),this.requestSort(),e.push()}removeInLink(e){const t=this.inLinks.indexOf(e);if(t<0)throw new Error("input link not found");this.inLinks.splice(t,1),this.requestSort(),0===this.inLinks.length&&"object"===this.type&&this.reset(),this.emit({type:"link",add:!1,remove:!0,link:e})}removeOutLink(e){const t=this.outLinks.indexOf(e);if(t<0)throw new Error("output link not found");this.outLinks.splice(t,1),this.requestSort()}canLinkTo(e,t,n){return e.canLinkFrom(this,t,n)}canLinkFrom(e,t,n){if(this.isOutput())return!1;const i=t>=0,r=n>=0;if(!e.isArray()&&i)throw new Error("non-array source property; can't link to element");if(!this.isArray()&&r)throw new Error("non-array destination property; can't link to element");const o=e.isArray()&&!i;return o===(this.isArray()&&!r)&&((!o||e.elementCount===this.elementCount)&&(!("object"===e.type&&"object"===this.type&&!function(e,t){if(!e||!t)return!1;let n=e.prototype;for(;n;){if(n===t.prototype)return!0;n=n.prototype}return!1}(e.schema.objectType,this.schema.objectType))&&(s=e.type,a=this.type,c[s][a])));var s,a}reset(){let e;if(this.isMulti()){let t=this.value;t?t.length=1:e=t=[],t[0]=this.clonePreset()}else e=this.clonePreset();this.setValue(e)}setMultiChannelCount(e){if(!this.isMulti())throw new Error("can't set multi channel count on non-multi property");const t=this.value,n=t.length;t.length=e;for(let i=n;i<e;++i)t[i]=this.clonePreset();this.changed=!0}requestSort(){this._group&&this._group.linkable&&this._group.linkable.requestSort()}setOptions(e){if(!this.schema.options)throw new Error(`property type mismatch, can't set options on '${this.path}'`);this.schema.options=e.slice(),this.emit({type:"change",what:"options",property:this})}getOptionText(){const e=this.schema.options;if("number"===this.type&&e){const t=Math.trunc(this.value);return e[t<0||t>=e.length?0:t]||""}}isInput(){return this._group&&this._group===this._group.linkable.ins}isOutput(){return this._group&&this._group===this._group.linkable.outs}isArray(){return Array.isArray(this.schema.preset)}isMulti(){return!!this.schema.multi}isDefault(){const e=this.schema.multi?this.value[0]:this.value,t=this.schema.preset,n=Array.isArray(e)?e.length:-1;if(n!==(Array.isArray(t)?t.length:-1))return!1;if(n>=0){for(let i=0;i<n;++i)if(e[i]!==t[i])return!1;return!0}return e===t}hasLinks(){return this.inLinks.length>0||this.outLinks.length>0}hasInLinks(e){const t=this.inLinks;if(!(e>=0))return t.length>0;for(let n=0,i=t.length;n<i;++n)if(t[n].destinationIndex===e)return!0;return!1}hasMainInLinks(){const e=this.inLinks;for(let t=0,n=e.length;t<n;++t)if(!(e[t].destinationIndex>=0))return!0;return!1}hasOutLinks(e){const t=this.outLinks;if(!(e>=0))return t.length>0;for(let n=0,i=t.length;n<i;++n)if(t[n].sourceIndex===e)return!0;return!1}inLinkCount(){return this.inLinks.length}outLinkCount(){return this.outLinks.length}toJSON(){let e=this.custom?{path:this.path,schema:Object.assign({},this.schema)}:null;return this.isOutput()||this.hasMainInLinks()||this.isDefault()||"object"===this.type||(e=e||{},e.value=this.value),this.outLinks.length>0&&(e=e||{},e.links=this.outLinks.map(e=>{const t={id:e.destination._group.linkable.id,key:e.destination.key};return e.sourceIndex>=0&&(t.srcIndex=e.sourceIndex),e.destinationIndex>=0&&(t.dstIndex=e.destinationIndex),t})),e}fromJSON(e,t){void 0!==e.value&&(this.value=e.value),void 0!==e.links&&e.links.forEach(e=>{t[e.id].ins[e.key].linkFrom(this,e.srcIndex,e.dstIndex)})}toString(){const e=this.schema,t=e.event?"event":e.options?"enum":this.type;return`${this.path} [${t}]`}dump(e=""){console.log(e+`Property '${this.path}', key: ${this.key}, value: ${this.value}`)}validateValue(e){const t=this.schema;if(t.enum){const n=Math.trunc(e);return t.enum[n]?n:0}if(t.options){const n=Math.trunc(e);return n<0||n>=t.options.length?0:n}return"number"===this.type?(e=t.min?Math.max(t.min,e):e,e=t.max?Math.min(t.max,e):e):e}clonePreset(){const e=this.schema.preset;return Array.isArray(e)?e.slice():e}}},9741:function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(3681))},9757:function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(3681))},9770:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,i,r){var o=e+" ";switch(i){case"s":return n||r?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?o+(n||r?"sekúndur":"sekúndum"):o+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?o+(n||r?"mínútur":"mínútum"):n?o+"mínúta":o+"mínútu";case"hh":return t(e)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return t(e)?n?o+"dagar":o+(r?"daga":"dögum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mánuður":r?"mánuð":"mánuði";case"MM":return t(e)?n?o+"mánuðir":o+(r?"mánuði":"mánuðum"):n?o+"mánuður":o+(r?"mánuð":"mánuði");case"y":return n||r?"ár":"ári";case"yy":return t(e)?o+(n||r?"ár":"árum"):o+(n||r?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(3681))},9801:function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(3681))},9820:(e,t,n)=>{var i=n(6788),r=1/0;e.exports=function(e){return(null==e?0:e.length)?i(e,r):[]}},9831:function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(3681))},9851:(e,t,n)=>{"use strict";var i=n(6763),r=n(4019),o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let s=class extends r.A{constructor(){super(...arguments),this.type="string",this.property=null,this.name="",this.onChange=e=>{const t=e.target.value;this.property.setValue(t)}}firstConnected(){super.firstConnected(),this.classList.add("sv-property-string")}update(e){if(!this.property)throw new Error("missing property attribute");if("string"!==this.property.type)throw new Error(`not a string property: '${this.property.path}'`);if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&this.property.on("value",this.onUpdate,this)}super.update(e)}render(){const e=this.property,t=this.name||e.name,n=e.value;return i.qy`${t?i.qy`<label class="ff-label ff-off">${t}</label>`:null}
            <input ?disabled=${"true"===this.ariaDisabled} type="text" class="sv-property-field ff-input"
                .value=${n} 
                @change=${this.onChange}
                @focus=${e=>{e.target.select()}}}
                @keypress=${e=>{"Enter"===e.key&&e.target.blur()}}
            >
        `}};o([(0,i.MZ)({attribute:!1})],s.prototype,"property",void 0),o([(0,i.MZ)({type:String})],s.prototype,"name",void 0),s=o([(0,i.EM)("sv-property-string")],s)},9909:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var i=n(3423),r=n(8313),o=n(6679),s=n(9616),a=n(4640),l=n(9521),c=n(2652),d=n(3350),u=n(4085),h=n(1721);const p=new a.Pq0,m=new a.Pq0,f=new a.PTz,g=new a.kn4;class v extends i.Ay{constructor(){super(...arguments),this._clock=new a.zD7,this._mixer=null,this._activeClips=[],this._direction={},this._initialOffset={},this._animGroups={},this._animQueue=[],this.ins=this.addInputs(v.ins)}get setup(){return this.getGraphComponent(h.A)}get viewer(){return this.getGraphComponent(c.A)}create(){super.create(),this._mixer=new a.Iw4(null),this._mixer.addEventListener("finished",e=>{const t=this._activeClips.findIndex(t=>t.clip===e.action);t>-1&&this._activeClips.splice(t,1)}),this.graph.components.on(s.A,this.onModelComponent,this),this.graph.components.on(u.A,this.onSnapshotsComponent,this),this.system.on("pointer-up",this.onPointerUp,this),this.viewer.ins.activeAnnotation.on("value",this.onAnnotationActivate,this)}dispose(){this.viewer.ins.activeAnnotation.off("value",this.onAnnotationActivate,this),this.system.off("pointer-up",this.onPointerUp,this),this.graph.components.off(u.A,this.onSnapshotsComponent,this),this.graph.components.off(s.A,this.onModelComponent,this),super.dispose()}update(){const{ins:e,outs:t}=this;return e.reset.changed&&(this._mixer.stopAllAction(),Object.keys(this._direction).forEach(e=>delete this._direction[e]),this._activeClips.length=0),!0}stopAction(e){if(e.type==o.mB[o.mB.PlayAnimation]){const t=this._activeClips.findIndex(t=>t.id===e.id);t>-1&&(this._activeClips[t].clip.stop(),this._activeClips.splice(t,1))}}onPointerUp(e){if(e.isPrimary&&!e.isDragging&&!this.setup.tape.ins.enabled.value&&e.component&&e.component.is(s.A)){if(e.originalEvent.composedPath().slice(0,5).some(e=>e instanceof l.sf))return;const t=e.component.node.getComponent(r.A,!0);if(t){const n=t.actions.items.filter(e=>e.trigger==o.Ui[o.Ui.OnClick]);n.length>0&&n.forEach(t=>{t.type==o.mB[o.mB.PlayAudio]?this.setup.audio.play(t.audioId):t.type==o.mB[o.mB.PlayAnimation]&&this.playAnimation(e.component,t)})}}}tick(){const e=this._clock.getDelta();return this._activeClips.length>0&&(this._mixer.update(e),!0)}onModelComponent(e){const t=e.object;e.add?t.on("model-load",e=>this.onModelLoad(e,t),this):e.remove&&t.off("model-load",e=>this.onModelLoad(e,t),this)}onSnapshotsComponent(e){const t=e.object;e.add?t.outs.end.on("value",this.onTransitionEnd,this):e.remove&&t.outs.end.off("value",this.onTransitionEnd,this)}onModelLoad(e,t){const n=t.node.getComponent(r.A,!0);if(n){const e=n.actions.items.filter(e=>e.trigger==o.Ui[o.Ui.OnLoad]);e.length>0&&e.forEach(e=>{this.playAnimation(t,e)})}}onAnnotationActivate(){const e=this.viewer.ins.activeAnnotation.value;this.getGraphComponents(r.A).forEach(t=>{const n=t.actions.items.filter(t=>e.length>0&&t.annotationId==e);n.length>0&&n.forEach(n=>{if(n.type==o.mB[o.mB.PlayAnimation]){const i=t.node.getComponent(s.A);i.getComponent(d.A).getAnnotationById(e).data.viewId?this._animQueue.push({model:i,action:n}):this.playAnimation(i,n)}})})}onTransitionEnd(){for(;this._animQueue.length>0;){const e=this._animQueue.pop();this.playAnimation(e.model,e.action)}}playAnimation(e,t){const n=e.object3D.children[0].children[0],i=e.object3D,r=e.node.getComponent(d.A).object3D;r.parent.name!==n.name&&(r.parent.add((new a.B69).add((new a.B69).add(r))),r.parent.name=n.name,r.parent.parent.matrixAutoUpdate=!1,this._initialOffset[n.id]=(new a.kn4).copy(n.matrix),this._animGroups[n.id]=new a.P5j(n,r.parent)),n.matrixAutoUpdate=!0,i.matrix.decompose(p,f,m),p.multiplyScalar(1/m.x),m.setScalar(1),r.matrix.compose(p,f,m).invert(),r.matrix.multiply(g.copy(this._initialOffset[n.id]).invert()),r.parent.parent.matrix.copy(i.matrix),r.parent.parent.matrixWorldNeedsUpdate=!0;const s=this._mixer.clipAction(a.tz3.findByName(n.animations,t.animation),this._animGroups[n.id]);if(s&&!s.isRunning()){if(s.reset(),t.style==o.nf[o.nf.PingPong]){const e=s.getClip().name;s.clampWhenFinished=!0,Object.keys(this._direction).includes(e)?(this._direction[e]*=-1,s.timeScale=this._direction[e],s.time=s.timeScale>0?0:s.getClip().duration):this._direction[e]=1}else s.time=0,s.timeScale=1,s.clampWhenFinished=!1;t.style==o.nf[o.nf.Loop]?s.setLoop(a.aMy,1/0):s.setLoop(a.G3T,1),s.play(),!this._activeClips.some(e=>e.id===t.id)&&this._activeClips.push({id:t.id,clip:s})}}fromData(){}toData(){return null}}v.typeName="CVActionManager",v.text="Actions",v.icon="",v.isSystemSingleton=!0,v.ins={reset:i.gK.Event("Actions.Reset")}},9929:(e,t)=>{"use strict";var n,i,r,o,s,a,l,c,d,u;t.LX=t.T5=t.C0=t.bB=t.es=t.S3=t.nS=void 0,function(e){e.BOOKMARKING="oa:bookmarking",e.CLASSIFYING="oa:classifying",e.COMMENTING="oa:commenting",e.DESCRIBING="oa:describing",e.EDITING="oa:editing",e.HIGHLIGHTING="oa:highlighting",e.IDENTIFYING="oa:identifying",e.LINKING="oa:linking",e.MODERATING="oa:moderating",e.PAINTING="sc:painting",e.QUESTIONING="oa:questioning",e.REPLYING="oa:replying",e.TAGGING="oa:tagging",e.TRANSCRIBING="oad:transcribing"}(n||(n={})),function(e){e.AUTO_ADVANCE="auto-advance",e.CONTINUOUS="continuous",e.FACING_PAGES="facing-pages",e.HIDDEN="hidden",e.INDIVIDUALS="individuals",e.MULTI_PART="multi-part",e.NO_NAV="no-nav",e.NON_PAGED="non-paged",e.PAGED="paged",e.REPEAT="repeat",e.SEQUENCE="sequence",e.THUMBNAIL_NAV="thumbnail-nav",e.TOGETHER="together",e.UNORDERED="unordered"}(i||(t.nS=i={})),function(e){e.CANVAS="canvas",e.CHOICE="choice",e.OA_CHOICE="oa:choice",e.CONTENT_AS_TEXT="contentastext",e.DATASET="dataset",e.DOCUMENT="document",e.IMAGE="image",e.MODEL="model",e.MOVING_IMAGE="movingimage",e.PDF="pdf",e.PHYSICAL_OBJECT="physicalobject",e.SOUND="sound",e.TEXT="text",e.TEXTUALBODY="textualbody",e.VIDEO="video"}(r||(t.S3=r={})),function(e){e.ANNOTATION="annotation",e.CANVAS="canvas",e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range",e.SEQUENCE="sequence"}(o||(t.es=o={})),function(e){e.AUDIO_MP4="audio/mp4",e.CORTO="application/corto",e.DICOM="application/dicom",e.DRACO="application/draco",e.EPUB="application/epub+zip",e.GIRDER="image/vnd.kitware.girder",e.GLB="model/gltf-binary",e.GLTF="model/gltf+json",e.IIIF_PRESENTATION_2='application/ld+json;profile="http://iiif.io/api/presentation/2/context.json"',e.IIIF_PRESENTATION_3='application/ld+json;profile="http://iiif.io/api/presentation/3/context.json"',e.JPG="image/jpeg",e.M3U8="application/vnd.apple.mpegurl",e.MP3="audio/mp3",e.MPEG="audio/mpeg",e.MPEG_DASH="application/dash+xml",e.OBJ="model/obj",e.OPF="application/oebps-package+xml",e.PDF="application/pdf",e.PLY="application/ply",e.THREEJS="application/vnd.threejs+json",e.USDZ="model/vnd.usd+zip",e.VIDEO_MP4="video/mp4",e.WAV="audio/wav",e.WEBM="video/webm"}(s||(s={})),function(e){e.DOC="application/msword",e.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.ODT="application/vnd.oasis.opendocument.text",e.PDF="application/pdf"}(a||(a={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",e.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",e.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",e.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",e.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",e.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",e.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",e.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",e.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",e.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",e.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",e.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",e.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",e.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",e.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",e.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",e.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",e.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",e.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",e.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",e.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",e.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",e.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",e.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",e.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",e.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",e.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",e.SEARCH_0="http://iiif.io/api/search/0/search",e.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",e.SEARCH_1="http://iiif.io/api/search/1/search",e.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",e.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",e.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",e.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",e.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",e.DOWNLOAD_EXTENSIONS="http://universalviewer.io/download-extensions-profile",e.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",e.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json"}(l||(t.bB=l={})),function(e){e.IMAGE_SERVICE_2="ImageService2",e.IMAGE_SERVICE_3="ImageService3"}(c||(t.C0=c={})),function(e){e.BOTTOM_TO_TOP="bottom-to-top",e.LEFT_TO_RIGHT="left-to-right",e.RIGHT_TO_LEFT="right-to-left",e.TOP_TO_BOTTOM="top-to-bottom"}(d||(t.T5=d={})),function(e){e.CONTINUOUS="continuous",e.INDIVIDUALS="individuals",e.NON_PAGED="non-paged",e.PAGED="paged",e.TOP="top"}(u||(t.LX=u={}))},9932:e=>{"use strict";function t(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,r){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,e)):process.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):r?(process.nextTick(n,o),r(e)):process.nextTick(n,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},9938:function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(3681))},9979:(e,t,n)=>{"use strict";n.d(t,{BdL:()=>L,JeP:()=>zt,fCn:()=>a,zkh:()=>l});var i=n(4640);function r(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function o(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,o=i.byteLength,s=e.createBuffer();let a;if(e.bindBuffer(n,s),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)a=e.FLOAT;else if(i instanceof Uint16Array)a=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=e.SHORT;else if(i instanceof Uint32Array)a=e.UNSIGNED_INT;else if(i instanceof Int32Array)a=e.INT;else if(i instanceof Int8Array)a=e.BYTE;else if(i instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=e.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,o=n.updateRanges;if(e.bindBuffer(i,t),0===o.length)e.bufferSubData(i,0,r);else{o.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<o.length;e++){const n=o[t],i=o[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,o[t]=i)}o.length=t+1;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.bufferSubData(i,n.start*r.BYTES_PER_ELEMENT,r,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}const s={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},a={common:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new i.dwI},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new i.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new i.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new i.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new i.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new i.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new i.dwI},normalScale:{value:new i.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new i.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new i.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new i.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new i.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new i.Q1f(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0},uvTransform:{value:new i.dwI}},sprite:{diffuse:{value:new i.Q1f(16777215)},opacity:{value:1},center:{value:new i.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new i.dwI},alphaMap:{value:null},alphaMapTransform:{value:new i.dwI},alphaTest:{value:0}}},l={basic:{uniforms:(0,i.Iit)([a.common,a.specularmap,a.envmap,a.aomap,a.lightmap,a.fog]),vertexShader:s.meshbasic_vert,fragmentShader:s.meshbasic_frag},lambert:{uniforms:(0,i.Iit)([a.common,a.specularmap,a.envmap,a.aomap,a.lightmap,a.emissivemap,a.bumpmap,a.normalmap,a.displacementmap,a.fog,a.lights,{emissive:{value:new i.Q1f(0)}}]),vertexShader:s.meshlambert_vert,fragmentShader:s.meshlambert_frag},phong:{uniforms:(0,i.Iit)([a.common,a.specularmap,a.envmap,a.aomap,a.lightmap,a.emissivemap,a.bumpmap,a.normalmap,a.displacementmap,a.fog,a.lights,{emissive:{value:new i.Q1f(0)},specular:{value:new i.Q1f(1118481)},shininess:{value:30}}]),vertexShader:s.meshphong_vert,fragmentShader:s.meshphong_frag},standard:{uniforms:(0,i.Iit)([a.common,a.envmap,a.aomap,a.lightmap,a.emissivemap,a.bumpmap,a.normalmap,a.displacementmap,a.roughnessmap,a.metalnessmap,a.fog,a.lights,{emissive:{value:new i.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:s.meshphysical_vert,fragmentShader:s.meshphysical_frag},toon:{uniforms:(0,i.Iit)([a.common,a.aomap,a.lightmap,a.emissivemap,a.bumpmap,a.normalmap,a.displacementmap,a.gradientmap,a.fog,a.lights,{emissive:{value:new i.Q1f(0)}}]),vertexShader:s.meshtoon_vert,fragmentShader:s.meshtoon_frag},matcap:{uniforms:(0,i.Iit)([a.common,a.bumpmap,a.normalmap,a.displacementmap,a.fog,{matcap:{value:null}}]),vertexShader:s.meshmatcap_vert,fragmentShader:s.meshmatcap_frag},points:{uniforms:(0,i.Iit)([a.points,a.fog]),vertexShader:s.points_vert,fragmentShader:s.points_frag},dashed:{uniforms:(0,i.Iit)([a.common,a.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:s.linedashed_vert,fragmentShader:s.linedashed_frag},depth:{uniforms:(0,i.Iit)([a.common,a.displacementmap]),vertexShader:s.depth_vert,fragmentShader:s.depth_frag},normal:{uniforms:(0,i.Iit)([a.common,a.bumpmap,a.normalmap,a.displacementmap,{opacity:{value:1}}]),vertexShader:s.meshnormal_vert,fragmentShader:s.meshnormal_frag},sprite:{uniforms:(0,i.Iit)([a.sprite,a.fog]),vertexShader:s.sprite_vert,fragmentShader:s.sprite_frag},background:{uniforms:{uvTransform:{value:new i.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:s.background_vert,fragmentShader:s.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new i.dwI}},vertexShader:s.backgroundCube_vert,fragmentShader:s.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:s.cube_vert,fragmentShader:s.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:s.equirect_vert,fragmentShader:s.equirect_frag},distanceRGBA:{uniforms:(0,i.Iit)([a.common,a.displacementmap,{referencePosition:{value:new i.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:s.distanceRGBA_vert,fragmentShader:s.distanceRGBA_frag},shadow:{uniforms:(0,i.Iit)([a.lights,a.fog,{color:{value:new i.Q1f(0)},opacity:{value:1}}]),vertexShader:s.shadow_vert,fragmentShader:s.shadow_frag}};l.physical={uniforms:(0,i.Iit)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new i.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new i.dwI},clearcoatNormalScale:{value:new i.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new i.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new i.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new i.dwI},sheen:{value:0},sheenColor:{value:new i.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new i.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new i.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new i.dwI},transmissionSamplerSize:{value:new i.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new i.dwI},attenuationDistance:{value:0},attenuationColor:{value:new i.Q1f(0)},specularColor:{value:new i.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new i.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new i.dwI},anisotropyVector:{value:new i.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new i.dwI}}]),vertexShader:s.meshphysical_vert,fragmentShader:s.meshphysical_frag};const c={r:0,b:0,g:0},d=new i.O9p,u=new i.kn4;function h(e,t,n,r,o,s,a){const h=new i.Q1f(0);let p,m,f=!0===s?0:1,g=null,v=0,y=null;function b(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function A(t,n){t.getRGB(c,(0,i._Ut)(e)),r.buffers.color.setClear(c.r,c.g,c.b,n,a)}return{getClearColor:function(){return h},setClearColor:function(e,t=1){h.set(e),f=t,A(h,f)},getClearAlpha:function(){return f},setClearAlpha:function(e){f=e,A(h,f)},render:function(t){let n=!1;const i=b(t);null===i?A(h,f):i&&i.isColor&&(A(i,1),n=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=b(n);r&&(r.isCubeTexture||r.mapping===i.Om)?(void 0===m&&(m=new i.eaF(new i.iNn(1,1,1),new i.BKk({name:"BackgroundCubeMaterial",uniforms:(0,i.lxW)(l.backgroundCube.uniforms),vertexShader:l.backgroundCube.vertexShader,fragmentShader:l.backgroundCube.fragmentShader,side:i.hsX,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(m)),d.copy(n.backgroundRotation),d.x*=-1,d.y*=-1,d.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(d.y*=-1,d.z*=-1),m.material.uniforms.envMap.value=r,m.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,m.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,m.material.uniforms.backgroundRotation.value.setFromMatrix4(u.makeRotationFromEuler(d)),m.material.toneMapped=i.ppV.getTransfer(r.colorSpace)!==i.KLL,g===r&&v===r.version&&y===e.toneMapping||(m.material.needsUpdate=!0,g=r,v=r.version,y=e.toneMapping),m.layers.enableAll(),t.unshift(m,m.geometry,m.material,0,0,null)):r&&r.isTexture&&(void 0===p&&(p=new i.eaF(new i.bdM(2,2),new i.BKk({name:"BackgroundMaterial",uniforms:(0,i.lxW)(l.background.uniforms),vertexShader:l.background.vertexShader,fragmentShader:l.background.fragmentShader,side:i.hB5,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(p)),p.material.uniforms.t2D.value=r,p.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,p.material.toneMapped=i.ppV.getTransfer(r.colorSpace)!==i.KLL,!0===r.matrixAutoUpdate&&r.updateMatrix(),p.material.uniforms.uvTransform.value.copy(r.matrix),g===r&&v===r.version&&y===e.toneMapping||(p.material.needsUpdate=!0,g=r,v=r.version,y=e.toneMapping),p.layers.enableAll(),t.unshift(p,p.geometry,p.material,0,0,null))},dispose:function(){void 0!==m&&(m.geometry.dispose(),m.material.dispose(),m=void 0),void 0!==p&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}}}function p(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},o=d(null);let s=o,a=!1;function l(t){return e.bindVertexArray(t)}function c(t){return e.deleteVertexArray(t)}function d(e){const t=[],i=[],r=[];for(let e=0;e<n;e++)t[e]=0,i[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){const e=s.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){p(e,0)}function p(t,n){const i=s.newAttributes,r=s.enabledAttributes,o=s.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function m(){const t=s.newAttributes,n=s.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function f(t,n,i,r,o,s,a){!0===a?e.vertexAttribIPointer(t,n,i,o,s):e.vertexAttribPointer(t,n,i,r,o,s)}function g(){v(),a=!0,s!==o&&(s=o,l(s.object))}function v(){o.geometry=null,o.program=null,o.wireframe=!1}return{setup:function(n,o,c,g,v){let y=!1;const b=function(t,n,i){const o=!0===i.wireframe;let s=r[t.id];void 0===s&&(s={},r[t.id]=s);let a=s[n.id];void 0===a&&(a={},s[n.id]=a);let l=a[o];void 0===l&&(l=d(e.createVertexArray()),a[o]=l);return l}(g,c,o);s!==b&&(s=b,l(s.object)),y=function(e,t,n,i){const r=s.attributes,o=t.attributes;let a=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){const n=r[t];let i=o[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;a++}}return s.attributesNum!==a||s.index!==i}(n,g,c,v),y&&function(e,t,n,i){const r={},o=t.attributes;let a=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,a++}}s.attributes=r,s.attributesNum=a,s.index=i}(n,g,c,v),null!==v&&t.update(v,e.ELEMENT_ARRAY_BUFFER),(y||a)&&(a=!1,function(n,r,o,s){u();const a=s.attributes,l=o.getAttributes(),c=r.defaultAttributeValues;for(const r in l){const o=l[r];if(o.location>=0){let l=a[r];if(void 0===l&&("instanceMatrix"===r&&n.instanceMatrix&&(l=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(l=n.instanceColor)),void 0!==l){const r=l.normalized,a=l.itemSize,c=t.get(l);if(void 0===c)continue;const d=c.buffer,u=c.type,m=c.bytesPerElement,g=u===e.INT||u===e.UNSIGNED_INT||l.gpuType===i.Yuy;if(l.isInterleavedBufferAttribute){const t=l.data,i=t.stride,c=l.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<o.locationSize;e++)p(o.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<o.locationSize;e++)h(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,d);for(let e=0;e<o.locationSize;e++)f(o.location+e,a/o.locationSize,u,r,i*m,(c+a/o.locationSize*e)*m,g)}else{if(l.isInstancedBufferAttribute){for(let e=0;e<o.locationSize;e++)p(o.location+e,l.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=l.meshPerAttribute*l.count)}else for(let e=0;e<o.locationSize;e++)h(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,d);for(let e=0;e<o.locationSize;e++)f(o.location+e,a/o.locationSize,u,r,a*m,a/o.locationSize*e*m,g)}}else if(void 0!==c){const t=c[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(o.location,t);break;case 3:e.vertexAttrib3fv(o.location,t);break;case 4:e.vertexAttrib4fv(o.location,t);break;default:e.vertexAttrib1fv(o.location,t)}}}}m()}(n,o,c,g),null!==v&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){g();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const e in t){const n=t[e];for(const e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)c(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:m}}function m(e,t,n){let i;function r(t,r,o){0!==o&&(e.drawArraysInstanced(i,t,r,o),n.update(r,i,o))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,o);let s=0;for(let e=0;e<o;e++)s+=r[e];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,o,s,a){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],o[t],a[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,o,0,a,0,s);let t=0;for(let e=0;e<s;e++)t+=o[e]*a[e];n.update(t,i,1)}}}function f(e,t,n,r){let o;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=!0===n.logarithmicDepthBuffer,d=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==o)return o;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");o=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o},getMaxPrecision:s,textureFormatReadable:function(t){return t===i.GWd||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const o=n===i.ix0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==i.OUM&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==i.RQf&&!o)},precision:a,logarithmicDepthBuffer:c,reverseDepthBuffer:d,maxTextures:u,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function g(e){const t=this;let n=null,r=0,o=!1,s=!1;const a=new i.Zcv,l=new i.dwI,c={value:null,needsUpdate:!1};function d(e,n,i,r){const o=null!==e?e.length:0;let s=null;if(0!==o){if(s=c.value,!0!==r||null===s){const t=i+4*o,r=n.matrixWorldInverse;l.getNormalMatrix(r),(null===s||s.length<t)&&(s=new Float32Array(t));for(let t=0,n=i;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(r,l),a.normal.toArray(s,n),s[n+3]=a.constant}c.value=s,c.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,s}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||o;return o=t,r=e.length,n},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=d(e,t,0)},this.setState=function(i,a,l){const u=i.clippingPlanes,h=i.clipIntersection,p=i.clipShadows,m=e.get(i);if(!o||null===u||0===u.length||s&&!p)s?d(null):function(){c.value!==n&&(c.value=n,c.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=s?0:r,t=4*e;let i=m.clippingState||null;c.value=i,i=d(u,a,t,l);for(let e=0;e!==t;++e)i[e]=n[e];m.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function v(e){let t=new WeakMap;function n(e,t){return t===i.wfO?e.mapping=i.hy7:t===i.uV5&&(e.mapping=i.xFO),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(o){if(o&&o.isTexture){const s=o.mapping;if(s===i.wfO||s===i.uV5){if(t.has(o)){return n(t.get(o).texture,o.mapping)}{const s=o.image;if(s&&s.height>0){const a=new i.o6l(s.height);return a.fromEquirectangularTexture(e,o),t.set(o,a),o.addEventListener("dispose",r),n(a.texture,o.mapping)}return null}}}return o},dispose:function(){t=new WeakMap}}}const y=[.125,.215,.35,.446,.526,.582],b=20,A=new i.qUd,_=new i.Q1f;let w=null,x=0,C=0,E=!1;const M=(1+Math.sqrt(5))/2,S=1/M,T=[new i.Pq0(-M,S,0),new i.Pq0(M,S,0),new i.Pq0(-S,0,M),new i.Pq0(S,0,M),new i.Pq0(0,M,-S),new i.Pq0(0,M,S),new i.Pq0(-1,1,-1),new i.Pq0(1,1,-1),new i.Pq0(-1,1,1),new i.Pq0(1,1,1)],k=new i.Pq0;class L{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100,r={}){const{size:o=256,position:s=k}=r;w=this._renderer.getRenderTarget(),x=this._renderer.getActiveCubeFace(),C=this._renderer.getActiveMipmapLevel(),E=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a,s),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=O(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=R(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(w,x,C),this._renderer.xr.enabled=E,e.scissorTest=!1,I(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===i.hy7||e.mapping===i.xFO?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),w=this._renderer.getRenderTarget(),x=this._renderer.getActiveCubeFace(),C=this._renderer.getActiveMipmapLevel(),E=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:i.k6q,minFilter:i.k6q,generateMipmaps:!1,type:i.ix0,format:i.GWd,colorSpace:i.Zr2,depthBuffer:!1},r=D(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=D(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let o=e;const s=e-4+1+y.length;for(let a=0;a<s;a++){const s=Math.pow(2,o);n.push(s);let l=1/s;a>e-4?l=y[a-e+4-1]:0===a&&(l=0),r.push(l);const c=1/(s-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],p=6,m=6,f=3,g=2,v=1,b=new Float32Array(f*m*p),A=new Float32Array(g*m*p),_=new Float32Array(v*m*p);for(let e=0;e<p;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];b.set(i,f*m*e),A.set(h,g*m*e);const r=[e,e,e,e,e,e];_.set(r,v*m*e)}const w=new i.LoY;w.setAttribute("position",new i.THS(b,f)),w.setAttribute("uv",new i.THS(A,g)),w.setAttribute("faceIndex",new i.THS(_,v)),t.push(w),o>4&&o--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(b),o=new i.Pq0(0,1,0),s=new i.BKk({name:"SphericalGaussianBlur",defines:{n:b,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:P(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1});return s}(r,e,t)}return r}_compileMaterial(e){const t=new i.eaF(this._lodPlanes[0],e);this._renderer.compile(t,A)}_sceneToCubeUV(e,t,n,r,o){const s=new i.ubm(90,1,t,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,u=c.toneMapping;c.getClearColor(_),c.toneMapping=i.y_p,c.autoClear=!1;const h=new i.V9B({name:"PMREM.Background",side:i.hsX,depthWrite:!1,depthTest:!1}),p=new i.eaF(new i.iNn,h);let m=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,m=!0):(h.color.copy(_),m=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(s.up.set(0,a[t],0),s.position.set(o.x,o.y,o.z),s.lookAt(o.x+l[t],o.y,o.z)):1===n?(s.up.set(0,0,a[t]),s.position.set(o.x,o.y,o.z),s.lookAt(o.x,o.y+l[t],o.z)):(s.up.set(0,a[t],0),s.position.set(o.x,o.y,o.z),s.lookAt(o.x,o.y,o.z+l[t]));const i=this._cubeSize;I(r,n*i,t>2?i:0,i,i),c.setRenderTarget(r),m&&c.render(p,s),c.render(e,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=u,c.autoClear=d,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===i.hy7||e.mapping===i.xFO;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=O()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=R());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new i.eaF(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const a=this._cubeSize;I(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,A)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let t=1;t<i;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=T[(i-t-1)%T.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,r,o,s,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new i.eaF(this._lodPlanes[r],c),u=c.uniforms,h=this._sizeLods[n]-1,p=isFinite(o)?Math.PI/(2*h):2*Math.PI/39,m=o/p,f=isFinite(o)?1+Math.floor(3*m):b;f>b&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const g=[];let v=0;for(let e=0;e<b;++e){const t=e/m,n=Math.exp(-t*t/2);g.push(n),0===e?v+=n:e<f&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=g,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:y}=this;u.dTheta.value=p,u.mipInt.value=y-n;const _=this._sizeLods[r];I(t,3*_*(r>y-4?r-y+4:0),4*(this._cubeSize-_),3*_,2*_),l.setRenderTarget(t),l.render(d,A)}}function D(e,t,n){const r=new i.nWS(e,t,n);return r.texture.mapping=i.Om,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function I(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function R(){return new i.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:P(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1})}function O(){return new i.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:P(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:i.XIg,depthTest:!1,depthWrite:!1})}function P(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function B(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(o){if(o&&o.isTexture){const s=o.mapping,a=s===i.wfO||s===i.uV5,l=s===i.hy7||s===i.xFO;if(a||l){let i=t.get(o);const s=void 0!==i?i.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==s)return null===n&&(n=new L(e)),i=a?n.fromEquirectangular(o,i):n.fromCubemap(o,i),i.texture.pmremVersion=o.pmremVersion,t.set(o,i),i.texture;if(void 0!==i)return i.texture;{const s=o.image;return a&&s&&s.height>0||l&&s&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)?(null===n&&(n=new L(e)),i=a?n.fromEquirectangular(o):n.fromCubemap(o),i.texture.pmremVersion=o.pmremVersion,t.set(o,i),o.addEventListener("dispose",r),i.texture):null}}}return o},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function N(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&(0,i.mcG)("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function U(e,t,n,r){const o={},s=new WeakMap;function a(e){const i=e.target;null!==i.index&&t.remove(i.index);for(const e in i.attributes)t.remove(i.attributes[e]);i.removeEventListener("dispose",a),delete o[i.id];const l=s.get(i);l&&(t.remove(l),s.delete(i)),r.releaseStatesOfGeometry(i),!0===i.isInstancedBufferGeometry&&delete i._maxInstanceCount,n.memory.geometries--}function l(e){const n=[],r=e.index,o=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{if(void 0===o)return;{const e=o.array;a=o.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const l=new((0,i.AQS)(n)?i.MW4:i.A$4)(n,1);l.version=a;const c=s.get(e);c&&t.remove(c),s.set(e,l)}return{get:function(e,t){return!0===o[t.id]||(t.addEventListener("dispose",a),o[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const n in i)t.update(i[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&l(e)}else l(e);return s.get(e)}}}function F(e,t,n){let i,r,o;function s(t,s,a){0!==a&&(e.drawElementsInstanced(i,s,r,t*o,a),n.update(s,i,a))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,s){e.drawElements(i,s,r,t*o),n.update(s,i,1)},this.renderInstances=s,this.renderMultiDraw=function(e,o,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,o,0,r,e,0,s);let a=0;for(let e=0;e<s;e++)a+=o[e];n.update(a,i,1)},this.renderMultiDrawInstances=function(e,a,l,c){if(0===l)return;const d=t.get("WEBGL_multi_draw");if(null===d)for(let t=0;t<e.length;t++)s(e[t]/o,a[t],c[t]);else{d.multiDrawElementsInstancedWEBGL(i,a,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=a[e]*c[e];n.update(t,i,1)}}}function z(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function H(e,t,n){const r=new WeakMap,o=new i.IUQ;return{update:function(s,a,l){const c=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==d?d.length:0;let h=r.get(a);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const p=void 0!==a.morphAttributes.position,m=void 0!==a.morphAttributes.normal,f=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let b=0;!0===p&&(b=1),!0===m&&(b=2),!0===f&&(b=3);let A=a.attributes.position.count*b,_=1;A>t.maxTextureSize&&(_=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const w=new Float32Array(A*_*4*u),x=new i.rFo(w,A,_,u);x.type=i.RQf,x.needsUpdate=!0;const C=4*b;for(let M=0;M<u;M++){const S=g[M],T=v[M],k=y[M],L=A*_*4*M;for(let D=0;D<S.count;D++){const I=D*C;!0===p&&(o.fromBufferAttribute(S,D),w[L+I+0]=o.x,w[L+I+1]=o.y,w[L+I+2]=o.z,w[L+I+3]=0),!0===m&&(o.fromBufferAttribute(T,D),w[L+I+4]=o.x,w[L+I+5]=o.y,w[L+I+6]=o.z,w[L+I+7]=0),!0===f&&(o.fromBufferAttribute(k,D),w[L+I+8]=o.x,w[L+I+9]=o.y,w[L+I+10]=o.z,w[L+I+11]=4===k.itemSize?o.w:1)}}function E(){x.dispose(),r.delete(a),a.removeEventListener("dispose",E)}h={count:u,texture:x,size:new i.I9Y(A,_)},r.set(a,h),a.addEventListener("dispose",E)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)l.getUniforms().setValue(e,"morphTexture",s.morphTexture,n);else{let R=0;for(let P=0;P<c.length;P++)R+=c[P];const O=a.morphTargetsRelative?1:1-R;l.getUniforms().setValue(e,"morphTargetBaseInfluence",O),l.getUniforms().setValue(e,"morphTargetInfluences",c)}l.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function j(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const a=i.render.frame,l=s.geometry,c=t.get(s,l);if(r.get(c)!==a&&(t.update(c),r.set(c,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),r.get(s)!==a&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==a&&(e.update(),r.set(e,a))}return c},dispose:function(){r=new WeakMap}}}const V=new i.gPd,Y=new i.VCu(1,1),G=new i.rFo,Q=new i.dYF,$=new i.b4q,q=[],W=[],K=new Float32Array(16),Z=new Float32Array(9),X=new Float32Array(4);function J(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=q[r];if(void 0===o&&(o=new Float32Array(r),q[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function ee(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function te(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function ne(e,t){let n=W[t];void 0===n&&(n=new Int32Array(t),W[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ie(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function re(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ee(n,t))return;e.uniform2fv(this.addr,t),te(n,t)}}function oe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(ee(n,t))return;e.uniform3fv(this.addr,t),te(n,t)}}function se(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ee(n,t))return;e.uniform4fv(this.addr,t),te(n,t)}}function ae(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ee(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),te(n,t)}else{if(ee(n,i))return;X.set(i),e.uniformMatrix2fv(this.addr,!1,X),te(n,i)}}function le(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ee(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),te(n,t)}else{if(ee(n,i))return;Z.set(i),e.uniformMatrix3fv(this.addr,!1,Z),te(n,i)}}function ce(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(ee(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),te(n,t)}else{if(ee(n,i))return;K.set(i),e.uniformMatrix4fv(this.addr,!1,K),te(n,i)}}function de(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ue(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ee(n,t))return;e.uniform2iv(this.addr,t),te(n,t)}}function he(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ee(n,t))return;e.uniform3iv(this.addr,t),te(n,t)}}function pe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ee(n,t))return;e.uniform4iv(this.addr,t),te(n,t)}}function me(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function fe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(ee(n,t))return;e.uniform2uiv(this.addr,t),te(n,t)}}function ge(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(ee(n,t))return;e.uniform3uiv(this.addr,t),te(n,t)}}function ve(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(ee(n,t))return;e.uniform4uiv(this.addr,t),te(n,t)}}function ye(e,t,n){const r=this.cache,o=n.allocateTextureUnit();let s;r[0]!==o&&(e.uniform1i(this.addr,o),r[0]=o),this.type===e.SAMPLER_2D_SHADOW?(Y.compareFunction=i.TiK,s=Y):s=V,n.setTexture2D(t||s,o)}function be(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Q,r)}function Ae(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||$,r)}function _e(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||G,r)}function we(e,t){e.uniform1fv(this.addr,t)}function xe(e,t){const n=J(t,this.size,2);e.uniform2fv(this.addr,n)}function Ce(e,t){const n=J(t,this.size,3);e.uniform3fv(this.addr,n)}function Ee(e,t){const n=J(t,this.size,4);e.uniform4fv(this.addr,n)}function Me(e,t){const n=J(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Se(e,t){const n=J(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Te(e,t){const n=J(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ke(e,t){e.uniform1iv(this.addr,t)}function Le(e,t){e.uniform2iv(this.addr,t)}function De(e,t){e.uniform3iv(this.addr,t)}function Ie(e,t){e.uniform4iv(this.addr,t)}function Re(e,t){e.uniform1uiv(this.addr,t)}function Oe(e,t){e.uniform2uiv(this.addr,t)}function Pe(e,t){e.uniform3uiv(this.addr,t)}function Be(e,t){e.uniform4uiv(this.addr,t)}function Ne(e,t,n){const i=this.cache,r=t.length,o=ne(n,r);ee(i,o)||(e.uniform1iv(this.addr,o),te(i,o));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||V,o[e])}function Ue(e,t,n){const i=this.cache,r=t.length,o=ne(n,r);ee(i,o)||(e.uniform1iv(this.addr,o),te(i,o));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||Q,o[e])}function Fe(e,t,n){const i=this.cache,r=t.length,o=ne(n,r);ee(i,o)||(e.uniform1iv(this.addr,o),te(i,o));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||$,o[e])}function ze(e,t,n){const i=this.cache,r=t.length,o=ne(n,r);ee(i,o)||(e.uniform1iv(this.addr,o),te(i,o));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||G,o[e])}class He{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ie;case 35664:return re;case 35665:return oe;case 35666:return se;case 35674:return ae;case 35675:return le;case 35676:return ce;case 5124:case 35670:return de;case 35667:case 35671:return ue;case 35668:case 35672:return he;case 35669:case 35673:return pe;case 5125:return me;case 36294:return fe;case 36295:return ge;case 36296:return ve;case 35678:case 36198:case 36298:case 36306:case 35682:return ye;case 35679:case 36299:case 36307:return be;case 35680:case 36300:case 36308:case 36293:return Ae;case 36289:case 36303:case 36311:case 36292:return _e}}(t.type)}}class je{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return we;case 35664:return xe;case 35665:return Ce;case 35666:return Ee;case 35674:return Me;case 35675:return Se;case 35676:return Te;case 5124:case 35670:return ke;case 35667:case 35671:return Le;case 35668:case 35672:return De;case 35669:case 35673:return Ie;case 5125:return Re;case 36294:return Oe;case 36295:return Pe;case 36296:return Be;case 35678:case 36198:case 36298:case 36306:case 35682:return Ne;case 35679:case 36299:case 36307:return Ue;case 35680:case 36300:case 36308:case 36293:return Fe;case 36289:case 36303:case 36311:case 36292:return ze}}(t.type)}}class Ve{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}}}const Ye=/(\w+)(\])?(\[|\.)?/g;function Ge(e,t){e.seq.push(t),e.map[t.id]=t}function Qe(e,t,n){const i=e.name,r=i.length;for(Ye.lastIndex=0;;){const o=Ye.exec(i),s=Ye.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===r){Ge(n,void 0===c?new He(a,e,t):new je(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new Ve(a),Ge(n,e)),n=e}}}class $e{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Qe(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function qe(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let We=0;const Ke=new i.dwI;function Ze(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=r;e<o;e++){const r=e+1;i.push(`${r===t?">":" "} ${r}: ${n[e]}`)}return i.join("\n")}(e.getShaderSource(t),i)}return r}function Xe(e,t){const n=function(e){i.ppV._getMatrix(Ke,i.ppV.workingColorSpace,e);const t=`mat3( ${Ke.elements.map(e=>e.toFixed(4))} )`;switch(i.ppV.getTransfer(e)){case i.VxR:return[t,"LinearTransferOETF"];case i.KLL:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function Je(e,t){let n;switch(t){case i.kyO:n="Linear";break;case i.Mjd:n="Reinhard";break;case i.nNL:n="Cineon";break;case i.FV:n="ACESFilmic";break;case i.LAk:n="AgX";break;case i.aJ8:n="Neutral";break;case i.g7M:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const et=new i.Pq0;function tt(){i.ppV.getLuminanceCoefficients(et);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${et.x.toFixed(4)}, ${et.y.toFixed(4)}, ${et.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function nt(e){return""!==e}function it(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function rt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ot=/^[ \t]*#include +<([\w\d./]+)>/gm;function st(e){return e.replace(ot,lt)}const at=new Map;function lt(e,t){let n=s[t];if(void 0===n){const e=at.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=s[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return st(n)}const ct=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dt(e){return e.replace(ct,ut)}function ut(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function ht(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function pt(e,t,n,r){const o=e.getContext(),a=n.defines;let l=n.vertexShader,c=n.fragmentShader;const d=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===i.QP0?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===i.Wk7?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===i.RyA&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case i.hy7:case i.xFO:t="ENVMAP_TYPE_CUBE";break;case i.Om:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===i.xFO&&(t="ENVMAP_MODE_REFRACTION");return t}(n),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case i.caT:t="ENVMAP_BLENDING_MULTIPLY";break;case i.KRh:t="ENVMAP_BLENDING_MIX";break;case i.XrR:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nt).join("\n")}(n),g=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),v=o.createProgram();let y,b,A=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(nt).join("\n"),y.length>0&&(y+="\n"),b=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(nt).join("\n"),b.length>0&&(b+="\n")):(y=[ht(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(nt).join("\n"),b=[ht(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==i.y_p?"#define TONE_MAPPING":"",n.toneMapping!==i.y_p?s.tonemapping_pars_fragment:"",n.toneMapping!==i.y_p?Je("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",s.colorspace_pars_fragment,Xe("linearToOutputTexel",n.outputColorSpace),tt(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(nt).join("\n")),l=st(l),l=it(l,n),l=rt(l,n),c=st(c),c=it(c,n),c=rt(c,n),l=dt(l),c=dt(c),!0!==n.isRawShaderMaterial&&(A="#version 300 es\n",y=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#define varying in",n.glslVersion===i.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===i.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const _=A+y+l,w=A+b+c,x=qe(o,o.VERTEX_SHADER,_),C=qe(o,o.FRAGMENT_SHADER,w);function E(t){if(e.debug.checkShaderErrors){const n=o.getProgramInfoLog(v).trim(),i=o.getShaderInfoLog(x).trim(),r=o.getShaderInfoLog(C).trim();let s=!0,a=!0;if(!1===o.getProgramParameter(v,o.LINK_STATUS))if(s=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(o,v,x,C);else{const e=Ze(o,x,"vertex"),i=Ze(o,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(v,o.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+i)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==r||(a=!1);a&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:y},fragmentShader:{log:r,prefix:b}})}o.deleteShader(x),o.deleteShader(C),M=new $e(o,v),S=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,v)}let M,S;o.attachShader(v,x),o.attachShader(v,C),void 0!==n.index0AttributeName?o.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),this.getUniforms=function(){return void 0===M&&E(this),M},this.getAttributes=function(){return void 0===S&&E(this),S};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=o.getProgramParameter(v,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=We++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=x,this.fragmentShader=C,this}let mt=0;class ft{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new gt(e),t.set(e,n)),n}}class gt{constructor(e){this.id=mt++,this.code=e,this.usedTimes=0}}function vt(e,t,n,r,o,s,a){const c=new i.zgK,d=new ft,u=new Set,h=[],p=o.logarithmicDepthBuffer,m=o.vertexTextures;let f=o.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return u.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(s,c,h,y,b){const A=y.fog,_=b.geometry,w=s.isMeshStandardMaterial?y.environment:null,x=(s.isMeshStandardMaterial?n:t).get(s.envMap||w),C=x&&x.mapping===i.Om?x.image.height:null,E=g[s.type];null!==s.precision&&(f=o.getMaxPrecision(s.precision),f!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead."));const M=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,S=void 0!==M?M.length:0;let T,k,L,D,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),E){const e=l[E];T=e.vertexShader,k=e.fragmentShader}else T=s.vertexShader,k=s.fragmentShader,d.update(s),L=d.getVertexShaderID(s),D=d.getFragmentShaderID(s);const R=e.getRenderTarget(),O=e.state.buffers.depth.getReversed(),P=!0===b.isInstancedMesh,B=!0===b.isBatchedMesh,N=!!s.map,U=!!s.matcap,F=!!x,z=!!s.aoMap,H=!!s.lightMap,j=!!s.bumpMap,V=!!s.normalMap,Y=!!s.displacementMap,G=!!s.emissiveMap,Q=!!s.metalnessMap,$=!!s.roughnessMap,q=s.anisotropy>0,W=s.clearcoat>0,K=s.dispersion>0,Z=s.iridescence>0,X=s.sheen>0,J=s.transmission>0,ee=q&&!!s.anisotropyMap,te=W&&!!s.clearcoatMap,ne=W&&!!s.clearcoatNormalMap,ie=W&&!!s.clearcoatRoughnessMap,re=Z&&!!s.iridescenceMap,oe=Z&&!!s.iridescenceThicknessMap,se=X&&!!s.sheenColorMap,ae=X&&!!s.sheenRoughnessMap,le=!!s.specularMap,ce=!!s.specularColorMap,de=!!s.specularIntensityMap,ue=J&&!!s.transmissionMap,he=J&&!!s.thicknessMap,pe=!!s.gradientMap,me=!!s.alphaMap,fe=s.alphaTest>0,ge=!!s.alphaHash,ve=!!s.extensions;let ye=i.y_p;s.toneMapped&&(null!==R&&!0!==R.isXRRenderTarget||(ye=e.toneMapping));const be={shaderID:E,shaderType:s.type,shaderName:s.name,vertexShader:T,fragmentShader:k,defines:s.defines,customVertexShaderID:L,customFragmentShaderID:D,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,batching:B,batchingColor:B&&null!==b._colorsTexture,instancing:P,instancingColor:P&&null!==b.instanceColor,instancingMorph:P&&null!==b.morphTexture,supportsVertexTextures:m,outputColorSpace:null===R?e.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:i.Zr2,alphaToCoverage:!!s.alphaToCoverage,map:N,matcap:U,envMap:F,envMapMode:F&&x.mapping,envMapCubeUVHeight:C,aoMap:z,lightMap:H,bumpMap:j,normalMap:V,displacementMap:m&&Y,emissiveMap:G,normalMapObjectSpace:V&&s.normalMapType===i.vyJ,normalMapTangentSpace:V&&s.normalMapType===i.bI3,metalnessMap:Q,roughnessMap:$,anisotropy:q,anisotropyMap:ee,clearcoat:W,clearcoatMap:te,clearcoatNormalMap:ne,clearcoatRoughnessMap:ie,dispersion:K,iridescence:Z,iridescenceMap:re,iridescenceThicknessMap:oe,sheen:X,sheenColorMap:se,sheenRoughnessMap:ae,specularMap:le,specularColorMap:ce,specularIntensityMap:de,transmission:J,transmissionMap:ue,thicknessMap:he,gradientMap:pe,opaque:!1===s.transparent&&s.blending===i.NTi&&!1===s.alphaToCoverage,alphaMap:me,alphaTest:fe,alphaHash:ge,combine:s.combine,mapUv:N&&v(s.map.channel),aoMapUv:z&&v(s.aoMap.channel),lightMapUv:H&&v(s.lightMap.channel),bumpMapUv:j&&v(s.bumpMap.channel),normalMapUv:V&&v(s.normalMap.channel),displacementMapUv:Y&&v(s.displacementMap.channel),emissiveMapUv:G&&v(s.emissiveMap.channel),metalnessMapUv:Q&&v(s.metalnessMap.channel),roughnessMapUv:$&&v(s.roughnessMap.channel),anisotropyMapUv:ee&&v(s.anisotropyMap.channel),clearcoatMapUv:te&&v(s.clearcoatMap.channel),clearcoatNormalMapUv:ne&&v(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ie&&v(s.clearcoatRoughnessMap.channel),iridescenceMapUv:re&&v(s.iridescenceMap.channel),iridescenceThicknessMapUv:oe&&v(s.iridescenceThicknessMap.channel),sheenColorMapUv:se&&v(s.sheenColorMap.channel),sheenRoughnessMapUv:ae&&v(s.sheenRoughnessMap.channel),specularMapUv:le&&v(s.specularMap.channel),specularColorMapUv:ce&&v(s.specularColorMap.channel),specularIntensityMapUv:de&&v(s.specularIntensityMap.channel),transmissionMapUv:ue&&v(s.transmissionMap.channel),thicknessMapUv:he&&v(s.thicknessMap.channel),alphaMapUv:me&&v(s.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(V||q),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===b.isPoints&&!!_.attributes.uv&&(N||me),fog:!!A,useFog:!0===s.fog,fogExp2:!!A&&A.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:p,reverseDepthBuffer:O,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:S,morphTextureStride:I,numDirLights:c.directional.length,numPointLights:c.point.length,numSpotLights:c.spot.length,numSpotLightMaps:c.spotLightMap.length,numRectAreaLights:c.rectArea.length,numHemiLights:c.hemi.length,numDirLightShadows:c.directionalShadowMap.length,numPointLightShadows:c.pointShadowMap.length,numSpotLightShadows:c.spotShadowMap.length,numSpotLightShadowsWithMaps:c.numSpotLightShadowsWithMaps,numLightProbes:c.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:ye,decodeVideoTexture:N&&!0===s.map.isVideoTexture&&i.ppV.getTransfer(s.map.colorSpace)===i.KLL,decodeVideoTextureEmissive:G&&!0===s.emissiveMap.isVideoTexture&&i.ppV.getTransfer(s.emissiveMap.colorSpace)===i.KLL,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===i.$EB,flipSided:s.side===i.hsX,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:ve&&!0===s.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ve&&!0===s.extensions.multiDraw||B)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return be.vertexUv1s=u.has(1),be.vertexUv2s=u.has(2),be.vertexUv3s=u.has(3),u.clear(),be},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){c.disableAll(),t.supportsVertexTextures&&c.enable(0);t.instancing&&c.enable(1);t.instancingColor&&c.enable(2);t.instancingMorph&&c.enable(3);t.matcap&&c.enable(4);t.envMap&&c.enable(5);t.normalMapObjectSpace&&c.enable(6);t.normalMapTangentSpace&&c.enable(7);t.clearcoat&&c.enable(8);t.iridescence&&c.enable(9);t.alphaTest&&c.enable(10);t.vertexColors&&c.enable(11);t.vertexAlphas&&c.enable(12);t.vertexUv1s&&c.enable(13);t.vertexUv2s&&c.enable(14);t.vertexUv3s&&c.enable(15);t.vertexTangents&&c.enable(16);t.anisotropy&&c.enable(17);t.alphaHash&&c.enable(18);t.batching&&c.enable(19);t.dispersion&&c.enable(20);t.batchingColor&&c.enable(21);e.push(c.mask),c.disableAll(),t.fog&&c.enable(0);t.useFog&&c.enable(1);t.flatShading&&c.enable(2);t.logarithmicDepthBuffer&&c.enable(3);t.reverseDepthBuffer&&c.enable(4);t.skinning&&c.enable(5);t.morphTargets&&c.enable(6);t.morphNormals&&c.enable(7);t.morphColors&&c.enable(8);t.premultipliedAlpha&&c.enable(9);t.shadowMapEnabled&&c.enable(10);t.doubleSided&&c.enable(11);t.flipSided&&c.enable(12);t.useDepthPacking&&c.enable(13);t.dithering&&c.enable(14);t.transmission&&c.enable(15);t.sheen&&c.enable(16);t.opaque&&c.enable(17);t.pointsUvs&&c.enable(18);t.decodeVideoTexture&&c.enable(19);t.decodeVideoTextureEmissive&&c.enable(20);t.alphaToCoverage&&c.enable(21);e.push(c.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=g[e.type];let n;if(t){const e=l[t];n=i.LlO.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=h.length;e<t;e++){const t=h[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new pt(e,n,t,s),h.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}},releaseShaderCache:function(e){d.remove(e)},programs:h,dispose:function(){d.dispose()}}}function yt(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function bt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function At(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function _t(){const e=[];let t=0;const n=[],i=[],r=[];function o(n,i,r,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,a,l,c){const d=o(e,t,s,a,l,c);s.transmission>0?i.push(d):!0===s.transparent?r.push(d):n.push(d)},unshift:function(e,t,s,a,l,c){const d=o(e,t,s,a,l,c);s.transmission>0?i.unshift(d):!0===s.transparent?r.unshift(d):n.unshift(d)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||bt),i.length>1&&i.sort(t||At),r.length>1&&r.sort(t||At)}}}function wt(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new _t,e.set(t,[r])):n>=i.length?(r=new _t,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function xt(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new i.Pq0,color:new i.Q1f};break;case"SpotLight":n={position:new i.Pq0,direction:new i.Pq0,color:new i.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new i.Pq0,color:new i.Q1f,distance:0,decay:0};break;case"HemisphereLight":n={direction:new i.Pq0,skyColor:new i.Q1f,groundColor:new i.Q1f};break;case"RectAreaLight":n={color:new i.Q1f,position:new i.Pq0,halfWidth:new i.Pq0,halfHeight:new i.Pq0}}return e[t.id]=n,n}}}let Ct=0;function Et(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Mt(e){const t=new xt,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.I9Y};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new i.Pq0);const o=new i.Pq0,s=new i.kn4,l=new i.kn4;return{setup:function(i){let o=0,s=0,l=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,d=0,u=0,h=0,p=0,m=0,f=0,g=0,v=0,y=0,b=0;i.sort(Et);for(let e=0,a=i.length;e<a;e++){const a=i[e],A=a.color,_=a.intensity,w=a.distance,x=a.shadow&&a.shadow.map?a.shadow.map.texture:null;if(a.isAmbientLight)o+=A.r*_,s+=A.g*_,l+=A.b*_;else if(a.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(a.sh.coefficients[e],_);b++}else if(a.isDirectionalLight){const e=t.get(a);if(e.color.copy(a.color).multiplyScalar(a.intensity),a.castShadow){const e=a.shadow,t=n.get(a);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[c]=t,r.directionalShadowMap[c]=x,r.directionalShadowMatrix[c]=a.shadow.matrix,m++}r.directional[c]=e,c++}else if(a.isSpotLight){const e=t.get(a);e.position.setFromMatrixPosition(a.matrixWorld),e.color.copy(A).multiplyScalar(_),e.distance=w,e.coneCos=Math.cos(a.angle),e.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),e.decay=a.decay,r.spot[u]=e;const i=a.shadow;if(a.map&&(r.spotLightMap[v]=a.map,v++,i.updateMatrices(a),a.castShadow&&y++),r.spotLightMatrix[u]=i.matrix,a.castShadow){const e=n.get(a);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=x,g++}u++}else if(a.isRectAreaLight){const e=t.get(a);e.color.copy(A).multiplyScalar(_),e.halfWidth.set(.5*a.width,0,0),e.halfHeight.set(0,.5*a.height,0),r.rectArea[h]=e,h++}else if(a.isPointLight){const e=t.get(a);if(e.color.copy(a.color).multiplyScalar(a.intensity),e.distance=a.distance,e.decay=a.decay,a.castShadow){const e=a.shadow,t=n.get(a);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[d]=t,r.pointShadowMap[d]=x,r.pointShadowMatrix[d]=a.shadow.matrix,f++}r.point[d]=e,d++}else if(a.isHemisphereLight){const e=t.get(a);e.skyColor.copy(a.color).multiplyScalar(_),e.groundColor.copy(a.groundColor).multiplyScalar(_),r.hemi[p]=e,p++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=a.LTC_FLOAT_1,r.rectAreaLTC2=a.LTC_FLOAT_2):(r.rectAreaLTC1=a.LTC_HALF_1,r.rectAreaLTC2=a.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=s,r.ambient[2]=l;const A=r.hash;A.directionalLength===c&&A.pointLength===d&&A.spotLength===u&&A.rectAreaLength===h&&A.hemiLength===p&&A.numDirectionalShadows===m&&A.numPointShadows===f&&A.numSpotShadows===g&&A.numSpotMaps===v&&A.numLightProbes===b||(r.directional.length=c,r.spot.length=u,r.rectArea.length=h,r.point.length=d,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=g+v-y,r.spotLightMap.length=v,r.numSpotLightShadowsWithMaps=y,r.numLightProbes=b,A.directionalLength=c,A.pointLength=d,A.spotLength=u,A.rectAreaLength=h,A.hemiLength=p,A.numDirectionalShadows=m,A.numPointShadows=f,A.numSpotShadows=g,A.numSpotMaps=v,A.numLightProbes=b,r.version=Ct++)},setupView:function(e,t){let n=0,i=0,a=0,c=0,d=0;const u=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(u),n++}else if(h.isSpotLight){const e=r.spot[a];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(u),a++}else if(h.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),l.identity(),s.copy(h.matrixWorld),s.premultiply(u),l.extractRotation(s),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(l),e.halfHeight.applyMatrix4(l),c++}else if(h.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),i++}else if(h.isHemisphereLight){const e=r.hemi[d];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(u),d++}}},state:r}}function St(e){const t=new Mt(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function Tt(e){let t=new WeakMap;return{get:function(n,i=0){const r=t.get(n);let o;return void 0===r?(o=new St(e),t.set(n,[o])):i>=r.length?(o=new St(e),r.push(o)):o=r[i],o},dispose:function(){t=new WeakMap}}}function kt(e,t,n){let r=new i.PPD;const o=new i.I9Y,s=new i.I9Y,a=new i.IUQ,l=new i.CSG({depthPacking:i.N5j}),c=new i.aVO,d={},u=n.maxTextureSize,h={[i.hB5]:i.hsX,[i.hsX]:i.hB5,[i.$EB]:i.$EB},p=new i.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new i.I9Y},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const f=new i.LoY;f.setAttribute("position",new i.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new i.eaF(f,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.QP0;let y=this.type;function b(n,r){const s=t.update(g);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,m.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new i.nWS(o.x,o.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,p,g,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,m,g,null)}function A(t,n,r,o){let s=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===r.isPointLight?c:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=s.uuid,t=n.uuid;let i=d[e];void 0===i&&(i={},d[e]=i);let r=i[t];void 0===r&&(r=s.clone(),i[t]=r,n.addEventListener("dispose",w)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,o===i.RyA?s.side=null!==n.shadowSide?n.shadowSide:n.side:s.side=null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial){e.properties.get(s).light=r}return s}function _(n,o,s,a,l){if(!1===n.visible)return;if(n.layers.test(o.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===i.RyA)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let c=0,d=t.length;c<d;c++){const d=t[c],u=r[d.materialIndex];if(u&&u.visible){const t=A(n,u,a,l);n.onBeforeShadow(e,n,o,s,i,t,d),e.renderBufferDirect(s,null,i,t,n,d),n.onAfterShadow(e,n,o,s,i,t,d)}}}else if(r.visible){const t=A(n,r,a,l);n.onBeforeShadow(e,n,o,s,i,t,null),e.renderBufferDirect(s,null,i,t,n,null),n.onAfterShadow(e,n,o,s,i,t,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)_(c[e],o,s,a,l)}function w(e){e.target.removeEventListener("dispose",w);for(const t in d){const n=d[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,l){if(!1===v.enabled)return;if(!1===v.autoUpdate&&!1===v.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.state;p.setBlending(i.XIg),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const m=y!==i.RyA&&this.type===i.RyA,f=y===i.RyA&&this.type!==i.RyA;for(let c=0,d=t.length;c<d;c++){const d=t[c],h=d.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",d,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;o.copy(h.mapSize);const g=h.getFrameExtents();if(o.multiply(g),s.copy(h.mapSize),(o.x>u||o.y>u)&&(o.x>u&&(s.x=Math.floor(u/g.x),o.x=s.x*g.x,h.mapSize.x=s.x),o.y>u&&(s.y=Math.floor(u/g.y),o.y=s.y*g.y,h.mapSize.y=s.y)),null===h.map||!0===m||!0===f){const e=this.type!==i.RyA?{minFilter:i.hxR,magFilter:i.hxR}:{};null!==h.map&&h.map.dispose(),h.map=new i.nWS(o.x,o.y,e),h.map.texture.name=d.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const v=h.getViewportCount();for(let e=0;e<v;e++){const t=h.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),p.viewport(a),h.updateMatrices(d,e),r=h.getFrustum(),_(n,l,h.camera,d,this.type)}!0!==h.isPointLightShadow&&this.type===i.RyA&&b(h,l),h.needsUpdate=!1}y=this.type,v.needsUpdate=!1,e.setRenderTarget(c,d,h)}}const Lt={[i.eHc]:i.lGu,[i.brA]:i.K52,[i.U3G]:i.bw0,[i.xSv]:i.Gwm,[i.lGu]:i.eHc,[i.K52]:i.brA,[i.bw0]:i.U3G,[i.Gwm]:i.xSv};function Dt(e,t){const n=new function(){let t=!1;const n=new i.IUQ;let r=null;const o=new i.IUQ(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,i,r,s,a){!0===a&&(t*=s,i*=s,r*=s),n.set(t,i,r,s),!1===o.equals(n)&&(e.clearColor(t,i,r,s),o.copy(n))},reset:function(){t=!1,r=null,o.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,o=null,s=null,a=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const i=a;a=null,this.setClear(i)}},getReversed:function(){return r},setTest:function(t){t?H(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(t){o===t||n||(e.depthMask(t),o=t)},setFunc:function(t){if(r&&(t=Lt[t]),s!==t){switch(t){case i.eHc:e.depthFunc(e.NEVER);break;case i.lGu:e.depthFunc(e.ALWAYS);break;case i.brA:e.depthFunc(e.LESS);break;case i.xSv:e.depthFunc(e.LEQUAL);break;case i.U3G:e.depthFunc(e.EQUAL);break;case i.Gwm:e.depthFunc(e.GEQUAL);break;case i.K52:e.depthFunc(e.GREATER);break;case i.bw0:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}s=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(r&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,o=null,s=null,a=null,r=!1}}},o=new function(){let t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&l===i||(e.stencilOp(t,n,i),s=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null}}},s=new WeakMap,a=new WeakMap;let l={},c={},d=new WeakMap,u=[],h=null,p=!1,m=null,f=null,g=null,v=null,y=null,b=null,A=null,_=new i.Q1f(0,0,0),w=0,x=!1,C=null,E=null,M=null,S=null,T=null;const k=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,D=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(I)[1]),L=D>=1):-1!==I.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),L=D>=2);let R=null,O={};const P=e.getParameter(e.SCISSOR_BOX),B=e.getParameter(e.VIEWPORT),N=(new i.IUQ).fromArray(P),U=(new i.IUQ).fromArray(B);function F(t,n,i,r){const o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}const z={};function H(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function j(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),o.setClear(0),H(e.DEPTH_TEST),r.setFunc(i.xSv),Q(!1),$(i.Vb5),H(e.CULL_FACE),G(i.XIg);const V={[i.gO9]:e.FUNC_ADD,[i.FXf]:e.FUNC_SUBTRACT,[i.nST]:e.FUNC_REVERSE_SUBTRACT};V[i.znC]=e.MIN,V[i.$ei]=e.MAX;const Y={[i.ojh]:e.ZERO,[i.qad]:e.ONE,[i.f4X]:e.SRC_COLOR,[i.ie2]:e.SRC_ALPHA,[i.hgQ]:e.SRC_ALPHA_SATURATE,[i.wn6]:e.DST_COLOR,[i.hdd]:e.DST_ALPHA,[i.LiQ]:e.ONE_MINUS_SRC_COLOR,[i.OuU]:e.ONE_MINUS_SRC_ALPHA,[i.aEY]:e.ONE_MINUS_DST_COLOR,[i.Nt7]:e.ONE_MINUS_DST_ALPHA,[i.RrE]:e.CONSTANT_COLOR,[i.$Yl]:e.ONE_MINUS_CONSTANT_COLOR,[i.e0p]:e.CONSTANT_ALPHA,[i.ov9]:e.ONE_MINUS_CONSTANT_ALPHA};function G(t,n,r,o,s,a,l,c,d,u){if(t!==i.XIg){if(!1===p&&(H(e.BLEND),p=!0),t===i.bCz)s=s||n,a=a||r,l=l||o,n===f&&s===y||(e.blendEquationSeparate(V[n],V[s]),f=n,y=s),r===g&&o===v&&a===b&&l===A||(e.blendFuncSeparate(Y[r],Y[o],Y[a],Y[l]),g=r,v=o,b=a,A=l),!1!==c.equals(_)&&d===w||(e.blendColor(c.r,c.g,c.b,d),_.copy(c),w=d),m=t,x=!1;else if(t!==m||u!==x){if(f===i.gO9&&y===i.gO9||(e.blendEquation(e.FUNC_ADD),f=i.gO9,y=i.gO9),u)switch(t){case i.NTi:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case i.EZo:e.blendFunc(e.ONE,e.ONE);break;case i.Kwu:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case i.EdD:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case i.NTi:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case i.EZo:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case i.Kwu:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case i.EdD:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,v=null,b=null,A=null,_.set(0,0,0),w=0,m=t,x=u}}else!0===p&&(j(e.BLEND),p=!1)}function Q(t){C!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),C=t)}function $(t){t!==i.WNZ?(H(e.CULL_FACE),t!==E&&(t===i.Vb5?e.cullFace(e.BACK):t===i.Jnc?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),E=t}function q(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),S===n&&T===i||(e.polygonOffset(n,i),S=n,T=i)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:o},enable:H,disable:j,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=u,r=!1;if(t){i=d.get(n),void 0===i&&(i=[],d.set(n,i));const o=t.textures;if(i.length!==o.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=o.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=o.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(t,s){t.side===i.$EB?j(e.CULL_FACE):H(e.CULL_FACE);let a=t.side===i.hsX;s&&(a=!a),Q(a),t.blending===i.NTi&&!1===t.transparent?G(i.XIg):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const l=t.stencilWrite;o.setTest(l),l&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Q,setCullFace:$,setLineWidth:function(t){t!==M&&(L&&e.lineWidth(t),M=t)},setPolygonOffset:q,setScissorTest:function(t){t?H(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+k-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===R?e.TEXTURE0+k-1:R);let r=O[i];void 0===r&&(r={type:void 0,texture:void 0},O[i]=r),r.type===t&&r.texture===n||(R!==i&&(e.activeTexture(i),R=i),e.bindTexture(t,n||z[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=O[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let i=a.get(n);void 0===i&&(i=new WeakMap,a.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=a.get(n).get(t);s.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},R=null,O={},c={},d=new WeakMap,u=[],h=null,p=!1,m=null,f=null,g=null,v=null,y=null,b=null,A=null,_=new i.Q1f(0,0,0),w=0,x=!1,C=null,E=null,M=null,S=null,T=null,N.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),o.reset()}}}function It(e,t,n,r,o,s,a){const l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new i.I9Y,u=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return m?new OffscreenCanvas(e,t):(0,i.qq$)("canvas")}function g(e,t,n){let i=1;const r=Y(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),o=Math.floor(i*r.height);void 0===h&&(h=f(n,o));const s=t?f(n,o):h;s.width=n,s.height=o;return s.getContext("2d").drawImage(e,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function v(e){return e.generateMipmaps}function y(t){e.generateMipmap(t)}function b(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function A(n,r,o,s,a=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===e.RED&&(o===e.FLOAT&&(l=e.R32F),o===e.HALF_FLOAT&&(l=e.R16F),o===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(o===e.UNSIGNED_BYTE&&(l=e.R8UI),o===e.UNSIGNED_SHORT&&(l=e.R16UI),o===e.UNSIGNED_INT&&(l=e.R32UI),o===e.BYTE&&(l=e.R8I),o===e.SHORT&&(l=e.R16I),o===e.INT&&(l=e.R32I)),r===e.RG&&(o===e.FLOAT&&(l=e.RG32F),o===e.HALF_FLOAT&&(l=e.RG16F),o===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RG_INTEGER&&(o===e.UNSIGNED_BYTE&&(l=e.RG8UI),o===e.UNSIGNED_SHORT&&(l=e.RG16UI),o===e.UNSIGNED_INT&&(l=e.RG32UI),o===e.BYTE&&(l=e.RG8I),o===e.SHORT&&(l=e.RG16I),o===e.INT&&(l=e.RG32I)),r===e.RGB_INTEGER&&(o===e.UNSIGNED_BYTE&&(l=e.RGB8UI),o===e.UNSIGNED_SHORT&&(l=e.RGB16UI),o===e.UNSIGNED_INT&&(l=e.RGB32UI),o===e.BYTE&&(l=e.RGB8I),o===e.SHORT&&(l=e.RGB16I),o===e.INT&&(l=e.RGB32I)),r===e.RGBA_INTEGER&&(o===e.UNSIGNED_BYTE&&(l=e.RGBA8UI),o===e.UNSIGNED_SHORT&&(l=e.RGBA16UI),o===e.UNSIGNED_INT&&(l=e.RGBA32UI),o===e.BYTE&&(l=e.RGBA8I),o===e.SHORT&&(l=e.RGBA16I),o===e.INT&&(l=e.RGBA32I)),r===e.RGB&&o===e.UNSIGNED_INT_5_9_9_9_REV&&(l=e.RGB9_E5),r===e.RGBA){const t=a?i.VxR:i.ppV.getTransfer(s);o===e.FLOAT&&(l=e.RGBA32F),o===e.HALF_FLOAT&&(l=e.RGBA16F),o===e.UNSIGNED_BYTE&&(l=t===i.KLL?e.SRGB8_ALPHA8:e.RGBA8),o===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),o===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function _(t,n){let r;return t?null===n||n===i.bkx||n===i.V3x?r=e.DEPTH24_STENCIL8:n===i.RQf?r=e.DEPTH32F_STENCIL8:n===i.cHt&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===i.bkx||n===i.V3x?r=e.DEPTH_COMPONENT24:n===i.RQf?r=e.DEPTH_COMPONENT32F:n===i.cHt&&(r=e.DEPTH_COMPONENT16),r}function w(e,t){return!0===v(e)||e.isFramebufferTexture&&e.minFilter!==i.hxR&&e.minFilter!==i.k6q?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function x(e){const t=e.target;t.removeEventListener("dispose",x),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=p.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&E(e),0===Object.keys(i).length&&p.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function C(t){const n=t.target;n.removeEventListener("dispose",C),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let i=0;i<n.__webglFramebuffer[t].length;i++)e.deleteFramebuffer(n.__webglFramebuffer[t][i]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),a.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function E(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete p.get(i)[n.__cacheKey],a.memory.textures--}let M=0;function S(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void O(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}const T={[i.GJx]:e.REPEAT,[i.ghU]:e.CLAMP_TO_EDGE,[i.kTW]:e.MIRRORED_REPEAT},k={[i.hxR]:e.NEAREST,[i.pHI]:e.NEAREST_MIPMAP_NEAREST,[i.Cfg]:e.NEAREST_MIPMAP_LINEAR,[i.k6q]:e.LINEAR,[i.kRr]:e.LINEAR_MIPMAP_NEAREST,[i.$_I]:e.LINEAR_MIPMAP_LINEAR},L={[i.amv]:e.NEVER,[i.FFZ]:e.ALWAYS,[i.vim]:e.LESS,[i.TiK]:e.LEQUAL,[i.kO0]:e.EQUAL,[i.gWB]:e.GEQUAL,[i.eoi]:e.GREATER,[i.jzd]:e.NOTEQUAL};function D(n,s){if(s.type!==i.RQf||!1!==t.has("OES_texture_float_linear")||s.magFilter!==i.k6q&&s.magFilter!==i.kRr&&s.magFilter!==i.Cfg&&s.magFilter!==i.$_I&&s.minFilter!==i.k6q&&s.minFilter!==i.kRr&&s.minFilter!==i.Cfg&&s.minFilter!==i.$_I||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,T[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,k[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,k[s.minFilter]),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,L[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(s.magFilter===i.hxR)return;if(s.minFilter!==i.Cfg&&s.minFilter!==i.$_I)return;if(s.type===i.RQf&&!1===t.has("OES_texture_float_linear"))return;if(s.anisotropy>1||r.get(s).__currentAnisotropy){const i=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,o.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy}}}function I(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",x));const r=n.source;let o=p.get(r);void 0===o&&(o={},p.set(r,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),o[s].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&E(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return i}function R(e,t,n){return Math.floor(Math.floor(e/n)/t)}function O(t,a,l){let c=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(c=e.TEXTURE_3D);const d=I(t,a),u=a.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=r.get(u);if(u.version!==h.__version||!0===d){n.activeTexture(e.TEXTURE0+l);const t=i.ppV.getPrimaries(i.ppV.workingColorSpace),r=a.colorSpace===i.jf0?null:i.ppV.getPrimaries(a.colorSpace),p=a.colorSpace===i.jf0||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let m=g(a.image,!1,o.maxTextureSize);m=V(a,m);const f=s.convert(a.format,a.colorSpace),b=s.convert(a.type);let x,C=A(a.internalFormat,f,b,a.colorSpace,a.isVideoTexture);D(c,a);const E=a.mipmaps,M=!0!==a.isVideoTexture,S=void 0===h.__version||!0===d,T=u.dataReady,k=w(a,m);if(a.isDepthTexture)C=_(a.format===i.dcC,a.type),S&&(M?n.texStorage2D(e.TEXTURE_2D,1,C,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,C,m.width,m.height,0,f,b,null));else if(a.isDataTexture)if(E.length>0){M&&S&&n.texStorage2D(e.TEXTURE_2D,k,C,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)x=E[t],M?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):n.texImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,f,b,x.data);a.generateMipmaps=!1}else M?(S&&n.texStorage2D(e.TEXTURE_2D,k,C,m.width,m.height),T&&function(t,i,r,o){const s=t.updateRanges;if(0===s.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,r,o,i.data);else{s.sort((e,t)=>e.start-t.start);let a=0;for(let e=1;e<s.length;e++){const t=s[a],n=s[e],r=t.start+t.count,o=R(n.start,i.width,4),l=R(t.start,i.width,4);n.start<=r+1&&o===l&&R(n.start+n.count-1,i.width,4)===o?t.count=Math.max(t.count,n.start+n.count-t.start):(++a,s[a]=n)}s.length=a+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),d=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,i.width);for(let t=0,a=s.length;t<a;t++){const a=s[t],l=Math.floor(a.start/4),c=Math.ceil(a.count/4),d=l%i.width,u=Math.floor(l/i.width),h=c,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,d),e.pixelStorei(e.UNPACK_SKIP_ROWS,u),n.texSubImage2D(e.TEXTURE_2D,0,d,u,h,p,r,o,i.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,d)}}(a,m,f,b)):n.texImage2D(e.TEXTURE_2D,0,C,m.width,m.height,0,f,b,m.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){M&&S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,k,C,E[0].width,E[0].height,m.depth);for(let t=0,r=E.length;t<r;t++)if(x=E[t],a.format!==i.GWd)if(null!==f)if(M){if(T)if(a.layerUpdates.size>0){const r=(0,i.Nex)(x.width,x.height,a.format,a.type);for(const i of a.layerUpdates){const o=x.data.subarray(i*r/x.data.BYTES_PER_ELEMENT,(i+1)*r/x.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,x.width,x.height,1,f,o)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,f,x.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,C,x.width,x.height,m.depth,0,x.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else M?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,f,b,x.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,C,x.width,x.height,m.depth,0,f,b,x.data)}else{M&&S&&n.texStorage2D(e.TEXTURE_2D,k,C,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)x=E[t],a.format!==i.GWd?null!==f?M?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,x.data):n.compressedTexImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):n.texImage2D(e.TEXTURE_2D,t,C,x.width,x.height,0,f,b,x.data)}else if(a.isDataArrayTexture)if(M){if(S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,k,C,m.width,m.height,m.depth),T)if(a.layerUpdates.size>0){const t=(0,i.Nex)(m.width,m.height,a.format,a.type);for(const i of a.layerUpdates){const r=m.data.subarray(i*t/m.data.BYTES_PER_ELEMENT,(i+1)*t/m.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,m.width,m.height,1,f,b,r)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,f,b,m.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,C,m.width,m.height,m.depth,0,f,b,m.data);else if(a.isData3DTexture)M?(S&&n.texStorage3D(e.TEXTURE_3D,k,C,m.width,m.height,m.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,f,b,m.data)):n.texImage3D(e.TEXTURE_3D,0,C,m.width,m.height,m.depth,0,f,b,m.data);else if(a.isFramebufferTexture){if(S)if(M)n.texStorage2D(e.TEXTURE_2D,k,C,m.width,m.height);else{let t=m.width,i=m.height;for(let r=0;r<k;r++)n.texImage2D(e.TEXTURE_2D,r,C,t,i,0,f,b,null),t>>=1,i>>=1}}else if(E.length>0){if(M&&S){const t=Y(E[0]);n.texStorage2D(e.TEXTURE_2D,k,C,t.width,t.height)}for(let t=0,i=E.length;t<i;t++)x=E[t],M?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,b,x):n.texImage2D(e.TEXTURE_2D,t,C,f,b,x);a.generateMipmaps=!1}else if(M){if(S){const t=Y(m);n.texStorage2D(e.TEXTURE_2D,k,C,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,b,m)}else n.texImage2D(e.TEXTURE_2D,0,C,f,b,m);v(a)&&y(c),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function P(t,i,o,a,c,d){const u=s.convert(o.format,o.colorSpace),h=s.convert(o.type),p=A(o.internalFormat,u,h,o.colorSpace),m=r.get(i),f=r.get(o);if(f.__renderTarget=i,!m.__hasExternalTextures){const t=Math.max(1,i.width>>d),r=Math.max(1,i.height>>d);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,d,p,t,r,i.depth,0,u,h,null):n.texImage2D(c,d,p,t,r,0,u,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),j(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,c,f.__webglTexture,0,H(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,c,f.__webglTexture,d),n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,o=r&&r.isDepthTexture?r.type:null,s=_(n.stencilBuffer,o),a=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=H(n);j(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,s,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,a,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const o=t[r],a=s.convert(o.format,o.colorSpace),c=s.convert(o.type),d=A(o.internalFormat,a,c,o.colorSpace),u=H(n);i&&!1===j(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,d,n.width,n.height):j(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,d,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,d,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function N(t,o){if(o&&o.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!o.depthTexture||!o.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const s=r.get(o.depthTexture);s.__renderTarget=o,s.__webglTexture&&o.depthTexture.image.width===o.width&&o.depthTexture.image.height===o.height||(o.depthTexture.image.width=o.width,o.depthTexture.image.height=o.height,o.depthTexture.needsUpdate=!0),S(o.depthTexture,0);const a=s.__webglTexture,c=H(o);if(o.depthTexture.format===i.zdS)j(o)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,c):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(o.depthTexture.format!==i.dcC)throw new Error("Unknown depthTexture format");j(o)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,c):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function U(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?N(i.__webglFramebuffer[0],t):N(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),B(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,o)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),B(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],z=[];function H(e){return Math.min(o.maxSamples,e.samples)}function j(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,t){const n=e.colorSpace,r=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==i.Zr2&&n!==i.jf0&&(i.ppV.getTransfer(n)===i.KLL?r===i.GWd&&o===i.OUM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function Y(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(d.width=e.naturalWidth||e.width,d.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(d.width=e.displayWidth,d.height=e.displayHeight):(d.width=e.width,d.height=e.height),d}this.allocateTextureUnit=function(){const e=M;return e>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+o.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=S,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,a){const l=r.get(t);t.version>0&&l.__version!==t.version?function(t,a,l){if(6!==a.image.length)return;const c=I(t,a),d=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const u=r.get(d);if(d.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=i.ppV.getPrimaries(i.ppV.workingColorSpace),r=a.colorSpace===i.jf0?null:i.ppV.getPrimaries(a.colorSpace),h=a.colorSpace===i.jf0||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=a.isCompressedTexture||a.image[0].isCompressedTexture,m=a.image[0]&&a.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=p||m?m?a.image[e].image:a.image[e]:g(a.image[e],!0,o.maxCubemapSize),f[e]=V(a,f[e]);const b=f[0],_=s.convert(a.format,a.colorSpace),x=s.convert(a.type),C=A(a.internalFormat,_,x,a.colorSpace),E=!0!==a.isVideoTexture,M=void 0===u.__version||!0===c,S=d.dataReady;let T,k=w(a,b);if(D(e.TEXTURE_CUBE_MAP,a),p){E&&M&&n.texStorage2D(e.TEXTURE_CUBE_MAP,k,C,b.width,b.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let r=0;r<T.length;r++){const o=T[r];a.format!==i.GWd?null!==_?E?S&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,_,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,_,x,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,o.width,o.height,0,_,x,o.data)}}}else{if(T=a.mipmaps,E&&M){T.length>0&&k++;const t=Y(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,k,C,t.width,t.height)}for(let t=0;t<6;t++)if(m){E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,_,x,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,f[t].width,f[t].height,0,_,x,f[t].data);for(let i=0;i<T.length;i++){const r=T[i].image[t].image;E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,_,x,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,C,r.width,r.height,0,_,x,r.data)}}else{E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,_,x,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,_,x,f[t]);for(let i=0;i<T.length;i++){const r=T[i];E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,_,x,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,C,_,x,r.image[t])}}}v(a)&&y(e.TEXTURE_CUBE_MAP),u.__version=d.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(l,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,i){const o=r.get(t);void 0!==n&&P(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&U(t)},this.setupRenderTarget=function(t){const i=t.texture,o=r.get(t),l=r.get(i);t.addEventListener("dispose",C);const c=t.textures,d=!0===t.isWebGLCubeRenderTarget,u=c.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,a.memory.textures++),d){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(u)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===j(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const r=s.convert(i.format,i.colorSpace),a=s.convert(i.type),l=A(i.internalFormat,r,a,i.colorSpace,!0===t.isXRRenderTarget),d=H(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),B(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),D(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)P(o.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else P(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(i)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(u){for(let i=0,s=c.length;i<s;i++){const s=c[i],a=r.get(s);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),D(e.TEXTURE_2D,s),P(o.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),v(s)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),D(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)P(o.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else P(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);v(i)&&y(r),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,o=t.length;i<o;i++){const o=t[i];if(v(o)){const t=b(e),i=r.get(o).__webglTexture;n.bindTexture(t,i),y(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===j(t)){const i=t.textures,o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),u=i.length>1;if(u)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),!0===c&&(F.length=0,z.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(l),z.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,z)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&c){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=P,this.useMultisampledRTT=j}function Rt(e,t){return{convert:function(n,r=i.jf0){let o;const s=i.ppV.getTransfer(r);if(n===i.OUM)return e.UNSIGNED_BYTE;if(n===i.Wew)return e.UNSIGNED_SHORT_4_4_4_4;if(n===i.gJ2)return e.UNSIGNED_SHORT_5_5_5_1;if(n===i.Dmk)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===i.tJf)return e.BYTE;if(n===i.fBL)return e.SHORT;if(n===i.cHt)return e.UNSIGNED_SHORT;if(n===i.Yuy)return e.INT;if(n===i.bkx)return e.UNSIGNED_INT;if(n===i.RQf)return e.FLOAT;if(n===i.ix0)return e.HALF_FLOAT;if(n===i.wrO)return e.ALPHA;if(n===i.HIg)return e.RGB;if(n===i.GWd)return e.RGBA;if(n===i.zdS)return e.DEPTH_COMPONENT;if(n===i.dcC)return e.DEPTH_STENCIL;if(n===i.VT0)return e.RED;if(n===i.ZQM)return e.RED_INTEGER;if(n===i.paN)return e.RG;if(n===i.TkQ)return e.RG_INTEGER;if(n===i.c90)return e.RGBA_INTEGER;if(n===i.IE4||n===i.Nz6||n===i.jR7||n===i.BXX)if(s===i.KLL){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===i.IE4)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===i.Nz6)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===i.jR7)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===i.BXX)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===i.IE4)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===i.Nz6)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===i.jR7)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===i.BXX)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===i.k6Q||n===i.kTp||n===i.HXV||n===i.pBf){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===i.k6Q)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===i.kTp)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===i.HXV)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===i.pBf)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===i.CVz||n===i.Riy||n===i.KDk){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===i.CVz||n===i.Riy)return s===i.KLL?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===i.KDk)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===i.qa3||n===i.B_h||n===i.czI||n===i.rSH||n===i.Qrf||n===i.psI||n===i.a5J||n===i._QJ||n===i.uB5||n===i.lyL||n===i.bC7||n===i.y3Z||n===i.ojs||n===i.S$4){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===i.qa3)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===i.B_h)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===i.czI)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===i.rSH)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===i.Qrf)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===i.psI)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===i.a5J)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===i._QJ)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===i.uB5)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===i.lyL)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===i.bC7)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===i.y3Z)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===i.ojs)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===i.S$4)return s===i.KLL?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===i.Fn||n===i.H23||n===i.W9U){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===i.Fn)return s===i.KLL?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===i.H23)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===i.W9U)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===i.Kef||n===i.XG_||n===i.HO_||n===i.CWW){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===i.Fn)return o.COMPRESSED_RED_RGTC1_EXT;if(n===i.XG_)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===i.HO_)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===i.CWW)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===i.V3x?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Ot{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new i.gPd;e.properties.get(r).__webglTexture=t.texture,t.depthNear===n.depthNear&&t.depthFar===n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new i.BKk({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new i.eaF(new i.bdM(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Pt extends i.Qev{constructor(e,t){super();const n=this;let o=null,s=1,a=null,l="local-floor",c=1,d=null,u=null,h=null,p=null,m=null,f=null;const g=new Ot,v=t.getContextAttributes();let y=null,b=null;const A=[],_=[],w=new i.I9Y;let x=null;const C=new i.ubm;C.viewport=new i.IUQ;const E=new i.ubm;E.viewport=new i.IUQ;const M=[C,E],S=new i.nZQ;let T=null,k=null;function L(e){const t=_.indexOf(e.inputSource);if(-1===t)return;const n=A[t];void 0!==n&&(n.update(e.inputSource,e.frame,d||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function D(){o.removeEventListener("select",L),o.removeEventListener("selectstart",L),o.removeEventListener("selectend",L),o.removeEventListener("squeeze",L),o.removeEventListener("squeezestart",L),o.removeEventListener("squeezeend",L),o.removeEventListener("end",D),o.removeEventListener("inputsourceschange",I);for(let e=0;e<A.length;e++){const t=_[e];null!==t&&(_[e]=null,A[e].disconnect(t))}T=null,k=null,g.reset(),e.setRenderTarget(y),m=null,p=null,h=null,o=null,b=null,N.stop(),n.isPresenting=!1,e.setPixelRatio(x),e.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=_.indexOf(n);i>=0&&(_[i]=null,A[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=_.indexOf(n);if(-1===i){for(let e=0;e<A.length;e++){if(e>=_.length){_.push(n),i=e;break}if(null===_[e]){_[e]=n,i=e;break}}if(-1===i)break}const r=A[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=A[e];return void 0===t&&(t=new i.R3r,A[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=A[e];return void 0===t&&(t=new i.R3r,A[e]=t),t.getGripSpace()},this.getHand=function(e){let t=A[e];return void 0===t&&(t=new i.R3r,A[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){l=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(e){d=e},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return h},this.getFrame=function(){return f},this.getSession=function(){return o},this.setSession=async function(r){if(o=r,null!==o){y=e.getRenderTarget(),o.addEventListener("select",L),o.addEventListener("selectstart",L),o.addEventListener("selectend",L),o.addEventListener("squeeze",L),o.addEventListener("squeezestart",L),o.addEventListener("squeezeend",L),o.addEventListener("end",D),o.addEventListener("inputsourceschange",I),!0!==v.xrCompatible&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(w);if("undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,r=null,a=null;v.depth&&(a=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?i.dcC:i.zdS,r=v.stencil?i.V3x:i.bkx);const l={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:s};h=new XRWebGLBinding(o,t),p=h.createProjectionLayer(l),o.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),b=new i.nWS(p.textureWidth,p.textureHeight,{format:i.GWd,type:i.OUM,depthTexture:new i.VCu(p.textureWidth,p.textureHeight,r,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues,resolveStencilBuffer:!1===p.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(o,t,n),o.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),b=new i.nWS(m.framebufferWidth,m.framebufferHeight,{format:i.GWd,type:i.OUM,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===m.ignoreDepthValues,resolveStencilBuffer:!1===m.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(c),d=null,a=await o.requestReferenceSpace(l),N.setContext(o),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==o)return o.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const R=new i.Pq0,O=new i.Pq0;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===o)return;let t=e.near,n=e.far;null!==g.texture&&(g.depthNear>0&&(t=g.depthNear),g.depthFar>0&&(n=g.depthFar)),S.near=E.near=C.near=t,S.far=E.far=C.far=n,T===S.near&&k===S.far||(o.updateRenderState({depthNear:S.near,depthFar:S.far}),T=S.near,k=S.far),C.layers.mask=2|e.layers.mask,E.layers.mask=4|e.layers.mask,S.layers.mask=C.layers.mask|E.layers.mask;const r=e.parent,s=S.cameras;P(S,r);for(let e=0;e<s.length;e++)P(s[e],r);2===s.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(O),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],d=(r[8]-1)/r[0],u=(o[8]+1)/o[0],h=s*d,p=s*u,m=i/(-d+u),f=m*-d;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+m,n=a+m,r=h-f,o=p+(i-f),d=l*a/n*t,u=c*a/n*t;e.projectionMatrix.makePerspective(r,o,d,u,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(S,C,E):S.projectionMatrix.copy(C.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*i.a55*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,r)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==p||null!==m)return c},this.setFoveation=function(e){c=e,null!==p&&(p.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(S)};let B=null;const N=new r;N.setAnimationLoop(function(t,r){if(u=r.getViewerPose(d||a),f=r,null!==u){const t=u.views;null!==m&&(e.setRenderTargetFramebuffer(b,m.framebuffer),e.setRenderTarget(b));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const o=t[r];let s=null;if(null!==m)s=m.getViewport(o);else{const t=h.getViewSubImage(p,o);s=t.viewport,0===r&&(e.setRenderTargetTextures(b,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(b))}let a=M[r];void 0===a&&(a=new i.ubm,a.layers.enable(r),a.viewport=new i.IUQ,M[r]=a),a.matrix.fromArray(o.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(o.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===r&&(S.matrix.copy(a.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(a)}const r=o.enabledFeatures;if(r&&r.includes("depth-sensing")&&"gpu-optimized"==o.depthUsage&&h){const n=h.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&g.init(e,n,o.renderState)}}for(let e=0;e<A.length;e++){const t=_[e],n=A[e];null!==t&&void 0!==n&&n.update(t,r,d||a)}B&&B(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}),this.setAnimationLoop=function(e){B=e},this.dispose=function(){}}}const Bt=new i.O9p,Nt=new i.kn4;function Ut(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===i.hsX&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===i.hsX&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const o=t.get(r),s=o.envMap,a=o.envMapRotation;s&&(e.envMap.value=s,Bt.copy(a),Bt.x*=-1,Bt.y*=-1,Bt.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(Bt.y*=-1,Bt.z*=-1),e.envMapRotation.value.setFromMatrix4(Nt.makeRotationFromEuler(Bt)),e.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,(0,i._Ut)(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,o,s,a,l){o.isMeshBasicMaterial||o.isMeshLambertMaterial?r(e,o):o.isMeshToonMaterial?(r(e,o),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,o)):o.isMeshPhongMaterial?(r(e,o),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,o)):o.isMeshStandardMaterial?(r(e,o),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,o),o.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===i.hsX&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,o,l)):o.isMeshMatcapMaterial?(r(e,o),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,o)):o.isMeshDepthMaterial?r(e,o):o.isMeshDistanceMaterial?(r(e,o),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,o)):o.isMeshNormalMaterial?r(e,o):o.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,o),o.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,o)):o.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,o,s,a):o.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,o):o.isShadowMaterial?(e.color.value.copy(o.color),e.opacity.value=o.opacity):o.isShaderMaterial&&(o.uniformsNeedUpdate=!1)}}}function Ft(e,t,n,i){let r={},o={},s=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,o=t+"_"+n;if(void 0===i[o])return i[o]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const e=i[o];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return i[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function d(t){const n=t.target;n.removeEventListener("dispose",d);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],o=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=o.length;e<r;e++){const r=c(o[e]),s=n%i,a=s%r.boundary,l=s+a;n+=a,0!==l&&i-l<r.storage&&(n+=i-l),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",d));const p=u.program;i.updateUBOMapping(n,p);const m=t.render.frame;o[n.id]!==m&&(!function(t){const n=r[t.id],i=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=i.length;t<n;t++){const n=Array.isArray(i[t])?i[t]:[i[t]];for(let i=0,r=n.length;i<r;i++){const r=n[i];if(!0===l(r,t,i,o)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let o=0;o<n.length;o++){const s=n[o],a=c(s);"number"==typeof s||"boolean"==typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=m)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},o={}}}}class zt{constructor(e={}){const{canvas:t=(0,i.lPF)(),context:n=null,depth:s=!0,stencil:a=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:u=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:b=!1,reverseDepthBuffer:A=!1}=e;let _;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=l;const w=new Uint32Array(4),x=new Int32Array(4);let C=null,E=null;const M=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=i.y_p,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const T=this;let k=!1;this._outputColorSpace=i.er$;let L=0,D=0,I=null,R=-1,O=null;const P=new i.IUQ,V=new i.IUQ;let Y=null;const G=new i.Q1f(0);let Q=0,$=t.width,q=t.height,W=1,K=null,Z=null;const X=new i.IUQ(0,0,$,q),J=new i.IUQ(0,0,$,q);let ee=!1;const te=new i.PPD;let ne=!1,ie=!1;const re=new i.kn4,oe=new i.kn4,se=new i.Pq0,ae=new i.IUQ,le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ce=!1;function de(){return null===I?W:1}let ue,he,pe,me,fe,ge,ve,ye,be,Ae,_e,we,xe,Ce,Ee,Me,Se,Te,ke,Le,De,Ie,Re,Oe,Pe=n;function Be(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:s,stencil:a,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:u,powerPreference:y,failIfMajorPerformanceCaveat:b};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i.sPf}`),t.addEventListener("webglcontextlost",Fe,!1),t.addEventListener("webglcontextrestored",ze,!1),t.addEventListener("webglcontextcreationerror",He,!1),null===Pe){const t="webgl2";if(Pe=Be(t,e),null===Pe)throw Be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ne(){ue=new N(Pe),ue.init(),Ie=new Rt(Pe,ue),he=new f(Pe,ue,e,Ie),pe=new Dt(Pe,ue),he.reverseDepthBuffer&&A&&pe.buffers.depth.setReversed(!0),me=new z(Pe),fe=new yt,ge=new It(Pe,ue,pe,fe,he,Ie,me),ve=new v(T),ye=new B(T),be=new o(Pe),Re=new p(Pe,be),Ae=new U(Pe,be,me,Re),_e=new j(Pe,Ae,be,me),ke=new H(Pe,he,ge),Me=new g(fe),we=new vt(T,ve,ye,ue,he,Re,Me),xe=new Ut(T,fe),Ce=new wt,Ee=new Tt(ue),Te=new h(T,ve,ye,pe,_e,_,d),Se=new kt(T,_e,he),Oe=new Ft(Pe,me,he,pe),Le=new m(Pe,ue,me),De=new F(Pe,ue,me),me.programs=we.programs,T.capabilities=he,T.extensions=ue,T.properties=fe,T.renderLists=Ce,T.shadowMap=Se,T.state=pe,T.info=me}Ne();const Ue=new Pt(T,Pe);function Fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const e=me.autoReset,t=Se.enabled,n=Se.autoUpdate,i=Se.needsUpdate,r=Se.type;Ne(),me.autoReset=e,Se.enabled=t,Se.autoUpdate=n,Se.needsUpdate=i,Se.type=r}function He(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function je(e){const t=e.target;t.removeEventListener("dispose",je),function(e){(function(e){const t=fe.get(e).programs;void 0!==t&&(t.forEach(function(e){we.releaseProgram(e)}),e.isShaderMaterial&&we.releaseShaderCache(e))})(e),fe.remove(e)}(t)}function Ve(e,t,n){!0===e.transparent&&e.side===i.$EB&&!1===e.forceSinglePass?(e.side=i.hsX,e.needsUpdate=!0,et(e,t,n),e.side=i.hB5,e.needsUpdate=!0,et(e,t,n),e.side=i.$EB):et(e,t,n)}this.xr=Ue,this.getContext=function(){return Pe},this.getContextAttributes=function(){return Pe.getContextAttributes()},this.forceContextLoss=function(){const e=ue.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=ue.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(e){void 0!==e&&(W=e,this.setSize($,q,!1))},this.getSize=function(e){return e.set($,q)},this.setSize=function(e,n,i=!0){Ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):($=e,q=n,t.width=Math.floor(e*W),t.height=Math.floor(n*W),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set($*W,q*W).floor()},this.setDrawingBufferSize=function(e,n,i){$=e,q=n,W=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(P)},this.getViewport=function(e){return e.copy(X)},this.setViewport=function(e,t,n,i){e.isVector4?X.set(e.x,e.y,e.z,e.w):X.set(e,t,n,i),pe.viewport(P.copy(X).multiplyScalar(W).round())},this.getScissor=function(e){return e.copy(J)},this.setScissor=function(e,t,n,i){e.isVector4?J.set(e.x,e.y,e.z,e.w):J.set(e,t,n,i),pe.scissor(V.copy(J).multiplyScalar(W).round())},this.getScissorTest=function(){return ee},this.setScissorTest=function(e){pe.setScissorTest(ee=e)},this.setOpaqueSort=function(e){K=e},this.setTransparentSort=function(e){Z=e},this.getClearColor=function(e){return e.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor(...arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==I){const t=I.texture.format;e=t===i.c90||t===i.TkQ||t===i.ZQM}if(e){const e=I.texture.type,t=e===i.OUM||e===i.bkx||e===i.cHt||e===i.V3x||e===i.Wew||e===i.gJ2,n=Te.getClearColor(),r=Te.getClearAlpha(),o=n.r,s=n.g,a=n.b;t?(w[0]=o,w[1]=s,w[2]=a,w[3]=r,Pe.clearBufferuiv(Pe.COLOR,0,w)):(x[0]=o,x[1]=s,x[2]=a,x[3]=r,Pe.clearBufferiv(Pe.COLOR,0,x))}else r|=Pe.COLOR_BUFFER_BIT}t&&(r|=Pe.DEPTH_BUFFER_BIT),n&&(r|=Pe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Pe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Fe,!1),t.removeEventListener("webglcontextrestored",ze,!1),t.removeEventListener("webglcontextcreationerror",He,!1),Te.dispose(),Ce.dispose(),Ee.dispose(),fe.dispose(),ve.dispose(),ye.dispose(),_e.dispose(),Re.dispose(),Oe.dispose(),we.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",Ge),Ue.removeEventListener("sessionend",Qe),qe.stop()},this.renderBufferDirect=function(e,t,n,r,o,s){null===t&&(t=le);const a=o.isMesh&&o.matrixWorld.determinant()<0,l=function(e,t,n,r,o){!0!==t.isScene&&(t=le);ge.resetTextureUnits();const s=t.fog,a=r.isMeshStandardMaterial?t.environment:null,l=null===I?T.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:i.Zr2,c=(r.isMeshStandardMaterial?ye:ve).get(r.envMap||a),d=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,m=!!n.morphAttributes.color;let f=i.y_p;r.toneMapped&&(null!==I&&!0!==I.isXRRenderTarget||(f=T.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=fe.get(r),b=E.state.lights;if(!0===ne&&(!0===ie||e!==O)){const t=e===O&&r.id===R;Me.setState(r,e,t)}let A=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==l||o.isBatchedMesh&&!1===y.batching?A=!0:o.isBatchedMesh||!0!==y.batching?o.isBatchedMesh&&!0===y.batchingColor&&null===o.colorTexture||o.isBatchedMesh&&!1===y.batchingColor&&null!==o.colorTexture||o.isInstancedMesh&&!1===y.instancing?A=!0:o.isInstancedMesh||!0!==y.instancing?o.isSkinnedMesh&&!1===y.skinning?A=!0:o.isSkinnedMesh||!0!==y.skinning?o.isInstancedMesh&&!0===y.instancingColor&&null===o.instanceColor||o.isInstancedMesh&&!1===y.instancingColor&&null!==o.instanceColor||o.isInstancedMesh&&!0===y.instancingMorph&&null===o.morphTexture||o.isInstancedMesh&&!1===y.instancingMorph&&null!==o.morphTexture||y.envMap!==c||!0===r.fog&&y.fog!==s?A=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===Me.numPlanes&&y.numIntersection===Me.numIntersection?(y.vertexAlphas!==d||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==p||y.morphColors!==m||y.toneMapping!==f||y.morphTargetsCount!==v)&&(A=!0):A=!0:A=!0:A=!0:A=!0:(A=!0,y.__version=r.version);let _=y.currentProgram;!0===A&&(_=et(r,t,o));let w=!1,x=!1,C=!1;const M=_.getUniforms(),S=y.uniforms;pe.useProgram(_.program)&&(w=!0,x=!0,C=!0);r.id!==R&&(R=r.id,x=!0);if(w||O!==e){pe.buffers.depth.getReversed()?(re.copy(e.projectionMatrix),(0,i.xiE)(re),(0,i.Mmk)(re),M.setValue(Pe,"projectionMatrix",re)):M.setValue(Pe,"projectionMatrix",e.projectionMatrix),M.setValue(Pe,"viewMatrix",e.matrixWorldInverse);const t=M.map.cameraPosition;void 0!==t&&t.setValue(Pe,se.setFromMatrixPosition(e.matrixWorld)),he.logarithmicDepthBuffer&&M.setValue(Pe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(Pe,"isOrthographic",!0===e.isOrthographicCamera),O!==e&&(O=e,x=!0,C=!0)}if(o.isSkinnedMesh){M.setOptional(Pe,o,"bindMatrix"),M.setOptional(Pe,o,"bindMatrixInverse");const e=o.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(Pe,"boneTexture",e.boneTexture,ge))}o.isBatchedMesh&&(M.setOptional(Pe,o,"batchingTexture"),M.setValue(Pe,"batchingTexture",o._matricesTexture,ge),M.setOptional(Pe,o,"batchingIdTexture"),M.setValue(Pe,"batchingIdTexture",o._indirectTexture,ge),M.setOptional(Pe,o,"batchingColorTexture"),null!==o._colorsTexture&&M.setValue(Pe,"batchingColorTexture",o._colorsTexture,ge));const k=n.morphAttributes;void 0===k.position&&void 0===k.normal&&void 0===k.color||ke.update(o,n,_);(x||y.receiveShadow!==o.receiveShadow)&&(y.receiveShadow=o.receiveShadow,M.setValue(Pe,"receiveShadow",o.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(S.envMap.value=c,S.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(S.envMapIntensity.value=t.environmentIntensity);x&&(M.setValue(Pe,"toneMappingExposure",T.toneMappingExposure),y.needsLights&&(D=C,(L=S).ambientLightColor.needsUpdate=D,L.lightProbe.needsUpdate=D,L.directionalLights.needsUpdate=D,L.directionalLightShadows.needsUpdate=D,L.pointLights.needsUpdate=D,L.pointLightShadows.needsUpdate=D,L.spotLights.needsUpdate=D,L.spotLightShadows.needsUpdate=D,L.rectAreaLights.needsUpdate=D,L.hemisphereLights.needsUpdate=D),s&&!0===r.fog&&xe.refreshFogUniforms(S,s),xe.refreshMaterialUniforms(S,r,W,q,E.state.transmissionRenderTarget[e.id]),$e.upload(Pe,tt(y),S,ge));var L,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&($e.upload(Pe,tt(y),S,ge),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&M.setValue(Pe,"center",o.center);if(M.setValue(Pe,"modelViewMatrix",o.modelViewMatrix),M.setValue(Pe,"normalMatrix",o.normalMatrix),M.setValue(Pe,"modelMatrix",o.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];Oe.update(n,_),Oe.bind(n,_)}}return _}(e,t,n,r,o);pe.setMaterial(r,a);let c=n.index,d=1;if(!0===r.wireframe){if(c=Ae.getWireframeAttribute(n),void 0===c)return;d=2}const u=n.drawRange,h=n.attributes.position;let p=u.start*d,m=(u.start+u.count)*d;null!==s&&(p=Math.max(p,s.start*d),m=Math.min(m,(s.start+s.count)*d)),null!==c?(p=Math.max(p,0),m=Math.min(m,c.count)):null!=h&&(p=Math.max(p,0),m=Math.min(m,h.count));const f=m-p;if(f<0||f===1/0)return;let g;Re.setup(o,r,l,n,c);let v=Le;if(null!==c&&(g=be.get(c),v=De,v.setIndex(g)),o.isMesh)!0===r.wireframe?(pe.setLineWidth(r.wireframeLinewidth*de()),v.setMode(Pe.LINES)):v.setMode(Pe.TRIANGLES);else if(o.isLine){let e=r.linewidth;void 0===e&&(e=1),pe.setLineWidth(e*de()),o.isLineSegments?v.setMode(Pe.LINES):o.isLineLoop?v.setMode(Pe.LINE_LOOP):v.setMode(Pe.LINE_STRIP)}else o.isPoints?v.setMode(Pe.POINTS):o.isSprite&&v.setMode(Pe.TRIANGLES);if(o.isBatchedMesh)if(null!==o._multiDrawInstances)(0,i.mcG)("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),v.renderMultiDrawInstances(o._multiDrawStarts,o._multiDrawCounts,o._multiDrawCount,o._multiDrawInstances);else if(ue.get("WEBGL_multi_draw"))v.renderMultiDraw(o._multiDrawStarts,o._multiDrawCounts,o._multiDrawCount);else{const e=o._multiDrawStarts,t=o._multiDrawCounts,n=o._multiDrawCount,i=c?be.get(c).bytesPerElement:1,s=fe.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)s.setValue(Pe,"_gl_DrawID",r),v.render(e[r]/i,t[r])}else if(o.isInstancedMesh)v.renderInstances(p,f,o.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(p,f,t)}else v.render(p,f)},this.compile=function(e,t,n=null){null===n&&(n=e),E=Ee.get(n),E.init(t),S.push(E),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))}),E.setupLights();const i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];Ve(o,n,e),i.add(o)}else Ve(t,n,e),i.add(t)}),E=S.pop(),i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise(t=>{function n(){i.forEach(function(e){fe.get(e).currentProgram.isReady()&&i.delete(e)}),0!==i.size?setTimeout(n,10):t(e)}null!==ue.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ye=null;function Ge(){qe.stop()}function Qe(){qe.start()}const qe=new r;function We(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)E.pushLight(e),e.castShadow&&E.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||te.intersectsSprite(e)){i&&ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);const t=_e.update(e),r=e.material;r.visible&&C.push(e,t,r,n,ae.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||te.intersectsObject(e))){const t=_e.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ae.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),ae.copy(t.boundingSphere.center)),ae.applyMatrix4(e.matrixWorld).applyMatrix4(oe)),Array.isArray(r)){const i=t.groups;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r[s.materialIndex];a&&a.visible&&C.push(e,t,a,n,ae.z,s)}}else r.visible&&C.push(e,t,r,n,ae.z,null)}const r=e.children;for(let e=0,o=r.length;e<o;e++)We(r[e],t,n,i)}function Ke(e,t,n,i){const r=e.opaque,o=e.transmissive,s=e.transparent;E.setupLightsView(n),!0===ne&&Me.setGlobalState(T.clippingPlanes,n),i&&pe.viewport(P.copy(i)),r.length>0&&Xe(r,t,n),o.length>0&&Xe(o,t,n),s.length>0&&Xe(s,t,n),pe.buffers.depth.setTest(!0),pe.buffers.depth.setMask(!0),pe.buffers.color.setMask(!0),pe.setPolygonOffset(!1)}function Ze(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===E.state.transmissionRenderTarget[r.id]&&(E.state.transmissionRenderTarget[r.id]=new i.nWS(1,1,{generateMipmaps:!0,type:ue.has("EXT_color_buffer_half_float")||ue.has("EXT_color_buffer_float")?i.ix0:i.OUM,minFilter:i.$_I,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:i.ppV.workingColorSpace}));const o=E.state.transmissionRenderTarget[r.id],s=r.viewport||P;o.setSize(s.z*T.transmissionResolutionScale,s.w*T.transmissionResolutionScale);const l=T.getRenderTarget();T.setRenderTarget(o),T.getClearColor(G),Q=T.getClearAlpha(),Q<1&&T.setClearColor(16777215,.5),T.clear(),ce&&Te.render(n);const c=T.toneMapping;T.toneMapping=i.y_p;const d=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),E.setupLightsView(r),!0===ne&&Me.setGlobalState(T.clippingPlanes,r),Xe(e,n,r),ge.updateMultisampleRenderTarget(o),ge.updateRenderTargetMipmap(o),!1===ue.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let o=0,s=t.length;o<s;o++){const s=t[o],a=s.object,l=s.geometry,c=s.material,d=s.group;if(c.side===i.$EB&&a.layers.test(r.layers)){const t=c.side;c.side=i.hsX,c.needsUpdate=!0,Je(a,n,r,l,c,d),c.side=t,c.needsUpdate=!0,e=!0}}!0===e&&(ge.updateMultisampleRenderTarget(o),ge.updateRenderTargetMipmap(o))}T.setRenderTarget(l),T.setClearColor(G,Q),void 0!==d&&(r.viewport=d),T.toneMapping=c}function Xe(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,l=o.group;let c=o.material;!0===c.allowOverride&&null!==i&&(c=i),s.layers.test(n.layers)&&Je(s,t,n,a,c,l)}}function Je(e,t,n,r,o,s){e.onBeforeRender(T,t,n,r,o,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),o.onBeforeRender(T,t,n,r,e,s),!0===o.transparent&&o.side===i.$EB&&!1===o.forceSinglePass?(o.side=i.hsX,o.needsUpdate=!0,T.renderBufferDirect(n,t,r,o,e,s),o.side=i.hB5,o.needsUpdate=!0,T.renderBufferDirect(n,t,r,o,e,s),o.side=i.$EB):T.renderBufferDirect(n,t,r,o,e,s),e.onAfterRender(T,t,n,r,o,s)}function et(e,t,n){!0!==t.isScene&&(t=le);const i=fe.get(e),r=E.state.lights,o=E.state.shadowsArray,s=r.state.version,a=we.getParameters(e,r.state,o,t,n),l=we.getProgramCacheKey(a);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ye:ve).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",je),c=new Map,i.programs=c);let d=c.get(l);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===s)return nt(e,a),d}else a.uniforms=we.getUniforms(e),e.onBeforeCompile(a,T),d=we.acquireProgram(a,l),c.set(l,d),i.uniforms=a.uniforms;const u=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=Me.uniform),nt(e,a),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=d,i.uniformsList=null,d}function tt(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=$e.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function nt(e,t){const n=fe.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}qe.setAnimationLoop(function(e){Ye&&Ye(e)}),"undefined"!=typeof self&&qe.setContext(self),this.setAnimationLoop=function(e){Ye=e,Ue.setAnimationLoop(e),null===e?qe.stop():qe.start()},Ue.addEventListener("sessionstart",Ge),Ue.addEventListener("sessionend",Qe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===k)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ue.enabled&&!0===Ue.isPresenting&&(!0===Ue.cameraAutoUpdate&&Ue.updateCamera(t),t=Ue.getCamera()),!0===e.isScene&&e.onBeforeRender(T,e,t,I),E=Ee.get(e,S.length),E.init(t),S.push(E),oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),te.setFromProjectionMatrix(oe),ie=this.localClippingEnabled,ne=Me.init(this.clippingPlanes,ie),C=Ce.get(e,M.length),C.init(),M.push(C),!0===Ue.enabled&&!0===Ue.isPresenting){const e=T.xr.getDepthSensingMesh();null!==e&&We(e,t,-1/0,T.sortObjects)}We(e,t,0,T.sortObjects),C.finish(),!0===T.sortObjects&&C.sort(K,Z),ce=!1===Ue.enabled||!1===Ue.isPresenting||!1===Ue.hasDepthSensing(),ce&&Te.addToRenderList(C,e),this.info.render.frame++,!0===ne&&Me.beginShadows();const n=E.state.shadowsArray;Se.render(n,e,t),!0===ne&&Me.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=C.opaque,r=C.transmissive;if(E.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,o=n.length;t<o;t++){Ze(i,r,e,n[t])}ce&&Te.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];Ke(C,e,i,i.viewport)}}else r.length>0&&Ze(i,r,e,t),ce&&Te.render(e),Ke(C,e,t);null!==I&&0===D&&(ge.updateMultisampleRenderTarget(I),ge.updateRenderTargetMipmap(I)),!0===e.isScene&&e.onAfterRender(T,e,t),Re.resetDefaultState(),R=-1,O=null,S.pop(),S.length>0?(E=S[S.length-1],!0===ne&&Me.setGlobalState(T.clippingPlanes,E.state.camera)):E=null,M.pop(),C=M.length>0?M[M.length-1]:null},this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(e,t,n){const i=fe.get(e);i.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),fe.get(e.texture).__webglTexture=t,fe.get(e.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:n,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=fe.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const it=Pe.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){I=e,L=t,D=n;let i=!0,r=null,o=!1,s=!1;if(e){const a=fe.get(e);if(void 0!==a.__useDefaultFramebuffer)pe.bindFramebuffer(Pe.FRAMEBUFFER,null),i=!1;else if(void 0===a.__webglFramebuffer)ge.setupRenderTarget(e);else if(a.__hasExternalTextures)ge.rebindTextures(e,fe.get(e.texture).__webglTexture,fe.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(a.__boundDepthTexture!==t){if(null!==t&&fe.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ge.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=fe.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],o=!0):r=e.samples>0&&!1===ge.useMultisampledRTT(e)?fe.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,P.copy(e.viewport),V.copy(e.scissor),Y=e.scissorTest}else P.copy(X).multiplyScalar(W).floor(),V.copy(J).multiplyScalar(W).floor(),Y=ee;0!==n&&(r=it);if(pe.bindFramebuffer(Pe.FRAMEBUFFER,r)&&i&&pe.drawBuffers(e,r),pe.viewport(P),pe.scissor(V),pe.setScissorTest(Y),o){const i=fe.get(e.texture);Pe.framebufferTexture2D(Pe.FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,Pe.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=fe.get(e.texture),r=t;Pe.framebufferTextureLayer(Pe.FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,i.__webglTexture,n,r)}else if(null!==e&&0!==n){const t=fe.get(e.texture);Pe.framebufferTexture2D(Pe.FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,Pe.TEXTURE_2D,t.__webglTexture,n)}R=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,s,a=0){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=fe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){pe.bindFramebuffer(Pe.FRAMEBUFFER,l);try{const s=e.textures[a],l=s.format,c=s.type;if(!he.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!he.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&(e.textures.length>1&&Pe.readBuffer(Pe.COLOR_ATTACHMENT0+a),Pe.readPixels(t,n,i,r,Ie.convert(l),Ie.convert(c),o))}finally{const e=null!==I?fe.get(I).__webglFramebuffer:null;pe.bindFramebuffer(Pe.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,o,s,a,l=0){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let c=fe.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(c=c[a]),c){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-o){pe.bindFramebuffer(Pe.FRAMEBUFFER,c);const a=e.textures[l],d=a.format,u=a.type;if(!he.textureFormatReadable(d))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!he.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const h=Pe.createBuffer();Pe.bindBuffer(Pe.PIXEL_PACK_BUFFER,h),Pe.bufferData(Pe.PIXEL_PACK_BUFFER,s.byteLength,Pe.STREAM_READ),e.textures.length>1&&Pe.readBuffer(Pe.COLOR_ATTACHMENT0+l),Pe.readPixels(t,n,r,o,Ie.convert(d),Ie.convert(u),0);const p=null!==I?fe.get(I).__webglFramebuffer:null;pe.bindFramebuffer(Pe.FRAMEBUFFER,p);const m=Pe.fenceSync(Pe.SYNC_GPU_COMMANDS_COMPLETE,0);return Pe.flush(),await(0,i.jej)(Pe,m,4),Pe.bindBuffer(Pe.PIXEL_PACK_BUFFER,h),Pe.getBufferSubData(Pe.PIXEL_PACK_BUFFER,0,s),Pe.deleteBuffer(h),Pe.deleteSync(m),s}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),s=null!==t?t.x:0,a=null!==t?t.y:0;ge.setTexture2D(e,0),Pe.copyTexSubImage2D(Pe.TEXTURE_2D,n,0,0,s,a,r,o),pe.unbindTexture()};const rt=Pe.createFramebuffer(),ot=Pe.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,r=null,o=0,s=null){let a,l,c,d,u,h,p,m,f;null===s&&(0!==o?((0,i.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),s=o,o=0):s=0);const g=e.isCompressedTexture?e.mipmaps[s]:e.image;if(null!==n)a=n.max.x-n.min.x,l=n.max.y-n.min.y,c=n.isBox3?n.max.z-n.min.z:1,d=n.min.x,u=n.min.y,h=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-o);a=Math.floor(g.width*t),l=Math.floor(g.height*t),c=e.isDataArrayTexture?g.depth:e.isData3DTexture?Math.floor(g.depth*t):1,d=0,u=0,h=0}null!==r?(p=r.x,m=r.y,f=r.z):(p=0,m=0,f=0);const v=Ie.convert(t.format),y=Ie.convert(t.type);let b;t.isData3DTexture?(ge.setTexture3D(t,0),b=Pe.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ge.setTexture2DArray(t,0),b=Pe.TEXTURE_2D_ARRAY):(ge.setTexture2D(t,0),b=Pe.TEXTURE_2D),Pe.pixelStorei(Pe.UNPACK_FLIP_Y_WEBGL,t.flipY),Pe.pixelStorei(Pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),Pe.pixelStorei(Pe.UNPACK_ALIGNMENT,t.unpackAlignment);const A=Pe.getParameter(Pe.UNPACK_ROW_LENGTH),_=Pe.getParameter(Pe.UNPACK_IMAGE_HEIGHT),w=Pe.getParameter(Pe.UNPACK_SKIP_PIXELS),x=Pe.getParameter(Pe.UNPACK_SKIP_ROWS),C=Pe.getParameter(Pe.UNPACK_SKIP_IMAGES);Pe.pixelStorei(Pe.UNPACK_ROW_LENGTH,g.width),Pe.pixelStorei(Pe.UNPACK_IMAGE_HEIGHT,g.height),Pe.pixelStorei(Pe.UNPACK_SKIP_PIXELS,d),Pe.pixelStorei(Pe.UNPACK_SKIP_ROWS,u),Pe.pixelStorei(Pe.UNPACK_SKIP_IMAGES,h);const E=e.isDataArrayTexture||e.isData3DTexture,M=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=fe.get(e),i=fe.get(t),r=fe.get(n.__renderTarget),g=fe.get(i.__renderTarget);pe.bindFramebuffer(Pe.READ_FRAMEBUFFER,r.__webglFramebuffer),pe.bindFramebuffer(Pe.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let n=0;n<c;n++)E&&(Pe.framebufferTextureLayer(Pe.READ_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,fe.get(e).__webglTexture,o,h+n),Pe.framebufferTextureLayer(Pe.DRAW_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,fe.get(t).__webglTexture,s,f+n)),Pe.blitFramebuffer(d,u,a,l,p,m,a,l,Pe.DEPTH_BUFFER_BIT,Pe.NEAREST);pe.bindFramebuffer(Pe.READ_FRAMEBUFFER,null),pe.bindFramebuffer(Pe.DRAW_FRAMEBUFFER,null)}else if(0!==o||e.isRenderTargetTexture||fe.has(e)){const n=fe.get(e),i=fe.get(t);pe.bindFramebuffer(Pe.READ_FRAMEBUFFER,rt),pe.bindFramebuffer(Pe.DRAW_FRAMEBUFFER,ot);for(let e=0;e<c;e++)E?Pe.framebufferTextureLayer(Pe.READ_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,n.__webglTexture,o,h+e):Pe.framebufferTexture2D(Pe.READ_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,Pe.TEXTURE_2D,n.__webglTexture,o),M?Pe.framebufferTextureLayer(Pe.DRAW_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,i.__webglTexture,s,f+e):Pe.framebufferTexture2D(Pe.DRAW_FRAMEBUFFER,Pe.COLOR_ATTACHMENT0,Pe.TEXTURE_2D,i.__webglTexture,s),0!==o?Pe.blitFramebuffer(d,u,a,l,p,m,a,l,Pe.COLOR_BUFFER_BIT,Pe.NEAREST):M?Pe.copyTexSubImage3D(b,s,p,m,f+e,d,u,a,l):Pe.copyTexSubImage2D(b,s,p,m,d,u,a,l);pe.bindFramebuffer(Pe.READ_FRAMEBUFFER,null),pe.bindFramebuffer(Pe.DRAW_FRAMEBUFFER,null)}else M?e.isDataTexture||e.isData3DTexture?Pe.texSubImage3D(b,s,p,m,f,a,l,c,v,y,g.data):t.isCompressedArrayTexture?Pe.compressedTexSubImage3D(b,s,p,m,f,a,l,c,v,g.data):Pe.texSubImage3D(b,s,p,m,f,a,l,c,v,y,g):e.isDataTexture?Pe.texSubImage2D(Pe.TEXTURE_2D,s,p,m,a,l,v,y,g.data):e.isCompressedTexture?Pe.compressedTexSubImage2D(Pe.TEXTURE_2D,s,p,m,g.width,g.height,v,g.data):Pe.texSubImage2D(Pe.TEXTURE_2D,s,p,m,a,l,v,y,g);Pe.pixelStorei(Pe.UNPACK_ROW_LENGTH,A),Pe.pixelStorei(Pe.UNPACK_IMAGE_HEIGHT,_),Pe.pixelStorei(Pe.UNPACK_SKIP_PIXELS,w),Pe.pixelStorei(Pe.UNPACK_SKIP_ROWS,x),Pe.pixelStorei(Pe.UNPACK_SKIP_IMAGES,C),0===s&&t.generateMipmaps&&Pe.generateMipmap(b),pe.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,r=null,o=0){return(0,i.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,o)},this.initRenderTarget=function(e){void 0===fe.get(e).__webglFramebuffer&&ge.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ge.setTextureCube(e,0):e.isData3DTexture?ge.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ge.setTexture2DArray(e,0):ge.setTexture2D(e,0),pe.unbindTexture()},this.resetState=function(){L=0,D=0,I=null,pe.reset(),Re.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return i.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=i.ppV._getDrawingBufferColorSpace(e),t.unpackColorSpace=i.ppV._getUnpackColorSpace()}}},9995:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&f(e,"error",t,n)}(e,r,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=l(e))>0&&s.length>r&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,c=d,console&&console.warn&&console.warn(c)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=d.bind(i);return r.listener=n,i.wrapFn=r,r}function h(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(o){i.once&&e.removeEventListener(t,r),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,d=m(l,c);for(n=0;n<c;++n)i(d[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";n.d(i,{A:()=>Ns});var e=n(9683),t=n(6763),r=n(5933),o=n(8177),s=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let a=class extends r.Ay{constructor(e){super(),this._explorerElement=null,this._explorerElement=e}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-explorer-lockbar")}disconnected(){super.disconnected()}render(){return o.qy`<div class="sv-panel-header sv-panel-locks">
            <ff-button-group>
                <ff-button text="Full" @click=${this.unlockAspectRatio}></ff-button>
                <ff-button text="16:9" @click=${e=>this.setAspectRatio(9,16)}></ff-button>
                <ff-button text="20:9" @click=${e=>this.setAspectRatio(9,20)}></ff-button>
                <ff-button text="4:3" @click=${e=>this.setAspectRatio(3,4)}></ff-button>
            </ff-button-group>
        </div>
        `}unlockAspectRatio(){const e=this._explorerElement;e.style.aspectRatio="auto",e.style.width="100%"}setAspectRatio(e,t){const n=this._explorerElement;n.style.removeProperty("width"),n.style.aspectRatio=(e/t).toString()}};a=s([(0,o.EM)("sv-explorer-lockbar")],a);const l=a;var c=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];function d(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var i,r,o,s=e.dyn_tree,a=e.stat_desc.static_tree,l=e.stat_desc.elems,c=-1;for(n.heap_len=0,n.heap_max=573,i=0;i<l;i++)0!==s[2*i]?(n.heap[++n.heap_len]=c=i,n.depth[i]=0):s[2*i+1]=0;for(;n.heap_len<2;)s[2*(o=n.heap[++n.heap_len]=c<2?++c:0)]=1,n.depth[o]=0,n.opt_len--,a&&(n.static_len-=a[2*o+1]);for(e.max_code=c,i=Math.floor(n.heap_len/2);i>=1;i--)n.pqdownheap(s,i);o=l;do{i=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(s,1),r=n.heap[1],n.heap[--n.heap_max]=i,n.heap[--n.heap_max]=r,s[2*o]=s[2*i]+s[2*r],n.depth[o]=Math.max(n.depth[i],n.depth[r])+1,s[2*i+1]=s[2*r+1]=o,n.heap[1]=o++,n.pqdownheap(s,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,i,r,o,s,a,l=e.dyn_tree,c=e.stat_desc.static_tree,d=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,h=e.stat_desc.max_length,p=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>h&&(o=h,p++),l[2*i+1]=o,i>e.max_code||(t.bl_count[o]++,s=0,i>=u&&(s=d[i-u]),t.opt_len+=(a=l[2*i])*(o+s),c&&(t.static_len+=a*(c[2*i+1]+s)));if(0!==p){do{for(o=h-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[h]--,p-=2}while(p>0);for(o=h;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>e.max_code||(l[2*r+1]!=o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(n),function(e,n,i){var r,o,s,a=[],l=0;for(r=1;r<=15;r++)a[r]=l=l+i[r-1]<<1;for(o=0;o<=n;o++)0!==(s=e[2*o+1])&&(e[2*o]=t(a[s]++,s))}(s,e.max_code,n.bl_count)}}function u(e,t,n,i,r){var o=this;o.static_tree=e,o.extra_bits=t,o.extra_base=n,o.elems=i,o.max_length=r}function h(e,t,n,i,r){var o=this;o.good_length=e,o.max_lazy=t,o.nice_length=n,o.max_chain=i,o.func=r}d._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],d.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],d.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],d.d_code=function(e){return e<256?c[e]:c[256+(e>>>7)]},d.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],u.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],u.static_l_desc=new u(u.static_ltree,d.extra_lbits,257,286,15),u.static_d_desc=new u(u.static_dtree,d.extra_dbits,0,30,15),u.static_bl_desc=new u(null,d.extra_blbits,0,19,7);var p=[new h(0,0,0,0,0),new h(4,4,8,4,1),new h(4,5,16,8,1),new h(4,6,32,32,1),new h(4,4,16,16,2),new h(8,16,32,32,2),new h(8,16,128,128,2),new h(8,32,128,256,2),new h(32,128,258,1024,2),new h(32,258,258,4096,2)],m=["need dictionary","stream end","","","stream error","data error","","buffer error","",""];function f(e,t,n,i){var r=e[2*t],o=e[2*n];return r<o||r==o&&i[t]<=i[n]}function g(){var e,t,n,i,r,o,s,a,l,c,h,g,v,y,b,A,_,w,x,C,E,M,S,T,k,L,D,I,R,O,P,B,N,U,F,z,H,j,V,Y,G,Q=this,$=new d,q=new d,W=new d;function K(){var e;for(e=0;e<286;e++)P[2*e]=0;for(e=0;e<30;e++)B[2*e]=0;for(e=0;e<19;e++)N[2*e]=0;P[512]=1,Q.opt_len=Q.static_len=0,z=j=0}function Z(e,t){var n,i,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),e[2*(t+1)+1]=65535,n=0;n<=t;n++)i=o,o=e[2*(n+1)+1],++s<a&&i==o||(s<l?N[2*i]+=s:0!==i?(i!=r&&N[2*i]++,N[32]++):s<=10?N[34]++:N[36]++,s=0,r=i,0===o?(a=138,l=3):i==o?(a=6,l=3):(a=7,l=4))}function X(e){Q.pending_buf[Q.pending++]=e}function J(e){X(255&e),X(e>>>8&255)}function ee(e,t){var n,i=t;G>16-i?(J(Y|=(n=e)<<G&65535),Y=n>>>16-G,G+=i-16):(Y|=e<<G&65535,G+=i)}function te(e,t){var n=2*e;ee(65535&t[n],65535&t[n+1])}function ne(e,t){var n,i,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),n=0;n<=t;n++)if(i=o,o=e[2*(n+1)+1],!(++s<a&&i==o)){if(s<l)do{te(i,N)}while(0!=--s);else 0!==i?(i!=r&&(te(i,N),s--),te(16,N),ee(s-3,2)):s<=10?(te(17,N),ee(s-3,3)):(te(18,N),ee(s-11,7));s=0,r=i,0===o?(a=138,l=3):i==o?(a=6,l=3):(a=7,l=4)}}function ie(){16==G?(J(Y),Y=0,G=0):G>=8&&(X(255&Y),Y>>>=8,G-=8)}function re(e,t){var n,i,r;if(Q.pending_buf[H+2*z]=e>>>8&255,Q.pending_buf[H+2*z+1]=255&e,Q.pending_buf[U+z]=255&t,z++,0===e?P[2*t]++:(j++,e--,P[2*(d._length_code[t]+256+1)]++,B[2*d.d_code(e)]++),!(8191&z)&&D>2){for(n=8*z,i=E-_,r=0;r<30;r++)n+=B[2*r]*(5+d.extra_dbits[r]);if(n>>>=3,j<Math.floor(z/2)&&n<Math.floor(i/2))return!0}return z==F-1}function oe(e,t){var n,i,r,o,s=0;if(0!==z)do{n=Q.pending_buf[H+2*s]<<8&65280|255&Q.pending_buf[H+2*s+1],i=255&Q.pending_buf[U+s],s++,0===n?te(i,e):(te((r=d._length_code[i])+256+1,e),0!==(o=d.extra_lbits[r])&&ee(i-=d.base_length[r],o),n--,te(r=d.d_code(n),t),0!==(o=d.extra_dbits[r])&&ee(n-=d.base_dist[r],o))}while(s<z);te(256,e),V=e[513]}function se(){G>8?J(Y):G>0&&X(255&Y),Y=0,G=0}function ae(e,t,n){ee(0+(n?1:0),3),function(e,t){se(),V=8,J(t),J(~t),Q.pending_buf.set(a.subarray(e,e+t),Q.pending),Q.pending+=t}(e,t)}function le(t){(function(e,t,n){var i,r,o=0;D>0?($.build_tree(Q),q.build_tree(Q),o=function(){var e;for(Z(P,$.max_code),Z(B,q.max_code),W.build_tree(Q),e=18;e>=3&&0===N[2*d.bl_order[e]+1];e--);return Q.opt_len+=3*(e+1)+5+5+4,e}(),(r=Q.static_len+3+7>>>3)<=(i=Q.opt_len+3+7>>>3)&&(i=r)):i=r=t+5,t+4<=i&&-1!=e?ae(e,t,n):r==i?(ee(2+(n?1:0),3),oe(u.static_ltree,u.static_dtree)):(ee(4+(n?1:0),3),function(e,t,n){var i;for(ee(e-257,5),ee(t-1,5),ee(n-4,4),i=0;i<n;i++)ee(N[2*d.bl_order[i]+1],3);ne(P,e-1),ne(B,t-1)}($.max_code+1,q.max_code+1,o+1),oe(P,B)),K(),n&&se()})(_>=0?_:-1,E-_,t),_=E,e.flush_pending()}function ce(){var t,n,i,o;do{if(0==(o=l-S-E)&&0===E&&0===S)o=r;else if(-1==o)o--;else if(E>=r+r-262){a.set(a.subarray(r,r+r),0),M-=r,E-=r,_-=r,i=t=v;do{n=65535&h[--i],h[i]=n>=r?n-r:0}while(0!=--t);i=t=r;do{n=65535&c[--i],c[i]=n>=r?n-r:0}while(0!=--t);o+=r}if(0===e.avail_in)return;t=e.read_buf(a,E+S,o),(S+=t)>=3&&(g=((g=255&a[E])<<A^255&a[E+1])&b)}while(S<262&&0!==e.avail_in)}function de(e){var t,n,i=k,o=E,l=T,d=E>r-262?E-(r-262):0,u=O,h=s,p=E+258,m=a[o+l-1],f=a[o+l];T>=R&&(i>>=2),u>S&&(u=S);do{if(a[(t=e)+l]==f&&a[t+l-1]==m&&a[t]==a[o]&&a[++t]==a[o+1]){o+=2,t++;do{}while(a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&a[++o]==a[++t]&&o<p);if(n=258-(p-o),o=p-258,n>l){if(M=e,l=n,n>=u)break;m=a[o+l-1],f=a[o+l]}}}while((e=65535&c[e&h])>d&&0!=--i);return l<=S?l:S}Q.depth=[],Q.bl_count=[],Q.heap=[],P=[],B=[],N=[],Q.pqdownheap=function(e,t){for(var n=Q.heap,i=n[t],r=t<<1;r<=Q.heap_len&&(r<Q.heap_len&&f(e,n[r+1],n[r],Q.depth)&&r++,!f(e,i,n[r],Q.depth));)n[t]=n[r],t=r,r<<=1;n[t]=i},Q.deflateInit=function(e,d,m,f,x,M){return f||(f=8),x||(x=8),M||(M=0),e.msg=null,-1==d&&(d=6),x<1||x>9||8!=f||m<9||m>15||d<0||d>9||M<0||M>2?-2:(e.dstate=Q,s=(r=1<<(o=m))-1,b=(v=1<<(y=x+7))-1,A=Math.floor((y+3-1)/3),a=new Uint8Array(2*r),c=[],h=[],F=1<<x+6,Q.pending_buf=new Uint8Array(4*F),n=4*F,H=Math.floor(F/2),U=3*F,D=d,I=M,function(e){return e.total_in=e.total_out=0,e.msg=null,Q.pending=0,Q.pending_out=0,t=113,i=0,$.dyn_tree=P,$.stat_desc=u.static_l_desc,q.dyn_tree=B,q.stat_desc=u.static_d_desc,W.dyn_tree=N,W.stat_desc=u.static_bl_desc,Y=0,G=0,V=8,K(),function(){var e;for(l=2*r,h[v-1]=0,e=0;e<v-1;e++)h[e]=0;L=p[D].max_lazy,R=p[D].good_length,O=p[D].nice_length,k=p[D].max_chain,E=0,_=0,S=0,w=T=2,C=0,g=0}(),0}(e))},Q.deflateEnd=function(){return 42!=t&&113!=t&&666!=t?-2:(Q.pending_buf=null,h=null,c=null,a=null,Q.dstate=null,113==t?-3:0)},Q.deflateParams=function(e,t,n){var i=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?-2:(p[D].func!=p[t].func&&0!==e.total_in&&(i=e.deflate(1)),D!=t&&(L=p[D=t].max_lazy,R=p[D].good_length,O=p[D].nice_length,k=p[D].max_chain),I=n,i)},Q.deflateSetDictionary=function(e,n,i){var o,l=i,d=0;if(!n||42!=t)return-2;if(l<3)return 0;for(l>r-262&&(d=i-(l=r-262)),a.set(n.subarray(d,d+l),0),E=l,_=l,g=((g=255&a[0])<<A^255&a[1])&b,o=0;o<=l-3;o++)c[o&s]=h[g=(g<<A^255&a[o+2])&b],h[g]=o;return 0},Q.deflate=function(l,d){var f,y,k,R,O,P;if(d>4||d<0)return-2;if(!l.next_out||!l.next_in&&0!==l.avail_in||666==t&&4!=d)return l.msg=m[4],-2;if(0===l.avail_out)return l.msg=m[7],-5;if(e=l,R=i,i=d,42==t&&(y=8+(o-8<<4)<<8,(k=(D-1&255)>>1)>3&&(k=3),y|=k<<6,0!==E&&(y|=32),t=113,X((P=y+=31-y%31)>>8&255),X(255&P)),0!==Q.pending){if(e.flush_pending(),0===e.avail_out)return i=-1,0}else if(0===e.avail_in&&d<=R&&4!=d)return e.msg=m[7],-5;if(666==t&&0!==e.avail_in)return l.msg=m[7],-5;if(0!==e.avail_in||0!==S||0!=d&&666!=t){switch(O=-1,p[D].func){case 0:O=function(t){var i,o=65535;for(o>n-5&&(o=n-5);;){if(S<=1){if(ce(),0===S&&0==t)return 0;if(0===S)break}if(E+=S,S=0,i=_+o,(0===E||E>=i)&&(S=E-i,E=i,le(!1),0===e.avail_out))return 0;if(E-_>=r-262&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d);break;case 1:O=function(t){for(var n,i=0;;){if(S<262){if(ce(),S<262&&0==t)return 0;if(0===S)break}if(S>=3&&(i=65535&h[g=(g<<A^255&a[E+2])&b],c[E&s]=h[g],h[g]=E),0!==i&&(E-i&65535)<=r-262&&2!=I&&(w=de(i)),w>=3)if(n=re(E-M,w-3),S-=w,w<=L&&S>=3){w--;do{E++,i=65535&h[g=(g<<A^255&a[E+2])&b],c[E&s]=h[g],h[g]=E}while(0!=--w);E++}else E+=w,w=0,g=((g=255&a[E])<<A^255&a[E+1])&b;else n=re(0,255&a[E]),S--,E++;if(n&&(le(!1),0===e.avail_out))return 0}return le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d);break;case 2:O=function(t){for(var n,i,o=0;;){if(S<262){if(ce(),S<262&&0==t)return 0;if(0===S)break}if(S>=3&&(o=65535&h[g=(g<<A^255&a[E+2])&b],c[E&s]=h[g],h[g]=E),T=w,x=M,w=2,0!==o&&T<L&&(E-o&65535)<=r-262&&(2!=I&&(w=de(o)),w<=5&&(1==I||3==w&&E-M>4096)&&(w=2)),T>=3&&w<=T){i=E+S-3,n=re(E-1-x,T-3),S-=T-1,T-=2;do{++E<=i&&(o=65535&h[g=(g<<A^255&a[E+2])&b],c[E&s]=h[g],h[g]=E)}while(0!=--T);if(C=0,w=2,E++,n&&(le(!1),0===e.avail_out))return 0}else if(0!==C){if((n=re(0,255&a[E-1]))&&le(!1),E++,S--,0===e.avail_out)return 0}else C=1,E++,S--}return 0!==C&&(n=re(0,255&a[E-1]),C=0),le(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(d)}if(2!=O&&3!=O||(t=666),0==O||2==O)return 0===e.avail_out&&(i=-1),0;if(1==O){if(1==d)ee(2,3),te(256,u.static_ltree),ie(),1+V+10-G<9&&(ee(2,3),te(256,u.static_ltree),ie()),V=7;else if(ae(0,0,!1),3==d)for(f=0;f<v;f++)h[f]=0;if(e.flush_pending(),0===e.avail_out)return i=-1,0}}return 4!=d?0:1}}function v(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}function y(e){var t=new v,n=512,i=new Uint8Array(n),r=e?e.level:-1;void 0===r&&(r=-1),t.deflateInit(r),t.next_out=i,this.append=function(e,r){var o,s=[],a=0,l=0,c=0;if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=n,0!=t.deflate(0))throw new Error("deflating: "+t.msg);t.next_out_index&&s.push(t.next_out_index==n?new Uint8Array(i):new Uint8Array(i.subarray(0,t.next_out_index))),c+=t.next_out_index,r&&t.next_in_index>0&&t.next_in_index!=a&&(r(t.next_in_index),a=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return o=new Uint8Array(c),s.forEach(function(e){o.set(e,l),l+=e.length}),o}},this.flush=function(){var e,r,o=[],s=0,a=0;do{if(t.next_out_index=0,t.avail_out=n,1!=(e=t.deflate(4))&&0!=e)throw new Error("deflating: "+t.msg);n-t.avail_out>0&&o.push(new Uint8Array(i.subarray(0,t.next_out_index))),a+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),r=new Uint8Array(a),o.forEach(function(e){r.set(e,s),s+=e.length}),r}}v.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new g,t||(t=15),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):-2},deflateEnd:function(){var e=this;if(!e.dstate)return-2;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):-2},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):-2},read_buf:function(e,t,n){var i=this,r=i.avail_in;return r>n&&(r=n),0===r?0:(i.avail_in-=r,e.set(i.next_in.subarray(i.next_in_index,i.next_in_index+r),t),i.next_in_index+=r,i.total_in+=r,r)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}},self._zipjs_Deflater=y;var b=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],A=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],_=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],C=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function M(){var e,t,n,i,r,o;function s(e,t,s,a,l,c,d,u,h,p,m){var f,g,v,y,b,A,_,w,x,C,E,M,S,T,k;C=0,b=s;do{n[e[t+C]]++,C++,b--}while(0!==b);if(n[0]==s)return d[0]=-1,u[0]=0,0;for(w=u[0],A=1;A<=15&&0===n[A];A++);for(_=A,w<A&&(w=A),b=15;0!==b&&0===n[b];b--);for(v=b,w>b&&(w=b),u[0]=w,T=1<<A;A<b;A++,T<<=1)if((T-=n[A])<0)return-3;if((T-=n[b])<0)return-3;for(n[b]+=T,o[1]=A=0,C=1,S=2;0!=--b;)o[S]=A+=n[C],S++,C++;b=0,C=0;do{0!==(A=e[t+C])&&(m[o[A]++]=b),C++}while(++b<s);for(s=o[v],o[0]=b=0,C=0,y=-1,M=-w,r[0]=0,E=0,k=0;_<=v;_++)for(f=n[_];0!=f--;){for(;_>M+w;){if(y++,k=(k=v-(M+=w))>w?w:k,(g=1<<(A=_-M))>f+1&&(g-=f+1,S=_,A<k))for(;++A<k&&!((g<<=1)<=n[++S]);)g-=n[S];if(p[0]+(k=1<<A)>1440)return-3;r[y]=E=p[0],p[0]+=k,0!==y?(o[y]=b,i[0]=A,i[1]=w,i[2]=E-r[y-1]-(A=b>>>M-w),h.set(i,3*(r[y-1]+A))):d[0]=E}for(i[1]=_-M,C>=s?i[0]=192:m[C]<a?(i[0]=m[C]<256?0:96,i[2]=m[C++]):(i[0]=c[m[C]-a]+16+64,i[2]=l[m[C++]-a]),g=1<<_-M,A=b>>>M;A<k;A+=g)h.set(i,3*(E+A));for(A=1<<_-1;0!=(b&A);A>>>=1)b^=A;for(b^=A,x=(1<<M)-1;(b&x)!=o[y];)y--,x=(1<<(M-=w))-1}return 0!==T&&1!=v?-5:0}function a(s){var a;for(e||(e=[],t=[],n=new Int32Array(16),i=[],r=new Int32Array(15),o=new Int32Array(16)),t.length<s&&(t=[]),a=0;a<s;a++)t[a]=0;for(a=0;a<16;a++)n[a]=0;for(a=0;a<3;a++)i[a]=0;r.set(n.subarray(0,15),0),o.set(n.subarray(0,16),0)}this.inflate_trees_bits=function(n,i,r,o,l){var c;return a(19),e[0]=0,-3==(c=s(n,0,19,19,null,null,r,i,o,e,t))?l.msg="oversubscribed dynamic bit lengths tree":-5!=c&&0!==i[0]||(l.msg="incomplete dynamic bit lengths tree",c=-3),c},this.inflate_trees_dynamic=function(n,i,r,o,l,c,d,u,h){var p;return a(288),e[0]=0,0!=(p=s(r,0,n,257,w,x,c,o,u,e,t))||0===o[0]?(-3==p?h.msg="oversubscribed literal/length tree":-4!=p&&(h.msg="incomplete literal/length tree",p=-3),p):(a(288),0!=(p=s(r,n,i,0,C,E,d,l,u,e,t))||0===l[0]&&n>257?(-3==p?h.msg="oversubscribed distance tree":-5==p?(h.msg="incomplete distance tree",p=-3):-4!=p&&(h.msg="empty distance tree with lengths",p=-3),p):0)}}function S(){var e,t,n,i,r=this,o=0,s=0,a=0,l=0,c=0,d=0,u=0,h=0,p=0,m=0;function f(e,t,n,i,r,o,s,a){var l,c,d,u,h,p,m,f,g,v,y,A,_,w,x,C;m=a.next_in_index,f=a.avail_in,h=s.bitb,p=s.bitk,v=(g=s.write)<s.read?s.read-g-1:s.end-g,y=b[e],A=b[t];do{for(;p<20;)f--,h|=(255&a.read_byte(m++))<<p,p+=8;if(0!==(u=(c=n)[C=3*((d=i)+(l=h&y))]))for(;;){if(h>>=c[C+1],p-=c[C+1],16&u){for(_=c[C+2]+(h&b[u&=15]),h>>=u,p-=u;p<15;)f--,h|=(255&a.read_byte(m++))<<p,p+=8;for(u=(c=r)[C=3*((d=o)+(l=h&A))];;){if(h>>=c[C+1],p-=c[C+1],16&u){for(u&=15;p<u;)f--,h|=(255&a.read_byte(m++))<<p,p+=8;if(w=c[C+2]+(h&b[u]),h>>=u,p-=u,v-=_,g>=w)g-(x=g-w)>0&&2>g-x?(s.window[g++]=s.window[x++],s.window[g++]=s.window[x++],_-=2):(s.window.set(s.window.subarray(x,x+2),g),g+=2,x+=2,_-=2);else{x=g-w;do{x+=s.end}while(x<0);if(_>(u=s.end-x)){if(_-=u,g-x>0&&u>g-x)do{s.window[g++]=s.window[x++]}while(0!=--u);else s.window.set(s.window.subarray(x,x+u),g),g+=u,x+=u,u=0;x=0}}if(g-x>0&&_>g-x)do{s.window[g++]=s.window[x++]}while(0!=--_);else s.window.set(s.window.subarray(x,x+_),g),g+=_,x+=_,_=0;break}if(64&u)return a.msg="invalid distance code",f+=_=p>>3<(_=a.avail_in-f)?p>>3:_,m-=_,p-=_<<3,s.bitb=h,s.bitk=p,a.avail_in=f,a.total_in+=m-a.next_in_index,a.next_in_index=m,s.write=g,-3;l+=c[C+2],u=c[C=3*(d+(l+=h&b[u]))]}break}if(64&u)return 32&u?(f+=_=p>>3<(_=a.avail_in-f)?p>>3:_,m-=_,p-=_<<3,s.bitb=h,s.bitk=p,a.avail_in=f,a.total_in+=m-a.next_in_index,a.next_in_index=m,s.write=g,1):(a.msg="invalid literal/length code",f+=_=p>>3<(_=a.avail_in-f)?p>>3:_,m-=_,p-=_<<3,s.bitb=h,s.bitk=p,a.avail_in=f,a.total_in+=m-a.next_in_index,a.next_in_index=m,s.write=g,-3);if(l+=c[C+2],0===(u=c[C=3*(d+(l+=h&b[u]))])){h>>=c[C+1],p-=c[C+1],s.window[g++]=c[C+2],v--;break}}else h>>=c[C+1],p-=c[C+1],s.window[g++]=c[C+2],v--}while(v>=258&&f>=10);return f+=_=p>>3<(_=a.avail_in-f)?p>>3:_,m-=_,p-=_<<3,s.bitb=h,s.bitk=p,a.avail_in=f,a.total_in+=m-a.next_in_index,a.next_in_index=m,s.write=g,0}r.init=function(r,o,s,a,l,c){e=0,u=r,h=o,n=s,p=a,i=l,m=c,t=null},r.proc=function(r,g,v){var y,A,_,w,x,C,E,M=0,S=0,T=0;for(T=g.next_in_index,w=g.avail_in,M=r.bitb,S=r.bitk,C=(x=r.write)<r.read?r.read-x-1:r.end-x;;)switch(e){case 0:if(C>=258&&w>=10&&(r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,v=f(u,h,n,p,i,m,r,g),T=g.next_in_index,w=g.avail_in,M=r.bitb,S=r.bitk,C=(x=r.write)<r.read?r.read-x-1:r.end-x,0!=v)){e=1==v?7:9;break}a=u,t=n,s=p,e=1;case 1:for(y=a;S<y;){if(0===w)return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);v=0,w--,M|=(255&g.read_byte(T++))<<S,S+=8}if(M>>>=t[1+(A=3*(s+(M&b[y])))],S-=t[A+1],0===(_=t[A])){l=t[A+2],e=6;break}if(16&_){c=15&_,o=t[A+2],e=2;break}if(!(64&_)){a=_,s=A/3+t[A+2];break}if(32&_){e=7;break}return e=9,g.msg="invalid literal/length code",v=-3,r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);case 2:for(y=c;S<y;){if(0===w)return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);v=0,w--,M|=(255&g.read_byte(T++))<<S,S+=8}o+=M&b[y],M>>=y,S-=y,a=h,t=i,s=m,e=3;case 3:for(y=a;S<y;){if(0===w)return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);v=0,w--,M|=(255&g.read_byte(T++))<<S,S+=8}if(M>>=t[1+(A=3*(s+(M&b[y])))],S-=t[A+1],16&(_=t[A])){c=15&_,d=t[A+2],e=4;break}if(!(64&_)){a=_,s=A/3+t[A+2];break}return e=9,g.msg="invalid distance code",v=-3,r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);case 4:for(y=c;S<y;){if(0===w)return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);v=0,w--,M|=(255&g.read_byte(T++))<<S,S+=8}d+=M&b[y],M>>=y,S-=y,e=5;case 5:for(E=x-d;E<0;)E+=r.end;for(;0!==o;){if(0===C&&(x==r.end&&0!==r.read&&(C=(x=0)<r.read?r.read-x-1:r.end-x),0===C&&(r.write=x,v=r.inflate_flush(g,v),C=(x=r.write)<r.read?r.read-x-1:r.end-x,x==r.end&&0!==r.read&&(C=(x=0)<r.read?r.read-x-1:r.end-x),0===C)))return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);r.window[x++]=r.window[E++],C--,E==r.end&&(E=0),o--}e=0;break;case 6:if(0===C&&(x==r.end&&0!==r.read&&(C=(x=0)<r.read?r.read-x-1:r.end-x),0===C&&(r.write=x,v=r.inflate_flush(g,v),C=(x=r.write)<r.read?r.read-x-1:r.end-x,x==r.end&&0!==r.read&&(C=(x=0)<r.read?r.read-x-1:r.end-x),0===C)))return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);v=0,r.window[x++]=l,C--,e=0;break;case 7:if(S>7&&(S-=8,w++,T--),r.write=x,v=r.inflate_flush(g,v),C=(x=r.write)<r.read?r.read-x-1:r.end-x,r.read!=r.write)return r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);e=8;case 8:return v=1,r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);case 9:return v=-3,r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v);default:return v=-2,r.bitb=M,r.bitk=S,g.avail_in=w,g.total_in+=T-g.next_in_index,g.next_in_index=T,r.write=x,r.inflate_flush(g,v)}},r.free=function(){}}M.inflate_trees_fixed=function(e,t,n,i){return e[0]=9,t[0]=5,n[0]=A,i[0]=_,0};var T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function k(e,t){var n,i=this,r=0,o=0,s=0,a=0,l=[0],c=[0],d=new S,u=0,h=new Int32Array(4320),p=new M;i.bitk=0,i.bitb=0,i.window=new Uint8Array(t),i.end=t,i.read=0,i.write=0,i.reset=function(e,t){t&&(t[0]=0),6==r&&d.free(e),r=0,i.bitk=0,i.bitb=0,i.read=i.write=0},i.reset(e,null),i.inflate_flush=function(e,t){var n,r,o;return r=e.next_out_index,(n=((o=i.read)<=i.write?i.write:i.end)-o)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(o,o+n),r),r+=n,(o+=n)==i.end&&(o=0,i.write==i.end&&(i.write=0),(n=i.write-o)>e.avail_out&&(n=e.avail_out),0!==n&&-5==t&&(t=0),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.window.subarray(o,o+n),r),r+=n,o+=n),e.next_out_index=r,i.read=o,t},i.proc=function(e,t){var m,f,g,v,y,A,_,w;for(v=e.next_in_index,y=e.avail_in,f=i.bitb,g=i.bitk,_=(A=i.write)<i.read?i.read-A-1:i.end-A;;)switch(r){case 0:for(;g<3;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}switch(u=1&(m=7&f),m>>>1){case 0:f>>>=3,f>>>=m=7&(g-=3),g-=m,r=1;break;case 1:var x=[],C=[],E=[[]],S=[[]];M.inflate_trees_fixed(x,C,E,S),d.init(x[0],C[0],E[0],0,S[0],0),f>>>=3,g-=3,r=6;break;case 2:f>>>=3,g-=3,r=3;break;case 3:return f>>>=3,g-=3,r=9,e.msg="invalid block type",t=-3,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t)}break;case 1:for(;g<32;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if((~f>>>16&65535)!=(65535&f))return r=9,e.msg="invalid stored block lengths",t=-3,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);o=65535&f,f=g=0,r=0!==o?2:0!==u?7:0;break;case 2:if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);if(0===_&&(A==i.end&&0!==i.read&&(_=(A=0)<i.read?i.read-A-1:i.end-A),0===_&&(i.write=A,t=i.inflate_flush(e,t),_=(A=i.write)<i.read?i.read-A-1:i.end-A,A==i.end&&0!==i.read&&(_=(A=0)<i.read?i.read-A-1:i.end-A),0===_)))return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);if(t=0,(m=o)>y&&(m=y),m>_&&(m=_),i.window.set(e.read_buf(v,m),A),v+=m,y-=m,A+=m,_-=m,0!=(o-=m))break;r=0!==u?7:0;break;case 3:for(;g<14;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if(s=m=16383&f,(31&m)>29||(m>>5&31)>29)return r=9,e.msg="too many length or distance symbols",t=-3,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);if(m=258+(31&m)+(m>>5&31),!n||n.length<m)n=[];else for(w=0;w<m;w++)n[w]=0;f>>>=14,g-=14,a=0,r=4;case 4:for(;a<4+(s>>>10);){for(;g<3;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}n[T[a++]]=7&f,f>>>=3,g-=3}for(;a<19;)n[T[a++]]=0;if(l[0]=7,0!=(m=p.inflate_trees_bits(n,l,c,h,e)))return-3==(t=m)&&(n=null,r=9),i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);a=0,r=5;case 5:for(;!(a>=258+(31&(m=s))+(m>>5&31));){var k,L;for(m=l[0];g<m;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if((L=h[3*(c[0]+(f&b[m=h[3*(c[0]+(f&b[m]))+1]]))+2])<16)f>>>=m,g-=m,n[a++]=L;else{for(w=18==L?7:L-14,k=18==L?11:3;g<m+w;){if(0===y)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);t=0,y--,f|=(255&e.read_byte(v++))<<g,g+=8}if(g-=m,k+=(f>>>=m)&b[w],f>>>=w,g-=w,(w=a)+k>258+(31&(m=s))+(m>>5&31)||16==L&&w<1)return n=null,r=9,e.msg="invalid bit length repeat",t=-3,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);L=16==L?n[w-1]:0;do{n[w++]=L}while(0!=--k);a=w}}c[0]=-1;var D=[],I=[],R=[],O=[];if(D[0]=9,I[0]=6,0!=(m=p.inflate_trees_dynamic(257+(31&(m=s)),1+(m>>5&31),n,D,I,R,O,h,e)))return-3==m&&(n=null,r=9),t=m,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);d.init(D[0],I[0],h,R[0],h,O[0]),r=6;case 6:if(i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,1!=(t=d.proc(i,e,t)))return i.inflate_flush(e,t);if(t=0,d.free(e),v=e.next_in_index,y=e.avail_in,f=i.bitb,g=i.bitk,_=(A=i.write)<i.read?i.read-A-1:i.end-A,0===u){r=0;break}r=7;case 7:if(i.write=A,t=i.inflate_flush(e,t),_=(A=i.write)<i.read?i.read-A-1:i.end-A,i.read!=i.write)return i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);r=8;case 8:return t=1,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);case 9:return t=-3,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t);default:return t=-2,i.bitb=f,i.bitk=g,e.avail_in=y,e.total_in+=v-e.next_in_index,e.next_in_index=v,i.write=A,i.inflate_flush(e,t)}},i.free=function(e){i.reset(e,null),i.window=null,h=null},i.set_dictionary=function(e,t,n){i.window.set(e.subarray(t,t+n),0),i.read=i.write=n},i.sync_point=function(){return 1==r?1:0}}var L=[0,0,255,255];function D(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),0):-2}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,0},e.inflateInit=function(n,i){return n.msg=null,e.blocks=null,i<8||i>15?(e.inflateEnd(n),-2):(e.wbits=i,n.istate.blocks=new k(n,1<<i),t(n),0)},e.inflate=function(e,t){var n,i;if(!e||!e.istate||!e.next_in)return-2;for(t=4==t?-5:0,n=-5;;)switch(e.istate.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(e.istate.method=e.read_byte(e.next_in_index++)))){e.istate.mode=13,e.msg="unknown compression method",e.istate.marker=5;break}if(8+(e.istate.method>>4)>e.istate.wbits){e.istate.mode=13,e.msg="invalid window size",e.istate.marker=5;break}e.istate.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,i=255&e.read_byte(e.next_in_index++),((e.istate.method<<8)+i)%31!=0){e.istate.mode=13,e.msg="incorrect header check",e.istate.marker=5;break}if(!(32&i)){e.istate.mode=7;break}e.istate.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,e.istate.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,e.istate.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,e.istate.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,e.istate.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,e.istate.need+=255&e.read_byte(e.next_in_index++),e.istate.mode=6,2);case 6:return e.istate.mode=13,e.msg="need dictionary",e.istate.marker=0,-2;case 7:if(-3==(n=e.istate.blocks.proc(e,n))){e.istate.mode=13,e.istate.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,e.istate.blocks.reset(e,e.istate.was),e.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}},e.inflateSetDictionary=function(e,t,n){var i=0,r=n;return e&&e.istate&&6==e.istate.mode?(r>=1<<e.istate.wbits&&(i=n-(r=(1<<e.istate.wbits)-1)),e.istate.blocks.set_dictionary(t,i,r),e.istate.mode=7,0):-2},e.inflateSync=function(e){var n,i,r,o,s;if(!e||!e.istate)return-2;if(13!=e.istate.mode&&(e.istate.mode=13,e.istate.marker=0),0===(n=e.avail_in))return-5;for(i=e.next_in_index,r=e.istate.marker;0!==n&&r<4;)e.read_byte(i)==L[r]?r++:r=0!==e.read_byte(i)?0:4-r,i++,n--;return e.total_in+=i-e.next_in_index,e.next_in_index=i,e.avail_in=n,e.istate.marker=r,4!=r?-3:(o=e.total_in,s=e.total_out,t(e),e.total_in=o,e.total_out=s,e.istate.mode=7,0)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():-2}}function I(){}function R(){var e=new I,t=new Uint8Array(512),n=!1;e.inflateInit(),e.next_out=t,this.append=function(i,r){var o,s,a=[],l=0,c=0,d=0;if(0!==i.length){e.next_in_index=0,e.next_in=i,e.avail_in=i.length;do{if(e.next_out_index=0,e.avail_out=512,0!==e.avail_in||n||(e.next_in_index=0,n=!0),o=e.inflate(0),n&&-5===o){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(0!==o&&1!==o)throw new Error("inflating: "+e.msg);if((n||1===o)&&e.avail_in===i.length)throw new Error("inflating: bad input");e.next_out_index&&a.push(512===e.next_out_index?new Uint8Array(t):new Uint8Array(t.subarray(0,e.next_out_index))),d+=e.next_out_index,r&&e.next_in_index>0&&e.next_in_index!=l&&(r(e.next_in_index),l=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return s=new Uint8Array(d),a.forEach(function(e){s.set(e,c),c+=e.length}),s}},this.flush=function(){e.inflateEnd()}}I.prototype={inflateInit:function(e){var t=this;return t.istate=new D,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){var t=this;return t.istate?t.istate.inflate(t,e):-2},inflateEnd:function(){var e=this;if(!e.istate)return-2;var t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){var e=this;return e.istate?e.istate.inflateSync(e):-2},inflateSetDictionary:function(e,t){var n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):-2},read_byte:function(e){return this.next_in.subarray(e,e+1)[0]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}},self._zipjs_Inflater=R;var O,P="File format is not recognized.",B="Error while reading zip file.";try{O=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(c){}function N(){this.crc=-1}function U(){}function F(e,t){var n,i;return n=new ArrayBuffer(e),i=new Uint8Array(n),t&&i.set(t,0),{buffer:n,array:i,view:new DataView(n)}}function z(){}function H(e){var t,n=this;n.size=0,n.init=function(i,r){var o=new Blob([e],{type:"text/plain"});(t=new V(o)).init(function(){n.size=t.size,i()},r)},n.readUint8Array=function(e,n,i,r){t.readUint8Array(e,n,i,r)}}function j(e){var t,n=this;n.size=0,n.init=function(i){for(var r=e.length;"="==e.charAt(r-1);)r--;t=e.indexOf(",")+1,n.size=Math.floor(.75*(r-t)),i()},n.readUint8Array=function(n,i,r){var o,s=F(i),a=4*Math.floor(n/3),l=4*Math.ceil((n+i)/3),c=self.atob(e.substring(a+t,l+t)),d=n-3*Math.floor(a/4);for(o=d;o<d+i;o++)s.array[o-d]=c.charCodeAt(o);r(s.array)}}function V(e){var t=this;t.size=0,t.init=function(n){t.size=e.size,n()},t.readUint8Array=function(t,n,i,r){var o=new FileReader;o.onload=function(e){i(new Uint8Array(e.target.result))},o.onerror=r;try{o.readAsArrayBuffer(function(e,t,n){if(t<0||n<0||t+n>e.size)throw new RangeError("offset:"+t+", length:"+n+", size:"+e.size);return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):e.mozSlice?e.mozSlice(t,t+n):e.msSlice?e.msSlice(t,t+n):void 0}(e,t,n))}catch(e){r(e)}}}function Y(){}function G(e){var t,n=this;n.init=function(e){t=new Blob([],{type:"text/plain"}),e()},n.writeUint8Array=function(e,n){t=new Blob([t,O?e:e.buffer],{type:"text/plain"}),n()},n.getData=function(n,i){var r=new FileReader;r.onload=function(e){n(e.target.result)},r.onerror=i,r.readAsText(t,e)}}function Q(e){var t=this,n="",i="";t.init=function(t){n+="data:"+(e||"")+";base64,",t()},t.writeUint8Array=function(e,t){var r,o=i.length,s=i;for(i="",r=0;r<3*Math.floor((o+e.length)/3)-o;r++)s+=String.fromCharCode(e[r]);for(;r<e.length;r++)i+=String.fromCharCode(e[r]);s.length>2?n+=self.btoa(s):i=s,t()},t.getData=function(e){e(n+self.btoa(i))}}function $(e){var t,n=this;n.init=function(n){t=new Blob([],{type:e}),n()},n.writeUint8Array=function(n,i){t=new Blob([t,O?n:n.buffer],{type:e}),i()},n.getData=function(e){e(t)}}function q(e,t,n,i,r,o,s,a,l,c){var d,u,h,p=0,m=t.sn;function f(){e.removeEventListener("message",g,!1),a(u,h)}function g(t){var n=t.data,r=n.data,a=n.error;if(a)return a.toString=function(){return"Error: "+this.message},void l(a);if(n.sn===m)switch("number"==typeof n.codecTime&&(e.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(e.crcTime+=n.crcTime),n.type){case"append":r?(u+=r.length,i.writeUint8Array(r,function(){v()},c)):v();break;case"flush":h=n.crc,r?(u+=r.length,i.writeUint8Array(r,function(){f()},c)):f();break;case"progress":s&&s(d+n.loaded,o);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function v(){(d=524288*p)<=o?n.readUint8Array(r+d,Math.min(524288,o-d),function(n){s&&s(d,o);var i=0===d?t:{sn:m};i.type="append",i.data=n;try{e.postMessage(i,[n.buffer])}catch(t){e.postMessage(i)}p++},l):e.postMessage({sn:m,type:"flush"})}u=0,e.addEventListener("message",g,!1),v()}function W(e,t,n,i,r,o,s,a,l,c){var d,u=0,h=0,p="input"===o,m="output"===o,f=new N;!function o(){var g;if((d=524288*u)<r)t.readUint8Array(i+d,Math.min(524288,r-d),function(t){var i;try{i=e.append(t,function(e){s&&s(d+e,r)})}catch(e){return void l(e)}i?(h+=i.length,n.writeUint8Array(i,function(){u++,setTimeout(o,1)},c),m&&f.append(i)):(u++,setTimeout(o,1)),p&&f.append(t),s&&s(d,r)},l);else{try{g=e.flush()}catch(e){return void l(e)}g?(m&&f.append(g),h+=g.length,n.writeUint8Array(g,function(){a(h,f.get())},c)):a(h,f.get())}}()}function K(e,t,n,i,r,o,s,a,l,c,d){var u="input";se.useWebWorkers&&s?q(e,{sn:t,codecClass:"_zipjs_NOOP",crcType:u},n,i,r,o,l,a,c,d):W(new U,n,i,r,o,u,l,a,c,d)}function Z(e){var t,n,i="",r=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)i+=(n=255&e.charCodeAt(t))>127?r[n-128]:String.fromCharCode(n);return i}function X(e){return decodeURIComponent(escape(e))}function J(e){var t,n="";for(t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n}function ee(e,t,n,i,r){e.version=t.view.getUint16(n,!0),e.bitFlag=t.view.getUint16(n+2,!0),e.compressionMethod=t.view.getUint16(n+4,!0),e.lastModDateRaw=t.view.getUint32(n+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,n=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}(e.lastModDateRaw),1&~e.bitFlag?((i||!!(8&~e.bitFlag))&&(e.crc32=t.view.getUint32(n+10,!0),e.compressedSize=t.view.getUint32(n+14,!0),e.uncompressedSize=t.view.getUint32(n+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(n+22,!0),e.extraFieldLength=t.view.getUint16(n+24,!0)):r("File is using Zip64 (4gb+ file size).")):r("File contains encrypted entry.")}function te(e){return unescape(encodeURIComponent(e))}function ne(e){var t,n=[];for(t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}N.prototype.append=function(e){for(var t=0|this.crc,n=this.table,i=0,r=0|e.length;i<r;i++)t=t>>>8^n[255&(t^e[i])];this.crc=t},N.prototype.get=function(){return~this.crc},N.prototype.table=function(){var e,t,n,i=[];for(e=0;e<256;e++){for(n=e,t=0;t<8;t++)1&n?n=n>>>1^3988292384:n>>>=1;i[e]=n}return i}(),U.prototype.append=function(e,t){return e},U.prototype.flush=function(){},(H.prototype=new z).constructor=H,(j.prototype=new z).constructor=j,(V.prototype=new z).constructor=V,Y.prototype.getData=function(e){e(this.data)},(G.prototype=new Y).constructor=G,(Q.prototype=new Y).constructor=Q,($.prototype=new Y).constructor=$;var ie={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function re(e,t,n){if(null===se.workerScripts||null===se.workerScriptsPath){var i,r,o;if(se.workerScripts){if(i=se.workerScripts[e],!Array.isArray(i))return void n(new Error("zip.workerScripts."+e+" is not an array!"));r=i,o=document.createElement("a"),i=r.map(function(e){return o.href=e,o.href})}else(i=ie[e].slice(0))[0]=(se.workerScriptsPath||"")+i[0];var s=new Worker(i[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:i.slice(1)}),s.addEventListener("message",function e(i){var r=i.data;if(r.error)return s.terminate(),void n(r.error);"importScripts"===r.type&&(s.removeEventListener("message",e),s.removeEventListener("error",a),t(s))}),s.addEventListener("error",a)}else n(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function a(e){s.terminate(),n(e)}}function oe(e){console.error(e)}const se={Reader:z,Writer:Y,BlobReader:V,Data64URIReader:j,TextReader:H,BlobWriter:$,Data64URIWriter:Q,TextWriter:G,createReader:function(e,t,n){e.init(function(){!function(e,t,n){var i=0;function r(){}r.prototype.getData=function(t,r,o,s){var a=this;function l(e,i){s&&!function(e){var t=F(4);return t.view.setUint32(0,e),a.crc32==t.view.getUint32(0)}(i)?n("CRC failed."):t.getData(function(e){r(e)})}function c(e){n(e||"Error while reading file data.")}function d(e){n(e||"Error while writing file data.")}e.readUint8Array(a.offset,30,function(r){var u,h=F(r.length,r);1347093252==h.view.getUint32(0)?(ee(a,h,4,!1,n),u=a.offset+30+a.filenameLength+a.extraFieldLength,t.init(function(){0===a.compressionMethod?K(a._worker,i++,e,t,u,a.compressedSize,s,l,o,c,d):function(e,t,n,i,r,o,s,a,l,c,d){var u=s?"output":"none";se.useWebWorkers?q(e,{sn:t,codecClass:"_zipjs_Inflater",crcType:u},n,i,r,o,l,a,c,d):W(new R,n,i,r,o,u,l,a,c,d)}(a._worker,i++,e,t,u,a.compressedSize,s,l,o,c,d)},d)):n(P)},c)};var o={getEntries:function(t){var i=this._worker;!function(t){function i(i,r){e.readUint8Array(e.size-i,i,function(e){for(var n=e.length-22;n>=0;n--)if(80===e[n]&&75===e[n+1]&&5===e[n+2]&&6===e[n+3])return void t(new DataView(e.buffer,n,22));r()},function(){n(B)})}e.size<22?n(P):i(22,function(){i(Math.min(65558,e.size),function(){n(P)})})}(function(o){var s,a;s=o.getUint32(16,!0),a=o.getUint16(8,!0),s<0||s>=e.size?n(P):e.readUint8Array(s,e.size-s,function(e){var o,s,l,c,d=0,u=[],h=F(e.length,e);for(o=0;o<a;o++){if((s=new r)._worker=i,1347092738!=h.view.getUint32(d))return void n(P);ee(s,h,d+6,!0,n),s.commentLength=h.view.getUint16(d+32,!0),s.directory=!(16&~h.view.getUint8(d+38)),s.offset=h.view.getUint32(d+42,!0),l=J(h.array.subarray(d+46,d+46+s.filenameLength)),s.filename=2048&~s.bitFlag?Z(l):X(l),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),c=J(h.array.subarray(d+46+s.filenameLength+s.extraFieldLength,d+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048&~s.bitFlag?Z(c):X(c),u.push(s),d+=46+s.filenameLength+s.extraFieldLength+s.commentLength}t(u)},function(){n(B)})})},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};se.useWebWorkers?re("inflater",function(e){o._worker=e,t(o)},function(e){n(e)}):t(o)}(e,t,n)},n=n||oe)},createWriter:function(e,t,n,i){i=!!i,e.init(function(){!function(e,t,n,i){var r={},o=[],s=0,a=0;function l(e){n(e||"Error while writing zip file.")}function c(e){n(e||"Error while reading file data.")}var d={add:function(t,d,u,h,p){var m,f,g,v=this._worker;function b(t,n){var i=F(16);s+=t||0,i.view.setUint32(0,1347094280),void 0!==n&&(m.view.setUint32(10,n,!0),i.view.setUint32(4,n,!0)),d&&(i.view.setUint32(8,t,!0),m.view.setUint32(14,t,!0),i.view.setUint32(12,d.size,!0),m.view.setUint32(18,d.size,!0)),e.writeUint8Array(i.array,function(){s+=16,u()},l)}function A(){var u;p=p||{},t=t.trim(),p.directory&&"/"!=t.charAt(t.length-1)&&(t+="/"),r.hasOwnProperty(t)?n("File already exists."):(f=ne(te(t)),o.push(t),g=p.lastModDate||new Date,m=F(26),r[t]={headerArray:m.array,directory:p.directory,filename:f,offset:s,comment:ne(te(p.comment||""))},m.view.setUint32(0,335546376),p.version&&m.view.setUint8(0,p.version),i||0===p.level||p.directory||m.view.setUint16(4,2048),m.view.setUint16(6,(g.getHours()<<6|g.getMinutes())<<5|g.getSeconds()/2,!0),m.view.setUint16(8,(g.getFullYear()-1980<<4|g.getMonth()+1)<<5|g.getDate(),!0),m.view.setUint16(22,f.length,!0),(u=F(30+f.length)).view.setUint32(0,1347093252),u.array.set(m.array,4),u.array.set(f,30),s+=u.array.length,e.writeUint8Array(u.array,function(){d?i||0===p.level?K(v,a++,d,e,0,d.size,!0,b,h,c,l):function(e,t,n,i,r,o,s,a,l){var c="input";se.useWebWorkers?q(e,{sn:t,options:{level:r},codecClass:"_zipjs_Deflater",crcType:c},n,i,0,n.size,s,o,a,l):W(new y,n,i,0,n.size,c,s,o,a,l)}(v,a++,d,e,p.level,b,h,c,l):b()},l))}d?d.init(A,c):A()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,i,a,c=0,d=0;for(i=0;i<o.length;i++)c+=46+(a=r[o[i]]).filename.length+a.comment.length;for(n=F(c+22),i=0;i<o.length;i++)a=r[o[i]],n.view.setUint32(d,1347092738),n.view.setUint16(d+4,5120),n.array.set(a.headerArray,d+6),n.view.setUint16(d+32,a.comment.length,!0),a.directory&&n.view.setUint8(d+38,16),n.view.setUint32(d+42,a.offset,!0),n.array.set(a.filename,d+46),n.array.set(a.comment,d+46+a.filename.length),d+=46+a.filename.length+a.comment.length;n.view.setUint32(d,1347093766),n.view.setUint16(d+8,o.length,!0),n.view.setUint16(d+10,o.length,!0),n.view.setUint32(d+12,c,!0),n.view.setUint32(d+16,s,!0),e.writeUint8Array(n.array,function(){e.getData(t)},l)},_worker:null};se.useWebWorkers?re("deflater",function(e){d._worker=e,t(d)},function(e){n(e)}):t(d)}(e,t,n,i)},n=n||oe)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null};var ae,le,ce=se.TextWriter,de=se.BlobWriter,ue=se.Data64URIWriter,he=se.TextReader,pe=se.BlobReader,me=se.Data64URIReader,fe=se.createReader,ge=se.createWriter;function ve(e){var t,n=this;n.size=0,n.init=function(t){n.size=e.uncompressedSize,t()},n.readUint8Array=function(i,r,o,s){!function(i){n.data?i():e.getData(new de,function(e){n.data=e,t=new pe(e),i()},null,n.checkCrc32)}(function(){t.readUint8Array(i,r,o,s)})}}function ye(e){var t=0;return function e(n){t+=n.uncompressedSize||0,n.children.forEach(e)}(e),t}function be(e,t,n){var i=0;function r(){++i<e.children.length?o(e.children[i]):t()}function o(e){e.directory?be(e,r,n):(e.reader=new e.Reader(e.data,n),e.reader.init(function(){e.uncompressedSize=e.reader.size,r()}))}e.children.length?o(e.children[i]):t()}function Ae(e){var t=e.parent.children;t.forEach(function(n,i){n.id==e.id&&t.splice(i,1)})}function _e(e){e.entries=[],e.root=new Ee(e)}function we(e,t,n,i){if(e.directory)return i?new Ee(e.fs,t,n,e):new Ce(e.fs,t,n,e);throw"Parent entry is not a directory."}function xe(){}function Ce(e,t,n,i){var r=this;xe.prototype.init.call(r,e,t,n,i),r.Reader=n.Reader,r.Writer=n.Writer,r.data=n.data,n.getData&&(r.getData=n.getData)}function Ee(e,t,n,i){xe.prototype.init.call(this,e,t,n,i),this.directory=!0}function Me(){_e(this)}(ve.prototype=new(0,se.Reader)).constructor=ve,ve.prototype.checkCrc32=!1,(xe.prototype={init:function(e,t,n,i){var r=this;if(e.root&&i&&i.getChildByName(t))throw"Entry filename already exists.";n||(n={}),r.fs=e,r.name=t,r.id=e.entries.length,r.parent=i,r.children=[],r.zipVersion=n.zipVersion||20,r.uncompressedSize=0,e.entries.push(r),i&&r.parent.children.push(r)},getFileEntry:function(e,t,n,i,r){var o=this;be(o,function(){!function(e,t,n,i,r,o,s){var a=0;t.directory?function e(t,n,i,r,o,l){var c=0;!function d(){var u=n.children[c];u?function(n){function i(t){a+=n.uncompressedSize||0,e(t,n,function(){c++,d()},r,o,l)}n.directory?t.getDirectory(n.name,{create:!0},i,o):t.getFile(n.name,{create:!0},function(e){n.getData(new se.FileWriter(e,se.getMimeType(n.name)),i,function(e){r&&r(a+e,l)},s)},o)}(u):i()}()}(e,t,n,i,r,o):t.getData(new se.FileWriter(e,se.getMimeType(t.name)),n,i,s)}(e,o,t,n,i,ye(o),r)},i)},moveTo:function(e){var t=this;if(!e.directory)throw"Target entry is not a directory.";if(e.isDescendantOf(t))throw"Entry is a ancestor of target entry.";if(t!=e){if(e.getChildByName(t.name))throw"Entry filename already exists.";Ae(t),t.parent=e,e.children.push(t)}},getFullname:function(){for(var e=this.name,t=this.parent;t;)e=(t.name?t.name+"/":"")+e,t=t.parent;return e},isDescendantOf:function(e){for(var t=this.parent;t&&t.id!=e.id;)t=t.parent;return!!t}}).constructor=xe,Ce.prototype=ae=new xe,ae.constructor=Ce,ae.getData=function(e,t,n,i){var r=this;!e||e.constructor==r.Writer&&r.data?t(r.data):(r.reader||(r.reader=new r.Reader(r.data,i)),r.reader.init(function(){e.init(function(){!function(e,t,n,i,r){var o=0;!function s(){var a=524288*o;i&&i(a,e.size),a<e.size?e.readUint8Array(a,Math.min(524288,e.size-a),function(e){t.writeUint8Array(new Uint8Array(e),function(){o++,s()})},r):t.getData(n)}()}(r.reader,e,t,n,i)},i)}))},ae.getText=function(e,t,n,i){this.getData(new ce(i),e,t,n)},ae.getBlob=function(e,t,n,i){this.getData(new de(e),t,n,i)},ae.getData64URI=function(e,t,n,i){this.getData(new ue(e),t,n,i)},Ee.prototype=le=new xe,le.constructor=Ee,le.addDirectory=function(e){return we(this,e,null,!0)},le.addText=function(e,t){return we(this,e,{data:t,Reader:he,Writer:ce})},le.addBlob=function(e,t){return we(this,e,{data:t,Reader:pe,Writer:de})},le.addData64URI=function(e,t){return we(this,e,{data:t,Reader:me,Writer:ue})},le.addFileEntry=function(e,t,n){!function(e,t,n,i){t.isDirectory?function e(t,n,r){!function(e,t){e.isDirectory&&e.createReader().readEntries(t),e.isFile&&t([])}(n,function(n){var o=0;!function s(){var a=n[o];a?function(n){function r(t){e(t,n,function(){o++,s()})}n.isDirectory&&r(t.addDirectory(n.name)),n.isFile&&n.file(function(e){var i=t.addBlob(n.name,e);i.uncompressedSize=e.size,r(i)},i)}(a):r()}()})}(e,t,n):t.file(function(i){e.addBlob(t.name,i),n()},i)}(this,e,t,n)},le.addData=function(e,t){return we(this,e,t)},le.importBlob=function(e,t,n){this.importZip(new pe(e),t,n)},le.importText=function(e,t,n){this.importZip(new he(e),t,n)},le.importData64URI=function(e,t,n){this.importZip(new me(e),t,n)},le.exportBlob=function(e,t,n){this.exportZip(new de("application/zip"),e,t,n)},le.exportText=function(e,t,n){this.exportZip(new ce,e,t,n)},le.exportFileEntry=function(e,t,n,i){this.exportZip(new se.FileWriter(e,"application/zip"),t,n,i)},le.exportData64URI=function(e,t,n){this.exportZip(new ue("application/zip"),e,t,n)},le.importZip=function(e,t,n){var i=this;fe(e,function(e){e.getEntries(function(e){e.forEach(function(e){var t=i,n=e.filename.split("/"),r=n.pop();n.forEach(function(e){t=t.getChildByName(e)||new Ee(i.fs,e,null,t)}),e.directory||we(t,r,{data:e,Reader:ve})}),t()})},n)},le.exportZip=function(e,t,n,i){var r=this;be(r,function(){ge(e,function(e){!function(e,t,n,i,r){var o=0;!function e(t,n,i,r,s){var a=0;!function l(){var c=n.children[a];c?t.add(c.getFullname(),c.reader,function(){o+=c.uncompressedSize||0,e(t,c,function(){a++,l()},r,s)},function(e){r&&r(o+e,s)},{directory:c.directory,version:c.zipVersion}):i()}()}(e,t,n,i,r)}(e,r,function(){e.close(t)},n,ye(r))},i)},i)},le.getChildByName=function(e){var t,n;for(t=0;t<this.children.length;t++)if((n=this.children[t]).name==e)return n},Me.prototype={remove:function(e){Ae(e),this.entries[e.id]=null},find:function(e){var t,n=e.split("/"),i=this.root;for(t=0;i&&t<n.length;t++)i=i.getChildByName(n[t]);return i},getById:function(e){return this.entries[e]},importBlob:function(e,t,n){_e(this),this.root.importBlob(e,t,n)},importText:function(e,t,n){_e(this),this.root.importText(e,t,n)},importData64URI:function(e,t,n){_e(this),this.root.importData64URI(e,t,n)},exportBlob:function(e,t,n){this.root.exportBlob(e,t,n)},exportText:function(e,t,n){this.root.exportText(e,t,n)},exportFileEntry:function(e,t,n,i){this.root.exportFileEntry(e,t,n,i)},exportData64URI:function(e,t,n){this.root.exportData64URI(e,t,n)}},se.getMimeType=function(){return"application/octet-stream"};var Se={FS:Me,ZipDirectoryEntry:Ee,ZipFileEntry:Ce};se.useWebWorkers=!1;var Te=function(){function e(e,t){this.el=e,this.inputEl=t,this.listeners={drop:[],dropstart:[],droperror:[]},this._onDragover=this._onDragover.bind(this),this._onDrop=this._onDrop.bind(this),this._onSelect=this._onSelect.bind(this),e.addEventListener("dragover",this._onDragover,!1),e.addEventListener("drop",this._onDrop,!1),t.addEventListener("change",this._onSelect)}var t=e.prototype;return t.on=function(e,t){return this.listeners[e].push(t),this},t._emit=function(e,t){return this.listeners[e].forEach(function(e){return e(t)}),this},t.destroy=function(){var e=this.el,t=this.inputEl;e.removeEventListener("dragover",this._onDragover,!1),e.removeEventListener("drop",this._onDrop,!1),t.removeEventListener("change",this._onSelect),delete this.el,delete this.inputEl,delete this.listeners},t._onDrop=function(e){e.stopPropagation(),e.preventDefault(),this._emit("dropstart");var t=Array.from(e.dataTransfer.files||[]),n=Array.from(e.dataTransfer.items||[]);if(0!==t.length||0!==n.length)if(n.length>0){var i=n.map(function(e){return e.webkitGetAsEntry()}).filter(function(e){return null!==e});i.length>0&&(i[0].name.match(/\.zip$/)?this._loadZip(n[0].getAsFile()):this._loadNextEntry(new Map,i))}else 1===t.length&&t[0].name.match(/\.zip$/)&&this._loadZip(t[0]),this._emit("drop",{files:new Map(t.map(function(e){return[e.name,e]}))});else this._fail("Required drag-and-drop APIs are not supported in this browser.")},t._onDragover=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},t._onSelect=function(e){this._emit("dropstart");var t=[].slice.call(this.inputEl.files);if(1===t.length&&this._isZip(t[0]))this._loadZip(t[0]);else{var n=new Map;t.forEach(function(e){return n.set(e.webkitRelativePath||e.name,e)}),this._emit("drop",{files:n})}},t._loadNextEntry=function(e,t){var n=this,i=t.pop();if(i)if(i.isFile)i.file(function(r){e.set(i.fullPath,r),n._loadNextEntry(e,t)},function(){return console.error("Could not load file: %s",i.fullPath)});else if(i.isDirectory){var r=i.createReader();r.readEntries(function i(o){o.length?(t=t.concat(o),r.readEntries(i)):n._loadNextEntry(e,t)})}else console.warn("Unknown asset type: "+i.fullPath),this._loadNextEntry(e,t);else this._emit("drop",{files:e})},t._loadZip=function(e){var t=this,n=[],i=new Map,r=new Se.FS,o=function e(t){t.directory?t.children.forEach(e):"."!==t.name[0]&&n.push(new Promise(function(e){t.getData(new se.BlobWriter,function(n){n.name=t.name,i.set(t.getFullname(),n),e()})}))};r.importBlob(e,function(){o(r.root),Promise.all(n).then(function(){t._emit("drop",{files:i,archive:e})})})},t._isZip=function(e){return"application/zip"===e.type||e.name.match(/\.zip$/)},t._fail=function(e){this._emit("droperror",{message:e})},e}();function ke(e){return"/"===e.charAt(0)}function Le(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}const De=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],r=t&&t.split("/")||[],o=e&&ke(e),s=t&&ke(t),a=o||s;if(e&&ke(e)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";if(r.length){var l=r[r.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,d=r.length;d>=0;d--){var u=r[d];"."===u?Le(r,d):".."===u?(Le(r,d),c++):c&&(Le(r,d),c--)}if(!a)for(;c--;c)r.unshift("..");!a||""===r[0]||r[0]&&ke(r[0])||r.unshift("");var h=r.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};var Ie=n(3423),Re=n(2722);const Oe=function(e){if(e.elements){const t={},n=[];e.elements.forEach(e=>{Oe(e),"element"===e.type&&e.name?t[e.name]=e:"text"===e.type&&n.push(e.text)}),e.dict=t,e.texts=n}return e},Pe=function(e){return e.replace(/^[^:]+:/,"")};class Be{constructor(e){this.rootUrl=e||window.location.href}set rootUrl(e){this._rootUrl=e,this._rootPath=new URL(e).pathname,this._rootPath.endsWith("/")||(this._rootPath=this._rootPath.split("/").slice(0,-1).join("/")+"/")}get rootUrl(){return this._rootUrl}get rootPath(){return this._rootPath}get(e,t){e="object"==typeof e?e.path:e;const n=De(e,this.rootUrl),i={headers:{"Content-Type":"text/xml"},method:"PROPFIND"};t||(i.headers.Depth="1");const r=new AbortController,o=setTimeout(()=>r.abort(),8e3);return i.signal=r.signal,fetch(n,i).then(e=>{if(!e.ok)throw new Error(`failed to get content: ${e.status} ${e.statusText}`);return clearTimeout(o),e.text()}).then(e=>Re.xml2js(e,{elementNameFn:Pe})).then(e=>Oe(e.elements[0])).then(e=>this.parseMultistatus(e))}create(e,t){e="object"==typeof e?e.path:e;let n=De(e,this.rootUrl);n=De(t,n);return fetch(n,{headers:{"Content-Type":"text/xml"},method:"MKCOL"}).then(e=>{if(!e.ok)throw new Error(`failed to create folder: ${e.status} ${e.statusText}`)})}delete(e){e="object"==typeof e?e.path:e;const t=De(e,this.rootUrl);return fetch(t,{headers:{"Content-Type":"text/xml"},method:"DELETE"}).then(e=>{if(!e.ok)throw new Error(`failed to delete: ${e.status} ${e.statusText}`)})}rename(e,t){const n=(e="object"==typeof e?e.path:e).split("/");n.pop();const i=n.join("/")+"/"+t;return this.move(e,i)}move(e,t){e="object"==typeof e?e.path:e,t="object"==typeof t?t.path:t;const n={headers:{"Content-Type":"text/xml",Destination:encodeURI(De(t,this.rootUrl)),Overwrite:"F"},method:"MOVE"},i=encodeURI(De(e,this.rootUrl));return fetch(i,n).then(e=>{if(!e.ok)throw new Error(`failed to move/rename: ${e.status} ${e.statusText}`)})}exists(e){return this.get(e,!1).then(()=>!0).catch(()=>!1)}parseMultistatus(e){return"multistatus"!==e.name?null:e.elements.filter(e=>"response"===e.name).map(e=>this.parseResponse(e))}parseResponse(e){const t=e.dict.propstat.dict.prop,n=t.dict.resourcetype,i=!(!n||!n.elements)&&!!n.dict.collection,r=t.dict.getcontentlength,o=t.dict.getcontenttype,s={url:decodeURI(e.dict.href.elements[0].text),name:decodeURI(t.dict.displayname.elements?t.dict.displayname.elements[0].text:""),created:t.dict.creationdate.elements[0].text,modified:t.dict.getlastmodified.elements[0].text,folder:i,size:r?r.elements[0].text:0,type:o?o.elements[0].text:""};let a=new URL(s.url,this._rootUrl).pathname;const l=a.indexOf(this._rootPath);return l>=0&&(a=a.substr(l+this._rootPath.length)),s.path=a,s}}class Ne extends Ie.Ay{constructor(e,t){super(e,t),this._provider=null,this._assetsByPath={},this._rootAsset=null,this._selection=new Set,this._provider=new Be}get root(){return this._rootAsset}set root(e){this._rootAsset=e}get rootPath(){return this._provider.rootPath}get rootUrl(){return this._provider.rootUrl}set rootUrl(e){this._provider.rootUrl=e,this.refresh().then(()=>this.rootUrlChanged())}get selectedAssets(){return Array.from(this._selection.values())}uploadFiles(e,t){const n=Array.from(e).map(e=>{const n=De(t.info.path+e.name,this.rootUrl);return fetch(n,{method:"PUT",credentials:"include",body:e})});return Promise.all(n).then(()=>this.refresh())}createFolder(e,t){return this._provider.create(e.info,t).then(()=>this.refresh())}rename(e,t){return this._provider.rename(e.info,t).then(()=>this.refresh())}exists(e){return this._provider.exists("object"==typeof e?e.info:e)}open(e){this.emit({type:"asset-open",asset:e})}delete(e){return this._provider.delete(e.info).then(()=>this.refresh())}deleteSelected(){const e=Array.from(this._selection.values()).map(e=>this._provider.delete(e.info));return Promise.all(e).then(()=>this.refresh())}moveSelected(e){const t=Array.from(this._selection.values()).map(t=>this._provider.move(t.info,e.info.path+t.info.name));return Promise.all(t).then(()=>this.refresh())}select(e,t){const n=this._selection;t&&n.has(e)?n.delete(e):(t||n.clear(),e&&n.add(e)),this.emit({type:"tree-change",root:this._rootAsset})}isSelected(e){return this._selection.has(e)}getAssetURL(e){return De(e,this.rootUrl)}getAssetByPath(e){return this._assetsByPath[e]}refresh(){return this._provider.get(".",!0).then(e=>{this._rootAsset=this.createAssetTree(e),this.emit({type:"tree-change",root:this._rootAsset})})}rootUrlChanged(){return Promise.resolve()}createAssetTree(e){e.sort((e,t)=>e.url<t.url?-1:e.url>t.url?1:0);const t={info:e[0],expanded:!0,children:[]};for(let n=1,i=e.length;n<i;++n){const i=e[n],r=i.path.split("/").filter(e=>!!e);let o=t;for(let e=0,t=r.length;e<t;++e){const n=r[e];if(e<t-1){if(o=o.children.find(e=>e.info.name===n),!o)break}else{const e={info:i,expanded:!0,children:[]};this._assetsByPath[decodeURI(i.path)]=e,o.children.push(e)}}}return t}}Ne.typeName="CAssetManager",Ne.isGraphSingleton=!0;var Ue=n(6773),Fe=n(161),ze=n(2902),He=n(5240);class je extends Ie.Ay{get documentProvider(){return this.getMainComponent(ze.A)}get selection(){return this.getMainComponent(He.A)}get assetManager(){return this.getMainComponent(Fe.A)}get mediaManager(){return this.system.getMainComponent(Xe)}constructor(e,t){super(e,t),this.runtimeURLs=[],this.fileMap={},this.rootMap={}}create(){super.create(),this.assetManager.outs.completed.on("value",this.cleanupFiles,this),this.fileMap["/"]=null,this.fileMap["articles/"]=null,this.mediaManager.refresh(),this.assetManager.loadingManager.setURLModifier(e=>{const t=(e=decodeURI(e)).lastIndexOf("/"),n=e.substr(t+1).replace(/^(\.?\/)/,""),i=this.rootMap[n]+n,r=i.startsWith("/")?i.substr(1):i;if(this.runtimeURLs[r])return this.runtimeURLs[r];if(this.fileMap[r]){const e=this.fileMap[r]?URL.createObjectURL(this.fileMap[r]):r;return this.runtimeURLs[r]=e,e}return e})}dispose(){this.assetManager.outs.completed.off("value",this.cleanupFiles,this),super.dispose()}getFile(e){return e in this.fileMap?this.fileMap[e]:null}getFiles(){return Object.keys(this.fileMap).map(e=>this.fileMap[e])}getFilePath(e){return this.rootMap[e]}addFile(e,t=[]){const n=e.split("/").filter(e=>!!e);let i="";for(let e=0,t=n.length-1;e<t;e++)i=i.concat(n[e],"/"),this.fileMap[i]=null;const r=e.lastIndexOf("/"),o=r>-1?e.substr(r+1):e,s=e.replace(o,""),a=e.startsWith("/")?e.substr(1):e;this.rootMap[o]=s,this.fileMap[a]=t[0]?new File(t,o):null,this.runtimeURLs[a]&&(this.runtimeURLs[a]=null),this.mediaManager.refresh()}deleteFile(e){delete this.fileMap[e]}renameFile(e,t){const n=this.fileMap[e],i=e.replace(n.name,t);this.addFile(i,[n]),delete this.fileMap[e]}getFileInfos(){return Object.keys(this.fileMap).map(e=>this.createFileInfo(e,this.fileMap[e]))}blobUrlToFileUrl(e){const t=this.runtimeURLs;return Object.keys(t).find(n=>t[n]===e)}reload(){this.cleanupFiles(),this.runtimeURLs.length=0,this.fileMap={},this.rootMap={},this.fileMap["/"]=null,this.fileMap["articles/"]=null,this.mediaManager.refresh()}cleanupFiles(){this.runtimeURLs.forEach(e=>URL.revokeObjectURL(e))}createFileInfo(e,t){const n=t?t.name:e.split("/").filter(e=>!!e).pop()||"",i=n.toLowerCase(),r={url:e,name:t?t.name:n,folder:null===t,size:t?t.size:0};return i.match(/\.(html)$/)?r.type="text/html":i.match(/\.(jpg|jpeg)$/)?r.type="image/jpeg":i.match(/\.(png)$/)?r.type="image/png":r.type="",r.path=e,r}}je.typeName="CVStandaloneFileManager",je.isSystemSingleton=!0;var Ve,Ye=n(3818),Ge=n(9498),Qe=(n(9264),n(7297)),$e=n(9616),qe=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let We=Ve=class extends Ye.Ay{static show(e,t,n){const i=new Ve(t,n);return e.appendChild(i),new Promise((e,t)=>{i.on("confirm",()=>e([i.qualitySelection,i.parentSelection.name])),i.on("close",()=>t())})}constructor(e,t){super(),this.language=null,this.filename="",this.errorString="",this.modelOptions=[],this.qualitySelection=null,this.parentSelection=null,this.language=e,this.filename=t,this.modelOptions=this.modelOptions.concat(e.getGraphComponents($e.A).map(e=>({name:e.node.name,id:e.id}))),this.position="center",this.modal=!0,this.parentSelection=this.modelOptions.length>0?this.modelOptions[0]:{name:"Model"+this.modelOptions.length.toString(),id:"-1"},this.url=window.location.href}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}confirm(){null===this.qualitySelection?(this.errorString=this.language.getUILocalizedString("Please select derivative quality."),this.requestUpdate()):(this.dispatchEvent(new CustomEvent("confirm")),this.remove())}firstConnected(){super.firstConnected(),this.classList.add("sv-option-menu","sv-import-menu")}renderQualityEntry(e,t){return Ye.qy`<div class="sv-entry" @click=${e=>this.onClickQuality(e,t)} ?selected=${e===this.qualitySelection}>
            ${Qe.a9[e]}
        </div>`}renderParentEntry(e,t){return Ye.qy`<div class="sv-entry" @click=${e=>this.onClickParent(e,t)} ?selected=${e===this.parentSelection.name}>
            ${e}
        </div>`}render(){const e=this.language;return Ye.qy`
        <div>
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-title">${e.getUILocalizedString("File:")} <i>${this.filename}</i></div>
                    <ff-button icon="close" transparent class="ff-close-button" title=${e.getUILocalizedString("Close")} @click=${this.close}></ff-button>
                </div>
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-header">${e.getUILocalizedString("Select Derivative Quality:")}</div>
                </div>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    <div class="ff-scroll-y">
                        ${Object.keys(Qe.a9).filter(e=>"number"==typeof Qe.a9[e]).map((e,t)=>this.renderQualityEntry(Qe.a9[e],t))}
                    </div>
                </div>
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-header">${e.getUILocalizedString("Select Model:")}</div>
                </div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    ${this.modelOptions.length>0?Ye.qy`<div class="ff-scroll-y">
                        ${this.modelOptions.map((e,t)=>this.renderParentEntry(e.name,t))}
                    </div>`:Ye.qy`<div class="ff-flex-row sv-centered sv-notification" style="height:100%; align-items:center">${e.getUILocalizedString("No Models In Scene")}</div>`}
                </div>
                <div class="sv-entry" @click=${e=>this.onClickParent(e,-1)} ?selected=${"-1"===this.parentSelection.id}>
                    <div class="ff-flex-row">
                        <label class="ff-label ff-off">${e.getUILocalizedString("Add New Model")}:</label>
                        <div class="ff-flex-spacer"></div>
                        <input id="modelName" tabindex="0" class="ff-property-field ff-input" @change=${this.onNameChange} value=${"Model"+this.modelOptions.length.toString()} touch-action="none" style="touch-action: none;" title="Parent.Name [string]"><div class="ff-fullsize ff-off ff-content"></div></input>
                    </div>
                </div>
                <div class="ff-flex-row sv-centered">
                    <ff-button icon="upload" class="ff-button ff-control" text=${e.getUILocalizedString("Import Model")} title=${e.getUILocalizedString("Import Model")} @click=${this.confirm}></ff-button>
                </div>
                <div class="ff-flex-row sv-centered sv-import-error-msg">
                    <div>${this.errorString}</div>
                </div>
            </div>
        </div>
        `}onClickQuality(e,t){e.stopPropagation(),this.qualitySelection=Qe.a9[Qe.a9[t]],this.requestUpdate()}onClickParent(e,t){e.stopPropagation(),this.parentSelection=this.modelOptions[t]||{name:this.querySelector("#modelName").value,id:"-1"},this.requestUpdate()}onNameChange(){this.parentSelection.name=this.querySelector("#modelName").value}};We=Ve=qe([(0,Ye.EM)("sv-import-menu")],We);const Ke=We;var Ze=n(8313);class Xe extends Ne{get standaloneFileManager(){return this.getGraphComponent(je,!0)}get assetManager(){return this.system.getMainComponent(Fe.A)}get metas(){return this.system.getComponents(Ze.A)}create(){super.create(),this.assetManager.ins.baseUrlValid.on("value",this.refreshRoot,this)}dispose(){this.assetManager.ins.baseUrlValid.off("value",this.refreshRoot,this),super.dispose()}rootUrlChanged(){return this.assetManager.ins.baseUrlValid.value&&!this.standaloneFileManager?this.createArticleFolder():Promise.resolve()}createArticleFolder(){const e=Xe.articleFolder;return this.exists(e).then(t=>{if(!t){const t=this.root,n=`folder '${e}' in '${t.info.path}.'`;return this.createFolder(t,e).then(()=>Ue.Ay.show(`Created ${n}'`)).catch(e=>Ue.Ay.show(`Failed to create ${n}`))}})}getAssetURL(e){return this.assetManager.getAssetUrl(De(e,this.rootUrl))}uploadFile(e,t,n){const i=decodeURI(e),r=n.info.path.length>1?n.info.path+i:i,o=De(r,this.rootUrl);if(this.standaloneFileManager)return this.standaloneFileManager.addFile(r,[t]),this.refresh(),Promise.resolve();{const e={method:"PUT",credentials:"include",body:new File([t],i)};return fetch(o,e).then(()=>this.refresh())}}async ingestURI(e){this.ingestFiles(new Map([[e,null]]))}ingestFiles(e){const t=Array.from(e),n=t.findIndex(e=>e[0].toLowerCase().indexOf(".svx.json")>-1),i=n>-1;i&&(t.push(t.splice(n,1)[0]),this.standaloneFileManager&&this.standaloneFileManager.reload());const r=i?t[t.length-1][0].slice(0,t[t.length-1][0].lastIndexOf("/")):"";t.forEach(([e,n])=>{const o=decodeURI(e).slice(e.lastIndexOf("/")+1),s=o.toLowerCase();if(s.match(/\.(gltf|glb|bin|json|html|jpg|jpeg|png|usdz|mp3|vtt)$/)){i||!s.match(/\.(jpg|jpeg|png)$/)||t.some(e=>e[0].endsWith("gltf"))||(e=Xe.articleFolder+"/"+o);let a=i?e.replace(r,""):e;if(a=a.startsWith("/")?a.substr(1):a,s.match(/\.(json)$/)){const e=document.getElementsByTagName("voyager-explorer")[0].application;this.uploadFile(a,n,this.root).then(()=>{e.loadDocument(a).then(()=>this.getMainComponent(ze.A).refreshDocument())})}else!i&&s.match(/\.(gltf|glb)$/)?this.uploadFile(a,n,this.root).then(()=>this.handleModelImport(a)):this.uploadFile(a,n,this.root)}else new Ue.Ay(`Unhandled file: '${o}'`,"warning",4e3)})}handleModelImport(e){const t=document.getElementsByTagName("voyager-story")[0],n=this.getMainComponent(ze.A).activeComponent,i=e.substr(e.lastIndexOf("/")+1),r=this.getMainComponent(He.A);Ke.show(t,n.setup.language,i).then(([t,i])=>{this.assetManager.initialLoad=!0;const o=this.getSystemComponents($e.A).find(e=>e.node.name===i);if(void 0===o){const o=n.appendModel(e,t),s=i;o.node.name=s,o.ins.name.setValue(s),o.ins.quality.setValue(t),o.once("model-load",()=>r.selectNode(o.node),this)}else o.derivatives.remove(Qe.UH.Web3D,t),o.derivatives.createModelAsset(e,t),o.ins.quality.setValue(t),o.outs.updated.set(),r.selectNode(o.node)}).catch(e=>{})}uploadFiles(e,t){if(!this.standaloneFileManager)return super.uploadFiles(e,t)}refresh(){const e=this.standaloneFileManager;if(e){const t=e.getFileInfos();return this.root=this.createAssetTree(t),this.emit({type:"tree-change",root:this.root}),Promise.resolve()}return this.assetManager.ins.baseUrlValid.value?super.refresh():Promise.resolve()}rename(e,t){if(t.split(".").length<=1)return Ue.Ay.show("New name must include file extension","error"),Promise.reject();const n=e.info.path.split("/");n.pop();const i=n.join("/")+"/"+t,r=this.standaloneFileManager;return r?(r.renameFile(e.info.url,t),this.refresh().then(()=>this.postRenameHandler(e.info.path,i))):super.rename(e,t).then(()=>this.postRenameHandler(e.info.path,i))}postRenameHandler(e,t){this.metas.forEach(n=>{const i=n.articles.items.find(t=>t.uri===e);void 0!==i&&(i.uri=t)}),this.emit({type:"asset-rename",oldPath:e,newPath:t})}delete(e){const t=this.standaloneFileManager;return t?(t.deleteFile(e.info.url),this.refresh()):super.delete(e)}deleteSelected(){const e=this.standaloneFileManager;if(e){return this.selectedAssets.forEach(t=>e.deleteFile(t.info.url)),this.refresh()}return super.deleteSelected()}refreshRoot(){this.assetManager.ins.baseUrlValid.value&&this.refresh().then(()=>this.rootUrlChanged())}getUniqueName(e){let t=e.split("/").pop();const n=this.standaloneFileManager;return(n?n.getFile(e):this.getAssetByPath(e))&&(t=Date.now()+"_"+t),t}}Xe.typeName="CVMediaManager",Xe.articleFolder="articles";var Je=n(5940);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,n){const i=Number(0xffffffffn&t),r=Number(t>>32n);this.setUint32(e+(n?0:4),i,n),this.setUint32(e+(n?4:0),r,n)}});var et=e=>new DataView(new ArrayBuffer(e)),tt=e=>new Uint8Array(e.buffer||e),nt=e=>(new TextEncoder).encode(String(e)),it=e=>Math.min(4294967295,Number(e)),rt=e=>Math.min(65535,Number(e));function ot(e,t,n){void 0===t||t instanceof Date||(t=new Date(t));const i=void 0!==e;if(n||(n=i?436:509),e instanceof File)return{isFile:i,t:t||new Date(e.lastModified),bytes:e.stream(),mode:n};if(e instanceof Response)return{isFile:i,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),bytes:e.body,mode:n};if(void 0===t)t=new Date;else if(isNaN(t))throw new Error("Invalid modification date.");if(!i)return{isFile:i,t,mode:n};if("string"==typeof e)return{isFile:i,t,bytes:nt(e),mode:n};if(e instanceof Blob)return{isFile:i,t,bytes:e.stream(),mode:n};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:i,t,bytes:e,mode:n};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:i,t,bytes:tt(e),mode:n};if(Symbol.asyncIterator in e)return{isFile:i,t,bytes:st(e[Symbol.asyncIterator]()),mode:n};throw new TypeError("Unsupported input format.")}function st(e,t=e){return new ReadableStream({async pull(t){let n=0;for(;t.desiredSize>n;){const i=await e.next();if(!i.value){t.close();break}{const e=at(i.value);t.enqueue(e),n+=e.byteLength}}},cancel(e){t.throw?.(e)}})}function at(e){return"string"==typeof e?nt(e):e instanceof Uint8Array?e:tt(e)}function lt(e,t,n){let[i,r]=function(e){return e?e instanceof Uint8Array?[e,1]:ArrayBuffer.isView(e)||e instanceof ArrayBuffer?[tt(e),1]:[nt(e),0]:[void 0,0]}(t);if(e instanceof File)return{i:dt(i||nt(e.name)),o:BigInt(e.size),u:r};if(e instanceof Response){const t=e.headers.get("content-disposition"),o=t&&t.match(/;\s*filename\*?\s*=\s*(?:UTF-\d+''|)["']?([^;"'\r\n]*)["']?(?:;|$)/i),s=o&&o[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),a=s&&decodeURIComponent(s),l=n||+e.headers.get("content-length");return{i:dt(i||nt(a)),o:BigInt(l),u:r}}return i=dt(i,void 0!==e||void 0!==n),"string"==typeof e?{i,o:BigInt(nt(e).length),u:r}:e instanceof Blob?{i,o:BigInt(e.size),u:r}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{i,o:BigInt(e.byteLength),u:r}:{i,o:ct(e,n),u:r}}function ct(e,t){return t>-1?BigInt(t):e?void 0:0n}function dt(e,t=1){if(!e||e.every(e=>47===e))throw new Error("The file must have a name.");if(t)for(;47===e[e.length-1];)e=e.subarray(0,-1);else 47!==e[e.length-1]&&(e=new Uint8Array([...e,47]));return e}var ut=new Uint32Array(256);for(let e=0;e<256;++e){let t=e;for(let e=0;e<8;++e)t=t>>>1^(1&t&&3988292384);ut[e]=t}function ht(e,t=0){t=~t;for(var n=0,i=e.length;n<i;n++)t=t>>>8^ut[255&t^e[n]];return~t>>>0}function pt(e,t,n=0){const i=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,r=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,i,1),t.setUint16(n+2,r,1)}function mt({i:e,u:t},n){return 8*(!t||(n??function(e){try{ft.decode(e)}catch{return 0}return 1}(e)))}var ft=new TextDecoder("utf8",{fatal:1});function gt(e,t=0){const n=et(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|t),pt(e.t,n,10),n.setUint16(26,e.i.length,1),tt(n)}async function*vt(e){let{bytes:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.l=ht(t,0),e.o=BigInt(t.length);else{e.o=0n;const n=t.getReader();for(;;){const{value:t,done:i}=await n.read();if(i)break;e.l=ht(t,e.l),e.o+=BigInt(t.length),yield t}}}function yt(e,t){const n=et(16+(t?8:0));return n.setUint32(0,1347094280),n.setUint32(4,e.isFile?e.l:0,1),t?(n.setBigUint64(8,e.o,1),n.setBigUint64(16,e.o,1)):(n.setUint32(8,it(e.o),1),n.setUint32(12,it(e.o),1)),tt(n)}function bt(e,t,n=0,i=0){const r=et(46);return r.setUint32(0,1347092738),r.setUint32(4,755182848),r.setUint16(8,2048|n),pt(e.t,r,12),r.setUint32(16,e.isFile?e.l:0,1),r.setUint32(20,it(e.o),1),r.setUint32(24,it(e.o),1),r.setUint16(28,e.i.length,1),r.setUint16(30,i,1),r.setUint16(40,e.mode|(e.isFile?32768:16384),1),r.setUint32(42,it(t),1),tt(r)}function At(e,t,n){const i=et(n);return i.setUint16(0,1,1),i.setUint16(2,n-4,1),16&n&&(i.setBigUint64(4,e.o,1),i.setBigUint64(12,e.o,1)),i.setBigUint64(n-8,t,1),tt(i)}function _t(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified,e.mode]]}function wt(e,t={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return("bigint"==typeof t.length||Number.isInteger(t.length))&&t.length>0&&(n["Content-Length"]=String(t.length)),t.metadata&&(n["Content-Length"]=String((e=>function(e){let t=BigInt(22),n=0n,i=0;for(const r of e){if(!r.i)throw new Error("Every file must have a non-empty name.");if(void 0===r.o)throw new Error(`Missing size for file "${(new TextDecoder).decode(r.i)}".`);const e=r.o>=0xffffffffn,o=n>=0xffffffffn;n+=BigInt(46+r.i.length+(e&&8))+r.o,t+=BigInt(r.i.length+46+(12*o|28*e)),i||(i=e)}return(i||n>=0xffffffffn)&&(t+=BigInt(76)),t+n}(function*(e){for(const t of e)yield lt(..._t(t)[0])}(e)))(t.metadata))),new Response(function(e,t={}){const n=function(e){const t=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const e=await t.next();if(e.done)return e;const[n,i]=_t(e.value);return{done:0,value:Object.assign(ot(...i),lt(...n))}},throw:t.throw?.bind(t),[Symbol.asyncIterator](){return this}}}(e);return st(async function*(e,t){const n=[];let i=0n,r=0n,o=0;for await(const s of e){const e=mt(s,t.buffersAreUTF8);yield gt(s,e),yield new Uint8Array(s.i),s.isFile&&(yield*vt(s));const a=s.o>=0xffffffffn,l=12*(i>=0xffffffffn)|28*a;yield yt(s,a),n.push(bt(s,i,e,l)),n.push(s.i),l&&n.push(At(s,i,l)),a&&(i+=8n),r++,i+=BigInt(46+s.i.length)+s.o,o||(o=a)}let s=0n;for(const e of n)yield e,s+=BigInt(e.length);if(o||i>=0xffffffffn){const e=et(76);e.setUint32(0,1347094022),e.setBigUint64(4,BigInt(44),1),e.setUint32(12,755182848),e.setBigUint64(24,r,1),e.setBigUint64(32,r,1),e.setBigUint64(40,s,1),e.setBigUint64(48,i,1),e.setUint32(56,1347094023),e.setBigUint64(64,i+s,1),e.setUint32(72,1,1),yield tt(e)}const a=et(22);a.setUint32(0,1347093766),a.setUint16(8,rt(r),1),a.setUint16(10,rt(r),1),a.setUint32(12,it(s),1),a.setUint32(16,it(i),1),yield tt(a)}(n,t),n)}(e,t),{headers:n})}class xt extends Ie.Ay{constructor(e,t){super(e,t);this.assetManager.loadingManager}get assetManager(){return this.getMainComponent(Fe.A)}get standaloneFileManager(){return this.getGraphComponent(je,!0)}async put(e,t,n){const i=this.standaloneFileManager;if(i)return i.addFile(n,[e]),Promise.resolve();const r=this.assetManager.getAssetUrl(n),o=await fetch(r,{method:"PUT",headers:{Accept:"text/plain","Content-Type":t},body:e});if(!o.ok){const e=await o.text();throw new Error(`Failed to PUT ${t} to ${r}: ${null!=e?e:o.statusText}`)}}async putJSON(e,t){return"string"!=typeof e&&(e=JSON.stringify(e)),await this.put(e,"application/json",t)}async putText(e,t){return await this.put(e,"text/plain",t)}putDocument(e,t,n){const i=e.deflateDocument(t);return this.putJSON(i,n||e.outs.assetPath.value)}}xt.typeName="CVAssetWriter",xt.text="AssetWriter",xt.icon="",xt.isSystemSingleton=!0;var Ct=n(4146),Et=n(3644),Mt=n(3365),St=n(4240),Tt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};class kt extends Mt.A{constructor(){super(...arguments),this.ins=this.addInputs(kt.taskIns),this.outs=this.addOutputs(kt.taskOuts),this._isActiveTask=!1,this.configuration={bracketsVisible:void 0,interfaceVisible:void 0,gridVisible:void 0,annotationsVisible:void 0,lodEnabled:void 0},this._savedConfig={bracketsVisible:void 0,interfaceVisible:void 0,gridVisible:void 0,annotationsVisible:void 0,lodEnabled:void 0}}get selection(){return this.getMainComponent(Et.A)}get isActiveTask(){return this._isActiveTask}dispose(){this._isActiveTask&&this.deactivateTask(),super.dispose()}createView(){throw new Error("must override")}activateTask(){this._isActiveTask=!0,this.outs.isActive.setValue(!0);const e=this.configuration,t=this._savedConfig;if(void 0!==e.bracketsVisible){const n=this.selection.ins.viewportBrackets;t.bracketsVisible=n.value,n.setValue(!!e.bracketsVisible)}}deactivateTask(){const e=this._savedConfig;void 0!==e.bracketsVisible&&this.selection.ins.viewportBrackets.setValue(e.bracketsVisible),this._isActiveTask=!1,this.outs.isActive.setValue(!1)}onActiveDocument(e,t){const n=this.configuration,i=this._savedConfig;if(e&&(void 0!==i.gridVisible&&e.setup.grid.ins.visible.setValue(i.gridVisible),void 0!==i.annotationsVisible&&e.setup.viewer.ins.annotationsVisible.setValue(i.annotationsVisible),void 0!==i.interfaceVisible&&e.setup.interface.ins.visible.setValue(i.interfaceVisible),void 0!==i.axesVisible&&e.setup.grid.ins.axesEnabled.setValue(i.axesVisible),void 0!==i.lodEnabled&&e.setup.derivatives.ins.enabled.setValue(i.lodEnabled)),t){if(void 0!==n.gridVisible){const e=t.setup.grid.ins.visible;i.gridVisible=e.value,e.setValue(!!n.gridVisible)}if(void 0!==n.annotationsVisible){const e=t.setup.viewer.ins.annotationsVisible;i.annotationsVisible=e.value,e.setValue(!!n.annotationsVisible)}if(void 0!==n.interfaceVisible){const e=t.setup.interface.ins.visible;i.interfaceVisible=e.value,e.setValue(!!n.interfaceVisible)}if(void 0!==n.axesVisible){const e=t.setup.grid.ins.axesEnabled;i.axesVisible=e.value,e.setValue(!!n.axesVisible)}if(void 0!==n.lodEnabled){const e=t.setup.derivatives.ins.enabled;i.lodEnabled=e.value,e.setValue(!!n.lodEnabled)}}}}kt.typeName="CVTask",kt.text="Task",kt.icon="fa fa-tasks",kt.taskIns={},kt.taskOuts={isActive:Ie.gK.Boolean("Task.IsActive")};class Lt extends St.Ay{constructor(e){super(e.system),this.task=null,this.task=e}connected(){super.connected(),this.activeDocument.setup.language.outs.uiLanguage.on("value",this.onUpdate,this)}disconnected(){this.activeDocument.setup.language.outs.uiLanguage.off("value",this.onUpdate,this),super.disconnected()}firstConnected(){this.classList.add("sv-task-view")}}Tt([(0,St.MZ)({attribute:!1})],Lt.prototype,"task",void 0);var Dt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let It=class extends Ge.A{constructor(){super(),this.content=null,this.contentParent=this,this.addEventListener("close",()=>this.selected=!1),this.onPointerDown=this.onPointerDown.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}connected(){document.addEventListener("pointerdown",this.onPointerDown,{capture:!0,passive:!0}),document.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0})}disconnected(){document.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("keydown",this.onKeyDown)}update(e){super.update(e),e.has("selected")&&(this.selected?this.showPopup():e.get("selected")&&this.hidePopup())}onPointerDown(e){e.target instanceof Node&&!this.contains(e.target)&&(this.selected=!1)}onKeyDown(e){"Escape"===e.key&&(this.selected=!1)}showPopup(){const e=this.content,t=this.contentParent||this;e&&(t.appendChild(e),setTimeout(()=>e.style.opacity="1.0",0))}hidePopup(){const e=this.content,t=this.contentParent||this;if(e&&e.parentElement===t){this.focus(),e.style.opacity="0";const n=parseFloat(window.getComputedStyle(e).transitionDuration)||0;setTimeout(()=>t.removeChild(e),1e3*n)}}};Dt([(0,t.MZ)({attribute:!1})],It.prototype,"content",void 0),Dt([(0,t.MZ)({attribute:!1})],It.prototype,"contentParent",void 0),It=Dt([(0,t.EM)("ff-popup-button")],It);const Rt=It;var Ot=n(5632),Pt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Bt=class extends Rt{constructor(){super(...arguments),this.color=new Ot.Q,this.alpha=!1,this.numeric=!1,this.popup=null}firstConnected(){super.firstConnected(),this.classList.add("ff-color-button")}showPopup(){const e=new Ot.A;e.color.copy(this.color),e.alpha=this.alpha,e.numeric=this.numeric;const t=this.popup=new Ye.Ay;t.appendElement(e),this.appendElement(t),t.anchor=this,t.keepVisible=!0,t.align="end",t.justify="end",t.position="anchor"}hidePopup(){this.removeChild(this.popup),this.popup=null}update(e){this.style.backgroundColor=this.color.toString(),super.update(e)}};Pt([(0,t.MZ)({attribute:!1})],Bt.prototype,"color",void 0),Pt([(0,t.MZ)({type:Boolean})],Bt.prototype,"alpha",void 0),Pt([(0,t.MZ)({type:Boolean})],Bt.prototype,"numeric",void 0),Bt=Pt([(0,t.EM)("ff-color-button")],Bt);const Nt=Bt;var Ut,Ft=n(8337),zt=(n(9733),function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s});let Ht=Ut=class extends Ye.Ay{constructor(e){super(),this.onClick=this.onClick.bind(this),this.onClose=this.onClose.bind(this),this.addEventListener("click",this.onClick),this.addEventListener("close",this.onClose),this.options=e||[],this.selectionIndex=-1}firstConnected(){super.firstConnected(),this.classList.add("ff-popup-options"),this.setStyle({display:"flex",flexDirection:"column"})}render(){return t.qy`
            ${this.options.map((e,n)=>t.qy`
                <button>${e}</button>
            `)}
        `}updated(){super.updated();const e=this.selectionIndex>=0?this.selectionIndex:0,t=this.children.item(e);t&&t.focus()}onClick(e){const t=this.getChildrenArray().indexOf(e.target);t>=0&&t<this.options.length&&this.dispatchEvent(new CustomEvent(Ut.selectEvent,{detail:{index:t,option:this.options[t]}})),this.remove()}onClose(){this.remove()}};Ht.selectEvent="ff-select",zt([(0,t.MZ)({attribute:!1})],Ht.prototype,"options",void 0),zt([(0,t.MZ)({type:Number})],Ht.prototype,"selectionIndex",void 0),Ht=Ut=zt([(0,t.EM)("ff-popup-options")],Ht);const jt=Ht;var Vt,Yt=n(8428),Gt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Qt=Vt=class extends t.Ay{constructor(e){super(),this.index=void 0,this.commitonly=!1,this.value=void 0,this.isActive=!1,this.isDragging=!1,this.startValue=0,this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.editElement=null,this.barElement=null,this.buttonElement=null,this.contentElement=null,this.property=e,this.onFocus=this.onFocus.bind(this),this.onClick=this.onClick.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onEditChange=this.onEditChange.bind(this),this.onSelectOption=this.onSelectOption.bind(this),this.addEventListener("focus",this.onFocus),this.addEventListener("click",this.onClick),this.addEventListener("contextmenu",this.onContextMenu),this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointermove",this.onPointerMove),this.addEventListener("pointerup",this.onPointerUp),this.addEventListener("pointercancel",this.onPointerUp)}update(e){this.contentElement&&(this.contentElement.remove(),this.contentElement=null),this.barElement&&(this.barElement.remove(),this.barElement=null),this.buttonElement&&(this.buttonElement.remove(),this.buttonElement=null);const t=this.property,n=t.schema;if(n.event)this.buttonElement=this.appendElement("div"),this.buttonElement.classList.add("ff-off","ff-event-button");else{const{min:e,max:t,bar:i}=n;n.options||void 0===e||void 0===t||void 0===i||(this.barElement=this.appendElement("div"),this.barElement.classList.add("ff-fullsize","ff-off","ff-bar")),this.contentElement=this.appendElement("div"),this.contentElement.classList.add("ff-fullsize","ff-off","ff-content")}const i=this.classList,r=t.isInput();r?(i.add("ff-input"),i.remove("ff-output")):(i.add("ff-output"),i.remove("ff-input"));(r?t.hasInLinks(this.index):t.hasOutLinks(this.index))?i.add("ff-linked"):i.remove("ff-linked"),n.event?i.add("ff-event"):i.remove("ff-event"),n.options?i.add("ff-option"):i.remove("ff-option"),this.setAttribute("title",t.toString()+(this.index>=0?`[${this.index}]`:"")),this.updateElement()}firstConnected(){if(this.tabIndex=0,this.classList.add("ff-property-field"),this.style.touchAction="none",this.setAttribute("touch-action","none"),!this.property)throw new Error("missing property")}connected(){this.property.on("value",this.onPropertyValue,this),this.property.on("change",this.onPropertyChange,this)}disconnected(){this.property.off("value",this.onPropertyValue,this),this.property.off("change",this.onPropertyChange,this)}onFocus(e){}onClick(e){if(this.editElement)return;const t=this.property,n=t.schema;if(n.event)t.set();else if(!this.isDragging)if(n.options)this.showPopupOptions(e);else switch(t.type){case"number":case"string":this.startEditing();break;case"boolean":this.updateProperty(!this.value,!0)}}onContextMenu(e){this.editElement||(this.property.reset(),e.preventDefault())}onPointerDown(e){if(!e.isPrimary||0!==e.button)return;this.isDragging=!1;const t=this.property;"number"!==t.type||t.schema.options||(this.isActive=!0,this.startX=e.clientX,this.startY=e.clientY)}onPointerMove(e){if(e.isPrimary&&this.isActive){if(!this.isDragging){const t=e.clientX-this.startX,n=e.clientY-this.startY;Math.abs(t)+Math.abs(n)>2&&(this.setPointerCapture(e.pointerId),this.isDragging=!0,this.startX=e.clientX,this.startY=e.clientY,this.startValue=this.value)}if(this.isDragging){const t=e.clientX-this.startX-(e.clientY-this.startY),n=this.property.schema;let i=Vt.defaultSpeed;n.speed?i=n.speed:void 0!==n.min&&void 0!==n.max&&(i=(n.max-n.min)/this.clientWidth),i=e.ctrlKey?.1*i:i,i=e.shiftKey?10*i:i;let r=this.startValue+t*i;r=void 0!==n.step?Math.trunc(r/n.step)*n.step:r,r=void 0!==n.min?Math.max(r,n.min):r,r=void 0!==n.max?Math.min(r,n.max):r,this.updateProperty(r,!this.commitonly),e.stopPropagation(),e.preventDefault()}this.lastX=e.clientX,this.lastY=e.clientY}}onPointerUp(e){this.isActive&&e.isPrimary&&(this.isActive=!1,this.isDragging&&(e.stopPropagation(),e.preventDefault(),this.commitonly&&this.property.set()))}onEditChange(e){e.detail.isEditing||this.stopEditing(!0)}startEditing(){const e=this.property,t=e.schema;let n=this.value,i=!1;if("number"===e.type)if(i=!0,isFinite(n)){const e=void 0!==t.precision?t.precision:Vt.defaultEditPrecision;n=this.value.toFixed(e)}else n=this.value===-1/0?"-inf":"inf";const r=this.editElement=this.appendElement(Yt.A);r.classList.add("ff-fullsize"),r.align=i?"right":"left",r.text=n,r.focus(),r.addEventListener("change",this.onEditChange)}stopEditing(e){if(!this.editElement)return;const t=this.editElement;this.editElement=null,this.removeChild(t);const n=this.property.schema,i=t.text;let r=i;if("number"===this.property.type)if(i.toLowerCase().indexOf("inf")>=0)r="-"===i[0]?-1/0:1/0;else{if(r=parseFloat(r)||0,n.precision){const e=Math.pow(10,n.precision);r=Math.round(r*e)/e}r=void 0!==n.min?Math.max(r,n.min):r,r=void 0!==n.max?Math.min(r,n.max):r}this.updateProperty(r,!0)}showPopupOptions(e){const t=this.property,n=new jt;n.options=t.schema.options,n.selectionIndex=t.getValidatedValue(),n.position="anchor",n.anchor=this,n.align="fixed",n.justify="end",n.positionX=e.clientX-10,n.keepVisible=!0,n.addEventListener(jt.selectEvent,this.onSelectOption),document.body.appendChild(n)}onSelectOption(e){const t=e.detail.index;this.updateProperty(t,!0)}onPropertyValue(){this.updateElement()}onPropertyChange(){this.updateElement()}updateElement(){const e=this.property,t=e.schema;if(t.event)return void(e.changed&&(this.buttonElement.classList.remove("ff-event-flash"),setTimeout(()=>this.buttonElement.classList.add("ff-event-flash"),0)));let n=e.value,i="";switch(this.index>=0&&(n=n[this.index]),this.value=n,e.type){case"number":if(t.options)i=e.getOptionText();else if(isFinite(n)){const e=void 0!==t.precision?t.precision:Vt.defaultPrecision;i=t.percent?(100*n).toFixed(e-2)+"%":n.toFixed(e),this.barElement&&(this.barElement.style.width=Ft.A.scaleLimit(n,t.min,t.max,0,100)+"%")}else i=n===-1/0?"-inf":"inf",this.barElement&&(this.barElement.style.width="0");break;case"boolean":i=n?"true":"false";break;case"string":i=n;break;case"object":i=n?"[object]":"[null]"}this.contentElement.innerText=i}updateProperty(e,t){const n=this.property;this.index>=0?n.value[this.index]=e:n.value=e,t?n.set():this.updateElement()}};Qt.defaultPrecision=2,Qt.defaultEditPrecision=5,Qt.defaultSpeed=.1,Gt([(0,t.MZ)({attribute:!1})],Qt.prototype,"property",void 0),Gt([(0,t.MZ)({attribute:!1})],Qt.prototype,"index",void 0),Gt([(0,t.MZ)({type:Boolean})],Qt.prototype,"commitonly",void 0),Qt=Vt=Gt([(0,t.EM)("ff-property-field")],Qt);const $t=Qt;var qt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const Wt=["X","Y","Z","W"];let Kt=class extends t.Ay{constructor(){super(),this.property=null,this.editButton=null,this.onColorChange=this.onColorChange.bind(this)}firstConnected(){this.classList.add("ff-property-view")}connected(){this.property.on("value",this.onPropertyValue,this)}disconnected(){this.property.off("value",this.onPropertyValue,this)}render(){const e=this.property;if("color"===e.schema.semantic){const t=new Nt;t.selectable=!0,t.numeric=!0,t.color.fromArray(e.value),t.alpha=e.elementCount>3,t.addEventListener("change",this.onColorChange),this.editButton=t}else("number"===e.type&&e.elementCount>1||"string"===e.type&&1===e.elementCount)&&(this.editButton=null);if(e.isArray()){if(e.elementCount>4)return;const n=e.schema.labels||Wt;let i=[];for(let r=0;r<e.elementCount;++r)i.push(t.qy`
                    <div class="ff-label">${n[r]}</div>
                    <ff-property-field .property=${e} .index=${r}></ff-property-field>
                `);return t.qy`${i}<div class="ff-edit-button">${this.editButton}</div>`}return t.qy`<ff-property-field .property=${e}></ff-property-field>
            <div class="ff-edit-button">${this.editButton}</div>`}onColorChange(e){const t=e.detail.color,n=this.property;n.elementCount>3?t.toRGBAArray(n.value):t.toRGBArray(n.value),n.set()}onPropertyValue(e){const t=this.editButton;t instanceof Nt&&(t.color.fromArray(e),t.requestUpdate())}};qt([(0,t.MZ)({attribute:!1})],Kt.prototype,"property",void 0),Kt=qt([(0,t.EM)("ff-property-view")],Kt);var Zt,Xt=n(449),Jt=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let en=Zt=class extends t.Ay{constructor(e){super(),this.root=null,this.includeRoot=!1,this.draggable=!1,this._nodeById={},this._idByNode=new Map,this._containerId=(0,Xt.A)(4),this.root=e}toggleSelected(e){this.setSelected(e,void 0)}setSelected(e,t){const n=this._idByNode.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("selected")),t?e.setAttribute("selected",""):e.removeAttribute("selected")}}isSelected(e){const t=this._idByNode.get(e);if(t){return document.getElementById(t).hasAttribute("selected")}return!1}toggleExpanded(e){this.setExpanded(e,void 0)}setExpanded(e,t){const n=this._idByNode.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("expanded")),t?e.setAttribute("expanded",""):e.removeAttribute("expanded")}}isExpanded(e){const t=this._idByNode.get(e);if(t){return document.getElementById(t).hasAttribute("expanded")}return!1}firstConnected(){this.classList.add("ff-tree"),this.draggable&&(this.addEventListener("dragstart",this.onDragStart.bind(this)),this.addEventListener("dragover",this.onDragOver.bind(this)),this.addEventListener("dragenter",this.onDragEnter.bind(this)),this.addEventListener("dragleave",this.onDragLeave.bind(this)),this.addEventListener("drop",this.onDrop.bind(this)))}render(){this._nodeById={},this._idByNode.clear();const e=this.root;if(!e)return t.qy``;if(this.includeRoot){const t=this.getId(e)+this._containerId;return this.renderNode(e,t,0)}{const n=this.getChildren(e);return n.length>0?this.renderNodeChildren(e,n,0):t.qy``}}getId(e){return e.id||(0,Xt.A)()}getClasses(e){return""}getChildren(e){return e.children||null}isNodeSelected(e){return!!e.selected}isNodeExpanded(e){return void 0===e.expanded||e.expanded}renderNodeHeader(e){return e.toString()}renderNodeContent(e,t,n){return this.renderNodeChildren(e,t,n)}renderNodeChildren(e,n,i){if(!n||0===n.length)return null;let r;return t.qy`
            ${(0,t.ux)(n,e=>r=this.getId(e)+this._containerId,e=>this.renderNode(e,r,i))}
        `}renderNode(e,n,i){this._nodeById[n]=e,this._idByNode.set(e,n);const r=this.getChildren(e),o=this.isNodeSelected(e),s=this.isNodeExpanded(e);let a="ff-tree-node "+(r&&r.length>0?"ff-inner ":"ff-leaf ")+(i%2==0?"ff-even ":"ff-odd ")+this.getClasses(e);const l=this.renderNodeHeader(e),c=this.renderNodeContent(e,r,i+1);return t.qy`
            <div class="ff-tree-node-container">
                <div class=${a} id=${n} ?selected=${o} ?expanded=${s}>
                    <div class="ff-header" draggable="true"
                        @click=${this.onClick} @dblclick=${this.onDblClick}>${l}</div>
                    <div class="ff-content">${c}</div>
                </div>
            </div>
        `}onDragStart(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeDragStart(e,t)?e.dataTransfer.setData(Zt.dragDropMimeType,this.getId(t)):e.preventDefault()}onDragEnter(e){let t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragEnter(e,t)}onDragOver(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragOver(e,t)&&e.preventDefault()}onDragLeave(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&this.onNodeDragLeave(e,t)}onDrop(e){const t=this.getNodeFromEventTarget(e);t&&this.canDrop(e,t)&&(this.onNodeDrop(e,t),e.stopPropagation()),e.preventDefault()}onClick(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeClick(e,t),e.stopPropagation()}onDblClick(e){const t=this.getNodeFromEventTarget(e);t&&this.onNodeDblClick(e,t),e.stopPropagation()}canDrop(e,t){return!!e.dataTransfer.types.find(e=>e===Zt.dragDropMimeType)}onNodeDragStart(e,t){return!0}onNodeDragOver(e,t){return!0}onNodeDragEnter(e,t){this.getElementByNode(t).classList.add("ff-drop-target")}onNodeDragLeave(e,t){this.getElementByNode(t).classList.remove("ff-drop-target")}onNodeDrop(e,t){this.getElementByNode(t).classList.remove("ff-drop-target")}onNodeClick(e,t){this.toggleExpanded(t)}onNodeDblClick(e,t){}getNodeFromEventTarget(e){let t=e.target;for(;t&&!t.classList.contains("ff-tree-node");)t=t===this?null:t.parentElement;return t&&this._nodeById[t.id]}getElementByNode(e){const t=this._idByNode.get(e);return t&&document.getElementById(t)}};en.dragDropMimeType="application/x-ff-tree-node",Jt([(0,t.MZ)({attribute:!1})],en.prototype,"root",void 0),Jt([(0,t.MZ)({type:Boolean})],en.prototype,"includeRoot",void 0),Jt([(0,t.MZ)({type:Boolean})],en.prototype,"draggable",void 0),en=Zt=Jt([(0,t.EM)("ff-tree")],en);const tn=en;var nn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let rn=class extends Lt{render(){if(!this.activeDocument)return;const e=this.activeDocument.setup.language,n=this.activeNode;return n?t.qy`<div class="ff-flex-item-stretch ff-scroll-y">
            <sv-settings-tree .node=${n}></sv-settings-tree>
        </div>`:t.qy`<div class="sv-placeholder">${e.getUILocalizedString("Please select a node to display its properties.")}</div>`}onActiveNode(e,t){this.requestUpdate()}};rn=nn([(0,t.EM)("sv-settings-task-view")],rn);const on=rn;let sn=class extends tn{constructor(){super(...arguments),this.node=null}firstConnected(){super.firstConnected(),this.classList.add("ff-property-tree","sv-settings-tree")}getClasses(e){return e.classes}update(e){e.has("node")&&(this.root=this.createNodeTreeNode(this.node)),super.update(e)}renderNodeHeader(e){return e.property?t.qy`<sv-property-view .property=${e.property}></sv-property-view>`:t.qy`<div class="ff-text ff-label ff-ellipsis">${e.text}</div>`}createNodeTreeNode(e){const t=e.components.getArray().filter(e=>e.settingProperties&&!e.tags.has("no_settings"));return{id:e.id,text:e.displayName,classes:"ff-node",children:t.map(e=>({id:e.id,text:e.displayName,classes:"ff-component",property:null,children:this.createPropertyNodes(e.settingProperties)}))}}createPropertyNodes(e){const t={children:[]};return e.forEach(e=>{const n=e.path.split(".");let i=t;const r=n.length,o=r-1;for(let t=0;t<r;++t){const r=n[t];let s=i.children.find(e=>e.text===r);if(!s){s={id:t===o?e.key:r,text:r,classes:"",children:[],property:t===o?e:null},i.children.push(s)}i=s}}),t.children}};nn([(0,t.MZ)({attribute:!1})],sn.prototype,"node",void 0),sn=nn([(0,t.EM)("sv-settings-tree")],sn);class an extends kt{constructor(e,t){super(e,t);const n=this.configuration;n.interfaceVisible=!0,n.bracketsVisible=!0}createView(){return new on(this)}}an.typeName="CVSettingsTask",an.text="Settings",an.icon="eye";var ln=n(4640),cn=n(4482),dn=n(3889),un=n(2709),hn=(n(6943),n(812),n(9851),n(3751),n(4019)),pn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let mn=class extends hn.A{constructor(){super(...arguments),this.type="number",this.index=void 0,this.startValue=0,this.startX=0,this.onChange=e=>{let t,n=e.target.value;if(n.toLowerCase().indexOf("inf")>=0)this.setValue("-"===n[0]?-1/0:1/0);else{if(this.property.schema.percent){n.endsWith("%")&&(n=n.slice(0,-1)),t=+n/100;const i=this.setPrecision(this.value);this.setPrecision(t)==i&&(e.target.value=i)}else t=parseFloat(n);isFinite(t)||(t=0),this.setValue(t)}},this.onPointerDown=e=>{if(!e.isPrimary||0!==e.button)return;if(!isFinite(this.value))return;const t=e.target;"INPUT"!==t.tagName&&!t.classList.contains("sv-property-field")||t==document.activeElement||(e.preventDefault(),this.startX=e.clientX,this.startValue=this.value,this.delta=0,this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",this.onPointerMove))}}get value(){return"number"==typeof this.index?this.property.value[this.index]:this.property.value}firstConnected(){super.firstConnected(),this.classList.add("sv-property-number")}disconnected(){"true"!==this.ariaDisabled&&(this.removeEventListener("pointerdown",this.onPointerDown),this.removeEventListener("pointerup",this.onPointerUp),this.removeEventListener("pointercancel",this.onPointerUp))}update(e){if(e.has("property")){const t=e.get("property");t&&t.off("value",this.onUpdate,this),this.property&&(this.title=this.property.name,this.property.on("value",this.onUpdate,this))}e.has("ariaDisabled")&&("true"===this.ariaDisabled?(this.removeEventListener("pointerdown",this.onPointerDown),this.removeEventListener("pointerup",this.onPointerUp),this.removeEventListener("pointercancel",this.onPointerUp)):(this.addEventListener("pointerdown",this.onPointerDown),this.addEventListener("pointerup",this.onPointerUp),this.addEventListener("pointercancel",this.onPointerUp))),super.update(e)}render(){var e;const n=this.property,i=n.schema,r=this.name||n.name,o=i.min,s=i.max,a=isFinite(o)&&isFinite(s),l=this.value;let c;return c=this.setPrecision(l),t.qy`
            <label class="ff-label ff-off">${r}</label>
            <div class="sv-property-field">
                ${a?t.qy`<span class="ff-off ff-bar" style="width:${100*(l-o)/(s-o)}%;"></span>`:null}
                <input ?disabled=${"true"===this.ariaDisabled} class="ff-input"
                    type="text"
                    pattern="[+\\-]?([0-9.]+|inf)${i.percent?"%?":""}"
                    step=${null!==(e=i.step)&&void 0!==e?e:""}
                    min=${null!=o?o:""}
                    max=${null!=s?s:""}
                    .value=${c}
                    @change=${this.onChange}
                    @focus=${e=>{e.target.select()}}}
                    @keypress=${e=>{"Enter"===e.key&&e.target.blur()}}
                >
                ${i.percent?t.qy`<span class="ff-off ff-unit">%</span>`:null}
            </div>
        `}setValue(e){"number"==typeof this.index&&0<=this.index?(this.property.value[this.index]=e,this.property.set()):this.property.setValue(e)}setPrecision(e){const t=this.property.schema;let n;if(isFinite(e)){const i=void 0!==t.precision?t.precision:$t.defaultPrecision;n=t.percent?(100*e).toFixed(i-2):e.toFixed(i)}else n=e>0?"inf":"-inf";return n}onPointerMove(e){if(e.stopPropagation(),e.preventDefault(),this.delta<3)return void(this.delta+=Math.abs(e.movementX)+Math.abs(e.movementY));const t=this.property.schema;let n=$t.defaultSpeed;if(t.speed)n=t.speed;else if(void 0!==t.min&&void 0!==t.max){const e=this.getElementsByClassName("sv-property-field")[0];n=(t.max-t.min)/e.clientWidth}n=e.ctrlKey?.1*n:n,n=e.shiftKey?10*n:n;let i=this.startValue+(e.clientX-this.startX)*n;i=void 0!==t.step?Math.trunc(i/t.step)*t.step:i,i=void 0!==t.min?Math.max(i,t.min):i,i=void 0!==t.max?Math.min(i,t.max):i;const r=void 0!==t.precision?t.precision:$t.defaultPrecision;i=+i.toFixed(r),this.setValue(i)}onPointerUp(e){isFinite(this.delta)&&(this.removeEventListener("pointermove",this.onPointerMove),this.releasePointerCapture(e.pointerId),this.delta<3&&this.querySelector("input").focus(),this.delta=void 0)}};pn([(0,t.MZ)({type:Number,reflect:!1})],mn.prototype,"index",void 0),mn=pn([(0,t.EM)("sv-property-number")],mn);n(3769),n(1308);var fn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const gn=["X","Y","Z","W"];let vn=class extends t.Ay{constructor(){super(...arguments),this.property=null,this.label=void 0,this.commitonly=!1,this.disabled=!1}firstConnected(){if(!this.property)throw new Error("property not set");this.dataset.path=this.property.path,this.classList.add("sv-property-view")}onPropertyChange(){console.log("PROPERTY CHANGE")}render(){var e,n;const i=this.property,r=i.schema,o=void 0!==this.label?this.label:i.path.split(".").pop();let s=this.property.hasMainInLinks(),a=this.disabled||s;if(i.isArray()&&"number"!==i.type)return console.error("Unsupported property : ",i),null;if("number"===i.type&&"color"===i.schema.semantic)return t.qy`<sv-property-color ?aria-disabled=${a} name=${o} .property=${i}></sv-property-color>`;if("number"===i.type&&i.isArray()){let r=[];for(let o=0;o<i.elementCount;++o){let s=a||this.property.hasInLinks(o);const l=null!==(n=null===(e=i.schema.labels)||void 0===e?void 0:e[o])&&void 0!==n?n:gn[o];r.push(t.qy`<sv-property-number aria-disabled=${s} name=${l} .index=${o} .property=${i}></sv-property-number>`)}const s=o?t.qy`<div class="sv-property-name">${o}</div>`:null;return t.qy`${s}<div class="sv-property-group">${r}</div>`}return r.event?t.qy`<sv-property-event aria-disabled=${a} name=${o} .property=${i}></sv-property-event>`:r.options?t.qy`<sv-property-options aria-disabled=${a} dropdown name=${o} .property=${i}></sv-property-options>`:"boolean"===i.type?t.qy`<sv-property-boolean aria-disabled=${a} name=${o} .property=${i}></sv-property-boolean>`:"string"===i.type?t.qy`<sv-property-string aria-disabled=${a} name=${o} .property=${i}></sv-property-string>`:"number"===i.type?t.qy`<sv-property-number aria-disabled=${a} name=${o} .property=${i}></sv-property-number>`:(console.warn("Unhandled property :",i.name),t.qy`<div class="sv-property-name">${o}</div><div class="sv-property-group">${i.value} (not editable)</div>`)}};fn([(0,t.MZ)({attribute:!1})],vn.prototype,"property",void 0),fn([(0,t.MZ)()],vn.prototype,"label",void 0),fn([(0,t.MZ)({type:Boolean})],vn.prototype,"commitonly",void 0),fn([(0,t.MZ)({type:Boolean})],vn.prototype,"disabled",void 0),vn=fn([(0,t.EM)("sv-property-view")],vn);var yn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let bn=class extends Lt{connected(){super.connected(),this.task.on("update",this.onUpdate,this),this.task.outs.size.on("value",this.onUpdate,this)}disconnected(){this.task.outs.size.off("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),super.disconnected()}render(){if(!this.activeDocument)return;const e=this.activeNode,n=e&&e.model,i=this.activeDocument.setup.language;if(!n)return t.qy`<div class="sv-placeholder">${i.getUILocalizedString("Please select a model to edit its pose")}</div>`;const r=this.task.outs.size.value,o=`${r[0].toFixed(2)} x ${r[1].toFixed(2)} x ${r[2].toFixed(2)} ${Qe.uj[n.ins.globalUnits.value]}`,s=this.task.ins.mode,a=this.activeDocument.root.scene.ins.units,l=n.ins.localUnits,c=n.ins.position,d=n.ins.rotation;return t.qy`
            <div class="sv-commands">
                <ff-button icon="select" text="${i.getUILocalizedString("Select")}" index=${Tn.Off} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="rotate" text="${i.getUILocalizedString("Rotate")}" index=${Tn.Rotate} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="move" text="${i.getUILocalizedString("Move")}" index=${Tn.Translate} selectedIndex=${s.value} @click=${this.onClickMode}></ff-button>
                <ff-button icon="compress" text="${i.getUILocalizedString("Center")}" @click=${this.onClickCenter}></ff-button>
                <ff-button icon="expand" text="${i.getUILocalizedString("Zoom Extents")}" @click=${this.onClickZoomExtents}></ff-button>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y ff-flex-column sv-detail-view">
                <div class="sv-label-right">${o}</div>
                <sv-property-view .property=${a} label="Global Units"></sv-property-view>    
                <sv-property-view .property=${l} label="Item Units"></sv-property-view>
                <sv-property-view .property=${c}></sv-property-view>
                <sv-property-view .property=${d}></sv-property-view>
            </div></div>`}onClickMode(e){this.task.ins.mode.setValue(e.target.index)}onClickCenter(){this.activeNode.model.ins.center.set()}onClickZoomExtents(){this.activeDocument.setup.navigation.ins.zoomExtents.set()}};bn=yn([(0,t.EM)("sv-pose-task-view")],bn);const An=bn,_n=new ln.Pq0,wn=new ln.Pq0,xn=new ln.kn4,Cn=new ln.PTz,En=new ln.PTz,Mn=new ln.NRn,Sn=new ln.Pq0;var Tn;!function(e){e[e.Off=0]="Off",e[e.Translate=1]="Translate",e[e.Rotate=2]="Rotate"}(Tn||(Tn={}));class kn extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(kn.ins),this.outs=this.addOutputs(kn.outs),this._viewport=null,this._deltaX=0,this._deltaY=0,this._90degLock=!1,this._accumulatedAngle=0,this._envVisibility=!1,this.activeModel=null;const n=this.configuration;n.gridVisible=!0,n.annotationsVisible=!1,n.interfaceVisible=!1,n.bracketsVisible=!0,n.axesVisible=!0}get renderer(){return this.getMainComponent(dn.A)}createView(){return new An(this)}activateTask(){this.system.on(["pointer-down","pointer-up","pointer-move"],this.onPointer,this),this.renderer.views.forEach(e=>{e instanceof cn.A&&(e.layout=cn.y.Quad,e.viewports.forEach(e=>{e.camera&&e.camera.layers.enable(1)}))}),this.startObserving();const e=this.activeDocument.setup;e.reader.ins.enabled.setValue(!1),e.navigation.ins.zoomExtents.set(),e.grid.ins.labelEnabled.setValue(!1),this._envVisibility=e.environment.ins.visible.value,e.environment.ins.visible.setValue(!1),super.activateTask()}deactivateTask(){const e=this.activeDocument.setup;e.grid.ins.labelEnabled.setValue(!0),e.environment.ins.visible.setValue(this._envVisibility),super.deactivateTask(),this.stopObserving(),this.renderer.views.forEach(e=>{e instanceof cn.A&&(e.layout=cn.y.Single)}),this.system.off(["pointer-down","pointer-up","pointer-move"],this.onPointer,this)}update(e){return this.ins.modelUpdated&&this.activeModel&&(Mn.makeEmpty(),Mn.expandByObject(this.activeModel.object3D),Mn.getSize(Sn),Sn.toArray(this.outs.size.value),this.outs.size.set()),!0}tick(){if(!this.isActiveTask)return!1;const e=this.ins.mode.value;if(e===Tn.Off||!this.activeModel)return!1;const t=this._deltaX,n=this._deltaY;if(0===t&&0===n)return!1;this._deltaX=this._deltaY=0;const i=this._viewport.camera;if(!i||!i.isOrthographicCamera)return!1;if(i.matrixWorld.decompose(_n,Cn,_n),e===Tn.Rotate){let e=.002*(t-n);if(this._90degLock){this._accumulatedAngle+=2*e;let t=Math.abs(this._accumulatedAngle)+Math.PI/4;if(t-=t%(Math.PI/2),0==t)return;e=this._accumulatedAngle>0?t:-t,this._accumulatedAngle=0}wn.set(0,0,-1).applyQuaternion(Cn),En.setFromAxisAngle(wn,e),xn.makeRotationFromQuaternion(En)}else{const e=i.size/this._viewport.height;wn.set(t*e,-n*e,0).applyQuaternion(Cn),xn.identity().setPosition(wn)}return xn.multiply(this.activeModel.object3D.matrix),this.activeModel.setFromMatrix(xn),!0}onActiveNode(e,t){this.activeModel&&this.ins.modelUpdated.unlinkFrom(this.activeModel.outs.updated),this.activeModel=t&&t.model,this.activeModel&&(this.ins.modelUpdated.linkFrom(this.activeModel.outs.updated),this.ins.modelUpdated.set(),this.selection.selectComponent(this.activeModel))}onPointer(e){if(this.ins.mode.value!==Tn.Off&&this.activeModel&&1===e.originalEvent.buttons&&"pointer-move"===e.type){const t=e.ctrlKey?.1:e.shiftKey?10:1;this._90degLock=!!e.altKey,this._deltaX+=e.movementX*t,this._deltaY+=e.movementY*t,this._viewport=e.viewport,e.stopPropagation=!0}}}kn.typeName="CVPoseTask",kn.text="Pose",kn.icon="move",kn.ins={mode:Ie.gK.Enum("Pose.Mode",Tn,Tn.Off),modelUpdated:Ie.gK.Event("Model.Updated")},kn.outs={size:Ie.gK.Vector3("Model.Size")};const Ln=function(e){const t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),i=new Uint8Array(n);for(var r=0;r<t.length;r++)i[r]=t.charCodeAt(r);var o=e.split(",")[0].split(":")[1].split(";")[0];return new Blob([n],{type:o})};var Dn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let In=class extends Lt{connected(){super.connected(),this.task.outs.ready.on("value",this.onPictureTaken,this)}disconnected(){this.task.outs.ready.off("value",this.onPictureTaken,this),super.disconnected()}render(){if(!this.activeDocument)return;const e=this.activeDocument.setup.language;if(!this.task.isActiveScene)return St.qy`<div class="sv-placeholder">${e.getUILocalizedString("Please select a scene to take a picture")}</div>`;const t=this.task.ins,n=this.task.outs.ready.value,i=this.task.getImageElement(),r=i?St.qy`<div class="sv-label">Preview</div>
            <div class="sv-image">${i}</div>`:null;return St.qy`<div class="sv-label">${e.getUILocalizedString("Scene State")}</div>
            <div class="sv-commands">
                <ff-button text="${e.getUILocalizedString("Save")}" icon="camera" @click=${this.onClickTake}></ff-button>
                <ff-button text="${e.getUILocalizedString("View")}" icon="document" @click=${this.onClickRestore}></ff-button>
            </div>
            <div class="sv-label">${e.getUILocalizedString("Thumbnail Images")}</div>
            <div class="sv-commands">
                <ff-button text="${e.getUILocalizedString("Save")}" icon="save" ?disabled=${!n} @click=${this.onClickSave}></ff-button>
                <ff-button text="${e.getUILocalizedString("Download")}" icon="download" ?disabled=${!n} @click=${this.onClickDownload}></ff-button>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y ff-flex-column sv-detail-view">
                <sv-property-view .property=${t.type}></sv-property-view>
                <sv-property-view .property=${t.quality}></sv-property-view>
                ${r}
            </div></div>`}onClickTake(){this.task.ins.take.set()}onClickSave(){this.task.ins.save.set()}onClickDownload(){this.task.ins.download.set()}onClickRestore(){this.task.ins.restore.set()}onPictureTaken(){this.requestUpdate()}};In=Dn([(0,St.EM)("sv-capture-task-view")],In);const Rn=In;var On=n(1071),Pn=n(1721),Bn=n(3350);const Nn=[Qe.a9.Thumb,Qe.a9.Low,Qe.a9.Medium,Qe.a9.High],Un={[Qe.a9.Thumb]:[320,320],[Qe.a9.Low]:[640,640],[Qe.a9.Medium]:[1280,1280],[Qe.a9.High]:[2560,2560]};var Fn;!function(e){e[e.JPEG=0]="JPEG",e[e.PNG=1]="PNG"}(Fn||(Fn={}));const zn={[Fn.JPEG]:"image/jpeg",[Fn.PNG]:"image/png"},Hn={[Fn.JPEG]:"jpg",[Fn.PNG]:"png"};class jn extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(jn.ins),this.outs=this.addOutputs(jn.outs),this.activeMeta=null,this.activeModel=null,this.isActiveScene=!1,this._imageDataURIs={},this._imageElements={},this._mimeType="",this._extension="";this.configuration.bracketsVisible=!0}get renderer(){return this.getMainComponent(dn.A)}get assetManager(){return this.getMainComponent(Fe.A)}get nodeProvider(){return this.getMainComponent(On.A)}get setup(){return this.getSystemComponent(Pn.A)}getImageElement(e=Qe.a9.Low){return this._imageElements[e]}createView(){return new Rn(this)}activateTask(){this.nodeProvider.activeNode=this.nodeProvider.scopedNodes[0],this.startObserving(),super.activateTask()}deactivateTask(){this.stopObserving(),super.deactivateTask()}create(){super.create(),this.startObserving()}dispose(){this.stopObserving(),super.dispose()}update(){const e=this.ins;if(e.take.changed){const t=e.type.getValidatedValue();this.takePictures(e.quality.value,zn[t],Hn[t]),this.setup.ins.saveState.set()}return e.save.changed&&this.savePictures(),e.download.changed&&this.downloadPicture(),e.remove.changed&&this.removePictures(),e.restore.changed&&this.restoreState(),!0}takePictures(e,t,n){this._mimeType=t,this._extension=n;const i=this.renderer.views[0];if(!i)return void console.warn("can't render to image, no view attached");this.selection.ins.viewportBrackets.setValue(!1),this.selection.update();const r=this.setup.viewer.ins.annotationsVisible.value;this.getSystemComponents(Bn.A).forEach(e=>e.object3D.visible=!1),Nn.forEach(n=>{const r=i.renderImage(Un[n][0],Un[n][1],t,e);this._imageDataURIs[n]=r;const o=this._imageElements[n]||document.createElement("img");o.src=r,this._imageElements[n]=o}),this.selection.ins.viewportBrackets.setValue(!0),this.getSystemComponents(Bn.A).forEach(e=>e.object3D.visible=r),this.outs.ready.setValue(!0)}savePictures(){this.outs.ready.value&&Nn.forEach(e=>{const t=this._imageDataURIs[e],n=this.getImageAssetPath(e,this._extension),i=this.assetManager.getAssetUrl(n),r=this.assetManager.getAssetName(n),o=Ln(t),s=this.graph.getMainComponent(je,!0);if(s)s.addFile(n,[o]),this.updateImageMeta(e,this._mimeType,n),new Ue.Ay(`Saved ${r} to scene package.`,"info",4e3);else{const t=new File([o],r);fetch(i,{method:"PUT",body:t}).then(()=>{this.updateImageMeta(e,this._mimeType,n),new Ue.Ay(`Successfully uploaded image to '${i}'`,"info",4e3)}).catch(e=>{new Ue.Ay(`Failed to upload image to '${i}'`,"error",8e3)})}})}downloadPicture(){if(!this.outs.ready.value)return;const e=this._imageDataURIs[Qe.a9.High],t=this.getImageAssetPath(Qe.a9.High,this._extension),n=this.assetManager.getAssetName(t);Je.A.url(e,n)}updateImageMeta(e,t,n){const i=this.activeModel,r=this.activeMeta,o=Math.ceil(this._imageDataURIs[e].length/4*3),s=Un[e][0],a=Un[e][1],l=Math.max(s,a);if(i){const r=i.derivatives.getOrCreate(Qe.UH.Image2D,e),s=r.findAsset(Qe.iO.Image)||r.createAsset(Qe.iO.Image,n);s.data.byteSize=o,s.data.imageSize=l,s.data.mimeType=t,s.update()}if(r){const t=Qe.a9[e];r.images.insert({uri:n,quality:t,byteSize:o,width:s,height:a},t)}this.outs.updated.setValue(!0)}getImageAssetPath(e,t){let n=this.activeDocument.assetBaseName;this.activeNode.model;return`${n}-image-${Qe.a9[e].toLowerCase()}.${t}`}removePictures(){console.warn("CCaptureTask.removePictures - not implemented yet")}onActiveDocument(e,t){super.onActiveDocument(e,t),t&&this.isActiveTask&&this.onActiveNode(this.activeNode,this.activeNode)}onActiveNode(e,t){e&&e.meta&&(this.outs.ready.setValue(!1),this._imageElements={},this._imageDataURIs={}),this.isActiveScene=!(!t||!t.scene);const n=this.activeModel=t&&t.model,i=this.activeMeta=t&&t.meta,r=i&&i.images;r?Nn.forEach(e=>{const t=r.get(Qe.a9[e]);if(t){const n=document.createElement("img");n.src=this.assetManager.getAssetUrl(t.uri),this._imageElements[e]=n}}):n&&Nn.forEach(e=>{const t=n.derivatives.get(Qe.UH.Image2D,e);if(t){const n=t.findAsset(Qe.iO.Image);if(n){const t=document.createElement("img");t.src=this.assetManager.getAssetUrl(n.data.uri),this._imageElements[e]=t}}})}restoreState(){this.setup.ins.restoreState.set()}}jn.typeName="CVCaptureTask",jn.text="Capture",jn.icon="camera",jn.ins={take:Ie.gK.Event("Picture.Take"),save:Ie.gK.Event("Picture.Save"),download:Ie.gK.Event("Picture.Download"),remove:Ie.gK.Event("Picture.Remove"),type:Ie.gK.Enum("Picture.Type",Fn),quality:Ie.gK.Percent("Picture.Quality",.85),restore:Ie.gK.Event("State.Restore")},jn.outs={ready:Ie.gK.Boolean("Picture.Ready"),updated:Ie.gK.Boolean("Picture.Updated",!1)};var Vn=n(6351),Yn=n(7832),Gn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Qn=class extends t.Ay{constructor(e){super(),this.data=null,this.data=e,this._itemById=new Map,this._idByItem=new Map,this._containerId=(0,Xt.A)(4),this.onClickEmpty=this.onClickEmpty.bind(this),this.addEventListener("click",this.onClickEmpty)}setSelected(e,t){const n=this._idByItem.get(e);if(n){const e=document.getElementById(n);void 0===t&&(t=!e.hasAttribute("selected")),t?e.setAttribute("selected",""):e.removeAttribute("selected")}}toggleSelected(e){this.setSelected(e,void 0)}isSelected(e){const t=this._idByItem.get(e);if(t){return document.getElementById(t).hasAttribute("selected")}return!1}firstConnected(){this.setStyle({display:"flex",flexDirection:"column"}),this.classList.add("ff-list")}render(){this._itemById.clear(),this._idByItem.clear();const e=this.data;if(!e)return null;let n;return t.qy`${(0,t.ux)(e,e=>n=this.getId(e)+this._containerId,e=>{this._itemById.set(n,e),this._idByItem.set(e,n);const i=this.isItemSelected(e),r=this.isItemExpanded(e),o="ff-list-item "+this.getClass(e);return t.qy`<div class=${o} id=${n} ?selected=${i} ?expanded=${r}
                        @click=${this.onClick} @dblclick=${this.onDblClick}>
                    ${this.renderItem(e)}
                </div>`})}`}renderItem(e){return String(e)}getId(e){return e.id||(0,Xt.A)()}getClass(e){return""}isItemSelected(e){return void 0!==e.selected&&e.selected}isItemExpanded(e){return void 0===e.expanded||e.expanded}onClick(e){const t=e.currentTarget,n=this._itemById.get(t.id);if(n){const t=this.data.indexOf(n);this.onClickItem(e,n,t)}e.stopPropagation()}onDblClick(e){const t=e.currentTarget,n=this._itemById.get(t.id);if(n){const t=this.data.indexOf(n);this.onDblClickItem(e,n,t)}e.stopPropagation()}onClickItem(e,t,n){}onDblClickItem(e,t,n){}onClickEmpty(e){}};Gn([(0,t.MZ)({attribute:!1})],Qn.prototype,"data",void 0),Qn=Gn([(0,t.EM)("ff-list")],Qn);const $n=Qn;var qn=n(3675),Wn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Kn=class extends $n{constructor(){super(...arguments),this.selectedItem=null,this.activeLanguage=qn.aL[qn.Nm],this.primarySceneLanguage=qn.aL[qn.Nm]}firstConnected(){super.firstConnected(),this.classList.add("sv-annotation-list")}renderItem(e){const n=e.titleIn(this.primarySceneLanguage),i=e.titleIn(this.activeLanguage),r=t.qy`<span class="sv-missing-translation">Missing content</span>`;return t.qy`<div class="ff-flex-row ff-group">
            <div class="sv-task-item">${n||r}</div>
            <div class="sv-task-item sv-item-border-l">${i||r}
            </div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{annotation:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{annotation:null}}))}};Wn([(0,t.MZ)({attribute:!1})],Kn.prototype,"selectedItem",void 0),Wn([(0,t.MZ)({type:qn.aL})],Kn.prototype,"activeLanguage",void 0),Wn([(0,t.MZ)({type:qn.aL})],Kn.prototype,"primarySceneLanguage",void 0),Kn=Wn([(0,t.EM)("sv-annotation-list")],Kn);var Zn=n(4260),Xn=n.n(Zn),Jn=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const ei=200;let ti=class extends Lt{constructor(){super(...arguments),this._dragCounter=0,this._leadLimit=ei,this._leadCharCount=0,this.sceneview=null}connected(){super.connected();const e=this.getRootNode().getElementsByTagName("voyager-explorer")[0];this.sceneview=e.shadowRoot.querySelector(".sv-scene-view"),this.task.on("update",this.onUpdate,this),this.activeDocument.setup.language.ins.activeLanguage.on("value",this.onUpdate,this),this.activeDocument.setup.language.ins.primarySceneLanguage.on("value",this.onUpdate,this)}disconnected(){this.activeDocument.setup.language.ins.activeLanguage.off("value",this.onUpdate,this),this.activeDocument.setup.language.ins.primarySceneLanguage.on("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),this.sceneview.style.cursor="grab",super.disconnected()}render(){if(!this.activeDocument)return;const e=this.activeNode,n=e&&e.getComponent(Bn.A,!0),i=this.activeDocument.setup.language,r=qn.aL[i.ins.primarySceneLanguage.value],o=qn.aL[i.ins.activeLanguage.value];if(!n)return this.sceneview.style.cursor="grab",t.qy`<div class="sv-placeholder">${i.getUILocalizedString("Please select a model to edit its annotations")}</div>`;this.sceneview.style.cursor=this.task.ins.mode.value>0?"default":"grab";const s=n.ins,a=this.task.ins.audio,l=this.task.ins.mode,c=n.getAnnotations(),d=n.activeAnnotation;this._leadLimit=0==this._leadLimit?0:ei-(s.image.value||s.audioId.value?50:0),this._leadCharCount=s.lead.value.length;const u=0==this._leadLimit?"infinite":this._leadLimit,h=this._leadCharCount>this._leadLimit&&0!=this._leadLimit,p=s.image.value.length>0?t.qy`
            <div class="sv-indent">
                <sv-property-view .property=${s.imageCredit}></sv-property-view>
                <sv-property-view .property=${s.imageAltText}></sv-property-view>
            </div>`:null,m=d?t.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${s.style}></sv-property-view>
            <sv-property-view .property=${s.scale}></sv-property-view>
            <sv-property-view .property=${s.offset}></sv-property-view>
            <sv-property-view .property=${s.color}></sv-property-view>
            <sv-property-view id="image" .property=${s.image} @drop=${this.onDropFile} @dragenter=${this.onDragEnter} @dragover=${this.onDragOver} @dragleave=${this.onDragLeave}></sv-property-view>
            ${p}
            <sv-property-view .property=${a}></sv-property-view>
            <sv-property-view .property=${s.marker}></sv-property-view>
            <sv-property-view .property=${i.ins.activeLanguage}></sv-property-view>
            <div class="sv-indent">
                <sv-property-view .property=${s.article}></sv-property-view>
                <sv-property-view .property=${s.tags}></sv-property-view>
                <sv-property-view .property=${s.title}></sv-property-view>
                <div class="sv-label" style="${h?"color: red":""}" @click=${e=>this.onClickLimit(e)}>Lead&nbsp&nbsp&nbsp${this._leadCharCount}/${u}</div>
                <ff-text-edit name="lead" text=${s.lead.value} rows=3 maxLength=${this._leadLimit} @change=${this.onTextEdit}></ff-text-edit>
            </div>
            <div class="sv-label">${i.getUILocalizedString("View Point")}</div>
            <div class="sv-commands">
                <ff-button text="${i.getUILocalizedString("Save")}" icon="camera" @click=${this.onSaveView}></ff-button>
                <ff-button text="${i.getUILocalizedString("View")}" ?disabled=${!d.data.viewId.length} icon="document" @click=${this.onRestoreView}></ff-button>
                <ff-button text="${i.getUILocalizedString("Delete")}" ?disabled=${!d.data.viewId.length} icon="trash" @click=${this.onDeleteView}></ff-button>
            </div>
        </div>`:null;return t.qy`<div class="sv-commands">
            <ff-button text="${i.getUILocalizedString("Select")}" icon="select" index=${hi.Off} selectedIndex=${l.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="${i.getUILocalizedString("Move")}" icon="move" index=${hi.Move} selectedIndex=${l.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="${i.getUILocalizedString("Create")}" icon="create" index=${hi.Create} selectedIndex=${l.value} @click=${this.onClickMode}></ff-button>       
            <ff-button text="${i.getUILocalizedString("Delete")}" icon="trash" ?disabled=${!d} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${i.getUILocalizedString("Default:")+" "+r}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${i.getUILocalizedString("Active:")+" "+o}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-annotation-list .data=${c} .selectedItem=${d} .activeLanguage=${qn.aL[o]} .primarySceneLanguage=${qn.aL[r]} @select=${this.onSelectAnnotation}></sv-annotation-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${m}
                </div>
            </div>
        </div>`}onTextEdit(e){const t=this.task.activeAnnotations;if(t){const n=e.target,i=e.detail.text;"lead"===n.name&&(t.ins.lead.setValue(Xn()(i,{allowedTags:["b","i","em","strong","a","sup","sub"],allowedAttributes:{a:["href","target"]}})),t.activeAnnotation.leadChanged=!0)}}onClickMode(e){this.task.ins.mode.setValue(e.target.index)}onClickDelete(){this.task.removeAnnotation()}onSaveView(){this.task.saveAnnotationView(),this.requestUpdate()}onRestoreView(){this.task.restoreAnnotationView()}onDeleteView(){this.task.deleteAnnotationView(),this.requestUpdate()}onClickLimit(e){e.ctrlKey&&e.shiftKey&&(this._leadLimit=0,this.getElementsByTagName("ff-text-edit")[0].blur(),this.requestUpdate())}onSelectAnnotation(e){if(this.task.activeAnnotations){this.task.activeAnnotations.activeAnnotation=e.detail.annotation,this.task.ins.selection.set();const t=this.task.activeAnnotations.ins;this._leadCharCount=t.lead.value.length,this._leadLimit=ei-(t.image.value?100:0)-(t.image.value||t.audioId.value?50:0),this._leadCharCount>ei&&!e.detail.annotation.leadChanged&&(this._leadLimit=0)}}onDropFile(e){e.preventDefault();let t="",n=null;const i=this.task.activeAnnotations.ins.image,r=e.target;if("INPUT"==r.tagName){if(1!==e.dataTransfer.files.length||e.dataTransfer.getData("text/uri-list")){const n=e.dataTransfer.getData("text/plain");n.length>0&&(t=n)}else n=e.dataTransfer.files.item(0),t=n.name;if(t.toLowerCase().endsWith(".jpg")||t.toLowerCase().endsWith(".png")||t.toLowerCase().endsWith(".gif"))if(null!==n){const e=this.system.getMainComponent(Xe);e.uploadFile(t,n,e.root).then(()=>i.setValue(t)).catch(e=>{Ue.Ay.show("Image file upload failed.","warning"),i.setValue("")})}else this.task.activeAnnotations.ins.image.setValue(t);else Ue.Ay.show("Unable to load - Only .jpg, .png, and .gif files are currently supported.","warning");r.classList.remove("sv-drop-zone"),this._dragCounter=0}}onDragEnter(e){const t=e.target;"INPUT"==t.tagName&&(t.classList.add("sv-drop-zone"),e.preventDefault(),this._dragCounter++)}onDragOver(e){e.preventDefault()}onDragLeave(e){const t=e.target;"INPUT"==t.tagName&&(this._dragCounter--,0===this._dragCounter&&t.classList.remove("sv-drop-zone"))}};ti=Jn([(0,t.EM)("sv-annotations-task-view")],ti);const ni=ti;var ii=n(8172),ri=n(5717),oi=n(4085),si=n(9309);const ai=new ln.Pq0,li=new ln.Pq0,ci=new ln.PTz,di=new ln.kn4,ui=new ln.dwI;var hi;!function(e){e[e.Off=0]="Off",e[e.Move=1]="Move",e[e.Create=2]="Create"}(hi||(hi={}));class pi extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(pi.ins),this._activeAnnotations=null,this._defaultScale=1,this._machine=null;const n=this.configuration;n.annotationsVisible=!0,n.gridVisible=!1,n.interfaceVisible=!0,n.bracketsVisible=!1}get activeAnnotations(){return this._activeAnnotations}set activeAnnotations(e){e!==this._activeAnnotations&&(this._activeAnnotations=e,this.emitUpdateEvent())}get selectedState(){return this._activeAnnotations.activeAnnotation.data.viewId}createView(){return new ni(this)}activateTask(){this.startObserving(),super.activateTask(),this.synchAudioOptions()}deactivateTask(){this.stopObserving(),super.deactivateTask()}update(e){const{ins:t}=this;if(!this.activeDocument)return!1;if(t.mode.changed&&this.emitUpdateEvent(),t.audio.changed){const e=this.activeDocument.setup.audio,n=t.audio.value>0?e.getAudioList()[t.audio.value-1].id:"";n!=e.narrationId||""==n?this._activeAnnotations.ins.audioId.setValue(n):(t.audio.setValue(0),Ue.Ay.show("Narration audio cannot be used in an annotation.","warning"))}return t.selection.changed&&this.setAudio(),!0}removeAnnotation(){const e=this.activeAnnotations;if(e){const t=e.activeAnnotation;t&&e.removeAnnotation(t)}}saveAnnotationView(){const e=this._machine,t=e.getTargetProperties(),n=t.findIndex(e=>"Orbit"==e.name),i=t.findIndex(e=>"Offset"==e.name),r=e.getCurrentValues();r.forEach((e,t)=>{t!=n&&t!=i&&(r[t]=null)});const o=e.setState({values:r,curve:oi.k.EaseOutQuad,duration:1,threshold:.5}),s=this._activeAnnotations.activeAnnotation;s.set("viewId",o),this._activeAnnotations.updateAnnotation(s,!0)}restoreAnnotationView(){const e=this._machine,t=this._activeAnnotations.activeAnnotation,n=e.getTargetProperties().findIndex(e=>"ActiveId"==e.name);if(n>=0){e.getState(this.selectedState).values[n]=t.data.id}const i=this.getMainComponent(si.A);e.tweenTo(this.selectedState,i.context.secondsElapsed)}deleteAnnotationView(){this._machine.deleteState(this.selectedState);const e=this._activeAnnotations.activeAnnotation;e.set("viewId",""),this._activeAnnotations.updateAnnotation(e,!0)}onPointerUp(e){if(e.isDragging)return;const t=this.activeAnnotations;if(!t)return;const n=t.getComponent($e.A);if(e.component===n){ai.fromArray(n.ins.position.value),Vn.DI(n.ins.rotation.value,$e.A.rotationOrder,ci),li.setScalar(n.ins.scale.value),di.compose(ai,ci,li);const t=(0,ri.I)(n.object3D,e.object3D),i=t.clone().invert(),r=n.localBoundingBox.clone().applyMatrix4(t);di.copy(di.multiply(i)),ui.getNormalMatrix(di);const o=e.view.pickPosition(e,r).applyMatrix4(di).toArray(),s=e.view.pickNormal(e).applyMatrix3(ui).toArray(),a=this.ins.mode.getValidatedValue();a===hi.Create?(this.createAnnotation(o,s),e.stopPropagation=!0):a===hi.Move&&(this.moveAnnotation(o,s),e.stopPropagation=!0)}}createAnnotation(e,t){const n=this.activeDocument.setup.language,i=n.ins.primarySceneLanguage.value,r=this.activeAnnotations;if(!r)return;const o=r.activeAnnotation;let s;o&&(s=o.toJSON(),s.id=Yn.A.generateId());const a=r.getComponent($e.A),l=new Yn.A(s);l.language=i;const c=l.data;if(c.position=e,c.direction=t,!s){const e=this.getSystemComponent(ii.A);this._defaultScale=.05*e.outs.boundingRadius.value,c.scale=this._defaultScale*(1/a.outs.unitScale.value)}r.addAnnotation(l),r.activeAnnotation=l,n.ins.activeLanguage.setValue(i)}moveAnnotation(e,t){const n=this.activeAnnotations;if(n){const i=n.activeAnnotation;i&&(i.data.position=e,i.data.direction=t,i.update(),n.updateAnnotation(i),this.emitUpdateEvent())}}onActiveDocument(e,t){super.onActiveDocument(e,t),e&&(e.setup.audio.outs.updated.off("value",this.synchAudioOptions,this),e.setup.language.outs.activeLanguage.off("value",this.update,this),this._machine=null),t&&(t.setup.language.outs.activeLanguage.on("value",this.update,this),t.setup.audio.outs.updated.on("value",this.synchAudioOptions,this),this._machine=t.setup.snapshots)}onActiveNode(e,t){const n=e?e.getComponent(Bn.A,!0):null,i=t?t.getComponent(Bn.A,!0):null;n&&(n.off("annotation-update",this.emitUpdateEvent,this),n.off("click",this.onAnnotationClick,this),n.activeAnnotation=null),i&&(i.on("click",this.onAnnotationClick,this),i.on("annotation-update",this.emitUpdateEvent,this));const r=e?e.getComponent($e.A,!0):null,o=t?t.getComponent($e.A,!0):null;r&&r.off("pointer-up",this.onPointerUp,this),o&&o.on("pointer-up",this.onPointerUp,this),this.activeAnnotations=i}emitUpdateEvent(){this.emit("update"),this.ins.selection.set()}onAnnotationClick(e){const t=document.getElementsByClassName("ff-text-edit");for(let e of t)e.blur()}synchAudioOptions(){const e=this.activeDocument.setup.audio,t=["None"];t.push(...e.getAudioList().map(e=>e.name)),this.ins.audio.setOptions(t)}setAudio(){const e=this._activeAnnotations;if(e){const t=this.activeDocument.setup.audio,n=t.getAudioClip(e.ins.audioId.value);this.ins.audio.setValue(n?t.getAudioList().indexOf(n)+1:0)}}}pi.typeName="CVAnnotationsTask",pi.text="Annotations",pi.icon="comment",pi.ins={mode:Ie.gK.Enum("Mode",hi,hi.Off),audio:Ie.gK.Option("Annotation.Audio",["None"],0),selection:Ie.gK.Event("Annotation.Selection")};var mi=n(1572),fi=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let gi=class extends $n{constructor(){super(...arguments),this.selectedItem=null,this.loadedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-derivative-list")}renderItem(e){const n=e===this.loadedItem;return t.qy`<ff-icon name=${n?"check":"empty"}></ff-icon>
            <span>${mi.UH[e.data.usage]} - ${mi.a9[e.data.quality]}</span>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{derivative:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{derivative:null}}))}};fi([(0,t.MZ)({attribute:!1})],gi.prototype,"selectedItem",void 0),fi([(0,t.MZ)({attribute:!1})],gi.prototype,"loadedItem",void 0),gi=fi([(0,t.EM)("sv-derivative-list")],gi);var vi=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let yi=class extends Lt{render(){if(!this.activeDocument)return;const e=this.activeNode,n=e&&e.model,i=this.activeDocument.setup.language;if(!n)return t.qy`<div class="sv-placeholder">${i.getUILocalizedString("Please select a model node to inspect its derivatives")}</div>`;const r=n.derivatives.getByUsage(Qe.UH.Web3D),o=n.ins.quality.value,s=n.derivatives.get(Qe.UH.Web3D,o),a=n.outs.quality.value,l=n.derivatives.get(Qe.UH.Web3D,a),c=s?t.qy``:null;return t.qy`<div class="ff-flex-row ff-flex-wrap">
        </div>
        <sv-derivative-list .data=${r} .selectedItem=${s} .loadedItem=${l} @select=${this.onSelectDerivative}></sv-derivative-list>
        ${c}`}onSelectDerivative(e){if(e.detail.derivative){this.activeNode.model.ins.quality.setValue(e.detail.derivative.data.quality)}}onActiveNode(e,t){e&&e.model&&(e.model.ins.quality.off("value",this.onUpdate,this),e.model.outs.quality.off("value",this.onUpdate,this),e.model.outs.updated.off("value",this.onUpdate,this)),t&&t.model&&(t.model.ins.quality.on("value",this.onUpdate,this),t.model.outs.quality.on("value",this.onUpdate,this),t.model.outs.updated.on("value",this.onUpdate,this)),super.onActiveNode(e,t)}};yi=vi([(0,t.EM)("sv-derivatives-task-view")],yi);const bi=yi;class Ai extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(Ai.ins);const n=this.configuration;n.interfaceVisible=!1,n.bracketsVisible=!1,n.gridVisible=!1,n.annotationsVisible=!1,n.lodEnabled=!1}createView(){return new bi(this)}activateTask(){this.startObserving(),super.activateTask()}deactivateTask(){this.stopObserving(),super.deactivateTask()}}Ai.typeName="CVDerivativesTask",Ai.text="Derivatives",Ai.icon="hierarchy",Ai.ins={};var _i,wi=n(2617),xi=n.n(wi),Ci=n(2867),Ei=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Mi=_i=class extends Ye.Ay{static show(e,t,n,i,r,o){const s=new _i(e,t,n,i);return s.defaultValue=r,s.portal=o,(o||document.body).appendChild(s),new Promise((e,t)=>{s.on("close",t=>e(t.detail))})}constructor(e,t,n,i){super(),this.closable=!1,this.value="",this.position="center",this.modal=!0,this.type=n||"info",this.caption=e||"Message",this.text=t||"",this.icon="",this.buttons=i||"ok",this.defaultValue="",this.value=""}close(e){this.dispatchCloseEvent(!1),this.remove()}dispatchCloseEvent(e,t=""){const n={ok:e,cancel:!e,text:t};this.dispatchEvent(new CustomEvent("close",{detail:n}))}firstConnected(){super.firstConnected(),this.classList.add("ff-message-box"),setTimeout(()=>this.classList.add("ff-transition"))}updated(){super.updated();this.getElementsByClassName("ff-default").item(0).focus()}render(){const e=this.icon||this.type,t=this.buttons||"ok",n=[];"ok"!==t&&"ok-cancel"!==t||n.push(Ye.qy`<ff-button class="ff-default" text="OK" @click=${this.onOK}></ff-button>`),"ok-cancel"!==t&&"cancel"!==t||n.push(Ye.qy`<ff-button text="Cancel" @click=${this.onCancel}></ff-button>`),"yes-no"===t&&(n.push(Ye.qy`<ff-button class="ff-default" text="Yes" @click=${this.onOK}></ff-button>`),n.push(Ye.qy`<ff-button text="No" @click=${this.onCancel}></ff-button>`));const i="prompt"===this.type?Ye.qy`<ff-line-edit class="ff-default" text=${this.defaultValue} @change=${this.onInputChange}></ff-line-edit>`:null;return Ye.qy`<div class="ff-flex-row ff-title">
                <ff-icon class="ff-type-icon" name=${e}></ff-icon>
                <div class="ff-content">
                    <div class="ff-caption">${this.caption}</div>
                    <div class="ff-text">${this.text}</div>
                    ${i}
                </div>
                ${this.closable?Ye.qy`<ff-button class="ff-close-button" icon="close" transparent @click=${this.onCancel}></ff-button>`:null}
            </div>
            <div class="ff-flex-row ff-buttons"><div class="ff-flex-spacer"></div>${n}</div>`}onOK(){this.dispatchCloseEvent(!0,this.value),this.remove()}onCancel(){this.dispatchCloseEvent(!1),this.remove()}onInputChange(e){this.value=e.detail.text}};Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"type",void 0),Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"caption",void 0),Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"text",void 0),Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"icon",void 0),Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"buttons",void 0),Ei([(0,Ye.MZ)({type:String})],Mi.prototype,"defaultValue",void 0),Ei([(0,Ye.MZ)({type:Boolean})],Mi.prototype,"closable",void 0),Mi=_i=Ei([(0,Ye.EM)("ff-message-box")],Mi);const Si=Mi;var Ti=n(3911),ki=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Li=class extends Lt{connected(){super.connected(),this.task.outs.article.on("value",this.onArticleChange,this),this.activeDocument.setup.language.ins.primarySceneLanguage.on("value",this.onUpdate,this)}disconnected(){this.task.outs.article.off("value",this.onArticleChange,this),this.activeDocument.setup.language.ins.primarySceneLanguage.off("value",this.onUpdate,this),super.disconnected()}render(){if(!this.activeDocument)return;const e=this.task,n=e.articles,i=e.activeArticle,r=this.activeDocument.setup.language,o=qn.aL[r.ins.activeLanguage.value],s=qn.aL[r.ins.primarySceneLanguage.value];if(!n)return t.qy`<div class="sv-placeholder">${r.getUILocalizedString("Please select a scene or model node to edit its articles.")}</div>`;const a=i?t.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${r.ins.activeLanguage}></sv-property-view>
            <div class="sv-label">Title</div>
            <ff-line-edit name="title" text=${e.ins.title.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Tags</div>
            <ff-line-edit name="tags" text=${e.ins.tags.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">Lead</div>
            <ff-text-edit name="lead" text=${e.ins.lead.value} @change=${this.onTextEdit}></ff-text-edit>
            <sv-property-view class="sv-property-block" disabled .property=${e.ins.uri}></sv-property-view>
        </div>`:null;i&&i.uri;return t.qy`<div class="sv-commands">
            <ff-button text="${r.getUILocalizedString("Create")}" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button title="${r.getUILocalizedString("Move Article Up")}" icon="up" ?disabled=${!i} @click=${this.onClickUp}></ff-button>
            <ff-button title="${r.getUILocalizedString("Move Article Down")}" icon="down" ?disabled=${!i} @click=${this.onClickDown}></ff-button>          
            <ff-button text="${r.getUILocalizedString("Delete")}" icon="trash" ?disabled=${!i} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${r.getUILocalizedString("Default:")+" "+s}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${r.getUILocalizedString("Active:")+" "+o}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-article-list .data=${n.slice()} .selectedItem=${i} .activeLanguage=${o} .primarySceneLanguage=${s} @select=${this.onSelectArticle} @edit=${this.onEditArticle}></sv-article-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${a}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.create.set()}onClickEdit(){this.task.ins.edit.set()}onClickDelete(){Si.show("Delete Article","Are you sure?","warning","ok-cancel").then(e=>{e.ok&&this.task.ins.delete.set()})}onClickUp(){this.task.ins.moveArticleUp.set()}onClickDown(){this.task.ins.moveArticleDown.set()}onTextEdit(e){const t=this.task,n=e.target,i=e.detail.text;"lead"===n.name?t.ins.lead.setValue(i):"tags"===n.name?t.ins.tags.setValue(i):"title"===n.name&&t.ins.title.setValue(Xn()(i,{allowedTags:["i"]}))}onSelectArticle(e){const t=e.detail.article;this.task.reader.ins.articleId.setValue(t?t.id:"")}onEditArticle(e){this.task.ins.edit.set()}onArticleChange(){this.onUpdate()}};Li=ki([(0,t.EM)("sv-articles-task-view")],Li);const Di=Li;let Ii=class extends $n{constructor(){super(...arguments),this.selectedItem=null,this.activeLanguage=qn.aL[qn.Nm],this.primarySceneLanguage=qn.aL[qn.Nm]}firstConnected(){super.firstConnected(),this.classList.add("sv-document-list")}renderItem(e){const n=e.titleIn(this.primarySceneLanguage),i=e.titleIn(this.activeLanguage),r=t.qy`<span class="sv-missing-translation">Missing content</span>`;return t.qy`<div class="ff-flex-row ff-group">
            <div class="sv-task-item">${n||r}</div>
            <div class="sv-task-item sv-item-border-l">${i||r}</div>
            </div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t){this.dispatchEvent(new CustomEvent("select",{detail:{article:t}}))}onDblClickItem(e,t,n){this.dispatchEvent(new CustomEvent("edit",{detail:{article:t}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{article:null}}))}};ki([(0,t.MZ)({attribute:!1})],Ii.prototype,"selectedItem",void 0),ki([(0,t.MZ)({type:qn.aL})],Ii.prototype,"activeLanguage",void 0),ki([(0,t.MZ)({type:qn.aL})],Ii.prototype,"primarySceneLanguage",void 0),Ii=ki([(0,t.EM)("sv-article-list")],Ii);class Ri extends kt{get articles(){return this.meta&&this.meta.articles.items}get activeArticle(){return this.outs.article.value}get mediaManager(){return this.getMainComponent(Xe)}get assetWriter(){return this.getMainComponent(xt)}constructor(e,t){super(e,t),this.ins=this.addInputs(Ri.ins),this.outs=this.addOutputs(Ri.outs),this.meta=null,this.reader=null;const n=this.configuration;n.interfaceVisible=!0,n.bracketsVisible=!0}activateTask(){this.startObserving(),super.activateTask()}deactivateTask(){this.reader.ins.articleId.setValue(""),this.mediaManager.open(null),this.stopObserving(),super.deactivateTask()}update(e){const t=this.ins,n=this.outs,i=this.meta,r=this.activeArticle;if(!this.activeDocument)return!1;const o=this.activeDocument.setup.language;if(i&&t.create.changed){const e=new Ti.A;e.language=o.ins.primarySceneLanguage.value;const t=Xe.articleFolder;e.uri=`${t}/new-article-${e.id}-${qn.aL[e.language]}.html`;const n=this.getGraphComponent(je,!0);n&&n.addFile(e.uri),this.createEditArticle(e),i.articles.append(e),this.reader.outs.count.setValue(i.articles.length),o.ins.activeLanguage.setValue(o.ins.primarySceneLanguage.value)}else if(r&&t.version.changed)this.createEditArticle(r);else{if(r){if(t.uri.changed){if(r.uri=t.uri.value,this.reader.ins.refresh.set(),!this.mediaManager.getAssetByPath(r.uri))return new Ue.Ay(`Unable to find article: '${r.uri}'. Check asset name.`,"error",4e3),this.mediaManager.open(null),!1;t.edit.set()}const e=this.mediaManager.getAssetByPath(r.uri);t.edit.changed&&(e?this.mediaManager.open(e):(new Ue.Ay(`Unable to find article: '${r.uri}'. Check asset name.`,"error",4e3),this.mediaManager.open(null),this.reader.ins.refresh.set())),t.delete.changed&&(this.deleteArticle(r),this.reader.outs.count.setValue(i.articles.length)),t.title.changed&&(r.title=t.title.value),(t.lead.changed||t.tags.changed)&&(r.lead=t.lead.value,r.tags=t.tags.value.split(",").map(e=>e.trim()).filter(e=>!!e)),t.moveArticleUp.changed&&this.meta.articles.moveItem(r,-1),t.moveArticleDown.changed&&this.meta.articles.moveItem(r,1)}else t.edit.changed&&this.mediaManager.open(null);n.article.set()}return!0}createView(){return new Di(this)}deleteArticle(e){this.meta.articles.removeItem(e),Object.values(qn.aL).filter(e=>!isNaN(Number(e))).forEach(t=>{e.language=t;const n=this.mediaManager.getAssetByPath(e.uri);n&&this.mediaManager.delete(n)});this.system.getComponents(Bn.A).forEach(t=>{t.getAnnotations().forEach(n=>{n.data.articleId===e.id&&(n.set("articleId",""),t.updateAnnotation(n))})})}createEditArticle(e){const t=e.uri;this.assetWriter.putText(`<h1>${e.title}</h1>`,t).then(()=>this.mediaManager.refresh()).then(()=>{this.mediaManager.getAssetByPath(t)&&this.reader.ins.articleId.setValue(e.id)}).catch(e=>Si.show("Error",`Failed to create article at '${t}'`,"error"))}getSafeArticlePath(e){if(!e)return"";const t=xi()(e,{replacement:"-"}).replace(/\s/g,"-").toLowerCase();return Xe.articleFolder+"/"+t+".html"}onActiveDocument(e,t){e&&(e.setup.language.outs.activeLanguage.off("value",this.onDocumentLanguageChange,this),this.mediaManager.off("asset-rename",this.onAssetRename,this),this.reader.outs.article.off("value",this.onArticleChange,this),this.reader=null),t&&(this.reader=t.setup.reader,this.reader.outs.article.on("value",this.onArticleChange,this),this.mediaManager.on("asset-rename",this.onAssetRename,this),t.setup.language.outs.activeLanguage.on("value",this.onDocumentLanguageChange,this))}onActiveNode(e,t){e&&(this.meta=null),t&&(t.meta||t.createComponent(Ze.A),this.meta=t.meta),this.onArticleChange()}onArticleChange(){const e=this.ins,t=this.outs,n=this.meta,i=this.activeDocument.setup.language;let r=this.reader.activeArticle;if(n&&r&&n.articles.getById(r.id)){if(r=n.articles.getById(r.id),e.title.setValue(r.title,!0),e.lead.setValue(r.lead,!0),e.tags.setValue(r.tags.join(", "),!0),void 0===r.uri){const e=Xe.articleFolder;r.uri=`${e}/new-article-${r.id}-${i.codeString()}.html`,this.ins.version.set()}else this.ins.edit.set();e.uri.setValue(r.uri,!0),t.article.setValue(r)}else e.title.setValue("",!0),e.lead.setValue("",!0),e.tags.setValue("",!0),e.uri.setValue("",!0),t.article.setValue(null),e.edit.set()}onDocumentLanguageChange(){this.activeArticle;const{ins:e}=this;this.onArticleChange()}onAssetRename(e){this.onArticleChange()}}Ri.typeName="CVArticlesTask",Ri.text="Articles",Ri.icon="article",Ri.ins={create:Ie.gK.Event("Articles.Create"),edit:Ie.gK.Event("Articles.Edit"),delete:Ie.gK.Event("Articles.Delete"),version:Ie.gK.Event("Articles.Version"),moveArticleUp:Ie.gK.Event("Articles.MoveUp"),moveArticleDown:Ie.gK.Event("Articles.MoveDown"),title:Ie.gK.String("Article.Title"),lead:Ie.gK.String("Article.Lead"),tags:Ie.gK.String("Article.Tags"),uri:Ie.gK.String("Article.URI")},Ri.outs={article:Ie.gK.Object("Article",Ti.A)};var Oi=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Pi=class extends Lt{constructor(){super(...arguments),this.featureConfigMode=!1}get snapshots(){return this.activeDocument.setup.snapshots}renderFeatureMenu(){const e=this.snapshots.targetFeatures,t=Object.keys(e),n=this.activeDocument.setup.language,i=t.map(t=>{const n=t[0].toUpperCase()+t.substr(1),i=!!e[t];return St.qy`<ff-button text=${n} name=${t} ?selected=${i} @click=${this.onClickFeature}></ff-button>`});return St.qy`<div class="sv-commands">
            <ff-button text="${n.getUILocalizedString("OK")}" icon="" @click=${this.onFeatureMenuConfirm}></ff-button>
            <ff-button text="${n.getUILocalizedString("Cancel")}" icon="" @click=${this.onFeatureMenuCancel}></ff-button>
        </div><div class="ff-flex-item-stretch sv-tour-feature-menu">${i}</div>`}render(){if(!this.activeDocument)return;const e=this.task,t=e.tours;if(!t)return St.qy`<div class="sv-placeholder">Please select a document to edit its tours.</div>`;if(!t.ins.enabled.value)return St.qy`<div class="sv-placeholder">Please activate the tour button in the main menu.</div>`;if(this.featureConfigMode)return this.renderFeatureMenu();const n=t.tours,i=t.activeTour,r=e.ins,o=this.activeDocument.setup.language,s=qn.aL[o.ins.activeLanguage.value],a=qn.aL[o.ins.primarySceneLanguage.value],l=i?St.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${o.ins.activeLanguage}></sv-property-view>
            <div class="sv-label">${o.getUILocalizedString("Title")}</div>
            <ff-line-edit name="title" text=${r.tourTitle.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">${o.getUILocalizedString("Tags")}</div>
            <ff-line-edit name="tags" text=${r.tourTags.value} @change=${this.onTextEdit}></ff-line-edit>
            <div class="sv-label">${o.getUILocalizedString("Lead")}</div>
            <ff-text-edit name="lead" text=${r.tourLead.value} @change=${this.onTextEdit}></ff-text-edit>
        </div>`:null;return St.qy`<div class="sv-commands">
            <ff-button title="${o.getUILocalizedString("Create Tour")}" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button title="${o.getUILocalizedString("Move Tour Up")}" icon="up" ?disabled=${!i} @click=${this.onClickUp}></ff-button>
            <ff-button title="${o.getUILocalizedString("Move Tour Down")}" icon="down" ?disabled=${!i} @click=${this.onClickDown}></ff-button>
            <ff-button title="${o.getUILocalizedString("Delete Tour")}" icon="trash" ?disabled=${!i} @click=${this.onClickDelete}></ff-button>
            <ff-button title="${o.getUILocalizedString("Snapshot Configuration")}" icon="bars" @click=${this.onClickConfig}></ff-button>
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">${o.getUILocalizedString("Default:")+" "+a}</div><div class="sv-panel-header sv-task-item sv-item-border-l">${o.getUILocalizedString("Active:")+" "+s}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-tour-list .data=${n.slice()} .selectedItem=${i} .activeLanguage=${s} .primarySceneLanguage=${a} @select=${this.onSelectTour}></sv-tour-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${l}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.createTour.set()}onClickDelete(){this.task.ins.deleteTour.set()}onClickUp(){this.task.ins.moveTourUp.set()}onClickDown(){this.task.ins.moveTourDown.set()}onClickConfig(){this.featureConfigMode=!0,this.requestUpdate()}onSelectTour(e){this.task.tours.ins.tourIndex.setValue(e.detail.index)}onFeatureMenuConfirm(){this.snapshots.updateTargets(),this.featureConfigMode=!1,this.requestUpdate()}onFeatureMenuCancel(){this.featureConfigMode=!1,this.requestUpdate()}onClickFeature(e){const t=this.snapshots.targetFeatures,n=e.target.name;t[n]=!t[n],this.requestUpdate()}onTextEdit(e){const t=this.task,n=e.target,i=e.detail.text;"title"===n.name?t.ins.tourTitle.setValue(Xn()(i,{allowedTags:["i"]})):"lead"===n.name?t.ins.tourLead.setValue(Xn()(i,{allowedTags:["b","i","em","strong","sup","sub"]})):"tags"===n.name&&t.ins.tourTags.setValue(i)}onActiveDocument(e,t){e&&e.setup.tours.outs.tourIndex.off("value",this.onUpdate,this),t&&t.setup.tours.outs.tourIndex.on("value",this.onUpdate,this),this.requestUpdate()}};Pi=Oi([(0,St.EM)("sv-tours-task-view")],Pi);const Bi=Pi;let Ni=class extends $n{constructor(){super(...arguments),this.selectedItem=null,this.activeLanguage=null,this.primarySceneLanguage=null}firstConnected(){super.firstConnected(),this.classList.add("sv-tour-list")}renderItem(e){0===Object.keys(e.titles).length&&(e.titles[this.primarySceneLanguage]=e.title);const t=e.titles[this.primarySceneLanguage],n=e.titles[this.activeLanguage],i=St.qy`<span class="sv-missing-translation">Missing content</span>`;return St.qy`<div class="ff-flex-row ff-group">
        <div class="sv-task-item">${t||i}</div>
        <div class="sv-task-item sv-item-border-l">${n||i}</div>
        </div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{tour:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{tour:null,index:-1}}))}};Oi([(0,St.MZ)({attribute:!1})],Ni.prototype,"selectedItem",void 0),Oi([(0,St.MZ)({attribute:!1})],Ni.prototype,"activeLanguage",void 0),Oi([(0,St.MZ)({attribute:!1})],Ni.prototype,"primarySceneLanguage",void 0),Ni=Oi([(0,St.EM)("sv-tour-list")],Ni);let Ui=0,Fi=0;class zi extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(zi.ins),this.outs=this.addOutputs(zi.outs),this.tours=null,this.machine=null;this.configuration.bracketsVisible=!1}create(){super.create(),this.startObserving()}dispose(){this.stopObserving(),super.dispose()}update(e){const t=this.ins,n=this.tours,i=this.machine;if(!n||!this.activeDocument)return!1;const r=n.tours,o=n.outs.tourIndex.value,s=r[o],a=this.activeDocument.setup.language;if(s){const e=s.steps,l=n.outs.stepIndex.value,c=e[l];if(t.createStep.changed){const t=i.setState({values:i.getCurrentValues(),curve:oi.k.EaseOutQuad,duration:1.5,threshold:.5});return e.splice(l+1,0,{title:"",titles:{},altTexts:{},id:t}),e[l+1].titles[qn.aL[a.ins.primarySceneLanguage.value]]=a.getSceneSetupLocalizedString("New Step #")+Fi++,n.ins.stepIndex.setValue(l+1),!0}if(c){if(t.stepTitle.changed||t.stepCurve.changed||t.stepDuration.changed||t.stepThreshold.changed||t.stepAltText.changed)return n.stepTitle=t.stepTitle.value,n.stepAltText=t.stepAltText.value,i.ins.curve.setValue(t.stepCurve.value),i.ins.duration.setValue(t.stepDuration.value),i.ins.threshold.setValue(t.stepThreshold.value),n.ins.stepIndex.setValue(l),!0;if(t.updateStep.changed)return i.ins.store.set(),!0;if(t.deleteStep.changed)return e.splice(l,1),i.ins.delete.set(),n.ins.stepIndex.setValue(l),!0;if(l>0&&t.moveStepUp.changed)return e[l]=e[l-1],e[l-1]=c,n.ins.stepIndex.setValue(l-1),!0;if(l<e.length-1&&t.moveStepDown.changed)return e[l]=e[l+1],e[l+1]=c,n.ins.stepIndex.setValue(l+1),!0}if(t.tourTitle.changed||t.tourLead.changed||t.tourTags.changed)return t.tourTitle.changed&&(n.title=t.tourTitle.value),t.tourLead.changed&&(n.lead=t.tourLead.value),t.tourTags.changed&&(n.taglist=t.tourTags.value.split(",").map(e=>e.trim()).filter(e=>!!e)),n.ins.tourIndex.set(),!0;if(t.deleteTour.changed)return s.steps.forEach(e=>i.deleteState(e.id)),r.splice(o,1),n.ins.tourIndex.setValue(o),n.outs.count.setValue(r.length),!0;if(o>0&&t.moveTourUp.changed)return r[o]=r[o-1],r[o-1]=s,n.ins.tourIndex.setValue(o-1),!0;if(o<r.length-1&&t.moveTourDown.changed)return r[o]=r[o+1],r[o+1]=s,n.ins.tourIndex.setValue(o+1),!0}return!t.createTour.changed||(r.splice(o+1,0,{title:"",titles:{},lead:"",leads:{},tags:[],taglist:{},steps:[]}),r[o+1].titles[qn.aL[a.ins.primarySceneLanguage.value]]="New Tour #"+Ui++,n.ins.tourIndex.setValue(o+1),n.outs.count.setValue(r.length),a.ins.activeLanguage.setValue(a.ins.primarySceneLanguage.value),!0)}createView(){return new Bi(this)}activateTask(){super.activateTask(),this.tours&&this.tours.ins.enabled.setValue(!0)}deactivateTask(){this.tours&&0===this.tours.outs.count.value&&this.tours.ins.enabled.setValue(!1),super.deactivateTask()}onActiveDocument(e,t){e&&(this.isActiveTask&&this.tours.ins.enabled.setValue(!1),this.tours.outs.tourIndex.off("value",this.onTourChange,this),this.tours.outs.stepIndex.off("value",this.onStepChange,this),e.setup.language.outs.activeLanguage.off("value",this.onDocumentLanguageChange,this),this.tours=null,this.machine=null),t&&(this.tours=t.setup.tours,this.machine=this.tours.getComponent(oi.A),this.tours.outs.tourIndex.on("value",this.onTourChange,this),this.tours.outs.stepIndex.on("value",this.onStepChange,this),t.setup.language.outs.activeLanguage.on("value",this.onDocumentLanguageChange,this),this.isActiveTask&&this.tours.ins.enabled.setValue(!0)),this.changed=!0}onTourChange(){const e=this.ins,t=this.tours,n=t.activeTour;e.tourTitle.setValue(n?t.title:"",!0),e.tourLead.setValue(n?t.lead:"",!0),e.tourTags.setValue(n?t.taglist.join(", "):"",!0)}onStepChange(){const e=this.ins,t=this.tours.activeStep,n=t?this.machine.getState(t.id):null;e.stepTitle.setValue(t?this.tours.stepTitle:"",!0),e.stepAltText.setValue(t?this.tours.stepAltText:"",!0),e.stepCurve.setValue(n?n.curve:oi.k.Linear,!0),e.stepDuration.setValue(n?n.duration:1,!0),e.stepThreshold.setValue(n?n.threshold:.5,!0)}onDocumentLanguageChange(){const e=this.tours;this.onTourChange(),this.onStepChange(),e.ins.tourIndex.setValue(e.outs.tourIndex.value)}}zi.typeName="CVToursTask",zi.text="Tours",zi.icon="globe",zi.ins={createTour:Ie.gK.Event("Tours.Create"),deleteTour:Ie.gK.Event("Tours.Delete"),moveTourUp:Ie.gK.Event("Tours.MoveUp"),moveTourDown:Ie.gK.Event("Tours.MoveDown"),tourTitle:Ie.gK.String("Tour.Title"),tourLead:Ie.gK.String("Tour.Lead"),tourTags:Ie.gK.String("Tour.Tags"),updateStep:Ie.gK.Event("Step.Update"),createStep:Ie.gK.Event("Step.Create"),deleteStep:Ie.gK.Event("Step.Delete"),moveStepUp:Ie.gK.Event("Step.MoveUp"),moveStepDown:Ie.gK.Event("Step.MoveDown"),stepTitle:Ie.gK.String("Step.Title"),stepCurve:Ie.gK.Enum("Step.Curve",oi.k),stepDuration:Ie.gK.Number("Step.Duration",1),stepThreshold:Ie.gK.Percent("Step.Threshold",.5),stepAltText:Ie.gK.String("Step.AltText")},zi.outs={};var Hi=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ji=class extends Lt{constructor(){super(...arguments),this.featureConfigMode=!1,this.sceneview=null}get snapshots(){return this.activeDocument.setup.snapshots}connected(){super.connected(),this.task.on("update",this.onUpdate,this);const e=this.getRootNode().getElementsByTagName("voyager-explorer")[0];this.sceneview=e.shadowRoot.querySelector(".sv-scene-view")}disconnected(){this.task.off("update",this.onUpdate,this),this.task.ins.paintMode.setValue(Ki.Interact),super.disconnected()}render(){const e=this.task,t=e.overlays;if(!this.activeModel)return St.qy`<div class="sv-placeholder">Please select a model to edit its overlays.</div>`;const n=e.ins,i=t[n.activeIndex.value],r=this.activeModel.activeDerivative.data.quality;this.sceneview.style.cursor=n.paintMode.value===Ki.Interact?"grab":"default";const o=i?St.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <div class="sv-label"><b>Overlay Editing [${Qe.a9[r]} Derivative]</b></div>
            <sv-property-view .property=${n.overlayColor}></sv-property-view>
            <sv-property-view .property=${n.overlayOpacity}></sv-property-view>
            <div class="sv-label"><b>Painting Tools</b></div>
            <ff-button-group class="sv-commands">
                <ff-button text="Interact" icon="pointer" class="ff-control" @click=${this.onClickInteract}></ff-button>
                <ff-button text="Paint" icon="brush" class="ff-control" @click=${this.onClickPaint}></ff-button>
                <ff-button text="Erase" icon="eraser" class="ff-control" @click=${this.onClickErase}></ff-button>
            </ff-button-group>
            <sv-property-view .property=${n.overlayBrushSize}></sv-property-view>
            <div class="sv-commands">
                <ff-button text="Fill All" class="ff-control" @click=${this.onClickFillAll}></ff-button>
                <ff-button text="Clear All" class="ff-control" @click=${this.onClickClearAll}></ff-button>
            </div>
        </div>`:null;return St.qy`<div class="sv-commands">
            <ff-button text="Create" icon="create" @click=${this.onClickOverlayCreate}></ff-button>       
            <ff-button text="Delete" icon="trash" ?disabled=${!i} @click=${this.onClickOverlayDelete}></ff-button>
            <ff-button text="Save" icon="save" ?disabled=${!i} @click=${this.onClickOverlaySave}></ff-button>
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item sv-task-item-full">Overlay Images</div></div>
                <div class="ff-splitter-section" style="flex-basis: 40%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-overlay-list .data=${t.slice()} .selectedItem=${i} @select=${this.onSelectOverlay}></sv-overlay-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 60%">
                    ${o}
                </div>
            </div>
        </div>`}onClickConfig(){this.featureConfigMode=!0,this.requestUpdate()}onSelectOverlay(e){e.detail.index!==this.task.ins.activeIndex.value&&(this.task.ins.activeIndex.setValue(e.detail.index),this.requestUpdate())}onActiveDocument(e,t){this.requestUpdate()}onActiveNode(e,t){this.activeModel=null,e&&e.model,t&&t.model&&(this.activeModel=t.model),super.onActiveNode(e,t)}onClickOverlayCreate(){this.task.ins.createOverlay.set()}onClickOverlayDelete(){this.task.ins.deleteOverlay.set()}onClickOverlaySave(){this.task.ins.saveOverlays.set()}onClickFillAll(){this.task.ins.overlayFill.set()}onClickClearAll(){this.task.ins.overlayClear.set()}onClickInteract(){this.task.ins.paintMode.setValue(Ki.Interact)}onClickPaint(){this.task.ins.paintMode.setValue(Ki.Paint)}onClickErase(){this.task.ins.paintMode.setValue(Ki.Erase)}};ji=Hi([(0,St.EM)("sv-overlay-task-view")],ji);const Vi=ji;let Yi=class extends $n{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-overlay-list")}renderItem(e){return St.qy`${e.isDirty?"(unsaved) ":null}${e.asset.data.uri}`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{target:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{target:null,index:-1}}))}};Hi([(0,St.MZ)({attribute:!1})],Yi.prototype,"selectedItem",void 0),Yi=Hi([(0,St.EM)("sv-overlay-list")],Yi);var Gi=n(7795);class Qi extends ln.BKk{constructor(){super(...arguments),this.isUVShader=!0,this.uniforms={index:{value:0}},this.vertexShader=["varying vec2 vUv;","void main() {","  #include <beginnormal_vertex>","  #include <begin_vertex>","  #include <project_vertex>","  vUv = uv;","}"].join("\n"),this.fragmentShader=["uniform float index;","varying vec2 vUv;","vec4 toVec4(float v) {","  float vn = v;","  float b0 = floor(vn * 255.0) / 255.0; vn = (vn - b0) * 256.0;","  float b1 = floor(vn * 255.0) / 255.0; vn = (vn - b1) * 256.0;","  float b2 = floor(vn * 255.0) / 255.0; vn = (vn - b2) * 256.0;","  float b3 = floor(vn * 255.0) / 255.0;","  return vec4(clamp(b0, 0.0, 1.0), clamp(b1, 0.0, 1.0), clamp(b2, 0.0, 1.0), clamp(b3, 0.0, 1.0));","}","void main() {","  gl_FragColor = index == 0.0 ? toVec4(vUv.x) : toVec4(vUv.y);","}"].join("\n")}}class $i extends ln.BKk{constructor(){super(...arguments),this.isZoneShader=!0,this.uniforms={zoneMap:{value:null}},this.vertexShader=["varying vec2 vUv;","void main() {","  #include <beginnormal_vertex>","  #include <begin_vertex>","  #include <project_vertex>","  vUv = uv;","}"].join("\n"),this.fragmentShader=["varying vec2 vUv;","uniform sampler2D zoneMap;","void main() {","  gl_FragColor = vec4(texture2D(zoneMap, vUv).xyz, 1.0);","}"].join("\n")}}const qi=new ln.Q1f;class Wi extends Gi.A{constructor(e){super(e),this.uvShader=new Qi,this.zoneShader=new $i}pickUV(e,t,n,i){i=i||new ln.Pq0;const r=n.viewport;(t=r.updateCamera(t)).layers.disable(1);const o=e.overrideMaterial,s=e.overrideMaterial=this.uvShader,a=this.renderer,l=this.pickTextures;a.getClearColor(qi);for(let i=0;i<2;++i)s.uniforms.index.value=i,r.applyPickViewport(l[i],n),a.setRenderTarget(l[i]),a.clear(),a.render(e,t);a.setRenderTarget(null),a.setClearColor(qi),e.overrideMaterial=o,t.layers.enable(1);const c=this.pickBuffer;for(let e=0;e<3;++e)a.readRenderTargetPixels(l[e],0,0,1,1,c),i.setComponent(e,2.337437050015319e-10*c[3]+5.983838848039216e-8*c[2]+1531862745098039e-20*c[1]+.003921568627451*c[0]);return i}pickZone(e,t,n,i,r){r=r||new ln.Pq0;const o=i.viewport;(n=o.updateCamera(n)).layers.disable(1);const s=e.overrideMaterial,a=e.overrideMaterial=this.zoneShader,l=this.renderer,c=this.pickTextures[0];l.getClearColor(qi),a.uniforms.zoneMap.value=t,o.applyPickViewport(c,i),l.setRenderTarget(c),l.clear(),l.render(e,n),l.setRenderTarget(null),l.setClearColor(qi),e.overrideMaterial=s,n.layers.enable(1);const d=this.pickBuffer;return l.readRenderTargetPixels(c,0,0,1,1,d),r.set(d[0],d[1],d[2])}}var Ki,Zi=n(3600);!function(e){e[e.Interact=0]="Interact",e[e.Paint=1]="Paint",e[e.Erase=2]="Erase"}(Ki||(Ki={}));class Xi extends kt{get assetManager(){return this.getMainComponent(Fe.A)}get assetReader(){return this.getMainComponent(Zi.A)}get material(){let e=null;if("Mesh"===this.activeModel.object3D.type){e=this.activeModel.object3D.material}else{const t=this.activeModel.object3D.getObjectByProperty("type","Mesh");t&&(e=t.material)}return e}get overlays(){return this.activeModel?this.activeModel.getOverlays():null}getCanvas(e){return this._canvasMap[e]?this._canvasMap[e]:this._canvasMap[e]=this.createZoneCanvas()}get activeCanvas(){const e=this.ins.activeIndex.value,t=this.overlays[e].asset.data.uri;return e>=0?this.getCanvas(t):null}getTexture(e){const t=this.ins.activeIndex.value,n=this.overlays[t];return n.fromFile&&(n.fromFile=!1,n.texture.dispose(),n.texture=new ln.GOR(this.getCanvas(e)),n.texture.flipY=!1),n.texture||(n.texture=new ln.GOR(this.getCanvas(e)),n.texture.flipY=!1),n.texture}setTexture(e,t){this._textureMap[e]=t}get activeTexture(){const e=this.ins.activeIndex.value;return e>=0?this.getTexture(this.overlays[e].asset.data.uri):null}get colorString(){return"#"+Math.round(255*this.ins.overlayColor.value[0]).toString(16).padStart(2,"0")+Math.round(255*this.ins.overlayColor.value[1]).toString(16).padStart(2,"0")+Math.round(255*this.ins.overlayColor.value[2]).toString(16).padStart(2,"0")+Math.round(255*this.ins.overlayOpacity.value).toString(16).padStart(2,"0")}constructor(e,t){super(e,t),this.ins=this.addInputs(Xi.ins),this.outs=this.addOutputs(Xi.outs),this.isPainting=!1,this._oldColor=[1,0,0],this._canvasMap={},this._textureMap={};this.configuration.bracketsVisible=!0,this.uv=new ln.I9Y}create(){super.create(),this.startObserving()}dispose(){this.stopObserving();for(let e in this._canvasMap)this._canvasMap[e]=null;super.dispose()}update(e){const t=this.ins,n=this.ins.activeIndex.value,i=this.overlays,r=this.activeModel;if(!i)return!1;const o=i[n];if(t.activeIndex.changed)return o&&o.fromFile&&!o.texture?this.assetReader.getTexture(o.asset.data.uri).then(e=>{e.flipY=!1,o.texture=e,this.material.userData.shader.uniforms.zoneMap.value=e,this.onOverlayChange()}):this.onOverlayChange(),!0;if(t.createOverlay.changed){const e=r.activeDerivative,n=Qe.a9[e.data.quality].toLowerCase(),i=this.getUniqueName(r.node.name,n),o=e.createAsset(Qe.iO.Image,i);o.data.mapType=Qe.oo.Zone;const s=r.getOverlay(i);return t.activeIndex.setValue(this.overlays.length-1),s.texture=this.getTexture(i),s.asset=o,this.onSave(),this.onOverlayChange(),this.emit("update"),!0}if(t.deleteOverlay.changed)return this._canvasMap[o.asset.data.uri]=null,this.activeModel.deleteOverlay(o.asset.data.uri),this.activeModel.activeDerivative.removeAsset(o.asset),t.activeIndex.setValue(-1),this.onOverlayChange(),this.emit("update"),!0;if(t.saveOverlays.changed)return this.onSave(),!0;if(t.overlayColor.changed||t.overlayOpacity.changed){const e=this.colorString;return this.ctx.fillStyle=e,this.ctx.strokeStyle=e,this._oldColor=t.overlayColor.value,!0}return t.paintMode.changed?(t.paintMode.value==Ki.Paint?this.ctx.globalCompositeOperation="source-over":t.paintMode.value==Ki.Erase&&(this.ctx.globalCompositeOperation="destination-out"),!0):t.overlayBrushSize.changed?(this.ctx.lineWidth=Math.round(t.overlayBrushSize.value),!0):t.overlayClear.changed?(this.ctx.globalCompositeOperation="destination-out",this.ctx.clearRect(0,0,this.activeCanvas.width,this.activeCanvas.height),this.ctx.globalCompositeOperation="source-over",this.updateOverlayTexture(),this.setSaveNeeded(!0),!0):!t.overlayFill.changed||(this.ctx.clearRect(0,0,this.activeCanvas.width,this.activeCanvas.height),this.ctx.fillRect(0,0,this.activeCanvas.width,this.activeCanvas.height),this.updateOverlayTexture(),this.setSaveNeeded(!0),!0)}createView(){return new Vi(this)}onActiveNode(e,t){if(e&&e.model&&(e.model.off("pointer-up",this.onPointerUp,this),e.model.off("pointer-down",this.onPointerDown,this),e.model.off("pointer-move",this.onPointerMove,this),e.model.outs.quality.off("value",this.onQualityChange,this),e.model.outs.overlayMap.off("value",this.onUpdateIdx,this)),t&&t.model){this.ins.activeNode.setValue(t.name),this.activeModel=t.model,this.onUpdateIdx(),t.model.on("pointer-up",this.onPointerUp,this),t.model.on("pointer-down",this.onPointerDown,this),t.model.on("pointer-move",this.onPointerMove,this),t.model.outs.quality.on("value",this.onQualityChange,this),t.model.outs.overlayMap.on("value",this.onUpdateIdx,this);const e=this.activeModel.ins.overlayMap;e.setOptions(["None"]),this.activeModel.activeDerivative.findAssets(Qe.iO.Image).filter(e=>e.data.mapType===Qe.oo.Zone).forEach(t=>{e.setOptions(e.schema.options.concat(t.data.uri))})}super.onActiveNode(e,t)}onOverlayChange(){const e=this.ins.activeIndex.value+1,t=e>0;if(this.activeModel.ins.overlayMap.value!=e&&this.activeModel.ins.overlayMap.setValue(e),t){const e=this.ctx?this.ctx.globalCompositeOperation:"source-over";this.ctx=this.activeCanvas.getContext("2d"),this.ctx.lineWidth=Math.round(this.ins.overlayBrushSize.value),this.ctx.fillStyle=this.colorString,this.ctx.globalCompositeOperation=e}this.material&&(this.material.userData.shader.uniforms.zoneMap.value=this.activeTexture,this.material.transparent=t,this.material.defines.USE_ZONEMAP=t),this.activeTexture&&this.updateOverlayTexture()}onUpdateIdx(){const e=this.activeModel.ins.overlayMap.value-1;this.ins.activeIndex.setValue(e)}onQualityChange(){this.ins.activeIndex.setValue(-1)}updateOverlayTexture(){this.activeTexture.needsUpdate=!0,this.system.getComponent(dn.A).forceRender()}onPointerDown(e){if(e.isDragging||!this.outs.isActive.value)return;if(this.ins.activeIndex.value<0)return;this.picker||(this.picker=new Wi(e.view.renderer));const t=this.activeModel;this.ins.paintMode.value!=Ki.Interact&&e.component===t&&0==e.originalEvent.button&&(e.stopPropagation=!0,Wi.add(t.object3D,!0),this.isPainting=!0,this.draw(e))}onPointerUp(e){this.isPainting&&this.setSaveNeeded(!0),this.isPainting=!1}onPointerMove(e){if(e.isDragging&&this.isPainting)return e.stopPropagation=!0,void this.draw(e)}draw(e){const t=this.system.getComponent(dn.A,!0).activeSceneComponent,n=t&&t.scene,i=t&&t.activeCamera;let r=this.picker.pickUV(n,i,e);this.uv.setX(r.x),this.uv.setY(r.y),this.activeTexture.transformUv(this.uv);const o=Math.round(this.ins.overlayBrushSize.value),s=Math.floor(this.uv.x*this.activeCanvas.width)-Math.floor(o/2),a=Math.floor(this.uv.y*this.activeCanvas.height)-Math.floor(o/2);this.ctx.clearRect(s,a,o,o),this.ctx.fillRect(s,a,o,o),this.updateOverlayTexture()}createZoneCanvas(){const e=this.material,t=e.map?e.map.image.width:4096,n=document.createElement("canvas"),i=n.getContext("2d");if(n.width=t,n.height=t,n.style.width="100%",n.style.height="100%",n.style.objectFit="scale-down",n.style.boxSizing="border-box",n.style.position="absolute",n.style.zIndex="2",n.style.setProperty("mix-blend-mode","multiply"),i.lineWidth=10,i.lineJoin="round",i.lineCap="round",i.globalAlpha=1,i.fillStyle="#FFFFFF00",i.strokeStyle="#FF000000",i.fillRect(0,0,t,t),this.overlays[this.ins.activeIndex.value].fromFile){const e=this.overlays[this.ins.activeIndex.value].texture;i.save(),i.drawImage(e.image,0,0),i.restore()}return n}onSave(){const e=this.activeCanvas,t=this.activeModel.activeDerivative.data.quality,n=this.overlays[this.ins.activeIndex.value].asset.data.uri,i=n.endsWith(".png")?"image/png":"image/jpeg",r=e.toDataURL(i);this.saveTexture(n,r,t)}saveTexture(e,t,n){const i=this.assetManager.getAssetUrl(e),r=this.assetManager.getAssetName(e),o=Ln(t),s=new File([o],r),a=this.graph.getMainComponent(je,!0);a?(a.addFile(e,[o]),new Ue.Ay(`Saved ${r} to scene package.`,"info",4e3)):fetch(i,{method:"PUT",body:s}).then(()=>{this.setSaveNeeded(!1),new Ue.Ay(`Successfully uploaded image to '${i}'`,"info",4e3)}).catch(e=>{new Ue.Ay(`Failed to upload image to '${i}'`,"error",8e3)})}setSaveNeeded(e){this.overlays[this.ins.activeIndex.value].isDirty=e,this.emit("update")}getUniqueName(e,t){for(var n=e+"-overlaymap-"+(this.overlays.length+1)+"-"+t+".png",i=2;this.overlays.some(e=>e.asset.data.uri==n);)n=e+"-overlaymap-"+(this.overlays.length+i)+"-"+t+".png",i++;return n}}Xi.typeName="CVOverlayTask",Xi.text="Overlay",Xi.icon="brush",Xi.ins={activeNode:Ie.gK.String("Targets.ActiveNode"),activeIndex:Ie.gK.Integer("Overlay.Index",-1),createOverlay:Ie.gK.Event("Overlay.Create"),deleteOverlay:Ie.gK.Event("Overlay.Delete"),saveOverlays:Ie.gK.Event("Overlay.Save"),overlayFill:Ie.gK.Event("Overlay.Fill"),overlayClear:Ie.gK.Event("Overlay.Clear"),overlayOpacity:Ie.gK.Percent("Overlay.Opacity",1),overlayColor:Ie.gK.ColorRGB("Overlay.Color",[1,0,0]),overlayBrushSize:Ie.gK.Unit("Overlay.BrushSize",{preset:10,min:1,max:100}),paintMode:Ie.gK.Enum("Paint.Mode",Ki,Ki.Interact)},Xi.outs={};var Ji=n(8446),er=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let tr=class extends Lt{constructor(){super(...arguments),this._dragCounter=0,this.selectedIndex=-1,this.optionText=["No","Yes"]}connected(){super.connected(),this.task.on("update",this.onUpdate,this),this.activeDocument.setup.audio.outs.narrationPlaying.on("value",this.onUpdate,this)}disconnected(){this.activeDocument.setup.audio.outs.narrationPlaying.off("value",this.onUpdate,this),this.task.off("update",this.onUpdate,this),super.disconnected()}render(){if(!this.task.audioManager||!this.activeDocument)return;const e=this.task.ins,t=this.activeDocument.setup.language,n=this.task.audioManager,i=n.getAudioList(),r=n.getAudioClip(e.activeId.value),o=!e.isNarration.value&&i.some(e=>e.id===this.task.audioManager.narrationId),s=r?St.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${e.title}></sv-property-view>
            <sv-property-view .property=${t.ins.activeLanguage}></sv-property-view>
            <div class="sv-indent">
                <sv-property-view id="filename" .property=${e.filepath} @drop=${this.onDropFile} @dragenter=${this.onDragEnter} @dragover=${this.onDragOver} @dragleave=${this.onDragLeave}></sv-property-view>
                <sv-property-view id="captionfile" .property=${e.captionPath} @drop=${this.onDropFile} @dragenter=${this.onDragEnter} @dragover=${this.onDragOver} @dragleave=${this.onDragLeave}></sv-property-view>
                <div class="sv-commands">
                    <sv-property-boolean .property=${e.isNarration} .text=${this.optionText} .customLabelStyle=${"sv-task-option-base-align"} ?disabled=${o}></sv-property-boolean>
                </div>
                <div class="sv-commands">
                    <ff-button text="Play" @click=${this.onClickPlay}></ff-button>
                    <ff-button text="Stop" ?disabled=${!this.task.audioManager.outs.isPlaying.value} @click=${this.onClickStop}></ff-button>
                </div>
            </div>
        </div>`:null;return St.qy`<div class="sv-commands">
            <ff-button text="${t.getUILocalizedString("Create")}" icon="create" @click=${this.onClickCreate}></ff-button>       
            <ff-button text="${t.getUILocalizedString("Delete")}" icon="trash" ?disabled=${!r} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item sv-task-item-full">${t.getUILocalizedString("Audio Elements")}</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-audio-list .data=${i} .selectedItem=${r} @select=${this.onSelectAudio}></sv-annotation-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${s}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.create.set()}onClickDelete(){this.task.ins.delete.set()}onClickPlay(){this.activeDocument.setup.audio.setupAudio(),this.task.ins.play.set()}onClickStop(){this.task.ins.stop.set()}onSelectAudio(e){this.selectedIndex=e.detail.index,this.task.ins.activeId.setValue(e.detail.clip?e.detail.clip.id:"")}onDropFile(e){e.preventDefault();let t="",n=null;const i=e.target;if("INPUT"!=i.tagName)return;if(1!==e.dataTransfer.files.length||e.dataTransfer.getData("text/uri-list")){const n=e.dataTransfer.getData("text/plain");n.length>0&&(t=n)}else n=e.dataTransfer.files.item(0),t=n.name;const r=i.parentElement.parentElement.id,o="filename"==r?this.task.ins.filepath:this.task.ins.captionPath,s="filename"==r?".mp3":".vtt";if(t.toLowerCase().endsWith(s))if(null!==n){const e=this.system.getMainComponent(Xe);e.uploadFile(t,n,e.root).then(()=>o.setValue(t)).catch(e=>{Ue.Ay.show("Audio file upload failed.","warning"),o.setValue("")})}else o.setValue(t);else Ue.Ay.show(`Unable to load - Only ${s} files are currently supported.`,"warning");i.classList.remove("sv-drop-zone"),this._dragCounter=0}onDragEnter(e){const t=e.target;"INPUT"==t.tagName&&(t.classList.add("sv-drop-zone"),e.preventDefault(),this._dragCounter++)}onDragOver(e){e.preventDefault()}onDragLeave(e){const t=e.target;"INPUT"==t.tagName&&(this._dragCounter--,0===this._dragCounter&&t.classList.remove("sv-drop-zone"))}};tr=er([(0,St.EM)("sv-audio-task-view")],tr);const nr=tr;let ir=class extends $n{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-audio-list")}renderItem(e){return St.qy`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.name}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{clip:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{clip:null,index:-1}}))}};er([(0,St.MZ)({attribute:!1})],ir.prototype,"selectedItem",void 0),ir=er([(0,St.EM)("sv-audio-list")],ir);class rr extends kt{constructor(e,t){super(e,t),this.ins=this.addInputs(rr.ins),this.outs=this.addOutputs(rr.outs),this.audioManager=null}create(){super.create(),this.startObserving()}dispose(){this.stopObserving(),super.dispose()}createView(){return new nr(this)}activateTask(){super.activateTask()}deactivateTask(){super.deactivateTask()}update(){const{ins:e}=this,t=this.audioManager;if(!t)return!1;const n=t.getAudioClip(e.activeId.value),i=this.activeDocument.setup.language.codeString();if(e.create.changed){const n=Ji.A.generateId();return t.addAudioClip({id:n,name:"New Audio Element",uris:{},captionUris:{},durations:{}}),e.activeId.setValue(n),!0}return e.delete.changed?(t.removeAudioClip(e.activeId.value),!0):e.play.changed?(t.play(e.activeId.value),!0):e.stop.changed?(t.stop(),!0):(n&&(e.title.changed||e.filepath.changed||e.captionPath.changed)&&(n.name=e.title.value,n.uris[i]=e.filepath.value,n.captionUris[i]=e.captionPath.value,t.updateAudioClip(n.id)),e.isNarration.changed&&(t.narrationId=e.isNarration.value?n.id:""),!0)}onActiveDocument(e,t){super.onActiveDocument(e,t),e&&(this.ins.activeId.off("value",this.onAudioChange,this),e.setup.language.outs.activeLanguage.off("value",this.onDocumentLanguageChange,this),this.audioManager=null),t&&(this.audioManager=t.setup.audio,this.ins.activeId.on("value",this.onAudioChange,this),t.setup.language.outs.activeLanguage.on("value",this.onDocumentLanguageChange,this))}onAudioChange(){const e=this.ins,t=this.audioManager.getAudioClip(e.activeId.value),n=this.activeDocument.setup.language.codeString();e.title.setValue(t?t.name:"",!0),e.filepath.setValue(t?t.uris[n]:"",!0),e.captionPath.setValue(t?t.captionUris[n]:"",!0),e.isNarration.setValue(!!t&&this.audioManager.narrationId===t.id,!0)}onDocumentLanguageChange(){this.onAudioChange()}}rr.typeName="CVAudioTask",rr.text="Audio",rr.icon="audio",rr.ins={create:Ie.gK.Event("Audio.Create"),delete:Ie.gK.Event("Audio.Delete"),play:Ie.gK.Event("Audio.Play"),stop:Ie.gK.Event("Audio.Stop"),activeId:Ie.gK.String("Audio.ActiveId",""),title:Ie.gK.String("Audio.Title",""),filepath:Ie.gK.String("Audio.Filepath",null),captionPath:Ie.gK.String("Audio.CaptionPath",null),isNarration:Ie.gK.Boolean("Audio.IsNarration",!1)},rr.outs={};var or=n(6679),sr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ar=class extends Lt{connected(){super.connected(),this.task.on("update",this.onUpdate,this)}disconnected(){this.task.off("update",this.onUpdate,this),super.disconnected()}render(){if(!this.task.actionManager)return;const e=this.task.ins,t=this.activeNode,n=t&&t.hasComponent(Bn.A)&&this.task.actions;if(!n)return St.qy`<div class="sv-placeholder">Please select a model node to edit its actions.</div>`;const i=n.find(t=>t.id===e.activeId.value),r=e.type.value===or.mB.PlayAudio?St.qy`
            <sv-property-view .property=${e.audio}></sv-property-view>
        `:null,o=e.type.value===or.mB.PlayAnimation?St.qy`
            <sv-property-view .property=${e.style}></sv-property-view>
            <sv-property-view .property=${e.animation}></sv-property-view>
        `:null,s=e.trigger.value===or.Ui.OnAnnotation?St.qy`
            <sv-property-view .property=${e.annotation}></sv-property-view>
        `:null,a=i?St.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${e.trigger}></sv-property-view>
            ${s}
            <sv-property-view .property=${e.type}></sv-property-view>
            ${r}
            ${o}
        </div>`:null;return St.qy`<div class="sv-commands">
            <ff-button text="Create" icon="create" @click=${this.onClickCreate}></ff-button>       
            <ff-button text="Delete" icon="trash" ?disabled=${!i} @click=${this.onClickDelete}></ff-button>  
        </div>
        <div class="ff-flex-item-stretch">
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row ff-group"><div class="sv-panel-header sv-task-item">Type</div><div class="sv-panel-header sv-task-item sv-item-border-l">Trigger</div></div>
                <div class="ff-splitter-section" style="flex-basis: 30%">
                    <div class="ff-scroll-y ff-flex-column">
                        <sv-action-list .data=${n} .selectedItem=${i} @select=${this.onSelectAction}></sv-action-list>
                    </div>
                </div>
                <ff-splitter direction="vertical"></ff-splitter>
                <div class="ff-splitter-section" style="flex-basis: 70%">
                    ${a}
                </div>
            </div>
        </div>`}onClickCreate(){this.task.ins.create.set()}onClickDelete(){this.task.ins.delete.set()}onSelectAction(e){this.task.ins.activeId.setValue(e.detail.action?e.detail.action.id:""),this.onUpdate()}};ar=sr([(0,St.EM)("sv-actions-task-view")],ar);const lr=ar;let cr=class extends $n{constructor(){super(...arguments),this.selectedItem=null}firstConnected(){super.firstConnected(),this.classList.add("sv-action-list")}renderItem(e){return St.qy`<div class="ff-flex-row ff-group"><div class="sv-task-item">${e.type}</div><div class="sv-task-item sv-item-border-l">${e.trigger}</div></div>`}isItemSelected(e){return e===this.selectedItem}onClickItem(e,t,n){this.dispatchEvent(new CustomEvent("select",{detail:{action:t,index:n}}))}onClickEmpty(e){this.dispatchEvent(new CustomEvent("select",{detail:{action:null,index:-1}}))}};sr([(0,St.MZ)({attribute:!1})],cr.prototype,"selectedItem",void 0),cr=sr([(0,St.EM)("sv-action-list")],cr);class dr extends kt{get actions(){return this.meta&&this.meta.actions.items}constructor(e,t){super(e,t),this.ins=this.addInputs(dr.ins),this.outs=this.addOutputs(dr.outs),this.actionManager=null,this.meta=null}create(){super.create(),this.startObserving(),this.ins.type.schema.options.pop()}dispose(){this.stopObserving(),super.dispose()}createView(){return new lr(this)}activateTask(){super.activateTask(),this.meta&&this.synchAnnotationOptions(this.meta.getComponent($e.A))}deactivateTask(){super.deactivateTask()}update(){const{ins:e}=this,t=this.meta;if(t){if(e.activeId.changed)return this.onActionChange(),!0;if(e.create.changed){const n={id:Ji.A.generateId(),type:or.mB[or.mB.PlayAnimation],trigger:or.Ui[or.Ui.OnClick],style:or.nf[or.nf.Single],audioId:"",animation:""};return t.actions.items=[n],e.activeId.setValue(n.id),!0}if(e.delete.changed)return t.actions.remove(e.activeId.value),!0;const n=t.actions.get(e.activeId.value);if(n&&(e.type.changed||e.trigger.changed||e.animation.changed||e.style.changed)&&(n.type=or.mB[e.type.value],n.trigger=or.Ui[e.trigger.value],n.style=or.nf[e.style.value],n.animation=or.mB[n.type]==or.mB.PlayAnimation?e.animation.getOptionText():"",n.audioId=or.mB[n.type]==or.mB.PlayAudio?n.audioId:""),e.audio.changed){const t=this.activeDocument.setup.audio,i=e.audio.value>0?t.getAudioList()[e.audio.value-1].id:"";n.audioId=i}if(e.annotation.changed){const i=e.annotation.value>0?t.getComponent(Bn.A).getAnnotations()[e.annotation.value-1].id:"";n.annotationId=i}e.type.changed&&(or.mB[n.type]==or.mB.PlayAnimation?e.audio.setValue(null,!0,!0):e.animation.setValue(null,!0,!0)),n&&this.actionManager.stopAction(n)}return!0}onActionChange(){const e=this.ins,t=this.meta&&this.meta.actions.get(e.activeId.value),n=this.activeDocument.setup.audio;t&&(e.type.setValue(or.mB[t.type],!0),e.trigger.setValue(or.Ui[t.trigger],!0),e.animation.setValue(t.animation?e.animation.schema.options.indexOf(t.animation):0),e.audio.setValue(t.audioId?n.getAudioList().findIndex(e=>e.id==t.audioId)+1:0),e.annotation.setValue(t.annotationId?this.meta.getComponent(Bn.A).getAnnotations().findIndex(e=>e.id==t.annotationId)+1:null),e.style.setValue(t.style?or.nf[t.style]:or.nf.Single))}onActiveNode(e,t){const n=t?t.getComponent($e.A,!0):null;if(e&&(this.meta=null),n){t.meta||t.createComponent(Ze.A);const e=["None"];n.object3D.traverse(t=>{t.animations.length>0&&t.animations.forEach(t=>{e.push(t.name)})}),this.ins.animation.setOptions(e),this.synchAnnotationOptions(n),this.ins.activeId.setValue(""),this.meta=t.meta}}onActiveDocument(e,t){super.onActiveDocument(e,t),e&&(e.setup.audio.outs.updated.off("value",this.synchAudioOptions,this),this.actionManager=null),t&&(this.actionManager=t.setup.actions,t.setup.audio.outs.updated.on("value",this.synchAudioOptions,this))}synchAudioOptions(){const e=this.activeDocument.setup.audio,t=["None"];t.push(...e.getAudioList().map(e=>e.name)),this.ins.audio.setOptions(t)}synchAnnotationOptions(e){const t=["None"];e.getComponent(Bn.A).getAnnotations().forEach(e=>{t.push(e.title)}),this.ins.annotation.setOptions(t)}}var ur;dr.typeName="CVActionsTask",dr.text="Action",dr.icon="video",dr.ins={create:Ie.gK.Event("Action.Create"),delete:Ie.gK.Event("Action.Delete"),activeId:Ie.gK.String("Action.ActiveId",""),type:Ie.gK.Enum("Action.Type",or.mB,or.mB.PlayAnimation),trigger:Ie.gK.Enum("Action.Trigger",or.Ui,or.Ui.OnClick),style:Ie.gK.Enum("Action.Style",or.nf,or.nf.Single),audio:Ie.gK.Option("Action.Audio",["None"],0),animation:Ie.gK.Option("Action.Animation",["None"],0),annotation:Ie.gK.Option("Action.Annotation",["None"],0)},dr.outs={},function(e){e[e.QC=0]="QC",e[e.Authoring=1]="Authoring",e[e.Edit=2]="Edit",e[e.Expert=3]="Expert",e[e.Standalone=4]="Standalone"}(ur||(ur={}));const hr={[ur.Edit]:[kn,jn,Ai,pi,Ri,zi,rr,dr,an],[ur.QC]:[kn,jn,Ai,an],[ur.Authoring]:[pi,Ri,zi,rr,dr,an],[ur.Expert]:[kn,jn,Ai,pi,Ri,zi,Xi,rr,dr,an],[ur.Standalone]:[kn,jn,Ai,pi,Ri,zi,rr,dr,an]};var pr=n(9337);class mr extends Ct.A{constructor(e,t){super(e,t),this.ins=this.addInputs(mr.ins),this.scope=Ct.X.Node}get languageManager(){return this.getSystemComponent(pr.A)}get expertMode(){return this.ins.mode.getValidatedValue()===ur.Expert}update(e){const t=this.ins;this.languageManager;if(t.mode.changed){this.scopedComponents.forEach(e=>e.dispose());hr[t.mode.getValidatedValue()].forEach(e=>this.createComponent(e))}return!0}activateComponent(e){e.activateTask()}deactivateComponent(e){e.deactivateTask()}onActiveComponent(e,t){}}mr.typeName="CVTaskProvider",mr.isSystemSingleton=!0,mr.componentType=kt,mr.ins={mode:Ie.gK.Enum("Tasks.Mode",ur)};var fr=n(8722),gr=n(2222),vr=n(5676),yr=n(1266),br=n(8466),Ar=n(9519);const _r=new ln.Pq0,wr=new ln.Pq0,xr=new ln.O9p,Cr=new ln.Q1f,Er=new ln.PTz,Mr=new ln.kn4;class Sr{constructor(e){this.application=null,this.application=e}get assetManager(){return this.application.system.getMainComponent(Fe.A)}get standaloneFileManager(){return this.application.system.getComponent(je,!0)}constructIIIFManifest(e){const t=e.getInnerComponents(yr.A)[0],n=e.setup,i={anno:0,page:2,light:0,camera:0};Cr.setRGB(t.ins.color0.value[0],t.ins.color0.value[1],t.ins.color0.value[2]);const r={"@context":"http://iiif.io/api/presentation/4/context.json",id:"https://example.org/iiif/3d/3d_scene.json",type:"Manifest",label:{}},o=e.meta.collection.get("IIIFManifestSummary");void 0!==o&&(r.summary={en:[o]}),r.items=[{}],e.setup.language.sceneLanguages.forEach(t=>{r.label[qn.aL[t.id].toLowerCase()]=[e.titleIn(t.id)]});const s=r.items[0];s.id="https://example.org/iiif/scene1",s.type="Scene",s.label={en:[e.root.name||"3D Scene"]},s.spatialScale={type:"Quantity",quantityValue:(0,Ar.A)(e.root.scene.ins.units.getValidatedValue(),qn.uj.m),unit:"m"},s.backgroundColor="#"+Cr.getHexString("srgb-linear"),s.items=[{}],s.annotations=[{}];const a=s.items[0];a.id="https://example.org/iiif/scene1/page/p1/1",a.type="AnnotationPage",a.items=[];const l=s.annotations[0];l.id="https://example.org/iiif/scene1/page/p2/1",l.type="AnnotationPage",l.items=[],this.parseChildNodes(e,e.root.transform.children,s,a,l,i),e.root.scene.object3D.traverse(e=>{if("Mesh"===e.type&&e.userData.IIIFCanvas){const t=e.userData.IIIFCanvas;r.items.push(t);let n="POLYGONZ((";e.geometry.attributes.position.array.forEach((e,t)=>{n+=this.roundNumber(e,6).toString(),n+=t%3==2&&11!=t?", ":" "}),n=n.trim()+"))";const o={id:"https://example.org/iiif/3d/anno"+ ++i.anno,type:"Annotation",motivation:["painting"],body:{id:t.id,type:"Canvas"},target:{type:"SpecificResource",source:[{id:s.id,type:"Scene"}],selector:[{type:"PolygonZSelector",value:n}]}};a.items.push(o)}});const c=n.audio;if(c.narrationId.length){const e=c.getAudioClip(c.narrationId);if(void 0!==e){const t={type:"Choice",items:[]},r={type:"Choice",items:[]};n.language.sceneLanguages.forEach(n=>{const i=e.uris[qn.aL[n.id]],o=e.captionUris[qn.aL[n.id]];if(i){const r={id:i,type:"Sound",label:{en:[e.name]},language:qn.aL[n.id].toLowerCase(),format:"audio/mp3",duration:e.durations[qn.aL[n.id]]};t.items.push(r)}if(o){const t={id:o,type:"Text",language:qn.aL[n.id].toLowerCase(),format:"text/vtt",duration:e.durations[qn.aL[n.id]]};r.items.push(t)}});const o={id:"https://example.org/iiif/3d/anno"+ ++i.anno,type:"Annotation",motivation:["painting"],body:t,target:s.id};if(a.items.push(o),r.items.length>0){const e={id:"https://example.org/iiif/3d/anno"+ ++i.anno,type:"Annotation",motivation:["supplementing"],body:r,target:s.id};l.items.push(e)}}}return 0==l.items.length&&delete s.annotations,JSON.stringify(r,null,2)}parseChildNodes(e,t,n,i,r,o){const s=t.map(e=>e.node).filter(e=>e.is(gr.A)),a=e.setup;s.forEach(t=>{const s={id:"https://example.org/iiif/3d/anno"+ ++o.anno,type:"Annotation",motivation:["painting"],body:{type:"SpecificResource"},target:{type:"SpecificResource",source:[{id:n.id,type:"Scene"}]}};if(t.model){const e=t.model.activeDerivative.findAsset(Qe.iO.Model),i=this.assetManager.getAssetUrl(e.data.uri),l={id:this.standaloneFileManager&&this.standaloneFileManager.blobUrlToFileUrl(i)||i,type:"Model",label:{en:[t.model.ins.name.value]},format:e.data.mimeType};s.body.source=l,this.setTransform(s,t.model.object3D.matrixWorld);const c=t.model.getComponent(Bn.A);c.getAnnotations().forEach(e=>{const t=c.getSprite(e);t.matrixWorld.decompose(_r,Er,wr);const i={id:"https://example.org/iiif/3d/anno"+ ++o.anno,type:"Annotation",motivation:["commenting"],body:[],target:{type:"SpecificResource",source:[{id:n.id,type:"Scene"}],selector:[{type:"PointSelector",x:this.roundNumber(_r.x,6),y:this.roundNumber(_r.y,6),z:this.roundNumber(_r.z,6)}]}};if(e.data.viewId){const t={id:"https://example.org/iiif/3d/anno"+o.anno+"/scope1",type:"Annotation",motivation:["contentState"],target:{id:n.id,type:"Scene",items:[{id:"https://example.org/iiif/scene1/page/p"+ ++o.page+"/1",type:"AnnotationPage",items:[]}]}},r=t.target.items[0].items,s={id:"https://example.org/iiif/3d/anno"+ ++o.anno,type:"Annotation",motivation:["painting"],body:{type:"SpecificResource"},target:{type:"SpecificResource",source:[{id:n.id,type:"Scene"}]}},l={id:"https://example.org/iiif/3d/cameras/"+ ++o.camera,type:"PerspectiveCamera"};s.body.source=l;const c=a.snapshots,d=c.getTargetProperties(),u=d.findIndex(e=>"Orbit"==e.name),h=d.findIndex(e=>"Offset"==e.name),p=c.getState(e.data.viewId);_r.fromArray(p.values[u]).multiplyScalar(fr.A.DEG2RAD),wr.fromArray(p.values[h]),fr.A.composeOrbitMatrix(_r,wr,Mr),this.setTransform(s,Mr),r.push(s),i.target.scope=t}const s={type:"Choice",items:[]};if(a.language.sceneLanguages.forEach(t=>{var n,i;let r=(null===(n=e.titleIn(t.id))||void 0===n?void 0:n.length)>0?e.titleIn(t.id):"Untitled";if(e.data.imageUri){const t=this.assetManager.getAssetUrl(e.data.imageUri),n=t.startsWith("blob")?this.standaloneFileManager.blobUrlToFileUrl(t):t;r+='\n<img style="max-height: 120px; max-width: 100%" alt="'+e.imageAltText+'" src="'+n+'">'}r+=(null===(i=e.leadIn(t.id))||void 0===i?void 0:i.length)>0?"\n"+e.leadIn(t.id):"";const o=/<\/?[a-z][\s\S]*>/i.test(r);o&&"<"!==r[0]&&(r="<p>"+r+"</p>");const a={type:"TextualBody",value:r,language:qn.aL[t.id].toLowerCase(),format:o?"text/html":"text/plain"};s.items.push(a)}),i.body.push(s),e.data.audioId){const t={type:"Choice",items:[]},n={type:"Choice",items:[]},r=a.audio.getAudioClip(e.data.audioId);void 0!==r&&(a.language.sceneLanguages.forEach(e=>{const i=r.uris[qn.aL[e.id]],o=r.captionUris[qn.aL[e.id]];if(i){const n={id:i,type:"Sound",label:{en:[r.name]},language:qn.aL[e.id].toLowerCase(),format:"audio/mp3",duration:r.durations[qn.aL[e.id]]};t.items.push(n)}if(o){const t={id:o,type:"Text",language:qn.aL[e.id].toLowerCase(),format:"text/vtt",duration:r.durations[qn.aL[e.id]]};n.items.push(t)}}),i.body.push(t),n.items.length>0&&i.body.push(n))}if("Extended"===t.typeName||"Standard"===t.typeName){t.matrixWorld.decompose(_r,Er,wr);const r=wr.x*e.data.scale;wr.fromArray(e.data.direction).normalize(),_r.addScaledVector(wr,r);const o={type:"SpecificResource",source:[{id:n.id,type:"Scene"}],selector:[{type:"PointSelector",x:this.roundNumber(_r.x,6),y:this.roundNumber(_r.y,6),z:this.roundNumber(_r.z,6)}]};i.body[0].items[0].position=o}i.body.length>0&&r.items.push(i)})}if(t.camera){if(JSON.stringify(a.setupCache.navigation.orbit)===JSON.stringify(br.setups[0].navigation.orbit))return void o.anno--;const e={id:"https://example.org/iiif/3d/cameras/"+ ++o.camera,type:t.camera.ins.projection.getValidatedValue()===vr.$R.Perspective?"PerspectiveCamera":"OrthographicCamera"};s.body.source=e,_r.fromArray(a.setupCache.navigation.orbit.orbit).multiplyScalar(fr.A.DEG2RAD),wr.fromArray(a.setupCache.navigation.orbit.offset),fr.A.composeOrbitMatrix(_r,wr,Mr),this.setTransform(s,Mr)}if(t.light){const e=t.light;if(Sr.iiifUnhandledLights.includes(e.typeName)||!e.ins.enabled.value)return void o.anno--;Cr.setRGB(e.ins.color.value[0],e.ins.color.value[1],e.ins.color.value[2]);const n={id:"https://example.org/iiif/3d/lights/"+ ++o.light,type:e.typeName.substring(2),label:{en:[e.node.name]},color:"#"+Cr.getHexString("srgb-linear"),intensity:{type:"Value",value:e.ins.intensity.value,unit:"relative"}};"CVSpotLight"==e.typeName&&(n.angle=e.ins.angle.value),s.body.source=n,this.setTransform(s,t.transform.object3D.matrix)}t.model||t.light||t.camera?i.items.push(s):o.anno--,t.transform.children&&this.parseChildNodes(e,t.transform.children,n,i,r,o)})}setTransform(e,t){t.decompose(_r,Er,wr),xr.setFromQuaternion(Er);const n=e.body.transform=[];1==wr.x&&1==wr.y&&1==wr.z||n.push({type:"ScaleTransform",x:this.roundNumber(wr.x,6),y:this.roundNumber(wr.y,6),z:this.roundNumber(wr.z,6)}),0==xr.x&&0==xr.y&&0==xr.z||n.push({type:"RotateTransform",x:this.roundNumber(xr.x*fr.A.RAD2DEG,6),y:this.roundNumber(xr.y*fr.A.RAD2DEG,6),z:this.roundNumber(xr.z*fr.A.RAD2DEG,6)}),0!=_r.length()&&n.push({type:"TranslateTransform",x:this.roundNumber(_r.x,6),y:this.roundNumber(_r.y,6),z:this.roundNumber(_r.z,6)}),0==n.length&&delete e.body.transform}roundNumber(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}generateAnnotationIndex(){}}Sr.iiifUnhandledLights=["CVEnvironmentLight","CVRectLight","CVHemisphereLight"];class Tr extends Ie.Ay{get taskProvider(){return this.getMainComponent(mr)}get documentProvider(){return this.getMainComponent(ze.A)}get assetManager(){return this.getMainComponent(Fe.A)}get assetWriter(){return this.getMainComponent(xt)}get languageManager(){return this.getSystemComponent(pr.A)}get mediaManager(){return this.system.getMainComponent(Xe)}get meta(){return this.system.getComponent(Ze.A)}get standaloneFileManager(){return this.system.getComponent(je,!0)}constructor(e,t){super(e,t),this.ins=this.addInputs(Tr.ins),this.referrer="",this.dragdrop=!1,this.beforeUnload=this.beforeUnload.bind(this),this.IIIFWriter=new Sr(this)}create(){super.create(),window.addEventListener("beforeunload",this.beforeUnload)}dispose(){window.removeEventListener("beforeunload",this.beforeUnload),super.dispose()}update(){const e=this.ins;e.exit.changed&&this.referrer&&location.assign(this.referrer);const t=this.documentProvider.activeComponent;if(t){const n=this.taskProvider.ins.mode.getValidatedValue(),i=n===ur.QC?{model:!0}:null;if(e.save.changed){const e=t.deflateDocument(i),r=JSON.stringify(e,(e,t)=>"number"==typeof t?parseFloat(t.toFixed(7)):t);if(n!==ur.Standalone)this.assetWriter.putJSON(r,t.assetPath).then(()=>new Ue.Ay(`Successfully uploaded file to '${t.assetPath}'`,"info",4e3)).catch(e=>new Ue.Ay(`Failed to upload file to '${t.assetPath}'`,"error",8e3));else{const e=this.standaloneFileManager,n=[],i=this.assetManager.getAssetName(t.assetPath);n.push({name:i,lastModified:new Date,input:r});e.getFiles().filter(e=>null!=e&&!e.name.endsWith(".json")).forEach(t=>{n.push({name:e.getFilePath(t.name)+t.name,lastModified:new Date,input:t})}),wt(n).blob().then(e=>{const t=URL.createObjectURL(e);Je.A.url(t,"voyager-scene.zip")})}}if(e.download.changed){const e=t.deflateDocument(i),n=JSON.stringify(e,null,2),r=this.assetManager.getAssetName(t.assetPath);Je.A.json(n,r)}if(e.iiif.changed){const e=this.IIIFWriter.constructIIIFManifest(t),n="voyager_iiif.json";Je.A.json(e,n)}}return!1}beforeUnload(e){e.returnValue="x"}}Tr.typeName="CVStoryApplication",Tr.isSystemSingleton=!0,Tr.ins={exit:Ie.gK.Event("Application.Exit"),save:Ie.gK.Event("Document.Save"),download:Ie.gK.Event("Document.Download"),iiif:Ie.gK.Event("Document.IIIF")};var kr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Lr=class extends t.Ay{constructor(e){super(),this.application=e;const t=e.system.getComponent(Tr);if(t&&!0===t.dragdrop){this.addEventListener("dragenter",this.onDragEnter),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDragDrop);const t=this.appendElement("input");t.type="file",t.id="fileInput",t.style.display="none";const n=new Te(this,t);this._mediaManager=e.system.getComponent(Xe),n.on("drop",({files:e})=>this._mediaManager.ingestFiles(e))}}firstConnected(){this.classList.add("sv-panel","sv-explorer-panel");const t=this.createElement("div",{position:"relative",flex:"1 1 auto",display:"flex",flexDirection:"row",marginLeft:"auto",marginRight:"auto",width:"100%"});this.appendElement(new l(t)),this.appendElement(t);const n=document.createElement("div");t.appendChild(n),n.appendChild(new e.A(this.application))}onDragEnter(e){e.currentTarget!=this||this.contains(e.relatedTarget)||(e.preventDefault(),this.classList.add("sv-drop-zone"))}onDragLeave(e){e.currentTarget!=this||this.contains(e.relatedTarget)||e.relatedTarget&&e.relatedTarget.getRootNode()instanceof ShadowRoot||(e.preventDefault(),this.classList.remove("sv-drop-zone"))}onDragDrop(e){const t=e.dataTransfer.getData("text/uri-list");t&&(e.stopPropagation(),this._mediaManager.ingestURI(t)),e.preventDefault(),this.classList.remove("sv-drop-zone")}};kr([(0,t.MZ)({attribute:!1})],Lr.prototype,"application",void 0),Lr=kr([(0,t.EM)("sv-explorer-panel")],Lr);const Dr=Lr;const Ir=new class{constructor(){this.store=window?window.localStorage:null}isReady(){return!!this.store}get(e,t){const n=this.getKey(e,t),i=this.store.getItem(n);return i?JSON.parse(i):null}set(e,t,n){t=t||n.id||(0,Xt.A)();const i=this.getKey(e,t);return this.store.setItem(i,JSON.stringify(n)),t}remove(e,t){const n=this.getKey(e,t);return!!this.store.getItem(n)&&(this.store.removeItem(n),!0)}getKey(e,t){return e+"/"+t}};var Rr=n(920),Or=n(1860);class Pr extends Or.A{createComponents(){this.createComponent(Xe),this.createComponent(xt),this.createComponent(Tr)}}Pr.typeName="NVoyagerStory";class Br extends Or.A{get taskManager(){return this.getComponent(mr)}createComponents(){this.createComponent(mr)}}Br.typeName="NVTasks";const Nr=[Tr,xt,Xe,je,mr,an,kn,jn,pi,Ri,zi,Ai,Xi,rr,dr,Pr,Br];class Ur{get assetReader(){return this.system.getMainComponent(Zi.A)}get assetManager(){return this.system.getMainComponent(Fe.A)}get mediaManager(){return this.system.getMainComponent(Xe)}get documentProvider(){return this.system.getMainComponent(ze.A)}constructor(e,t){this.explorer=new Rr.A(null,t,!0),this.props=t||{},this.system=this.explorer.system;this.system.registry.add(Nr),this.system.graph.createCustomNode(Pr,"Story"),this.system.graph.createCustomNode(Br,"Tasks"),this.system.getMainComponent(Et.A).ins.viewportBrackets.setValue(!0),e&&new Ns(this).appendTo(e),this.documentProvider.createDocument(br),this.evaluateProps()}setBaseUrl(e){this.assetManager.baseUrl=e,this.mediaManager.rootUrl=e}loadDocument(e,t){return this.assetReader.getJSON(e).then(n=>this.documentProvider.amendDocument(n,e,t)).catch(e=>{throw console.warn(`error while loading document: ${e.message}`),e})}loadModel(e,t){return this.documentProvider.appendModel(e,t)}loadGeometry(e,t,n,i,r){return this.documentProvider.appendGeometry(e,t,n,i,r)}evaluateProps(){const e=Object.assign({},this.props),t=new URL(window.location.href).searchParams;e.referrer=e.referrer||t.get("referrer"),e.mode=e.mode||t.get("mode")||"prep",e.expert=void 0!==e.expert?e.expert:"false"!==t.get("expert"),e.dragdrop=e.dragdrop||!1,e.uiLang=e.uiLang||t.get("uiLang");const n=e.mode.toLowerCase();if(n.startsWith("stand")){const n=new URL(window.location.href);n.searchParams.delete("root"),n.searchParams.delete("document"),n.searchParams.delete("iiif-content"),window.history.replaceState(null,null,n),this.explorer.props.root=null,this.explorer.props.document=null,this.explorer.props.lang=e.lang||t.get("lang")||t.get("l")||e.uiLang}e.uiLang&&this.setUILanguage(e.uiLang),this.explorer.evaluateProps();const i=this.system.getMainComponent(Tr);i.referrer=e.referrer;let r=ur.Edit;n.startsWith("au")?r=ur.Authoring:n.startsWith("qc")?r=ur.QC:n.startsWith("ex")?r=ur.Expert:n.startsWith("stand")&&(r=ur.Standalone,e.dragdrop=!0,i.createComponent(je)),this.mediaManager.rootUrl=this.assetManager.baseUrl,this.mediaManager.rootUrl=this.assetManager.baseUrl,!0===e.dragdrop&&this.assetManager.ins.baseUrlValid.setValue(!0),i.dragdrop=e.dragdrop;this.system.getMainComponent(mr).ins.mode.setValue(r)}setUILanguage(e){const t=this.system.getMainComponent(ze.A).activeComponent.setup.language.ins,n=e.toUpperCase();n in qn.aL?t.uiLanguage.setValue(qn.aL[n]):console.error("Error: setUILanguage param is not a valid language id.")}}window.VoyagerStory=Ur;var Fr,zr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Hr=Fr=class extends t.Ay{static getPanelById(e){return document.getElementById(e)}constructor(){super(),this.text="Panel",this.closable=!0,this.movable=!0,this.active=!1,this.header=null,this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop),this.id=(0,Xt.A)(),this.contentId="",this.dropZone="none"}get parentStack(){return this.parentElement}setLayout(e,t){this.text=e.text||"",this.closable=e.closable||!1,this.movable=e.movable||!1,this.contentId=e.contentId;const n=t.get(e.contentId);if(n){const e=n();e.classList.add("ff-fullsize"),this.appendChild(e)}else console.warn(`failed to create content element for id: ${e.contentId}`)}getLayout(){return{contentId:this.contentId,text:this.text,closable:this.closable,movable:this.movable}}movePanel(e,t){const n=Fr.getPanelById(e),i=n.parentStack;if(n===this&&1===i.getPanelCount())return;const r=this.parentStack;if("before"===t||"after"===t){if(n===this)return;let e=this;if("after"===t){const t=this.header.nextElementSibling;e=t?t.panel:null}if(n===e)return;i.removePanel(n),r.insertPanel(n,e),r.activatePanel(n)}else{i.removePanel(n);r.parentElement.insertPanel(n,r,t)}setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),0)}activatePanel(){this.parentStack.activatePanel(this)}closePanel(){this.parentStack.removePanel(this),setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),0)}update(e){super.update(e),this.header&&this.header.requestUpdate(),e.has("active")&&(this.style.display=this.active?"flex":"none")}firstUpdated(){this.setStyle({flex:"1 1 100%",position:"relative",flexDirection:"column",boxSizing:"border-box",overflow:"hidden"})}onDragOver(e){if(Array.from(e.dataTransfer.items).find(e=>e.type===Fr.dragDropMimeType)){const t=this.getDropZone(e);t!==this.dropZone&&(this.dropZone=t,this.updateDropMarker()),e.stopPropagation(),e.preventDefault()}}onDragLeave(e){"none"!==this.dropZone&&(this.dropZone="none",this.updateDropMarker())}onDrop(e){if(Array.from(e.dataTransfer.items).find(e=>e.type===Fr.dragDropMimeType)){const t=this.dropZone;"none"!==t&&(this.dropZone="none",this.updateDropMarker()),e.stopPropagation();const n=e.dataTransfer.getData(Fr.dragDropMimeType);this.movePanel(n,t),this.dispatchEvent(new CustomEvent(io.changeEvent,{bubbles:!0}))}}getDropZone(e){const t=this.getBoundingClientRect(),n=(e.clientX-t.left)/t.width,i=(e.clientY-t.top)/t.height;let r;return r=n>.33&&n<.67&&i>.33&&i<.67?"after":n<i?n+i<1?"left":"bottom":n+i<1?"top":"right",r}updateDropMarker(){const e=this.dropZone;let t=this.getElementsByClassName("ff-dock-drop-marker").item(0);if(t&&"none"===e)return void this.removeChild(t);t||(t=document.createElement("div"),t.classList.add("ff-dock-drop-marker"),this.appendChild(t));const n=t.style;switch(n.pointerEvents="none",n.zIndex="1",n.position="absolute",n.left="0",n.right="0",n.top="0",n.bottom="0",e){case"left":n.right="50%";break;case"right":n.left="50%";break;case"top":n.bottom="50%";break;case"bottom":n.top="50%"}}};Hr.dragDropMimeType="application/x-ff-dock-panel",zr([(0,t.MZ)({type:String})],Hr.prototype,"text",void 0),zr([(0,t.MZ)({type:Boolean})],Hr.prototype,"closable",void 0),zr([(0,t.MZ)({type:Boolean})],Hr.prototype,"movable",void 0),zr([(0,t.MZ)({type:Boolean,reflect:!0})],Hr.prototype,"active",void 0),Hr=Fr=zr([(0,t.EM)("ff-dock-panel")],Hr);const jr=Hr;var Vr,Yr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Gr=Vr=class extends t.Ay{constructor(e){super(),this.active=!1,this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("click",this.onClick),this.addEventListener("dragstart",this.onDragStart),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop),this.panel=e,e.header=this}update(e){super.update(e),this.panel.movable?this.setAttribute("draggable","true"):this.removeAttribute("draggable"),e.has("active")&&(this.panel.active=this.active)}render(){const{text:e,closable:n,movable:i}=this.panel;let r=n?t.qy`<ff-button inline icon="close" @click=${this.onClickButton}></ff-button>`:i?t.qy`<ff-icon name="grip"></ff-icon>`:null;return t.qy`
            <label class="ff-text">${e}</label>
            ${r}
        `}firstUpdated(){this.setStyle({flex:"0 0 auto",display:"block",userSelect:"none",cursor:"pointer"})}onClick(e){this.panel.activatePanel(),this.dispatchEvent(new CustomEvent(io.changeEvent,{bubbles:!0}))}onClickButton(e){this.dispatchEvent(new CustomEvent(Vr.closeEvent,{detail:{panelId:this.panel.id},bubbles:!0})),this.panel.closePanel(),e.stopPropagation(),this.dispatchEvent(new CustomEvent(io.changeEvent,{bubbles:!0}))}onDragStart(e){this.panel.parentElement.activatePanel(this.panel),e.dataTransfer.setData(jr.dragDropMimeType,this.panel.id),e.dataTransfer.dropEffect="move"}onDragOver(e){this.panel.parentStack.onDragOver(e)}onDragLeave(e){this.panel.parentStack.onDragLeave(e)}onDrop(e){this.panel.parentStack.onDrop(e)}};Gr.closeEvent="ff-dock-panel-header-close",Yr([(0,t.MZ)({type:Boolean,reflect:!0})],Gr.prototype,"active",void 0),Gr=Vr=Yr([(0,t.EM)("ff-dock-panel-header")],Gr);const Qr=Gr;var $r=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let qr=class extends t.Ay{get size(){return.01*parseFloat(this.style.flexBasis)}set size(e){this.style.flexBasis=`${(100*(e||1)).toFixed(3)}%`}constructor(){super(),this.activeIndex=0,this.activeHeader=null,this.dropMarker=null,this.dropTarget=null,this.dropZone="none",this.isInit=!1,this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.addEventListener("dragover",this.onDragOver),this.addEventListener("dragleave",this.onDragLeave),this.addEventListener("drop",this.onDrop)}activatePanel(e){this.activeHeader&&this.activeHeader.panel===e||(this.activeHeader&&(this.activeHeader.active=!1),this.activeHeader=e.header,this.activeHeader.active=!0)}insertPanel(e,t){this.init(!1),this.appendChild(e);const n=new Qr(e);t?this.headers.insertBefore(n,t.header):this.headers.appendChild(n)}removePanel(e){const t=e.header;if(this.headers.removeChild(t),this.removeChild(e),0===this.getPanelCount()){this.parentElement.removeDockElement(this)}else if(this.activeHeader===t){const e=this.headers.firstChild;this.activatePanel(e.panel)}}getPanelCount(){return this.headers.childElementCount}setLayout(e,t){this.init(!1);const n=Array.from(this.children);for(let e of n)e!==this.headers&&this.removeChild(e);this.size=e.size,e.panels.forEach(e=>{const n=new jr;n.setLayout(e,t),this.insertPanel(n)});const i=this.headers.firstElementChild;i&&this.activatePanel(i.panel)}getLayout(){const e=Array.from(this.getElementsByTagName("ff-dock-panel")),t=e.map(e=>e.getLayout());let n=-1;for(let t=0,i=e.length;t<i;++t)if(e[t]===this.activeHeader.panel){n=t;break}return{type:"stack",size:this.size,activePanelIndex:n,panels:t}}onDragOver(e){Array.from(e.dataTransfer.items).find(e=>e.type===jr.dragDropMimeType)&&(this.updateDropMarker(e),e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.updateDropMarker(),e.stopPropagation()}onDrop(e){e.stopPropagation(),this.updateDropMarker();const t=e.dataTransfer.getData(jr.dragDropMimeType);this.dropTarget&&"none"!==this.dropZone&&this.dropTarget.movePanel(t,this.dropZone),this.dispatchEvent(new CustomEvent(io.changeEvent,{bubbles:!0}))}updateDropMarker(e){let t=this.getElementsByClassName("ff-dock-drop-marker").item(0);if(!e)return void(t&&this.removeChild(t));t||(t=document.createElement("div"),t.classList.add("ff-dock-drop-marker"),this.appendChild(t),this.dropTarget=null,this.dropZone="none");const n=t.style;n.pointerEvents="none",n.width="25px",n.position="absolute",n.zIndex="1";let i,r=this.dropTarget,o=this.dropZone;if(e.currentTarget===this){const e=this.headers.lastChild;i=e.getBoundingClientRect(),r=e.panel,o="after"}else if(e.currentTarget instanceof Qr){i=e.currentTarget.getBoundingClientRect();const t=(e.clientX-i.left)/i.width;r=e.currentTarget.panel,o=t<.5?"before":"after"}else r=null,o="none";if(r!==this.dropTarget||o!==this.dropZone)if(this.dropTarget=r,this.dropZone=o,r){const e=this.headers.getBoundingClientRect(),t=this.getBoundingClientRect(),r="before"===o?i.left:i.right;n.top=e.top-t.top+"px",n.height=e.height+"px",n.left=r-t.left+"px"}else t.remove()}firstConnected(){this.init(!0)}init(e){if(this.isInit)return;this.isInit=!0,this.setStyle({flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",overflow:"hidden"}),this.headers=document.createElement("header");const t=this.headers.style;if(t.flex="1 0 auto",t.flexWrap="wrap",t.display="flex",t.flexDirection="row",t.overflow="hidden",this.insertBefore(this.headers,this.firstChild),e){Array.from(this.children).forEach(e=>{if(e!==this.headers)if(this.removeChild(e),e instanceof jr)this.insertPanel(e);else{const t=new jr;t.appendChild(e),this.insertPanel(t)}});const e=this.headers.firstElementChild;e&&this.activatePanel(e.panel)}}};$r([(0,t.MZ)({type:Number})],qr.prototype,"size",null),$r([(0,t.MZ)({type:Number})],qr.prototype,"activeIndex",void 0),qr=$r([(0,t.EM)("ff-dock-stack")],qr);const Wr=qr;var Kr,Zr=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};const Xr=e=>e instanceof Jr||e instanceof Wr;let Jr=Kr=class extends t.Ay{constructor(){super(...arguments),this.direction="horizontal",this.isInit=!1}get size(){return.01*parseFloat(this.style.flexBasis)}set size(e){this.style.flexBasis=`${(100*(e||1)).toFixed(3)}%`}insertPanel(e,t,n){const i="left"===n||"right"===n?"horizontal":"vertical",r="left"===n||"top"===n,o=t.size,s=new Wr;s.insertPanel(e),s.activatePanel(e);const a=this.getDockElements();a.length<2&&(this.direction=i);let l=t;if(!r)for(let e=0,n=a.length;e<n;++e)if(a[e]===t){l=a[e+1];break}if(i===this.direction)this.insertDockElement(s,l),s.size=t.size=.5*o;else{const e=new Kr;this.insertBefore(e,t),e.appendChild(t),e.insertDockElement(s,r?t:null),e.direction=i,e.size=o,t.size=s.size=.5}}insertDockElement(e,t){this.init(!1),this.insertBefore(e,t),this.updateSplitters()}removeDockElement(e){let t=this.getDockElements();if(1!==t.length)if(this.removeChild(e),t=this.getDockElements(),t.length<2&&this.parentElement instanceof Kr){const e=this.parentElement,n=t[0];this.removeChild(n),n.size=this.size,e.insertBefore(n,this),e.removeChild(this),e.updateSplitters()}else this.updateSplitters()}getDockElements(){return Array.from(this.children).filter(Xr)}setLayout(e,t){for(this.init(!1);this.firstChild;)this.removeChild(this.firstChild);this.size=e.size,this.direction=e.direction,e.elements.forEach((e,n)=>{let i;switch(e.type){case"strip":i=new Kr;break;case"stack":i=new Wr}i.setLayout(e,t),this.appendChild(i)}),this.updateSplitters()}getLayout(){const e=Array.from(this.children).filter(Xr).map(e=>e.getLayout());return{type:"strip",size:this.size,direction:this.direction,elements:e}}isHorizontal(){return"horizontal"===this.direction}onSplitterChange(e){e.detail.isDragging||this.dispatchEvent(new CustomEvent(io.changeEvent,{bubbles:!0}))}firstConnected(){this.init(!0)}update(e){super.update(e),e.has("direction")&&(this.style.flexDirection=this.isHorizontal()?"row":"column",this.updateSplitters())}updateSplitters(){const e=this.getChildrenArray();if(!this.parentElement)return;const t=this.isHorizontal(),n=[],i=[];let r=0;for(let o=0,s=e.length;o<s;++o){const s=e[o],a=s.nextElementSibling;if(s instanceof un.A){if(0===o||!a||a instanceof un.A){this.removeChild(s);continue}s.direction=this.direction}if(!Xr(s))continue;const l=s.getBoundingClientRect(),c=t?l.width:l.height;r+=c,n.push(s),i.push(c);const d=s.previousElementSibling;if(d&&!(d instanceof un.A)){const e=new un.A;e.direction=this.direction,e.addEventListener(un.A.changeEvent,this.onSplitterChange),this.insertBefore(e,s)}}for(let e=0,t=n.length;e<t;++e)n[e].style.flexBasis=`${(i[e]/r*100).toFixed(3)}%`}init(e){this.isInit||(this.isInit=!0,this.setStyle({flex:"1 1 auto",display:"flex",alignItems:"stretch",overflow:"hidden"}),e&&Array.from(this.children).forEach(e=>{if(!Xr(e)){const t=new Wr,n=e.nextSibling;t.appendChild(e),this.insertBefore(t,n)}}))}};Zr([(0,t.MZ)({type:Number})],Jr.prototype,"size",null),Zr([(0,t.MZ)({type:String})],Jr.prototype,"direction",void 0),Jr=Kr=Zr([(0,t.EM)("ff-dock-strip")],Jr);const eo=Jr;var to=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let no=class extends t.Ay{setPanelsMovable(e){const t=this.getElementsByTagName(jr.tagName);for(let n of t)n.movable=e}setPanelsClosable(e){const t=this.getElementsByTagName(jr.tagName);for(let n of t)n.closable=e}setLayout(e,t){for(;this.firstChild;)this.removeChild(this.firstChild);let n;switch(e.type){case"strip":n=new eo;break;case"stack":n=new Wr}n.setLayout(e,t),this.appendChild(n),setTimeout(()=>window.dispatchEvent(new CustomEvent("resize")),0)}getLayout(){const e=this.firstChild;return e&&(e instanceof eo||e instanceof Wr)?e.getLayout():null}firstConnected(){this.setStyle({display:"flex",alignItems:"stretch"})}};no.changeEvent="ff-dock-view-change",no=to([(0,t.EM)("ff-dock-view")],no);const io=no;var ro=n(7350),oo=n(4424),so=n(2799);class ao extends r.Ay{constructor(){super(...arguments),this.selection=null}firstConnected(){this.selection=this.system.getComponent(He.A)}}var lo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let co=class extends ao{constructor(e){super(e),this.tree=null,this.addEventListener("click",this.onClick.bind(this)),this.addEventListener("contextmenu",this.onContextMenu.bind(this))}firstConnected(){super.firstConnected(),this.classList.add("ff-hierarchy-tree-view"),this.tree=new ho(this.system)}connected(){super.connected(),this.selection.selectedComponents.on(oo.Ay,this.onSelectGraph,this),this.selection.on("active-graph",this.onActiveGraph,this)}disconnected(){super.disconnected(),this.selection.selectedComponents.off(oo.Ay,this.onSelectGraph,this),this.selection.off("active-graph",this.onActiveGraph,this)}render(){const e=this.selection,t=e.activeGraph&&e.activeGraph.parent,n=t?t.displayName:"Main",i=e.hasChildGraph()?r.qy`<ff-button icon="down" @click=${this.onClickDown}></ff-button>`:null,o=e.hasParentGraph()?r.qy`<ff-button icon="up" @click=${this.onClickUp}></ff-button>`:null;return r.qy`<div class="ff-flex-row ff-header">${o}<div class="ff-text">${n}</div>${i}</div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y">${this.tree}</div></div>`}onClick(){this.selection.clearSelection()}onClickUp(e){e.stopPropagation(),this.selection.activateParentGraph()}onClickDown(e){e.stopPropagation(),this.selection.activateChildGraph()}onContextMenu(){}onSelectGraph(e){this.requestUpdate()}onActiveGraph(e){this.requestUpdate()}};co=lo([(0,r.EM)("ff-hierarchy-tree-view")],co);const uo=co;let ho=class extends tn{constructor(e){super(),this.selection=null,this.rootId=(0,Xt.A)(),this.system=e}firstConnected(){super.firstConnected(),this.classList.add("ff-hierarchy-tree"),this.selection=this.system.getComponent(He.A,!0),this.root=this.selection.activeGraph}connected(){super.connected();const e=this.selection;e.selectedNodes.on(Or.A,this.onSelectNode,this),e.selectedComponents.on(Ie.Ay,this.onSelectComponent,this),e.on("active-graph",this.onActiveGraph,this),e.system.nodes.on(Or.A,this.onUpdate,this),e.system.components.on(Ie.Ay,this.onUpdate,this),e.system.on("hierarchy",this.onUpdate,this)}disconnected(){super.disconnected();const e=this.selection;e.selectedNodes.off(Or.A,this.onSelectNode,this),e.selectedComponents.off(Ie.Ay,this.onSelectComponent,this),e.off("active-graph",this.onActiveGraph,this),e.system.nodes.off(Or.A,this.onUpdate,this),e.system.components.off(Ie.Ay,this.onUpdate,this),e.system.off("hierarchy",this.onUpdate,this)}renderNodeHeader(e){if(e instanceof Ie.Ay||e instanceof Or.A)return e instanceof oo.Ay?r.qy`<div class="ff-text ff-ellipsis"><b>${e.displayName}</b></div>`:r.qy`<div class="ff-text ff-ellipsis">${e.displayName}</div>`;{const t=e.parent?e.parent.displayName:"Main";return r.qy`<div class="ff-text">${t}</div>`}}isNodeSelected(e){const t=this.selection;return e instanceof Ie.Ay?t.selectedComponents.contains(e):e instanceof Or.A&&t.selectedNodes.contains(e)}getId(e){return e.id||this.rootId}getClasses(e){return e instanceof Or.A?"ff-node":e instanceof Ie.Ay?"ff-component":"ff-system"}getChildren(e){if(e instanceof Or.A){let t=e.components.getArray();const n=e.components.get(so.A,!0);return n&&(t=t.concat(n.children.map(e=>e.node))),t}return e instanceof ro.A?e.findRootNodes():null}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):t instanceof Or.A?this.selection.selectNode(t,e.ctrlKey):t instanceof Ie.Ay&&this.selection.selectComponent(t,e.ctrlKey)}onNodeDblClick(e,t){t instanceof oo.Ay&&(this.selection.activeGraph=t.innerGraph)}onSelectNode(e){this.setSelected(e.object,e.add)}onSelectComponent(e){this.setSelected(e.object,e.add)}onActiveGraph(e){this.root=this.selection.activeGraph}};lo([(0,r.MZ)({attribute:!1})],ho.prototype,"system",void 0),ho=lo([(0,r.EM)("ff-hierarchy-tree")],ho);var po=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let mo=class extends $n{constructor(){super(...arguments),this.system=null,this.documentProvider=null,this.documents=[]}firstConnected(){super.firstConnected(),this.classList.add("sv-document-list"),this.documentProvider=this.system.getMainComponent(ze.A)}connected(){super.connected(),this.setDocuments(this.documentProvider.scopedComponents),this.documentProvider.on("active-component",this.onUpdate,this),this.documentProvider.on("scoped-components",this.onDocumentsEvent,this)}disconnected(){this.documentProvider.off("scoped-components",this.onDocumentsEvent,this),this.documentProvider.off("active-component",this.onUpdate,this),this.setDocuments([]),super.disconnected()}update(e){this.data=this.documents,super.update(e)}renderItem(e){return t.qy`<div class="ff-flex-row">
            <ff-text class="ff-ellipsis">${e.displayName}</ff-text></div>`}isItemSelected(e){return e===this.documentProvider.activeComponent}onClickItem(e,t){this.documentProvider.activeComponent=t}onDocumentsEvent(){this.setDocuments(this.documentProvider.scopedComponents)}setDocuments(e){this.documents.forEach(e=>e.off("change",this.onUpdate,this)),this.documents=e,this.documents.forEach(e=>e.on("change",this.onUpdate,this))}};po([(0,t.MZ)({attribute:!1})],mo.prototype,"system",void 0),mo=po([(0,t.EM)("sv-document-list")],mo);var fo,go=n(6687),vo=n(7078),yo=n(3164),bo=n(2464),Ao=n(3051),_o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let wo=fo=class extends Ye.Ay{static show(e,t,n){const i=new fo(t,n);return e.appendChild(i),new Promise(e=>{i.on("confirm",()=>e(!0)),i.on("close",()=>e(!1))})}constructor(e,t){super(),this.language=null,this.language=e,this.lightName=t,this.position="center",this.modal=!0}firstConnected(){super.firstConnected(),this.classList.add("sv-option-menu","sv-light-menu")}firstUpdated(e){super.firstUpdated(e),this.getElementsByClassName("ff-button")[1].focus()}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}confirm(){this.dispatchEvent(new CustomEvent("confirm")),this.remove()}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(0,Ao.i)((0,Ao.R)(this),e)}render(){const e=this.language,t=e.getUILocalizedString("Delete Light"),n=e.getUILocalizedString("Cancel"),i=e.getUILocalizedString("Delete");return Ye.qy`<div class="sv-light-menu" role="dialog" aria-label=${t} @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-column ff-fullsize" style="min-width:260px;">
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-title">${t}</div>
                </div>
                <div class="ff-flex-row" style="padding:8px 0;">
                    <div class="ff-text">${e.getUILocalizedString("Delete light")} '${this.lightName}'?</div>
                </div>
                <div class="ff-flex-row">
                    <ff-button icon="trash" class="ff-button ff-control" text=${i} title=${i} @click=${this.confirm} autofocus></ff-button>
                    <div class="ff-flex-spacer"></div>
                    <ff-button icon="close" class="ff-close-button ff-control" text=${n} title=${n} @click=${this.close}></ff-button>
                </div>
            </div>
        </div>`}};wo=fo=_o([(0,Ye.EM)("sv-confirm-delete-light")],wo);const xo=wo;var Co,Eo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Mo=Co=class extends Ye.Ay{static show(e,t){const n=new Co(t);return e.appendChild(n),new Promise((e,t)=>{n.on("confirm",()=>e([n.lightType,n.name])),n.on("close",()=>t())})}constructor(e){super(),this.language=null,this.lightType=vo.i.directional,this.name=vo.i[this.lightType],this.errorString="",this.language=e,this.position="center",this.modal=!0}close(){this.dispatchEvent(new CustomEvent("close")),this.remove()}confirm(){null===this.lightType||""===this.name.trim()?(this.errorString=this.language.getUILocalizedString("Please select a light type and enter a name."),this.requestUpdate()):(this.dispatchEvent(new CustomEvent("confirm")),this.remove())}firstConnected(){super.firstConnected(),this.classList.add("sv-option-menu","sv-light-menu")}renderLightTypeEntry(e,t){return Ye.qy`<div class="sv-entry" @click=${e=>this.onClickType(e,t)} ?selected=${e===this.lightType}>
            ${vo.i[e]}
        </div>`}onClickType(e,t){e.stopPropagation(),this.lightType=vo.i[vo.i[t]],this.requestUpdate()}onChange(e){e.stopPropagation();const t=e.target;this.lightType=parseInt(t.value),Object.values(vo.i).includes(this.name)&&(this.name=vo.i[this.lightType]),this.requestUpdate()}firstUpdated(e){super.firstUpdated(e),this.getElementsByClassName("ff-input")[0].focus()}onKeyDownMain(e){"Escape"===e.code?this.close():"Tab"===e.code&&(0,Ao.i)((0,Ao.R)(this),e)}render(){const e=this.language;return Ye.qy`
        <div class="sv-light-menu" role="region" aria-label="Create Light Menu" @keydown=${e=>this.onKeyDownMain(e)}>
            <div class="ff-flex-column ff-fullsize">
                <div class="ff-flex-row">
                    <div class="ff-flex-spacer ff-title">${e.getUILocalizedString("Create Light")}</div>
                </div>
                <div class="ff-flex-row">
                    <div class="ff-dropdown">
                    <select class="ff-input" .value=${this.lightType} @change=${this.onChange}>
                        ${Object.keys(vo.i).filter(e=>"number"==typeof vo.i[e]).map(e=>Ye.qy`<option value=${vo.i[e]}>${e}</option>`)}
                    </select>
                    </div>
                </div>
                <div class="ff-flex-row">
                    <label class="ff-label">${e.getUILocalizedString("Name")}</label>
                    <div class="ff-flex-spacer"></div>
                    <input class="ff-input" type="text" style="text-align:right;" .value=${this.name} @input=${e=>this.name=e.target.value} />
                </div>
                <div class="ff-flex-row">
                    <ff-button icon="check" class="ff-button ff-control" text=${e.getUILocalizedString("Create Light")} title=${e.getUILocalizedString("Create Light")} @click=${this.confirm}></ff-button>
                    <div class="ff-flex-spacer"></div>
                    <ff-button icon="close" class="ff-close-button ff-control" text=${e.getUILocalizedString("Cancel")} title=${e.getUILocalizedString("Cancel")} @click=${this.close}></ff-button>
                </div>
            </div>
        </div>
        `}};Mo=Co=Eo([(0,Ye.EM)("sv-create-light-menu")],Mo);const So=Mo;var To,ko=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Lo=To=class extends tn{constructor(){super(...arguments),this.documentProvider=null,this.nodeProvider=null}firstConnected(){super.firstConnected(),this.classList.add("sv-node-tree"),this.addEventListener("click",this.onContainerClick.bind(this)),this.documentProvider=this.system.getMainComponent(ze.A),this.nodeProvider=this.system.getMainComponent(On.A)}connected(){super.connected(),this.documentProvider.on("active-component",this.onUpdate,this),this.nodeProvider.on("active-node",this.onActiveNode,this),this.nodeProvider.on("scoped-nodes",this.onUpdate,this)}disconnected(){this.nodeProvider.off("scoped-nodes",this.onUpdate,this),this.nodeProvider.off("active-node",this.onActiveNode,this),this.documentProvider.off("active-component",this.onUpdate,this),super.disconnected()}update(e){const t=this.documentProvider.activeComponent;this.root=t?{id:"scene",children:[t.root]}:null,super.update(e)}renderNodeHeader(e){let n=[],i=[];return e.scene&&n.push(t.qy`<ff-icon class="sv-icon-scene" name=${e.scene.icon}></ff-icon>`),e.model&&n.push(t.qy`<ff-icon class="sv-icon-model" name=${e.model.icon}></ff-icon>`),"Lights"===e.name&&i.push(t.qy`<ff-button icon="create" title="Create Light" class="sv-add-light-btn" @click=${t=>this.onClickAddLight(t,e)}></ff-button>`),e.light&&(n.push(t.qy`<ff-icon class="${e.light.ins.enabled.value?"sv-icon-light ff-icon":"sv-icon-disabled ff-icon"}" name=${e.light.icon}></ff-icon>`),e.light.canDelete&&i.push(t.qy`<ff-button icon="trash" title="Delete Light" class="sv-delete-light-btn" @click=${t=>this.onClickDeleteLight(t,e)}></ff-button>`)),e.camera&&n.push(t.qy`<ff-icon class="sv-icon-camera" name=${e.camera.icon}></ff-icon>`),e.meta&&n.push(t.qy`<ff-icon class="sv-icon-meta" name=${e.meta.icon}></ff-icon>`),t.qy`${n}<div class="ff-text ff-ellipsis">${e.displayName}</div>${i}`}isNodeSelected(e){return e===this.nodeProvider.activeNode}getClasses(e){if(e.scene)return"sv-node-scene";if(e.model)return"sv-node-model";if(e.light){return e.transform.getComponent(bo.A).ins.enabled.value?"sv-node-light":"sv-node-light disabled"}return e.camera?"sv-node-camera":void 0}getChildren(e){return e===this.root?super.getChildren(e):e.transform.children.map(e=>e.node).filter(e=>e.is(gr.A)||e.is(yo.A))}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):this.nodeProvider.activeNode=t}onContainerClick(){this.nodeProvider.activeNode=null}onActiveNode(e){e.previous&&(e.previous.off("change",this.onUpdate,this),this.setSelected(e.previous,!1)),e.next&&(this.setSelected(e.next,!0),e.next.on("change",this.onUpdate,this))}onClickAddLight(e,t){e.stopPropagation();const n=document.getElementsByTagName("voyager-story")[0],i=this.documentProvider.activeComponent.setup.language;So.show(n,i).then(([e,n])=>{const i=To.createLightNode(t,e,n);t.transform.addChild(i.transform),this.nodeProvider.activeNode=i,this.setExpanded(t,!0),this.requestUpdate()}).catch(e=>console.error("Error creating light:",e))}static createLightNode(e,t,n){const i=go.h.find(e=>e.type===vo.i[t].toString());if(!i)throw new Error(`Unsupported light type: '${t}'`);const r=e.graph.createCustomNode(e),o=r.transform.createComponent(i),s=o.getGraphComponent(ii.A);let a=.5*(0,Ar.A)(qn.uj.m,s.ins.units.value);return a*=t===vo.i.rect?.05:.5,o.transform.ins.scale.setValue([a,a,a]),o.ins.name.setValue(n),o.update(this),o.getGraphComponent(ii.A).ins.lightUpdated.set(),r}onClickDeleteLight(e,t){if(e.stopPropagation(),!t.light)return;const n=document.getElementsByTagName("voyager-story")[0],i=this.documentProvider.activeComponent.setup.language;xo.show(n,i,t.name).then(e=>{var n;e&&(this.nodeProvider.activeNode===t&&(this.nodeProvider.activeNode=null===(n=t.transform.parent)||void 0===n?void 0:n.node),t.dispose(),this.requestUpdate())})}};ko([(0,t.MZ)({attribute:!1})],Lo.prototype,"system",void 0),Lo=To=ko([(0,t.EM)("sv-node-tree")],Lo);var Do=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Io=class extends r.Ay{get taskProvider(){return this.system.getMainComponent(mr)}firstConnected(){this.classList.add("sv-panel","sv-navigator-panel")}connected(){this.taskProvider.ins.mode.on("value",this.performUpdate,this)}disconnected(){this.taskProvider.ins.mode.off("value",this.performUpdate,this)}render(){const e=this.system,t=this.taskProvider.expertMode?r.qy`<div class="ff-splitter-section ff-flex-column" style="flex-basis: 30%">
            <div class="sv-panel-header">
                <ff-icon name="document"></ff-icon>
                <div class="ff-text">Documents</div>
            </div>
            <div class="ff-flex-item-stretch"><div class="ff-scroll-y">
                <sv-document-list .system=${e}></sv-document-list>
            </div></div>
            </div>
            <ff-splitter direction="vertical"></ff-splitter>`:null;return r.qy`${t}
            <div class="ff-splitter-section ff-flex-column" style="flex-basis: 70%">
                <div class="sv-panel-header">
                    <ff-icon name="hierarchy"></ff-icon>
                    <div class="ff-text">Nodes</div>
                </div>
                <sv-node-tree class="ff-flex-item-stretch" .system=${e}></sv-node-tree>
            </div>`}};Io=Do([(0,r.EM)("sv-navigator-panel")],Io);const Ro=Io;var Oo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Po=class extends t.Ay{constructor(){super(...arguments),this.name="",this.index=0,this.items=null,this.itemIndex=-1,this.setFocus=!1}firstConnected(){this.setAttribute("role","menu"),this.classList.add("ff-menu")}render(){return this.items?t.qy`${this.items.map((e,t)=>this.renderItem(e,t))}`:t.qy``}renderItem(e,n){let i,r;if("string"==typeof e)i=e,r="empty";else{if(e.divider)return t.qy`<div class="ff-divider"></div>`;i=e.text,r=e.icon||(e.checked?"check":"empty")}return t.qy`<ff-button index=${n} selectedIndex=${this.itemIndex}
            icon=${r} text=${i} @click=${this.onClick} @keydown=${this.onKeyDown}></ff-button>`}updated(){if(this.setFocus){const e=this.itemIndex>=0?this.itemIndex:0;this.focusItem(e)}}focusItem(e){const t=this.children.item(e);t instanceof HTMLElement&&t.focus()}onClick(e){const t=this.items[e.target.index];t&&this.dispatchEvent(new CustomEvent("select",{detail:{item:t},bubbles:!0}))}onKeyDown(e){const t=this.items;if("ArrowDown"===e.code){let n=e.target.index;do{n=(n+1)%t.length}while(t[n].divider);this.focusItem(n)}else if("ArrowUp"===e.code){let n=e.target.index;do{n=(n+t.length-1)%t.length}while(t[n].divider);this.focusItem(n)}}};Po.iconChecked="fas fa-check",Oo([(0,t.MZ)({type:String})],Po.prototype,"name",void 0),Oo([(0,t.MZ)({type:Number})],Po.prototype,"index",void 0),Oo([(0,t.MZ)({attribute:!1})],Po.prototype,"items",void 0),Oo([(0,t.MZ)({type:Number})],Po.prototype,"itemIndex",void 0),Oo([(0,t.MZ)({type:Boolean})],Po.prototype,"setFocus",void 0),Po=Oo([(0,t.EM)("ff-menu")],Po);var Bo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let No=class extends Ge.A{constructor(){super(),this.direction="down",this.align="left",this.items=[],this.itemIndex=-1,this.caret=!0,this.onKeyOrPointer=this.onKeyOrPointer.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}firstConnected(){super.firstConnected(),this.classList.add("ff-dropdown")}connected(){super.connected(),document.addEventListener("pointerdown",this.onKeyOrPointer,{capture:!0,passive:!0}),document.addEventListener("keyup",this.onKeyOrPointer,{capture:!0,passive:!0})}disconnected(){super.disconnected(),document.removeEventListener("pointerdown",this.onKeyOrPointer),document.removeEventListener("keyup",this.onKeyOrPointer)}render(){const e=("up"===this.direction?"ff-position-above ":"ff-position-below ")+("right"===this.align?"ff-align-right":"ff-align-left"),n=this.selected?t.qy`<ff-menu class=${e} .items=${this.items} itemIndex=${this.itemIndex} setFocus></ff-menu>`:null;return t.qy`${super.render()}${n}`}onClick(e){this.selected=!this.selected,this.selected||setTimeout(()=>this.focus(),0)}onKeyDown(e){super.onKeyDown(e),"Escape"===e.code&&this.selected&&(this.selected=!1)}onKeyOrPointer(e){!this.selected||e.target instanceof Node&&this.contains(e.target)||(this.selected=!1)}};Bo([(0,t.MZ)({type:String})],No.prototype,"direction",void 0),Bo([(0,t.MZ)({type:String})],No.prototype,"align",void 0),Bo([(0,t.MZ)({attribute:!1})],No.prototype,"items",void 0),Bo([(0,t.MZ)({type:Number})],No.prototype,"itemIndex",void 0),No=Bo([(0,t.EM)("ff-dropdown")],No);var Uo=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Fo=class extends r.Ay{constructor(e){super(e),this.story=null,this.taskProvider=null,this.story=e.getMainComponent(Tr),this.taskProvider=e.getMainComponent(mr)}get assetReader(){return this.system.getMainComponent(Zi.A)}get language(){return this.system.getComponent(pr.A)}firstConnected(){this.classList.add("sv-task-bar")}connected(){this.taskProvider.on("scoped-components",this.onUpdate,this),this.taskProvider.on("active-component",this.onUpdate,this),this.language.outs.uiLanguage.on("value",this.onUpdate,this)}disconnected(){this.taskProvider.off("scoped-components",this.onUpdate,this),this.taskProvider.off("active-component",this.onUpdate,this),this.language.outs.uiLanguage.on("value",this.onUpdate,this)}render(){const e=this.taskProvider.scopedComponents,t=this.taskProvider.activeComponent,n=this.taskProvider.ins.mode.value,i=this.taskProvider.ins.mode.getOptionText(),o=n!==ur.Standalone,s=this.language,a=s.getUILocalizedString(n!==ur.Standalone?"Save":"Download"),l=[{name:"save",icon:"save",text:a}];return n!==ur.Standalone&&l.push({name:"capture",icon:"save",text:s.getLocalizedString("Save State")},{name:"download",icon:"download",text:s.getLocalizedString("Download")}),l.push({name:"iiif",icon:"download",text:s.getLocalizedString("IIIF")}),r.qy`
            <img class="sv-story-logo" src=${this.assetReader.getSystemAssetUrl("images/voyager-75grey.svg")} alt="Logo"/>
            <div class="sv-mode ff-text">${i}</div>
            <div class="sv-spacer"></div>
            <div class="sv-divider"></div>
            <div class="ff-flex-row ff-group ff-scroll-x" @click=${this.onClickTask}>
                ${e.map((e,n)=>r.qy`<ff-button text=${s.getUILocalizedString(e.text)} icon=${e.icon} index=${n} ?selected=${e===t}></ff-button>`)}
            </div>
            <div class="sv-divider"></div>
            <div class="sv-spacer"></div>
            <div class="sv-divider"></div>
            <div class="ff-flex-row ff-group" style="min-width:100px">
                ${1<l.length?r.qy`<ff-dropdown caret text="${a}" icon="save" @select=${this.onSelectSave} .items=${l}></ff-dropdown>`:r.qy`<ff-button text="${l[0].text}" icon="${l[0].icon}" @click=${()=>this.onSelectSave(new CustomEvent("select",{detail:{item:l[0]}}))}></ff-button>`}
                ${o?r.qy`<ff-button text="${s.getLocalizedString("Exit")}" icon="exit" @click=${this.onClickExit}></ff-button>`:null}
            </div>
        `}onClickTask(e){if(e.target instanceof Ge.A){const t=this.taskProvider.scopedComponents;this.taskProvider.activeComponent=t[e.target.index]}}onSelectSave(e){switch(e.detail.item.name){case"save":this.story.ins.save.set();break;case"capture":this.system.getComponent(Pn.A).ins.saveState.set(),this.story.ins.save.set();break;case"download":this.story.ins.download.set();break;case"iiif":this.story.ins.iiif.set();break;default:console.warn("Unhandled save method : ",e.detail.item.name)}}onClickExit(){this.story.ins.exit.set()}};Fo=Uo([(0,r.EM)("sv-task-bar")],Fo);const zo=Fo;var Ho=n(5131),jo=n.n(Ho);n(2641),n(6535),n(9463),n(2006),n(7571),n(1611),n(5182);const Vo="/**\n* Copyright (c) Tiny Technologies, Inc. All rights reserved.\n* Licensed under the LGPL or a commercial license.\n* For LGPL see License.txt in the project root for license information.\n* For commercial licenses see https://www.tiny.cloud/\n*/\n.mce-content-body .mce-item-anchor{background:transparent url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A\") no-repeat center;cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;-ms-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment{background-color:#fff0b7}.tox-comments-visible .tox-comment--active{background-color:#ffe168}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden)::before{content:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A\");cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked::before{content:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A\")}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden)::before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body [contentEditable=false]{cursor:default}.mce-content-body [contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A\"),default}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px 0 2px;position:relative}.mce-preview-object .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected=\"2\"] .mce-shim{display:none}.mce-object{background:transparent url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A\") no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected=\"2\"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--16by9,.tiny-pageembed--1by1,.tiny-pageembed--21by9,.tiny-pageembed--4by3{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--16by9 iframe,.tiny-pageembed--1by1 iframe,.tiny-pageembed--21by9 iframe,.tiny-pageembed--4by3 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before{color:rgba(255,255,255,.5);content:attr(data-mce-placeholder);position:absolute}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks)::before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks)::before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:nth-of-type(1){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed #000;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns td,.mce-content-body .mce-clonedresizable.mce-resizetable-columns th{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0,0,0,.75);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor::before{background-color:inherit;border-radius:50%;content:'';display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover::after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A\") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body audio[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body img[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body table[data-mce-selected],.mce-content-body video[data-mce-selected]{outline:3px solid #b4d7ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #b4d7ff;outline-offset:1px}.mce-content-body [contentEditable=false] [contentEditable=true]:focus{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false] [contentEditable=true]:hover{outline:3px solid #b4d7ff}.mce-content-body [contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #b4d7ff}.mce-content-body.mce-content-readonly [contentEditable=true]:focus,.mce-content-body.mce-content-readonly [contentEditable=true]:hover{outline:0}.mce-content-body [data-mce-selected=inline-boundary]{background-color:#b4d7ff}.mce-content-body .mce-edit-focus{outline:3px solid #b4d7ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:0 0}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:0;-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{background-color:rgba(180,215,255,.7);border:1px solid rgba(180,215,255,.7);bottom:-1px;content:'';left:-1px;mix-blend-mode:multiply;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.mce-content-body td[data-mce-selected]::after,.mce-content-body th[data-mce-selected]::after{border-color:rgba(0,84,180,.7)}}.mce-content-body img::selection{background:0 0}.ephox-snooker-resizer-bar{background-color:#b4d7ff;opacity:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A\");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url(\"data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A\");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc li{list-style-type:none}.mce-item-table:not([border]),.mce-item-table:not([border]) caption,.mce-item-table:not([border]) td,.mce-item-table:not([border]) th,.mce-item-table[border=\"0\"],.mce-item-table[border=\"0\"] caption,.mce-item-table[border=\"0\"] td,.mce-item-table[border=\"0\"] th,table[style*=\"border-width: 0px\"],table[style*=\"border-width: 0px\"] caption,table[style*=\"border-width: 0px\"] td,table[style*=\"border-width: 0px\"] th{border:1px dashed #bbb}.mce-visualblocks address,.mce-visualblocks article,.mce-visualblocks aside,.mce-visualblocks blockquote,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks dl,.mce-visualblocks figcaption,.mce-visualblocks figure,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks hgroup,.mce-visualblocks ol,.mce-visualblocks p,.mce-visualblocks pre,.mce-visualblocks section,.mce-visualblocks ul{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) dl,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) ul{margin-left:3px}.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] dl,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] ul{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy::after{content:'-'}body{font-family:sans-serif}table{border-collapse:collapse}",Yo='/**\n* Copyright (c) Tiny Technologies, Inc. All rights reserved.\n* Licensed under the LGPL or a commercial license.\n* For LGPL see License.txt in the project root for license information.\n* For commercial licenses see https://www.tiny.cloud/\n*/\nbody{font-family:"Hind Siliguri",sans-serif;line-height:1.4;margin:1rem;background-color:#272727;color:#c8c8c8}table{border-collapse:collapse}table td,table th{border:1px solid #ccc;padding:.4rem}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}h1{margin:.3em 0;font-family:Amiri,serif;font-size:2.3em;font-weight:400;color:#e8e8e8}a:link,a:visited,a:hover,a:active{color:#0089bf;}',Go='/*\n * CSS Rules overrides over tinymce\'s default styles\n */\nhtml {\n  display: flex;\n  justify-content: center;\n}\n\nbody {\n  font-family:"Hind Siliguri",sans-serif;\n}\n\n.mce-content-body {\n  flex: 0 2 720px;\n  word-wrap: normal;\n  font-size: 0.85em;\n}\n\n.mce-content-body img {\n  max-width: 100%;\n  height: auto;\n}\n\n.mce-content-body iframe, video {\n  max-width: 100%;\n}\n\n.mce-content-body figure.align-center {\n  text-align: center;\n}\n\n.mce-content-body p, ul, ol {\n  font-size: 1.15em;\n  margin: 0.8em 0;\n}\n\n.mce-content-body figcaption {\n  font-size: 1.15em;\n}\n\n';var Qo=n(7801),$o=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let qo=class extends r.Ay{constructor(){super(...arguments),this._container=null,this._overlay=null,this._assetPath=""}get mediaManager(){return this.system.getMainComponent(Xe)}get assetManager(){return this.system.getMainComponent(Fe.A)}get assetReader(){return this.system.getMainComponent(Zi.A)}get assetWriter(){return this.system.getMainComponent(xt)}get standaloneFileManager(){return this.system.getMainComponent(je,!0)}get articleReader(){return this.system.getComponent(Qo.Ay)}openArticle(e){return this._assetPath?this.closeArticle().then(()=>this.readArticle(e)):this.readArticle(e)}saveArticle(){this._assetPath&&this.writeArticle()}closeArticle(){return jo().activeEditor.isDirty()&&this._assetPath?Si.show("Close Article","Would you like save your changes?","warning","yes-no").then(e=>e.ok?this.writeArticle().then(()=>this.clearArticle()):this.clearArticle()):this.clearArticle()}readArticle(e){return this.assetReader.getText(e).then(t=>this.parseArticle(t,e)).catch(t=>`\n                <h2>Article not found at ${e}</h2>\n                <p>\n                    ${t}\n                </p>\n            `).then(t=>{jo().activeEditor.setContent(t,{format:"raw"}),this._assetPath=e}).then(()=>{jo().activeEditor.setDirty(!1),this._overlay.parentElement===this&&this.removeChild(this._overlay)})}parseArticle(e,t){e=e.replace(/[\n\r]/g,"");const n=this.assetManager.getAssetBasePath(t);return e=e.replace(/(src=\")(.*?)(\")/g,(e,t,i,r)=>(i.startsWith("/")||i.startsWith("http")||(i=this.assetManager.getAssetUrl(n+i)),t+i+r)),Promise.resolve(e)}writeArticle(){const e=this.assetManager.getAssetBasePath(this._assetPath);let t=jo().activeEditor.getContent({format:"raw"});return t=t.replace(/(src=\")(.*?)(\")/g,(t,n,i,r)=>i.startsWith("blob")?n+(i=(i=this.standaloneFileManager.blobUrlToFileUrl(i)).replace(Xe.articleFolder+"/",""))+r:n+this.assetManager.getRelativeAssetPath(i,e)+r),this.assetWriter.putText(t,this._assetPath).then(()=>{jo().activeEditor.setDirty(!1),this.articleReader.ins.articleId.set(),new Ue.Ay(`Article successfully written to '${this._assetPath}'`,"info")}).catch(e=>{new Ue.Ay(`Failed to write article to '${this._assetPath}': ${e.message}`,"error")})}clearArticle(){return jo().activeEditor.setContent(""),this._assetPath="",jo().activeEditor.setDirty(!1),this.appendChild(this._overlay),Promise.resolve()}firstConnected(){super.firstConnected(),this.classList.add("sv-article-editor"),this._container=this.appendElement("div"),this._container.classList.add("sv-container"),this._container.id="editor_wrapper",this._overlay=this.appendElement("div"),this._overlay.classList.add("sv-overlay"),jo().init({selector:"#editor_wrapper",plugins:"image link lists media",toolbar:"saveButton closeButton | undo redo | link image media | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | outdent indent | styles",menubar:!1,skin:!1,height:"100%",resize:!1,branding:!1,automatic_uploads:!0,images_reuse_filename:!0,link_assume_external_targets:"https",paste_as_text:!0,content_css:!1,font_css:this.assetReader.getSystemAssetUrl("fonts/fonts.css"),content_style:[Yo,Vo,Go].join("\n"),convert_urls:!1,image_caption:!0,link_default_target:"_blank",images_upload_handler:(e,t)=>new Promise((t,n)=>{const i=this.mediaManager.getUniqueName(Xe.articleFolder+"/"+e.filename());this.mediaManager.uploadFile(i,e.blob(),this.mediaManager.getAssetByPath(Xe.articleFolder+"/")).then(()=>{t(this.assetManager.getAssetUrl(Xe.articleFolder+"/"+i))})}),init_instance_callback:e=>{e.editorUpload.addFilter(t=>{const n=e.editorUpload.blobCache.getByUri(t.src);if(n){if(!this.standaloneFileManager)return!0;{const e=this.mediaManager.getUniqueName(Xe.articleFolder+"/"+n.filename());this.mediaManager.uploadFile(e,n.blob(),this.mediaManager.getAssetByPath(Xe.articleFolder+"/")),t.src=this.assetManager.getAssetUrl(Xe.articleFolder+"/"+e)}}return!1})},setup:e=>{e.ui.registry.addButton("saveButton",{text:"Save",icon:"save",onAction:e=>{this.saveArticle()}}),e.ui.registry.addButton("closeButton",{text:"Close",icon:"close",onAction:e=>{this.closeArticle()}})}})}connected(){super.connected(),this.mediaManager.on("asset-open",this.onOpenAsset,this),this.mediaManager.on("asset-rename",this.onRenameAsset,this)}disconnected(){this.mediaManager.off("asset-rename",this.onRenameAsset,this),this.mediaManager.off("asset-open",this.onOpenAsset,this),super.disconnected()}onOpenAsset(e){null===e.asset?this._assetPath&&this.closeArticle():e.asset.info.type.startsWith("text/")&&this.openArticle(e.asset.info.path)}onRenameAsset(e){e.oldPath===this._assetPath&&(this._assetPath=e.newPath)}};qo=$o([(0,r.EM)("sv-article-editor")],qo);const Wo=qo;var Ko=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Zo=class extends r.Ay{constructor(e){super(e),this._editor=new Wo(e)}get editor(){return this._editor}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-editor-panel"),this.appendElement(this._editor)}};Zo=Ko([(0,r.EM)("sv-editor-panel")],Zo);const Xo=Zo;var Jo=n(9293),es=n(4222),ts=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ns=class extends t.Ay{constructor(){super(),this.rows=null,this.selectedRows=null,this.columns=null,this.placeholder="",this.resizable=!1,this._sortedRows=null,this._sortColumnIndex=-1,this._sortReversed=!1,this.onClickHeader=this.onClickHeader.bind(this)}firstConnected(){super.firstConnected(),this.classList.add("ff-table")}getSorter(e){return"function"==typeof e.sortable?e.sortable:(t,n)=>{const i=this.getCellContent(t,e,0),r=this.getCellContent(n,e,0);return"string"!=typeof i?0:i<r?-1:i>r?1:0}}isRowSelected(e){return this.selectedRows&&this.selectedRows instanceof Set?this.selectedRows.has(e):e===this.selectedRows}renderHeader(e,n){const i=e.header,r=1/this.columns.length,o="string"==typeof e.width?e.width:100*(e.width||r)+"%";let s=e.className||"",a=null;if(e.sortable&&(s+=" ff-sortable"),-1===this._sortColumnIndex&&e.sortable&&(this._sortColumnIndex=n),this._sortColumnIndex===n){const n=this.getSorter(e);n&&(this._sortReversed?this._sortedRows.sort((e,t)=>n(t,e)):this._sortedRows.sort(n),a=t.qy`<ff-icon class="ff-table-sort-icon" name="${this._sortReversed?"caret-up":"caret-down"}"></ff-icon>`)}return"string"==typeof i?t.qy`<th class="ff-table-header ${s}" style="width: ${o}" @click=${t=>this.onClickHeader(t,e,n)}>${i}${a}</th>`:i(e,this.onClickHeader)}renderRow(e,n){const i=this.columns,r=this.isRowSelected(e);return t.qy`<tr ?selected=${r} @click=${t=>this.onClickRow(t,e,n)}>${i.map(t=>this.renderCell(e,t,n,r))}</tr>`}renderCell(e,n,i,r){const o=this.getCellContent(e,n,i);if("string"==typeof o){const e=n.className||"";return t.qy`<td class="ff-table-cell ${e}">${o}</td>`}return o}getCellContent(e,t,n){const i=t.cell;return"string"==typeof i?e[i]:i(e,n)}render(){if(!this.rows||!this.columns)return t.qy`<div class="ff-placeholder"><div class="ff-text">${this.placeholder}</div></div>`;const e=this._sortedRows=this.rows.slice(),n=this.columns;return t.qy`<table><thead><tr>${n.map((e,t)=>this.renderHeader(e,t))}</tr></thead>
            <tbody>${e.map((e,t)=>this.renderRow(e,t))}</tbody></table>`}onClickHeader(e,t,n){t.sortable&&(this._sortColumnIndex===n?this._sortReversed=!this._sortReversed:(this._sortColumnIndex=n,this._sortReversed=!1),this.requestUpdate()),this.dispatchEvent(new CustomEvent("colclick",{detail:{column:t}}))}onClickRow(e,t,n){this.dispatchEvent(new CustomEvent("rowclick",{detail:{row:t,index:n}}))}};ts([(0,t.MZ)({attribute:!1})],ns.prototype,"rows",void 0),ts([(0,t.MZ)({attribute:!1})],ns.prototype,"selectedRows",void 0),ts([(0,t.MZ)({attribute:!1})],ns.prototype,"columns",void 0),ts([(0,t.MZ)({type:String})],ns.prototype,"placeholder",void 0),ts([(0,t.MZ)({type:Boolean})],ns.prototype,"resizable",void 0),ns=ts([(0,t.EM)("ff-table")],ns);const is=ns;var rs,os=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ss=rs=class extends o.Ay{constructor(){super(...arguments),this.stateTable=null,this.subscriber=null,this.tours=null}get toursTask(){return this.system.getMainComponent(zi,!0)}firstConnected(){super.firstConnected(),this.classList.add("sv-panel","sv-tour-panel"),this.stateTable=new is,this.stateTable.columns=rs.tableColumns,this.stateTable.placeholder="Start by creating a tour step.",this.stateTable.addEventListener("rowclick",this.onClickTableRow.bind(this)),this.subscriber=new Jo.A("value",this.onUpdate,this)}connected(){super.connected(),this.system.components.on(zi,this.onToursTask,this);const e=this.toursTask;e&&e.outs.isActive.on("value",this.onUpdate,this),this.activeDocument.setup.language.outs.uiLanguage.on("value",this.onUpdate,this)}disconnected(){const e=this.toursTask;e&&e.outs.isActive.off("value",this.onUpdate,this),this.system.components.off(zi,this.onToursTask,this),this.activeDocument.setup.language.outs.uiLanguage.off("value",this.onUpdate,this),super.disconnected()}render(){if(!this.activeDocument)return;const e=this.toursTask,t=this.tours,n=t.snapshots,i=this.activeDocument.setup.language;if(!e||!t.ins.enabled.value)return o.qy`<div class="ff-placeholder">${i.getUILocalizedString("Tour edit task not available.")}</div>`;if(!t.activeTour)return o.qy`<div class="ff-placeholder">${i.getUILocalizedString("Please create or select a tour to edit.")}</div>`;const r=t.activeStep,s=o.qy`<span class="sv-missing-translation">Missing content</span>`,a=r?o.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <sv-property-view .property=${e.ins.stepTitle}></sv-property-view>
            <sv-property-view .property=${e.ins.stepCurve}></sv-property-view>
            <sv-property-view .property=${e.ins.stepDuration} commitonly></sv-property-view>
            <sv-property-view .property=${e.ins.stepThreshold} commitonly></sv-property-view>
            <div class="sv-label">Alt Text</div>
            <ff-text-edit name="altText" text=${e.ins.stepAltText.value} @change=${this.onTextEdit}></ff-text-edit>
        </div>`:o.qy`<div class="ff-placeholder"><div>${i.getUILocalizedString("Create or select a tour step to edit.")}</div></div>`;return this.stateTable.rows=t.activeSteps.map(e=>{const t=n.getState(e.id);return{title:e.titles[i.codeString()]||s,curve:es.k[t.curve],duration:t.duration.toFixed(1)+"s",threshold:(100*t.threshold).toFixed(0)+"%"}}),this.stateTable.selectedRows=this.stateTable.rows[t.outs.stepIndex.value],o.qy`<div class="sv-panel-header">
            <ff-button text="${i.getUILocalizedString("Update")}" icon="camera" @click=${this.onClickUpdate}></ff-button>
            <ff-button text="${i.getUILocalizedString("Create")}" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button text="${i.getUILocalizedString("Move Up")}" icon="up" ?disabled=${!r} @click=${this.onClickUp}></ff-button>
            <ff-button text="${i.getUILocalizedString("Move Down")}" icon="down" ?disabled=${!r} @click=${this.onClickDown}></ff-button>
            <ff-button text="${i.getUILocalizedString("Delete")}" icon="trash" ?disabled=${!r} @click=${this.onClickDelete}></ff-button>
        </div>
        <div class="ff-flex-item-stretch ff-flex-row">
            <div class="ff-splitter-section" style="flex-basis: 60%">
                <div class="ff-scroll-y ff-flex-column">${this.stateTable}</div>
            </div>
            <ff-splitter></ff-splitter>
            <div class="ff-splitter-section" style="flex-basis: 40%">
                ${a}
            </div>
        </div>`}onClickTableRow(e){this.tours.ins.stepIndex.setValue(e.detail.index)}onClickUpdate(){this.toursTask.ins.updateStep.set()}onClickCreate(){this.toursTask.ins.createStep.set()}onClickDelete(){this.toursTask.ins.deleteStep.set()}onClickUp(){this.toursTask.ins.moveStepUp.set()}onClickDown(){this.toursTask.ins.moveStepDown.set()}onActiveDocument(e,t){e&&this.subscriber.off(),t&&(this.tours=t.setup.tours,this.subscriber.on(this.tours.ins.enabled,this.tours.ins.tourIndex,this.tours.outs.stepIndex)),this.requestUpdate()}onToursTask(e){e.add&&e.object.outs.isActive.on("value",this.onUpdate,this),e.remove&&e.object.outs.isActive.off("value",this.onUpdate,this),this.requestUpdate()}onTextEdit(e){const t=e.target,n=e.detail.text;"altText"===t.name&&this.toursTask.ins.stepAltText.setValue(n)}};ss.tableColumns=[{header:"#",width:.05,cell:(e,t)=>t.toString()},{header:"Title",width:.4,cell:"title"},{header:"Curve",width:.25,cell:"curve"},{header:"Duration",width:.15,cell:"duration"},{header:"Threshold",width:.15,cell:"threshold"}],ss=rs=os([(0,o.EM)("sv-tour-panel")],ss);const as=ss;var ls=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let cs=class extends r.Ay{constructor(e){if(super(e),this.taskProvider=null,this.taskProvider=e.getMainComponent(mr),!this.taskProvider)throw new Error("missing task provider")}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-task-panel")}connected(){super.connected(),this.taskProvider.on("active-component",this.onUpdate,this)}disconnected(){this.taskProvider.off("active-component",this.onUpdate,this),super.disconnected()}render(){const e=this.taskProvider.activeComponent;if(!e)return r.qy``;const t=e.createView();return r.qy`
            <div class="sv-panel-header">
                <ff-icon name=${e.icon}></ff-icon>
                <div class="ff-text">${e.text}</div>
            </div>
            <div class="sv-panel-content">
                ${t}
            </div>
        `}};cs=ls([(0,r.EM)("sv-task-panel")],cs);const ds=cs;var us,hs=n(3681),ps=n.n(hs),ms=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let fs=us=class extends St.Ay{constructor(e){super(e),this.notes=null,this.activeNote=null,this.noteTable=new is,this.noteTable.columns=us.tableColumns,this.noteTable.placeholder="No notes available.",this.noteTable.addEventListener("rowclick",this.onClickTableRow.bind(this))}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-notes-panel")}connected(){super.connected(),this.activeDocument.setup.language.outs.uiLanguage.on("value",this.onUpdate,this)}disconnected(){this.activeDocument.setup.language.outs.uiLanguage.off("value",this.onUpdate,this),super.disconnected()}renderNote(e){const t=this.activeDocument.setup.language;if(!e)return St.qy`<div class="ff-placeholder">
                <div>${t.getUILocalizedString("Select or create a note to edit it.")}</div>
            </div>`;const n=ps()(e.date).format("YYYY-MM-DD HH:mm:ss");return St.qy`<div class="ff-scroll-y ff-flex-column sv-detail-view">
            <div class="sv-note-field">${t.getUILocalizedString("Created on")} ${n}</div>
            <ff-line-edit text=${e.user} placeholder="${t.getUILocalizedString("User")}" @change=${this.onEditUser}></ff-line-edit>
            <ff-text-edit text=${e.text} placeholder="${t.getUILocalizedString("Comment")}" @change=${this.onEditText}></ff-text-edit>
            </div>
        </div>`}render(){if(!this.activeDocument)return;const e=this.activeDocument.setup.language,t=this.activeNode;if(!t||!t.scene&&!t.model)return St.qy`<div class="ff-placeholder">
                <div>${e.getUILocalizedString("Please select a scene or model to display its notes.")}</div>
            </div>`;this.getNotes();const n=this.activeNote,i=this.noteTable;return i.rows=this.notes||[],i.selectedRows=n,i.requestUpdate(),St.qy`<div class="sv-panel-header">
            <ff-button text="${e.getUILocalizedString("Add Note")}" icon="create" @click=${this.onClickCreate}></ff-button>
            <ff-button text="${e.getUILocalizedString("Delete Note")}" icon="trash" ?disabled=${!n} @click=${this.onClickDelete}></ff-button>
        </div>
        <div class="ff-flex-item-stretch ff-flex-row">
            <div class="ff-splitter-section" style="flex-basis: 60%">
                <div class="ff-scroll-y ff-flex-column">${i}</div>
            </div>
            <ff-splitter></ff-splitter>
            <div class="ff-splitter-section" style="flex-basis: 40%">
                ${this.renderNote(n)}
            </div>
        </div>`}onEditUser(e){this.activeNote.user=e.detail.text,this.requestUpdate()}onEditText(e){this.activeNote.text=e.detail.text,this.requestUpdate()}onClickTableRow(e){this.activeNote=e.detail.row,this.requestUpdate(),setTimeout(()=>this.getElementsByTagName("ff-text-edit").item(0).focus(),0)}onClickCreate(){this.getOrCreateNotes();const e={date:(new Date).toISOString(),user:"",text:""};this.notes.push(e),this.activeNote=e,this.requestUpdate(),setTimeout(()=>this.getElementsByTagName("ff-line-edit").item(0).focus(),0)}onClickDelete(){const e=this.notes.indexOf(this.activeNote);e>=0&&this.notes.splice(e,1),this.activeNote=this.notes[e]||null,this.requestUpdate()}onActiveNode(e,t){this.notes=null,this.activeNote=null,this.requestUpdate()}getNotes(){const e=this.activeNode;if(!e)return;const t=e.meta&&e.meta.process;t&&(this.notes=t.get("notes"),this.notes&&!this.activeNote&&(this.activeNote=this.notes[0]))}getOrCreateNotes(){this.notes=null,this.activeNote=null;const e=this.activeNode;if(!e)return;e.meta||!e.scene&&!e.model||e.createComponent(Ze.A);const t=e.meta&&e.meta.process;t&&(this.notes=t.getOrCreate("notes",[]))}};fs.tableColumns=[{header:"Date",width:.3,cell:e=>ps()(e.date).format("YYYY-MM-DD HH:mm:ss"),sortable:!0},{header:"User",width:.25,cell:"user",sortable:!0},{header:"Text",width:.45,cell:"text",sortable:!0}],fs=us=ms([(0,St.EM)("sv-notes-panel")],fs);const gs=fs;var vs=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ys=class extends r.Ay{constructor(){super(...arguments),this.entries=[],this.logFunction=null}firstConnected(){this.classList.add("sv-scrollable","sv-panel","sv-console-panel")}connected(){}disconnected(){}render(){return r.qy`<div>${this.entries.map(e=>r.qy`<div>${e}</div>`)}</div>`}};ys=vs([(0,r.EM)("sv-console-panel")],ys);const bs=ys;var As=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let _s=class extends tn{constructor(e){super(),this.selection=null,this.includeRoot=!0,this.system=e,this.selection=e.getComponent(He.A,!0)}firstConnected(){super.firstConnected(),this.classList.add("ff-property-tree")}connected(){super.connected();const e=this.selection;e.selectedNodes.on(Or.A,this.onSelectNode,this),e.selectedComponents.on(Ie.Ay,this.onSelectComponent,this);const t=e.getSelectedNode();if(t)this.root=this.createNodeTreeNode(t);else{const t=e.getSelectedComponent();this.root=t?this.createComponentTreeNode(t):null}}disconnected(){super.disconnected(),this.selection.selectedNodes.off(Or.A,this.onSelectNode,this),this.selection.selectedComponents.off(Ie.Ay,this.onSelectComponent,this)}getClasses(e){return e.classes}renderNodeHeader(e){return e.property?t.qy`<div class="ff-text ff-property-label ff-ellipsis">${e.text}</div>
                <ff-property-view .property=${e.property}></ff-property-view>`:t.qy`<div class="ff-text ff-label ff-ellipsis">${e.text}</div>`}onSelectNode(e){e.add?this.root=this.createNodeTreeNode(e.object):this.root=null}onSelectComponent(e){e.add?this.root=this.createComponentTreeNode(e.object):this.root=null}createNodeTreeNode(e){return{id:e.id,text:e.displayName,classes:"ff-node",children:e.components.getArray().map(e=>this.createComponentTreeNode(e))}}createComponentTreeNode(e){const t=e.id,n=t+"i",i=t+"o";return{id:t,text:e.displayName,classes:"ff-component",property:null,children:[this.createGroupNode(n,"Inputs",e.ins),this.createGroupNode(i,"Outputs",e.outs)]}}createGroupNode(e,t,n){const i=n.properties,r={id:e,text:t,classes:n.isInputGroup()?"ff-inputs":"ff-outputs",children:[]};return i.forEach(e=>{const t=e.path.split(".");let n=r;const i=t.length,o=i-1;for(let r=0;r<i;++r){const i=t[r];let s=n.children.find(e=>e.text===i);if(!s){s={id:r===o?e.key:i,text:i,classes:"",children:[],property:r===o?e:null},n.children.push(s)}n=s}}),r}};As([(0,t.MZ)({attribute:!1})],_s.prototype,"system",void 0),_s=As([(0,t.EM)("ff-property-tree")],_s);const ws=_s;var xs=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Cs=class extends r.Ay{firstConnected(){this.classList.add("ff-scroll-y","sv-panel","sv-inspector-panel"),this.appendChild(new ws(this.system))}};Cs=xs([(0,r.EM)("sv-inspector-panel")],Cs);const Es=Cs;var Ms=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Ss=class extends tn{constructor(){super(),this.path="",this.assetManager=null,this.includeRoot=!0}firstConnected(){super.firstConnected(),this.classList.add("ff-asset-tree"),this.addEventListener("click",this.onContainerClick.bind(this))}connected(){super.connected(),this.assetManager=this.system.components.get(Ne),this.assetManager.on("tree-change",this.onTreeChange,this),this.onTreeChange({type:"tree-change",root:this.assetManager.root})}disconnected(){this.assetManager.off("tree-change",this.onTreeChange,this),this.assetManager=null,super.disconnected()}renderNodeHeader(e){const n=e.info.folder,i=n?"folder":"file",r=n?"ff-folder":"ff-file";return t.qy`<ff-icon class=${r} name=${i}></ff-icon>
            <div class="ff-text ff-ellipsis">${e.info.name}</div>`}getChildren(e){return e.children.sort((e,t)=>{if(e.info.folder&&!t.info.folder)return-1;if(!e.info.folder&&t.info.folder)return 1;const n=e.info.name.toLowerCase(),i=t.info.name.toLowerCase();return n<i?-1:n>i?1:0})}getClasses(e){return e.info.folder?"ff-folder":"ff-file"}getId(e){return e.info.path}isNodeExpanded(e){return e.expanded}isNodeSelected(e){return this.assetManager.isSelected(e)}onTreeChange(e){const t=this.path.split("/").filter(e=>""!==e);let n=e.root;if(n){for(let e=0;e<t.length&&(n=n.children.find(n=>n.info.name===t[e]),n);++e);this.root=n||e.root,this.requestUpdate()}}onContainerClick(){this.assetManager.select(null,!1)}onNodeClick(e,t){const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<30?this.toggleExpanded(t):this.assetManager.select(t,e.ctrlKey)}onNodeDblClick(e,t){this.assetManager.open(t)}canDrop(e,t){return t.info.folder&&(super.canDrop(e,t)||!!e.dataTransfer.types.find(e=>"Files"===e))}onNodeDragStart(e,t){this.assetManager.select(t,e.ctrlKey),e.dataTransfer.setData("text/plain",t.info.path);const n=t.info.type;if("image/jpeg"===n||"image/png"===n){const n=this.assetManager.getAssetURL(t.info.path);e.dataTransfer.setData("text/html",`<img src="${n}">`)}return super.onNodeDragStart(e,t)}onNodeDrop(e,t){super.onNodeDrop(e,t);const n=e.dataTransfer.files;n.length>0?this.assetManager.uploadFiles(n,t):this.assetManager.moveSelected(t)}};Ms([(0,t.MZ)({attribute:!1})],Ss.prototype,"system",void 0),Ms([(0,t.MZ)({type:String})],Ss.prototype,"path",void 0),Ss=Ms([(0,t.EM)("ff-asset-tree")],Ss);var Ts=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let ks=class extends o.Ay{constructor(){super(...arguments),this.basePath=""}get mediaManager(){return this.system.getMainComponent(Xe)}get taskProvider(){return this.system.getMainComponent(mr)}firstConnected(){this.classList.add("sv-panel","sv-asset-panel")}render(){const e=this.taskProvider.ins.mode.value;return this.basePath=e===ur.Expert?"":"articles",o.qy`<div class="sv-panel-header">
                <ff-button icon="folder" title="Create Folder" @click=${this.onClickFolder}></ff-button>
                <ff-button icon="pen" title="Rename Item" @click=${this.onClickRename}></ff-button>
                <ff-button icon="trash" title="Delete Item" @click=${this.onClickDelete}></ff-button>
                <ff-button icon="redo" title="Refresh View" @click=${this.onClickRefresh}></ff-button>
            </div>
            <ff-asset-tree class="ff-flex-item-stretch" draggable .system=${this.system} path=${this.basePath}>
            </ff-asset-tree>`}onClickFolder(){const e=this.mediaManager.selectedAssets[0]||this.mediaManager.root;e&&e.info.folder&&Si.show("Create Folder","Folder name:","prompt","ok-cancel","New Folder").then(t=>{if(t.ok&&t.text){const n=`folder '${t.text}' in '${e.info.path}'`;this.mediaManager.createFolder(e,t.text).then(()=>Ue.Ay.show(`Created ${n}`)).catch(e=>Ue.Ay.show(`Failed to create ${n}`,"error"))}})}onClickRename(){const e=this.mediaManager.selectedAssets;if(1===e.length){const t=e[0];Si.show("Rename Asset","New name:","prompt","ok-cancel",t.info.name).then(e=>{if(e.ok&&e.text){const n=`asset '${t.info.path}' to '${e.text}.'`;this.mediaManager.rename(t,e.text).then(()=>Ue.Ay.show(`Renamed ${n}`)).catch(e=>Ue.Ay.show(`Failed to rename ${n}`,"error"))}})}}onClickDelete(){Si.show("Delete Assets","Are you sure?","warning","ok-cancel").then(e=>{e.ok&&this.mediaManager.deleteSelected().then(()=>Ue.Ay.show("Deleted selected assets.")).catch(()=>Ue.Ay.show("Failed to delete selected assets.","error"))})}onClickRefresh(){this.mediaManager.refresh()}};ks=Ts([(0,o.EM)("sv-asset-panel")],ks);const Ls=ks;var Ds=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};let Is=class extends o.Ay{get taskProvider(){return this.system.getMainComponent(mr)}firstConnected(){this.classList.add("sv-panel","sv-collection-panel")}render(){const e=this.activeDocument.setup.language,t=this.activeDocument.meta;let n=[];return t&&t.collection.ids.forEach(e=>{["title","titles","intros"].includes(e)||n.push(o.qy`<br><div class="sv-label">${e}</div>
                    <ff-line-edit name=${e} text=${t.collection.get(e)} @change=${this.onTextEdit}></ff-line-edit>`)}),o.qy`<div class="ff-scroll-y ff-flex-column" style="padding-bottom: 5px">
            <div class="sv-panel-header">
                <ff-icon name="document"></ff-icon>
                <div class="ff-text">Collection</div>
            </div>
            <sv-property-view .property=${e.ins.activeLanguage}></sv-property-view>
            <div class="sv-indent">
                <div class="sv-label">Title</div>
                <ff-line-edit name="title" text=${this.activeDocument.ins.title.value||"Missing Title"} @change=${this.onTextEdit}></ff-line-edit>
                <div class="sv-label">Intro</div>
                <ff-text-edit name="intro" text=${this.activeDocument.ins.intro.value} @change=${this.onTextEdit}></ff-text-edit>
            </div>
            <div class="sv-label">Copyright</div>
            <ff-line-edit name="copyright" text=${this.activeDocument.ins.copyright.value} @change=${this.onTextEdit}></ff-line-edit>
            ${n}
        </div>`}onTextEdit(e){const t=this.activeDocument;if(t){const n=e.target,i=e.detail.text;"title"===n.name?t.ins.title.setValue(Xn()(i,{allowedTags:["i"]})):"intro"===n.name?t.ins.intro.setValue(Xn()(i,{allowedTags:["i","b","p"]})):"copyright"===n.name?t.ins.copyright.setValue(Xn()(i,{allowedTags:["i","b","a"]})):this.activeDocument.meta.collection.insert(i,n.name)}}onActiveDocument(e,t){e&&(e.setup.language.outs.activeLanguage.off("value",this.onUpdate,this),e.outs.title.off("value",this.onUpdate,this),e.outs.intro.off("value",this.onUpdate,this)),t&&(t.outs.title.on("value",this.onUpdate,this),t.outs.intro.on("value",this.onUpdate,this),t.setup.language.outs.activeLanguage.on("value",this.onUpdate,this))}};Is=Ds([(0,o.EM)("sv-collection-panel")],Is);const Rs=Is;var Os,Ps=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Ci.A.add("hierarchy",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M104 272h192v48h48v-48h192v48h48v-57.59c0-21.17-17.22-38.41-38.41-38.41H344v-64h40c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 8.84 3.58 16.84 9.37 22.63S247.16 160 256 160h40v64H94.41C73.22 224 56 241.23 56 262.41V320h48v-48zm168-160V48h96v64h-96zm336 240h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112h-64v-64h64v64zM368 352h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112h-64v-64h64v64zM128 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-16 112H48v-64h64v64z"/></svg>`),Ci.A.add("select",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"/></svg>`),Ci.A.add("create",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>`),Ci.A.add("compress",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"/></svg>`),Ci.A.add("camera",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"/></svg>`),Ci.A.add("save",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"/></svg>`),Ci.A.add("exit",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"/></svg>`),Ci.A.add("expert",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>`),Ci.A.add("pen",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"/></svg>`),Ci.A.add("redo",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z"/></svg>`),Ci.A.add("video",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M543.9 96c-6.2 0-12.5 1.8-18.2 5.7L416 170.1v-58.3c0-26.4-23.2-47.8-51.8-47.8H51.8C23.2 64 0 85.4 0 111.8v288.4C0 426.6 23.2 448 51.8 448h312.4c28.6 0 51.8-21.4 51.8-47.8v-58.3l109.7 68.3c5.7 4 12.1 5.7 18.2 5.7 16.6 0 32.1-13 32.1-31.5V127.5C576 109 560.5 96 543.9 96zM368 200v198.9c-.6.4-1.8 1.1-3.8 1.1H51.8c-2 0-3.2-.6-3.8-1.1V113.1c.6-.4 1.8-1.1 3.8-1.1h312.4c2 0 3.2.6 3.8 1.1V200zm160 155.2l-112-69.8v-58.7l112-69.8v198.3z"/></svg>`),Ci.A.add("upload",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.83 97.98L285.94 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zM255.95 51.99l76.09 76.08h-76.09V51.99zM336 464.01H47.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H336v287.95zM182.98 227.79l-72.31 71.77c-7.6 7.54-2.26 20.52 8.45 20.52H168v84c0 6.63 5.37 12 12 12h24c6.63 0 12-5.37 12-12v-84h48.88c10.71 0 16.05-12.97 8.45-20.52l-72.31-71.77c-4.99-4.95-13.05-4.95-18.04 0z"/></svg>`),Ci.A.add("download",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M216 236.07c0-6.63-5.37-12-12-12h-24c-6.63 0-12 5.37-12 12v84.01h-48.88c-10.71 0-16.05 12.97-8.45 20.52l72.31 71.77c4.99 4.95 13.04 4.95 18.03 0l72.31-71.77c7.6-7.54 2.26-20.52-8.45-20.52H216v-84.01zM369.83 97.98L285.94 14.1c-9-9-21.2-14.1-33.89-14.1H47.99C21.5.1 0 21.6 0 48.09v415.92C0 490.5 21.5 512 47.99 512h287.94c26.5 0 48.07-21.5 48.07-47.99V131.97c0-12.69-5.17-24.99-14.17-33.99zM255.95 51.99l76.09 76.08h-76.09V51.99zM336 464.01H47.99V48.09h159.97v103.98c0 13.3 10.7 23.99 24 23.99H336v287.95z"/></svg>`),Ci.A.add("trash",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M192 188v216c0 6.627-5.373 12-12 12h-24c-6.627 0-12-5.373-12-12V188c0-6.627 5.373-12 12-12h24c6.627 0 12 5.373 12 12zm100-12h-24c-6.627 0-12 5.373-12 12v216c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V188c0-6.627-5.373-12-12-12zm132-96c13.255 0 24 10.745 24 24v12c0 6.627-5.373 12-12 12h-20v336c0 26.51-21.49 48-48 48H80c-26.51 0-48-21.49-48-48V128H12c-6.627 0-12-5.373-12-12v-12c0-13.255 10.745-24 24-24h74.411l34.018-56.696A48 48 0 0 1 173.589 0h100.823a48 48 0 0 1 41.16 23.304L349.589 80H424zm-269.611 0h139.223L276.16 50.913A6 6 0 0 0 271.015 48h-94.028a6 6 0 0 0-5.145 2.913L154.389 80zM368 128H80v330a6 6 0 0 0 6 6h276a6 6 0 0 0 6-6V128z"/></svg>`),Ci.A.add("cube",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M239.1 7.5l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V130.5c0-20-12.4-37.9-31.1-44.9l-208-78C262 3.4 250 3.4 239.1 7.5zm16.9 45l208 78v.3l-208 84.5-208-84.5v-.3l208-78zM48 182.6l184 74.8v190.2l-184-92v-173zm232 264.9V257.4l184-74.8v172.9l-184 92z"/></svg>`),Ci.A.add("brush",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 244.04 230.05"><path d="M79.13,167.56c4.39,4,12.25,13,9,25.72C83.61,211,63,222.16,57.17,224.64c-9.78,4.19-26.57,6.87-39.23,3.14-7.33-2.16-13-4-16.31-6.33a2.76,2.76,0,0,1-.14-4.34c26.77-22.32,20.51-33.44,37.58-51.6C54.65,148.92,73.8,162.77,79.13,167.56Z"/><path d="M98.28,176.7c-4.27-6.93-5.56-9.07-11.23-14.88S78.43,154.91,72.24,150a4.8,4.8,0,0,1,.19-6.57C98.18,110.73,107,98.87,126.28,77.89c18.23-19.86,65.64-61.59,89.93-76,11.75-7,32.61,14.45,26.1,26.35-13.1,24-54.88,73.91-74.25,92.58-20.68,20-32.23,29-63.77,55.31C102.73,177.72,100.17,178.64,98.28,176.7Z"/></svg>`),Ci.A.add("pointer",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 208.31 207.81"><path d="M6.06.8l171.8,68.67a4.05,4.05,0,0,1,1.36,6.63L76.1,179.22a4.05,4.05,0,0,1-6.63-1.36L.8,6.06A4,4,0,0,1,6.06.8Z"/><rect x="121.07" y="73.15" width="46.71" height="141.55" rx="7.65" transform="translate(348.31 143.57) rotate(135)"/></svg>`),Ci.A.add("eraser",t.qy`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 260.7 217.79"><rect x="92.28" y="16.11" width="128.08" height="176.54" rx="9.22" transform="translate(119.59 -79.96) rotate(45)"/><path d="M38.83,217.77v0L3.12,182.07a10.63,10.63,0,0,1,0-15l32.27-32.27a10.63,10.63,0,0,1,15,0l64.86,64.86a10.64,10.64,0,0,1-7.53,18.16Z"/></svg>`);let Bs=Os=class extends t.Ay{get taskProvider(){return this.application.system.getMainComponent(mr)}get app(){return this.application}constructor(e){if(super(),this.onUnload=this.onUnload.bind(this),e)this.application=e;else{const e={document:this.getAttribute("document"),root:this.getAttribute("root"),dracoRoot:this.getAttribute("dracoRoot"),resourceRoot:this.getAttribute("resourceRoot"),model:this.getAttribute("model"),geometry:this.getAttribute("geometry"),texture:this.getAttribute("texture"),quality:this.getAttribute("quality"),referrer:this.getAttribute("referrer"),mode:this.getAttribute("mode"),expert:this.hasAttribute("expert"),dragdrop:this.hasAttribute("dragdrop"),uiMode:this.getAttribute("uiMode"),uiLang:this.getAttribute("uiLang")};this.application=new Ur(null,e)}window.voyagerStory=this.application,this.dockView=null;const t=this.application.system;t.components.get(mr).ins.mode.on("value",this.onTaskMode,this);const n=this.registry=new Map,i=this.application.explorer;n.set("explorer",()=>new Dr(i)),n.set("tour-editor",()=>new as(t)),n.set("task",()=>new ds(t)),n.set("notes",()=>new gs(t)),n.set("console",()=>new bs(t)),n.set("navigator",()=>new Ro(t)),n.set("hierarchy",()=>new uo(t)),n.set("inspector",()=>new Es(t)),n.set("assets",()=>new Ls(t)),n.set("article-editor",()=>new Xo(t)),n.set("collection",()=>new Rs(t));const r=null!==new URL(window.location.href).searchParams.get("reset")?null:Ir.get("voyager-story",Os.stateKey);this.state=r||{regularLayout:Os.regularLayout,expertLayout:Os.expertLayout}}firstConnected(){this.setStyle({display:"flex",flexDirection:"column"}),this.appendElement(new zo(this.application.system)),this.dockView=this.appendElement(io),this.restoreLayout(),window.addEventListener("beforeunload",this.onUnload)}disconnected(){this.storeLayout(),Ir.set("voyager-story",Os.stateKey,this.state)}onUnload(){this.storeLayout(),Ir.set("voyager-story",Os.stateKey,this.state)}onTaskMode(e){this.storeLayout(),this.restoreLayout()}storeLayout(){const e=this.state;this.taskProvider.expertMode?e.expertLayout=this.dockView.getLayout():e.regularLayout=this.dockView.getLayout()}restoreLayout(){const e=this.state,t=this.taskProvider.expertMode;this.dockView.setLayout(t?e.expertLayout:e.regularLayout,this.registry),this.dockView.setPanelsMovable(!0)}};Bs.stateKey="main-view-2",Bs.regularLayout={type:"strip",direction:"horizontal",size:1,elements:[{type:"strip",direction:"vertical",size:.22,elements:[{type:"stack",size:.35,activePanelIndex:0,panels:[{contentId:"navigator",text:"Navigator"},{contentId:"assets",text:"Media"},{contentId:"collection",text:"Collection"}]},{type:"stack",size:.65,activePanelIndex:0,panels:[{contentId:"task",text:"Task"}]}]},{type:"strip",direction:"vertical",size:.78,elements:[{type:"stack",size:.75,activePanelIndex:0,panels:[{contentId:"explorer",text:"Explorer"}]},{type:"stack",size:.25,activePanelIndex:0,panels:[{contentId:"article-editor",text:"Article Editor"},{contentId:"tour-editor",text:"Tour Editor"},{contentId:"notes",text:"Note Editor"}]}]}]},Bs.expertLayout={type:"strip",direction:"horizontal",size:1,elements:[{type:"strip",direction:"vertical",size:.2,elements:[{type:"stack",size:.3,activePanelIndex:0,panels:[{contentId:"navigator",text:"Navigator"},{contentId:"assets",text:"Media"},{contentId:"collection",text:"Collection"}]},{type:"stack",size:.7,activePanelIndex:0,panels:[{contentId:"task",text:"Task"}]}]},{type:"strip",direction:"vertical",size:.6,elements:[{type:"stack",size:.8,activePanelIndex:0,panels:[{contentId:"explorer",text:"Explorer"}]},{type:"stack",size:.2,activePanelIndex:0,panels:[{contentId:"article-editor",text:"Article Editor"},{contentId:"tour-editor",text:"Tour Editor"},{contentId:"notes",text:"Note Editor"},{contentId:"console",text:"Console"}]}]},{type:"strip",direction:"vertical",size:.2,elements:[{type:"stack",size:.6,activePanelIndex:0,panels:[{contentId:"hierarchy",text:"Hierarchy"}]},{type:"stack",size:.4,activePanelIndex:0,panels:[{contentId:"inspector",text:"Inspector"}]}]}]},Bs=Os=Ps([(0,t.EM)("voyager-story")],Bs);const Ns=Bs})()})();